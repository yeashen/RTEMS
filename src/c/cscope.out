cscope 15 $HOME/Test/rtems/rtems/c -q 0000025801 0002578708
	@src/ada-tests/mptests/mp01/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp01/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp01/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp02/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp02/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp02/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp03/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp03/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp03/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp04/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp04/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp04/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp05/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp05/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp05/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp06/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp06/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp06/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp07/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp07/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp07/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp08/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp08/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp08/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp09/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp09/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp09/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp10/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp10/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp10/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp11/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp11/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp11/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp12/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp12/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp12/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp13/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp13/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp13/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp14/config_base.h

16 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

17 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

19 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/mptests/mp14/node1/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 1

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/mptests/mp14/node2/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

17 
	#CONFIGURE_MP_NODE_NUMBER
 2

	)

19 
	~"../c⁄fig_ba£.h
"

	@src/ada-tests/samples/base_mp/config.h

16 
	#CONFIGURE_MP_APPLICATION


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

23 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

25 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

34 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/samples/base_sp/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/samples/hello/config.h

16 
	#CONFIGURE_APPLICATION


	)

19 
	#CONFIGURE_APPLICATION_DOES_NOT_NEED_CLOCK_DRIVER


	)

20 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

22 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

24 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

29 
	#CONFIGURE_MAXIMUM_TASKS
 1

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/samples/nsecs/config.h

16 
	#CONFIGURE_APPLICATION


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 1

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/samples/ticker/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp01/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp02/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp03/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 3

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp04/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_USER_EXTENSIONS
 1

	)

22 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp05/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

23 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

25 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

30 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp06/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

23 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

25 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

30 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp07/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_USER_EXTENSIONS
 1

	)

22 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	#CONFIGURE_MAXIMUM_TASKS
 5

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp08/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

23 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

25 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

30 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp09/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 10

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 1

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 2

	)

24 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

25 
	#CONFIGURE_MAXIMUM_PARTITIONS
 1

	)

26 
	#CONFIGURE_MAXIMUM_REGIONS
 1

	)

27 
	#CONFIGURE_MAXIMUM_PERIODS
 1

	)

28 
	#CONFIGURE_MAXIMUM_USER_EXTENSIONS
 0

	)

29 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

31 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

33 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

34 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

35 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

36 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

38 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp11/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 3

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 6

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp12/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 8

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 10

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp13/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 10

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp14/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 3

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp15/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_PARTITIONS
 2

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp16/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

22 
	#CONFIGURE_MAXIMUM_REGIONS
 4

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 100

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp17/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 3

	)

22 
	#CONFIGURE_MICROSECONDS_PER_TICK
 
	`RTEMS_MILLISECONDS_TO_MICROSECONDS
(25)

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 1000

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp19/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

23 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

24 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

28 
	#CONFIGURE_MAXIMUM_TASKS
 7

	)

30 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp20/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 7

	)

22 
	#CONFIGURE_MAXIMUM_PERIODS
 10

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp22/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 2

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp23/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_PORTS
 1

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp24/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 4

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 3

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/sp25/config.h

16 
	#CONFIGURE_SPTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_CLOCK_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_REGIONS
 1

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/sptests/spname01/config.h

16 
	#CONFIGURE_APPLICATION


	)

19 
	#CONFIGURE_APPLICATION_DOES_NOT_NEED_CLOCK_DRIVER


	)

20 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

22 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

24 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

25 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

26 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

29 
	#CONFIGURE_MAXIMUM_TASKS
 1

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/support/init.c

6 
	~<b•.h
>

7 
	~<°dlib.h
>

9 
	~<πems/sc‹e/thªadim∂.h
>

14 
g«t_maö
 ( 
¨gc
, **
¨gv
, **
ívp
 );

16 *
	$POSIX_Inô
(

17 *
¨gumít


20 (Ë
	`g«t_maö
 ( 0, 0, 0 );

22 
	`exô
( 0 );

23 
	}
}

29 
uöt32_t
 
mûli£c⁄ds_≥r_tick
();

30 
uöt32_t
 
ticks_≥r_£c⁄d
();

31 
uöt32_t
 
w‹k_•a˚_size
();

32 
uöt32_t
 
is_c⁄figuªd_mu…ùro˚ssög
();

33 
uöt32_t
 
gë_node
();

34 
πems_id
 
tcb_to_id
(
Thªad_C⁄åﬁ
 *
tcb
);

40 
	#CONFIGURE_INIT


	)

41 
	#CONFIGURE_GNAT_RTEMS


	)

42 
	#CONFIGURE_MEMORY_OVERHEAD
 (256)

	)

44 
	~<c⁄fig.h
>

46 
πems_id
 
	$tcb_to_id
(

47 
Thªad_C⁄åﬁ
 *
tcb


50  
tcb
->
Obje˘
.
id
;

51 
	}
}

53 
uöt32_t
 
	$mûli£c⁄ds_≥r_tick
()

55  
CONFIGURE_MICROSECONDS_PER_TICK
 / 1000;

56 
	}
}

58 
uöt32_t
 
	$ticks_≥r_£c⁄d
()

60  
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

61 
	}
}

63 
uöt32_t
 
	$w‹k_•a˚_size
()

65  
CONFIGURE_EXECUTIVE_RAM_SIZE
;

66 
	}
}

68 
uöt32_t
 
	$is_c⁄figuªd_mu…ùro˚ssög
()

70 #i‡
	`deföed
(
RTEMS_MULTIPROCESSING
)

75 
	}
}

77 
uöt32_t
 
	$gë_node
()

80  
_Obje˘s_Loˇl_node
;

81 
	}
}

	@src/ada-tests/tmtests/tm01/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm02/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm03/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm04/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm05/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm06/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm07/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm08/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 101

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm09/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm10/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 110

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm11/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm12/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm13/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm14/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm15/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm16/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm17/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm18/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm19/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm20/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_PARTITIONS
 1

	)

22 
	#CONFIGURE_MAXIMUM_REGIONS
 1

	)

23 
	#CONFIGURE_MAXIMUM_TASKS
 3

	)

24 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

26 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

28 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

31 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

33 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm21/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 102

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 100

	)

23 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 100

	)

24 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 100

	)

25 
	#CONFIGURE_MAXIMUM_PARTITIONS
 100

	)

26 
	#CONFIGURE_MAXIMUM_REGIONS
 100

	)

27 
	#CONFIGURE_MAXIMUM_PORTS
 100

	)

28 
	#CONFIGURE_MAXIMUM_PERIODS
 100

	)

29 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

31 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

33 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

34 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

35 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

36 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

38 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm22/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 103

	)

22 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm23/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_TIMERS
 110

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm24/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

24 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

26 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

27 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

31 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm25/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm28/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_PORTS
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tm29/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 111

	)

22 
	#CONFIGURE_MAXIMUM_PERIODS
 111

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tmck/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/ada-tests/tmtests/tmoverhd/config.h

16 
	#CONFIGURE_TMTEST


	)

18 
	#CONFIGURE_APPLICATION_NEEDS_CONSOLE_DRIVER


	)

19 
	#CONFIGURE_APPLICATION_NEEDS_TIMER_DRIVER


	)

21 
	#CONFIGURE_MAXIMUM_TASKS
 2

	)

22 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 1

	)

23 
	#CONFIGURE_TICKS_PER_TIMESLICE
 0

	)

25 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

27 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 10

	)

28 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 10

	)

29 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 20

	)

30 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 10

	)

32 
	~<πems/c⁄fdefs.h
>

	@src/lib/libbsp/arm/csb337/console/fbcons.c

17 
	~<b•.h
>

18 
	~<πems/libio.h
>

19 
	~<ãrmios.h
>

21 
	~<πems/b•Io.h
>

22 
	~<libchù/£rül.h
>

23 
	~<libchù/£rsuµ.h
>

24 
	~"£d1356.h
"

27 
fbc⁄s_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

28 
fbc⁄s_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

29 
fbc⁄s_ªad
(
mö‹
);

30 
ssize_t
 
fbc⁄s_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

31 
fbc⁄s_öô
(
mö‹
);

32 
fbc⁄s_wrôe_pﬁÀd
(
mö‹
, 
c
);

33 
fbc⁄s_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

36 c⁄° 
c⁄sﬁe_‚s
 
	gfbc⁄s_‚s
 =

38 
libchù_£rül_deÁu…_¥obe
,

39 
fbc⁄s_fú°_›í
,

40 
fbc⁄s_œ°_˛o£
,

41 
fbc⁄s_ªad
,

42 
fbc⁄s_wrôe
,

43 
fbc⁄s_öô
,

44 
fbc⁄s_wrôe_pﬁÀd
,

45 
fbc⁄s_£t_©åibuãs
,

46 
FALSE


57 
	$fbc⁄s_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

61 
	}
}

69 
	$fbc⁄s_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

73 
	}
}

82 
	$fbc⁄s_ªad
(
mö‹
)

86 
	}
}

94 
ssize_t
 
	$fbc⁄s_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
)

96 
i
;

99  
i
=0 ; i<
Àn
 ; i++ )

100 
	`£d_putch¨
–
buf
[
i
] );

103 
	}
}

107 
	$fbc⁄s_öô
(
mö‹
)

110 
	`£d_öô
();

111 
	}
}

114 
	$fbc⁄s_wrôe_pﬁÀd
(
mö‹
, 
c
)

117 
	`£d_putch¨
–
c
 );

118 
	}
}

121 
	$fbc⁄s_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

125 
	}
}

	@src/lib/libbsp/arm/csb337/console/font8x16.h

54 
	#FONT_WIDTH
 8

	)

55 
	#FONT_HEIGHT
 16

	)

56 
	#FIRST_CHAR
 0x20

	)

57 
	#LAST_CHAR
 0x7F

	)

58 
	#CURSOR_ON
 0x7F

	)

59 
	#CURSOR_OFF
 0x20

	)

61 c⁄° 
uöt8_t
 
	gf⁄t8x16
[] = {

	@src/lib/libbsp/arm/csb337/console/sed1356.c

36 
	~<b•.h
>

38 
	~<°dlib.h
>

39 
	~<°dio.h
>

40 
	~"£d1356.h
"

41 
	~"f⁄t8x16.h
"

43 
	gmode900lq
;

44 
	gPIXELS_PER_ROW
;

45 
	gPIXELS_PER_COL
;

46 
	gCOLS_PER_SCREEN
;

47 
	gROWS_PER_SCREEN
;

48 
	gSED_HOR_PULSE_WIDTH_LCD
;

49 
	gSED_VER_PULSE_START_LCD
;

50 
	gSED_HOR_PULSE_START_LCD
;

51 
	gSED_HOR_NONDISP_LCD
;

52 
	gSED_VER_NONDISP_LCD
;

53 
	gSED_VER_PULSE_WIDTH_LCD
;

56 
	g£d_cﬁ‹_dïth
;

57 
	g£d_fg_cﬁ‹
;

58 
	g£d_bg_cﬁ‹
;

59 
	g£d_cﬁ
;

60 
	g£d_row
;

61 
	g£d_di•_mode_¸t
;

62 
	g£d135x_ok
;

63 
	g£d135x_t°
;

64 
uöt32_t
 
	g£d_fb_off£t
;

66 
£d_wrôech¨
(
uöt8_t
 
c
);

67 
£d_s¸ﬁl
();

69 
	#SED_REG_BASE
 0x30000000

	)

70 
	#SED_MEM_BASE
 (
SED_REG_BASE
 + 0x00200000)

	)

71 
	#SED_STEP
 1

	)

73 
	#SED_REG16
(
_x_
Ë*(vﬁ©ûê
uöt16_t
 *)((
uöt32_t
)
SED_REG_BASE
 + (((uöt32_t)_x_ * 
SED_STEP
Ë^ 0)Ë

	)

74 
	#RD_FB16
(
_ªg_
,
_vÆ_
Ë((_vÆ_Ë*((vﬁ©ûê
uöt16_t
 *)(((
uöt32_t
)
SED_MEM_BASE
 + ((uöt32_t)(_ªg_ * 
SED_STEP
Ë^ 0)))))

	)

75 
	#WR_FB16
(
_ªg_
,
_vÆ_
Ë(*((vﬁ©ûê
uöt16_t
 *)(((
uöt32_t
)
SED_MEM_BASE
 + ((uöt32_t)(_ªg_ * 
SED_STEP
Ë^ 0)))Ë(_vÆ_))

	)

78 
	#SED1356_REG_LCD_HOR_DISP
 
	`SED_REG16
(0x32)

	)

79 
	#SED1356_REG_LCD_HOR_NONDISP_™d_START
 
	`SED_REG16
(0x34)

	)

80 
	#SED1356_REG_LCD_HOR_PULSE
 
	`SED_REG16
(0x36)

	)

81 
	#SED1356_REG_LCD_VER_DISP_HT_LO_™d_HI
 
	`SED_REG16
(0x38)

	)

82 
	#SED1356_REG_LCD_VER_NONDISP_™d_START
 
	`SED_REG16
(0x3a)

	)

83 
	#SED1356_REG_LCD_VER_PULSE
 
	`SED_REG16
(0x3c)

	)

84 
	#SED1356_REG_LCD_DISP_MODE_™d_MISC
 
	`SED_REG16
(0x40)

	)

85 
	#SED1356_REG_LCD_DISP_START_LO_™d_MID
 
	`SED_REG16
(0x42)

	)

86 
	#SED1356_REG_LCD_DISP_START_HI
 
	`SED_REG16
(0x44)

	)

87 
	#SED1356_REG_LCD_ADD_OFFSET_LO_™d_HI
 
	`SED_REG16
(0x46)

	)

88 
	#SED1356_REG_LCD_PIXEL_PAN
 
	`SED_REG16
(0x48)

	)

89 
	#SED1356_REG_LCD_FIFO_THRESH_LO_™d_HI
 
	`SED_REG16
(0x4a)

	)

93 
	#H2SED
(
_x_
Ë(_x_)

	)

95 
	#FB_SIZE
 (640 * 480)

	)

96 
	#SED_ROW_SIZE
(
_dïth_
Ë((
PIXELS_PER_ROW
 * _dïth_Ë/ 8)

	)

97 
	#SED_FB_SIZE
(
_dïth_
Ë(((
PIXELS_PER_COL
 * 
PIXELS_PER_ROW
Ë* _dïth_Ë/ 8)

	)

99 
	#FONT_WIDTH
 8

	)

100 
	#FONT_HEIGHT
 16

	)

102 
	#SED_GET_ADD
(
_row_
, 
_cﬁ_
, 
_dïth_
) \

103 (((((
_row_
 * 
PIXELS_PER_ROW
Ë* 
FONT_HEIGHT
) \

104 + (
_cﬁ_
 * 
FONT_WIDTH
)) \

105 * 
_dïth_
Ë/ 8)

	)

108 
	#SED_GET_PHYS_ADD
(
_ªg_
) \

109 (vﬁ©ûê)(
SED_MEM_BASE
 + ((
_ªg_
 * 
SED_STEP
Ë^ 0))

	)

112 
	~"£d1356_16bô.h
"

115 
	g£d135x_t°
 = 0;

117 
	$£d_wrôe_‰ame_buf„r
(

118 
uöt32_t
 
i
,

119 
uöt16_t
 
wr16


122 
	`WR_FB16
(
i
, 
wr16
);

123 
	}
}

125 
	$£d_‰ame_buf„r_size
()

127  
	`SED_FB_SIZE
(
£d_cﬁ‹_dïth
);

128 
	}
}

130 
	$£d_˛r_row
(
ch¨_row
)

132 
£d_mem_add
;

133 
i
;

134 
uöt16_t
 
wr16
;

137 
£d_mem_add
 = 
	`SED_GET_ADD
(
ch¨_row
, 0, 
£d_cﬁ‹_dïth
);

139 #ifde‡
SED_DBG


140 
£d135x_t°
 = 1;

141 
	`¥ötf
("SED CÀ¨ Row %d, FB Add 0x%08lx, CPU Add 0x%08lx.\¿", 
ch¨_row
, 
£d_mem_add
, 
	`SED_GET_PHYS_ADD
(sed_mem_add));

142 
£d135x_t°
 = 0;

145 
£d_cﬁ‹_dïth
)

148 
wr16
 = ((
£d_bg_cﬁ‹
 << 12) | (sed_bg_color << 8) | (sed_bg_color << 4) | (sed_bg_color << 0));

149 #ifde‡
SED_DBG


150 
£d135x_t°
 = 1;

151 
	`¥ötf
("SED CÀ¨ Row %d, FB Add 0x%08lxÅÿ0x%08lx.\¿", 
ch¨_row
, 
£d_mem_add
, sed_mem_add + ((
PIXELS_PER_ROW
 * 
FONT_HEIGHT
) / 2));

152 
£d135x_t°
 = 0;

154 
i
 = 0; i < ((
PIXELS_PER_ROW
 * 
FONT_HEIGHT
) / 2); i += 2){

155 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

156 
£d_mem_add
 += 2;

160 
wr16
 = ((
£d_bg_cﬁ‹
 << 8) | (sed_bg_color << 0));

161 
i
 = 0; i < (
PIXELS_PER_ROW
 * 
FONT_HEIGHT
); i += 2){

162 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

163 
£d_mem_add
 += 2;

167 
wr16
 = ((
vga_lookup
[
£d_bg_cﬁ‹
]));

168 
i
 = 0; i < ((
PIXELS_PER_ROW
 * 
FONT_HEIGHT
) * 2); i += 2){

169 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

170 
£d_mem_add
 += 2;

174 
	}
}

176 
	$£d_öô
()

178 
mode900lq
 = 0;

179 
PIXELS_PER_ROW
 = 640;

180 
PIXELS_PER_COL
 = 480;

181 
COLS_PER_SCREEN
 = 80;

182 
ROWS_PER_SCREEN
 = 30;

183 
SED_HOR_PULSE_WIDTH_LCD
 = 0x0b;

184 
SED_HOR_NONDISP_LCD
 = 0x13;

185 
SED_VER_PULSE_WIDTH_LCD
 = 0x01;

186 
SED_VER_PULSE_START_LCD
 = 0x09;

187 
SED_VER_NONDISP_LCD
 = 0x2c;

189 
£d_cﬁ‹_dïth
 = 16;

190 
£d_fg_cﬁ‹
 = 14;

191 
£d_bg_cﬁ‹
 = 1;

192 
£d_di•_mode_¸t
 = 0;

193 
£d_fb_off£t
 = 0x00;

194 
£d_row
 = 0;

195 
£d_cﬁ
 = 0;

197 
£d135x_ok
 = 1;

198 
£d135x_t°
 = 0;

199 
	`£d_˛órs¸ìn
();

200 
	}
}

208 
	$£d_putch¨
(
c
)

211 i‡((
£d135x_ok
 =0Ë|| (
£d135x_t°
 == 1)) ;

216 
c
) {

218 
£d_cﬁ
 = 0;

221 
£d_cﬁ
 = 0;

222 
	`£d_s¸ﬁl
();

225 
£d_cﬁ
--;

226 i‡(
£d_cﬁ
 < 0) {

227 
£d_row
--;

228 i‡(
£d_row
 < 0)

229 
£d_row
 = 0;

230 
£d_cﬁ
 = 
COLS_PER_SCREEN
 - 1;

232 
c
 = 0;

233 
	`£d_wrôech¨
(
c
);

236 i‡(((
uöt8_t
)
c
 < 
FIRST_CHAR
Ë|| ((uöt8_t)¯> 
LAST_CHAR
))

238 
c
 -
FIRST_CHAR
;

239 
	`£d_wrôech¨
(
c
);

241 
£d_cﬁ
++;

242 i‡(
£d_cﬁ
 =
COLS_PER_SCREEN
) {

243 
£d_cﬁ
 = 0;

244 
	`£d_s¸ﬁl
();

249 
	}
}

257 
	$£d_wrôech¨
(
uöt8_t
 
c
)

259 
uöt32_t
 
£d_mem_add
;

260 
f⁄t_row
, 
f⁄t_cﬁ
;

261 
uöt8_t
 
f⁄t_d©a8
;

262 
uöt16_t
 
wr16
;

267 
£d_mem_add
 = 
	`SED_GET_ADD
(
£d_row
, 
£d_cﬁ
, 
£d_cﬁ‹_dïth
);

269 #ifde‡
SED_DBG


270 
£d135x_t°
 = 1;

271 
	`¥ötf
("SED wrôech¨áàrow %d, cﬁ %d, FB Add 0x%08lx, CPU Add 0x%08lx.\¿", 
£d_row
, 
£d_cﬁ
, 
£d_mem_add
, 
	`SED_GET_PHYS_ADD
(sed_mem_add));

272 
£d135x_t°
 = 0;

275 i‡(
FONT_WIDTH
 == 8) {

276 
£d_cﬁ‹_dïth
) {

279 
f⁄t_row
 = 0; f⁄t_row < 
FONT_HEIGHT
; font_row++) {

281 
f⁄t_d©a8
 = 
f⁄t8x16
[(
c
 * 
FONT_HEIGHT
Ë+ 
f⁄t_row
];

284 
f⁄t_cﬁ
 = 0; font_col < 8; font_col += 4)

287 
wr16
 = (((
f⁄t_d©a8
 & 0x80Ë? 
£d_fg_cﬁ‹
 << 12 : 
£d_bg_cﬁ‹
 << 12)

288 | ((
f⁄t_d©a8
 & 0x40Ë? 
£d_fg_cﬁ‹
 << 8 : 
£d_bg_cﬁ‹
 << 8)

289 | ((
f⁄t_d©a8
 & 0x20Ë? 
£d_fg_cﬁ‹
 << 4 : 
£d_bg_cﬁ‹
 << 4)

290 | ((
f⁄t_d©a8
 & 0x10Ë? 
£d_fg_cﬁ‹
 << 0 : 
£d_bg_cﬁ‹
 << 0));

291 
f⁄t_d©a8
 = font_data8 << 4;

292 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

296 i‡(
£d_row
 > (
ROWS_PER_SCREEN
 - 1)) {

297 
	`WR_FB16
((
£d_mem_add
 - 
	`SED_FB_SIZE
(
£d_cﬁ‹_dïth
)), 
wr16
);

299 
£d_mem_add
 += 2;

302 
£d_mem_add
 +(
	`SED_ROW_SIZE
(
£d_cﬁ‹_dïth
Ë- ((
FONT_WIDTH
 * sed_color_depth) / 8));

308 
f⁄t_row
 = 0; f⁄t_row < 
FONT_HEIGHT
; font_row++) {

310 
f⁄t_d©a8
 = 
f⁄t8x16
[(
c
 * 
FONT_HEIGHT
Ë+ 
f⁄t_row
];

311 
f⁄t_cﬁ
 = 0; font_col < 8; font_col += 2)

314 
wr16
 = (((
f⁄t_d©a8
 & 0x80Ë? 
£d_fg_cﬁ‹
 << 8 : 
£d_bg_cﬁ‹
 << 8)

315 | ((
f⁄t_d©a8
 & 0x40Ë? 
£d_fg_cﬁ‹
 << 0 : 
£d_bg_cﬁ‹
 << 0));

316 
f⁄t_d©a8
 = font_data8 << 2;

317 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

321 i‡(
£d_row
 > (
ROWS_PER_SCREEN
 - 1)) {

322 
	`WR_FB16
((
£d_mem_add
 - 
	`SED_FB_SIZE
(
£d_cﬁ‹_dïth
)), 
wr16
);

324 
£d_mem_add
 += 2;

327 
£d_mem_add
 +(
	`SED_ROW_SIZE
(
£d_cﬁ‹_dïth
Ë- ((
FONT_WIDTH
 * sed_color_depth) / 8));

333 
f⁄t_row
 = 0; f⁄t_row < 
FONT_HEIGHT
; font_row++) {

335 
f⁄t_d©a8
 = 
f⁄t8x16
[(
c
 * 
FONT_HEIGHT
Ë+ 
f⁄t_row
];

336 
f⁄t_cﬁ
 = 0; font_col < 8; font_col++)

339 
wr16
 = ((
f⁄t_d©a8
 & 0x80) ?

340 
vga_lookup
[
£d_fg_cﬁ‹
] : vga_lookup[
£d_bg_cﬁ‹
]);

341 
f⁄t_d©a8
 = font_data8 << 1;

342 
	`WR_FB16
(
£d_mem_add
, 
wr16
);

346 i‡(
£d_row
 > (
ROWS_PER_SCREEN
 - 1)) {

347 
	`WR_FB16
((
£d_mem_add
 - 
	`SED_FB_SIZE
(
£d_cﬁ‹_dïth
)), 
wr16
);

349 
£d_mem_add
 += 2;

352 
£d_mem_add
 +(
	`SED_ROW_SIZE
(
£d_cﬁ‹_dïth
Ë- ((
FONT_WIDTH
 * sed_color_depth) / 8));

362 
	}
}

364 
	$£d_upd©e_fb_off£t
()

367 i‡(
£d_di•_mode_¸t
) {

371 i‡(
SED1356_REG_DISP_MODE
 & 
	`H2SED
(
SED1356_DISP_MODE_CRT
)) {

372 (
SED1356_REG_CRT_VER_NONDISP_™d_START
 & 
	`H2SED
(
SED1356_VER_NONDISP
)) == 0) {}

373 (
SED1356_REG_CRT_VER_NONDISP_™d_START
 & 
	`H2SED
(
SED1356_VER_NONDISP
)) == 1) {}

375 
SED1356_REG_CRT_DISP_START_LO_™d_MID
 = 
	`H2SED
(((
£d_fb_off£t
 & 0x00ffff) >> 0));

376 
SED1356_REG_CRT_DISP_START_HI
 = 
	`H2SED
(((
£d_fb_off£t
 & 0x070000) >> 16));

380 i‡(
SED1356_REG_DISP_MODE
 & 
	`H2SED
(
SED1356_DISP_MODE_LCD
)) {

381 (
SED1356_REG_LCD_VER_NONDISP_™d_START
 & 
	`H2SED
(
SED1356_VER_NONDISP
)) == 0) {}

382 (
SED1356_REG_LCD_VER_NONDISP_™d_START
 & 
	`H2SED
(
SED1356_VER_NONDISP
)) == 1) {}

384 
SED1356_REG_LCD_DISP_START_LO_™d_MID
 = 
	`H2SED
(((
£d_fb_off£t
 & 0x00ffff) >> 0));

385 
SED1356_REG_LCD_DISP_START_HI
 = 
	`H2SED
(((
£d_fb_off£t
 & 0x070000) >> 16));

387 
	}
}

408 
	$£d_s¸ﬁl
()

410 
£d_row
++;

413 
	`£d_˛r_row
(
£d_row
);

414 i‡(
£d_row
 > (
ROWS_PER_SCREEN
 - 1)) {

415 
	`£d_˛r_row
(
£d_row
 - 
ROWS_PER_SCREEN
);

421 i‡(
£d_row
 > (
ROWS_PER_SCREEN
 - 1)) {

422 i‡(
£d_row
 > ((
ROWS_PER_SCREEN
 * 2) - 1)) {

423 
£d_fb_off£t
 = 0x00;

424 
£d_row
 = 0;

425 
	`£d_˛órs¸ìn
();

428 
£d_fb_off£t
 +(
	`SED_GET_ADD
(1, 0, 
£d_cﬁ‹_dïth
) / 2);

430 
	`£d_upd©e_fb_off£t
();

432 
	}
}

434 
	$£d_put°rög
(*
s
)

436 *
p
 = 
s
;

437 *
p
)

438 
	`£d_putch¨
(*
p
++);

439 
	}
}

441 
	$£d_˛órs¸ìn
()

443 
i
;

444 
uöt16_t
 
wr16
;

445 
bg
 = 
£d_bg_cﬁ‹
;

446 
fbsize
 = 
	`£d_‰ame_buf„r_size
();

449 
fbsize
 *= 2;

452 
£d_cﬁ‹_dïth
){

453 4: 
wr16
 = 
bg
 | bg << 4 | bg << 8 | bg << 12; ;

454 8: 
wr16
 = 
bg
 | bg << 8; ;

456 : 
wr16
 = 
vga_lookup
[
bg
]; ;

458 
i
 = 0; i < 
fbsize
; i += 2){

459 
	`£d_wrôe_‰ame_buf„r
(
i
, 
wr16
);

461 
	}
}

	@src/lib/libbsp/arm/csb337/console/sed1356_16bit.h

53 #i‚de‡
__£d1356_16bô_h


54 
	#__£d1356_16bô_h


	)

56 
	~"bôs.h
"

79 
	#SED1356_REG_REV_™d_MISC
 
	`SED_REG16
(0x00)

	)

80 
	#SED1356_REG_GPIO_CFG
 
	`SED_REG16
(0x04)

	)

81 
	#SED1356_REG_GPIO_CTL
 
	`SED_REG16
(0x08)

	)

82 
	#SED1356_REG_MD_CFG_RD_LO_™d_HI
 
	`SED_REG16
(0x0c)

	)

83 
	#SED1356_REG_MCLK_CFG
 
	`SED_REG16
(0x10)

	)

84 
	#SED1356_REG_LCD_PCLK_CFG
 
	`SED_REG16
(0x14)

	)

85 
	#SED1356_REG_CRT_PCLK_CFG
 
	`SED_REG16
(0x18)

	)

86 
	#SED1356_REG_MEDIA_PCLK_CFG
 
	`SED_REG16
(0x1c)

	)

87 
	#SED1356_REG_WAIT_STATE
 
	`SED_REG16
(0x1e)

	)

88 
	#SED1356_REG_MEM_CFG_™d_REF_RATE
 
	`SED_REG16
(0x20)

	)

89 
	#SED1356_REG_MEM_TMG0_™d_1
 
	`SED_REG16
(0x2a)

	)

90 
	#SED1356_REG_PANEL_TYPE_™d_MOD_RATE
 
	`SED_REG16
(0x30)

	)

92 
	#SED1356_REG_LCD_HOR_DISP
 
	`SED_REG16
(0x32)

	)

93 
	#SED1356_REG_LCD_HOR_NONDISP_™d_START
 
	`SED_REG16
(0x34)

	)

94 
	#SED1356_REG_LCD_HOR_PULSE
 
	`SED_REG16
(0x36)

	)

95 
	#SED1356_REG_LCD_VER_DISP_HT_LO_™d_HI
 
	`SED_REG16
(0x38)

	)

96 
	#SED1356_REG_LCD_VER_NONDISP_™d_START
 
	`SED_REG16
(0x3a)

	)

97 
	#SED1356_REG_LCD_VER_PULSE
 
	`SED_REG16
(0x3c)

	)

98 
	#SED1356_REG_LCD_DISP_MODE_™d_MISC
 
	`SED_REG16
(0x40)

	)

99 
	#SED1356_REG_LCD_DISP_START_LO_™d_MID
 
	`SED_REG16
(0x42)

	)

100 
	#SED1356_REG_LCD_DISP_START_HI
 
	`SED_REG16
(0x44)

	)

101 
	#SED1356_REG_LCD_ADD_OFFSET_LO_™d_HI
 
	`SED_REG16
(0x46)

	)

102 
	#SED1356_REG_LCD_PIXEL_PAN
 
	`SED_REG16
(0x48)

	)

103 
	#SED1356_REG_LCD_FIFO_THRESH_LO_™d_HI
 
	`SED_REG16
(0x4a)

	)

105 
	#SED1356_REG_CRT_HOR_DISP
 
	`SED_REG16
(0x50)

	)

106 
	#SED1356_REG_CRT_HOR_NONDISP_™d_START
 
	`SED_REG16
(0x52)

	)

107 
	#SED1356_REG_CRT_HOR_PULSE
 
	`SED_REG16
(0x54)

	)

108 
	#SED1356_REG_CRT_VER_DISP_HT_LO_™d_HI
 
	`SED_REG16
(0x56)

	)

109 
	#SED1356_REG_CRT_VER_NONDISP_™d_START
 
	`SED_REG16
(0x58)

	)

110 
	#SED1356_REG_CRT_VER_PULSE_™d_OUT_CTL
 
	`SED_REG16
(0x5a)

	)

111 
	#SED1356_REG_CRT_DISP_MODE
 
	`SED_REG16
(0x60)

	)

112 
	#SED1356_REG_CRT_DISP_START_LO_™d_MID
 
	`SED_REG16
(0x62)

	)

113 
	#SED1356_REG_CRT_DISP_START_HI
 
	`SED_REG16
(0x64)

	)

114 
	#SED1356_REG_CRT_ADD_OFFSET_LO_™d_HI
 
	`SED_REG16
(0x66)

	)

115 
	#SED1356_REG_CRT_PIXEL_PAN
 
	`SED_REG16
(0x68)

	)

116 
	#SED1356_REG_CRT_FIFO_THRESH_LO_™d_HI
 
	`SED_REG16
(0x6a)

	)

118 
	#SED1356_REG_LCD_CURSOR_CTL_™d_START_ADD
 
	`SED_REG16
(0x70)

	)

119 
	#SED1356_REG_LCD_CURSOR_X_POS_LO_™d_HI
 
	`SED_REG16
(0x72)

	)

120 
	#SED1356_REG_LCD_CURSOR_Y_POS_LO_™d_HI
 
	`SED_REG16
(0x74)

	)

121 
	#SED1356_REG_LCD_CURSOR_BLUE_™d_GREEN_CLR_0
 
	`SED_REG16
(0x76)

	)

122 
	#SED1356_REG_LCD_CURSOR_RED_CLR_0
 
	`SED_REG16
(0x78)

	)

123 
	#SED1356_REG_LCD_CURSOR_BLUE_™d_GREEN_CLR_1
 
	`SED_REG16
(0x7a)

	)

124 
	#SED1356_REG_LCD_CURSOR_RED_CLR_1
 
	`SED_REG16
(0x7c)

	)

125 
	#SED1356_REG_LCD_CURSOR_FIFO_THRESH
 
	`SED_REG16
(0x7e)

	)

127 
	#SED1356_REG_CRT_CURSOR_CTL_™d_START_ADD
 
	`SED_REG16
(0x80)

	)

128 
	#SED1356_REG_CRT_CURSOR_X_POS_LO_™d_HI
 
	`SED_REG16
(0x82)

	)

129 
	#SED1356_REG_CRT_CURSOR_Y_POS_LO_™d_HI
 
	`SED_REG16
(0x84)

	)

130 
	#SED1356_REG_CRT_CURSOR_BLUE_™d_GREEN_CLR_0
 
	`SED_REG16
(0x86)

	)

131 
	#SED1356_REG_CRT_CURSOR_RED_CLR_0
 
	`SED_REG16
(0x88)

	)

132 
	#SED1356_REG_CRT_CURSOR_BLUE_™d_GREEN_CLR_1
 
	`SED_REG16
(0x8a)

	)

133 
	#SED1356_REG_CRT_CURSOR_RED_CLR_1
 
	`SED_REG16
(0x8c)

	)

134 
	#SED1356_REG_CRT_CURSOR_FIFO_THRESH
 
	`SED_REG16
(0x8e)

	)

136 
	#SED1356_REG_BLT_CTL_0_™d_1
 
	`SED_REG16
(0x100)

	)

137 
	#SED1356_REG_BLT_ROP_CODE_™d_BLT_OP
 
	`SED_REG16
(0x102)

	)

138 
	#SED1356_REG_BLT_SRC_START_LO_™d_MID
 
	`SED_REG16
(0x104)

	)

139 
	#SED1356_REG_BLT_SRC_START_HI
 
	`SED_REG16
(0x106)

	)

140 
	#SED1356_REG_BLT_DEST_START_LO_™d_MID
 
	`SED_REG16
(0x108)

	)

141 
	#SED1356_REG_BLT_DEST_START_HI
 
	`SED_REG16
(0x10a)

	)

142 
	#SED1356_REG_BLT_ADD_OFFSET_LO_™d_HI
 
	`SED_REG16
(0x10c)

	)

143 
	#SED1356_REG_BLT_WID_LO_™d_HI
 
	`SED_REG16
(0x110)

	)

144 
	#SED1356_REG_BLT_HGT_LO_™d_HI
 
	`SED_REG16
(0x112)

	)

145 
	#SED1356_REG_BLT_BG_CLR_LO_™d_HI
 
	`SED_REG16
(0x114)

	)

146 
	#SED1356_REG_BLT_FG_CLR_LO_™d_HI
 
	`SED_REG16
(0x118)

	)

148 
	#SED1356_REG_LUT_MODE
 
	`SED_REG16
(0x1e0)

	)

149 
	#SED1356_REG_LUT_ADD
 
	`SED_REG16
(0x1e2)

	)

150 
	#SED1356_REG_LUT_DATA
 
	`SED_REG16
(0x1e4)

	)

152 
	#SED1356_REG_PWR_CFG_™d_STAT
 
	`SED_REG16
(0x1f0)

	)

153 
	#SED1356_REG_WATCHDOG_CTL
 
	`SED_REG16
(0x1f4)

	)

154 
	#SED1356_REG_DISP_MODE
 
	`SED_REG16
(0x1fc)

	)

161 
	#SED1356_REV_ID_MASK
 0xf¯

	)

162 
	#SED1356_REV_ID_1356
 
BIT4


	)

163 
	#SED1356_REV_ID_1355
 
BIT3


	)

166 
	#SED1356_MISC_HOST_DIS
 
BIT7
 << 8

	)

169 
	#SED1356_GPIO_GPIO3
 
BIT3


	)

170 
	#SED1356_GPIO_GPIO2
 
BIT2


	)

171 
	#SED1356_GPIO_GPIO1
 
BIT1


	)

174 
	#SED1356_MCLK_DIV2
 
BIT4


	)

175 
	#SED1356_MCLK_SRC_BCLK
 
BIT0


	)

176 
	#SED1356_MCLK_SRC_CLKI
 0x00

	)

181 
	#SED1356_PCLK_X2
 
BIT7


	)

182 
	#SED1356_PCLK_DIV1
 0x00 << 4

	)

183 
	#SED1356_PCLK_DIV2
 0x01 << 4

	)

184 
	#SED1356_PCLK_DIV3
 0x02 << 4

	)

185 
	#SED1356_PCLK_DIV4
 0x03 << 4

	)

186 
	#SED1356_PCLK_SRC_CLKI
 0x00

	)

187 
	#SED1356_PCLK_SRC_BCLK
 0x01

	)

188 
	#SED1356_PCLK_SRC_CLKI2
 0x02

	)

189 
	#SED1356_PCLK_SRC_MCLK
 0x03

	)

192 
	#SED1356_MEM_CFG_2CAS_EDO
 0x00

	)

193 
	#SED1356_MEM_CFG_2CAS_FPM
 0x01

	)

194 
	#SED1356_MEM_CFG_2WE_EDO
 0x02

	)

195 
	#SED1356_MEM_CFG_2WE_FPM
 0x03

	)

196 
	#SED1356_MEM_CFG_MASK
 0x03

	)

199 
	#SED1356_REF_TYPE_CBR
 0x00 << 6 << 8

	)

200 
	#SED1356_REF_TYPE_SELF
 0x01 << 6 << 8

	)

201 
	#SED1356_REF_TYPE_NONE
 0x02 << 6 << 8

	)

202 
	#SED1356_REF_TYPE_MASK
 0x03 << 6 << 8

	)

203 
	#SED1356_REF_RATE_64
 0x00 << 0 << 8

	)

204 
	#SED1356_REF_RATE_128
 0x01 << 0 << 8

	)

205 
	#SED1356_REF_RATE_256
 0x02 << 0 << 8

	)

206 
	#SED1356_REF_RATE_512
 0x03 << 0 << 8

	)

207 
	#SED1356_REF_RATE_1024
 0x04 << 0 << 8

	)

208 
	#SED1356_REF_RATE_2048
 0x05 << 0 << 8

	)

209 
	#SED1356_REF_RATE_4096
 0x06 << 0 << 8

	)

210 
	#SED1356_REF_RATE_8192
 0x07 << 0 << 8

	)

211 
	#SED1356_REF_RATE_MASK
 0x07 << 0 << 8

	)

214 
	#SED1356_MEM_TMG0_EDO50_MCLK40
 0x01

	)

215 
	#SED1356_MEM_TMG0_EDO50_MCLK33
 0x01

	)

216 
	#SED1356_MEM_TMG0_EDO60_MCLK33
 0x01

	)

217 
	#SED1356_MEM_TMG0_EDO50_MCLK30
 0x12

	)

218 
	#SED1356_MEM_TMG0_EDO60_MCLK30
 0x01

	)

219 
	#SED1356_MEM_TMG0_EDO70_MCLK30
 0x00

	)

220 
	#SED1356_MEM_TMG0_EDO50_MCLK25
 0x12

	)

221 
	#SED1356_MEM_TMG0_EDO60_MCLK25
 0x12

	)

222 
	#SED1356_MEM_TMG0_EDO70_MCLK25
 0x01

	)

223 
	#SED1356_MEM_TMG0_EDO80_MCLK25
 0x00

	)

224 
	#SED1356_MEM_TMG0_EDO50_MCLK20
 0x12

	)

225 
	#SED1356_MEM_TMG0_EDO60_MCLK20
 0x12

	)

226 
	#SED1356_MEM_TMG0_EDO70_MCLK20
 0x12

	)

227 
	#SED1356_MEM_TMG0_EDO80_MCLK20
 0x01

	)

228 
	#SED1356_MEM_TMG0_FPM50_MCLK25
 0x12

	)

229 
	#SED1356_MEM_TMG0_FPM60_MCLK25
 0x01

	)

230 
	#SED1356_MEM_TMG0_FPM50_MCLK20
 0x12

	)

231 
	#SED1356_MEM_TMG0_FPM60_MCLK20
 0x12

	)

232 
	#SED1356_MEM_TMG0_FPM70_MCLK20
 0x11

	)

233 
	#SED1356_MEM_TMG0_FPM80_MCLK20
 0x01

	)

236 
	#SED1356_MEM_TMG1_EDO50_MCLK40
 0x01 << 8

	)

237 
	#SED1356_MEM_TMG1_EDO50_MCLK33
 0x01 << 8

	)

238 
	#SED1356_MEM_TMG1_EDO60_MCLK33
 0x01 << 8

	)

239 
	#SED1356_MEM_TMG1_EDO50_MCLK30
 0x02 << 8

	)

240 
	#SED1356_MEM_TMG1_EDO60_MCLK30
 0x01 << 8

	)

241 
	#SED1356_MEM_TMG1_EDO70_MCLK30
 0x00 << 8

	)

242 
	#SED1356_MEM_TMG1_EDO50_MCLK25
 0x02 << 8

	)

243 
	#SED1356_MEM_TMG1_EDO60_MCLK25
 0x02 << 8

	)

244 
	#SED1356_MEM_TMG1_EDO70_MCLK25
 0x01 << 8

	)

245 
	#SED1356_MEM_TMG1_EDO80_MCLK25
 0x01 << 8

	)

246 
	#SED1356_MEM_TMG1_EDO50_MCLK20
 0x02 << 8

	)

247 
	#SED1356_MEM_TMG1_EDO60_MCLK20
 0x02 << 8

	)

248 
	#SED1356_MEM_TMG1_EDO70_MCLK20
 0x02 << 8

	)

249 
	#SED1356_MEM_TMG1_EDO80_MCLK20
 0x01 << 8

	)

250 
	#SED1356_MEM_TMG1_FPM50_MCLK25
 0x02 << 8

	)

251 
	#SED1356_MEM_TMG1_FPM60_MCLK25
 0x01 << 8

	)

252 
	#SED1356_MEM_TMG1_FPM50_MCLK20
 0x02 << 8

	)

253 
	#SED1356_MEM_TMG1_FPM60_MCLK20
 0x02 << 8

	)

254 
	#SED1356_MEM_TMG1_FPM70_MCLK20
 0x02 << 8

	)

255 
	#SED1356_MEM_TMG1_FPM80_MCLK20
 0x01 << 8

	)

262 
	#SED1356_PANEL_TYPE_EL
 
BIT7


	)

263 
	#SED1356_PANEL_TYPE_4_9
 (0x00 << 4Ë

	)

264 
	#SED1356_PANEL_TYPE_8_12
 (0x01 << 4Ë

	)

265 
	#SED1356_PANEL_TYPE_16
 (0x02 << 4Ë

	)

266 
	#SED1356_PANEL_TYPE_MASK
 (0x03 << 4)

	)

267 
	#SED1356_PANEL_TYPE_FMT
 
BIT3


	)

268 
	#SED1356_PANEL_TYPE_CLR
 
BIT2


	)

269 
	#SED1356_PANEL_TYPE_DUAL
 
BIT1


	)

270 
	#SED1356_PANEL_TYPE_TFT
 
BIT0


	)

275 
	#SED1356_PULSE_POL_HIGH
 
BIT7


	)

276 
	#SED1356_PULSE_POL_LOW
 0x00

	)

277 
	#SED1356_PULSE_WID
(
_x_
Ë(_x_ & 0x0fË

	)

280 
	#SED1356_LCD_DISP_BLANK
 
BIT7


	)

281 
	#SED1356_LCD_DISP_SWIV_NORM
 (0x00 << 4Ë

	)

282 
	#SED1356_LCD_DISP_SWIV_90
 (0x00 << 4)

	)

283 
	#SED1356_LCD_DISP_SWIV_180
 (0x01 << 4)

	)

284 
	#SED1356_LCD_DISP_SWIV_270
 (0x01 << 4)

	)

285 
	#SED1356_LCD_DISP_SWIV_MASK
 (0x01 << 4)

	)

286 
	#SED1356_LCD_DISP_16BPP
 0x05

	)

287 
	#SED1356_LCD_DISP_15BPP
 0x04

	)

288 
	#SED1356_LCD_DISP_8BPP
 0x03

	)

289 
	#SED1356_LCD_DISP_4BPP
 0x02

	)

290 
	#SED1356_LCD_DISP_BPP_MASK
 0x07

	)

293 
	#SED1356_LCD_MISC_DITH
 
BIT1
 << 8

	)

294 
	#SED1356_LCD_MISC_DUAL
 
BIT0
 << 8

	)

297 
	#SED1356_CRT_OUT_CHROM
 
BIT5
 << 8

	)

298 
	#SED1356_CRT_OUT_LUM
 
BIT4
 << 8

	)

299 
	#SED1356_CRT_OUT_DAC_LVL
 
BIT3
 << 8

	)

300 
	#SED1356_CRT_OUT_SVIDEO
 
BIT1
 << 8

	)

301 
	#SED1356_CRT_OUT_PAL
 
BIT0
 << 8

	)

304 
	#SED1356_CRT_DISP_BLANK
 
BIT7


	)

305 
	#SED1356_CRT_DISP_16BPP
 0x05

	)

306 
	#SED1356_CRT_DISP_15BPP
 0x04

	)

307 
	#SED1356_CRT_DISP_8BPP
 0x03

	)

308 
	#SED1356_CRT_DISP_4BPP
 0x02

	)

309 
	#SED1356_CRT_DISP_BPP_MASK
 0x07

	)

312 
	#SED1356_DISP_SWIV_NORM
 (0x00 << 6Ë

	)

313 
	#SED1356_DISP_SWIV_90
 (0x01 << 6)

	)

314 
	#SED1356_DISP_SWIV_180
 (0x00 << 6)

	)

315 
	#SED1356_DISP_SWIV_270
 (0x01 << 6)

	)

316 
	#SED1356_DISP_MODE_OFF
 0x00

	)

317 
	#SED1356_DISP_MODE_LCD
 0x01

	)

318 
	#SED1356_DISP_MODE_CRT
 0x02

	)

319 
	#SED1356_DISP_MODE_LCD_CRT
 0x03

	)

320 
	#SED1356_DISP_MODE_TV
 0x04

	)

321 
	#SED1356_DISP_MODE_TV_LCD
 0x05

	)

322 
	#SED1356_DISP_MODE_TV_FLICK
 0x06

	)

323 
	#SED1356_DISP_MODE_TV_LCD_FLICK
 0x07

	)

326 
	#SED1356_PWR_PCLK
 
BIT1


	)

327 
	#SED1356_PWR_MCLK
 
BIT0


	)

330 
	#SED1356_VER_NONDISP
 
BIT7


	)

333 
PIXELS_PER_ROW
;

334 
PIXELS_PER_COL
;

335 
	#BYTES_PER_PIXEL
 2

	)

336 
COLS_PER_SCREEN
;

337 
ROWS_PER_SCREEN
;

341 
	#RED_SUBPIXEL
(
n
Ë(“ & 0x1fË<< 11)

	)

342 
	#GREEN_SUBPIXEL
(
n
Ë(“ & 0x1fË<< 5)

	)

343 
	#BLUE_SUBPIXEL
(
n
Ë(“ & 0x1fË<< 0)

	)

347 
	#LU_BLACK
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x00))

	)

348 
	#LU_BLUE
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x0f))

	)

349 
	#LU_GREEN
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x0fË| 
	`BLUE_SUBPIXEL
(0x00))

	)

350 
	#LU_CYAN
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x0fË| 
	`BLUE_SUBPIXEL
(0x0f))

	)

351 
	#LU_RED
 (
	`RED_SUBPIXEL
(0x0fË| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x00))

	)

352 
	#LU_VIOLET
 (
	`RED_SUBPIXEL
(0x0fË| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x0f))

	)

353 
	#LU_YELLOW
 (
	`RED_SUBPIXEL
(0x0fË| 
	`GREEN_SUBPIXEL
(0x0fË| 
	`BLUE_SUBPIXEL
(0x00))

	)

354 
	#LU_GREY
 (
	`RED_SUBPIXEL
(0x0fË| 
	`GREEN_SUBPIXEL
(0x0fË| 
	`BLUE_SUBPIXEL
(0x0f))

	)

355 
	#LU_WHITE
 (
	`RED_SUBPIXEL
(0x17Ë| 
	`GREEN_SUBPIXEL
(0x17Ë| 
	`BLUE_SUBPIXEL
(0x17))

	)

356 
	#LU_BRT_BLUE
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x1f))

	)

357 
	#LU_BRT_GREEN
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x1fË| 
	`BLUE_SUBPIXEL
(0x00))

	)

358 
	#LU_BRT_CYAN
 (
	`RED_SUBPIXEL
(0x00Ë| 
	`GREEN_SUBPIXEL
(0x1fË| 
	`BLUE_SUBPIXEL
(0x1f))

	)

359 
	#LU_BRT_RED
 (
	`RED_SUBPIXEL
(0x1fË| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x00))

	)

360 
	#LU_BRT_VIOLET
 (
	`RED_SUBPIXEL
(0x1fË| 
	`GREEN_SUBPIXEL
(0x00Ë| 
	`BLUE_SUBPIXEL
(0x1f))

	)

361 
	#LU_BRT_YELLOW
 (
	`RED_SUBPIXEL
(0x1fË| 
	`GREEN_SUBPIXEL
(0x1fË| 
	`BLUE_SUBPIXEL
(0x00))

	)

362 
	#LU_BRT_WHITE
 (
	`RED_SUBPIXEL
(0x1fË| 
	`GREEN_SUBPIXEL
(0x1fË| 
	`BLUE_SUBPIXEL
(0x1f))

	)

382 
	#BLUE
 (0x14 << 0)

	)

383 
	#GREEN
 (0x14 << 6)

	)

384 
	#RED
 (0x14 << 11)

	)

386 
	#HALF_BLUE
 (0x0®<< 0)

	)

387 
	#HALF_GREEN
 (0x0®<< 6)

	)

388 
	#HALF_RED
 (0x0®<< 11)

	)

391 
	#BRT_BLUE
 (0x1ê<< 0)

	)

392 
	#BRT_GREEN
 (0x1ê<< 6)

	)

393 
	#BRT_RED
 (0x1ê<< 11)

	)

395 
	#LU_BLACK
 0

	)

396 
	#LU_BLUE
 (
BLUE
)

	)

397 
	#LU_GREEN
 (
GREEN
)

	)

398 
	#LU_CYAN
 (
GREEN
 | 
BLUE
)

	)

399 
	#LU_RED
 (
RED
)

	)

400 
	#LU_VIOLET
 (
RED
 | 
BLUE
)

	)

401 
	#LU_YELLOW
 (
RED
 | 
GREEN
)

	)

402 
	#LU_WHITE
 (
RED
 | 
GREEN
 | 
BLUE
)

	)

403 
	#LU_GREY
 (
HALF_RED
 | 
HALF_GREEN
 | 
HALF_BLUE
)

	)

404 
	#LU_BRT_BLUE
 (
HALF_RED
 | 
HALF_GREEN
 | 
BRT_BLUE
)

	)

405 
	#LU_BRT_GREEN
 (
HALF_RED
 | 
BRT_GREEN
 | 
HALF_BLUE
)

	)

406 
	#LU_BRT_CYAN
 (
HALF_RED
 | 
BRT_GREEN
 | 
BRT_BLUE
)

	)

407 
	#LU_BRT_RED
 (
BRT_RED
 | 
HALF_GREEN
 | 
HALF_BLUE
)

	)

408 
	#LU_BRT_VIOLET
 (
BRT_RED
 | 
HALF_GREEN
 | 
BRT_BLUE
)

	)

409 
	#LU_BRT_YELLOW
 (
BRT_RED
 | 
BRT_GREEN
 | 
HALF_BLUE
)

	)

410 
	#LU_BRT_WHITE
 (
BRT_RED
 | 
BRT_GREEN
 | 
BRT_BLUE
)

	)

412 c⁄° 
ush‹t
 
	gvga_lookup
[] = {

413 
LU_BLACK
,

414 
LU_BLUE
,

415 
LU_GREEN
,

416 
LU_CYAN
,

417 
LU_RED
,

418 
LU_VIOLET
,

419 
LU_YELLOW
,

420 
LU_WHITE
,

421 
LU_GREY
,

422 
LU_BRT_BLUE
,

423 
LU_BRT_GREEN
,

424 
LU_BRT_CYAN
,

425 
LU_BRT_RED
,

426 
LU_BRT_VIOLET
,

427 
LU_BRT_YELLOW
,

428 
LU_BRT_WHITE


432 
	#SED_BG_DEF
 1

	)

433 
	#SED_FG_DEF
 14

	)

436 
	#TOP
 0

	)

437 
	#BOTTOM
 (
PIXELS_PER_COL
-1)

	)

438 
	#LEFT
 0

	)

439 
	#RIGHT
 (
PIXELS_PER_ROW
-1)

	)

440 
	#CENTER_X
 (
PIXELS_PER_ROW
/2)

	)

441 
	#CENTER_Y
 (
PIXELS_PER_COL
/2)

	)

475 
	#SED_HOR_PULSE_WIDTH_CRT
 0x07

	)

476 
	#SED_HOR_PULSE_START_CRT
 0x02

	)

477 
	#SED_HOR_NONDISP_CRT
 0x17

	)

500 
	#SED_VER_PULSE_WIDTH_CRT
 0x02

501 
	#SED_VER_PULSE_START_CRT
 0x08

502 
	#SED_VER_NONDISP_CRT
 0x27

503 

	)

532 
SED_HOR_PULSE_WIDTH_LCD
;

533 
SED_HOR_PULSE_START_LCD
;

534 
SED_HOR_NONDISP_LCD
;

562 
SED_VER_PULSE_WIDTH_LCD
;

563 
SED_VER_PULSE_START_LCD
;

564 
SED_VER_NONDISP_LCD
;

	@src/lib/libbsp/arm/csb337/console/uarts.c

21 
	~<b•.h
>

22 
	~<πems/libio.h
>

23 
	~<ãrmios.h
>

24 
	~<πems/b•Io.h
>

26 
	~<©91rm9200.h
>

27 
	~<©91rm9200_dbgu.h
>

28 
	~<libchù/£rül.h
>

29 
	~<libchù/£rsuµ.h
>

30 
	~<b•›ts.h
>

32 c⁄° 
c⁄sﬁe_‚s
 
dbgu_‚s
;

34 #i‡
ENABLE_LCD


35 c⁄° 
c⁄sﬁe_‚s
 
fbc⁄s_‚s
;

36 
	#LCD_DEV
 1

	)

38 
	#LCD_DEV
 0

	)

41 #i‡(
ENABLE_UMON
 && 
ENABLE_UMON_CONSOLE
)

42 c⁄° 
c⁄sﬁe_‚s
 
um⁄c⁄s_‚s
;

43 
	#UMON_CONS_DEV
 1

	)

45 
	#UMON_CONS_DEV
 0

	)

48 #i‡
ENABLE_USART0
 || 
ENABLE_USART1
 || 
ENABLE_USART2
 || 
ENABLE_USART3


49 c⁄° 
c⁄sﬁe_‚s
 
ußπ_pﬁlög_‚s
;

52 #i‡
ENABLE_USART0


53 
	#USART0_DEV
 1

	)

55 
	#USART0_DEV
 0

	)

58 #i‡
ENABLE_USART1


59 
	#USART1_DEV
 1

	)

61 
	#USART1_DEV
 0

	)

64 #i‡
ENABLE_USART2


65 
	#USART2_DEV
 1

	)

67 
	#USART2_DEV
 0

	)

70 #i‡
ENABLE_USART3


71 
	#USART3_DEV
 1

	)

73 
	#USART3_DEV
 0

	)

76 
	#NUM_DEVS
 \

77 (1 + 
LCD_DEV
 + 
UMON_CONS_DEV
 + \

78 
USART0_DEV
 + 
USART1_DEV
 + 
USART2_DEV
 + 
USART3_DEV
)

	)

81 
	gC⁄sﬁe_C⁄figuøti⁄_Cou¡
 = 
NUM_DEVS
;

92 
c⁄sﬁe_tbl
 
	gC⁄sﬁe_C⁄figuøti⁄_P‹ts
[] = {

95 
SERIAL_CUSTOM
,

96 &
dbgu_‚s
,

97 
NULL
,

98 
NULL
,

101 
NULL
,

102 
DBGU_BASE
,

105 
NULL
,

106 
NULL
,

107 
NULL
,

108 
NULL
,

112 #i‡
ENABLE_LCD


115 
SERIAL_CUSTOM
,

116 &
fbc⁄s_‚s
,

117 
NULL
,

118 
NULL
,

121 
NULL
,

125 
NULL
,

126 
NULL
,

127 
NULL
,

128 
NULL
,

133 #i‡(
ENABLE_UMON
 && 
ENABLE_UMON_CONSOLE
)

136 
SERIAL_CUSTOM
,

137 &
um⁄c⁄s_‚s
,

138 
NULL
,

139 
NULL
,

142 
NULL
,

146 
NULL
,

147 
NULL
,

148 
NULL
,

149 
NULL
,

154 #i‡
ENABLE_USART0


157 
SERIAL_CUSTOM
,

158 &
ußπ_pﬁlög_‚s
,

159 
NULL
,

160 
NULL
,

163 
NULL
,

164 
USART0_BASE
,

167 
NULL
,

168 
NULL
,

169 
NULL
,

170 
NULL
,

175 #i‡
ENABLE_USART1


178 
SERIAL_CUSTOM
,

179 &
ußπ_pﬁlög_‚s
,

180 
NULL
,

181 
NULL
,

184 
NULL
,

185 
USART1_BASE
,

188 
NULL
,

189 
NULL
,

190 
NULL
,

191 
NULL
,

196 #i‡
ENABLE_USART2


199 
SERIAL_CUSTOM
,

200 &
ußπ_pﬁlög_‚s
,

201 
NULL
,

202 
NULL
,

205 
NULL
,

206 
USART2_BASE
,

209 
NULL
,

210 
NULL
,

211 
NULL
,

212 
NULL
,

217 #i‡
ENABLE_USART3


220 
SERIAL_CUSTOM
,

221 &
ußπ_pﬁlög_‚s
,

222 
NULL
,

223 
NULL
,

226 
NULL
,

227 
USART3_BASE
,

230 
NULL
,

231 
NULL
,

232 
NULL
,

233 
NULL
,

240 
c⁄sﬁe_tbl
 *
	$BSP_gë_u¨t_‰om_mö‹
(
mö‹
)

242  
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

243 
	}
}

	@src/lib/libbsp/arm/csb337/include/bsp.h

19 #i‚de‡
LIBBSP_ARM_CSB337_BSP_H


20 
	#LIBBSP_ARM_CSB337_BSP_H


	)

22 
	~<b•›ts.h
>

23 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

25 
	~<πems.h
>

26 
	~<πems/c⁄sﬁe.h
>

27 
	~<πems/˛ockdrv.h
>

29 #ifde‡
__˝lu•lus


43 
	#BSP_FEATURE_IRQ_EXTENSION


	)

46 
	#BSP_MAIN_FREQ
 3686400

	)

47 
	#BSP_SLCK_FREQ
 32768

	)

50 
	#BSP_MAX_INT
 
AT91RM9200_MAX_INT


	)

56 
_c⁄sﬁe_tbl
 
	tc⁄sﬁe_tbl
;

57 
c⁄sﬁe_tbl
 *
BSP_gë_u¨t_‰om_mö‹
(
mö‹
);

59 
ölöe
 
öt32_t
 
BSP_gë_baud
() { 38400;}

61 
	#ST_PIMR_PIV
 33

	)

66 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
;

69 
πems_©91rm9200_emac_©èch
(
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
);

70 
	#RTEMS_BSP_NETWORK_DRIVER_NAME
 "ëh0"

	)

71 
	#RTEMS_BSP_NETWORK_DRIVER_ATTACH
 
πems_©91rm9200_emac_©èch


	)

75 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/csb337/include/sed1356.h

31 #i‚de‡
__SED1356_h


32 
	#__SED1356_h


	)

34 
£d_öô
();

36 
£d_‰ame_buf„r_size
();

38 
£d_˛r_row
(
ch¨_row
);

40 
£d_putch¨
(
c
);

42 
£d_put°rög
(*
s
);

44 
£d_˛órs¸ìn
();

46 
£d_wrôe_‰ame_buf„r
(

47 
uöt32_t
 
i
,

48 
uöt16_t
 
wr16


	@src/lib/libbsp/arm/csb337/network/network.c

13 
	~<πems.h
>

14 
	~<πems/πems_bsd√t.h
>

15 
	~<©91rm9200.h
>

16 
	~<©91rm9200_emac.h
>

17 
	~<©91rm9200_gpio.h
>

18 
	~<©91rm9200_pmc.h
>

20 
	~<°dio.h
>

21 
	~<°rög.h
>

23 
	~<î∫o.h
>

24 
	~<πems/îr‹.h
>

25 
	~<as£π.h
>

27 
	~<sys/∑øm.h
>

28 
	~<sys/mbuf.h
>

29 
	~<sys/sockë.h
>

30 
	~<sys/sockio.h
>

32 
	~<√t/if.h
>

34 
	~<√töë/ö.h
>

35 
	~<√töë/if_ëhî.h
>

37 
	~<b•/úq.h
>

38 
	~<b•›ts.h
>

41 
	#PHY_DBG


	)

46 #i‡
csb637


49 
	#PHY_STAT_100BASE_T4
 
BIT15


	)

51 
	#PHY_STAT_100BASE_X_FDX
 
BIT14


	)

53 
	#PHY_STAT_100BASE_X_HDX
 
BIT13


	)

55 
	#PHY_STAT_10BASE_FDX
 
BIT12


	)

57 
	#PHY_STAT_10BASE_HDX
 
BIT11


	)

59 
	#PHY_STAT_MF_PREAMBLE
 
BIT6


	)

61 
	#PHY_STAT_AUTO_NEG_DONE
 
BIT5


	)

63 
	#PHY_STAT_REM_FLT
 
BIT4


	)

65 
	#PHY_STAT_AUTO_NEG_ABLE
 
BIT3


	)

67 
	#PHY_STAT_LINK_UP
 
BIT2


	)

69 
	#PHY_STAT_JABBER
 
BIT1


	)

71 
	#PHY_STAT_EXT_REG
 
BIT0


	)

74 
	#PHY_AUX_MODE2_TRAFFIC_LED
 
BIT6


	)

78 
	#EMAC_INT_PRIORITY
 0

	)

81 
	#START_RECEIVE_EVENT
 
RTEMS_EVENT_1


	)

84 
	#START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

86 
©91rm9200_emac_i§
 (*);

87 
©91rm9200_emac_i§_⁄
();

90 * 
©91rm9200_emac_rxbuf_hdrs
;

91 * 
©91rm9200_emac_txbuf
;

92 * 
©91rm9200_emac_rxbufs
;

96 
	#NUM_RXBDS
 8

	)

97 
	#NUM_TXBDS
 1

	)

98 
	#RX_BUFFER_SIZE
 0x600

	)

108 
	maddªss
;

109 
	m°©us
;

110 } 
	tRXBUF_HDR
;

112 
RXBUF_HDR
 *
	grxbuf_hdrs
;

113 *
	gtxbuf
;

114 *
	grxbuf
;

116 
	gdñay_˙t
;

127 
¨pcom
 
	m¨pcom
;

132 
πems_ve˘‹_numbî
 
	mve˘‹
;

137 
	mac˚±Brﬂdˇ°
;

142 
πems_id
 
	mrxD´m⁄Tid
;

143 
πems_id
 
	mtxD´m⁄Tid
;

148 
	mrx_buf_idx
;

155 
	mI¡îru±s
;

156 
	mrxI¡îru±s
;

157 
	mrxMis£d
;

158 
	mrxGü¡
;

159 
	mrxN⁄O˘ë
;

160 
	mrxBadCRC
;

161 
	mrxCﬁlisi⁄
;

163 
	mtxI¡îru±s
;

164 
	mtxSögÀCﬁlisi⁄
;

165 
	mtxMu…ùÀCﬁlisi⁄
;

166 
	mtxCﬁlisi⁄
;

167 
	mtxDe„ºed
;

168 
	mtxUndîrun
;

169 
	mtxL©eCﬁlisi⁄
;

170 
	mtxEx˚ssiveCﬁlisi⁄
;

171 
	mtxEx˚ssiveDe„ºÆ
;

172 
	mtxLo°C¨rõr
;

173 
	mtxRawWaô
;

174 } 
	t©91rm9200_emac_so·c_t
;

176 
©91rm9200_emac_so·c_t
 
	gso·c
;

186 
πems_©91rm9200_emac_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

187 *
chù
);

188 
©91rm9200_emac_öô
(*
¨g
);

189 
©91rm9200_emac_öô_hw
(
©91rm9200_emac_so·c_t
 *
sc
);

190 
©91rm9200_emac_°¨t
(
i‚ë
 *
iÂ
);

191 
©91rm9200_emac_°›
 (
©91rm9200_emac_so·c_t
 *
sc
);

192 
©91rm9200_emac_txD´m⁄
 (*
¨g
);

193 
©91rm9200_emac_£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
);

194 
©91rm9200_emac_rxD´m⁄
(*
¨g
);

195 
©91rm9200_emac_°©s
 (
©91rm9200_emac_so·c_t
 *
sc
);

196 
©91rm9200_emac_io˘l
 (
i‚ë
 *
iÂ
,

197 
io˘l_comm™d_t
 
comm™d
,

198 
ˇddr_t
 
d©a
);

200 #i‡
csb637


204 
uöt32_t
 
	$phyªad
(
uöt8_t
 
ªg
)

206 
	`EMAC_REG
(
EMAC_MAN
) = (0x01 << 30

209 | 
ªg
 << 18

213 
	`πems_èsk_wake_a·î
(1);

215 #i‡
	`deföed
(
EMAC_DBG
)

216 
	`¥ötk
(

218 
ªg
,

219 (
	`EMAC_REG
(
EMAC_MAN
) & 0xffff)

223  
	`EMAC_REG
(
EMAC_MAN
) & 0xffff;

224 
	}
}

230 
	$phywrôe
(
uöt8_t
 
ªg
, 
uöt16_t
 
d©a
)

232 
	`EMAC_REG
(
EMAC_MAN
) = (0x01 << 30

235 | 
ªg
 << 18

237 | 
d©a
);

238 #i‡
	`deföed
(
EMAC_DBG
)

239 
	`¥ötk
("EMAC: Phy 0, Reg %d, Wrôê0x%04x.\n", 
ªg
, 
d©a
);

243 
	`πems_èsk_wake_a·î
(1);

244 
	}
}

247 
	$πems_©91rm9200_emac_©èch
 (

248 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

249 *
chù


252 
i‚ë
 *
iÂ
;

253 
mtu
;

254 
unônumbî
;

255 *
unô«me
;

256 *
p
;

259 
p
 = (*)&
©91rm9200_emac_rxbuf_hdrs
;

260 
rxbuf_hdrs
 = (
RXBUF_HDR
 *)
p
;

263 
txbuf
 = (*)&
©91rm9200_emac_txbuf
;

266 
rxbuf
 = (*)&
©91rm9200_emac_rxbufs
;

270 i‡((
unônumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
unô«me
)) < 0)

276 i‡(
unônumbî
 != 0) {

277 
	`¥ötk
 ("Bad AT91RM9200 EMAC unitÇumber.\n");

280 
iÂ
 = &
so·c
.
¨pcom
.
ac_if
;

281 i‡(
iÂ
->
if_so·c
 !
NULL
) {

282 
	`¥ötk
 ("Driverálready in use.\n");

290 
	`mem£t
–&
so·c
, 0, (softc) );

294 
so·c
.
¨pcom
.
ac_íaddr
[0] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 0) & 0xff;

295 
so·c
.
¨pcom
.
ac_íaddr
[1] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 8) & 0xff;

296 
so·c
.
¨pcom
.
ac_íaddr
[2] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 16) & 0xff;

297 
so·c
.
¨pcom
.
ac_íaddr
[3] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 24) & 0xff;

298 
so·c
.
¨pcom
.
ac_íaddr
[4] = (
	`EMAC_REG
(
EMAC_SA1H
) >> 0) & 0xff;

299 
so·c
.
¨pcom
.
ac_íaddr
[5] = (
	`EMAC_REG
(
EMAC_SA1H
) >> 8) & 0xff;

302 
	`¥ötk
( "MAC=%02x:%02x:%02x:%02x:%02x:%02x\n",

303 
so·c
.
¨pcom
.
ac_íaddr
[0],

304 
so·c
.
¨pcom
.
ac_íaddr
[1],

305 
so·c
.
¨pcom
.
ac_íaddr
[2],

306 
so·c
.
¨pcom
.
ac_íaddr
[3],

307 
so·c
.
¨pcom
.
ac_íaddr
[4],

308 
so·c
.
¨pcom
.
ac_íaddr
[5]

312 i‡(
c⁄fig
->
mtu
) {

313 
mtu
 = 
c⁄fig
->mtu;

315 
mtu
 = 
ETHERMTU
;

318 
so·c
.
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

323 
iÂ
->
if_so·c
 = &
so·c
;

324 
iÂ
->
if_unô
 = 
unônumbî
;

325 
iÂ
->
if_«me
 = 
unô«me
;

326 
iÂ
->
if_mtu
 = 
mtu
;

327 
iÂ
->
if_öô
 = 
©91rm9200_emac_öô
;

328 
iÂ
->
if_io˘l
 = 
©91rm9200_emac_io˘l
;

329 
iÂ
->
if_°¨t
 = 
©91rm9200_emac_°¨t
;

330 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

331 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
;

332 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0) {

333 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

336 
so·c
.
rx_buf_idx
 = 0;

341 
	`if_©èch
 (
iÂ
);

342 
	`ëhî_iÁâach
 (
iÂ
);

344 
	}
}

346 
	$©91rm9200_emac_öô
(*
¨g
)

348 
©91rm9200_emac_so·c_t
 *
sc
 = 
¨g
;

349 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

350 
πems_°©us_code
 
°©us
 = 
RTEMS_SUCCESSFUL
;

356 i‡(
sc
->
txD´m⁄Tid
 == 0) {

358 
	`©91rm9200_emac_öô_hw
(
sc
);

361 
sc
->
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
("ENrx",

363 
©91rm9200_emac_rxD´m⁄
,

364 
sc
);

365 
sc
->
txD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
("ENtx",

367 
©91rm9200_emac_txD´m⁄
,

368 
sc
);

372 
	`AIC_SMR_REG
(
AIC_SMR_EMAC
Ë
	`AIC_SMR_PRIOR
(
EMAC_INT_PRIORITY
);

375 
°©us
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

376 
AT91RM9200_INT_EMAC
,

378 
RTEMS_INTERRUPT_UNIQUE
,

379 
©91rm9200_emac_i§
,

380 
NULL


382 
	`as£π
(
°©us
 =
RTEMS_SUCCESSFUL
);

383 
	`©91rm9200_emac_i§_⁄
();

386 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
) {

387 
	`¥ötk
 ("Warning - AT91RM9200 Ethernet driver"

394 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

397 
	`EMAC_REG
(
EMAC_CTL
Ë(
EMAC_CTL_TE
 | 
EMAC_CTL_RE
 | 
EMAC_CTL_CSR
);

400 
	`EMAC_REG
(
EMAC_TSR
) = 0xffffffff;

401 
	`EMAC_REG
(
EMAC_RSR
) = 0xffffffff;

403 
	}
}

405 
	$©91rm9200_emac_öô_hw
(
©91rm9200_emac_so·c_t
 *
sc
)

407 
i
;

410 
	`PIOA_REG
(
PIO_PDR
Ë–
BIT7
 |

411 
BIT8
 |

412 
BIT9
 |

413 
BIT10
 |

414 
BIT11
 |

415 
BIT12
 |

416 
BIT13
 |

417 
BIT14
 |

418 
BIT15
 |

419 
BIT16
 );

421 
	`PIOB_REG
(
PIO_PDR
Ë–
BIT12
 |

422 
BIT13
 |

423 
BIT14
 |

424 
BIT15
 |

425 
BIT16
 |

426 
BIT17
 |

427 
BIT18
 |

428 
BIT19
 );

430 
	`PIOB_REG
(
PIO_BSR
Ë–
BIT12
 |

431 
BIT13
 |

432 
BIT14
 |

433 
BIT15
 |

434 
BIT16
 |

435 
BIT17
 |

436 
BIT18
 |

437 
BIT19
 );

441 
	`PMC_REG
(
PMC_PCER
Ë|
PMC_PCR_PID_EMAC
;

444 
i
 = 0; i < 
NUM_RXBDS
-1; i++) {

445 
rxbuf_hdrs
[
i
].
addªss
 = ()(&
rxbuf
[ò* 
RX_BUFFER_SIZE
]);

446 
rxbuf_hdrs
[
i
].
°©us
 = 0x00000000;

450 
rxbuf_hdrs
[
i
].
addªss
 = (()(&
rxbuf
[ò* 
RX_BUFFER_SIZE
]) |

451 
RXBUF_ADD_WRAP
);

452 
rxbuf_hdrs
[
i
].
°©us
 = 0x00000000;

455 
	`EMAC_REG
(
EMAC_RBQP
Ë()
rxbuf_hdrs
;

458 
	`EMAC_REG
(
EMAC_RSR
Ë&~(
EMAC_RSR_OVR
 | 
EMAC_RSR_REC
 | 
EMAC_RSR_BNA
);

461 
	`EMAC_REG
(
EMAC_CFG
Ë&
EMAC_CFG_CLK_MASK
;

462 
	`EMAC_REG
(
EMAC_CFG
Ë(
EMAC_CFG_CLK_64
 | 
EMAC_CFG_BIG
 | 
EMAC_CFG_FD
);

465 
	`EMAC_REG
(
EMAC_CTL
Ë
EMAC_CTL_MPE
;

467 #i‡
csb637


469 
timeout
;

470 
uöt32_t
 
emac_lök_°©us
;

472 #i‡
	`deföed
(
PHY_DBG
)

473 
	`¥ötk
("EMAC: Getting Link Status.\n");

476 
emac_lök_°©us
 = 
	`phyªad
(0x02);

477 
emac_lök_°©us
 = 
	`phyªad
(0x03);

480 
timeout
 = 10000 ;Åimeout ; ) {

481 
i
 = 0; i < 100; i++)

483 
emac_lök_°©us
 = 
	`phyªad
(0x01);

484 i‡(!(
emac_lök_°©us
 & 
PHY_STAT_AUTO_NEG_ABLE
)) {

485 #i‡
	`deföed
(
PHY_DBG
)

486 
	`¥ötk
("EMAC: PHY is unableÅo Auto-Negotatiate!\n");

488 
timeout
 = 0;

491 i‡(
emac_lök_°©us
 & 
PHY_STAT_AUTO_NEG_DONE
) {

492 #i‡
	`deföed
(
PHY_DBG
)

493 
	`¥ötk
("EMAC: Auto-Negotiate Complete, Link = ");

497 
timeout
-- ;

499 i‡(!
timeout
) {

500 #i‡
	`deföed
(
PHY_DBG
)

501 
	`¥ötk
(

504 
emac_lök_°©us


508 
emac_lök_°©us
 = 
PHY_STAT_10BASE_HDX
;

512 i‡(
emac_lök_°©us
 & (
PHY_STAT_100BASE_X_FDX
 | 
PHY_STAT_100BASE_X_HDX
)){

513 
	`EMAC_REG
(
EMAC_CFG
Ë|
EMAC_CFG_SPD
;

514 #i‡
	`deföed
(
PHY_DBG
)

515 
	`¥ötk
("100MBIT, ");

518 
	`EMAC_REG
(
EMAC_CFG
Ë&~
EMAC_CFG_SPD
;

519 #i‡
	`deföed
(
PHY_DBG
)

520 
	`¥ötk
("10MBIT, ");

524 i‡(
emac_lök_°©us
 & (
PHY_STAT_100BASE_X_FDX
 | 
PHY_STAT_10BASE_FDX
)) {

525 
	`EMAC_REG
(
EMAC_CFG
Ë|
EMAC_CFG_FD
;

526 #i‡
	`deföed
(
PHY_DBG
)

527 
	`¥ötk
("Full Duplex.\n");

530 
	`EMAC_REG
(
EMAC_CFG
Ë&~
EMAC_CFG_FD
;

531 #i‡
	`deföed
(
PHY_DBG
)

532 
	`¥ötk
("Half Duplex.\n");

539 
	`phywrôe
(0x1b, 
PHY_AUX_MODE2_TRAFFIC_LED
);

544 
	`phywrôe
( 18, 0x0d0a );

548 
	`EMAC_REG
(
EMAC_MAN
) = (0x01 << 30 |

556 
	}
}

558 
	$©91rm9200_emac_°¨t
(
i‚ë
 *
iÂ
)

560 
©91rm9200_emac_so·c_t
 *
sc
 = 
iÂ
->
if_so·c
;

562 
	`πems_bsd√t_evít_£nd
(
sc
->
txD´m⁄Tid
, 
START_TRANSMIT_EVENT
);

563 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

564 
	}
}

566 
	$©91rm9200_emac_°›
 (
©91rm9200_emac_so·c_t
 *
sc
)

568 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

570 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

575 
	`EMAC_REG
(
EMAC_CTL
Ë&~(
EMAC_CTL_TE
 | 
EMAC_CTL_RE
);

576 
	}
}

581 
	$©91rm9200_emac_txD´m⁄
 (*
¨g
)

583 
©91rm9200_emac_so·c_t
 *
sc
 = (©91rm9200_emac_so·c_à*)
¨g
;

584 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

585 
mbuf
 *
m
;

586 
πems_evít_£t
 
evíts
;

591 
	`EMAC_REG
(
EMAC_IER
Ë
EMAC_INT_TCOM
;

593 
	`πems_bsd√t_evít_ª˚ive
(

594 
START_TRANSMIT_EVENT
,

595 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

596 
RTEMS_NO_TIMEOUT
,

597 &
evíts
);

603 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

604 i‡(!
m
)

606 
	`©91rm9200_emac_£nd∑ckë
 (
iÂ
, 
m
);

608 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

610 
	}
}

613 
	$©91rm9200_emac_£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

615 
mbuf
 *
l
 = 
NULL
;

616 
pkt_off£t
 = 0;

617 
dñay_˙t
 = 0;

621 ((
	`EMAC_REG
(
EMAC_TSR
Ë& 
EMAC_TSR_COMP
) == 0) &&

622 ((
	`EMAC_REG
(
EMAC_TSR
Ë& 
EMAC_TSR_TXIDLE
) == 0))

625 
dñay_˙t
++;

631 
l
 = 
m
;

632 
l
 !
NULL
) {

633 
	`mem˝y
(((*)
txbuf
 + 
pkt_off£t
),

634 (*)
	`mtod
(
l
, *),

635 
l
->
m_Àn
);

637 
pkt_off£t
 +
l
->
m_Àn
;

638 
l
 =Ü->
m_√xt
;

642 
	`m_‰ìm
(
m
);

645 
	`EMAC_REG
(
EMAC_TSR
Ë(
EMAC_TSR_OVR
 | 
EMAC_TSR_COL
 | 
EMAC_TSR_RLE


646 | 
EMAC_TSR_COMP
 | 
EMAC_TSR_UND
);

649 
	`EMAC_REG
(
EMAC_TAR
Ë()
txbuf
;

650 
	`EMAC_REG
(
EMAC_TCR
Ë()
pkt_off£t
;

651 
	}
}

655 
	$©91rm9200_emac_rxD´m⁄
(*
¨g
)

657 
©91rm9200_emac_so·c_t
 *
sc
 = (©91rm9200_emac_so·c_à*)
¨g
;

658 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

659 
mbuf
 *
m
;

660 
ëhî_hódî
 *
eh
;

661 
πems_evít_£t
 
evíts
;

662 
pkéí
;

667 
	`EMAC_REG
(
EMAC_IER
Ë(
EMAC_INT_RCOM
 |

668 
EMAC_INT_RBNA
 |

669 
EMAC_INT_ROVR
);

671 
	`πems_bsd√t_evít_ª˚ive
(

672 
START_RECEIVE_EVENT
,

673 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

674 
RTEMS_NO_TIMEOUT
,

675 &
evíts
);

677 i‡(
	`EMAC_REG
(
EMAC_RSR
Ë& 
EMAC_RSR_BNA
) {

678 
	`¥ötk
("1: EMAC_BNA\n");

681 i‡(
	`EMAC_REG
(
EMAC_RSR
Ë& 
EMAC_RSR_OVR
) {

682 
	`¥ötk
("1: EMAC_OVR\n");

686 
	`EMAC_REG
(
EMAC_RSR
Ë(
EMAC_RSR_REC
 | 
EMAC_RSR_OVR
 | 
EMAC_RSR_BNA
);

689 
rxbuf_hdrs
[
sc
->
rx_buf_idx
].
addªss
 & 
RXBUF_ADD_OWNED
) {

690 
pkéí
 = 
rxbuf_hdrs
[
sc
->
rx_buf_idx
].
°©us
 & 
RXBUF_STAT_LEN_MASK
;

693 
	`MGETHDR
(
m
, 
M_WAIT
, 
MT_DATA
);

697 
	`MCLGET
(
m
, 
M_WAIT
);

700 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

701 
m
->
m_√xçkt
 = 0;

704 
	`mem˝y
((*)
m
->
m_ext
.
ext_buf
,

705 (*)(
rxbuf_hdrs
[
sc
->
rx_buf_idx
].
addªss
 & 0xfffffffc),

706 
pkéí
);

709 
rxbuf_hdrs
[
sc
->
rx_buf_idx
].
addªss
 &~
RXBUF_ADD_OWNED
;

712 
m
->
m_Àn
 = 
pkéí
 - ((
ëhî_hódî
) + 4);

713 
m
->
m_pkthdr
.
Àn
 = m->
m_Àn
;

717 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

718 
m
->
m_d©a
 +(
ëhî_hódî
);

721 
sc
->
rx_buf_idx
++;

722 i‡(
sc
->
rx_buf_idx
 >
NUM_RXBDS
) {

723 
sc
->
rx_buf_idx
 = 0;

727 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

731 i‡(
	`EMAC_REG
(
EMAC_RSR
Ë& 
EMAC_RSR_BNA
) {

732 
	`¥ötk
("2:EMAC_BNA\n");

734 i‡(
	`EMAC_REG
(
EMAC_RSR
Ë& 
EMAC_RSR_OVR
) {

735 
	`¥ötk
("2:EMAC_OVR\n");

740 
	}
}

744 
	$©91rm9200_emac_°©s
 (
©91rm9200_emac_so·c_t
 *
sc
)

746 
	`¥ötf
 (" TŸÆ I¡îru±s:%-8lu", 
sc
->
I¡îru±s
);

747 
	`¥ötf
 (" Rx I¡îru±s:%-8lu", 
sc
->
rxI¡îru±s
);

748 
	`¥ötf
 (" Gü¡:%-8lu", 
sc
->
rxGü¡
);

749 
	`¥ötf
 (" N⁄-o˘ë:%-8lu\n", 
sc
->
rxN⁄O˘ë
);

750 
	`¥ötf
 (" Bad CRC:%-8lu", 
sc
->
rxBadCRC
);

751 
	`¥ötf
 (" Cﬁlisi⁄:%-8lu", 
sc
->
rxCﬁlisi⁄
);

752 
	`¥ötf
 (" Mis£d:%-8lu\n", 
sc
->
rxMis£d
);

754 
	`¥ötf
 ( " Tx I¡îru±s:%-8lu", 
sc
->
txI¡îru±s
);

755 
	`¥ötf
 ( " De„ºed:%-8lu", 
sc
->
txDe„ºed
);

756 
	`¥ötf
 (" Lo° C¨rõr:%-8lu\n", 
sc
->
txLo°C¨rõr
);

757 
	`¥ötf
 ( "SögÀ Cﬁlisi⁄s:%-8lu", 
sc
->
txSögÀCﬁlisi⁄
);

758 
	`¥ötf
 ( "Mu…ùÀ Cﬁlisi⁄s:%-8lu", 
sc
->
txMu…ùÀCﬁlisi⁄
);

759 
	`¥ötf
 ("Ex˚ssivêCﬁlisi⁄s:%-8lu\n", 
sc
->
txEx˚ssiveCﬁlisi⁄
);

760 
	`¥ötf
 ( " TŸÆ Cﬁlisi⁄s:%-8lu", 
sc
->
txCﬁlisi⁄
);

761 
	`¥ötf
 ( " L©êCﬁlisi⁄:%-8lu", 
sc
->
txL©eCﬁlisi⁄
);

762 
	`¥ötf
 (" Undîrun:%-8lu\n", 
sc
->
txUndîrun
);

763 
	`¥ötf
 ( " Raw ouçuàwaô:%-8lu\n", 
sc
->
txRawWaô
);

764 
	}
}

768 
	$©91rm9200_emac_i§_⁄
()

771 
	`EMAC_REG
(
EMAC_IER
Ë(
EMAC_INT_RCOM
 |

772 
EMAC_INT_RBNA
 |

773 
EMAC_INT_TCOM
 |

774 
EMAC_INT_ROVR
 |

775 
EMAC_INT_ABT
);

778 
	}
}

782 
	$©91rm9200_emac_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

784 
©91rm9200_emac_so·c_t
 *
sc
 = 
iÂ
->
if_so·c
;

785 
îr‹
 = 0;

787 
comm™d
) {

788 
SIOCGIFADDR
:

789 
SIOCSIFADDR
:

790 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

793 
SIOCSIFFLAGS
:

794 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
))

796 
IFF_RUNNING
:

797 
	`©91rm9200_emac_°›
 (
sc
);

800 
IFF_UP
:

801 
	`©91rm9200_emac_öô
 (
sc
);

804 
IFF_UP
 | 
IFF_RUNNING
:

805 
	`©91rm9200_emac_°›
 (
sc
);

806 
	`©91rm9200_emac_öô
 (
sc
);

814 
SIO_RTEMS_SHOW_STATS
:

815 
	`©91rm9200_emac_°©s
 (
sc
);

822 
îr‹
 = 
EINVAL
;

825  
îr‹
;

826 
	}
}

829 
	$©91rm9200_emac_i§
 (* 
unu£d
)

831 
°©us32
;

834 
°©us32
 = 
	`EMAC_REG
(
EMAC_ISR
);

836 i‡(
°©us32
 & 
EMAC_INT_ABT
) {

837 
	`EMAC_REG
(
EMAC_IDR
Ë
EMAC_INT_ABT
;

838 
	`πems_∑nic
("AT91RM9200 Ethernet MAC hasÑeceivedán Abort.\n");

841 i‡(
°©us32
 & (
EMAC_INT_RCOM
 |

842 
EMAC_INT_RBNA
 |

843 
EMAC_INT_ROVR
)) {

846 
	`EMAC_REG
(
EMAC_IDR
Ë(
EMAC_INT_RCOM
 |

847 
EMAC_INT_RBNA
 |

848 
EMAC_INT_ROVR
);

850 
	`πems_bsd√t_evít_£nd
 (
so·c
.
rxD´m⁄Tid
, 
START_RECEIVE_EVENT
);

853 i‡(
°©us32
 & 
EMAC_INT_TCOM
) {

856 
	`EMAC_REG
(
EMAC_IDR
Ë
EMAC_INT_TCOM
;

858 
	`πems_bsd√t_evít_£nd
 (
so·c
.
txD´m⁄Tid
, 
START_TRANSMIT_EVENT
);

860 
	}
}

	@src/lib/libbsp/arm/csb337/startup/bspreset.c

13 
	~<b•.h
>

14 
	~<b•/boŸˇrd.h
>

15 
	~<©91rm9200.h
>

16 
	~<©91rm9200_pmc.h
>

17 
	~<©91rm9200_emac.h
>

19 
	$b•_ª£t
()

21 
πems_öãºu±_Àvñ
 
Àvñ
;

23 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

24 (Ë
Àvñ
;

27 
	`ST_REG
(
ST_WDMR
Ë
ST_WDMR_RSTEN
 | 1;

31 
	}
}

	@src/lib/libbsp/arm/csb337/startup/bspstart.c

17 
	~<b•.h
>

18 
	~<b•/úq-gíîic.h
>

19 
	~<©91rm9200.h
>

20 
	~<©91rm9200_pmc.h
>

21 
	~<©91rm9200_emac.h
>

22 
	~<©91rm9200_gpio.h
>

23 
	~<©91rm9200_ußπ.h
>

26 
fix_mac_addr
();

27 
b•_ußπ_öô
();

40 
	$b•_°¨t_deÁu…
( )

43 
	`AIC_CTL_REG
(
AIC_IDCR
) = 0xffffffff;

49 
	`fix_mac_addr
();

54 
	`b•_ußπ_öô
();

60 
	`πems_ex˚±i⁄_öô_mngt
();

65 
	`b•_öãºu±_öôülize
();

67 
	}
}

74 
	$fix_mac_addr
()

76 
uöt8_t
 
addr
[6];

79 
addr
[0] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 0) & 0xff;

80 
addr
[1] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 8) & 0xff;

81 
addr
[2] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 16) & 0xff;

82 
addr
[3] = (
	`EMAC_REG
(
EMAC_SA1L
) >> 24) & 0xff;

83 
addr
[4] = (
	`EMAC_REG
(
EMAC_SA1H
) >> 0) & 0xff;

84 
addr
[5] = (
	`EMAC_REG
(
EMAC_SA1H
) >> 8) & 0xff;

87 i‡((
addr
[5] == 0x00) && (addr[4] == 0x23) && (addr[3] == 0x31)) {

88 
	`EMAC_REG
(
EMAC_SA1L
Ë((
addr
[5] << 0) |

89 (
addr
[4] << 8) |

90 (
addr
[3] << 16) |

91 (
addr
[2] << 24));

93 
	`EMAC_REG
(
EMAC_SA1H
Ë((
addr
[1] << 0) |

94 (
addr
[0] << 8));

96 
	}
}

112 
	$b•_ußπ_öô
()

118 
	`PIOA_REG
(
PIO_PDR
Ë|–
BIT5
 |

119 
BIT6
 |

120 
BIT17
 |

121 
BIT18
 |

122 
BIT22
 |

123 
BIT23
 );

125 
	`PIOB_REG
(
PIO_PDR
Ë|–
BIT20
 |

126 
BIT21
 );

129 
	`PIOA_REG
(
PIO_BSR
Ë|–
BIT5
 |

130 
BIT6
 );

131 
	`PIOA_REG
(
PIO_ASR
Ë&~–
BIT5
 |

132 
BIT6
 );

135 
	`PIOA_REG
(
PIO_ASR
Ë|–
BIT17
 |

136 
BIT18
 |

137 
BIT22
 |

138 
BIT23
 );

139 
	`PIOA_REG
(
PIO_BSR
Ë&~–
BIT17
 |

140 
BIT18
 |

141 
BIT22
 |

142 
BIT23
 );

145 
	`PIOB_REG
(
PIO_ASR
Ë|–
BIT20
 |

146 
BIT21
 );

147 
	`PIOB_REG
(
PIO_BSR
Ë&~–
BIT20
 |

148 
BIT21
 );

154 
	`PMC_REG
(
PMC_PCER
Ë|–
PMC_PCR_PID_US0
 |

155 
PMC_PCR_PID_US1
 |

156 
PMC_PCR_PID_US2
 |

157 
PMC_PCR_PID_US3
 );

158 
	}
}

164 
	$b•_°¨t
 (Ë
	`__©åibuã__
 ((
wók
, 
	`Æüs
("bsp_start_default")));

	@src/lib/libbsp/arm/csb337/startup/memmap.c

17 
	~<πems.h
>

18 
	~<lib˝u/mmu.h
>

20 
	~<b•›ts.h
>

25 
mmu_£˘_m≠_t
 
	gmem_m≠
[] = {

27 {0x00200000, 0x00000000, 1, 
MMU_CACHE_NONE
},

28 {0x00200000, 0x00200000, 1, 
MMU_CACHE_NONE
},

29 {0x10000000, 0x10000000, 8, 
MMU_CACHE_NONE
},

30 #i‡
csb637


31 {0x20000000, 0x20000000, 64, 
MMU_CACHE_WTHROUGH
},

32 #ñi‡
kô637_v6


33 {0x20000000, 0x20000000, 64, 
MMU_CACHE_WTHROUGH
},

35 {0x20000000, 0x20000000, 32, 
MMU_CACHE_WTHROUGH
},

37 #i‡
ENABLE_LCD


38 {0x30000000, 0x30000000, 8, 
MMU_CACHE_NONE
},

40 {0x30000000, 0x30000000, 1, 
MMU_CACHE_NONE
},

42 {0x40000000, 0x40000000, 1, 
MMU_CACHE_NONE
},

43 {0x50000000, 0x50000000, 1, 
MMU_CACHE_NONE
},

44 {0x60000000, 0x60000000, 1, 
MMU_CACHE_NONE
},

45 {0x70000000, 0x70000000, 1, 
MMU_CACHE_NONE
},

46 {0x80000000, 0x80000000, 1, 
MMU_CACHE_NONE
},

47 {0xfff00000, 0xfff00000, 1, 
MMU_CACHE_NONE
},

	@src/lib/libbsp/arm/csb337/startup/umonsupp.c

13 
	~<b•.h
>

14 
	~<πems/um⁄.h
>

21 *
	$πems_b•_gë_um⁄_m⁄±r
()

24 
	}
}

	@src/lib/libbsp/arm/gp32/console/uart.c

18 
	~<b•.h
>

19 
	~<πems/libio.h
>

20 
	~<ãrmios.h
>

21 
	~<πems/b•Io.h
>

24 
	~<s3c24xx.h
>

25 
	~<libchù/£rül.h
>

26 
	~<libchù/£rsuµ.h
>

29 
	#NUM_DEVS
 1

	)

31 
u¨t_pﬁl_ªad
(
mö‹
);

33 
	gdbg_dly
;

36 
u¨t_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

37 
u¨t_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

38 
u¨t_ªad
(
mö‹
);

39 
ssize_t
 
u¨t_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

40 
u¨t_öô
(
mö‹
);

41 
u¨t_wrôe_pﬁÀd
(
mö‹
, 
c
);

42 
u¨t_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

45 
	gC⁄sﬁe_C⁄figuøti⁄_Cou¡
 = 
NUM_DEVS
;

48 c⁄° 
c⁄sﬁe_‚s
 
	gu¨t_‚s
 =

50 
libchù_£rül_deÁu…_¥obe
,

51 
u¨t_fú°_›í
,

52 
u¨t_œ°_˛o£
,

53 
u¨t_ªad
,

54 
u¨t_wrôe
,

55 
u¨t_öô
,

56 
u¨t_wrôe_pﬁÀd
,

57 
u¨t_£t_©åibuãs
,

58 
FALSE


68 
c⁄sﬁe_tbl
 
	gC⁄sﬁe_C⁄figuøti⁄_P‹ts
[] = {

71 
SERIAL_CUSTOM
,

72 &
u¨t_‚s
,

73 
NULL
,

74 
NULL
,

77 
NULL
,

81 
NULL
,

82 
NULL
,

83 
NULL
,

84 
NULL
,

101 
	$u¨t_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

104 
	}
}

112 
	$u¨t_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

115 
	}
}

124 
	$u¨t_ªad
(
mö‹
)

126 
c
;

128 i‡(
mö‹
 == 0) {

129 i‡(
rUTRSTAT0
 & 0x1) {

130 
c
 = 
rURXH0
 & 0xff;

131  
c
;

136 
	`¥ötk
("Unknow¿c⁄sﬁêmö‹Çumbî: %d\n", 
mö‹
);

140 
	}
}

148 
ssize_t
 
	$u¨t_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
)

150 
i
;

152 i‡(
mö‹
 == 0) {

153 
i
 = 0; i < 
Àn
; i++) {

155 !(
rUTRSTAT0
 & 0x2)) {

159 
rUTXH0
 = (Ë
buf
[
i
];

162 
	`¥ötk
("Unknow¿c⁄sﬁêmö‹Çumbî: %d\n", 
mö‹
);

167 
	}
}

171 
	$u¨t_öô
(
mö‹
)

173 
i
;

174 
ªg
 = 0;

177 
rCLKCON
|=0x100;

180 
ªg
 = 
	`gë_PCLK
() / (16 * 115200) - 1;

183 
rUFCON0
 = 0x07;

184 
rUMCON0
 = 0x0;

186 
rULCON0
 = 0x3;

191 
rUCON0
 = 0x245;

192 
rUBRDIV0
 = 
ªg
;

194 
i
 = 0; i < 100; i++);

196 
	}
}

199 
	$u¨t_wrôe_pﬁÀd
(
mö‹
, 
c
)

201 
	`u¨t_wrôe
(
mö‹
, &
c
, 1);

202 
	}
}

205 
	$u¨t_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

208 
	}
}

220 
	$u¨t_pﬁl_ªad
(
mö‹
)

222  
	`u¨t_ªad
(
mö‹
);

223 
	}
}

231 
	$_BSP_put_ch¨
–
c
 ) {

232 
	`u¨t_wrôe_pﬁÀd
(0, 
c
);

233 i‡(
c
 == '\n') {

234 
	`u¨t_wrôe_pﬁÀd
(0, '\r');

236 
	}
}

238 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
_BSP_put_ch¨
;

240 
	$_BSP_gë_ch¨
()

242  
	`u¨t_pﬁl_ªad
(0);

243 
	}
}

245 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
_BSP_gë_ch¨
;

	@src/lib/libbsp/arm/gp32/include/bsp.h

16 #i‚de‡
LIBBSP_ARM_GP32_BSP_H


17 
	#LIBBSP_ARM_GP32_BSP_H


	)

19 
	~<b•›ts.h
>

20 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

22 
	~<πems.h
>

23 
	~<πems/iosuµ.h
>

24 
	~<πems/c⁄sﬁe.h
>

25 
	~<πems/˛ockdrv.h
>

26 
	~<s3c24xx.h
>

28 #ifde‡
__˝lu•lus


32 
	#BSP_FEATURE_IRQ_EXTENSION


	)

34 
	#gp32_öôBuâ⁄s
(Ë{
rPBCON
=0x0;}

	)

35 
	#gp32_gëBuâ⁄s
() \

36 –(((~
rPEDAT
 >> 6Ë& 0x3 )<<8Ë| (((~
rPBDAT
 >> 8Ë& 0xFF)<<0Ë)

	)

50 
uöt32_t
 
gë_FCLK
();

51 
uöt32_t
 
gë_HCLK
();

52 
uöt32_t
 
gë_PCLK
();

53 
uöt32_t
 
gë_UCLK
();

57 
gp32_£tPÆëã
–
pos
, 
uöt16_t
 
cﬁ‹
);

61 
	#BSP_OSC_FREQ
 12000000

	)

63 
	#M_MDIV
 81

	)

64 
	#M_PDIV
 2

	)

65 
	#M_SDIV
 1

	)

67 
	#M_CLKDIVN
 2

	)

69 
	#REFEN
 0x1

	)

71 
	#TREFMD
 0x0

	)

73 
	#TΩ
 0x0

	)

75 
	#Trc
 0x3

	)

77 
	#Tchr
 0x2

	)

85 *
b•_idÀ_thªad
(
uöçå_t
 
ign‹ed
);

89 
	#BSP_IDLE_TASK_BODY
 
b•_idÀ_thªad


	)

91 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/gp32/smc/smc.c

9 
	~<πems.h
>

10 
	~<πems/libio.h
>

11 
	~<î∫o.h
>

12 
	~<°dlib.h
>

13 
	~<°dio.h
>

14 
	~<°rög.h
>

15 
	~<öây≥s.h
>

17 
	~"πems/blkdev.h
"

18 
	~"πems/diskdevs.h
"

19 
	~"smc.h
"

20 
	~<πems/b•Io.h
>

21 
	~<s3c24xx.h
>

23 
	#SMC_DEVICE_NAME
 "/dev/smc"

	)

24 
	#SMC_SAMSUNG_ID
 0xEC

	)

25 
	#SMC_TOSHIBA_ID
 0x98

	)

27 
	#SMC_16MB
 0x73

	)

28 
	#SMC_32MB
 0x75

	)

29 
	#SMC_64MB
 0x76

	)

30 
	#SMC_128MB
 0x79

	)

32 
	#LBA_UNUSED
 0x80000000

	)

33 
	#LBA_RESERVED
 0x80000001

	)

35 
	#BLOCK_UNUSED
 0x80000000

	)

36 
	#BLOCK_RESERVED
 0x80000001

	)

39 
	#SEQ_DATA_INPUT_CMD
 0x80

	)

40 
	#READ1_CMD
 0x00

	)

41 
	#READ1_1_CMD
 0x01

	)

42 
	#READ2_CMD
 0x50

	)

43 
	#READ_ID_CMD
 0x90

	)

44 
	#RESET_CMD
 0xFF

	)

45 
	#PAGE_PROGRAM_CMD
 0x10

	)

46 
	#BLOCK_ERASE_CMD
 0x60

	)

47 
	#BLOCK_ERASE_CFM_CMD
 0xD0

	)

48 
	#READ_STATUS_CMD
 0x70

	)

49 
	#RESET_PTR_CMD
 0x00

	)

53 
	sSMC_INFO
 {

54 
uöt8_t
 
	mid
[3];

55 
uöt32_t
 
	mbyãs_≥r_∑ge
;

56 
uöt32_t
 
	m∑ges_≥r_block
;

57 
uöt32_t
 
	mblocks
;

58 
uöt32_t
 
	mmb
;

62 #ifde‡
CPU_S3C2410


63 
	#rPBDAT
 
rGPBDAT


	)

64 
	#rPBCON
 
rGPBCON


	)

65 
	#rPDDAT
 
rGPDDAT


	)

66 
	#rPEDAT
 
rGPEDAT


	)

70 
SMC_INFO
 
	gsmc_öfo
;

72 
uöt32_t
 
	gsmc_l2p
[0x2000];

73 
uöt32_t
 
	gsmc_p2l
[0x2000];

75 
	#sm_busy
(Ë!(
rPDDAT
 & 0x200))

	)

76 
	#sm_chù_í
(Ë
rPDDAT
 &(~0x80)

	)

77 
	#sm_chù_dis
(Ë
rPDDAT
 |0x80

	)

78 
	#sm_˛e_í
(Ë
rPEDAT
 |0x20

	)

79 
	#sm_˛e_dis
(Ë
rPEDAT
 &(~0x20)

	)

80 
	#sm_Æe_í
(Ë
rPEDAT
 |0x10

	)

81 
	#sm_Æe_dis
(Ë
rPEDAT
 &(~0x10)

	)

82 
	#sm_wp_í
(Ë
rPDDAT
 &(~0x40)

	)

83 
	#sm_wp_dis
(Ë
rPDDAT
 |0x40

	)

84 
	#sm_ªad_í
(Ë
rPBCON
 &0xFFFF0000

	)

85 
	#sm_ªad_dis
(Ë
rPBCON
 = (rPBCON & 0xFFFF0000Ë| 0x5555

	)

86 
	#sm_wrôe_í
(Ë
	`sm_ªad_dis
()

	)

87 
	#sm_wrôe_dis
(Ë
	`sm_ªad_í
()

	)

89 
	$sm_wrôe
–
uöt8_t
 
d©a
)

91 
rPBDAT
 = (rPBDAT & 0xFF00Ë| 
d©a
;

92 
rPEDAT
 &= (~0x08);

93 
rPEDAT
 |= 0x08;

94 
	}
}

96 
uöt8_t
 
	$sm_ªad
()

98 
uöt8_t
 
d©a
;

100 
rPDDAT
 &= (~0x100);

101 
d©a
 = 
rPBDAT
 & 0xFF;

102 
rPDDAT
 |= 0x100;

103  
d©a
;

104 
	}
}

106 
	$smc_ªad_id
–
uöt8_t
* 
buf
, 
uöt32_t
 
Àngth
)

108 
uöt32_t
 
i
;

110 
	`sm_chù_í
();

112 
	`sm_˛e_í
();

113 
	`sm_wrôe_í
();

114 
	`sm_wrôe
(
READ_ID_CMD
);

115 
	`sm_wrôe_dis
();

116 
	`sm_˛e_dis
();

118 
	`sm_Æe_í
();

119 
	`sm_wrôe_í
();

120 
	`sm_wrôe
( 0);

121 
	`sm_wrôe_dis
();

122 
	`sm_Æe_dis
();

124 
	`sm_ªad_í
();

125 
i
=0;i<
Àngth
;i++Ë*(
buf
+iË
	`sm_ªad
();

126 
	`sm_ªad_dis
();

128 
	`sm_chù_dis
();

129 
	}
}

132 
uöt8_t
 
	$smc_ªad_∑ge
 (
uöt32_t
 
Õage
, 
uöt8_t
* 
buf
)

134 
uöt32_t
 
block
, 
∑ge
, 
i
;

139 
block
 = 
Õage
 >> 5;

140 i‡(
smc_l2p
[
block
] < 
LBA_UNUSED
) {

141 
∑ge
 = 
smc_l2p
[
block
] << 5;

142 
∑ge
 +(
Õage
 & 0x1F);

147 
	`sm_chù_í
();

149 
	`sm_˛e_í
();

150 
	`sm_wrôe_í
();

151 
	`sm_wrôe
(
READ1_CMD
);

152 
	`sm_wrôe_dis
();

153 
	`sm_˛e_dis
();

155 
	`sm_Æe_í
();

156 
	`sm_wrôe_í
();

157 
	`sm_wrôe
( 0x00);

158 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 0));

159 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 8));

160 i‡(
smc_öfo
.
mb
 >= 64)

161 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 16));

162 
	`sm_wrôe_dis
();

163 
	`sm_Æe_dis
();

165 
	`sm_busy
();

167 
	`sm_ªad_í
();

168 
i
 = 0; i < 512; i++) {

169 *
buf
 = 
	`sm_ªad
();

170 
buf
++;

172 
	`sm_ªad_dis
();

173 
	`sm_chù_dis
();

175 
	`sm_busy
();

177 
	}
}

179 
	$smc_ªad_•¨e
–
uöt32_t
 
∑ge
, 
uöt8_t
* 
buf
, uöt8_à
Àngth
)

181 
uöt32_t
 
i
;

183 
	`sm_chù_í
();

185 
	`sm_˛e_í
();

186 
	`sm_ªad_dis
();

187 
	`sm_wrôe
(
READ2_CMD
);

188 
	`sm_ªad_í
();

189 
	`sm_˛e_dis
();

191 
	`sm_Æe_í
();

192 
	`sm_ªad_dis
();

193 
	`sm_wrôe
( 0x00);

194 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 0));

195 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 8));

196 i‡(
smc_öfo
.
mb
 >= 64)

197 
	`sm_wrôe
–(
uöt8_t
)(
∑ge
 >> 16));

198 
	`sm_ªad_í
();

199 
	`sm_Æe_dis
();

201 
	`sm_busy
();

203 
	`sm_ªad_í
();

204 
i
=0;i<
Àngth
;i++)

205 *(
buf
+
i
Ë
	`sm_ªad
();

206 
	`sm_ªad_dis
();

208 
	`sm_chù_dis
();

210 
	}
}

212 
	$smc_make_l2p
()

214 
uöt32_t
 
pblock
, 
i
, 
j
, 
lblock
, 
z⁄e
, 
cou¡
, 
˙t1
, 
˙t2
, 
˙t3
;

215 
uöt8_t
 
d©a
[512];

217 
˙t1
 = 0;

218 
˙t2
 = 0;

219 
˙t3
 = 0;

221 
i
=0;i<0x2000;i++) {

222 
smc_l2p
[
i
] = 
LBA_RESERVED
;

223 
smc_p2l
[
i
] = 
BLOCK_RESERVED
;

226 
pblock
=0;pblock<
smc_öfo
.
blocks
;pblock++) {

228 
	`smc_ªad_•¨e
–
pblock
*
smc_öfo
.
∑ges_≥r_block
, (
uöt8_t
*)&
d©a
, 16);

230 
z⁄e
 = 
pblock
 >> 10;

231 i‡((
d©a
[5] == 0xFF) && ((data[6]&0xF8) == 0x10)) {

232 
lblock
 = ((((
d©a
[6]<<8)|(d©a[7]<<0)Ë>> 1Ë& 0x03FFË+ (
z⁄e
 * 1000);

233 
smc_l2p
[
lblock
] = 
pblock
;

234 
smc_p2l
[
pblock
] = 
lblock
;

235 
˙t1
++;

237 
cou¡
 = 0;

238 
j
=0;j<16;j++) {

239 i‡(
d©a
[
j
] =0xFFË
cou¡
++;

241 i‡(
cou¡
 == 16) {

242 
smc_p2l
[
pblock
] = 
BLOCK_UNUSED
;

243 
˙t2
++;

245 
smc_p2l
[
pblock
] = 
BLOCK_RESERVED
;

246 
˙t3
++;

250 
	}
}

253 
	$smc_dëe˘
–
uöt8_t
 
id1
, uöt8_à
id2
, uöt8_à
id3
)

255 
smc_öfo
.
id
[0] = 
id1
;

256 
smc_öfo
.
id
[1] = 
id2
;

257 
smc_öfo
.
id
[2] = 
id3
;

258 
smc_öfo
.
mb
 = 0;

259 
smc_öfo
.
byãs_≥r_∑ge
 = 0;

260 
smc_öfo
.
∑ges_≥r_block
 = 0;

261 
smc_öfo
.
blocks
 = 0;

263 
id1
) {

264 
SMC_SAMSUNG_ID
:

265 
SMC_TOSHIBA_ID
: {

266 
id2
) {

267 
SMC_16MB
 : 
smc_öfo
.
mb
 = 16; ;

268 
SMC_32MB
 : 
smc_öfo
.
mb
 = 32; ;

269 
SMC_64MB
 : 
smc_öfo
.
mb
 = 64; ;

270 
SMC_128MB
 : 
smc_öfo
.
mb
 = 128; ;

276 
smc_öfo
.
mb
) {

277 16 : 
smc_öfo
.
byãs_≥r_∑ge
 = 512; smc_öfo.
∑ges_≥r_block
 = 32; smc_öfo.
blocks
 = 0x0400; ;

278 32 : 
smc_öfo
.
byãs_≥r_∑ge
 = 512; smc_öfo.
∑ges_≥r_block
 = 32; smc_öfo.
blocks
 = 0x0800; ;

279 64 : 
smc_öfo
.
byãs_≥r_∑ge
 = 512; smc_öfo.
∑ges_≥r_block
 = 32; smc_öfo.
blocks
 = 0x1000; ;

280 128 : 
smc_öfo
.
byãs_≥r_∑ge
 = 512; smc_öfo.
∑ges_≥r_block
 = 32; smc_öfo.
blocks
 = 0x2000; ;

282 
	}
}

284 
	$smc_öô
( )

286 
buf
[32];

287 
i
;

290 
	`sm_chù_í
();

291 
	`sm_˛e_í
();

292 
	`sm_wrôe_í
();

293 
	`sm_wrôe
(0xFF);

294 
	`sm_wrôe_dis
();

295 
	`sm_˛e_dis
();

296 
i
=0;i<10;i++);

297 
	`sm_busy
();

298 
	`sm_chù_dis
();

300 
	`smc_ªad_id
 (
buf
, 4);

301 
	`smc_dëe˘
 (
buf
[0], buf[1], buf[2]);

302 
	`¥ötk
 ("SMC: [%02X-%02X-%02X-%02X]\n", 
buf
[0], buf[1], buf[2], buf[3]);

303 
	`¥ötk
 ("SMC size: %dMB dëe˘ed\n",
smc_öfo
.
mb
);

304 
	`smc_make_l2p
();

305 
	}
}

310 
	$smc_wrôe
(
πems_blkdev_ªque°
 *
ªq
)

312 
	`πems_blkdev_ªque°_d⁄e
(
ªq
, 
RTEMS_SUCCESSFUL
);

314 
	}
}

325 
	$smc_ªad
(
πems_blkdev_ªque°
 *
ªq
)

327 
uöt32_t
 
i
;

328 
πems_blkdev_sg_buf„r
 *
sg
;

329 
uöt32_t
 
ªmaös
;

331 
ªmaös
 = 
smc_öfo
.
byãs_≥r_∑ge
 * 
ªq
->
bu‚um
;

332 
sg
 = 
ªq
->
bufs
;

333 
i
 = 0; (
ªmaös
 > 0Ë&& (ò< 
ªq
->
bu‚um
); i++, 
sg
++)

335 
cou¡
 = 
sg
->
Àngth
;

336 i‡(
cou¡
 > 
ªmaös
)

337 
cou¡
 = 
ªmaös
;

338 
	`smc_ªad_∑ge
(
sg
->
block
,sg->
buf„r
);

339 
ªmaös
 -
cou¡
;

341 
	`πems_blkdev_ªque°_d⁄e
(
ªq
, 
RTEMS_SUCCESSFUL
);

343 
	}
}

357 
	$smc_io˘l
(
πems_disk_devi˚
 *
dd
, 
uöt32_t
 
ªq
, *
¨gp
)

359 
ªq
)

361 
RTEMS_BLKIO_REQUEST
:

363 
πems_blkdev_ªque°
 *
r
 = 
¨gp
;

364 
r
->
ªq
)

366 
RTEMS_BLKDEV_REQ_READ
:

367  
	`smc_ªad
(
r
);

368 
RTEMS_BLKDEV_REQ_WRITE
:

369  
	`smc_wrôe
(
r
);

371 
î∫o
 = 
EINVAL
;

378 
î∫o
 = 
EINVAL
;

381 
	}
}

395 
πems_devi˚_drivî


396 
	$smc_öôülize
(

397 
πems_devi˚_maj‹_numbî
 
maj‹
,

398 
πems_devi˚_mö‹_numbî
 
mö‹
,

399 *
¨g
)

401 
πems_°©us_code
 
rc
;

402 
dev_t
 
dev
;

403 
uöt32_t
 
block_num
;

405 
rc
 = 
	`πems_disk_io_öôülize
();

406 i‡(
rc
 !
RTEMS_SUCCESSFUL
)

407  
rc
;

409 
	`smc_öô
();

410 
block_num
 = 
smc_öfo
.
blocks
 << 5;

412 
dev
 = 
	`πems_fûesy°em_make_dev_t
(
maj‹
, 0);

413 
rc
 = 
	`πems_disk_¸óã_phys
(
dev
, 512, 
block_num
,

414 
smc_io˘l
, 
NULL
, 
SMC_DEVICE_NAME
);

416  
RTEMS_SUCCESSFUL
;

417 
	}
}

	@src/lib/libbsp/arm/gp32/smc/smc.h

7 #i‚de‡
__SMC_H__


8 
	#__SMC_H__


	)

10 #ifde‡
__˝lu•lus


14 
	~<πems.h
>

16 
	~"πems/blkdev.h
"

29 
πems_devi˚_drivî


30 
smc_öôülize
(

31 
πems_devi˚_maj‹_numbî
 
maj‹
,

32 
πems_devi˚_mö‹_numbî
 
mö‹
,

33 *
¨g
);

35 
	#SMC_DRIVER_TABLE_ENTRY
 \

36 { 
smc_öôülize
, 
GENERIC_BLOCK_DEVICE_DRIVER_ENTRIES
 }

	)

40 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/gp32/startup/bspidle.c

14 
	~<b•.h
>

16 *
	$b•_idÀ_thªad
(
uöçå_t
 
ign‹ed
)

19 
__asm__
 volatile ("MCRÖ15,0,r0,c7,c0,4 \n");

21  
NULL
;

22 
	}
}

	@src/lib/libbsp/arm/gp32/startup/bspreset.c

7 
	~<b•.h
>

8 
	~<b•/boŸˇrd.h
>

10 
	$b•_ª£t
()

12 
πems_öãºu±_Àvñ
 
Àvñ
;

14 (Ë
Àvñ
;

15 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

17 
__asm__
 volatile(""

39 
	}
}

	@src/lib/libbsp/arm/gp32/startup/bspstart.c

16 
	~<b•.h
>

17 
	~<b•/úq-gíîic.h
>

18 
	~<πems/b•Io.h
>

19 
	~<s3c24xx.h
>

24 
	$b•_°¨t_deÁu…
( )

26 
uöt32_t
 
¸
;

27 
uöt32_t
 
≥nd
,
œ°
;

28 
uöt32_t
 
REFCNT
;

29 
i
;

32 #ifde‡
CPU_S3C2400


33 
rTICINT
 = 0x0;

35 
rTICNT
 = 0x0;

38 
rWTCON
 = 0x0;

39 
rTCON
 = 0x0;

40 
rADCCON
 = 0x0;

43 
rINTMOD
 = 0x0;

44 
rINTMSK
 = 
BIT_ALLMSK
;

46 
œ°
 = 0;

47 
i
=0; i<4; i++) {

48 
≥nd
 = 
rSRCPND
;

49 if(
≥nd
 =0 ||Öíd =
œ°
)

51 
rSRCPND
 = 
≥nd
;

52 
rINTPND
 = 
≥nd
;

53 
œ°
 = 
≥nd
;

57 
rCLKDIVN
 = 
M_CLKDIVN
;

58 
rMPLLCON
 = ((
M_MDIV
<<12)+(
M_PDIV
<<4)+
M_SDIV
);

62 
REFCNT
 = 2048+1-(15.6*
	`gë_HCLK
()/1000000);

63 
rREFRESH
 = ((
REFEN
<<23)+(
TREFMD
<<22)+(
TΩ
<<20)+(
Trc
<<18)+(
Tchr
<<16)+
REFCNT
);

66 
¸
 = 
rTCFG0
 & 0xFFFF00FF;

67 
rTCFG0
 = (
¸
 | (15<<8));

70 
¸
 = 
rTCFG0
 & 0xFFFFFF00;

71 
rTCFG0
 = (
¸
 | (0<<0));

77 
	`πems_ex˚±i⁄_öô_mngt
();

82 
	`b•_öãºu±_öôülize
();

83 
	}
}

89 
	$b•_°¨t
 (Ë
	`__©åibuã__
 ((
wók
, 
	`Æüs
("bsp_start_default")));

	@src/lib/libbsp/arm/gp32/startup/memmap.c

11 
	~<πems.h
>

12 
	~<lib˝u/mmu.h
>

17 
mmu_£˘_m≠_t
 
	gmem_m≠
[] = {

19 {0x0c000000, 0x00000000, 1, 
MMU_CACHE_NONE
},

20 {0x0c000000, 0x0c000000, 7, 
MMU_CACHE_WTHROUGH
},

21 {0x0c700000, 0x0c700000, 1, 
MMU_CACHE_NONE
},

22 {0x14000000, 0x14000000, 16, 
MMU_CACHE_NONE
},

23 {0x15000000, 0x15000000, 16, 
MMU_CACHE_NONE
},

	@src/lib/libbsp/arm/hi3518e/console/uart.c

18 
	~<b•.h
>

19 
	~<πems/libio.h
>

20 
	~<ãrmios.h
>

21 
	~<πems/b•Io.h
>

23 
	~<libchù/£rül.h
>

24 
	~<libchù/£rsuµ.h
>

26 
	~<∂©f‹m.h
>

29 
	#NUM_DEVS
 1

	)

31 
u¨t_pﬁl_ªad
(
mö‹
);

33 
	gdbg_dly
;

36 
u¨t_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

37 
u¨t_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

38 
u¨t_ªad
(
mö‹
);

39 
ssize_t
 
u¨t_wrôe
(
mö‹
, c⁄° 
c
, 
size_t
 
Àn
);

40 
u¨t_öô
(
mö‹
);

41 
u¨t_wrôe_pﬁÀd
(
mö‹
, 
c
);

42 
u¨t_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

45 
	gC⁄sﬁe_C⁄figuøti⁄_Cou¡
 = 
NUM_DEVS
;

48 c⁄° 
c⁄sﬁe_‚s
 
	gu¨t_‚s
 =

50 
libchù_£rül_deÁu…_¥obe
,

51 
u¨t_fú°_›í
,

52 
u¨t_œ°_˛o£
,

53 
u¨t_ªad
,

54 
u¨t_wrôe
,

55 
u¨t_öô
,

56 
u¨t_wrôe_pﬁÀd
,

57 
u¨t_£t_©åibuãs
,

58 
FALSE


68 
c⁄sﬁe_tbl
 
	gC⁄sﬁe_C⁄figuøti⁄_P‹ts
[] = {

71 
SERIAL_CUSTOM
,

72 &
u¨t_‚s
,

73 
NULL
,

74 
NULL
,

77 
NULL
,

78 
UART0_REG_BASE
,

81 
NULL
,

82 
NULL
,

83 
NULL
,

84 
NULL
,

101 
	$u¨t_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

104 
	}
}

112 
	$u¨t_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

115 
	}
}

124 
	$u¨t_ªad
(
mö‹
)

126 
d©a
;

128 i‡(
mö‹
 == 0) {

130 
	`UART_RD_REG
(
UART_PL01x_FR
Ë& 
UART_PL01x_FR_RXFE
);

131 
d©a
 = 
	`UART_RD_REG
(
UART_PL01x_DR
);

134 i‡(
d©a
 & 0xFFFFFF00) {

136 
	`UART_WR_REG
(
UART_PL01x_ECR
, 0xFFFFFFFF);

140  (Ë
d©a
;

142 
	`¥ötk
("Unknow¿c⁄sﬁêmö‹Çumbî: %d\n", 
mö‹
);

145 
	}
}

154 
ssize_t
 
	$u¨t_wrôe
(
mö‹
, c⁄° 
c
, 
size_t
 
Àn
)

157 
	`UART_RD_REG
(
UART_PL01x_FR
Ë& 
UART_PL01x_FR_TXFF
);

160 
	`UART_WR_REG
 (
UART_PL01x_DR
, 
c
);

163 
	}
}

167 
	$u¨t_öô
(
mö‹
)

169 
ãmp
;

170 
dividî
;

171 
ªmaödî
;

172 
‰a˘i⁄
;

177 
	`UART_WR_REG
(
UART_PL011_CR
, 0x0);

184 
ãmp
 = 16 * 
UART_BAUDRATE
;

185 
dividî
 = 
UART_PL011_CLOCK
 / 
ãmp
;

186 
ªmaödî
 = 
UART_PL011_CLOCK
 % 
ãmp
;

187 
ãmp
 = (8 * 
ªmaödî
Ë/ 
UART_BAUDRATE
;

188 
‰a˘i⁄
 = (
ãmp
 >> 1) + (temp & 1);

190 
	`UART_WR_REG
(
UART_PL011_IBRD
, 
dividî
);

191 
	`UART_WR_REG
(
UART_PL011_FBRD
, 
‰a˘i⁄
);

196 
	`UART_WR_REG
(
UART_PL011_LCRH
, (
UART_PL011_LCRH_WLEN_8
 | 
UART_PL011_LCRH_FEN
));

201 
	`UART_WR_REG
(
UART_PL011_CR
, (
UART_PL011_CR_UARTEN
 |

202 
UART_PL011_CR_TXE
 | 
UART_PL011_CR_RXE
));

203 
	}
}

206 
	$u¨t_wrôe_pﬁÀd
(
mö‹
, 
c
)

208 
	`u¨t_wrôe
(
mö‹
, 
c
, 1);

209 
	}
}

212 
	$u¨t_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

215 
	}
}

227 
	$u¨t_pﬁl_ªad
(
mö‹
)

229  
	`u¨t_ªad
(
mö‹
);

230 
	}
}

238 
	$_BSP_put_ch¨
–
c
 ) {

239 
	`u¨t_wrôe_pﬁÀd
(0, 
c
);

240 i‡(
c
 == '\n') {

241 
	`u¨t_wrôe_pﬁÀd
(0, '\r');

243 
	}
}

245 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
_BSP_put_ch¨
;

247 
	$_BSP_gë_ch¨
()

249  
	`u¨t_pﬁl_ªad
(0);

250 
	}
}

252 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
_BSP_gë_ch¨
;

	@src/lib/libbsp/arm/hi3518e/i2c/i2c.c

19 
	~<dev/i2c/i2c.h
>

20 
	~<i2c.h
>

21 
	~<∂©f‹m.h
>

23 
uöt8_t
 
	gi2c_öô_Êag
 = 0;

25 
	$i2c_£t_øã
(
uöt32_t
 
i2c_øã
)

27 
uöt32_t
 
vÆ
, 
s˛H
, 
s˛L
;

30 
vÆ
 = 
	`I2C_RD_REG
(
I2C_CTRL_REG
);

33 
	`I2C_WR_REG
(
I2C_CTRL_REG
, (
vÆ
 & (~
I2C_UNMASK_TOTAL
)));

34 
s˛H
 = (
I2C_DFT_CLK
 / (
i2c_øã
 * 2)) / 2 - 1;

35 
	`I2C_WR_REG
(
I2C_SCL_H_REG
, 
s˛H
);

36 
s˛L
 = (
I2C_DFT_CLK
 / (
i2c_øã
 * 2)) / 2 - 1;

37 
	`I2C_WR_REG
(
I2C_SCL_L_REG
, 
s˛L
);

40 
	`I2C_WR_REG
(
I2C_CTRL_REG
, 
vÆ
);

41 
	}
}

43 
	$hi_i2c_waô_wrôìnd
()

45 
uöt32_t
 
§c_ªg
, 
i
;

48 
§c_ªg
 = 
	`I2C_RD_REG
(
I2C_SR_REG
);

49 if(
i
 > 
I2C_WAIT_TIME_OUT
){

52 
i
++;

53 }(
§c_ªg
 & 
I2C_OVER_INTR
) != I2C_OVER_INTR);

54 
	`I2C_WR_REG
(
I2C_ICR_REG
, 
I2C_CLEAR_ALL
);

56 
	}
}

58 
	$hi_i2c_waô_ªadíd
()

60 
uöt32_t
 
§c_ªg
, 
i
;

63 
§c_ªg
 = 
	`I2C_RD_REG
(
I2C_SR_REG
);

64 if(
i
 > 
I2C_WAIT_TIME_OUT
){

67 
i
++;

68 }(
§c_ªg
 & 
I2C_OVER_INTR
) != I2C_OVER_INTR);

71 
	}
}

73 
	$hi_i2c_öô
()

75 if(
i2c_öô_Êag
)

79 
	`HI_REG_WR
(0x200f0018, 0x1);

80 
	`HI_REG_WR
(0x200f001c, 0x1);

83 
	`HI_REG_WR
(0x200f0008, 0x0);

84 
	`HI_REG_WR
(0x20030030, 0x1);

88 
	`HI_REG_WR
(0x2003002c, 0xa);

93 
	`m¶ìp
(100);

95 
	`i2c_£t_øã
(
I2C_DFT_RATE
);

97 
i2c_öô_Êag
 = 1;

98 
	}
}

100 
	$hi_i2c_wrôe
(
uöt8_t
 
dev_addr
, 
uöt32_t
 
ªg_addr
, uöt32_à
ªg_byã
, uöt32_à
d©a
, uöt32_à
d©a_byã
)

102 
uöt32_t
 
i
;

103 
uöt32_t
 
addr
, 
td©a
 = 0;

104 
ªt
 = 0;

107 
	`I2C_WR_REG
(
I2C_ICR_REG
, 0x03);

108 
	`I2C_WR_REG
(
I2C_CTRL_REG
, 0x187);

110 
	`I2C_WR_REG
(
I2C_TXR_REG
, (
dev_addr
 & 
WRITE_OPERATION
));

111 
	`I2C_WR_REG
(
I2C_COM_REG
, (
I2C_WRITE
 | 
I2C_START
));

112 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

113 if(
ªt
 < 0)

116 
i
 = 0; i < 
ªg_byã
; ++i) {

117 
addr
 = 
ªg_addr
 >> ((
ªg_byã
-
i
-1)*8);

118 
	`I2C_WR_REG
(
I2C_TXR_REG
, 
addr
);

119 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_WRITE
);

120 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

121 if(
ªt
 < 0)

126 
i
 = 0; i < 
d©a_byã
; ++i) {

127 
td©a
 = 
d©a
 >> ((
d©a_byã
-
i
-1)*8);

128 
	`I2C_WR_REG
(
I2C_TXR_REG
, 
td©a
);

129 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_WRITE
);

130 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

131 if(
ªt
 < 0)

135 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_STOP
);

136 
	`hi_i2c_waô_wrôìnd
();

137 
	`I2C_WR_REG
(
I2C_ICR_REG
, 0x01);

140 
	}
}

142 
	$hi_i2c_ªad
(
uöt8_t
 
dev_addr
, 
uöt32_t
 
ªg_addr
, uöt32_à
ªg_byã
, uöt32_à*
d©a
, uöt32_à
d©a_byã
)

144 
uöt32_t
 
tmp
 = 0xFF, 
i
, 
addr
;

145 
uöt32_t
 
td©a
 = 0;

146 
ªt
 = 0;

149 
	`I2C_WR_REG
(
I2C_ICR_REG
, 0x03);

150 
	`I2C_WR_REG
(
I2C_CTRL_REG
, 0x187);

152 
	`I2C_WR_REG
(
I2C_TXR_REG
, (
dev_addr
 & 
WRITE_OPERATION
));

153 
	`I2C_WR_REG
(
I2C_COM_REG
, (
I2C_WRITE
 | 
I2C_START
));

154 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

155 if(
ªt
 < 0)

158 
i
 = 0; i < 
ªg_byã
; ++i) {

159 
addr
 = 
ªg_addr
 >> ((
ªg_byã
-
i
-1)*8);

160 
	`I2C_WR_REG
(
I2C_TXR_REG
, 
addr
);

161 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_WRITE
);

162 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

163 if(
ªt
 < 0)

168 
	`I2C_WR_REG
(
I2C_TXR_REG
, (
dev_addr
 & 
READ_OPERATION
));

169 
	`I2C_WR_REG
(
I2C_COM_REG
, (
I2C_WRITE
 | 
I2C_START
));

170 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

171 if(
ªt
 < 0)

175 
i
 = 0; i < 
d©a_byã
; ++i) {

176 if(
i
 =(
d©a_byã
-1)){

177 
	`I2C_WR_REG
(
I2C_COM_REG
, (
I2C_READ
 | (~
I2C_SEND_ACK
)));

179 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_READ
);

181 
ªt
 = 
	`hi_i2c_waô_ªadíd
();

182 if(
ªt
 < 0)

184 
tmp
 = 
	`I2C_RD_REG
(
I2C_RXR_REG
);

185 
td©a
 |(
tmp
 << ((
d©a_byã
-
i
-1)*8));

186 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

187 if(
ªt
 < 0)

192 
	`I2C_WR_REG
(
I2C_COM_REG
, 
I2C_STOP
);

193 
ªt
 = 
	`hi_i2c_waô_wrôìnd
();

194 if(
ªt
 < 0)

197 *
d©a
 = 
td©a
;

200 
	}
}

	@src/lib/libbsp/arm/hi3518e/include/bsp.h

18 #i‚de‡
LIBBSP_ARM_HI3518E_BSP_H


19 
	#LIBBSP_ARM_HI3518E_BSP_H


	)

21 
	~<b•›ts.h
>

22 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

24 #ifde‡
__˝lu•lus


41 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/hi3518e/include/i2c.h

1 #i‚de‡
_I2C_H


2 
	#_I2C_H


	)

4 
	#I2C_WAIT_TIME_OUT
 0x1000

	)

5 
	#CFG_I2C_IRQEN
 (1<<20)

	)

8 
	#I2C_DFT_CLK
 (100000000)

9 
	#I2C_DFT_RATE
 (100000)

	)

11 
	#READ_OPERATION
 (1)

	)

12 
	#WRITE_OPERATION
 0x„

	)

13 
	#CMD_I2C_WRITE
 0x01

	)

14 
	#CMD_I2C_READ
 0x03

	)

17 
	#I2C_ENABLE
 (1 << 8)

	)

18 
	#I2C_UNMASK_TOTAL
 (1 << 7)

	)

19 
	#I2C_UNMASK_START
 (1 << 6)

	)

20 
	#I2C_UNMASK_END
 (1 << 5)

	)

21 
	#I2C_UNMASK_SEND
 (1 << 4)

	)

22 
	#I2C_UNMASK_RECEIVE
 (1 << 3)

	)

23 
	#I2C_UNMASK_ACK
 (1 << 2)

	)

24 
	#I2C_UNMASK_ARBITRATE
 (1<< 1)

	)

25 
	#I2C_UNMASK_OVER
 (1 << 0)

	)

26 
	#I2C_UNMASK_ALL
 (
I2C_UNMASK_START
 | 
I2C_UNMASK_END
 | \

27 
I2C_UNMASK_SEND
 | 
I2C_UNMASK_RECEIVE
 | \

28 
I2C_UNMASK_ACK
 | 
I2C_UNMASK_ARBITRATE
 | \

29 
I2C_UNMASK_OVER
)

	)

32 
	#I2C_SEND_ACK
 (~(1 << 4))

	)

33 
	#I2C_START
 (1 << 3)

	)

34 
	#I2C_READ
 (1 << 2)

	)

35 
	#I2C_WRITE
 (1 << 1)

	)

36 
	#I2C_STOP
 (1 << 0)

	)

39 
	#I2C_CLEAR_START
 (1 << 6)

	)

40 
	#I2C_CLEAR_END
 (1 << 5)

	)

41 
	#I2C_CLEAR_SEND
 (1 << 4)

	)

42 
	#I2C_CLEAR_RECEIVE
 (1 << 3)

	)

43 
	#I2C_CLEAR_ACK
 (1 << 2)

	)

44 
	#I2C_CLEAR_ARBITRATE
 (1 << 1)

	)

45 
	#I2C_CLEAR_OVER
 (1 << 0)

	)

46 
	#I2C_CLEAR_ALL
 (
I2C_CLEAR_START
 | 
I2C_CLEAR_END
 | \

47 
I2C_CLEAR_SEND
 | 
I2C_CLEAR_RECEIVE
 | \

48 
I2C_CLEAR_ACK
 | 
I2C_CLEAR_ARBITRATE
 | \

49 
I2C_CLEAR_OVER
)

	)

52 
	#I2C_BUSY
 (1 << 7)

	)

53 
	#I2C_START_INTR
 (1 << 6)

	)

54 
	#I2C_END_INTR
 (1 << 5)

	)

55 
	#I2C_SEND_INTR
 (1 << 4)

	)

56 
	#I2C_RECEIVE_INTR
 (1 << 3)

	)

57 
	#I2C_ACK_INTR
 (1 << 2)

	)

58 
	#I2C_ARBITRATE_INTR
 (1 << 1)

	)

59 
	#I2C_OVER_INTR
 (1 << 0)

	)

61 
hi_i2c_öô
();

62 
hi_i2c_wrôe
(
uöt8_t
 
dev_addr
, 
uöt32_t
 
ªg_addr
, uöt32_à
ªg_byã
, uöt32_à
d©a
, uöt32_à
d©a_byã
);

63 
hi_i2c_ªad
(
uöt8_t
 
dev_addr
, 
uöt32_t
 
ªg_addr
, uöt32_à
ªg_byã
, uöt32_à*
d©a
, uöt32_à
d©a_byã
);

	@src/lib/libbsp/arm/hi3518e/include/pinmux.h

1 #i‚de‡
_PINMUX_H


2 
	#_PINMUX_H


	)

	@src/lib/libbsp/arm/hi3518e/include/vicap.h

1 #i‚de‡
_VICAP_H


2 
	#_VICAP_H


	)

	@src/lib/libbsp/arm/hi3518e/startup/bspreset.c

23 
	~<b•.h
>

24 
	~<b•/boŸˇrd.h
>

26 
	$b•_ª£t
()

28 
πems_öãºu±_Àvñ
 
Àvñ
;

30 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

31 ()
Àvñ
;

35 
	}
}

	@src/lib/libbsp/arm/hi3518e/startup/bspstart.c

18 
	~<b•.h
>

19 
	~<b•/úq-gíîic.h
>

20 
	~<∂©f‹m.h
>

25 
	$b•_show_öfo
()

27 
uöt32_t
 
i
, 
sysid
[4], 
vîsi⁄
;

29 
i
 = 0; i < 4; i++){

30 
sysid
[
i
] = 
	`HI_REG_RD
(
SYSID_RGE_BASE
+i*4);

31 
vîsi⁄
 +
sysid
[
i
] << (i*8);

34 
	`¥ötk
("\n#################################################\n");

35 
	`¥ötk
("@ RTEMS Real Time Operating System\n");

36 
	`¥ötk
("@ System version: V4.11\n");

37 
	`¥ötk
("@ Cpu vîsi⁄: Hi%x\n", 
vîsi⁄
);

38 
	`¥ötk
("#################################################\n\n");

39 
	}
}

44 
	$b•_°¨t
()

46 
	`b•_show_öfo
();

47 
	`πems_ex˚±i⁄_öô_mngt
();

48 
	`b•_öãºu±_öôülize
();

49 
	}
}

	@src/lib/libbsp/arm/hi3518e/video/vicap.c

19 
	~<∂©f‹m.h
>

20 
	~<viˇp.h
>

22 
	$viˇp_£t_y_buÊí
(
uöt32_t
 
buf_Àn
)

24 
uöt32_t
 
vÆ
 = 0;

26 
vÆ
 = 
	`VICAP_RD_REG
(
VICAP_CH_DES_Y_CFG
);

27 
vÆ
 = (vÆ&0x0000FFFF)|(
buf_Àn
<<16);

28 
	`VICAP_WR_REG
(
VICAP_CH_DES_Y_CFG
, 
vÆ
);

29 
	}
}

31 
	$viˇp_£t_y_Áddr
(
uöt32_t
 
addr
)

33 
viˇp


34 
	}
}

36 
	$viˇp_ªg_öô
()

39 
	`VICAP_WR_REG
(
VICAP_PT_SEL
, 0x0);

40 
	`VICAP_WR_REG
(
VICAP_PT_INT_MASK
, 0x1);

43 
	`VICAP_WR_REG
(
VICAP_CH_SEL
, 0x0);

47 
	`VICAP_WR_REG
(
VICAP_INT_MASK
, 
PT0_INT_EN
|
CH0_INT_EN
);

50 
	`VICAP_WR_REG
(
VICAP_PT_INTF_MOD
, 
PT_EN
));

53 
	`VICAP_WR_REG
(
VICAP_CH_CTRL
, 
CH_EN
);

56 
	`VICAP_WR_REG
(
VICAP_CH_DES_Y_CFG
, );

57 
	}
}

	@src/lib/libbsp/arm/lpc32xx/console/console-config.c

23 
	~<libchù/ns16550.h
>

25 
	~<b•.h
>

26 
	~<b•/Õc32xx.h
>

27 
	~<b•/úq.h
>

28 
	~<b•/hsu.h
>

29 
	~<b•/c⁄sﬁe-ãrmios.h
>

31 
uöt8_t
 
	$Õc32xx_u¨t_gë_ªgi°î
(
uöçå_t
 
addr
, 
uöt8_t
 
i
)

33 vﬁ©ûê
uöt32_t
 *
ªg
 = (vﬁ©ûêuöt32_à*Ë
addr
;

35  (
uöt8_t
Ë
ªg
 [
i
];

36 
	}
}

38 
	$Õc32xx_u¨t_£t_ªgi°î
(
uöçå_t
 
addr
, 
uöt8_t
 
i
, uöt8_à
vÆ
)

40 vﬁ©ûê
uöt32_t
 *
ªg
 = (vﬁ©ûêuöt32_à*Ë
addr
;

42 
ªg
 [
i
] = 
vÆ
;

43 
	}
}

45 #ifde‡
LPC32XX_UART_3_BAUD


46 
boﬁ
 
	$Õc32xx_u¨t_¥obe_3
(
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
)

48 
LPC32XX_UARTCLK_CTRL
 |
	`BSP_BIT32
(0);

49 
LPC32XX_U3CLK
 = 
LPC32XX_CONFIG_U3CLK
;

50 
LPC32XX_UART_CLKMODE
 = 
	`BSP_FLD32SET
(LPC32XX_UART_CLKMODE, 0x2, 4, 5);

52  
	`ns16550_¥obe
(
c⁄ãxt
);

53 
	}
}

56 #ifde‡
LPC32XX_UART_4_BAUD


57 
boﬁ
 
	$Õc32xx_u¨t_¥obe_4
(
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
)

59 vﬁ©ûê
Õc32xx_gpio
 *
gpio
 = &
Õc32xx
.gpio;

65 
gpio
->
p2_mux_£t
 = 
	`BSP_BIT32
(2);

67 
LPC32XX_UARTCLK_CTRL
 |
	`BSP_BIT32
(1);

68 
LPC32XX_U4CLK
 = 
LPC32XX_CONFIG_U4CLK
;

69 
LPC32XX_UART_CLKMODE
 = 
	`BSP_FLD32SET
(LPC32XX_UART_CLKMODE, 0x2, 6, 7);

71  
	`ns16550_¥obe
(
c⁄ãxt
);

72 
	}
}

75 #ifde‡
LPC32XX_UART_6_BAUD


76 
boﬁ
 
	$Õc32xx_u¨t_¥obe_6
(
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
)

79 
LPC32XX_UART_CTRL
 |
	`BSP_BIT32
(5);

81 
LPC32XX_UARTCLK_CTRL
 |
	`BSP_BIT32
(3);

82 
LPC32XX_U6CLK
 = 
LPC32XX_CONFIG_U6CLK
;

83 
LPC32XX_UART_CLKMODE
 = 
	`BSP_FLD32SET
(LPC32XX_UART_CLKMODE, 0x2, 10, 11);

85  
	`ns16550_¥obe
(
c⁄ãxt
);

86 
	}
}

91 #ifde‡
LPC32XX_UART_5_BAUD


92 
ns16550_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_5
 = {

93 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 5"),

94 .
	ggë_ªg
 = 
Õc32xx_u¨t_gë_ªgi°î
,

95 .
	g£t_ªg
 = 
Õc32xx_u¨t_£t_ªgi°î
,

96 .
	gp‹t
 = 
LPC32XX_BASE_UART_5
,

97 .
	gúq
 = 
LPC32XX_IRQ_UART_5
,

98 .
	g˛ock
 = 16 * 
LPC32XX_UART_5_BAUD
,

99 .
	göôül_baud
 = 
LPC32XX_UART_5_BAUD


103 #ifde‡
LPC32XX_UART_3_BAUD


104 
ns16550_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_3
 = {

105 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 3"),

106 .
	ggë_ªg
 = 
Õc32xx_u¨t_gë_ªgi°î
,

107 .
	g£t_ªg
 = 
Õc32xx_u¨t_£t_ªgi°î
,

108 .
	gp‹t
 = 
LPC32XX_BASE_UART_3
,

109 .
	gúq
 = 
LPC32XX_IRQ_UART_3
,

110 .
	g˛ock
 = 16 * 
LPC32XX_UART_3_BAUD
,

111 .
	göôül_baud
 = 
LPC32XX_UART_3_BAUD


115 #ifde‡
LPC32XX_UART_4_BAUD


116 
ns16550_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_4
 = {

117 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 4"),

118 .
	ggë_ªg
 = 
Õc32xx_u¨t_gë_ªgi°î
,

119 .
	g£t_ªg
 = 
Õc32xx_u¨t_£t_ªgi°î
,

120 .
	gp‹t
 = 
LPC32XX_BASE_UART_4
,

121 .
	gúq
 = 
LPC32XX_IRQ_UART_4
,

122 .
	g˛ock
 = 16 * 
LPC32XX_UART_4_BAUD
,

123 .
	göôül_baud
 = 
LPC32XX_UART_4_BAUD


127 #ifde‡
LPC32XX_UART_6_BAUD


128 
ns16550_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_6
 = {

129 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 6"),

130 .
	ggë_ªg
 = 
Õc32xx_u¨t_gë_ªgi°î
,

131 .
	g£t_ªg
 = 
Õc32xx_u¨t_£t_ªgi°î
,

132 .
	gp‹t
 = 
LPC32XX_BASE_UART_6
,

133 .
	gúq
 = 
LPC32XX_IRQ_UART_6
,

134 .
	g˛ock
 = 16 * 
LPC32XX_UART_6_BAUD
,

135 .
	göôül_baud
 = 
LPC32XX_UART_6_BAUD


139 #ifde‡
LPC32XX_UART_1_BAUD


140 
Õc32xx_hsu_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_1
 = {

141 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 1"),

142 .
	ghsu
 = (vﬁ©ûê
Õc32xx_hsu
 *Ë
LPC32XX_BASE_UART_1
,

143 .
	gúq
 = 
LPC32XX_IRQ_UART_1
,

144 .
	göôül_baud
 = 
LPC32XX_UART_1_BAUD


148 #ifde‡
LPC32XX_UART_2_BAUD


149 
Õc32xx_hsu_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_2
 = {

150 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 2"),

151 .
	ghsu
 = (vﬁ©ûê
Õc32xx_hsu
 *Ë
LPC32XX_BASE_UART_2
,

152 .
	gúq
 = 
LPC32XX_IRQ_UART_2
,

153 .
	göôül_baud
 = 
LPC32XX_UART_2_BAUD


157 #ifde‡
LPC32XX_UART_7_BAUD


158 
Õc32xx_hsu_c⁄ãxt
 
	gÕc32xx_u¨t_c⁄ãxt_7
 = {

159 .
ba£
 = 
RTEMS_TERMIOS_DEVICE_CONTEXT_INITIALIZER
("UART 7"),

160 .
	ghsu
 = (vﬁ©ûê
Õc32xx_hsu
 *Ë
LPC32XX_BASE_UART_7
,

161 .
	gúq
 = 
LPC32XX_IRQ_UART_7
,

162 .
	göôül_baud
 = 
LPC32XX_UART_7_BAUD


166 c⁄° 
c⁄sﬁe_devi˚
 
	gc⁄sﬁe_devi˚_èbÀ
[] = {

167 #ifde‡
LPC32XX_UART_5_BAUD


169 .
devi˚_fûe
 = "/dev/ttyS5",

170 .
	g¥obe
 = 
c⁄sﬁe_devi˚_¥obe_deÁu…
,

171 .
	gh™dÀr
 = &
ns16550_h™dÀr_öãºu±
,

172 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_5
.
ba£


175 #ifde‡
LPC32XX_UART_3_BAUD


177 .
	gdevi˚_fûe
 = "/dev/ttyS3",

178 .
	g¥obe
 = 
Õc32xx_u¨t_¥obe_3
,

179 .
	gh™dÀr
 = &
ns16550_h™dÀr_öãºu±
,

180 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_3
.
ba£


183 #ifde‡
LPC32XX_UART_4_BAUD


185 .
	gdevi˚_fûe
 = "/dev/ttyS4",

186 .
	g¥obe
 = 
Õc32xx_u¨t_¥obe_4
,

187 .
	gh™dÀr
 = &
ns16550_h™dÀr_öãºu±
,

188 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_4
.
ba£


191 #ifde‡
LPC32XX_UART_6_BAUD


193 .
	gdevi˚_fûe
 = "/dev/ttyS6",

194 .
	g¥obe
 = 
Õc32xx_u¨t_¥obe_6
,

195 .
	gh™dÀr
 = &
ns16550_h™dÀr_öãºu±
,

196 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_6
.
ba£


199 #ifde‡
LPC32XX_UART_1_BAUD


201 .
	gdevi˚_fûe
 = "/dev/ttyS1",

202 .
	g¥obe
 = 
Õc32xx_hsu_¥obe
,

203 .
	gh™dÀr
 = &
Õc32xx_hsu_‚s
,

204 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_1
.
ba£


207 #ifde‡
LPC32XX_UART_2_BAUD


209 .
	gdevi˚_fûe
 = "/dev/ttyS2",

210 .
	g¥obe
 = 
Õc32xx_hsu_¥obe
,

211 .
	gh™dÀr
 = &
Õc32xx_hsu_‚s
,

212 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_2
.
ba£


215 #ifde‡
LPC32XX_UART_7_BAUD


217 .
	gdevi˚_fûe
 = "/dev/ttyS7",

218 .
	g¥obe
 = 
Õc32xx_hsu_¥obe
,

219 .
	gh™dÀr
 = &
Õc32xx_hsu_‚s
,

220 .
	gc⁄ãxt
 = &
Õc32xx_u¨t_c⁄ãxt_7
.
ba£


225 c⁄° 
size_t
 
	gc⁄sﬁe_devi˚_cou¡
 = 
RTEMS_ARRAY_SIZE
(
c⁄sﬁe_devi˚_èbÀ
);

	@src/lib/libbsp/arm/lpc32xx/console/hsu.c

23 
	~<b•.h
>

24 
	~<b•/Õc32xx.h
>

25 
	~<b•/úq.h
>

26 
	~<b•/hsu.h
>

28 
	#HSU_FIFO_SIZE
 64

	)

30 
	#HSU_LEVEL_RX_MASK
 0xffU

	)

31 
	#HSU_LEVEL_TX_MASK
 0xff00U

	)

32 
	#HSU_LEVEL_TX_SHIFT
 8

	)

34 
	#HSU_RX_DATA_MASK
 0xffU

	)

35 
	#HSU_RX_EMPTY
 (1U << 8)

	)

36 
	#HSU_RX_ERROR
 (1U << 9)

	)

37 
	#HSU_RX_BREAK
 (1U << 10)

	)

39 
	#HSU_IIR_TX
 (1U << 0)

	)

40 
	#HSU_IIR_RX_TRIG
 (1U << 1)

	)

41 
	#HSU_IIR_RX_TIMEOUT
 (1U << 2)

	)

43 
	#HSU_CTRL_INTR_DISABLED
 0x1280fU

	)

44 
	#HSU_CTRL_RX_INTR_ENABLED
 0x1284fU

	)

45 
	#HSU_CTRL_RX_AND_TX_INTR_ENABLED
 0x1286fU

	)

48 
	#HSU_IIR_MASK
 0x7U

	)

50 
boﬁ
 
	$Õc32xx_hsu_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

52 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = (Õc32xx_hsu_c⁄ãxà*Ë
ba£
;

53 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

55 
hsu
->
˘æ
 = 
HSU_CTRL_INTR_DISABLED
;

58 
hsu
->
Àvñ
 != 0) {

59 
hsu
->
fifo
;

62  
åue
;

63 
	}
}

65 
	$Õc32xx_hsu_öãºu±_h™dÀr
(*
¨g
)

67 
πems_ãrmios_ây
 *
ây
 = 
¨g
;

68 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = 
	`πems_ãrmios_gë_devi˚_c⁄ãxt
(
ây
);

69 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

73 
rv
 = 0;

74 
i
 = 0;

75 
buf
 [
HSU_FIFO_SIZE
];

78 
i
 < 
HSU_FIFO_SIZE
) {

79 
uöt32_t
 
ö
 = 
hsu
->
fifo
;

81 i‡((
ö
 & 
HSU_RX_EMPTY
) == 0) {

82 i‡((
ö
 & 
HSU_RX_BREAK
) == 0) {

83 
buf
 [
i
] = 
ö
 & 
HSU_RX_DATA_MASK
;

84 ++
i
;

90 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
ây
, 
buf
, 
i
);

93 
rv
 = 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ây
, (Ë
˘x
->
ch¨s_ö_å™smissi⁄
);

94 i‡(
rv
 == 0) {

97 } (
hsu
->
iú
 & 
HSU_IIR_MASK
) != 0);

98 
	}
}

100 
boﬁ
 
	$Õc32xx_hsu_fú°_›í
(

101 
πems_ãrmios_ây
 *
ây
,

102 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

103 
ãrmios
 *
ãrm
,

104 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


107 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = (Õc32xx_hsu_c⁄ãxà*Ë
ba£
;

108 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

109 
πems_°©us_code
 
sc
;

110 
boﬁ
 
ok
;

112 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

113 
˘x
->
úq
,

115 
RTEMS_INTERRUPT_UNIQUE
,

116 
Õc32xx_hsu_öãºu±_h™dÀr
,

117 
ây


119 
ok
 = 
sc
 =
RTEMS_SUCCESSFUL
;

121 i‡(
ok
) {

122 
	`πems_ãrmios_£t_öôül_baud
(
ây
, 
˘x
->
öôül_baud
);

123 
hsu
->
˘æ
 = 
HSU_CTRL_RX_INTR_ENABLED
;

126  
ok
;

127 
	}
}

129 
	$Õc32xx_hsu_œ°_˛o£
(

130 
πems_ãrmios_ây
 *
ây
,

131 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

132 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


135 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = (Õc32xx_hsu_c⁄ãxà*Ë
ba£
;

136 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

138 
hsu
->
˘æ
 = 
HSU_CTRL_INTR_DISABLED
;

140 
	`πems_öãºu±_h™dÀr_ªmove
(

141 
˘x
->
úq
,

142 
Õc32xx_hsu_öãºu±_h™dÀr
,

143 
ây


145 
	}
}

147 
	$Õc32xx_hsu_wrôe
(

148 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

149 c⁄° *
buf
,

150 
size_t
 
Àn


153 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = (Õc32xx_hsu_c⁄ãxà*Ë
ba£
;

154 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

155 
size_t
 
tx_Àvñ
 = (
hsu
->
Àvñ
 & 
HSU_LEVEL_TX_MASK
Ë>> 
HSU_LEVEL_TX_SHIFT
;

156 
size_t
 
tx_‰ì
 = 
HSU_FIFO_SIZE
 - 
tx_Àvñ
;

157 
size_t
 
i
 = 0;

158 
size_t
 
out
 = 
Àn
 > 
tx_‰ì
 ?Åx_free :Üen;

160 
i
 = 0; i < 
out
; ++i) {

161 
hsu
->
fifo
 = 
buf
 [
i
];

164 
˘x
->
ch¨s_ö_å™smissi⁄
 = 
out
;

166 i‡(
Àn
 > 0) {

167 
hsu
->
˘æ
 = 
HSU_CTRL_RX_AND_TX_INTR_ENABLED
;

169 
hsu
->
˘æ
 = 
HSU_CTRL_RX_INTR_ENABLED
;

170 
hsu
->
iú
 = 
HSU_IIR_TX
;

172 
	}
}

174 
boﬁ
 
	$Õc32xx_hsu_£t_©åibuãs
(

175 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

176 c⁄° 
ãrmios
 *
ãrm


179 
Õc32xx_hsu_c⁄ãxt
 *
˘x
 = (Õc32xx_hsu_c⁄ãxà*Ë
ba£
;

180 vﬁ©ûê
Õc32xx_hsu
 *
hsu
 = 
˘x
->hsu;

181 
baud_Êags
 = 
ãrm
->
c_cÊag
 & 
CBAUD
;

183 i‡(
baud_Êags
 != 0) {

184 
öt32_t
 
baud
 = 
	`πems_ãrmios_baud_to_numbî
(
baud_Êags
);

186 i‡(
baud
 > 0) {

187 
uöt32_t
 
baud_divis‹
 = 14 * (uöt32_tË
baud
;

188 
uöt32_t
 
øã
 = 
LPC32XX_PERIPH_CLK
 / 
baud_divis‹
;

189 
uöt32_t
 
ªmaödî
 = 
LPC32XX_PERIPH_CLK
 - 
øã
 * 
baud_divis‹
;

191 i‡(2 * 
ªmaödî
 >
baud_divis‹
) {

192 ++
øã
;

195 
hsu
->
øã
 =Ñate - 1;

199  
åue
;

200 
	}
}

202 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	gÕc32xx_hsu_‚s
 = {

203 .
fú°_›í
 = 
Õc32xx_hsu_fú°_›í
,

204 .
	gœ°_˛o£
 = 
Õc32xx_hsu_œ°_˛o£
,

205 .
	gwrôe
 = 
Õc32xx_hsu_wrôe
,

206 .
	g£t_©åibuãs
 = 
Õc32xx_hsu_£t_©åibuãs
,

207 .
	gmode
 = 
TERMIOS_IRQ_DRIVEN


	@src/lib/libbsp/arm/lpc32xx/include/boot.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_BOOT_H


23 
	#LIBBSP_ARM_LPC32XX_BOOT_H


	)

25 
	~<°döt.h
>

27 
	~<b•/«nd-mlc.h
>

29 #ifde‡
__˝lu•lus


58 
	#LPC32XX_BOOT_BLOCK_0
 0

	)

59 
	#LPC32XX_BOOT_BLOCK_1
 1

	)

61 
	#LPC32XX_BOOT_ICR_SP_3AC_8IF
 0xf0

	)

62 
	#LPC32XX_BOOT_ICR_SP_4AC_8IF
 0xd2

	)

63 
	#LPC32XX_BOOT_ICR_LP_4AC_8IF
 0xb4

	)

64 
	#LPC32XX_BOOT_ICR_LP_5AC_8IF
 0x96

	)

68 
uöt8_t
 
d0
;

69 
uöt8_t
 
ª£rved_0
 [3];

70 
uöt8_t
 
d1
;

71 
uöt8_t
 
ª£rved_1
 [3];

72 
uöt8_t
 
d2
;

73 
uöt8_t
 
ª£rved_2
 [3];

74 
uöt8_t
 
d3
;

75 
uöt8_t
 
ª£rved_3
 [3];

76 
uöt8_t
 
d4
;

77 
uöt8_t
 
ª£rved_4
 [3];

78 
uöt8_t
 
d5
;

79 
uöt8_t
 
ª£rved_5
 [3];

80 
uöt8_t
 
d6
;

81 
uöt8_t
 
ª£rved_6
 [3];

82 
uöt8_t
 
d7
;

83 
uöt8_t
 
ª£rved_7
 [3];

84 
uöt8_t
 
d8
;

85 
uöt8_t
 
ª£rved_8
 [3];

86 
uöt8_t
 
d9
;

87 
uöt8_t
 
ª£rved_9
 [3];

88 
uöt8_t
 
d10
;

89 
uöt8_t
 
ª£rved_10
 [3];

90 
uöt8_t
 
d11
;

91 
uöt8_t
 
ª£rved_11
 [3];

92 
uöt8_t
 
d12
;

93 
uöt8_t
 
ª£rved_12
 [463];

94 } 
fõld
;

95 
uöt32_t
 
d©a
 [
MLC_SMALL_DATA_WORD_COUNT
];

96 } 
	tÕc32xx_boŸ_block
;

98 
Õc32xx_£tup_boŸ_block
(

99 
Õc32xx_boŸ_block
 *
boŸ_block
,

100 
uöt8_t
 
i¸
,

101 
uöt8_t
 
∑ge_cou¡


104 
Õc32xx_£t_boŸ_block_bad
(

105 
Õc32xx_boŸ_block
 *
boŸ_block


110 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/bsp.h

23 #i‚de‡
LIBBSP_ARM_LPC32XX_BSP_H


24 
	#LIBBSP_ARM_LPC32XX_BSP_H


	)

26 
	~<b•›ts.h
>

28 
	#BSP_FEATURE_IRQ_EXTENSION


	)

30 #i‚de‡
ASM


32 
	~<πems.h
>

33 
	~<πems/c⁄sﬁe.h
>

34 
	~<πems/˛ockdrv.h
>

36 
	~<b•/Õc32xx.h
>

37 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

39 #ifde‡
__˝lu•lus


43 
πems_bsd√t_ifc⁄fig
;

58 
Õc_ëh_©èch_dëach
(

59 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

60 
©èchög


66 
	#RTEMS_BSP_NETWORK_DRIVER_ATTACH
 
Õc_ëh_©èch_dëach


	)

71 
	#RTEMS_BSP_NETWORK_DRIVER_NAME
 "ëh0"

	)

93 *
Õc32xx_idÀ
(
uöçå_t
 
ign‹ed
);

95 
	#LPC32XX_STANDARD_TIMER
 (&
Õc32xx
.
timî_1
)

	)

97 
ölöe
 
Õc32xx_timî
()

99 vﬁ©ûê
Õc_timî
 *
timî
 = 
LPC32XX_STANDARD_TIMER
;

101  
timî
->
tc
;

104 
ölöe
 
Õc32xx_mi¸o_£c⁄ds_dñay
(
us
)

106 
°¨t
 = 
Õc32xx_timî
();

107 
dñay
 = 
us
 * (
LPC32XX_PERIPH_CLK
 / 1000000);

108 
ñ≠£d
 = 0;

111 
ñ≠£d
 = 
Õc32xx_timî
(Ë- 
°¨t
;

112 } 
ñ≠£d
 < 
dñay
);

115 #i‡
LPC32XX_OSCILLATOR_MAIN
 == 13000000U

116 
	#LPC32XX_HCLKPLL_CTRL_INIT_VALUE
 \

117 (
HCLK_PLL_POWER
 | 
HCLK_PLL_DIRECT
 | 
	`HCLK_PLL_M
(16 - 1))

	)

118 
	#LPC32XX_HCLKDIV_CTRL_INIT_VALUE
 \

119 (
	`HCLK_DIV_HCLK
(2 - 1Ë| 
	`HCLK_DIV_PERIPH_CLK
(16 - 1Ë| 
	`HCLK_DIV_DDRAM_CLK
(0))

	)

124 
boﬁ
 
Õc32xx_°¨t_∂l_£tup
(

125 
uöt32_t
 
h˛k∂l_˘æ
,

126 
uöt32_t
 
h˛kdiv_˘æ
,

127 
boﬁ
 
f‹˚


130 
uöt32_t
 
Õc32xx_sys˛k
();

132 
uöt32_t
 
Õc32xx_h˛k∂l_˛k
();

134 
uöt32_t
 
Õc32xx_≥rùh_˛k
();

136 
uöt32_t
 
Õc32xx_h˛k
();

138 
uöt32_t
 
Õc32xx_¨m_˛k
();

140 
uöt32_t
 
Õc32xx_ddøm_˛k
();

143 
LPC32XX_NAND_CONTROLLER_NONE
,

144 
LPC32XX_NAND_CONTROLLER_MLC
,

145 
LPC32XX_NAND_CONTROLLER_SLC


146 } 
	tÕc32xx_«nd_c⁄åﬁÀr
;

148 
Õc32xx_£À˘_«nd_c⁄åﬁÀr
(
Õc32xx_«nd_c⁄åﬁÀr
 
«nd_c⁄åﬁÀr
);

150 
b•_ª°¨t
(*
addr
);

152 *
b•_idÀ_thªad
(
uöçå_t
 
¨g
);

154 
	#BSP_IDLE_TASK_BODY
 
b•_idÀ_thªad


	)

156 
	#BSP_CONSOLE_UART_BASE
 
LPC32XX_BASE_UART_5


	)

163 
uöt32_t
 
Õc32xx_magic_zîo_begö
 [];

170 
uöt32_t
 
Õc32xx_magic_zîo_íd
 [];

177 
uöt32_t
 
Õc32xx_magic_zîo_size
 [];

179 #ifde‡
LPC32XX_SCRATCH_AREA_SIZE


185 
uöt8_t
 
Õc32xx_s¸©ch_¨ó
 [
LPC32XX_SCRATCH_AREA_SIZE
]

186 
__©åibuã__
((
Æig√d
(32)));

189 
	#LPC32XX_DO_STOP_GPDMA
 \

191 i‡((
LPC32XX_DMACLK_CTRL
 & 0x1) != 0) { \

192 i‡((
Õc32xx
.
dma
.
cfg
 & 
DMA_CFG_E
) != 0) { \

193 
i
 = 0; \

194 
i
 = 0; i < 8; ++i) { \

195 
Õc32xx
.
dma
.
ch™√ls
 [
i
].
cfg
 = 0; \

197 
Õc32xx
.
dma
.
cfg
 &~
DMA_CFG_E
; \

199 
LPC32XX_DMACLK_CTRL
 = 0; \

201 } 0)

	)

203 
	#LPC32XX_DO_STOP_ETHERNET
 \

205 i‡((
LPC32XX_MAC_CLK_CTRL
 & 0x7) == 0x7) { \

206 
Õc32xx
.
ëh
.
comm™d
 = 0x38; \

207 
Õc32xx
.
ëh
.
mac1
 = 0xcf00; \

208 
Õc32xx
.
ëh
.
mac1
 = 0; \

209 
LPC32XX_MAC_CLK_CTRL
 = 0; \

211 } 0)

	)

213 
	#LPC32XX_DO_STOP_USB
 \

215 i‡((
LPC32XX_USB_CTRL
 & 0x010e8000) != 0) { \

216 
LPC32XX_OTG_CLK_CTRL
 = 0; \

217 
LPC32XX_USB_CTRL
 = 0x80000; \

219 } 0)

	)

221 
	#LPC32XX_DO_RESTART
(
addr
) \

223 
ARM_SWITCH_REGISTERS
; \

224 
πems_öãºu±_Àvñ
 
Àvñ
; \

225 
uöt32_t
 
˘æ
 = 0; \

227 
	`πems_öãºu±_dißbÀ
(
Àvñ
); \

229 
	`¨m_˝15_d©a_ˇche_ã°_™d_˛ón
(); \

230 
	`¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e
(); \

232 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
(); \

233 
˘æ
 &~(
ARM_CP15_CTRL_I
 | 
ARM_CP15_CTRL_C
 | 
ARM_CP15_CTRL_M
); \

234 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
); \

236 
__asm__
 volatile ( \

237 
ARM_SWITCH_TO_ARM
 \

239 
ARM_SWITCH_BACK
 \

240 : 
ARM_SWITCH_OUTPUT
 \

241 : [
addr
] "r" (addr) \

243 } 0)

	)

255 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/emc.h

23 #i‚de‡
LIBBSP_ARM_LPC32XX_EMC_H


24 
	#LIBBSP_ARM_LPC32XX_EMC_H


	)

26 
	~<πems.h
>

28 
	~<b•/Õc-emc.h
>

30 #ifde‡
__˝lu•lus


48 
	#SDRAMCLK_CLOCKS_DIS
 
	`BSP_BIT32
(0)

	)

49 
	#SDRAMCLK_DDR_MODE
 
	`BSP_BIT32
(1)

	)

50 
	#SDRAMCLK_DDR_DQSIN_DELAY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 2, 6)

	)

51 
	#SDRAMCLK_RTC_TICK_EN
 
	`BSP_BIT32
(7)

	)

52 
	#SDRAMCLK_SW_DDR_CAL
 
	`BSP_BIT32
(8)

	)

53 
	#SDRAMCLK_CAL_DELAY
 
	`BSP_BIT32
(9)

	)

54 
	#SDRAMCLK_SENSITIVITY_FACTOR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 12)

	)

55 
	#SDRAMCLK_DCA_STATUS
 
	`BSP_BIT32
(13)

	)

56 
	#SDRAMCLK_COMMAND_DELAY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 14, 18)

	)

57 
	#SDRAMCLK_SW_DDR_RESET
 
	`BSP_BIT32
(19)

	)

58 
	#SDRAMCLK_PIN_1_FAST
 
	`BSP_BIT32
(20)

	)

59 
	#SDRAMCLK_PIN_2_FAST
 
	`BSP_BIT32
(21)

	)

60 
	#SDRAMCLK_PIN_3_FAST
 
	`BSP_BIT32
(22)

	)

70 
	#EMC_AHB_PORT_BUFF_EN
 
	`BSP_BIT32
(0)

	)

80 
	#EMC_AHB_TIMEOUT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

90 
	#SDRAM_ADDR_ROW_16MB
(
vÆ
Ë((
uöt32_t
Ë(vÆË<< 10)

	)

91 
	#SDRAM_ADDR_ROW_32MB
(
vÆ
Ë((
uöt32_t
Ë(vÆË<< 11)

	)

92 
	#SDRAM_ADDR_ROW_64MB
(
vÆ
Ë((
uöt32_t
Ë(vÆË<< 11)

	)

94 
	#SDRAM_ADDR_BANK_16MB
(
ba1
, 
ba0
) \

95 (((
uöt32_t
Ë(
ba1
Ë<< 23Ë| ((uöt32_tË(
ba0
Ë<< 22))

	)

96 
	#SDRAM_ADDR_BANK_32MB
(
ba1
, 
ba0
) \

97 (((
uöt32_t
Ë(
ba1
Ë<< 23Ë| ((uöt32_tË(
ba0
Ë<< 24))

	)

98 
	#SDRAM_ADDR_BANK_64MB
(
ba1
, 
ba0
) \

99 (((
uöt32_t
Ë(
ba1
Ë<< 25Ë| ((uöt32_tË(
ba0
Ë<< 24))

	)

101 
	#SDRAM_MODE_16MB
(
mode
) \

102 (
	`SDRAM_ADDR_BANK_16MB
(0, 0Ë| 
	`SDRAM_ADDR_ROW_16MB
(
mode
))

	)

103 
	#SDRAM_MODE_32MB
(
mode
) \

104 (
	`SDRAM_ADDR_BANK_32MB
(0, 0Ë| 
	`SDRAM_ADDR_ROW_32MB
(
mode
))

	)

105 
	#SDRAM_MODE_64MB
(
mode
) \

106 (
	`SDRAM_ADDR_BANK_64MB
(0, 0Ë| 
	`SDRAM_ADDR_ROW_64MB
(
mode
))

	)

108 
	#SDRAM_EXTMODE_16MB
(
mode
) \

109 (
	`SDRAM_ADDR_BANK_16MB
(1, 0Ë| 
	`SDRAM_ADDR_ROW_16MB
(
mode
))

	)

110 
	#SDRAM_EXTMODE_32MB
(
mode
) \

111 (
	`SDRAM_ADDR_BANK_32MB
(1, 0Ë| 
	`SDRAM_ADDR_ROW_32MB
(
mode
))

	)

112 
	#SDRAM_EXTMODE_64MB
(
mode
) \

113 (
	`SDRAM_ADDR_BANK_64MB
(1, 0Ë| 
	`SDRAM_ADDR_ROW_64MB
(
mode
))

	)

115 
	#SDRAM_MODE_BURST_LENGTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

116 
	#SDRAM_MODE_BURST_INTERLEAVE
 
	`BSP_BIT32
(3)

	)

117 
	#SDRAM_MODE_CAS
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 6)

	)

118 
	#SDRAM_MODE_TEST_MODE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 7, 8)

	)

119 
	#SDRAM_MODE_WRITE_BURST_SINGLE_BIT
 
	`BSP_BIT32
(9)

	)

121 
	#SDRAM_EXTMODE_PASR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

122 
	#SDRAM_EXTMODE_DRIVER_STRENGTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 5, 6)

	)

127 
uöt32_t
 
size
;

128 
uöt32_t
 
c⁄fig
;

129 
uöt32_t
 
øsˇs
;

130 
uöt32_t
 
mode
;

131 
uöt32_t
 
extmode
;

132 } 
	tÕc32xx_emc_dy«mic_chù_c⁄fig
;

135 
uöt32_t
 
sdøm˛k_˘æ
;

136 
uöt32_t
 
n›_time_ö_us
;

137 
uöt32_t
 
c⁄åﬁ
;

138 
uöt32_t
 
ª‰esh
;

139 
uöt32_t
 
ªadc⁄fig
;

140 
uöt32_t
 
åp
;

141 
uöt32_t
 
åas
;

142 
uöt32_t
 
t§ex
;

143 
uöt32_t
 
twr
;

144 
uöt32_t
 
åc
;

145 
uöt32_t
 
åfc
;

146 
uöt32_t
 
tx§
;

147 
uöt32_t
 
ård
;

148 
uöt32_t
 
tmrd
;

149 
uöt32_t
 
tcdÃ
;

150 
Õc32xx_emc_dy«mic_chù_c⁄fig
 
chù
 [
EMC_DYN_CHIP_COUNT
];

151 } 
	tÕc32xx_emc_dy«mic_c⁄fig
;

153 
Õc32xx_emc_öô
(c⁄° 
Õc32xx_emc_dy«mic_c⁄fig
 *
dyn_cfg
);

157 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/hsu.h

23 #i‚de‡
LIBBSP_ARM_LPC32XX_HSU_H


24 
	#LIBBSP_ARM_LPC32XX_HSU_H


	)

26 
	~<πems/ãrmio°y≥s.h
>

28 #ifde‡
__˝lu•lus


43 
uöt32_t
 
fifo
;

44 
uöt32_t
 
Àvñ
;

45 
uöt32_t
 
iú
;

46 
uöt32_t
 
˘æ
;

47 
uöt32_t
 
øã
;

48 } 
	tÕc32xx_hsu
;

51 
πems_ãrmios_devi˚_c⁄ãxt
 
ba£
;

52 vﬁ©ûê
Õc32xx_hsu
 *
hsu
;

53 
size_t
 
ch¨s_ö_å™smissi⁄
;

54 
πems_ve˘‹_numbî
 
úq
;

55 
uöt32_t
 
öôül_baud
;

56 } 
	tÕc32xx_hsu_c⁄ãxt
;

58 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
Õc32xx_hsu_‚s
;

60 
boﬁ
 
Õc32xx_hsu_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
);

64 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/i2c.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_I2C_H


23 
	#LIBBSP_ARM_LPC32XX_I2C_H


	)

25 
	~<πems.h
>

27 
	~<b•/Õc32xx.h
>

29 #ifde‡
__˝lu•lus


52 
	#I2CCLK_1_EN
 
	`BSP_BIT32
(0)

	)

53 
	#I2CCLK_2_EN
 
	`BSP_BIT32
(1)

	)

54 
	#I2CCLK_1_HIGH_DRIVE
 
	`BSP_BIT32
(2)

	)

55 
	#I2CCLK_2_HIGH_DRIVE
 
	`BSP_BIT32
(3)

	)

56 
	#I2CCLK_USB_HIGH_DRIVE
 
	`BSP_BIT32
(4)

	)

66 
	#I2C_TX_READ
 
	`BSP_BIT32
(0)

	)

67 
	#I2C_TX_ADDR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 7)

	)

68 
	#I2C_TX_START
 
	`BSP_BIT32
(8)

	)

69 
	#I2C_TX_STOP
 
	`BSP_BIT32
(9)

	)

79 
	#I2C_STAT_TDI
 
	`BSP_BIT32
(0)

	)

80 
	#I2C_STAT_AFI
 
	`BSP_BIT32
(1)

	)

81 
	#I2C_STAT_NAI
 
	`BSP_BIT32
(2)

	)

82 
	#I2C_STAT_DRMI
 
	`BSP_BIT32
(3)

	)

83 
	#I2C_STAT_DRSI
 
	`BSP_BIT32
(4)

	)

84 
	#I2C_STAT_ACTIVE
 
	`BSP_BIT32
(5)

	)

85 
	#I2C_STAT_SCL
 
	`BSP_BIT32
(6)

	)

86 
	#I2C_STAT_SDA
 
	`BSP_BIT32
(7)

	)

87 
	#I2C_STAT_RFF
 
	`BSP_BIT32
(8)

	)

88 
	#I2C_STAT_RFE
 
	`BSP_BIT32
(9)

	)

89 
	#I2C_STAT_TFF
 
	`BSP_BIT32
(10)

	)

90 
	#I2C_STAT_TFE
 
	`BSP_BIT32
(11)

	)

91 
	#I2C_STAT_TFFS
 
	`BSP_BIT32
(12)

	)

92 
	#I2C_STAT_TFES
 
	`BSP_BIT32
(13)

	)

102 
	#I2C_CTRL_TDIE
 
	`BSP_BIT32
(0)

	)

103 
	#I2C_CTRL_AFIE
 
	`BSP_BIT32
(1)

	)

104 
	#I2C_CTRL_NAIE
 
	`BSP_BIT32
(2)

	)

105 
	#I2C_CTRL_DRMIE
 
	`BSP_BIT32
(3)

	)

106 
	#I2C_CTRL_DRSIE
 
	`BSP_BIT32
(4)

	)

107 
	#I2C_CTRL_RFFIE
 
	`BSP_BIT32
(5)

	)

108 
	#I2C_CTRL_RFDAIE
 
	`BSP_BIT32
(6)

	)

109 
	#I2C_CTRL_TFFIO
 
	`BSP_BIT32
(7)

	)

110 
	#I2C_CTRL_RESET
 
	`BSP_BIT32
(8)

	)

111 
	#I2C_CTRL_SEVEN
 
	`BSP_BIT32
(9)

	)

112 
	#I2C_CTRL_TFFSIE
 
	`BSP_BIT32
(10)

	)

125 
πems_°©us_code
 
Õc32xx_i2c_öô
(

126 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

127 
˛ock_ö_hz


133 
Õc32xx_i2c_ª£t
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
);

143 
πems_°©us_code
 
Õc32xx_i2c_˛ock
(

144 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

145 
˛ock_ö_hz


159 
πems_°©us_code
 
Õc32xx_i2c_wrôe_°¨t
(

160 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

161 
addr


173 
πems_°©us_code
 
Õc32xx_i2c_wrôe_wôh_›ti⁄Æ_°›
(

174 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

175 c⁄° 
uöt8_t
 *
out
,

176 
size_t
 
n
,

177 
boﬁ
 
°›


191 
πems_°©us_code
 
Õc32xx_i2c_ªad_°¨t
(

192 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

193 
addr


203 
πems_°©us_code
 
Õc32xx_i2c_ªad_wôh_›ti⁄Æ_°›
(

204 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

205 
uöt8_t
 *
ö
,

206 
size_t
 
n
,

207 
boﬁ
 
°›


218 
πems_°©us_code
 
Õc32xx_i2c_wrôe_™d_ªad
(

219 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

220 
addr
,

221 c⁄° 
uöt8_t
 *
out
,

222 
size_t
 
out_size
,

223 
uöt8_t
 *
ö
,

224 
size_t
 
ö_size


235 
ölöe
 
πems_°©us_code
 
Õc32xx_i2c_wrôe
(

236 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

237 
addr
,

238 c⁄° 
uöt8_t
 *
out
,

239 
size_t
 
out_size


242  
Õc32xx_i2c_wrôe_™d_ªad
(
i2c
, 
addr
, 
out
, 
out_size
, 
NULL
, 0);

253 
ölöe
 
πems_°©us_code
 
Õc32xx_i2c_ªad
(

254 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

255 
addr
,

256 
uöt8_t
 *
ö
,

257 
size_t
 
ö_size


260  
Õc32xx_i2c_wrôe_™d_ªad
(
i2c
, 
addr
, 
NULL
, 0, 
ö
, 
ö_size
);

265 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/irq.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_IRQ_H


23 
	#LIBBSP_ARM_LPC32XX_IRQ_H


	)

25 #i‚de‡
ASM


27 
	~<πems.h
>

28 
	~<πems/úq.h
>

29 
	~<πems/úq-exãnsi⁄.h
>

31 #ifde‡
__˝lu•lus


45 
	#LPC32XX_IRQ_INDEX
(
moduÀ
, 
subödex
Ë((moduÀË+ (subödex))

	)

47 
	#LPC32XX_IRQ_MODULE_MIC
 0U

	)

48 
	#LPC32XX_IRQ_MODULE_SIC_1
 32U

	)

49 
	#LPC32XX_IRQ_MODULE_SIC_2
 64U

	)

50 
	#LPC32XX_IRQ_MODULE_COUNT
 3U

	)

53 
	#LPC32XX_IRQ_SIC_1_IRQ
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 0)

	)

54 
	#LPC32XX_IRQ_SIC_2_IRQ
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 1)

	)

55 
	#LPC32XX_IRQ_TIMER_4_OR_MCPWM
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 3)

	)

56 
	#LPC32XX_IRQ_TIMER_5
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 4)

	)

57 
	#LPC32XX_IRQ_TIMER_HS
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 5)

	)

58 
	#LPC32XX_IRQ_WDG
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 6)

	)

59 
	#LPC32XX_IRQ_UART_3
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 7)

	)

60 
	#LPC32XX_IRQ_UART_4
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 8)

	)

61 
	#LPC32XX_IRQ_UART_5
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 9)

	)

62 
	#LPC32XX_IRQ_UART_6
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 10)

	)

63 
	#LPC32XX_IRQ_NAND_FLASH
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 11)

	)

64 
	#LPC32XX_IRQ_SDCARD_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 13)

	)

65 
	#LPC32XX_IRQ_LCD
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 14)

	)

66 
	#LPC32XX_IRQ_SDCARD_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 15)

	)

67 
	#LPC32XX_IRQ_TIMER_0
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 16)

	)

68 
	#LPC32XX_IRQ_TIMER_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 17)

	)

69 
	#LPC32XX_IRQ_TIMER_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 18)

	)

70 
	#LPC32XX_IRQ_TIMER_3
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 19)

	)

71 
	#LPC32XX_IRQ_SSP_0
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 20)

	)

72 
	#LPC32XX_IRQ_SSP_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 21)

	)

73 
	#LPC32XX_IRQ_I2S_0
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 22)

	)

74 
	#LPC32XX_IRQ_I2S_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 23)

	)

75 
	#LPC32XX_IRQ_UART_7
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 24)

	)

76 
	#LPC32XX_IRQ_UART_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 25)

	)

77 
	#LPC32XX_IRQ_UART_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 26)

	)

78 
	#LPC32XX_IRQ_TIMER_MS
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 27)

	)

79 
	#LPC32XX_IRQ_DMA
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 28)

	)

80 
	#LPC32XX_IRQ_ETHERNET
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 29)

	)

81 
	#LPC32XX_IRQ_SIC_1_FIQ
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 30)

	)

82 
	#LPC32XX_IRQ_SIC_2_FIQ
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_MIC
, 31)

	)

85 
	#LPC32XX_IRQ_JTAG_COMM_TX
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 1)

	)

86 
	#LPC32XX_IRQ_JTAG_COMM_RX
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 2)

	)

87 
	#LPC32XX_IRQ_GPI_28
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 4)

	)

88 
	#LPC32XX_IRQ_TS_P
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 6)

	)

89 
	#LPC32XX_IRQ_TS_IRQ_OR_ADC
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 7)

	)

90 
	#LPC32XX_IRQ_TS_AUX
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 8)

	)

91 
	#LPC32XX_IRQ_SPI_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 12)

	)

92 
	#LPC32XX_IRQ_PLL_USB
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 13)

	)

93 
	#LPC32XX_IRQ_PLL_HCLK
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 14)

	)

94 
	#LPC32XX_IRQ_PLL_397
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 17)

	)

95 
	#LPC32XX_IRQ_I2C_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 18)

	)

96 
	#LPC32XX_IRQ_I2C_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 19)

	)

97 
	#LPC32XX_IRQ_RTC
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 20)

	)

98 
	#LPC32XX_IRQ_KEYSCAN
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 22)

	)

99 
	#LPC32XX_IRQ_SPI_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 23)

	)

100 
	#LPC32XX_IRQ_SW
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 24)

	)

101 
	#LPC32XX_IRQ_USB_OTG_TIMER
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 25)

	)

102 
	#LPC32XX_IRQ_USB_OTG_ATX
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 26)

	)

103 
	#LPC32XX_IRQ_USB_HOST
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 27)

	)

104 
	#LPC32XX_IRQ_USB_DEV_DMA
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 28)

	)

105 
	#LPC32XX_IRQ_USB_DEV_LP
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 29)

	)

106 
	#LPC32XX_IRQ_USB_DEV_HP
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 30)

	)

107 
	#LPC32XX_IRQ_USB_I2C
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_1
, 31)

	)

110 
	#LPC32XX_IRQ_GPIO_0
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 0)

	)

111 
	#LPC32XX_IRQ_GPIO_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 1)

	)

112 
	#LPC32XX_IRQ_GPIO_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 2)

	)

113 
	#LPC32XX_IRQ_GPIO_3
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 3)

	)

114 
	#LPC32XX_IRQ_GPIO_4
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 4)

	)

115 
	#LPC32XX_IRQ_GPIO_5
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 5)

	)

116 
	#LPC32XX_IRQ_SPI_2_DATAIN
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 6)

	)

117 
	#LPC32XX_IRQ_UART_2_HCTS
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 7)

	)

118 
	#LPC32XX_IRQ_GPIO_P0_P1_IRQ
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 8)

	)

119 
	#LPC32XX_IRQ_GPI_8
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 9)

	)

120 
	#LPC32XX_IRQ_GPI_9
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 10)

	)

121 
	#LPC32XX_IRQ_GPI_19
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 11)

	)

122 
	#LPC32XX_IRQ_UART_7_HCTS
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 12)

	)

123 
	#LPC32XX_IRQ_GPI_7
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 15)

	)

124 
	#LPC32XX_IRQ_SDIO
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 18)

	)

125 
	#LPC32XX_IRQ_UART_5_RX
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 19)

	)

126 
	#LPC32XX_IRQ_SPI_1_DATAIN
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 20)

	)

127 
	#LPC32XX_IRQ_GPI_0
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 22)

	)

128 
	#LPC32XX_IRQ_GPI_1
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 23)

	)

129 
	#LPC32XX_IRQ_GPI_2
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 24)

	)

130 
	#LPC32XX_IRQ_GPI_3
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 25)

	)

131 
	#LPC32XX_IRQ_GPI_4
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 26)

	)

132 
	#LPC32XX_IRQ_GPI_5
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 27)

	)

133 
	#LPC32XX_IRQ_GPI_6
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 28)

	)

134 
	#LPC32XX_IRQ_SYSCLK
 
	`LPC32XX_IRQ_INDEX
(
LPC32XX_IRQ_MODULE_SIC_2
, 31)

	)

136 
	#LPC32XX_IRQ_PRIORITY_VALUE_MIN
 0U

	)

137 
	#LPC32XX_IRQ_PRIORITY_VALUE_MAX
 15U

	)

138 
	#LPC32XX_IRQ_PRIORITY_COUNT
 (
LPC32XX_IRQ_PRIORITY_VALUE_MAX
 + 1U)

	)

139 
	#LPC32XX_IRQ_PRIORITY_HIGHEST
 
LPC32XX_IRQ_PRIORITY_VALUE_MIN


	)

140 
	#LPC32XX_IRQ_PRIORITY_LOWEST
 
LPC32XX_IRQ_PRIORITY_VALUE_MAX


	)

142 
	#BSP_INTERRUPT_VECTOR_MIN
 
LPC32XX_IRQ_SIC_1_IRQ


	)

143 
	#BSP_INTERRUPT_VECTOR_MAX
 
LPC32XX_IRQ_SYSCLK


	)

145 
	#LPC32XX_IRQ_COUNT
 (
BSP_INTERRUPT_VECTOR_MAX
 + 1)

	)

147 
Õc32xx_úq_£t_¥i‹ôy
(
πems_ve˘‹_numbî
 
ve˘‹
, 
¥i‹ôy
);

149 
Õc32xx_úq_gë_¥i‹ôy
(
πems_ve˘‹_numbî
 
ve˘‹
);

152 
LPC32XX_IRQ_ACTIVE_LOW_OR_FALLING_EDGE
,

153 
LPC32XX_IRQ_ACTIVE_HIGH_OR_RISING_EDGE


154 } 
	tÕc32xx_úq_a˘iv©i⁄_pﬁ¨ôy
;

156 
Õc32xx_úq_£t_a˘iv©i⁄_pﬁ¨ôy
(
πems_ve˘‹_numbî
 
ve˘‹
, 
Õc32xx_úq_a˘iv©i⁄_pﬁ¨ôy
 
a˘iv©i⁄_pﬁ¨ôy
);

158 
Õc32xx_úq_a˘iv©i⁄_pﬁ¨ôy
 
Õc32xx_úq_gë_a˘iv©i⁄_pﬁ¨ôy
(
πems_ve˘‹_numbî
 
ve˘‹
);

161 
LPC32XX_IRQ_LEVEL_SENSITIVE
,

162 
LPC32XX_IRQ_EDGE_SENSITIVE


163 } 
	tÕc32xx_úq_a˘iv©i⁄_ty≥
;

165 
Õc32xx_úq_£t_a˘iv©i⁄_ty≥
(
πems_ve˘‹_numbî
 
ve˘‹
, 
Õc32xx_úq_a˘iv©i⁄_ty≥
 
a˘iv©i⁄_ty≥
);

167 
Õc32xx_úq_a˘iv©i⁄_ty≥
 
Õc32xx_úq_gë_a˘iv©i⁄_ty≥
(
πems_ve˘‹_numbî
 
ve˘‹
);

169 
Õc32xx_£t_ex˚±i⁄_h™dÀr
(
Arm_symbﬁic_ex˚±i⁄_«me
 
ex˚±i⁄
, (*
h™dÀr
)());

173 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/lpc-clock-config.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_LPC_CLOCK_CONFIG_H


23 
	#LIBBSP_ARM_LPC32XX_LPC_CLOCK_CONFIG_H


	)

25 
	~<b•.h
>

26 
	~<b•/úq.h
>

27 
	~<b•/Õc32xx.h
>

29 #ifde‡
__˝lu•lus


43 
	#LPC_CLOCK_INTERRUPT
 
LPC32XX_IRQ_TIMER_0


	)

45 
	#LPC_CLOCK_TIMER_BASE
 
LPC32XX_BASE_TIMER_0


	)

47 
	#LPC_CLOCK_TIMECOUNTER_BASE
 
LPC32XX_BASE_TIMER_1


	)

49 
	#LPC_CLOCK_REFERENCE
 
LPC32XX_PERIPH_CLK


	)

51 
	#LPC_CLOCK_MODULE_ENABLE
()

	)

55 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/lpc-ethernet-config.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_LPC_ETHERNET_CONFIG_H


23 
	#LIBBSP_ARM_LPC32XX_LPC_ETHERNET_CONFIG_H


	)

25 
	~<°dlib.h
>

26 
	~<limôs.h
>

28 
	~<πems.h
>

29 
	~<πems/mÆloc.h
>

31 
	~<b•.h
>

32 
	~<b•/Õc32xx.h
>

34 #ifde‡
__˝lu•lus


48 
	#LPC_ETH_CONFIG_INTERRUPT
 
LPC32XX_IRQ_ETHERNET


	)

50 
	#LPC_ETH_CONFIG_REG_BASE
 
LPC32XX_BASE_ETHERNET


	)

52 
	#LPC_ETH_CONFIG_RX_UNIT_COUNT_DEFAULT
 16

	)

53 
	#LPC_ETH_CONFIG_RX_UNIT_COUNT_MAX
 
INT_MAX


	)

55 
	#LPC_ETH_CONFIG_TX_UNIT_COUNT_DEFAULT
 32

	)

56 
	#LPC_ETH_CONFIG_TX_UNIT_COUNT_MAX
 
INT_MAX


	)

58 
	#LPC_ETH_CONFIG_UNIT_MULTIPLE
 8U

	)

60 #ifde‡
LPC32XX_ETHERNET_RMII


61 
	#LPC_ETH_CONFIG_RMII


	)

63 
Õc_ëh_c⁄fig_moduÀ_íabÀ
()

65 
LPC32XX_MAC_CLK_CTRL
 = 0x1f;

68 
Õc_ëh_c⁄fig_moduÀ_íabÀ
()

70 
LPC32XX_MAC_CLK_CTRL
 = 0x0f;

74 
Õc_ëh_c⁄fig_moduÀ_dißbÀ
()

76 
LPC32XX_MAC_CLK_CTRL
 = 0;

79 
	#LPC_ETH_CONFIG_USE_TRANSMIT_DMA


	)

81 *
Õc_ëh_c⁄fig_Æloc_èbÀ_¨ó
(
size_t
 
size
)

83  
πems_hóp_Æloˇã_Æig√d_wôh_bound¨y
(
size
, 32, 0);

86 
Õc_ëh_c⁄fig_‰ì_èbÀ_¨ó
(*
èbÀ_¨ó
)

89 
‰ì
(
èbÀ_¨ó
, () 0xdeadbeef);

94 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/lpc32xx.h

22 #i‚de‡
LIBBSP_ARM_LPC32XX_LPC32XX_H


23 
	#LIBBSP_ARM_LPC32XX_LPC32XX_H


	)

25 
	~<°döt.h
>

27 
	~<b•/utûôy.h
>

28 
	~<b•/Õc-timî.h
>

29 
	~<b•/Õc-dma.h
>

30 
	~<b•/Õc-i2s.h
>

31 
	~<b•/Õc-emc.h
>

49 
	#LPC32XX_BASE_ADC
 0x40048000

	)

50 
	#LPC32XX_BASE_SYSCON
 0x40004000

	)

51 
	#LPC32XX_BASE_DEBUG_CTRL
 0x40040000

	)

52 
	#LPC32XX_BASE_DMA
 0x31000000

	)

53 
	#LPC32XX_BASE_EMC
 0x31080000

	)

54 
	#LPC32XX_BASE_EMC_CS_0
 0xe0000000

	)

55 
	#LPC32XX_BASE_EMC_CS_1
 0xe1000000

	)

56 
	#LPC32XX_BASE_EMC_CS_2
 0xe2000000

	)

57 
	#LPC32XX_BASE_EMC_CS_3
 0xe3000000

	)

58 
	#LPC32XX_BASE_EMC_DYCS_0
 0x80000000

	)

59 
	#LPC32XX_BASE_EMC_DYCS_1
 0xa0000000

	)

60 
	#LPC32XX_BASE_ETB_CFG
 0x310c0000

	)

61 
	#LPC32XX_BASE_ETB_DATA
 0x310e0000

	)

62 
	#LPC32XX_BASE_ETHERNET
 0x31060000

	)

63 
	#LPC32XX_BASE_GPIO
 0x40028000

	)

64 
	#LPC32XX_BASE_I2C_1
 0x400a0000

	)

65 
	#LPC32XX_BASE_I2C_2
 0x400a8000

	)

66 
	#LPC32XX_BASE_I2S_0
 0x20094000

	)

67 
	#LPC32XX_BASE_I2S_1
 0x2009c000

	)

68 
	#LPC32XX_BASE_IRAM
 0x08000000

	)

69 
	#LPC32XX_BASE_IROM
 0x0c000000

	)

70 
	#LPC32XX_BASE_KEYSCAN
 0x40050000

	)

71 
	#LPC32XX_BASE_LCD
 0x31040000

	)

72 
	#LPC32XX_BASE_MCPWM
 0x400e8000

	)

73 
	#LPC32XX_BASE_MIC
 0x40008000

	)

74 
	#LPC32XX_BASE_NAND_MLC
 0x200a8000

	)

75 
	#LPC32XX_BASE_NAND_SLC
 0x20020000

	)

76 
	#LPC32XX_BASE_PWM_1
 0x4005c000

	)

77 
	#LPC32XX_BASE_PWM_2
 0x4005c004

	)

78 
	#LPC32XX_BASE_PWM_3
 0x4002c000

	)

79 
	#LPC32XX_BASE_PWM_4
 0x40030000

	)

80 
	#LPC32XX_BASE_RTC
 0x40024000

	)

81 
	#LPC32XX_BASE_RTC_RAM
 0x40024080

	)

82 
	#LPC32XX_BASE_SDCARD
 0x20098000

	)

83 
	#LPC32XX_BASE_SIC_1
 0x4000c000

	)

84 
	#LPC32XX_BASE_SIC_2
 0x40010000

	)

85 
	#LPC32XX_BASE_SPI_1
 0x20088000

	)

86 
	#LPC32XX_BASE_SPI_2
 0x20090000

	)

87 
	#LPC32XX_BASE_SSP_0
 0x20084000

	)

88 
	#LPC32XX_BASE_SSP_1
 0x2008c000

	)

89 
	#LPC32XX_BASE_TIMER_0
 0x40044000

	)

90 
	#LPC32XX_BASE_TIMER_1
 0x4004c000

	)

91 
	#LPC32XX_BASE_TIMER_2
 0x40058000

	)

92 
	#LPC32XX_BASE_TIMER_3
 0x40060000

	)

93 
	#LPC32XX_BASE_TIMER_5
 0x4002c000

	)

94 
	#LPC32XX_BASE_TIMER_6
 0x40030000

	)

95 
	#LPC32XX_BASE_TIMER_HS
 0x40038000

	)

96 
	#LPC32XX_BASE_TIMER_MS
 0x40034000

	)

97 
	#LPC32XX_BASE_UART_1
 0x40014000

	)

98 
	#LPC32XX_BASE_UART_2
 0x40018000

	)

99 
	#LPC32XX_BASE_UART_3
 0x40080000

	)

100 
	#LPC32XX_BASE_UART_4
 0x40088000

	)

101 
	#LPC32XX_BASE_UART_5
 0x40090000

	)

102 
	#LPC32XX_BASE_UART_6
 0x40098000

	)

103 
	#LPC32XX_BASE_UART_7
 0x4001c000

	)

104 
	#LPC32XX_BASE_USB
 0x31020000

	)

105 
	#LPC32XX_BASE_USB_OTG_I2C
 0x31020300

	)

106 
	#LPC32XX_BASE_WDT
 0x4003c000

	)

116 
	#LPC32XX_U3CLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040d0)

	)

117 
	#LPC32XX_U4CLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040d4)

	)

118 
	#LPC32XX_U5CLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040d8)

	)

119 
	#LPC32XX_U6CLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040dc)

	)

120 
	#LPC32XX_IRDACLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040e0)

	)

121 
	#LPC32XX_UART_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40054000)

	)

122 
	#LPC32XX_UART_CLKMODE
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40054004)

	)

123 
	#LPC32XX_UART_LOOP
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40054008)

	)

124 
	#LPC32XX_SW_INT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040a8)

	)

125 
	#LPC32XX_MAC_CLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004090)

	)

126 
	#LPC32XX_USB_DIV
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000401c)

	)

127 
	#LPC32XX_OTG_CLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020ff4)

	)

128 
	#LPC32XX_OTG_CLK_STAT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020ff8)

	)

129 
	#LPC32XX_OTG_STAT_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020110)

	)

130 
	#LPC32XX_I2C_RX
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020300)

	)

131 
	#LPC32XX_I2C_TX
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020300)

	)

132 
	#LPC32XX_I2C_STS
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020304)

	)

133 
	#LPC32XX_I2C_CTL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020308)

	)

134 
	#LPC32XX_I2C_CLKHI
 (*(vﬁ©ûê
uöt32_t
 *Ë0x3102030c)

	)

135 
	#LPC32XX_I2C_CLKLO
 (*(vﬁ©ûê
uöt32_t
 *Ë0x31020310)

	)

136 
	#LPC32XX_PWR_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004044)

	)

137 
	#LPC32XX_OSC_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000404c)

	)

138 
	#LPC32XX_SYSCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004050)

	)

139 
	#LPC32XX_PLL397_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004048)

	)

140 
	#LPC32XX_HCLKPLL_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004058)

	)

141 
	#LPC32XX_HCLKDIV_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004040)

	)

142 
	#LPC32XX_TEST_CLK
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040a4)

	)

143 
	#LPC32XX_AUTOCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040ec)

	)

144 
	#LPC32XX_START_ER_PIN
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004030)

	)

145 
	#LPC32XX_START_ER_INT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004020)

	)

146 
	#LPC32XX_P0_INTR_ER
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004018)

	)

147 
	#LPC32XX_START_SR_PIN
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004038)

	)

148 
	#LPC32XX_START_SR_INT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004028)

	)

149 
	#LPC32XX_START_RSR_PIN
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004034)

	)

150 
	#LPC32XX_START_RSR_INT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004024)

	)

151 
	#LPC32XX_START_APR_PIN
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000403c)

	)

152 
	#LPC32XX_START_APR_INT
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000402c)

	)

153 
	#LPC32XX_USB_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004064)

	)

154 
	#LPC32XX_USBDIV_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000401c)

	)

155 
	#LPC32XX_MS_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004080)

	)

156 
	#LPC32XX_DMACLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040e8)

	)

157 
	#LPC32XX_FLASHCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040c8)

	)

158 
	#LPC32XX_MACCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004090)

	)

159 
	#LPC32XX_LCDCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004054)

	)

160 
	#LPC32XX_I2S_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x4000407c)

	)

161 
	#LPC32XX_SSP_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004078)

	)

162 
	#LPC32XX_SPI_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040c4)

	)

163 
	#LPC32XX_I2CCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040ac)

	)

164 
	#LPC32XX_TIMCLK_CTRL1
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040c0)

	)

165 
	#LPC32XX_TIMCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040bc)

	)

166 
	#LPC32XX_ADCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040b4)

	)

167 
	#LPC32XX_ADCLK_CTRL1
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004060)

	)

168 
	#LPC32XX_KEYCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040b0)

	)

169 
	#LPC32XX_PWMCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040b8)

	)

170 
	#LPC32XX_UARTCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x400040e4)

	)

171 
	#LPC32XX_POS0_IRAM_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004110)

	)

172 
	#LPC32XX_POS1_IRAM_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004114)

	)

173 
	#LPC32XX_SDRAMCLK_CTRL
 (*(vﬁ©ûê
uöt32_t
 *Ë0x40004068)

	)

183 
	#PWR_STOP
 
	`BSP_BIT32
(0)

	)

184 
	#PWR_HIGHCORE_ALWAYS
 
	`BSP_BIT32
(1)

	)

185 
	#PWR_NORMAL_RUN_MODE
 
	`BSP_BIT32
(2)

	)

186 
	#PWR_SYSCLKEN_ALWAYS
 
	`BSP_BIT32
(3)

	)

187 
	#PWR_SYSCLKEN_HIGH
 
	`BSP_BIT32
(4)

	)

188 
	#PWR_HIGHCORE_HIGH
 
	`BSP_BIT32
(5)

	)

189 
	#PWR_SDRAM_AUTO_REFRESH
 
	`BSP_BIT32
(7)

	)

190 
	#PWR_UPDATE_EMCSREFREQ
 
	`BSP_BIT32
(8)

	)

191 
	#PWR_EMCSREFREQ
 
	`BSP_BIT32
(9)

	)

192 
	#PWR_HCLK_USES_PERIPH_CLK
 
	`BSP_BIT32
(10)

	)

202 
	#HCLK_PLL_LOCK
 
	`BSP_BIT32
(0)

	)

203 
	#HCLK_PLL_M
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 8)

	)

204 
	#HCLK_PLL_M_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 8)

	)

205 
	#HCLK_PLL_N
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 9, 10)

	)

206 
	#HCLK_PLL_N_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 9, 10)

	)

207 
	#HCLK_PLL_P
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 11, 12)

	)

208 
	#HCLK_PLL_P_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 11, 12)

	)

209 
	#HCLK_PLL_FBD_FCLKOUT
 
	`BSP_BIT32
(13)

	)

210 
	#HCLK_PLL_DIRECT
 
	`BSP_BIT32
(14)

	)

211 
	#HCLK_PLL_BYPASS
 
	`BSP_BIT32
(15)

	)

212 
	#HCLK_PLL_POWER
 
	`BSP_BIT32
(16)

	)

222 
	#HCLK_DIV_HCLK
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 1)

	)

223 
	#HCLK_DIV_HCLK_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

224 
	#HCLK_DIV_PERIPH_CLK
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 2, 6)

	)

225 
	#HCLK_DIV_PERIPH_CLK_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 2, 6)

	)

226 
	#HCLK_DIV_DDRAM_CLK
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 7, 8)

	)

227 
	#HCLK_DIV_DDRAM_CLK_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 7, 8)

	)

237 
	#TIMCLK_CTRL_WDT
 
	`BSP_BIT32
(0)

	)

238 
	#TIMCLK_CTRL_HST
 
	`BSP_BIT32
(1)

	)

242 
	#LPC32XX_FILL
(
a
, 
b
, 
s
Ë
uöt8_t
 
ª£rved_
 ## b [b -á - (s)]

	)

243 
	#LPC32XX_RESERVE
(
a
, 
b
Ë
uöt8_t
 
ª£rved_
 ## b [b -á]

	)

246 } 
	gÕc32xx_«nd_¶c
;

249 } 
	gÕc32xx_s•
;

252 } 
	gÕc32xx_•i
;

255 } 
	gÕc32xx_sd_ˇrd
;

258 } 
	gÕc32xx_usb
;

261 } 
	gÕc32xx_lcd
;

264 } 
	gÕc32xx_ëb
;

267 } 
	gÕc32xx_sysc⁄
;

270 } 
	gÕc32xx_u¨t_˘æ
;

273 } 
	gÕc32xx_u¨t
;

276 } 
	gÕc32xx_ms_timî
;

279 } 
	gÕc32xx_hs_timî
;

287 
	#WDTTIM_INT_MATCH_INT
 
	`BSP_BIT32
(0)

	)

297 
	#WDTTIM_CTRL_COUNT_ENAB
 
	`BSP_BIT32
(0)

	)

298 
	#WDTTIM_CTRL_RESET_COUNT
 
	`BSP_BIT32
(1)

	)

299 
	#WDTTIM_CTRL_PAUSE_EN
 
	`BSP_BIT32
(2)

	)

309 
	#WDTTIM_MCTRL_MR0_INT
 
	`BSP_BIT32
(0)

	)

310 
	#WDTTIM_MCTRL_RESET_COUNT0
 
	`BSP_BIT32
(1)

	)

311 
	#WDTTIM_MCTRL_STOP_COUNT0
 
	`BSP_BIT32
(2)

	)

312 
	#WDTTIM_MCTRL_M_RES1
 
	`BSP_BIT32
(3)

	)

313 
	#WDTTIM_MCTRL_M_RES2
 
	`BSP_BIT32
(4)

	)

314 
	#WDTTIM_MCTRL_RESFRC1
 
	`BSP_BIT32
(5)

	)

315 
	#WDTTIM_MCTRL_RESFRC2
 
	`BSP_BIT32
(6)

	)

325 
	#WDTTIM_EMR_EXT_MATCH0
 
	`BSP_BIT32
(0)

	)

326 
	#WDTTIM_EMR_MATCH_CTRL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 5)

	)

327 
	#WDTTIM_EMR_MATCH_CTRL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 5)

	)

337 
	#WDTTIM_RES_WDT
 
	`BSP_BIT32
(0)

	)

342 
uöt32_t
 
	möå
;

343 
uöt32_t
 
	m˘æ
;

344 
uöt32_t
 
	mcou¡î
;

345 
uöt32_t
 
	mm˘æ
;

346 
uöt32_t
 
	mm©ch0
;

347 
uöt32_t
 
	memr
;

348 
uöt32_t
 
	mpul£
;

349 
uöt32_t
 
	mªs
;

350 } 
	tÕc32xx_wdt
;

353 } 
	gÕc32xx_debug
;

356 } 
	gÕc32xx_adc
;

359 } 
	gÕc32xx_keysˇn
;

362 } 
	gÕc32xx_pwm
;

365 } 
	gÕc32xx_m˝wm
;

368 
uöt32_t
 
	mmac1
;

369 
uöt32_t
 
	mmac2
;

370 
uöt32_t
 
	mùgt
;

371 
uöt32_t
 
	mùgr
;

372 
uöt32_t
 
	m˛π
;

373 
uöt32_t
 
	mmaxf
;

374 
uöt32_t
 
	msuµ
;

375 
uöt32_t
 
	mã°
;

376 
uöt32_t
 
	mmcfg
;

377 
uöt32_t
 
	mmcmd
;

378 
uöt32_t
 
	mmadr
;

379 
uöt32_t
 
	mmwtd
;

380 
uöt32_t
 
	mmrdd
;

381 
uöt32_t
 
	mmöd
;

382 
uöt32_t
 
	mª£rved_0
 [2];

383 
uöt32_t
 
	mß0
;

384 
uöt32_t
 
	mß1
;

385 
uöt32_t
 
	mß2
;

386 
uöt32_t
 
	mª£rved_1
 [45];

387 
uöt32_t
 
	mcomm™d
;

388 
uöt32_t
 
	m°©us
;

389 
uöt32_t
 
	mrxdes¸ùt‹
;

390 
uöt32_t
 
	mrx°©us
;

391 
uöt32_t
 
	mrxdes¸ùt‹num
;

392 
uöt32_t
 
	mrx¥odu˚ödex
;

393 
uöt32_t
 
	mrxc⁄sumeödex
;

394 
uöt32_t
 
	mtxdes¸ùt‹
;

395 
uöt32_t
 
	mtx°©us
;

396 
uöt32_t
 
	mtxdes¸ùt‹num
;

397 
uöt32_t
 
	mtx¥odu˚ödex
;

398 
uöt32_t
 
	mtxc⁄sumeödex
;

399 
uöt32_t
 
	mª£rved_2
 [10];

400 
uöt32_t
 
	mtsv0
;

401 
uöt32_t
 
	mtsv1
;

402 
uöt32_t
 
	mrsv
;

403 
uöt32_t
 
	mª£rved_3
 [3];

404 
uöt32_t
 
	mÊowc⁄åﬁ˙t
;

405 
uöt32_t
 
	mÊowc⁄åﬁ°s
;

406 
uöt32_t
 
	mª£rved_4
 [34];

407 
uöt32_t
 
	mrxfûãr˘æ
;

408 
uöt32_t
 
	mrxfûãrwﬁ°s
;

409 
uöt32_t
 
	mrxfûãrwﬁ˛r
;

410 
uöt32_t
 
	mª£rved_5
 [1];

411 
uöt32_t
 
	mhashfûãæ
;

412 
uöt32_t
 
	mhashfûãrh
;

413 
uöt32_t
 
	mª£rved_6
 [882];

414 
uöt32_t
 
	möt°©us
;

415 
uöt32_t
 
	möã«bÀ
;

416 
uöt32_t
 
	möt˛ór
;

417 
uöt32_t
 
	möt£t
;

418 
uöt32_t
 
	mª£rved_7
 [1];

419 
uöt32_t
 
	mpowîdown
;

420 } 
	tÕc32xx_ëh
;

423 
uöt32_t
 
	mî
;

424 
uöt32_t
 
	mr§
;

425 
uöt32_t
 
	m§
;

426 
uöt32_t
 
	m≠r
;

427 
uöt32_t
 
	m©r
;

428 
uöt32_t
 
	môr
;

429 } 
	tÕc32xx_úq
;

432 
uöt32_t
 
	mp3_öp_°©e
;

433 
uöt32_t
 
	mp3_ouç_£t
;

434 
uöt32_t
 
	mp3_ouç_˛r
;

435 
uöt32_t
 
	mp3_ouç_°©e
;

436 
uöt32_t
 
	mp2_dú_£t
;

437 
uöt32_t
 
	mp2_dú_˛r
;

438 
uöt32_t
 
	mp2_dú_°©e
;

439 
uöt32_t
 
	mp2_öp_°©e
;

440 
uöt32_t
 
	mp2_ouç_£t
;

441 
uöt32_t
 
	mp2_ouç_˛r
;

442 
uöt32_t
 
	mp2_mux_£t
;

443 
uöt32_t
 
	mp2_mux_˛r
;

444 
uöt32_t
 
	mp2_mux_°©e
;

445 
LPC32XX_RESERVE
(0x034, 0x040);

446 
uöt32_t
 
	mp0_öp_°©e
;

447 
uöt32_t
 
	mp0_ouç_£t
;

448 
uöt32_t
 
	mp0_ouç_˛r
;

449 
uöt32_t
 
	mp0_ouç_°©e
;

450 
uöt32_t
 
	mp0_dú_£t
;

451 
uöt32_t
 
	mp0_dú_˛r
;

452 
uöt32_t
 
	mp0_dú_°©e
;

453 
LPC32XX_RESERVE
(0x05c, 0x060);

454 
uöt32_t
 
	mp1_öp_°©e
;

455 
uöt32_t
 
	mp1_ouç_£t
;

456 
uöt32_t
 
	mp1_ouç_˛r
;

457 
uöt32_t
 
	mp1_ouç_°©e
;

458 
uöt32_t
 
	mp1_dú_£t
;

459 
uöt32_t
 
	mp1_dú_˛r
;

460 
uöt32_t
 
	mp1_dú_°©e
;

461 
LPC32XX_RESERVE
(0x07c, 0x110);

462 
uöt32_t
 
	mp3_mux_£t
;

463 
uöt32_t
 
	mp3_mux_˛r
;

464 
uöt32_t
 
	mp3_mux_°©e
;

465 
LPC32XX_RESERVE
(0x11c, 0x120);

466 
uöt32_t
 
	mp0_mux_£t
;

467 
uöt32_t
 
	mp0_mux_˛r
;

468 
uöt32_t
 
	mp0_mux_°©e
;

469 
LPC32XX_RESERVE
(0x12c, 0x130);

470 
uöt32_t
 
	mp1_mux_£t
;

471 
uöt32_t
 
	mp1_mux_˛r
;

472 
uöt32_t
 
	mp1_mux_°©e
;

473 } 
	tÕc32xx_gpio
;

476 
uöt32_t
 
	mrx_‹_tx
;

477 
uöt32_t
 
	m°©
;

478 
uöt32_t
 
	m˘æ
;

479 
uöt32_t
 
	m˛k_hi
;

480 
uöt32_t
 
	m˛k_lo
;

481 
uöt32_t
 
	madr
;

482 
uöt32_t
 
	mrxÊ
;

483 
uöt32_t
 
	mtxÊ
;

484 
uöt32_t
 
	mrxb
;

485 
uöt32_t
 
	mtxb
;

486 
uöt32_t
 
	ms_tx
;

487 
uöt32_t
 
	ms_txÊ
;

488 } 
	tÕc32xx_i2c
;

491 
uöt32_t
 
	mucou¡
;

492 
uöt32_t
 
	mdcou¡
;

493 
uöt32_t
 
	mm©ch0
;

494 
uöt32_t
 
	mm©ch1
;

495 
uöt32_t
 
	m˘æ
;

496 
uöt32_t
 
	möt°©
;

497 
uöt32_t
 
	mkey
;

498 
uöt32_t
 
	m§am
 [32];

499 } 
	tÕc32xx_πc
;

502 
uöt32_t
 
	mc⁄åﬁ
;

503 
uöt32_t
 
	m°©us
;

504 
uöt32_t
 
	mtimeout
;

505 
uöt32_t
 
	mª£rved_0
 [5];

506 } 
	tÕc32xx_emc_ahb
;

510 
uöt32_t
 
	mw32
;

511 
uöt16_t
 
	mw16
;

512 
uöt8_t
 
	mw8
;

513 } 
	mbuff
;

514 
uöt32_t
 
	mª£rved_0
 [8191];

516 
uöt32_t
 
	mw32
;

517 
uöt16_t
 
	mw16
;

518 
uöt8_t
 
	mw8
;

519 } 
	md©a
;

520 
uöt32_t
 
	mª£rved_1
 [8191];

521 
uöt32_t
 
	mcmd
;

522 
uöt32_t
 
	maddr
;

523 
uöt32_t
 
	mecc_íc
;

524 
uöt32_t
 
	mecc_dec
;

525 
uöt32_t
 
	mecc_auto_íc
;

526 
uöt32_t
 
	mecc_auto_dec
;

527 
uöt32_t
 
	mΩr
;

528 
uöt32_t
 
	mw¥
;

529 
uöt32_t
 
	mrubp
;

530 
uöt32_t
 
	mrobp
;

531 
uöt32_t
 
	msw_wp_add_low
;

532 
uöt32_t
 
	msw_wp_add_hig
;

533 
uöt32_t
 
	mi¸
;

534 
uöt32_t
 
	mtime
;

535 
uöt32_t
 
	múq_mr
;

536 
uöt32_t
 
	múq_§
;

537 
uöt32_t
 
	mª£rved_2
;

538 
uöt32_t
 
	mlock_¥
;

539 
uöt32_t
 
	mi§
;

540 
uöt32_t
 
	m˚h
;

541 } 
	tÕc32xx_«nd_mlc
;

544 
Õc32xx_«nd_¶c
 
	m«nd_¶c
;

545 
LPC32XX_FILL
(0x20020000, 0x20084000, 
Õc32xx_«nd_¶c
);

546 
Õc32xx_s•
 
	ms•_0
;

547 
LPC32XX_FILL
(0x20084000, 0x20088000, 
Õc32xx_s•
);

548 
Õc32xx_•i
 
	m•i_1
;

549 
LPC32XX_FILL
(0x20088000, 0x2008c000, 
Õc32xx_•i
);

550 
Õc32xx_s•
 
	ms•_1
;

551 
LPC32XX_FILL
(0x2008c000, 0x20090000, 
Õc32xx_s•
);

552 
Õc32xx_•i
 
	m•i_2
;

553 
LPC32XX_FILL
(0x20090000, 0x20094000, 
Õc32xx_•i
);

554 
Õc_i2s
 
	mi2s_0
;

555 
LPC32XX_FILL
(0x20094000, 0x20098000, 
Õc_i2s
);

556 
Õc32xx_sd_ˇrd
 
	msd_ˇrd
;

557 
LPC32XX_FILL
(0x20098000, 0x2009c000, 
Õc32xx_sd_ˇrd
);

558 
Õc_i2s
 
	mi2s_1
;

559 
LPC32XX_FILL
(0x2009c000, 0x200a8000, 
Õc_i2s
);

560 
Õc32xx_«nd_mlc
 
	m«nd_mlc
;

561 
LPC32XX_FILL
(0x200a8000, 0x31000000, 
Õc32xx_«nd_mlc
);

562 
Õc_dma
 
	mdma
;

563 
LPC32XX_FILL
(0x31000000, 0x31020000, 
Õc_dma
);

564 
Õc32xx_usb
 
	musb
;

565 
LPC32XX_FILL
(0x31020000, 0x31040000, 
Õc32xx_usb
);

566 
Õc32xx_lcd
 
	mlcd
;

567 
LPC32XX_FILL
(0x31040000, 0x31060000, 
Õc32xx_lcd
);

568 
Õc32xx_ëh
 
	mëh
;

569 
LPC32XX_FILL
(0x31060000, 0x31080000, 
Õc32xx_ëh
);

570 
Õc_emc
 
	memc
;

571 
LPC32XX_FILL
(0x31080000, 0x31080400, 
Õc_emc
);

572 
Õc32xx_emc_ahb
 
	memc_ahb
 [5];

573 
LPC32XX_FILL
(0x31080400, 0x310c0000, 
Õc32xx_emc_ahb
 [5]);

574 
Õc32xx_ëb
 
	mëb
;

575 
LPC32XX_FILL
(0x310c0000, 0x40004000, 
Õc32xx_ëb
);

576 
Õc32xx_sysc⁄
 
	msysc⁄
;

577 
LPC32XX_FILL
(0x40004000, 0x40008000, 
Õc32xx_sysc⁄
);

578 
Õc32xx_úq
 
	mmic
;

579 
LPC32XX_FILL
(0x40008000, 0x4000c000, 
Õc32xx_úq
);

580 
Õc32xx_úq
 
	msic_1
;

581 
LPC32XX_FILL
(0x4000c000, 0x40010000, 
Õc32xx_úq
);

582 
Õc32xx_úq
 
	msic_2
;

583 
LPC32XX_FILL
(0x40010000, 0x40014000, 
Õc32xx_úq
);

584 
Õc32xx_u¨t
 
	mu¨t_1
;

585 
LPC32XX_FILL
(0x40014000, 0x40018000, 
Õc32xx_u¨t
);

586 
Õc32xx_u¨t
 
	mu¨t_2
;

587 
LPC32XX_FILL
(0x40018000, 0x4001c000, 
Õc32xx_u¨t
);

588 
Õc32xx_u¨t
 
	mu¨t_7
;

589 
LPC32XX_FILL
(0x4001c000, 0x40024000, 
Õc32xx_u¨t
);

590 
Õc32xx_πc
 
	mπc
;

591 
LPC32XX_FILL
(0x40024000, 0x40028000, 
Õc32xx_πc
);

592 
Õc32xx_gpio
 
	mgpio
;

593 
LPC32XX_FILL
(0x40028000, 0x4002c000, 
Õc32xx_gpio
);

594 
Õc_timî
 
	mtimî_4
;

595 
LPC32XX_FILL
(0x4002c000, 0x40030000, 
Õc_timî
);

596 
Õc_timî
 
	mtimî_5
;

597 
LPC32XX_FILL
(0x40030000, 0x40034000, 
Õc_timî
);

598 
Õc32xx_ms_timî
 
	mms_timî
;

599 
LPC32XX_FILL
(0x40034000, 0x40038000, 
Õc32xx_ms_timî
);

600 
Õc32xx_hs_timî
 
	mhs_timî
;

601 
LPC32XX_FILL
(0x40038000, 0x4003c000, 
Õc32xx_hs_timî
);

602 
Õc32xx_wdt
 
	mwdt
;

603 
LPC32XX_FILL
(0x4003c000, 0x40040000, 
Õc32xx_wdt
);

604 
Õc32xx_debug
 
	mdebug
;

605 
LPC32XX_FILL
(0x40040000, 0x40044000, 
Õc32xx_debug
);

606 
Õc_timî
 
	mtimî_0
;

607 
LPC32XX_FILL
(0x40044000, 0x40048000, 
Õc_timî
);

608 
Õc32xx_adc
 
	madc
;

609 
LPC32XX_FILL
(0x40048000, 0x4004c000, 
Õc32xx_adc
);

610 
Õc_timî
 
	mtimî_1
;

611 
LPC32XX_FILL
(0x4004c000, 0x40050000, 
Õc_timî
);

612 
Õc32xx_keysˇn
 
	mkeysˇn
;

613 
LPC32XX_FILL
(0x40050000, 0x40054000, 
Õc32xx_keysˇn
);

614 
Õc32xx_u¨t_˘æ
 
	mu¨t_˘æ
;

615 
LPC32XX_FILL
(0x40054000, 0x40058000, 
Õc32xx_u¨t_˘æ
);

616 
Õc_timî
 
	mtimî_2
;

617 
LPC32XX_FILL
(0x40058000, 0x4005c000, 
Õc_timî
);

618 
Õc32xx_pwm
 
	mpwm_1_™d_pwm_2
;

619 
LPC32XX_FILL
(0x4005c000, 0x40060000, 
Õc32xx_pwm
);

620 
Õc_timî
 
	mtimî3
;

621 
LPC32XX_FILL
(0x40060000, 0x40080000, 
Õc_timî
);

622 
Õc32xx_u¨t
 
	mu¨t_3
;

623 
LPC32XX_FILL
(0x40080000, 0x40088000, 
Õc32xx_u¨t
);

624 
Õc32xx_u¨t
 
	mu¨t_4
;

625 
LPC32XX_FILL
(0x40088000, 0x40090000, 
Õc32xx_u¨t
);

626 
Õc32xx_u¨t
 
	mu¨t_5
;

627 
LPC32XX_FILL
(0x40090000, 0x40098000, 
Õc32xx_u¨t
);

628 
Õc32xx_u¨t
 
	mu¨t_6
;

629 
LPC32XX_FILL
(0x40098000, 0x400a0000, 
Õc32xx_u¨t
);

630 
Õc32xx_i2c
 
	mi2c_1
;

631 
LPC32XX_FILL
(0x400a0000, 0x400a8000, 
Õc32xx_i2c
);

632 
Õc32xx_i2c
 
	mi2c_2
;

633 
LPC32XX_FILL
(0x400a8000, 0x400e8000, 
Õc32xx_i2c
);

634 
Õc32xx_m˝wm
 
	mm˝wm
;

635 } 
	tÕc32xx_ªgi°îs
;

637 vﬁ©ûê
Õc32xx_ªgi°îs
 
Õc32xx
;

	@src/lib/libbsp/arm/lpc32xx/include/mmu.h

23 #i‚de‡
LIBBSP_ARM_LPC32XX_MMU_H


24 
	#LIBBSP_ARM_LPC32XX_MMU_H


	)

26 
	~<lib˝u/¨m-˝15.h
>

28 #ifde‡
__˝lu•lus


42 
	#LPC32XX_MMU_CLIENT_DOMAIN
 15U

	)

44 
	#LPC32XX_MMU_READ_ONLY
 \

45 ((
LPC32XX_MMU_CLIENT_DOMAIN
 << 
ARM_MMU_SECT_DOMAIN_SHIFT
) \

46 | 
ARM_MMU_SECT_DEFAULT
)

	)

48 
	#LPC32XX_MMU_READ_ONLY_CACHED
 \

49 (
LPC32XX_MMU_READ_ONLY
 | 
ARM_MMU_SECT_C
 | 
ARM_MMU_SECT_B
)

	)

51 
	#LPC32XX_MMU_READ_WRITE
 \

52 ((
LPC32XX_MMU_CLIENT_DOMAIN
 << 
ARM_MMU_SECT_DOMAIN_SHIFT
) \

53 | 
ARM_MMU_SECT_AP_0
 \

54 | 
ARM_MMU_SECT_DEFAULT
)

	)

56 
	#LPC32XX_MMU_READ_WRITE_CACHED
 \

57 (
LPC32XX_MMU_READ_WRITE
 | 
ARM_MMU_SECT_C
 | 
ARM_MMU_SECT_B
)

	)

64 
ölöe
 
uöt32_t
 
Õc32xx_£t_å™¶©i⁄_èbÀ_íåõs
(

65 c⁄° *
begö
,

66 c⁄° *
íd
,

67 
uöt32_t
 
£˘i⁄_Êags


70  
¨m_˝15_£t_å™¶©i⁄_èbÀ_íåõs
(
begö
, 
íd
, 
£˘i⁄_Êags
);

75 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/nand-mlc.h

25 #i‚de‡
LIBBSP_ARM_LPC32XX_NAND_MLC_H


26 
	#LIBBSP_ARM_LPC32XX_NAND_MLC_H


	)

28 
	~<πems.h
>

30 
	~<b•/utûôy.h
>

32 #ifde‡
__˝lu•lus


74 
	#MLC_SMALL_PAGE_SIZE
 528

	)

75 
	#MLC_SMALL_DATA_SIZE
 512

	)

76 
	#MLC_SMALL_SPARE_SIZE
 16

	)

77 
	#MLC_SMALL_USER_SPARE_SIZE
 6

	)

78 
	#MLC_SMALL_ECC_SPARE_SIZE
 10

	)

79 
	#MLC_SMALL_DATA_WORD_COUNT
 (
MLC_SMALL_DATA_SIZE
 / 4)

	)

80 
	#MLC_SMALL_SPARE_WORD_COUNT
 (
MLC_SMALL_SPARE_SIZE
 / 4)

	)

81 
	#MLC_SMALL_PAGES_PER_LARGE_PAGE
 4

	)

82 
	#MLC_LARGE_PAGE_SIZE
 \

83 (
MLC_SMALL_PAGES_PER_LARGE_PAGE
 * 
MLC_SMALL_PAGE_SIZE
)

	)

84 
	#MLC_LARGE_DATA_SIZE
 \

85 (
MLC_SMALL_PAGES_PER_LARGE_PAGE
 * 
MLC_SMALL_DATA_SIZE
)

	)

86 
	#MLC_LARGE_SPARE_SIZE
 \

87 (
MLC_SMALL_PAGES_PER_LARGE_PAGE
 * 
MLC_SMALL_SPARE_SIZE
)

	)

88 
	#MLC_LARGE_DATA_WORD_COUNT
 (
MLC_LARGE_DATA_SIZE
 / 4)

	)

89 
	#MLC_LARGE_SPARE_WORD_COUNT
 (
MLC_LARGE_SPARE_SIZE
 / 4)

	)

99 
	#FLASHCLK_IRQ_MLC
 
	`BSP_BIT32
(5)

	)

100 
	#FLASHCLK_MLC_DMA_RNB
 
	`BSP_BIT32
(4)

	)

101 
	#FLASHCLK_MLC_DMA_INT
 
	`BSP_BIT32
(3)

	)

102 
	#FLASHCLK_SELECT_SLC
 
	`BSP_BIT32
(2)

	)

103 
	#FLASHCLK_MLC_CLK_ENABLE
 
	`BSP_BIT32
(1)

	)

104 
	#FLASHCLK_SLC_CLK_ENABLE
 
	`BSP_BIT32
(0)

	)

114 
	#MLC_TIME_WR_LOW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

115 
	#MLC_TIME_WR_HIGH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

116 
	#MLC_TIME_RD_LOW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

117 
	#MLC_TIME_RD_HIGH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

118 
	#MLC_TIME_NAND_TA
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 18)

	)

119 
	#MLC_TIME_BUSY_DELAY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 19, 23)

	)

120 
	#MLC_TIME_TCEA_DELAY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 25)

	)

130 
	#MLC_UNLOCK_PROT
 0xa25e

	)

140 
	#MLC_ISR_DECODER_FAILURE
 
	`BSP_BIT32
(6)

	)

141 
	#MLC_ISR_SYMBOL_ERRORS
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 5)

	)

142 
	#MLC_ISR_ERRORS_DETECTED
 
	`BSP_BIT32
(3)

	)

143 
	#MLC_ISR_ECC_READY
 
	`BSP_BIT32
(2)

	)

144 
	#MLC_ISR_CONTROLLER_READY
 
	`BSP_BIT32
(1)

	)

145 
	#MLC_ISR_NAND_READY
 
	`BSP_BIT32
(0)

	)

155 
	#MLC_ICR_SOFT_WRITE_PROT
 
	`BSP_BIT32
(3)

	)

156 
	#MLC_ICR_LARGE_PAGES
 
	`BSP_BIT32
(2)

	)

157 
	#MLC_ICR_ADDR_WORD_COUNT_4_5
 
	`BSP_BIT32
(1)

	)

158 
	#MLC_ICR_IO_BUS_16
 
	`BSP_BIT32
(0)

	)

168 
	#MLC_ECC_AUTO_ENC_PROGRAM
 
	`BSP_BIT32
(8)

	)

178 
	#NAND_STATUS_ERROR
 (1U << 0)

	)

179 
	#NAND_STATUS_READY
 (1U << 6)

	)

180 
	#NAND_STATUS_NOT_PROTECTED
 (1U << 7)

	)

188 
uöt32_t
 
Êags
;

190 
uöt32_t
 
block_cou¡
;

195 
uöt32_t
 
time
;

196 } 
	tÕc32xx_mlc_c⁄fig
;

202 
	#MLC_SMALL_PAGES
 0x1U

	)

208 
	#MLC_MANY_ADDRESS_CYCLES
 0x2U

	)

215 
	#MLC_NORMAL_BLOCKS
 0x4U

	)

220 
	#MLC_IO_WIDTH_16_BIT
 0x8U

	)

225 
Õc32xx_mlc_öô
(c⁄° 
Õc32xx_mlc_c⁄fig
 *
cfg
);

227 
uöt32_t
 
Õc32xx_mlc_∑ge_size
();

229 
uöt32_t
 
Õc32xx_mlc_∑ges_≥r_block
();

231 
uöt32_t
 
Õc32xx_mlc_block_cou¡
();

233 
uöt32_t
 
Õc32xx_mlc_io_width
();

235 
Õc32xx_mlc_wrôe_¥Ÿe˘i⁄
(

236 
uöt32_t
 
∑ge_ödex_low
,

237 
uöt32_t
 
∑ge_ödex_high


240 
Õc32xx_mlc_ªad_id
(
uöt8_t
 *
id
, 
size_t
 
n
);

255 
πems_°©us_code
 
Õc32xx_mlc_ªad_∑ge
(

256 
uöt32_t
 
∑ge_ödex
,

257 *
d©a
,

258 *
•¨e
,

259 
uöt32_t
 *
symbﬁ_îr‹_cou¡


278 
πems_°©us_code
 
Õc32xx_mlc_is_vÆid_block
(
uöt32_t
 
block_ödex
);

287 
πems_°©us_code
 
Õc32xx_mlc_îa£_block
(
uöt32_t
 
block_ödex
);

302 
πems_°©us_code
 
Õc32xx_mlc_îa£_block_ß„
(
uöt32_t
 
block_ödex
);

312 
πems_°©us_code
 
Õc32xx_mlc_îa£_block_ß„_3
(

313 
uöt32_t
 
block_ödex
,

314 
uöt32_t
 
∑ge_begö
,

315 
uöt32_t
 
∑ge_íd


324 
Õc32xx_mlc_zîo_∑ges
(
uöt32_t
 
∑ge_begö
, uöt32_à
∑ge_íd
);

336 
πems_°©us_code
 
Õc32xx_mlc_wrôe_∑ge_wôh_ecc
(

337 
uöt32_t
 
∑ge_ödex
,

338 c⁄° *
d©a
,

339 c⁄° *
•¨e


352 
πems_°©us_code
 
Õc32xx_mlc_wrôe_blocks
(

353 
uöt32_t
 
block_begö
,

354 
uöt32_t
 
block_íd
,

355 c⁄° *
§c
,

356 
size_t
 
§c_size
,

357 
uöt32_t
 
∑ge_buf„r
 [
MLC_LARGE_DATA_WORD_COUNT
]

368 
boﬁ
 (*
	tÕc32xx_mlc_ªad_¥o˚ss
)(

369 *
	t¥o˚ss_¨g
,

370 
	tuöt32_t
 
	t∑ge_ödex
,

371 
	tuöt32_t
 
	t∑ge_size
,

372 
	tuöt32_t
 
	t∑ge_d©a
 [
MLC_LARGE_DATA_WORD_COUNT
],

373 
	tuöt32_t
 
	t∑ge_•¨e
 [
MLC_LARGE_SPARE_WORD_COUNT
]

386 
πems_°©us_code
 
Õc32xx_mlc_ªad_blocks
(

387 
uöt32_t
 
block_begö
,

388 
uöt32_t
 
block_íd
,

389 
Õc32xx_mlc_ªad_¥o˚ss
 
¥o˚ss
,

390 *
¥o˚ss_¨g
,

391 
uöt32_t
 
∑ge_buf„r_0
 [
MLC_LARGE_DATA_WORD_COUNT
],

392 
uöt32_t
 
∑ge_buf„r_1
 [
MLC_LARGE_DATA_WORD_COUNT
]

407 
ölöe
 
boﬁ
 
Õc32xx_mlc_is_bad_∑ge
(c⁄° 
uöt32_t
 *
•¨e
)

409 
uöt32_t
 
fú°_byã_mask
 = 0x000000ff;

410 
uöt32_t
 
sixth_byã_mask
 = 0x0000ff00;

412  (
•¨e
 [0] & 
fú°_byã_mask
) != first_byte_mask

413 || (
•¨e
 [1] & 
sixth_byã_mask
) != sixth_byte_mask;

418 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/lpc32xx/include/tm27.h

22 #i‚de‡
_RTEMS_TMTEST27


26 #i‚de‡
__tm27_h


27 
	#__tm27_h


	)

29 
	~<as£π.h
>

31 
	~<πems.h
>

33 
	~<b•/Õc32xx.h
>

34 
	~<b•/úq.h
>

35 
	~<b•/úq-gíîic.h
>

37 
	#MUST_WAIT_FOR_INTERRUPT
 1

	)

39 
In°Æl_tm27_ve˘‹
((*
h™dÀr
)(
πems_ve˘‹_numbî
))

41 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

43 
LPC32XX_SW_INT
 = 0;

45 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

46 
LPC32XX_IRQ_SW
,

48 
RTEMS_INTERRUPT_UNIQUE
,

49 (
πems_öãºu±_h™dÀr
Ë
h™dÀr
,

50 
NULL


52 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

53 
	}
}

55 
	$Cau£_tm27_öå
()

57 
LPC32XX_SW_INT
 = 0x1;

58 
	}
}

60 
	$CÀ¨_tm27_öå
()

62 
LPC32XX_SW_INT
 = 0;

63 
	`Õc32xx_úq_£t_¥i‹ôy
(
LPC32XX_IRQ_SW
, 
LPC32XX_IRQ_PRIORITY_LOWEST
);

64 
	}
}

66 
	$Lowî_tm27_öå
()

68 
	`b•_öãºu±_ve˘‹_íabÀ
(
LPC32XX_IRQ_SW
);

69 
	`Õc32xx_úq_£t_¥i‹ôy
(
LPC32XX_IRQ_SW
, 
LPC32XX_IRQ_PRIORITY_HIGHEST
);

70 
	}
}

	@src/lib/libbsp/arm/lpc32xx/irq/irq.c

22 
	~<πems/sc‹e/¨mv4.h
>

24 
	~<b•.h
>

25 
	~<b•/úq.h
>

26 
	~<b•/úq-gíîic.h
>

27 
	~<b•/Õc32xx.h
>

28 
	~<b•/lökî-symbﬁs.h
>

29 
	~<b•/mmu.h
>

36 
	#LPC32XX_MIC_STATUS_MASK
 (~0x3U)

	)

40 
uöt32_t
 
	mmic
;

41 
uöt32_t
 
	msic_1
;

42 
uöt32_t
 
	msic_2
;

43 } 
	mfõld
;

44 
uöt32_t
 
	mfõlds_èbÀ
 [
LPC32XX_IRQ_MODULE_COUNT
];

45 } 
	tÕc32xx_úq_fõlds
;

47 
uöt8_t
 
	gÕc32xx_úq_¥i‹ôy_èbÀ
 [
LPC32XX_IRQ_COUNT
];

49 
Õc32xx_úq_fõlds
 
	gÕc32xx_úq_¥i‹ôy_masks
 [
LPC32XX_IRQ_PRIORITY_COUNT
];

51 
Õc32xx_úq_fõlds
 
	gÕc32xx_úq_íabÀ
;

53 
ölöe
 
boﬁ
 
	$Õc32xx_úq_is_vÆid
(
πems_ve˘‹_numbî
 
ve˘‹
)

55  
ve˘‹
 <
BSP_INTERRUPT_VECTOR_MAX
;

56 
	}
}

58 
ölöe
 
boﬁ
 
	$Õc32xx_úq_¥i‹ôy_is_vÆid
(
¥i‹ôy
)

60  
¥i‹ôy
 <
LPC32XX_IRQ_PRIORITY_LOWEST
;

61 
	}
}

63 
	#LPC32XX_IRQ_BIT_OPS_DEFINE
 \

64 
bô
 = 
ödex
 & 0x1fU; \

65 
moduÀ
 = 
ödex
 >> 5

	)

67 
	#LPC32XX_IRQ_BIT_OPS_FOR_REG_DEFINE
 \

68 
LPC32XX_IRQ_BIT_OPS_DEFINE
; \

69 
moduÀ_off£t
 = 
moduÀ
 << 14; \

70 vﬁ©ûê
uöt32_t
 *
ªg
 = (volatile uint32_t *) \

71 ((vﬁ©ûê*Ë&
Õc32xx
.
mic
 + 
moduÀ_off£t
 + 
ªgi°î_off£t
)

	)

73 
	#LPC32XX_IRQ_OFFSET_ER
 0U

	)

74 
	#LPC32XX_IRQ_OFFSET_RSR
 4U

	)

75 
	#LPC32XX_IRQ_OFFSET_SR
 8U

	)

76 
	#LPC32XX_IRQ_OFFSET_APR
 12U

	)

77 
	#LPC32XX_IRQ_OFFSET_ATR
 16U

	)

78 
	#LPC32XX_IRQ_OFFSET_ITR
 20U

	)

80 
ölöe
 
boﬁ
 
	$Õc32xx_úq_is_bô_£t_ö_ªgi°î
(
ödex
, 
ªgi°î_off£t
)

82 
LPC32XX_IRQ_BIT_OPS_FOR_REG_DEFINE
;

84  *
ªg
 & (1U << 
bô
);

85 
	}
}

87 
ölöe
 
	$Õc32xx_úq_£t_bô_ö_ªgi°î
(
ödex
, 
ªgi°î_off£t
)

89 
LPC32XX_IRQ_BIT_OPS_FOR_REG_DEFINE
;

91 *
ªg
 |1U << 
bô
;

92 
	}
}

94 
ölöe
 
	$Õc32xx_úq_˛ór_bô_ö_ªgi°î
(
ödex
, 
ªgi°î_off£t
)

96 
LPC32XX_IRQ_BIT_OPS_FOR_REG_DEFINE
;

98 *
ªg
 &~(1U << 
bô
);

99 
	}
}

101 
ölöe
 
	$Õc32xx_úq_£t_bô_ö_fõld
(
ödex
, 
Õc32xx_úq_fõlds
 *
fõlds
)

103 
LPC32XX_IRQ_BIT_OPS_DEFINE
;

105 
fõlds
->
fõlds_èbÀ
 [
moduÀ
] |1U << 
bô
;

106 
	}
}

108 
ölöe
 
	$Õc32xx_úq_˛ór_bô_ö_fõld
(
ödex
, 
Õc32xx_úq_fõlds
 *
fõlds
)

110 
LPC32XX_IRQ_BIT_OPS_DEFINE
;

112 
fõlds
->
fõlds_èbÀ
 [
moduÀ
] &~(1U << 
bô
);

113 
	}
}

115 
ölöe
 
	$Õc32xx_úq_gë_ödex
(
uöt32_t
 
vÆ
)

117 
ARM_SWITCH_REGISTERS
;

119 
__asm__
 volatile (

120 
ARM_SWITCH_TO_ARM


123 
ARM_SWITCH_BACK


124 : [
vÆ
] "Ù" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


125 : "[vÆ]" (
vÆ
)

128  
vÆ
;

129 
	}
}

131 
	$Õc32xx_úq_£t_¥i‹ôy
(
πems_ve˘‹_numbî
 
ve˘‹
, 
¥i‹ôy
)

133 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

134 
πems_öãºu±_Àvñ
 
Àvñ
;

135 
i
 = 0;

137 i‡(
¥i‹ôy
 > 
LPC32XX_IRQ_PRIORITY_LOWEST
) {

138 
¥i‹ôy
 = 
LPC32XX_IRQ_PRIORITY_LOWEST
;

141 
Õc32xx_úq_¥i‹ôy_èbÀ
 [
ve˘‹
] = (
uöt8_t
Ë
¥i‹ôy
;

143 
i
 = 
LPC32XX_IRQ_PRIORITY_HIGHEST
; i <
¥i‹ôy
; ++i) {

144 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

145 
	`Õc32xx_úq_˛ór_bô_ö_fõld
(
ve˘‹
, &
Õc32xx_úq_¥i‹ôy_masks
 [
i
]);

146 
	`πems_öãºu±_íabÀ
(
Àvñ
);

149 
i
 = 
¥i‹ôy
 + 1; i <
LPC32XX_IRQ_PRIORITY_LOWEST
; ++i) {

150 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

151 
	`Õc32xx_úq_£t_bô_ö_fõld
(
ve˘‹
, &
Õc32xx_úq_¥i‹ôy_masks
 [
i
]);

152 
	`πems_öãºu±_íabÀ
(
Àvñ
);

155 
	}
}

157 
	$Õc32xx_úq_gë_¥i‹ôy
(
πems_ve˘‹_numbî
 
ve˘‹
)

159 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

160  
Õc32xx_úq_¥i‹ôy_èbÀ
 [
ve˘‹
];

162  
LPC32XX_IRQ_PRIORITY_LOWEST
;

164 
	}
}

166 
	$Õc32xx_úq_£t_a˘iv©i⁄_pﬁ¨ôy
(
πems_ve˘‹_numbî
 
ve˘‹
, 
Õc32xx_úq_a˘iv©i⁄_pﬁ¨ôy
 
a˘iv©i⁄_pﬁ¨ôy
)

168 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

169 
πems_öãºu±_Àvñ
 
Àvñ
;

171 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

172 i‡(
a˘iv©i⁄_pﬁ¨ôy
 =
LPC32XX_IRQ_ACTIVE_HIGH_OR_RISING_EDGE
) {

173 
	`Õc32xx_úq_£t_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_APR
);

175 
	`Õc32xx_úq_˛ór_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_APR
);

177 
	`πems_öãºu±_íabÀ
(
Àvñ
);

179 
	}
}

181 
Õc32xx_úq_a˘iv©i⁄_pﬁ¨ôy
 
	$Õc32xx_úq_gë_a˘iv©i⁄_pﬁ¨ôy
(
πems_ve˘‹_numbî
 
ve˘‹
)

183 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

184 i‡(
	`Õc32xx_úq_is_bô_£t_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_APR
)) {

185  
LPC32XX_IRQ_ACTIVE_HIGH_OR_RISING_EDGE
;

187  
LPC32XX_IRQ_ACTIVE_LOW_OR_FALLING_EDGE
;

190  
LPC32XX_IRQ_ACTIVE_LOW_OR_FALLING_EDGE
;

192 
	}
}

194 
	$Õc32xx_úq_£t_a˘iv©i⁄_ty≥
(
πems_ve˘‹_numbî
 
ve˘‹
, 
Õc32xx_úq_a˘iv©i⁄_ty≥
 
a˘iv©i⁄_ty≥
)

196 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

197 
πems_öãºu±_Àvñ
 
Àvñ
;

199 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

200 i‡(
a˘iv©i⁄_ty≥
 =
LPC32XX_IRQ_EDGE_SENSITIVE
) {

201 
	`Õc32xx_úq_£t_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_ATR
);

203 
	`Õc32xx_úq_˛ór_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_ATR
);

205 
	`πems_öãºu±_íabÀ
(
Àvñ
);

207 
	}
}

209 
Õc32xx_úq_a˘iv©i⁄_ty≥
 
	$Õc32xx_úq_gë_a˘iv©i⁄_ty≥
(
πems_ve˘‹_numbî
 
ve˘‹
)

211 i‡(
	`Õc32xx_úq_is_vÆid
(
ve˘‹
)) {

212 i‡(
	`Õc32xx_úq_is_bô_£t_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_ATR
)) {

213  
LPC32XX_IRQ_EDGE_SENSITIVE
;

215  
LPC32XX_IRQ_LEVEL_SENSITIVE
;

218  
LPC32XX_IRQ_LEVEL_SENSITIVE
;

220 
	}
}

222 
	$b•_öãºu±_di•©ch
()

224 
uöt32_t
 
°©us
 = 
Õc32xx
.
mic
.
§
 & 
LPC32XX_MIC_STATUS_MASK
;

225 
uöt32_t
 
î_mic
 = 
Õc32xx
.
mic
.
î
;

226 
uöt32_t
 
î_sic_1
 = 
Õc32xx
.
sic_1
.
î
;

227 
uöt32_t
 
î_sic_2
 = 
Õc32xx
.
sic_2
.
î
;

228 
uöt32_t
 
p§
 = 0;

229 
Õc32xx_úq_fõlds
 *
masks
 = 
NULL
;

230 
πems_ve˘‹_numbî
 
ve˘‹
 = 0;

231 
¥i‹ôy
 = 0;

233 i‡(
°©us
 != 0) {

234 
ve˘‹
 = 
	`Õc32xx_úq_gë_ödex
(
°©us
);

236 
°©us
 = 
Õc32xx
.
sic_1
.
§
;

237 i‡(
°©us
 != 0) {

238 
ve˘‹
 = 
	`Õc32xx_úq_gë_ödex
(
°©us
Ë+ 
LPC32XX_IRQ_MODULE_SIC_1
;

240 
°©us
 = 
Õc32xx
.
sic_2
.
§
;

241 i‡(
°©us
 != 0) {

242 
ve˘‹
 = 
	`Õc32xx_úq_gë_ödex
(
°©us
Ë+ 
LPC32XX_IRQ_MODULE_SIC_2
;

249 
¥i‹ôy
 = 
Õc32xx_úq_¥i‹ôy_èbÀ
 [
ve˘‹
];

251 
masks
 = &
Õc32xx_úq_¥i‹ôy_masks
 [
¥i‹ôy
];

253 
Õc32xx
.
mic
.
î
 = 
î_mic
 & 
masks
->
fõld
.mic;

254 
Õc32xx
.
sic_1
.
î
 = 
î_sic_1
 & 
masks
->
fõld
.sic_1;

255 
Õc32xx
.
sic_2
.
î
 = 
î_sic_2
 & 
masks
->
fõld
.sic_2;

257 
p§
 = 
	`_ARMV4_Sètus_úq_íabÀ
();

259 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

261 
	`_ARMV4_Sètus_ª°‹e
(
p§
);

263 
Õc32xx
.
mic
.
î
 = 
î_mic
 & 
Õc32xx_úq_íabÀ
.
fõld
.mic;

264 
Õc32xx
.
sic_1
.
î
 = 
î_sic_1
 & 
Õc32xx_úq_íabÀ
.
fõld
.sic_1;

265 
Õc32xx
.
sic_2
.
î
 = 
î_sic_2
 & 
Õc32xx_úq_íabÀ
.
fõld
.sic_2;

266 
	}
}

268 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

270 
πems_öãºu±_Àvñ
 
Àvñ
;

272 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

273 
	`Õc32xx_úq_£t_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_ER
);

274 
	`Õc32xx_úq_£t_bô_ö_fõld
(
ve˘‹
, &
Õc32xx_úq_íabÀ
);

275 
	`πems_öãºu±_íabÀ
(
Àvñ
);

277  
RTEMS_SUCCESSFUL
;

278 
	}
}

280 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

282 
πems_öãºu±_Àvñ
 
Àvñ
;

284 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

285 
	`Õc32xx_úq_˛ór_bô_ö_fõld
(
ve˘‹
, &
Õc32xx_úq_íabÀ
);

286 
	`Õc32xx_úq_˛ór_bô_ö_ªgi°î
(
ve˘‹
, 
LPC32XX_IRQ_OFFSET_ER
);

287 
	`πems_öãºu±_íabÀ
(
Àvñ
);

289  
RTEMS_SUCCESSFUL
;

290 
	}
}

292 
Õc32xx_£t_ex˚±i⁄_h™dÀr
(

293 
Arm_symbﬁic_ex˚±i⁄_«me
 
ex˚±i⁄
,

294 (*
h™dÀr
)()

297 i‡((Ë
ex˚±i⁄
 < 
MAX_EXCEPTIONS
) {

298 
uöt32_t
 *
èbÀ
 = (uöt32_à*Ë
b•_ve˘‹_èbÀ_begö
 + 
MAX_EXCEPTIONS
;

300 
èbÀ
 [
ex˚±i⁄
] = (
uöt32_t
Ë
h™dÀr
;

302 #i‚de‡
LPC32XX_DISABLE_MMU


303 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(
èbÀ
, 64);

304 
	`πems_ˇche_övÆid©e_mu…ùÀ_ö°ru˘i⁄_löes
(
NULL
, 64);

307 
	}
}

309 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

311 
size_t
 
i
 = 0;

314 
i
 = 0; i < 
LPC32XX_IRQ_COUNT
; ++i) {

315 
Õc32xx_úq_¥i‹ôy_èbÀ
 [
i
] = 
LPC32XX_IRQ_PRIORITY_LOWEST
;

319 
i
 = 0; i < 
LPC32XX_IRQ_PRIORITY_COUNT
; ++i) {

320 
Õc32xx_úq_¥i‹ôy_masks
 [
i
].
fõld
.
mic
 = 0xc0000003;

324 
Õc32xx_úq_íabÀ
.
fõld
.
sic_2
 = 0x0;

325 
Õc32xx_úq_íabÀ
.
fõld
.
sic_1
 = 0x0;

326 
Õc32xx_úq_íabÀ
.
fõld
.
mic
 = 0xc0000003;

327 
Õc32xx
.
sic_1
.
î
 = 0x0;

328 
Õc32xx
.
sic_2
.
î
 = 0x0;

329 
Õc32xx
.
mic
.
î
 = 0xc0000003;

332 
Õc32xx
.
mic
.
ôr
 = 0x0;

333 
Õc32xx
.
sic_1
.
ôr
 = 0x0;

334 
Õc32xx
.
sic_2
.
ôr
 = 0x0;

337 
Õc32xx
.
mic
.
≠r
 = 0x3ff0efe0;

338 
Õc32xx
.
sic_1
.
≠r
 = 0xfbd27184;

339 
Õc32xx
.
sic_2
.
≠r
 = 0x801810c0;

342 
Õc32xx
.
mic
.
©r
 = 0x0;

343 
Õc32xx
.
sic_1
.
©r
 = 0x26000;

344 
Õc32xx
.
sic_2
.
©r
 = 0x0;

346 
	`Õc32xx_£t_ex˚±i⁄_h™dÀr
(
ARM_EXCEPTION_IRQ
, 
_ARMV4_Ex˚±i⁄_öãºu±
);

348  
RTEMS_SUCCESSFUL
;

349 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/boot.c

22 
	~<°rög.h
>

24 
	~<b•/boŸ.h
>

26 
	$Õc32xx_£tup_boŸ_block
(

27 
Õc32xx_boŸ_block
 *
boŸ_block
,

28 
uöt8_t
 
i¸
,

29 
uöt8_t
 
∑ge_cou¡


32 
	`mem£t
(
boŸ_block
, 0, (*boot_block));

34 ++
∑ge_cou¡
;

36 
boŸ_block
->
fõld
.
d0
 = 
i¸
;

37 
boŸ_block
->
fõld
.
d2
 = 
i¸
;

38 
boŸ_block
->
fõld
.
d4
 = 
∑ge_cou¡
;

39 
boŸ_block
->
fõld
.
d6
 = 
∑ge_cou¡
;

40 
boŸ_block
->
fõld
.
d8
 = 
∑ge_cou¡
;

41 
boŸ_block
->
fõld
.
d10
 = 
∑ge_cou¡
;

43 
i¸
 = (
uöt8_t
) ~(() icr);

44 
∑ge_cou¡
 = (
uöt8_t
) ~(()Öage_count);

46 
boŸ_block
->
fõld
.
d1
 = 
i¸
;

47 
boŸ_block
->
fõld
.
d3
 = 
i¸
;

48 
boŸ_block
->
fõld
.
d5
 = 
∑ge_cou¡
;

49 
boŸ_block
->
fõld
.
d7
 = 
∑ge_cou¡
;

50 
boŸ_block
->
fõld
.
d9
 = 
∑ge_cou¡
;

51 
boŸ_block
->
fõld
.
d11
 = 
∑ge_cou¡
;

53 
boŸ_block
->
fõld
.
d12
 = 0xaa;

54 
	}
}

56 
	$Õc32xx_£t_boŸ_block_bad
(

57 
Õc32xx_boŸ_block
 *
boŸ_block


60 
boŸ_block
->
fõld
.
d12
 = 0;

61 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/emc.c

22 
	~<b•/emc.h
>

24 
	~<b•.h
>

25 
	~<b•/mmu.h
>

27 vﬁ©ûê
Õc_emc
 *c⁄° 
	gemc
 = &
Õc32xx
.
emc
;

29 vﬁ©ûê
Õc32xx_emc_ahb
 *c⁄° 
	gemc_ahb
 = &
Õc32xx
.
emc_ahb
 [0];

31 
	$dy«mic_öô
(c⁄° 
Õc32xx_emc_dy«mic_c⁄fig
 *
cfg
)

33 
uöt32_t
 
chù_begö
 = 
LPC32XX_BASE_EMC_DYCS_0
;

34 
uöt32_t
 
dy«micc⁄åﬁ
 = (
cfg
->
c⁄åﬁ
 | 
EMC_DYN_CTRL_CE
 | 
EMC_DYN_CTRL_CS
)

35 & ~
EMC_DYN_CTRL_I_MASK
;

36 
size_t
 
i
 = 0;

38 
LPC32XX_SDRAMCLK_CTRL
 = 
cfg
->
sdøm˛k_˘æ
;

40 
emc
->
dy«mi¸ódc⁄fig
 = 
cfg
->
ªadc⁄fig
;

43 
emc
->
dy«mi˘Ω
 = 
cfg
->
åp
;

44 
emc
->
dy«mi˘øs
 = 
cfg
->
åas
;

45 
emc
->
dy«mi˘§ex
 = 
cfg
->
t§ex
;

46 
emc
->
dy«mi˘wr
 = 
cfg
->
twr
;

47 
emc
->
dy«mi˘rc
 = 
cfg
->
åc
;

48 
emc
->
dy«mi˘rfc
 = 
cfg
->
åfc
;

49 
emc
->
dy«mi˘x§
 = 
cfg
->
tx§
;

50 
emc
->
dy«mi˘ºd
 = 
cfg
->
ård
;

51 
emc
->
dy«mi˘mrd
 = 
cfg
->
tmrd
;

52 
emc
->
dy«mi˘cdÃ
 = 
cfg
->
tcdÃ
;

53 
i
 = 0; i < 
EMC_DYN_CHIP_COUNT
; ++i) {

54 i‡(
cfg
->
chù
 [
i
].
size
 != 0) {

55 
emc
->
dy«mic
 [
i
].
c⁄fig
 = 
cfg
->
chù
 [i].config;

56 
emc
->
dy«mic
 [
i
].
øsˇs
 = 
cfg
->
chù
 [i].rascas;

61 
emc
->
dy«micc⁄åﬁ
 = dy«micc⁄åﬁ | 
EMC_DYN_CTRL_I_NOP
;

62 
	`Õc32xx_mi¸o_£c⁄ds_dñay
(
cfg
->
n›_time_ö_us
);

65 
emc
->
dy«micc⁄åﬁ
 = dy«micc⁄åﬁ | 
EMC_DYN_CTRL_I_PALL
;

66 
emc
->
dy«mi¸e‰esh
 = 1;

68 
	`Õc32xx_mi¸o_£c⁄ds_dñay
(10);

71 
emc
->
dy«mi¸e‰esh
 = 
cfg
->
ª‰esh
;

73 
	`Õc32xx_mi¸o_£c⁄ds_dñay
(16);

76 
i
 = 0; i < 
EMC_DYN_CHIP_COUNT
; ++i) {

77 i‡(
cfg
->
chù
 [
i
].
size
 != 0) {

78 
	`Õc32xx_£t_å™¶©i⁄_èbÀ_íåõs
(

79 (*Ë
chù_begö
,

80 (*Ë(
chù_begö
 + 
cfg
->
chù
 [
i
].
size
),

81 
LPC32XX_MMU_READ_WRITE


83 
emc
->
dy«micc⁄åﬁ
 = dy«micc⁄åﬁ | 
EMC_DYN_CTRL_I_MODE
;

84 *(vﬁ©ûê
uöt32_t
 *)(
chù_begö
 + 
cfg
->
chù
 [
i
].
mode
);

85 
emc
->
dy«micc⁄åﬁ
 = dy«micc⁄åﬁ | 
EMC_DYN_CTRL_I_MODE
;

86 *(vﬁ©ûê
uöt32_t
 *)(
chù_begö
 + 
cfg
->
chù
 [
i
].
extmode
);

88 
chù_begö
 += 0x20000000;

91 
emc
->
dy«micc⁄åﬁ
 = 
cfg
->
c⁄åﬁ
;

92 
	}
}

94 
	$Õc32xx_emc_öô
(c⁄° 
Õc32xx_emc_dy«mic_c⁄fig
 *
dyn_cfg
)

97 
emc_ahb
 [0].
c⁄åﬁ
 = 
EMC_AHB_PORT_BUFF_EN
;

98 
emc_ahb
 [3].
c⁄åﬁ
 = 
EMC_AHB_PORT_BUFF_EN
;

99 
emc_ahb
 [4].
c⁄åﬁ
 = 
EMC_AHB_PORT_BUFF_EN
;

102 
emc_ahb
 [0].
timeout
 = 
	`EMC_AHB_TIMEOUT
(32);

103 
emc_ahb
 [3].
timeout
 = 
	`EMC_AHB_TIMEOUT
(32);

104 
emc_ahb
 [4].
timeout
 = 
	`EMC_AHB_TIMEOUT
(32);

107 
emc
->
c⁄åﬁ
 = 
EMC_CTRL_E
,

108 
emc
->
c⁄fig
 = 0;

110 
	`dy«mic_öô
(
dyn_cfg
);

111 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/i2c.c

23 
	~<πems.h
>

25 
	~<b•.h
>

26 
	~<b•/i2c.h
>

28 
	$Õc32xx_i2c_ª£t
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
)

30 
i2c
->
˘æ
 = 
I2C_CTRL_RESET
;

31 
	}
}

33 
πems_°©us_code
 
	$Õc32xx_i2c_öô
(

34 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

35 
˛ock_ö_hz


38 
uöt32_t
 
i2c˛k
 = 0;

40 i‡(
i2c
 =&
Õc32xx
.
i2c_1
) {

41 
i2c˛k
 |
I2CCLK_1_EN
 | 
I2CCLK_1_HIGH_DRIVE
;

42 } i‡(
i2c
 =&
Õc32xx
.
i2c_2
) {

43 
i2c˛k
 |
I2CCLK_2_EN
 | 
I2CCLK_2_HIGH_DRIVE
;

45  
RTEMS_INVALID_ID
;

48 
LPC32XX_I2CCLK_CTRL
 |
i2c˛k
;

50 
	`Õc32xx_i2c_ª£t
(
i2c
);

52  
	`Õc32xx_i2c_˛ock
(
i2c
, 
˛ock_ö_hz
);

53 
	}
}

55 
πems_°©us_code
 
	$Õc32xx_i2c_˛ock
(

56 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

57 
˛ock_ö_hz


60 
uöt32_t
 
˛k_div
 = 
	`Õc32xx_h˛k
(Ë/ 
˛ock_ö_hz
;

61 
uöt32_t
 
˛k_lo
 = 0;

62 
uöt32_t
 
˛k_hi
 = 0;

64 
˛ock_ö_hz
) {

66 
˛k_lo
 = 
˛k_div
 / 2;

69 
˛k_lo
 = (64 * 
˛k_div
) / 100;

72  
RTEMS_INVALID_CLOCK
;

75 
˛k_hi
 = 
˛k_div
 - 
˛k_lo
;

77 
i2c
->
˛k_lo
 = clk_lo;

78 
i2c
->
˛k_hi
 = clk_hi;

80  
RTEMS_SUCCESSFUL
;

81 
	}
}

83 
πems_°©us_code
 
	$waô_f‹_å™ß˘i⁄_d⁄e
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
)

85 
uöt32_t
 
°©
 = 0;

88 
°©
 = 
i2c
->stat;

89 } (
°©
 & 
I2C_STAT_TDI
) == 0);

91 i‡((
°©
 & 
I2C_STAT_TFE
) != 0) {

92 
i2c
->
°©
 = 
I2C_STAT_TDI
;

94  
RTEMS_SUCCESSFUL
;

96 
	`Õc32xx_i2c_ª£t
(
i2c
);

98  
RTEMS_IO_ERROR
;

100 
	}
}

102 
πems_°©us_code
 
	$tx
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
, 
uöt32_t
 
d©a
)

104 
uöt32_t
 
°©
 = 0;

107 
°©
 = 
i2c
->stat;

108 } (
°©
 & (
I2C_STAT_TFE
 | 
I2C_STAT_TDI
)) == 0);

110 i‡((
°©
 & 
I2C_STAT_TDI
) == 0) {

111 
i2c
->
rx_‹_tx
 = 
d©a
;

113  
RTEMS_SUCCESSFUL
;

115 
	`Õc32xx_i2c_ª£t
(
i2c
);

117  
RTEMS_IO_ERROR
;

119 
	}
}

121 
πems_°©us_code
 
	$Õc32xx_i2c_wrôe_°¨t
(

122 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

123 
addr


126  
	`tx
(
i2c
, 
	`I2C_TX_ADDR
(
addr
Ë| 
I2C_TX_START
);

127 
	}
}

129 
πems_°©us_code
 
	$Õc32xx_i2c_ªad_°¨t
(

130 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

131 
addr


134  
	`tx
(
i2c
, 
	`I2C_TX_ADDR
(
addr
Ë| 
I2C_TX_START
 | 
I2C_TX_READ
);

135 
	}
}

137 
πems_°©us_code
 
	$Õc32xx_i2c_wrôe_wôh_›ti⁄Æ_°›
(

138 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

139 c⁄° 
uöt8_t
 *
out
,

140 
size_t
 
n
,

141 
boﬁ
 
°›


144 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

145 
size_t
 
i
 = 0;

147 
i
 = 0; i < 
n
 - 1 && 
sc
 =
RTEMS_SUCCESSFUL
; ++i) {

148 
sc
 = 
	`tx
(
i2c
, 
out
 [
i
]);

151 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

152 
uöt32_t
 
°›_Êag
 = 
°›
 ? 
I2C_TX_STOP
 : 0;

154 
sc
 = 
	`tx
(
i2c
, 
out
 [
n
 - 1] | 
°›_Êag
);

157 i‡(
°›
 && 
sc
 =
RTEMS_SUCCESSFUL
) {

158 
sc
 = 
	`waô_f‹_å™ß˘i⁄_d⁄e
(
i2c
);

161  
sc
;

162 
	}
}

164 
boﬁ
 
	$ˇn_tx_f‹_rx
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
)

166  (
i2c
->
°©
 & (
I2C_STAT_TFF
 | 
I2C_STAT_RFF
)) == 0;

167 
	}
}

169 
boﬁ
 
	$ˇn_rx
(vﬁ©ûê
Õc32xx_i2c
 *
i2c
)

171  (
i2c
->
°©
 & 
I2C_STAT_RFE
) == 0;

172 
	}
}

174 
πems_°©us_code
 
	$Õc32xx_i2c_ªad_wôh_›ti⁄Æ_°›
(

175 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

176 
uöt8_t
 *
ö
,

177 
size_t
 
n
,

178 
boﬁ
 
°›


181 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

182 
size_t
 
œ°
 = 
n
 - 1;

183 
size_t
 
rx
 = 0;

184 
size_t
 
tx
 = 0;

186 i‡(!
°›
) {

187  
RTEMS_NOT_IMPLEMENTED
;

190 
rx
 <
œ°
) {

191 
tx
 < 
œ°
 && 
	`ˇn_tx_f‹_rx
(
i2c
)) {

192 
i2c
->
rx_‹_tx
 = 0;

193 ++
tx
;

196 i‡(
tx
 =
œ°
 && 
	`ˇn_tx_f‹_rx
(
i2c
)) {

197 
uöt32_t
 
°›_Êag
 = 
°›
 ? 
I2C_TX_STOP
 : 0;

199 
i2c
->
rx_‹_tx
 = 
°›_Êag
;

200 ++
tx
;

203 
rx
 <
œ°
 && 
	`ˇn_rx
(
i2c
)) {

204 
ö
 [
rx
] = (
uöt8_t
Ë
i2c
->
rx_‹_tx
;

205 ++
rx
;

209 i‡(
°›
) {

210 
sc
 = 
	`waô_f‹_å™ß˘i⁄_d⁄e
(
i2c
);

213  
sc
;

214 
	}
}

216 
πems_°©us_code
 
	$Õc32xx_i2c_wrôe_™d_ªad
(

217 vﬁ©ûê
Õc32xx_i2c
 *
i2c
,

218 
addr
,

219 c⁄° 
uöt8_t
 *
out
,

220 
size_t
 
out_size
,

221 
uöt8_t
 *
ö
,

222 
size_t
 
ö_size


225 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

227 i‡(
out_size
 > 0) {

228 
boﬁ
 
°›
 = 
ö_size
 == 0;

230 
sc
 = 
	`Õc32xx_i2c_wrôe_°¨t
(
i2c
, 
addr
);

231 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

232  
sc
;

235 
sc
 = 
	`Õc32xx_i2c_wrôe_wôh_›ti⁄Æ_°›
(
i2c
, 
out
, 
out_size
, 
°›
);

236 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

237  
sc
;

241 i‡(
ö_size
 > 0) {

242 
sc
 = 
	`Õc32xx_i2c_ªad_°¨t
(
i2c
, 
addr
);

243 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

244  
sc
;

247 
	`Õc32xx_i2c_ªad_wôh_›ti⁄Æ_°›
(
i2c
, 
ö
, 
ö_size
, 
åue
);

250  
RTEMS_SUCCESSFUL
;

251 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/idle-thread.c

23 
	~<b•.h
>

25 
	~<lib˝u/¨m-˝15.h
>

27 *
	$b•_idÀ_thªad
(
uöçå_t
 
¨g
)

29 
åue
) {

30 
	`¨m_˝15_waô_f‹_öãºu±
();

33  
NULL
;

34 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-erase-block-safe.c

24 
	~<b•/«nd-mlc.h
>

26 
	~<°rög.h
>

28 
	~<b•.h
>

30 
	$Õc32xx_mlc_zîo_∑ges
(
uöt32_t
 
∑ge_begö
, uöt32_à
∑ge_íd
)

32 
uöt32_t
 
∑ge
 = 0;

34 
∑ge
 = 
∑ge_begö
;Öagê< 
∑ge_íd
; ++page) {

35 
	`Õc32xx_mlc_wrôe_∑ge_wôh_ecc
(

36 
∑ge
,

37 
Õc32xx_magic_zîo_begö
,

38 
Õc32xx_magic_zîo_begö


41 
	}
}

43 
πems_°©us_code
 
	$is_vÆid_∑ge
(

44 
uöt32_t
 
∑ge_begö
,

45 
uöt32_t
 
∑ge_off£t


48 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

49 
uöt32_t
 
•¨e
 [
MLC_LARGE_SPARE_WORD_COUNT
];

51 
	`mem£t
(
•¨e
, 0, 
MLC_LARGE_SPARE_SIZE
);

53 
sc
 = 
	`Õc32xx_mlc_ªad_∑ge
(

54 
∑ge_begö
 + 
∑ge_off£t
,

55 
Õc32xx_magic_zîo_begö
,

56 
•¨e
,

57 
NULL


59 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

60 i‡(
	`Õc32xx_mlc_is_bad_∑ge
(
•¨e
)) {

61 
sc
 = 
RTEMS_INCORRECT_STATE
;

65  
sc
;

66 
	}
}

68 
πems_°©us_code
 
	$is_vÆid_block
(
uöt32_t
 
∑ge_begö
)

70 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

72 i‡(
	`Õc32xx_mlc_∑ge_size
(Ë=512 && 
	`Õc32xx_mlc_io_width
() == 8) {

73 
sc
 = 
	`is_vÆid_∑ge
(
∑ge_begö
, 0);

74 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

75 
sc
 = 
	`is_vÆid_∑ge
(
∑ge_begö
, 1);

78 
sc
 = 
RTEMS_NOT_IMPLEMENTED
;

81  
sc
;

82 
	}
}

84 
πems_°©us_code
 
	$Õc32xx_mlc_is_vÆid_block
(
uöt32_t
 
block_ödex
)

86 
uöt32_t
 
∑ges_≥r_block
 = 
	`Õc32xx_mlc_∑ges_≥r_block
();

87 
uöt32_t
 
∑ge_begö
 = 
block_ödex
 * 
∑ges_≥r_block
;

89  
	`is_vÆid_block
(
∑ge_begö
);

90 
	}
}

92 
πems_°©us_code
 
	$Õc32xx_mlc_îa£_block_ß„_3
(

93 
uöt32_t
 
block_ödex
,

94 
uöt32_t
 
∑ge_begö
,

95 
uöt32_t
 
∑ge_íd


98 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

100 
sc
 = 
	`is_vÆid_block
(
∑ge_begö
);

101 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

102 
sc
 = 
	`Õc32xx_mlc_îa£_block
(
block_ödex
);

103 i‡(
sc
 =
RTEMS_UNSATISFIED
) {

104 
	`Õc32xx_mlc_zîo_∑ges
(
∑ge_begö
, 
∑ge_íd
);

108  
sc
;

109 
	}
}

111 
πems_°©us_code
 
	$Õc32xx_mlc_îa£_block_ß„
(
uöt32_t
 
block_ödex
)

113 
uöt32_t
 
∑ges_≥r_block
 = 
	`Õc32xx_mlc_∑ges_≥r_block
();

114 
uöt32_t
 
∑ge_begö
 = 
block_ödex
 * 
∑ges_≥r_block
;

115 
uöt32_t
 
∑ge_íd
 = 
∑ge_begö
 + 
∑ges_≥r_block
;

117  
	`Õc32xx_mlc_îa£_block_ß„_3
(

118 
block_ödex
,

119 
∑ge_begö
,

120 
∑ge_íd


122 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-read-blocks.c

22 
	~<b•/«nd-mlc.h
>

24 
πems_°©us_code
 
	$ªad_∑ge
(

25 
uöt32_t
 
fú°_∑ge_of_block
,

26 
uöt32_t
 
∑ge
,

27 
uöt32_t
 
∑ge_d©a
 [
MLC_LARGE_DATA_WORD_COUNT
],

28 
uöt32_t
 
∑ge_•¨e
 [
MLC_LARGE_SPARE_WORD_COUNT
]

31 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

32 
uöt32_t
 
∑ge_ödex
 = 
fú°_∑ge_of_block
 + 
∑ge
;

33 
boﬁ
 
possibÀ_bad_∑ge
 = 
∑ge
 == 0 ||Öage == 1;

35 i‡(
possibÀ_bad_∑ge
) {

36 
	`mem£t
(
∑ge_•¨e
, 0, 
MLC_LARGE_SPARE_SIZE
);

39 
sc
 = 
	`Õc32xx_mlc_ªad_∑ge
(
∑ge_ödex
, 
∑ge_d©a
, 
∑ge_•¨e
, 
NULL
);

40 i‡(
possibÀ_bad_∑ge
 && 
	`Õc32xx_mlc_is_bad_∑ge
(
∑ge_•¨e
)) {

41  
RTEMS_UNSATISFIED
;

42 } i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

43  
RTEMS_SUCCESSFUL
;

45  
sc
;

47 
	}
}

49 
πems_°©us_code
 
	$Õc32xx_mlc_ªad_blocks
(

50 
uöt32_t
 
block_begö
,

51 
uöt32_t
 
block_íd
,

52 
Õc32xx_mlc_ªad_¥o˚ss
 
¥o˚ss
,

53 *
¥o˚ss_¨g
,

54 
uöt32_t
 
∑ge_buf„r_0
 [
MLC_LARGE_DATA_WORD_COUNT
],

55 
uöt32_t
 
∑ge_buf„r_1
 [
MLC_LARGE_DATA_WORD_COUNT
]

58 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

59 
uöt32_t
 
∑ge_•¨e_0
 [
MLC_LARGE_SPARE_WORD_COUNT
];

60 
uöt32_t
 
∑ge_•¨e_1
 [
MLC_LARGE_SPARE_WORD_COUNT
];

61 
uöt32_t
 
∑ges_≥r_block
 = 
	`Õc32xx_mlc_∑ges_≥r_block
();

62 
uöt32_t
 
∑ge_size
 = 
	`Õc32xx_mlc_∑ge_size
();

63 
uöt32_t
 
block
 = 0;

64 
uöt32_t
 
fú°_∑ge_of_block
 = 
block_begö
 * 
∑ges_≥r_block
;

67 
block
 = 
block_begö
;

68 
block
 !
block_íd
;

69 ++
block
, 
fú°_∑ge_of_block
 +
∑ges_≥r_block


71 
uöt32_t
 
∑ge
 = 0;

72 
boﬁ
 
d⁄e
 = 
Ál£
;

74 
sc
 = 
	`ªad_∑ge
(
fú°_∑ge_of_block
, 0, 
∑ge_buf„r_0
, 
∑ge_•¨e_0
);

75 i‡(
sc
 =
RTEMS_UNSATISFIED
) {

77 } i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

78 
d⁄e
;

81 
sc
 = 
	`ªad_∑ge
(
fú°_∑ge_of_block
, 1, 
∑ge_buf„r_1
, 
∑ge_•¨e_1
);

82 i‡(
sc
 =
RTEMS_UNSATISFIED
) {

84 } i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

85 
d⁄e
;

88 
d⁄e
 = (*
¥o˚ss
)(

89 
¥o˚ss_¨g
,

90 
fú°_∑ge_of_block
 + 0,

91 
∑ge_size
,

92 
∑ge_buf„r_0
,

93 
∑ge_•¨e_0


95 i‡(
d⁄e
) {

96 
d⁄e
;

99 
d⁄e
 = (*
¥o˚ss
)(

100 
¥o˚ss_¨g
,

101 
fú°_∑ge_of_block
 + 1,

102 
∑ge_size
,

103 
∑ge_buf„r_1
,

104 
∑ge_•¨e_1


106 i‡(
d⁄e
) {

107 
d⁄e
;

110 
∑ge
 = 2;Öagê< 
∑ges_≥r_block
; ++page) {

111 
sc
 = 
	`ªad_∑ge
(
fú°_∑ge_of_block
, 
∑ge
, 
∑ge_buf„r_1
, 
∑ge_•¨e_1
);

112 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

113 
d⁄e
;

116 
d⁄e
 = (*
¥o˚ss
)(

117 
¥o˚ss_¨g
,

118 
fú°_∑ge_of_block
 + 
∑ge
,

119 
∑ge_size
,

120 
∑ge_buf„r_1
,

121 
∑ge_•¨e_1


123 i‡(
d⁄e
) {

124 
d⁄e
;

129 
d⁄e
:

131  
sc
;

132 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-write-blocks.c

23 
	~<b•/«nd-mlc.h
>

25 c⁄° 
uöt32_t
 
	g⁄es_•¨e
 [
MLC_LARGE_SPARE_WORD_COUNT
] = {

44 
πems_°©us_code
 
	$Õc32xx_mlc_wrôe_blocks
(

45 
uöt32_t
 
block_begö
,

46 
uöt32_t
 
block_íd
,

47 c⁄° *
§c
,

48 
size_t
 
§c_size
,

49 
uöt32_t
 *
∑ge_d©a_buf„r


52 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

53 
uöt32_t
 
∑ges_≥r_block
 = 
	`Õc32xx_mlc_∑ges_≥r_block
();

54 
uöt32_t
 
block_cou¡
 = 
	`Õc32xx_mlc_block_cou¡
();

55 
uöt32_t
 
∑ge_size
 = 
	`Õc32xx_mlc_∑ge_size
();

56 
uöt32_t
 
block
 = 0;

57 c⁄° 
uöt8_t
 *
cuºít
 = 
§c
;

58 c⁄° 
uöt8_t
 *
œ°
 = 
cuºít
;

59 c⁄° 
uöt8_t
 *
íd
 = 
cuºít
 + 
§c_size
;

61 i‡(
block_begö
 > 
block_íd
 || block_íd > 
block_cou¡
) {

62  
RTEMS_INVALID_ID
;

65 
block
 = 
block_begö
; block !
block_íd
; ++block) {

66 
uöt32_t
 
∑ge_begö
 = 
block
 * 
∑ges_≥r_block
;

67 
uöt32_t
 
∑ge_íd
 = 
∑ge_begö
 + 
∑ges_≥r_block
;

68 
uöt32_t
 
∑ge
 = 0;

70 
sc
 = 
	`Õc32xx_mlc_îa£_block_ß„_3
(
block
, 
∑ge_begö
, 
∑ge_íd
);

71 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

75 
∑ge
 = 
∑ge_begö
;Öagê< 
∑ge_íd
; ++page) {

76 
uöçå_t
 
ªmaödî
 = (uöçå_tË
íd
 - (uöçå_tË
cuºít
;

77 
size_t
 
dñè
 = 
ªmaödî
 < 
∑ge_size
 ?Ñemainder :Öage_size;

79 i‡(
ªmaödî
 > 0) {

80 
	`mem˝y
(
∑ge_d©a_buf„r
, 
cuºít
, 
dñè
);

81 
sc
 = 
	`Õc32xx_mlc_wrôe_∑ge_wôh_ecc
(

82 
∑ge
,

83 
∑ge_d©a_buf„r
,

84 
⁄es_•¨e


86 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

87 
	`Õc32xx_mlc_îa£_block
(
block
);

88 
	`Õc32xx_mlc_zîo_∑ges
(
∑ge_begö
, 
∑ge_íd
);

89 
cuºít
 = 
œ°
;

93 
cuºít
 +
dñè
;

95 
d⁄e
;

99 
œ°
 = 
cuºít
;

102 
d⁄e
:

104 i‡(
cuºít
 !
íd
) {

105  
RTEMS_IO_ERROR
;

108  
RTEMS_SUCCESSFUL
;

109 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/nand-mlc.c

23 
	~<b•/Õc32xx.h
>

24 
	~<b•/«nd-mlc.h
>

26 vﬁ©ûê
Õc32xx_«nd_mlc
 *c⁄° 
	gmlc
 = &
Õc32xx
.
«nd_mlc
;

28 
uöt32_t
 
	gmlc_Êags
;

30 
uöt32_t
 
	gmlc_block_cou¡
;

32 
uöt32_t
 
	gmlc_∑ge_cou¡
;

34 
boﬁ
 
	$mlc_smÆl_∑ges
()

36  (
mlc_Êags
 & 
MLC_SMALL_PAGES
) != 0;

37 
	}
}

39 
boﬁ
 
	$mlc_m™y_addªss_cy˛es
()

41  (
mlc_Êags
 & 
MLC_MANY_ADDRESS_CYCLES
) != 0;

42 
	}
}

44 
boﬁ
 
	$mlc_n‹mÆ_blocks
()

46  (
mlc_Êags
 & 
MLC_NORMAL_BLOCKS
) != 0;

47 
	}
}

49 
uöt32_t
 
	$Õc32xx_mlc_∑ge_size
()

51 i‡(
	`mlc_smÆl_∑ges
()) {

56 
	}
}

58 
uöt32_t
 
	$Õc32xx_mlc_∑ges_≥r_block
()

60 i‡(
	`mlc_smÆl_∑ges
()) {

63 i‡(
	`mlc_n‹mÆ_blocks
()) {

69 
	}
}

71 
uöt32_t
 
	$Õc32xx_mlc_block_cou¡
()

73  
mlc_block_cou¡
;

74 
	}
}

76 
uöt32_t
 
	$Õc32xx_mlc_io_width
()

78 i‡((
mlc_Êags
 & 
MLC_IO_WIDTH_16_BIT
) == 0) {

83 
	}
}

85 
	$mlc_u∆ock
()

87 
mlc
->
lock_¥
 = 
MLC_UNLOCK_PROT
;

88 
	}
}

90 
	$mlc_waô
(
uöt32_t
 
Êags
)

92 (
mlc
->
i§
 & 
Êags
) != flags) {

95 
	}
}

97 
	$mlc_waô_u¡û_ªady
()

99 
	`mlc_waô
(
MLC_ISR_CONTROLLER_READY
 | 
MLC_ISR_NAND_READY
);

100 
	}
}

102 
	$mlc_ª£t
()

104 
mlc
->
cmd
 = 0xff;

105 
	}
}

107 
uöt32_t
 
	$mlc_°©us
()

109 
	`mlc_waô_u¡û_ªady
();

110 
mlc
->
cmd
 = 0x70;

112  
mlc
->
d©a
.
w8
;

113 
	}
}

115 
boﬁ
 
	$mlc_was_›î©i⁄_suc˚ssful
()

117  (
	`mlc_°©us
(Ë& (
NAND_STATUS_READY
 | 
NAND_STATUS_ERROR
))

118 =
NAND_STATUS_READY
;

119 
	}
}

121 
	$mlc_£t_block_addªss
(
uöt32_t
 
block_ödex
)

123 i‡(
	`mlc_smÆl_∑ges
()) {

124 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 << 5);

125 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 3);

126 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

127 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 11);

130 i‡(
	`mlc_n‹mÆ_blocks
()) {

131 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 << 6);

132 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 2);

133 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

134 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 10);

137 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 << 7);

138 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 1);

139 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

140 
mlc
->
addr
 = (
uöt8_t
Ë(
block_ödex
 >> 9);

144 
	}
}

146 
	$mlc_£t_∑ge_addªss
(
uöt32_t
 
∑ge_ödex
)

148 
mlc
->
addr
 = 0;

149 i‡(
	`mlc_smÆl_∑ges
()) {

150 
mlc
->
addr
 = (
uöt8_t
Ë
∑ge_ödex
;

151 
mlc
->
addr
 = (
uöt8_t
Ë(
∑ge_ödex
 >> 8);

152 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

153 
mlc
->
addr
 = (
uöt8_t
Ë(
∑ge_ödex
 >> 16);

156 
mlc
->
addr
 = 0;

157 
mlc
->
addr
 = (
uöt8_t
Ë
∑ge_ödex
;

158 
mlc
->
addr
 = (
uöt8_t
Ë(
∑ge_ödex
 >> 8);

159 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

160 
mlc
->
addr
 = (
uöt8_t
Ë(
∑ge_ödex
 >> 16);

163 
	}
}

165 
	$Õc32xx_mlc_öô
(c⁄° 
Õc32xx_mlc_c⁄fig
 *
cfg
)

167 
uöt32_t
 
i¸
 = 0;

169 
mlc_Êags
 = 
cfg
->
Êags
;

170 
mlc_block_cou¡
 = 
cfg
->
block_cou¡
;

171 
mlc_∑ge_cou¡
 = 
cfg
->
block_cou¡
 * 
	`Õc32xx_mlc_∑ges_≥r_block
();

174 
LPC32XX_FLASHCLK_CTRL
 = 
FLASHCLK_IRQ_MLC
 | 
FLASHCLK_MLC_CLK_ENABLE
;

177 
	`mlc_u∆ock
();

178 
mlc
->
time
 = 
cfg
->time;

181 i‡(!
	`mlc_smÆl_∑ges
()) {

182 
i¸
 |
MLC_ICR_LARGE_PAGES
;

184 i‡(
	`mlc_m™y_addªss_cy˛es
()) {

185 
i¸
 |
MLC_ICR_ADDR_WORD_COUNT_4_5
;

187 
	`mlc_u∆ock
();

188 
mlc
->
i¸
 = icr;

190 
	`mlc_ª£t
();

191 
	}
}

193 
	$Õc32xx_mlc_wrôe_¥Ÿe˘i⁄
(

194 
uöt32_t
 
∑ge_ödex_low
,

195 
uöt32_t
 
∑ge_ödex_high


198 
	`mlc_u∆ock
();

199 
mlc
->
sw_wp_add_low
 = 
∑ge_ödex_low
;

200 
	`mlc_u∆ock
();

201 
mlc
->
sw_wp_add_hig
 = 
∑ge_ödex_high
;

202 
	`mlc_u∆ock
();

203 
mlc
->
i¸
 |
MLC_ICR_SOFT_WRITE_PROT
;

204 
	}
}

206 
boﬁ
 
	$is_w‹d_Æig√d
(c⁄° *
d©a
, c⁄° *
•¨e
)

208  (((
uöçå_t
Ë
d©a
Ë| ((uöçå_tË
•¨e
)) % 4 == 0;

209 
	}
}

211 
πems_°©us_code
 
	$Õc32xx_mlc_ªad_∑ge
(

212 
uöt32_t
 
∑ge_ödex
,

213 *
d©a
,

214 *
•¨e
,

215 
uöt32_t
 *
symbﬁ_îr‹_cou¡_±r


218 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

219 
size_t
 
smÆl_∑ges_cou¡
 = 
	`mlc_smÆl_∑ges
(Ë? 1 : 
MLC_SMALL_PAGES_PER_LARGE_PAGE
;

220 
size_t
 
•
 = 0;

221 
size_t
 
i
 = 0;

222 
uöt32_t
 
i§
 = 0;

223 
uöt32_t
 
symbﬁ_îr‹_cou¡
 = 0xffffffff;

224 
boﬁ
 
Æig√d
 = 
	`is_w‹d_Æig√d
(
d©a
, 
•¨e
);

225 
uöt8_t
 *
cuºít_d©a
 = 
d©a
;

226 
uöt8_t
 *
cuºít_•¨e
 = 
•¨e
;

228 i‡(
∑ge_ödex
 >
mlc_∑ge_cou¡
) {

229  
RTEMS_INVALID_ID
;

232 
	`mlc_waô_u¡û_ªady
();

233 
mlc
->
cmd
 = 0x00;

234 i‡(!
	`mlc_smÆl_∑ges
()) {

235 
mlc
->
cmd
 = 0x30;

237 
	`mlc_£t_∑ge_addªss
(
∑ge_ödex
);

238 
	`mlc_waô
(
MLC_ISR_NAND_READY
);

240 
•
 = 0; 
sc
 =
RTEMS_SUCCESSFUL
 && s∞< 
smÆl_∑ges_cou¡
; ++sp) {

241 
uöt32_t
 *
Æig√d_d©a
 = (uöt32_à*Ë
cuºít_d©a
;

242 
uöt32_t
 *
Æig√d_•¨e
 = (uöt32_à*Ë
cuºít_•¨e
;

244 
mlc
->
ecc_dec
 = 0;

246 i‡(
Æig√d
) {

247 
i
 = 0; i < 
MLC_SMALL_DATA_WORD_COUNT
; ++i) {

248 
Æig√d_d©a
 [
i
] = 
mlc
->
d©a
.
w32
;

250 
i
 = 0; i < 
MLC_SMALL_SPARE_WORD_COUNT
; ++i) {

251 
Æig√d_•¨e
 [
i
] = 
mlc
->
d©a
.
w32
;

254 
i
 = 0; i < 
MLC_SMALL_DATA_SIZE
; ++i) {

255 
cuºít_d©a
 [
i
] = 
mlc
->
d©a
.
w8
;

257 
i
 = 0; i < 
MLC_SMALL_SPARE_SIZE
; ++i) {

258 
cuºít_•¨e
 [
i
] = 
mlc
->
d©a
.
w8
;

262 
	`mlc_waô
(
MLC_ISR_ECC_READY
);

264 
i§
 = 
mlc
->isr;

265 i‡((
i§
 & 
MLC_ISR_ERRORS_DETECTED
) == 0) {

266 
symbﬁ_îr‹_cou¡
 = 0;

268 i‡((
i§
 & 
MLC_ISR_DECODER_FAILURE
) == 0) {

269 
symbﬁ_îr‹_cou¡
 = 
	`MLC_ISR_SYMBOL_ERRORS
(
i§
);

270 i‡(
Æig√d
) {

271 
mlc
->
rubp
 = 0;

272 
i
 = 0; i < 
MLC_SMALL_DATA_WORD_COUNT
; ++i) {

273 
Æig√d_d©a
 [
i
] = 
mlc
->
buff
.
w32
;

275 
mlc
->
robp
 = 0;

276 
i
 = 0; i < 
MLC_SMALL_SPARE_WORD_COUNT
; ++i) {

277 
Æig√d_•¨e
 [
i
] = 
mlc
->
buff
.
w32
;

280 
mlc
->
rubp
 = 0;

281 
i
 = 0; i < 
MLC_SMALL_DATA_SIZE
; ++i) {

282 
cuºít_d©a
 [
i
] = 
mlc
->
buff
.
w8
;

284 
mlc
->
robp
 = 0;

285 
i
 = 0; i < 
MLC_SMALL_SPARE_SIZE
; ++i) {

286 
cuºít_•¨e
 [
i
] = 
mlc
->
buff
.
w8
;

290 
sc
 = 
RTEMS_IO_ERROR
;

294 
cuºít_d©a
 +
MLC_SMALL_DATA_SIZE
;

295 
cuºít_•¨e
 +
MLC_SMALL_SPARE_SIZE
;

298 i‡(
symbﬁ_îr‹_cou¡_±r
 !
NULL
) {

299 *
symbﬁ_îr‹_cou¡_±r
 = 
symbﬁ_îr‹_cou¡
;

302  
sc
;

303 
	}
}

305 
	$Õc32xx_mlc_ªad_id
(
uöt8_t
 *
id
, 
size_t
 
n
)

307 
size_t
 
i
 = 0;

309 
	`mlc_waô_u¡û_ªady
();

310 
mlc
->
cmd
 = 0x90;

311 
mlc
->
addr
 = 0;

312 
	`mlc_waô
(
MLC_ISR_NAND_READY
);

314 
i
 = 0; i < 
n
; ++i) {

315 
id
 [
i
] = 
mlc
->
d©a
.
w8
;

317 
	}
}

319 
πems_°©us_code
 
	$Õc32xx_mlc_îa£_block
(
uöt32_t
 
block_ödex
)

321 
πems_°©us_code
 
sc
 = 
RTEMS_UNSATISFIED
;

323 i‡(
block_ödex
 >
mlc_block_cou¡
) {

324  
RTEMS_INVALID_ID
;

327 
	`mlc_waô_u¡û_ªady
();

328 
mlc
->
cmd
 = 0x60;

329 
	`mlc_£t_block_addªss
(
block_ödex
);

330 
mlc
->
cmd
 = 0xd0;

332 i‡(
	`mlc_was_›î©i⁄_suc˚ssful
()) {

333 
sc
 = 
RTEMS_SUCCESSFUL
;

336  
sc
;

337 
	}
}

339 
πems_°©us_code
 
	$Õc32xx_mlc_wrôe_∑ge_wôh_ecc
(

340 
uöt32_t
 
∑ge_ödex
,

341 c⁄° *
d©a
,

342 c⁄° *
•¨e


345 
πems_°©us_code
 
sc
 = 
RTEMS_IO_ERROR
;

346 
size_t
 
smÆl_∑ges_cou¡
 = 
	`mlc_smÆl_∑ges
() ?

347 1 : 
MLC_SMALL_PAGES_PER_LARGE_PAGE
;

348 
size_t
 
•
 = 0;

349 
size_t
 
i
 = 0;

350 
boﬁ
 
Æig√d
 = 
	`is_w‹d_Æig√d
(
d©a
, 
•¨e
);

351 c⁄° 
uöt8_t
 *
cuºít_d©a
 = 
d©a
;

352 c⁄° 
uöt8_t
 *
cuºít_•¨e
 = 
•¨e
;

354 i‡(
∑ge_ödex
 >
mlc_∑ge_cou¡
) {

355  
RTEMS_INVALID_ID
;

358 
	`mlc_waô_u¡û_ªady
();

359 
mlc
->
cmd
 = 0x80;

360 
	`mlc_£t_∑ge_addªss
(
∑ge_ödex
);

362 
•
 = 0; s∞< 
smÆl_∑ges_cou¡
; ++sp) {

363 
mlc
->
ecc_íc
 = 0;

365 i‡(
Æig√d
) {

366 c⁄° 
uöt32_t
 *
Æig√d_d©a
 = (c⁄° uöt32_à*Ë
cuºít_d©a
;

367 c⁄° 
uöt32_t
 *
Æig√d_•¨e
 = (c⁄° uöt32_à*Ë
cuºít_•¨e
;

369 
i
 = 0; i < 
MLC_SMALL_DATA_WORD_COUNT
; ++i) {

370 
mlc
->
d©a
.
w32
 = 
Æig√d_d©a
 [
i
];

372 
mlc
->
d©a
.
w32
 = 
Æig√d_•¨e
 [0];

373 
mlc
->
d©a
.
w16
 = (
uöt16_t
Ë
Æig√d_•¨e
 [1];

375 
i
 = 0; i < 
MLC_SMALL_DATA_SIZE
; ++i) {

376 
mlc
->
d©a
.
w8
 = 
cuºít_d©a
 [
i
];

378 
i
 = 0; i < 
MLC_SMALL_USER_SPARE_SIZE
; ++i) {

379 
mlc
->
d©a
.
w8
 = 
cuºít_•¨e
 [
i
];

382 
mlc
->
w¥
 = 0;

384 
	`mlc_waô
(
MLC_ISR_CONTROLLER_READY
);

386 
cuºít_d©a
 +
MLC_SMALL_DATA_SIZE
;

387 
cuºít_•¨e
 +
MLC_SMALL_SPARE_SIZE
;

390 
mlc
->
cmd
 = 0x10;

392 i‡(
	`mlc_was_›î©i⁄_suc˚ssful
()) {

393 
sc
 = 
RTEMS_SUCCESSFUL
;

396  
sc
;

397 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/nand-select.c

23 
	~<b•.h
>

24 
	~<b•/Õc32xx.h
>

25 
	~<b•/«nd-mlc.h
>

27 
	$Õc32xx_£À˘_«nd_c⁄åﬁÀr
(
Õc32xx_«nd_c⁄åﬁÀr
 
«nd_c⁄åﬁÀr
)

29 
uöt32_t
 
Êash˛k_˘æ
 = 
LPC32XX_FLASHCLK_CTRL
 & ~(
FLASHCLK_IRQ_MLC


30 | 
FLASHCLK_SELECT_SLC
 | 
FLASHCLK_MLC_CLK_ENABLE
 | 
FLASHCLK_SLC_CLK_ENABLE
);

32 
«nd_c⁄åﬁÀr
) {

33 
LPC32XX_NAND_CONTROLLER_MLC
:

34 
Êash˛k_˘æ
 |
FLASHCLK_IRQ_MLC
 | 
FLASHCLK_MLC_CLK_ENABLE
;

36 
LPC32XX_NAND_CONTROLLER_SLC
:

37 
Êash˛k_˘æ
 |
FLASHCLK_SELECT_SLC
 | 
FLASHCLK_SLC_CLK_ENABLE
;

43 
LPC32XX_FLASHCLK_CTRL
 = 
Êash˛k_˘æ
;

44 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/restart.c

23 
	~<πems.h
>

25 
	~<lib˝u/¨m-˝15.h
>

27 
	~<b•.h
>

29 
	$b•_ª°¨t
(*
addr
)

31 
	`LPC32XX_DO_RESTART
(
addr
);

32 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/system-clocks.c

23 
	~<b•.h
>

24 
	~<b•/Õc32xx.h
>

26 
uöt32_t
 
	$Õc32xx_sys˛k
()

28 
uöt32_t
 
sys˛k_˘æ
 = 
LPC32XX_SYSCLK_CTRL
;

30  (
sys˛k_˘æ
 & 0x1) == 0 ?

31 
LPC32XX_OSCILLATOR_MAIN


32 : (397 * 
LPC32XX_OSCILLATOR_RTC
);

33 
	}
}

35 
uöt32_t
 
	$Õc32xx_h˛k∂l_˛k
()

37 
uöt32_t
 
sys˛k
 = 
	`Õc32xx_sys˛k
();

38 
uöt32_t
 
h˛k∂l_˘æ
 = 
LPC32XX_HCLKPLL_CTRL
;

39 
uöt32_t
 
m
 = 
	`HCLK_PLL_M_GET
(
h˛k∂l_˘æ
) + 1;

40 
uöt32_t
 
n
 = 
	`HCLK_PLL_N_GET
(
h˛k∂l_˘æ
) + 1;

41 
uöt32_t
 
p
 = 1U << 
	`HCLK_PLL_P_GET
(
h˛k∂l_˘æ
);

42 
uöt32_t
 
h˛k∂l_˛k
 = 0;

44 i‡((
h˛k∂l_˘æ
 & 
HCLK_PLL_BYPASS
) != 0) {

45 i‡((
h˛k∂l_˘æ
 & 
HCLK_PLL_DIRECT
) != 0) {

46 
h˛k∂l_˛k
 = 
sys˛k
;

48 
h˛k∂l_˛k
 = 
sys˛k
 / (2 * 
p
);

51 i‡((
h˛k∂l_˘æ
 & 
HCLK_PLL_DIRECT
) != 0) {

52 
h˛k∂l_˛k
 = (
m
 * 
sys˛k
Ë/ 
n
;

54 i‡((
h˛k∂l_˘æ
 & 
HCLK_PLL_FBD_FCLKOUT
) != 0) {

55 
h˛k∂l_˛k
 = 
m
 * (
sys˛k
 / 
n
);

57 
h˛k∂l_˛k
 = (
m
 / (2 * 
p
)Ë* (
sys˛k
 / 
n
);

62  
h˛k∂l_˛k
;

63 
	}
}

65 
uöt32_t
 
	$Õc32xx_≥rùh_˛k
()

67 
uöt32_t
 
pwr_˘æ
 = 
LPC32XX_PWR_CTRL
;

68 
uöt32_t
 
≥rùh_˛k
 = 0;

70 i‡((
pwr_˘æ
 & 
PWR_NORMAL_RUN_MODE
) != 0) {

71 
uöt32_t
 
h˛kdiv_˘æ
 = 
LPC32XX_HCLKDIV_CTRL
;

72 
uöt32_t
 
div
 = 
	`HCLK_DIV_PERIPH_CLK_GET
(
h˛kdiv_˘æ
) + 1;

74 
≥rùh_˛k
 = 
	`Õc32xx_h˛k∂l_˛k
(Ë/ 
div
;

76 
≥rùh_˛k
 = 
	`Õc32xx_sys˛k
();

79  
≥rùh_˛k
;

80 
	}
}

82 
uöt32_t
 
	$Õc32xx_h˛k
()

84 
uöt32_t
 
pwr_˘æ
 = 
LPC32XX_PWR_CTRL
;

85 
uöt32_t
 
h˛k
 = 0;

87 i‡((
pwr_˘æ
 & 
PWR_HCLK_USES_PERIPH_CLK
) != 0) {

88 
h˛k
 = 
	`Õc32xx_≥rùh_˛k
();

90 i‡((
pwr_˘æ
 & 
PWR_NORMAL_RUN_MODE
) != 0) {

91 
uöt32_t
 
h˛kdiv_˘æ
 = 
LPC32XX_HCLKDIV_CTRL
;

92 
uöt32_t
 
div
 = 1U << 
	`HCLK_DIV_HCLK_GET
(
h˛kdiv_˘æ
);

94 
h˛k
 = 
	`Õc32xx_h˛k∂l_˛k
(Ë/ 
div
;

96 
h˛k
 = 
	`Õc32xx_sys˛k
();

100  
h˛k
;

101 
	}
}

103 
uöt32_t
 
	$Õc32xx_¨m_˛k
()

105 
uöt32_t
 
pwr_˘æ
 = 
LPC32XX_PWR_CTRL
;

106 
uöt32_t
 
¨m_˛k
 = 0;

108 i‡((
pwr_˘æ
 & 
PWR_HCLK_USES_PERIPH_CLK
) != 0) {

109 
¨m_˛k
 = 
	`Õc32xx_≥rùh_˛k
();

111 i‡((
pwr_˘æ
 & 
PWR_NORMAL_RUN_MODE
) != 0) {

112 
¨m_˛k
 = 
	`Õc32xx_h˛k∂l_˛k
();

114 
¨m_˛k
 = 
	`Õc32xx_sys˛k
();

118  
¨m_˛k
;

119 
	}
}

121 
uöt32_t
 
	$Õc32xx_ddøm_˛k
()

123 
uöt32_t
 
h˛kdiv_˘æ
 = 
LPC32XX_HCLKDIV_CTRL
;

124 
uöt32_t
 
div
 = 
	`HCLK_DIV_DDRAM_CLK_GET
(
h˛kdiv_˘æ
);

125 
uöt32_t
 
ddøm_˛k
 = 0;

127 i‡(
div
 != 0) {

128 
uöt32_t
 
pwr_˘æ
 = 
LPC32XX_PWR_CTRL
;

130 i‡((
pwr_˘æ
 & 
PWR_NORMAL_RUN_MODE
) != 0) {

131 
ddøm_˛k
 = 
	`Õc32xx_h˛k∂l_˛k
();

133 
ddøm_˛k
 = 
	`Õc32xx_sys˛k
();

136 
ddøm_˛k
 /
div
;

139  
ddøm_˛k
;

140 
	}
}

	@src/lib/libbsp/arm/lpc32xx/misc/timer.c

22 
	~<πems.h
>

23 
	~<πems/btimî.h
>

25 
	~<b•.h
>

27 
uöt32_t
 
	gbíchm¨k_timî_ba£
;

29 
	$bíchm¨k_timî_öôülize
()

31 
bíchm¨k_timî_ba£
 = 
	`Õc32xx_timî
();

32 
	}
}

34 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
()

36  
	`Õc32xx_timî
(Ë- 
bíchm¨k_timî_ba£
;

37 
	}
}

39 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(
boﬁ
 
föd_avîage_ovîhód
)

42 
	}
}

	@src/lib/libbsp/arm/lpc32xx/rtc/rtc-config.c

23 
	~<libchù/πc.h
>

25 
	~<b•.h
>

26 
	~<b•/Õc32xx.h
>

28 
	#LPC32XX_RTC_COUNT
 1U

	)

30 
	#LPC32XX_RTC_COUNTER_DELTA
 0xffffff„U

	)

32 
	#LPC32XX_RTC_KEY
 0xb5c13f27U

	)

34 
	#LPC32XX_RTC_CTRL_FORCE_ONSW
 (1U << 7)

	)

35 
	#LPC32XX_RTC_CTRL_STOP
 (1U << 6)

	)

36 
	#LPC32XX_RTC_CTRL_RESET
 (1U << 4)

	)

37 
	#LPC32XX_RTC_CTRL_MATCH_1_ONSW
 (1U << 3)

	)

38 
	#LPC32XX_RTC_CTRL_MATCH_0_ONSW
 (1U << 2)

	)

39 
	#LPC32XX_RTC_CTRL_MATCH_1_INTR
 (1U << 1)

	)

40 
	#LPC32XX_RTC_CTRL_MATCH_0_INTR
 (1U << 0)

	)

42 
	$Õc32xx_πc_£t
(
uöt32_t
 
vÆ
)

44 
i
 = 
	`Õc32xx_¨m_˛k
(Ë/ 
LPC32XX_OSCILLATOR_RTC
;

46 
Õc32xx
.
πc
.
˘æ
 |
LPC32XX_RTC_CTRL_STOP
;

47 
Õc32xx
.
πc
.
ucou¡
 = 
vÆ
;

48 
Õc32xx
.
πc
.
dcou¡
 = 
LPC32XX_RTC_COUNTER_DELTA
 - 
vÆ
;

49 
Õc32xx
.
πc
.
˘æ
 &~
LPC32XX_RTC_CTRL_STOP
;

52 
i
 != 0) {

53 
__asm__
 volatile ("nop");

54 --
i
;

56 
	}
}

58 
	$Õc32xx_πc_ª£t
()

60 
Õc32xx
.
πc
.
˘æ
 = 
LPC32XX_RTC_CTRL_RESET
;

61 
Õc32xx
.
πc
.
˘æ
 = 0;

62 
Õc32xx
.
πc
.
key
 = 
LPC32XX_RTC_KEY
;

63 
	`Õc32xx_πc_£t
(0);

64 
	}
}

66 
	$Õc32xx_πc_öôülize
(
mö‹
)

68 
uöt32_t
 
up_fú°
 = 0;

69 
uöt32_t
 
up_£c⁄d
 = 0;

70 
uöt32_t
 
down_fú°
 = 0;

71 
uöt32_t
 
down_£c⁄d
 = 0;

73 i‡(
Õc32xx
.
πc
.
key
 !
LPC32XX_RTC_KEY
) {

74 
	`Õc32xx_πc_ª£t
();

78 
up_fú°
 = 
Õc32xx
.
πc
.
ucou¡
;

79 
down_fú°
 = 
Õc32xx
.
πc
.
dcou¡
;

80 
up_£c⁄d
 = 
Õc32xx
.
πc
.
ucou¡
;

81 
down_£c⁄d
 = 
Õc32xx
.
πc
.
dcou¡
;

82 } 
up_fú°
 !
up_£c⁄d
 || 
down_fú°
 !
down_£c⁄d
);

84 i‡(
up_fú°
 + 
down_fú°
 !
LPC32XX_RTC_COUNTER_DELTA
) {

85 
	`Õc32xx_πc_ª£t
();

87 
	}
}

89 
	$Õc32xx_πc_gë_time
(
mö‹
, 
πems_time_of_day
 *
tod
)

91 
timevÆ
 
now
 = {

92 .
tv_£c
 = 
Õc32xx
.
πc
.
ucou¡
,

93 .
tv_u£c
 = 0

95 
tm
 
time
;

97 
	`gmtime_r
(&
now
.
tv_£c
, &
time
);

99 
tod
->
yór
 = 
time
.
tm_yór
 + 1900;

100 
tod
->
m⁄th
 = 
time
.
tm_m⁄
 + 1;

101 
tod
->
day
 = 
time
.
tm_mday
;

102 
tod
->
hour
 = 
time
.
tm_hour
;

103 
tod
->
möuã
 = 
time
.
tm_mö
;

104 
tod
->
£c⁄d
 = 
time
.
tm_£c
;

105 
tod
->
ticks
 = 0;

107  
RTEMS_SUCCESSFUL
;

108 
	}
}

110 
	$Õc32xx_πc_£t_time
(
mö‹
, c⁄° 
πems_time_of_day
 *
tod
)

112 
	`Õc32xx_πc_£t
(
	`_TOD_To_£c⁄ds
(
tod
));

115 
	}
}

117 
boﬁ
 
	$Õc32xx_πc_¥obe
(
mö‹
)

119  
åue
;

120 
	}
}

122 c⁄° 
πc_‚s
 
	gÕc32xx_πc_›s
 = {

123 .
devi˚Inôülize
 = 
Õc32xx_πc_öôülize
,

124 .
	gdevi˚GëTime
 = 
Õc32xx_πc_gë_time
,

125 .
	gdevi˚SëTime
 = 
Õc32xx_πc_£t_time


128 
size_t
 
	gRTC_Cou¡
 = 
LPC32XX_RTC_COUNT
;

130 
πems_devi˚_mö‹_numbî
 
	gRTC_Mö‹
 = 0;

132 
πc_tbl
 
	gRTC_TabÀ
 [
LPC32XX_RTC_COUNT
] = {

134 .
sDevi˚Name
 = "/dev/rtc",

135 .
	gdevi˚Ty≥
 = 
RTC_CUSTOM
,

136 .
	gpDevi˚Fns
 = &
Õc32xx_πc_›s
,

137 .
	gdevi˚Probe
 = 
Õc32xx_πc_¥obe
,

138 .
	gpDevi˚P¨ams
 = 
NULL
,

139 .
	gulCålP‹t1
 = 0,

140 .
	gulD©aP‹t
 = 0,

141 .
	ggëRegi°î
 = 
NULL
,

142 .
	g£tRegi°î
 = 
NULL


	@src/lib/libbsp/arm/lpc32xx/startup/bspreset.c

23 
	~<°dboﬁ.h
>

25 
	~<b•›ts.h
>

26 
	~<b•/boŸˇrd.h
>

27 
	~<b•/Õc32xx.h
>

29 
	$w©chdog_ª£t
()

31 #ifde‡
LPC32XX_ENABLE_WATCHDOG_RESET


32 
LPC32XX_TIMCLK_CTRL
 |
TIMCLK_CTRL_WDT
;

33 
Õc32xx
.
wdt
.
m˘æ
 |
WDTTIM_MCTRL_M_RES1
 | 
WDTTIM_MCTRL_M_RES2
;

34 
Õc32xx
.
wdt
.
emr
 = 
	`WDTTIM_EMR_MATCH_CTRL_SET
(lpc32xx.wdt.emr, 0x2);

35 
Õc32xx
.
wdt
.
˘æ
 |
WDTTIM_CTRL_COUNT_ENAB
;

36 
Õc32xx
.
wdt
.
m©ch0
 = 1;

37 
Õc32xx
.
wdt
.
cou¡î
 = 0;

39 
	}
}

41 
	$b•_ª£t
( )

43 
	`w©chdog_ª£t
();

45 
åue
) {

48 
	}
}

	@src/lib/libbsp/arm/lpc32xx/startup/bspstart.c

23 
	~<πems/cou¡î.h
>

25 
	~<b•.h
>

26 
	~<b•/boŸˇrd.h
>

27 
	~<b•/úq-gíîic.h
>

29 
CPU_Cou¡î_ticks
 
	$_CPU_Cou¡î_ªad
()

31  
	`Õc32xx_timî
();

32 
	}
}

34 
	$b•_°¨t
()

36 
	`πems_cou¡î_öôülize_c⁄vîãr
(
LPC32XX_PERIPH_CLK
);

37 
	`b•_öãºu±_öôülize
();

38 
	}
}

	@src/lib/libbsp/arm/lpc32xx/startup/bspstarthooks.c

23 
	#ARM_CP15_TEXT_SECTION
 
BSP_START_TEXT_SECTION


	)

25 
	~<b•.h
>

26 
	~<b•/°¨t.h
>

27 
	~<b•/Õc32xx.h
>

28 
	~<b•/mmu.h
>

29 
	~<b•/¨m-˝15-°¨t.h
>

30 
	~<b•/lökî-symbﬁs.h
>

31 
	~<b•/u¨t-ouçut-ch¨.h
>

33 #ifde‡
LPC32XX_DISABLE_READ_WRITE_DATA_CACHE


34 
	#LPC32XX_MMU_READ_WRITE_DATA
 
LPC32XX_MMU_READ_WRITE


	)

36 
	#LPC32XX_MMU_READ_WRITE_DATA
 
LPC32XX_MMU_READ_WRITE_CACHED


	)

39 #ifde‡
LPC32XX_DISABLE_READ_ONLY_PROTECTION


40 
	#LPC32XX_MMU_READ_ONLY_DATA
 
LPC32XX_MMU_READ_WRITE_CACHED


	)

41 
	#LPC32XX_MMU_CODE
 
LPC32XX_MMU_READ_WRITE_CACHED


	)

43 
	#LPC32XX_MMU_READ_ONLY_DATA
 
LPC32XX_MMU_READ_ONLY_CACHED


	)

44 
	#LPC32XX_MMU_CODE
 
LPC32XX_MMU_READ_ONLY_CACHED


	)

47 #i‚de‡
LPC32XX_DISABLE_MMU


48 c⁄° 
BSP_START_DATA_SECTION
 
¨m_˝15_°¨t_£˘i⁄_c⁄fig


49 
	gÕc32xx_mmu_c⁄fig_èbÀ
 [] = {

51 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_ãxt_begö
,

52 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_ãxt_íd
,

53 .
	gÊags
 = 
LPC32XX_MMU_CODE


55 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_d©a_begö
,

56 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_d©a_íd
,

57 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


58 #ifde‡
LPC32XX_SCRATCH_AREA_SIZE


60 .
	gbegö
 = (
uöt32_t
Ë&
Õc32xx_s¸©ch_¨ó
 [0],

61 .
	gíd
 = (
uöt32_t
Ë&
Õc32xx_s¸©ch_¨ó
 [
LPC32XX_SCRATCH_AREA_SIZE
],

62 .
	gÊags
 = 
LPC32XX_MMU_READ_ONLY_DATA


65 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_°¨t_begö
,

66 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_°¨t_íd
,

67 .
	gÊags
 = 
LPC32XX_MMU_CODE


69 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_ve˘‹_begö
,

70 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_ve˘‹_íd
,

71 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_CACHED


73 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_ãxt_begö
,

74 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_ãxt_íd
,

75 .
	gÊags
 = 
LPC32XX_MMU_CODE


77 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_rod©a_begö
,

78 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_rod©a_íd
,

79 .
	gÊags
 = 
LPC32XX_MMU_READ_ONLY_DATA


81 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_d©a_begö
,

82 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_d©a_íd
,

83 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


85 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_bss_begö
,

86 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_bss_íd
,

87 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


89 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_w‹k_begö
,

90 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_w‹k_íd
,

91 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


93 .
	gbegö
 = (
uöt32_t
Ë
b•_£˘i⁄_°ack_begö
,

94 .
	gíd
 = (
uöt32_t
Ë
b•_£˘i⁄_°ack_íd
,

95 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


97 .
	gbegö
 = 0x0U,

98 .
	gíd
 = 0x100000U,

99 .
	gÊags
 = 
LPC32XX_MMU_READ_ONLY_CACHED


101 .
	gbegö
 = 0x20000000U,

102 .
	gíd
 = 0x200c0000U,

103 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE


105 .
	gbegö
 = 0x30000000U,

106 .
	gíd
 = 0x32000000U,

107 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE


109 .
	gbegö
 = 0x40000000U,

110 .
	gíd
 = 0x40100000U,

111 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE


113 .
	gbegö
 = (
uöt32_t
Ë
Õc32xx_magic_zîo_begö
,

114 .
	gíd
 = (
uöt32_t
Ë
Õc32xx_magic_zîo_íd
,

115 .
	gÊags
 = 
LPC32XX_MMU_READ_WRITE_DATA


120 
BSP_START_TEXT_SECTION
 
	$£tup_mmu_™d_ˇche
()

122 
uöt32_t
 
˘æ
 = 
	`¨m_˝15_°¨t_£tup_mmu_™d_ˇche
(

123 
ARM_CP15_CTRL_I
 | 
ARM_CP15_CTRL_R
 | 
ARM_CP15_CTRL_C


124 | 
ARM_CP15_CTRL_V
 | 
ARM_CP15_CTRL_M
,

125 
ARM_CP15_CTRL_S
 | 
ARM_CP15_CTRL_A


128 
	`¨m_˝15_ˇche_övÆid©e
();

130 #i‚de‡
LPC32XX_DISABLE_MMU


131 
	`¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ_™d_íabÀ_mmu_™d_ˇche
(

132 
˘æ
,

133 (
uöt32_t
 *Ë
b•_å™¶©i⁄_èbÀ_ba£
,

134 
LPC32XX_MMU_CLIENT_DOMAIN
,

135 &
Õc32xx_mmu_c⁄fig_èbÀ
 [0],

136 
	`RTEMS_ARRAY_SIZE
(
Õc32xx_mmu_c⁄fig_èbÀ
)

139 
	}
}

141 
BSP_START_TEXT_SECTION
 
boﬁ
 
	$Õc32xx_°¨t_∂l_£tup
(

142 
uöt32_t
 
h˛k∂l_˘æ
,

143 
uöt32_t
 
h˛kdiv_˘æ
,

144 
boﬁ
 
f‹˚


147 
uöt32_t
 
pwr_˘æ
 = 
LPC32XX_PWR_CTRL
;

148 
boﬁ
 
£âögs_ok
 =

149 ((
LPC32XX_HCLKPLL_CTRL
 ^ 
h˛k∂l_˘æ
Ë& 
	`BSP_MSK32
(1, 16)) == 0

150 && ((
LPC32XX_HCLKDIV_CTRL
 ^ 
h˛kdiv_˘æ
Ë& 
	`BSP_MSK32
(0, 8)) == 0;

152 i‡((
pwr_˘æ
 & 
PWR_NORMAL_RUN_MODE
Ë=0 || (!
£âögs_ok
 && 
f‹˚
)) {

154 
LPC32XX_PWR_CTRL
 = 
pwr_˘æ
 & ~
PWR_NORMAL_RUN_MODE
;

157 
LPC32XX_HCLKPLL_CTRL
 = 
h˛k∂l_˘æ
;

158 (
LPC32XX_HCLKPLL_CTRL
 & 
HCLK_PLL_LOCK
) == 0) {

163 
LPC32XX_HCLKDIV_CTRL
 = 
h˛kdiv_˘æ
;

166 
LPC32XX_PWR_CTRL
 = 
pwr_˘æ
 | 
PWR_NORMAL_RUN_MODE
;

169  
£âögs_ok
;

170 
	}
}

172 #i‡
LPC32XX_OSCILLATOR_MAIN
 != 13000000U

176 
BSP_START_TEXT_SECTION
 
	$£tup_∂l
()

178 
uöt32_t
 
h˛k∂l_˘æ
 = 
LPC32XX_HCLKPLL_CTRL_INIT_VALUE
;

179 
uöt32_t
 
h˛kdiv_˘æ
 = 
LPC32XX_HCLKDIV_CTRL_INIT_VALUE
;

181 
	`Õc32xx_°¨t_∂l_£tup
(
h˛k∂l_˘æ
, 
h˛kdiv_˘æ
, 
Ál£
);

182 
	}
}

184 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_0
()

186 
	`£tup_∂l
();

187 
	}
}

189 
BSP_START_TEXT_SECTION
 
	$°›_dma_a˘ivôõs
()

191 #ifde‡
LPC32XX_STOP_GPDMA


192 
LPC32XX_DO_STOP_GPDMA
;

195 #ifde‡
LPC32XX_STOP_ETHERNET


196 
LPC32XX_DO_STOP_ETHERNET
;

199 #ifde‡
LPC32XX_STOP_USB


200 
LPC32XX_DO_STOP_USB
;

202 
	}
}

204 
BSP_START_TEXT_SECTION
 
	$£tup_u¨ts
()

206 
LPC32XX_UART_CTRL
 = 0x0;

207 
LPC32XX_UART_LOOP
 = 0x0;

209 #ifde‡
LPC32XX_UART_5_BAUD


210 
LPC32XX_UARTCLK_CTRL
 |= 1U << 2;

211 
LPC32XX_U5CLK
 = 
LPC32XX_CONFIG_U5CLK
;

212 
LPC32XX_UART_CLKMODE
 = 
	`BSP_FLD32SET
(LPC32XX_UART_CLKMODE, 0x2, 8, 9);

213 
	`BSP_CONSOLE_UART_INIT
(0x01);

215 
	}
}

217 
BSP_START_TEXT_SECTION
 
	$£tup_timî
()

219 vﬁ©ûê
Õc_timî
 *
timî
 = 
LPC32XX_STANDARD_TIMER
;

221 
LPC32XX_TIMCLK_CTRL1
 = (1U << 2) | (1U << 3);

223 
timî
->
t¸
 = 
LPC_TIMER_TCR_RST
;

224 
timî
->
˘¸
 = 0x0;

225 
timî
->
¥
 = 0x0;

226 
timî
->
ú
 = 0xff;

227 
timî
->
m¸
 = 0x0;

228 
timî
->
c¸
 = 0x0;

229 
timî
->
t¸
 = 
LPC_TIMER_TCR_EN
;

230 
	}
}

232 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_1
()

234 
	`°›_dma_a˘ivôõs
();

235 
	`b•_°¨t_c›y_£˘i⁄s
();

236 
	`£tup_mmu_™d_ˇche
();

237 
	`£tup_u¨ts
();

238 
	`£tup_timî
();

239 
	`b•_°¨t_˛ór_bss
();

240 
	}
}

	@src/lib/libbsp/arm/shared/abort/abort.c

23 
	~<πems/sy°em.h
>

24 
	~<πems.h
>

25 
	~<πems/b•Io.h
>

26 
	~"ab‹t.h
"

28 
uöt32_t
 
	gg_d©a_ab‹t_˙t
 = 0;

30 
uöt32_t
 
	gg_d©a_ab‹t_ö¢_li°
[1024];

33 *
	g_¥öt_fuŒ_c⁄ãxt_mode2txt
[0x20]={

43 
	$_¥öt_fuŒ_c⁄ãxt
(
uöt32_t
 
•§
)

45 *
mode
;

46 
uöt32_t
 
¥ev_•
,
¥ev_Ã
,
˝§
,
¨m_swôch_ªg
;

47 
i
;

49 
	`¥ötk
("a˘ivêthªadÅhªad 0x%08x\n", 
	`πems_èsk_£lf
());

51 
mode
=
_¥öt_fuŒ_c⁄ãxt_mode2txt
[
•§
&0x1f];

52 if(!
mode
) mode="unknown";

54 
__asm__
 vﬁ©ûê(
ARM_SWITCH_TO_ARM


61 
ARM_SWITCH_BACK


62 : [
¨m_swôch_ªg
] "=&r" (¨m_swôch_ªg), [
¥ev_•
] "=&r" (¥ev_•), [
¥ev_Ã
] "=&r" (prev_lr),

63 [
˝§
] "=&r" (cpsr)

64 : [
•§
] "r" (spsr)

67 
	`¥ötk
("Previous sp=0x%08xÜr=0x%08xándáctual cpsr=%08x\n",

68 
¥ev_•
, 
¥ev_Ã
, 
˝§
);

70 
i
=0;i<48;){

71 
	`¥ötk
(" 0x%08x",((
uöt32_t
*)
¥ev_•
)[
i
++]);

72 if((
i
%6) == 0)

73 
	`¥ötk
("\n");

76 
	}
}

85 
	$do_d©a_ab‹t
(

86 
uöt32_t
 
ö¢
,

87 
uöt32_t
 
•§
,

88 
C⁄ãxt_C⁄åﬁ
 *
˘x


92 
uöt8_t
 
decode
;

93 
uöt8_t
 
ö¢_ty≥
;

94 
πems_öãºu±_Àvñ
 
Àvñ
;

96 
g_d©a_ab‹t_ö¢_li°
[
g_d©a_ab‹t_˙t
 & 0x3ff] = 
˘x
->
ªgi°î_Ã
 - 8;

97 
g_d©a_ab‹t_˙t
++;

99 
decode
 = ((
ö¢
 >> 20) & 0xff);

101 
ö¢_ty≥
 = 
decode
 & 
INSN_MASK
;

102 
ö¢_ty≥
) {

103 
INSN_STM1
:

104 
	`¥ötk
("\n\nINSN_STM1\n");

106 
INSN_STM2
:

107 
	`¥ötk
("\n\nINSN_STM2\n");

109 
INSN_STR
:

110 
	`¥ötk
("\n\nINSN_STR\n");

112 
INSN_STRB
:

113 
	`¥ötk
("\n\nINSN_STRB\n");

115 
INSN_LDM1
:

116 
	`¥ötk
("\n\nINSN_LDM1\n");

118 
INSN_LDM23
:

119 
	`¥ötk
("\n\nINSN_LDM23\n");

121 
INSN_LDR
:

122 
	`¥ötk
("\n\nINSN_LDR\n");

124 
INSN_LDRB
:

125 
	`¥ötk
("\n\nINSN_LDRB\n");

128 
	`¥ötk
("\n\nUnrecognized instruction\n");

132 
	`¥ötk
("data_abortátáddress 0x%x, instruction: 0x%x, spsr = 0x%x\n",

133 
˘x
->
ªgi°î_Ã
 - 8, 
ö¢
, 
•§
);

135 
	`_¥öt_fuŒ_c⁄ãxt
(
•§
);

138 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

139 (Ë
Àvñ
;

144 
	}
}

	@src/lib/libbsp/arm/shared/abort/abort.h

17 #i‚de‡
_BSPABORT_H


18 
	#_BSPABORT_H


	)

20 
	~<πems/sy°em.h
>

21 
	~<πems.h
>

22 
	~<πems/b•Io.h
>

24 
	#INSN_MASK
 0xc5

	)

26 
	#INSN_STM1
 0x80

	)

27 
	#INSN_STM2
 0x84

	)

28 
	#INSN_STR
 0x40

	)

29 
	#INSN_STRB
 0x44

	)

31 
	#INSN_LDM1
 0x81

	)

32 
	#INSN_LDM23
 0x85

	)

33 
	#INSN_LDR
 0x41

	)

34 
	#INSN_LDRB
 0x45

	)

36 
	#GET_RD
(
x
Ë((x & 0x0000f000Ë>> 12)

	)

37 
	#GET_RN
(
x
Ë((x & 0x000f0000Ë>> 16)

	)

39 
	#GET_U
(
x
Ë((x & 0x00800000Ë>> 23)

	)

40 
	#GET_I
(
x
Ë((x & 0x02000000Ë>> 25)

	)

42 
	#GET_REG
(
r
, 
˘x
Ë(((
uöt32_t
 *)˘x)[r])

	)

43 
	#SET_REG
(
r
, 
˘x
, 
v
Ë(((
uöt32_t
 *)˘x)[r] = v)

	)

44 
	#GET_OFFSET
(
ö¢
Ë(ö¢ & 0xfff)

	)

49 
_¥öt_fuŒ_c⁄ãxt
(
uöt32_t
);

50 
do_d©a_ab‹t
(
uöt32_t
, uöt32_t, 
C⁄ãxt_C⁄åﬁ
 *);

	@src/lib/libbsp/arm/shared/abort/simple_abort.c

21 
	~<πems/sy°em.h
>

22 
	~<πems.h
>

23 
	~<πems/b•Io.h
>

24 
	~"ab‹t.h
"

26 *
	g_¥öt_fuŒ_c⁄ãxt_mode2txt
[0x10]={

36 
	$_¥öt_fuŒ_c⁄ãxt
(
uöt32_t
 
•§
)

38 *
mode
;

39 
uöt32_t
 
¥ev_•
,
¥ev_Ã
,
˝§
,
¨m_swôch_ªg
;

40 
i
, 
j
;

42 
	`¥ötk
("a˘ivêthªadÅhªad 0x%08x\n", 
	`πems_èsk_£lf
());

44 
mode
=
_¥öt_fuŒ_c⁄ãxt_mode2txt
[(
•§
&0x1f)-0x10];

45 if(!
mode
) mode="unknown";

47 
__asm__
 volatile (

48 
ARM_SWITCH_TO_ARM


55 
ARM_SWITCH_BACK


56 : [
¥ev_•
] "=&r" (¥ev_•), [
¥ev_Ã
] "=&r" (prev_lr),

57 [
˝§
] "=&r" (˝§), [
¨m_swôch_ªg
] "=&r" (arm_switch_reg)

58 : [
•§
] "r" (spsr)

62 
	`¥ötk
(

64 
¥ev_•
,

65 
¥ev_Ã
,

66 
˝§


69 
j
=0;

70 
i
=0;i<48;) {

71 
	`¥ötk
(" 0x%08x",((
uöt32_t
*)
¥ev_•
)[
i
++]);

72 
j
++;

74 if((
j
-6)==0) {

75 
	`¥ötk
("\n");

76 
j
=0;

79 
	}
}

88 
	$do_d©a_ab‹t
(

89 
uöt32_t
 
ö¢
,

90 
uöt32_t
 
•§
,

91 
C⁄ãxt_C⁄åﬁ
 *
˘x


96 
uöt8_t
 
decode
;

97 
uöt8_t
 
ö¢_ty≥
;

98 
πems_öãºu±_Àvñ
 
Àvñ
;

100 
decode
 = ((
ö¢
 >> 20) & 0xff);

102 
ö¢_ty≥
 = 
decode
 & 
INSN_MASK
;

103 
ö¢_ty≥
) {

104 
INSN_STM1
:

105 
	`¥ötk
("\n\nINSN_STM1\n");

107 
INSN_STM2
:

108 
	`¥ötk
("\n\nINSN_STM2\n");

110 
INSN_STR
:

111 
	`¥ötk
("\n\nINSN_STR\n");

113 
INSN_STRB
:

114 
	`¥ötk
("\n\nINSN_STRB\n");

116 
INSN_LDM1
:

117 
	`¥ötk
("\n\nINSN_LDM1\n");

119 
INSN_LDM23
:

120 
	`¥ötk
("\n\nINSN_LDM23\n");

122 
INSN_LDR
:

123 
	`¥ötk
("\n\nINSN_LDR\n");

125 
INSN_LDRB
:

126 
	`¥ötk
("\n\nINSN_LDRB\n");

129 
	`¥ötk
("\n\nUnrecognized instruction\n");

133 
	`¥ötk
("data_abortátáddress 0x%x, instruction: 0x%x, spsr = 0x%x\n",

134 
˘x
->
ªgi°î_Ã
 - 8, 
ö¢
, 
•§
);

136 
	`_¥öt_fuŒ_c⁄ãxt
(
•§
);

139 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

140 ()
Àvñ
;

145 
	}
}

	@src/lib/libbsp/arm/shared/arm-a9mpcore-clock-config.c

15 
	~<b•.h
>

16 
	~<b•/Áèl.h
>

17 
	~<b•/úq.h
>

18 
	~<b•/¨m-a9mpc‹e-ªgs.h
>

19 
	~<b•/¨m-a9mpc‹e-˛ock.h
>

20 
	~<πems/timecou¡î.h
>

22 
	#A9MPCORE_GT
 ((vﬁ©ûê
a9mpc‹e_gt
 *Ë
BSP_ARM_A9MPCORE_GT_BASE
)

	)

24 
timecou¡î
 
	ga9mpc‹e_tc
;

27 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

29 
__©åibuã__
 ((
wók
)Ë
uöt32_t
 
	$a9mpc‹e_˛ock_≥rùh˛k
()

32  
BSP_ARM_A9MPCORE_PERIPHCLK
;

33 
	}
}

35 
	$a9mpc‹e_˛ock_©_tick
()

37 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = 
A9MPCORE_GT
;

39 
gt
->
úq°
 = 
A9MPCORE_GT_IRQST_EFLG
;

40 
	}
}

42 
	$a9mpc‹e_˛ock_h™dÀr_ö°Æl
()

44 
πems_°©us_code
 
sc
;

46 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

47 
A9MPCORE_IRQ_GT
,

49 
RTEMS_INTERRUPT_UNIQUE
,

50 (
πems_öãºu±_h™dÀr
Ë
Clock_i§
,

51 
NULL


53 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

54 
	`b•_Áèl
(
BSP_ARM_A9MPCORE_FATAL_CLOCK_IRQ_INSTALL
);

56 
	}
}

58 
uöt64_t
 
	$a9mpc‹e_˛ock_gë_cou¡î
(vﬁ©ûê
a9mpc‹e_gt
 *
gt
)

60 
uöt32_t
 
˛
;

61 
uöt32_t
 
cu1
;

62 
uöt32_t
 
cu2
;

65 
cu1
 = 
gt
->
˙åuµî
;

66 
˛
 = 
gt
->
˙ålowî
;

67 
cu2
 = 
gt
->
˙åuµî
;

68 } 
cu1
 !
cu2
);

70  ((
uöt64_t
Ë
cu2
 << 32Ë| 
˛
;

71 
	}
}

73 
uöt32_t
 
	$a9mpc‹e_˛ock_gë_timecou¡
(
timecou¡î
 *
tc
)

75 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = 
A9MPCORE_GT
;

77  
gt
->
˙ålowî
;

78 
	}
}

80 
	$a9mpc‹e_˛ock_öôülize
()

82 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = 
A9MPCORE_GT
;

83 
uöt64_t
 
≥rùh˛k
 = 
	`a9mpc‹e_˛ock_≥rùh˛k
();

84 
uöt64_t
 
us_≥r_tick
 = 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
();

85 
uöt32_t
 
öãrvÆ
 = (uöt32_tË((
≥rùh˛k
 * 
us_≥r_tick
) / 1000000);

86 
uöt64_t
 
cmpvÆ
;

88 
gt
->
˘æ
 &
A9MPCORE_GT_CTRL_TMR_EN
;

89 
gt
->
úq°
 = 
A9MPCORE_GT_IRQST_EFLG
;

91 
cmpvÆ
 = 
	`a9mpc‹e_˛ock_gë_cou¡î
(
gt
);

92 
cmpvÆ
 +
öãrvÆ
;

94 
gt
->
cmpvÆlowî
 = (
uöt32_t
Ë
cmpvÆ
;

95 
gt
->
cmpvÆuµî
 = (
uöt32_t
Ë(
cmpvÆ
 >> 32);

96 
gt
->
autoöc
 = 
öãrvÆ
;

98 
gt
->
˘æ
 = 
A9MPCORE_GT_CTRL_AUTOINC_EN


99 | 
A9MPCORE_GT_CTRL_IRQ_EN


100 | 
A9MPCORE_GT_CTRL_COMP_EN


101 | 
A9MPCORE_GT_CTRL_TMR_EN
;

103 
a9mpc‹e_tc
.
tc_gë_timecou¡
 = 
a9mpc‹e_˛ock_gë_timecou¡
;

104 
a9mpc‹e_tc
.
tc_cou¡î_mask
 = 0xffffffff;

105 
a9mpc‹e_tc
.
tc_‰equícy
 = 
≥rùh˛k
;

106 
a9mpc‹e_tc
.
tc_quÆôy
 = 
RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER
;

107 
	`πems_timecou¡î_ö°Æl
(&
a9mpc‹e_tc
);

108 
	}
}

110 
CPU_Cou¡î_ticks
 
	$_CPU_Cou¡î_ªad
()

112 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = 
A9MPCORE_GT
;

114  
gt
->
˙ålowî
;

115 
	}
}

117 
	$a9mpc‹e_˛ock_˛ónup_i§
(*
¨g
)

119 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = 
A9MPCORE_GT
;

121 (Ë
¨g
;

123 
gt
->
˘æ
 &
A9MPCORE_GT_CTRL_TMR_EN
;

124 
gt
->
úq°
 = 
A9MPCORE_GT_IRQST_EFLG
;

125 
	}
}

127 
	$a9mpc‹e_˛ock_˛ónup
()

129 
πems_°©us_code
 
sc
;

137 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

138 
A9MPCORE_IRQ_GT
,

140 
RTEMS_INTERRUPT_REPLACE
,

141 
a9mpc‹e_˛ock_˛ónup_i§
,

142 
NULL


144 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

145 
	`b•_Áèl
(
BSP_ARM_A9MPCORE_FATAL_CLOCK_IRQ_REMOVE
);

147 
	}
}

149 
	#Clock_drivî_suµ‹t_©_tick
() \

150 
	`a9mpc‹e_˛ock_©_tick
()

	)

152 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

153 
	`a9mpc‹e_˛ock_öôülize
()

	)

155 
	#Clock_drivî_suµ‹t_ö°Æl_i§
(
i§
, 
ﬁd_i§
) \

157 
	`a9mpc‹e_˛ock_h™dÀr_ö°Æl
(); \

158 
ﬁd_i§
 = 
NULL
; \

159 } 0)

	)

161 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

162 
	`a9mpc‹e_˛ock_˛ónup
()

	)

165 
	~"../../sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libbsp/arm/shared/arm-a9mpcore-smp.c

15 
	~<as£π.h
>

17 
	~<πems/sc‹e/smpim∂.h
>

19 
	~<lib˝u/¨m-˝15.h
>

21 
	~<b•/úq.h
>

22 
	~<b•/lökî-symbﬁs.h
>

24 
	$b•_öãr_¥o˚ss‹_öãºu±
(*
¨g
)

26 
	`_SMP_I¡î_¥o˚ss‹_öãºu±_h™dÀr
();

27 
	}
}

29 
uöt32_t
 
	$_CPU_SMP_Inôülize
()

31 
uöt32_t
 
h¨dw¨e_cou¡
 = 
	`¨m_gic_úq_¥o˚ss‹_cou¡
();

32 
uöt32_t
 
lökî_cou¡
 = (uöt32_tË
b•_¥o˚ss‹_cou¡
;

34  
h¨dw¨e_cou¡
 <
lökî_cou¡
 ? hardware_count :Üinker_count;

35 
	}
}

37 
	$_CPU_SMP_FöÆize_öôüliz©i⁄
(
uöt32_t
 
˝u_cou¡
)

39 i‡(
˝u_cou¡
 > 0) {

40 
πems_°©us_code
 
sc
;

42 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

43 
ARM_GIC_IRQ_SGI_0
,

45 
RTEMS_INTERRUPT_UNIQUE
,

46 
b•_öãr_¥o˚ss‹_öãºu±
,

47 
NULL


49 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

51 #i‡
	`deföed
(
BSP_DATA_CACHE_ENABLED
Ë|| deföed(
BSP_INSTRUCTION_CACHE_ENABLED
)

53 
	`πems_ˇche_íabÀ_d©a
();

56 
	}
}

58 
	$_CPU_SMP_Pª∑ª_°¨t_mu…ôaskög
( )

61 
	}
}

63 
	$_CPU_SMP_Síd_öãºu±
–
uöt32_t
 
èrgë_¥o˚ss‹_ödex
 )

65 
	`¨m_gic_úq_gíî©e_so·w¨e_úq
(

66 
ARM_GIC_IRQ_SGI_0
,

67 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_ALL_IN_LIST
,

68 (
uöt8_t
Ë(1U << 
èrgë_¥o˚ss‹_ödex
)

70 
	}
}

	@src/lib/libbsp/arm/shared/arm-cp15-set-exception-handler.c

15 
	~<lib˝u/¨m-˝15.h
>

17 
	~<b•/lökî-symbﬁs.h
>

19 
¨m_˝15_£t_ex˚±i⁄_h™dÀr
(

20 
Arm_symbﬁic_ex˚±i⁄_«me
 
ex˚±i⁄
,

21 (*
h™dÀr
)()

24 i‡((Ë
ex˚±i⁄
 < 
MAX_EXCEPTIONS
) {

25 
uöt32_t
 *
˝u_èbÀ
 = (uöt32_à*Ë0 + 
MAX_EXCEPTIONS
;

26 
uöt32_t
 *
múr‹_èbÀ
 = (uöt32_à*Ë
b•_ve˘‹_èbÀ_begö
 + 
MAX_EXCEPTIONS
;

27 
uöt32_t
 
cuºít_h™dÀr
 = 
múr‹_èbÀ
[
ex˚±i⁄
];

29 i‡(
cuºít_h™dÀr
 !(
uöt32_t
Ë
h™dÀr
) {

30 
size_t
 
èbÀ_size
 = 
MAX_EXCEPTIONS
 * (
uöt32_t
);

31 
uöt32_t
 
˛s
 = 
	`¨m_˝15_gë_mö_ˇche_löe_size
();

32 
uöt32_t
 
˘æ
;

33 
πems_öãºu±_Àvñ
 
Àvñ
;

35 
	`πems_öãºu±_loˇl_dißbÀ
(
Àvñ
);

37 
˘æ
 = 
	`¨m_˝15_mmu_dißbÀ
(
˛s
);

39 
múr‹_èbÀ
[
ex˚±i⁄
] = (
uöt32_t
Ë
h™dÀr
;

41 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(
múr‹_èbÀ
, 
èbÀ_size
);

47 
	`πems_ˇche_övÆid©e_mu…ùÀ_ö°ru˘i⁄_löes
(
múr‹_èbÀ
, 
èbÀ_size
);

49 
	`πems_ˇche_övÆid©e_mu…ùÀ_ö°ru˘i⁄_löes
(
˝u_èbÀ
, 
èbÀ_size
);

51 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

53 
	`πems_öãºu±_loˇl_íabÀ
(
Àvñ
);

56 
	}
}

	@src/lib/libbsp/arm/shared/arm-cp15-set-ttb-entries.c

15 
	~<lib˝u/¨m-˝15.h
>

17 
uöt32_t
 
	$£t_å™¶©i⁄_èbÀ_íåõs
(

18 c⁄° *
begö
,

19 c⁄° *
íd
,

20 
uöt32_t
 
£˘i⁄_Êags


23 
uöt32_t
 
˛_size
 = 
	`¨m_˝15_gë_mö_ˇche_löe_size
();

24 
uöt32_t
 *
âb
 = 
	`¨m_˝15_gë_å™¶©i⁄_èbÀ_ba£
();

25 
uöt32_t
 
i
 = 
	`ARM_MMU_SECT_GET_INDEX
(
begö
);

26 
uöt32_t
 
õnd
 = 
	`ARM_MMU_SECT_GET_INDEX
(
	`ARM_MMU_SECT_MVA_ALIGN_UP
(
íd
));

27 
uöt32_t
 
ödex_mask
 = (1U << (32 - 
ARM_MMU_SECT_BASE_SHIFT
)) - 1U;

28 
uöt32_t
 
˘æ
;

29 
uöt32_t
 
£˘i⁄_Êags_of_fú°_íåy
;

31 
˘æ
 = 
	`¨m_˝15_mmu_dißbÀ
(
˛_size
);

32 
	`¨m_˝15_éb_övÆid©e
();

33 
£˘i⁄_Êags_of_fú°_íåy
 = 
âb
 [
i
];

35 
i
 !
õnd
) {

36 
uöt32_t
 
addr
 = 
i
 << 
ARM_MMU_SECT_BASE_SHIFT
;

38 
âb
 [
i
] = 
addr
 | 
£˘i⁄_Êags
;

40 
i
 = (ò+ 1UË& 
ödex_mask
;

43 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

45  
£˘i⁄_Êags_of_fú°_íåy
;

46 
	}
}

48 
uöt32_t
 
	$¨m_˝15_£t_å™¶©i⁄_èbÀ_íåõs
(

49 c⁄° *
begö
,

50 c⁄° *
íd
,

51 
uöt32_t
 
£˘i⁄_Êags


54 
πems_öãºu±_Àvñ
 
Àvñ
;

55 
uöt32_t
 
£˘i⁄_Êags_of_fú°_íåy
;

57 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

58 
£˘i⁄_Êags_of_fú°_íåy
 =

59 
	`£t_å™¶©i⁄_èbÀ_íåõs
(
begö
, 
íd
, 
£˘i⁄_Êags
);

60 
	`πems_öãºu±_íabÀ
(
Àvñ
);

62  
£˘i⁄_Êags_of_fú°_íåy
;

63 
	}
}

	@src/lib/libbsp/arm/shared/arm-gic-irq.c

15 
	~<b•/¨m-gic.h
>

17 
	~<πems/sc‹e/¨mv4.h
>

19 
	~<lib˝u/¨m-˝15.h
>

21 
	~<b•/úq.h
>

22 
	~<b•/úq-gíîic.h
>

23 
	~<b•/°¨t.h
>

25 
	#GIC_CPUIF
 ((vﬁ©ûê
gic_˝uif
 *Ë
BSP_ARM_GIC_CPUIF_BASE
)

	)

27 
	#PRIORITY_DEFAULT
 127

	)

29 
	$b•_öãºu±_di•©ch
()

31 vﬁ©ûê
gic_˝uif
 *
˝uif
 = 
GIC_CPUIF
;

32 
uöt32_t
 
iccür
 = 
˝uif
->icciar;

33 
πems_ve˘‹_numbî
 
ve˘‹
 = 
	`GIC_CPUIF_ICCIAR_ACKINTID_GET
(
iccür
);

34 
πems_ve˘‹_numbî
 
•urious
 = 1023;

36 i‡(
ve˘‹
 !
•urious
) {

37 
uöt32_t
 
p§
 = 
	`_ARMV4_Sètus_úq_íabÀ
();

39 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

41 
	`_ARMV4_Sètus_ª°‹e
(
p§
);

43 
˝uif
->
ic˚oú
 = 
iccür
;

45 
	}
}

47 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

49 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

51 i‡(
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

52 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

54 
	`gic_id_íabÀ
(
di°
, 
ve˘‹
);

56 
sc
 = 
RTEMS_INVALID_ID
;

59  
sc
;

60 
	}
}

62 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

64 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

66 i‡(
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

67 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

69 
	`gic_id_dißbÀ
(
di°
, 
ve˘‹
);

71 
sc
 = 
RTEMS_INVALID_ID
;

74  
sc
;

75 
	}
}

77 
ölöe
 
uöt32_t
 
	$gë_id_cou¡
(vﬁ©ûê
gic_di°
 *
di°
)

79 
uöt32_t
 
id_cou¡
 = 
	`GIC_DIST_ICDICTR_IT_LINES_NUMBER_GET
(
di°
->
icdi˘r
);

81 
id_cou¡
 = 32 * (id_count + 1);

82 
id_cou¡
 = id_count <= 1020 ? id_count : 1020;

84  
id_cou¡
;

85 
	}
}

87 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

89 vﬁ©ûê
gic_˝uif
 *
˝uif
 = 
GIC_CPUIF
;

90 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

91 
uöt32_t
 
id_cou¡
 = 
	`gë_id_cou¡
(
di°
);

92 
uöt32_t
 
id
;

94 
	`¨m_˝15_£t_ex˚±i⁄_h™dÀr
(

95 
ARM_EXCEPTION_IRQ
,

96 
_ARMV4_Ex˚±i⁄_öãºu±


99 
id
 = 0; id < 
id_cou¡
; ++id) {

100 
	`gic_id_£t_¥i‹ôy
(
di°
, 
id
, 
PRIORITY_DEFAULT
);

103 
id
 = 32; id < 
id_cou¡
; ++id) {

104 
	`gic_id_£t_èrgës
(
di°
, 
id
, 0x01);

107 
˝uif
->
ic˝mr
 = 
	`GIC_CPUIF_ICCPMR_PRIORITY
(0xff);

108 
˝uif
->
iccb¥
 = 
	`GIC_CPUIF_ICCBPR_BINARY_POINT
(0x0);

109 
˝uif
->
icci¸
 = 
GIC_CPUIF_ICCICR_ENABLE
;

111 
di°
->
icdd¸
 = 
GIC_DIST_ICDDCR_ENABLE
;

113  
RTEMS_SUCCESSFUL
;

114 
	}
}

116 #ifde‡
RTEMS_SMP


117 
BSP_START_TEXT_SECTION
 
	$¨m_gic_úq_öôülize_£c⁄d¨y_˝u
()

119 vﬁ©ûê
gic_˝uif
 *
˝uif
 = 
GIC_CPUIF
;

120 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

122 (
di°
->
icdd¸
 & 
GIC_DIST_ICDDCR_ENABLE
) == 0) {

126 
˝uif
->
ic˝mr
 = 
	`GIC_CPUIF_ICCPMR_PRIORITY
(0xff);

127 
˝uif
->
iccb¥
 = 
	`GIC_CPUIF_ICCBPR_BINARY_POINT
(0x0);

128 
˝uif
->
icci¸
 = 
GIC_CPUIF_ICCICR_ENABLE
;

129 
	}
}

132 
πems_°©us_code
 
	$¨m_gic_úq_£t_¥i‹ôy
(

133 
πems_ve˘‹_numbî
 
ve˘‹
,

134 
uöt8_t
 
¥i‹ôy


137 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

139 i‡(
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

140 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

142 
	`gic_id_£t_¥i‹ôy
(
di°
, 
ve˘‹
, 
¥i‹ôy
);

144 
sc
 = 
RTEMS_INVALID_ID
;

147  
sc
;

148 
	}
}

150 
πems_°©us_code
 
	$¨m_gic_úq_gë_¥i‹ôy
(

151 
πems_ve˘‹_numbî
 
ve˘‹
,

152 
uöt8_t
 *
¥i‹ôy


155 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

157 i‡(
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

158 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

160 *
¥i‹ôy
 = 
	`gic_id_gë_¥i‹ôy
(
di°
, 
ve˘‹
);

162 
sc
 = 
RTEMS_INVALID_ID
;

165  
sc
;

166 
	}
}

	@src/lib/libbsp/arm/shared/arm-l2c-310/cache_.h

56 #i‚de‡
LIBBSP_ARM_SHARED_L2C_310_CACHE_H


57 
	#LIBBSP_ARM_SHARED_L2C_310_CACHE_H


	)

59 
	~<as£π.h
>

60 
	~<b•.h
>

61 
	~<b•/Áèl.h
>

62 
	~<lib˝u/¨m-˝15.h
>

63 
	~<πems/πems/öå.h
>

64 
	~<b•/¨m-ªÀa£-id.h
>

65 
	~<b•/¨m-îøè.h
>

66 
	~"../ö˛ude/¨m-ˇche-l1.h
"

68 #ifde‡
__˝lu•lus


73 
	#CPU_DATA_CACHE_ALIGNMENT
 
ARM_CACHE_L1_CPU_DATA_ALIGNMENT


	)

74 
	#CPU_INSTRUCTION_CACHE_ALIGNMENT
 
ARM_CACHE_L1_CPU_INSTRUCTION_ALIGNMENT


	)

75 
	#CPU_CACHE_SUPPORT_PROVIDES_RANGE_FUNCTIONS
 \

76 
ARM_CACHE_L1_CPU_SUPPORT_PROVIDES_RANGE_FUNCTIONS


	)

77 
	#CPU_CACHE_SUPPORT_PROVIDES_CACHE_SIZE_FUNCTIONS


	)

79 
	#L2C_310_DATA_LINE_MASK
 ( 
CPU_DATA_CACHE_ALIGNMENT
 - 1 )

	)

80 
	#L2C_310_INSTRUCTION_LINE_MASK
 \

81 –
CPU_INSTRUCTION_CACHE_ALIGNMENT
 \

82 - 1 )

	)

83 
	#L2C_310_NUM_WAYS
 8

	)

84 
	#L2C_310_WAY_MASK
 ( ( 1 << 
L2C_310_NUM_WAYS
 ) - 1 )

	)

86 
	#L2C_310_MIN
–
a
, 
b
 ) \

87 ((
a
 < 
b
Ë? (aË: (b))

	)

89 
	#L2C_310_MAX_LOCKING_BYTES
 (4 * 1024)

	)

93 
	#L2C_310_RTL_RELEASE_R0_P0
 0x0

	)

94 
	#L2C_310_RTL_RELEASE_R1_P0
 0x2

	)

95 
	#L2C_310_RTL_RELEASE_R2_P0
 0x4

	)

96 
	#L2C_310_RTL_RELEASE_R3_P0
 0x5

	)

97 
	#L2C_310_RTL_RELEASE_R3_P1
 0x6

	)

98 
	#L2C_310_RTL_RELEASE_R3_P2
 0x8

	)

99 
	#L2C_310_RTL_RELEASE_R3_P3
 0x9

	)

101 
	#BSP_ARM_L2C_310_RTL_RELEASE
 (
BSP_ARM_L2C_310_ID
 & 
L2C_310_ID_RTL_MASK
)

	)

116 
uöt32_t
 
ˇche_id
;

117 
	#L2C_310_ID_RTL_MASK
 0x3f

	)

118 
	#L2C_310_ID_PART_MASK
 ( 0x‡<< 6 )

	)

119 
	#L2C_310_ID_PART_L210
 ( 1 << 6 )

	)

120 
	#L2C_310_ID_PART_L310
 ( 3 << 6 )

	)

121 
	#L2C_310_ID_IMPL_MASK
 ( 0xf‡<< 24 )

	)

123 
uöt32_t
 
ˇche_ty≥
;

125 
	#L2C_310_TYPE_DATA_BANKING_MASK
 0x80000000

	)

127 
	#L2C_310_TYPE_CTYPE_MASK
 0x1E000000

	)

129 
	#L2C_310_TYPE_CTYPE_SHIFT
 25

	)

131 
	#L2C_310_TYPE_HARVARD_MASK
 0x01000000

	)

133 
	#L2C_310_TYPE_SIZE_D_WAYS_MASK
 0x00700000

	)

134 
	#L2C_310_TYPE_SIZE_D_WAYS_SHIFT
 20

	)

136 
	#L2C_310_TYPE_NUM_D_WAYS_MASK
 0x00040000

	)

137 
	#L2C_310_TYPE_NUM_D_WAYS_SHIFT
 18

	)

139 
	#L2C_310_TYPE_LENGTH_D_LINE_MASK
 0x00003000

	)

140 
	#L2C_310_TYPE_LENGTH_D_LINE_SHIFT
 12

	)

141 
	#L2C_310_TYPE_LENGTH_D_LINE_VAL_32
 0x0

	)

143 
	#L2C_310_TYPE_SIZE_I_WAYS_MASK
 0x00000700

	)

144 
	#L2C_310_TYPE_SIZE_I_WAYS_SHIFT
 8

	)

146 
	#L2C_310_TYPE_NUM_I_WAYS_MASK
 0x00000040

	)

147 
	#L2C_310_TYPE_NUM_I_WAYS_SHIFT
 6

	)

149 
	#L2C_310_TYPE_LENGTH_I_LINE_MASK
 0x00000003

	)

150 
	#L2C_310_TYPE_LENGTH_I_LINE_SHIFT
 0

	)

151 
	#L2C_310_TYPE_LENGTH_I_LINE_VAL_32
 0x0

	)

153 
uöt8_t
 
ª£rved_8
[0x100 - 8];

154 
uöt32_t
 
˘æ
;

156 
	#L2C_310_CTRL_ENABLE
 0x00000001

	)

158 
	#L2C_310_CTRL_EXCL_CONFIG
 (1 << 12)

	)

161 
uöt32_t
 
aux_˘æ
;

164 
	#L2C_310_AUX_EBRESPE_MASK
 0x40000000

	)

167 
	#L2C_310_AUX_IPFE_MASK
 0x20000000

	)

170 
	#L2C_310_AUX_DPFE_MASK
 0x10000000

	)

173 
	#L2C_310_AUX_NSIC_MASK
 0x08000000

	)

176 
	#L2C_310_AUX_NSLE_MASK
 0x04000000

	)

179 
	#L2C_310_AUX_CRP_MASK
 0x02000000

	)

182 
	#L2C_310_AUX_FWE_MASK
 0x01800000

	)

185 
	#L2C_310_AUX_SAOE_MASK
 0x00400000

	)

188 
	#L2C_310_AUX_PE_MASK
 0x00200000

	)

191 
	#L2C_310_AUX_EMBE_MASK
 0x00100000

	)

194 
	#L2C_310_AUX_WAY_SIZE_MASK
 0x000E0000

	)

195 
	#L2C_310_AUX_WAY_SIZE_SHIFT
 17

	)

198 
	#L2C_310_AUX_ASSOC_MASK
 0x00010000

	)

201 
	#L2C_310_AUX_SAIE_MASK
 0x00002000

	)

204 
	#L2C_310_AUX_EXCL_CACHE_MASK
 0x00001000

	)

207 
	#L2C_310_AUX_SBDLE_MASK
 0x00000800

	)

210 
	#L2C_310_AUX_HPSODRE_MASK
 0x00000400

	)

213 
	#L2C_310_AUX_FLZE_MASK
 0x00000001

	)

216 
	#L2C_310_AUX_REG_DEFAULT_MASK
 \

217 –
L2C_310_AUX_WAY_SIZE_MASK
 & ( 0x3 << 
L2C_310_AUX_WAY_SIZE_SHIFT
 ) ) \

218 | 
L2C_310_AUX_PE_MASK
 \

219 | 
L2C_310_AUX_SAOE_MASK
 \

220 | 
L2C_310_AUX_CRP_MASK
 \

221 | 
L2C_310_AUX_DPFE_MASK
 \

222 | 
L2C_310_AUX_IPFE_MASK
 \

223 | 
L2C_310_AUX_EBRESPE_MASK


	)

225 
	#L2C_310_AUX_REG_ZERO_MASK
 0xFFF1FFFF

	)

228 
	#L2C_310_RAM_1_CYCLE_LAT_VAL
 0x00000000

	)

230 
	#L2C_310_RAM_2_CYCLE_LAT_VAL
 0x00000001

	)

232 
	#L2C_310_RAM_3_CYCLE_LAT_VAL
 0x00000002

	)

234 
	#L2C_310_RAM_4_CYCLE_LAT_VAL
 0x00000003

	)

236 
	#L2C_310_RAM_5_CYCLE_LAT_VAL
 0x00000004

	)

238 
	#L2C_310_RAM_6_CYCLE_LAT_VAL
 0x00000005

	)

240 
	#L2C_310_RAM_7_CYCLE_LAT_VAL
 0x00000006

	)

242 
	#L2C_310_RAM_8_CYCLE_LAT_VAL
 0x00000007

	)

244 
	#L2C_310_RAM_SETUP_SHIFT
 0x00000000

	)

246 
	#L2C_310_RAM_READ_SHIFT
 0x00000004

	)

248 
	#L2C_310_RAM_WRITE_SHIFT
 0x00000008

	)

250 
	#L2C_310_RAM_SETUP_LAT_MASK
 0x00000007

	)

252 
	#L2C_310_RAM_READ_LAT_MASK
 0x00000070

	)

254 
	#L2C_310_RAM_WRITE_LAT_MASK
 0x00000700

	)

256 
uöt32_t
 
èg_øm_˘æ
;

258 
	#L2C_310_TAG_RAM_DEFAULT_LAT
 \

259 ––
L2C_310_RAM_2_CYCLE_LAT_VAL
 << 
L2C_310_RAM_SETUP_SHIFT
 ) \

260 | ( 
L2C_310_RAM_2_CYCLE_LAT_VAL
 << 
L2C_310_RAM_READ_SHIFT
 ) \

261 | ( 
L2C_310_RAM_2_CYCLE_LAT_VAL
 << 
L2C_310_RAM_WRITE_SHIFT
 ) )

	)

263 
uöt32_t
 
d©a_øm_˘æ
;

265 
	#L2C_310_DATA_RAM_DEFAULT_MASK
 \

266 ––
L2C_310_RAM_2_CYCLE_LAT_VAL
 << 
L2C_310_RAM_SETUP_SHIFT
 ) \

267 | ( 
L2C_310_RAM_3_CYCLE_LAT_VAL
 << 
L2C_310_RAM_READ_SHIFT
 ) \

268 | ( 
L2C_310_RAM_2_CYCLE_LAT_VAL
 << 
L2C_310_RAM_WRITE_SHIFT
 ) )

	)

270 
uöt8_t
 
ª£rved_110
[0x200 - 0x110];

273 
uöt32_t
 
ev_˘æ
;

276 
uöt32_t
 
ev_˙t1_cfg
;

279 
uöt32_t
 
ev_˙t0_cfg
;

282 
uöt32_t
 
ev_˙t1
;

285 
uöt32_t
 
ev_˙t0
;

288 
uöt32_t
 
öt_mask
;

291 
uöt32_t
 
öt_mask_°©us
;

294 
uöt32_t
 
öt_øw_°©us
;

297 
uöt32_t
 
öt_˛r
;

306 
	#L2C_310_INT_DECERR_MASK
 0x00000100

	)

309 
	#L2C_310_INT_SLVERR_MASK
 0x00000080

	)

312 
	#L2C_310_INT_ERRRD_MASK
 0x00000040

	)

315 
	#L2C_310_INT_ERRRT_MASK
 0x00000020

	)

318 
	#L2C_310_INT_ERRWD_MASK
 0x00000010

	)

321 
	#L2C_310_INT_ERRWT_MASK
 0x00000008

	)

324 
	#L2C_310_INT_PARRD_MASK
 0x00000004

	)

327 
	#L2C_310_INT_PARRT_MASK
 0x00000002

	)

330 
	#L2C_310_INT_ECNTR_MASK
 0x00000001

	)

334 
uöt8_t
 
ª£rved_224
[0x730 - 0x224];

337 
uöt32_t
 
ˇche_sync
;

338 
uöt8_t
 
ª£rved_734
[0x740 - 0x734];

340 
uöt32_t
 
dummy_ˇche_sync_ªg
;

341 
uöt8_t
 
ª£rved_744
[0x770 - 0x744];

344 
uöt32_t
 
öv_∑
;

345 
uöt8_t
 
ª£rved_774
[0x77c - 0x774];

348 
uöt32_t
 
öv_way
;

349 
uöt8_t
 
ª£rved_780
[0x7b0 - 0x780];

352 
uöt32_t
 
˛ón_∑
;

353 
uöt8_t
 
ª£rved_7b4
[0x7b8 - 0x7b4];

356 
uöt32_t
 
˛ón_ödex
;

359 
uöt32_t
 
˛ón_way
;

360 
uöt8_t
 
ª£rved_7c0
[0x7f0 - 0x7c0];

363 
uöt32_t
 
˛ón_öv_∑
;

364 
uöt8_t
 
ª£rved_7f4
[0x7f8 - 0x7f4];

367 
uöt32_t
 
˛ón_öv_ödx
;

370 
uöt32_t
 
˛ón_öv_way
;

373 
uöt32_t
 
d_lockdown_0
;

376 
uöt32_t
 
i_lockdown_0
;

379 
uöt32_t
 
d_lockdown_1
;

382 
uöt32_t
 
i_lockdown_1
;

385 
uöt32_t
 
d_lockdown_2
;

388 
uöt32_t
 
i_lockdown_2
;

391 
uöt32_t
 
d_lockdown_3
;

394 
uöt32_t
 
i_lockdown_3
;

397 
uöt32_t
 
d_lockdown_4
;

400 
uöt32_t
 
i_lockdown_4
;

403 
uöt32_t
 
d_lockdown_5
;

406 
uöt32_t
 
i_lockdown_5
;

409 
uöt32_t
 
d_lockdown_6
;

412 
uöt32_t
 
i_lockdown_6
;

415 
uöt32_t
 
d_lockdown_7
;

418 
uöt32_t
 
i_lockdown_7
;

420 
uöt8_t
 
ª£rved_940
[0x950 - 0x940];

423 
uöt32_t
 
lock_löe_í
;

426 
uöt32_t
 
u∆ock_way
;

428 
uöt8_t
 
ª£rved_958
[0xc00 - 0x958];

431 
uöt32_t
 
addr_fûãrög_°¨t
;

434 
uöt32_t
 
addr_fûãrög_íd
;

437 
	#L2C_310_ADDR_FILTER_VALID_MASK
 0xFFF00000

	)

440 
	#L2C_310_ADDR_FILTER_ENABLE_MASK
 0x00000001

	)

442 
uöt8_t
 
ª£rved_c08
[0xf40 - 0xc08];

445 
uöt32_t
 
debug_˘æ
;

448 
	#L2C_310_DEBUG_SPIDEN_MASK
 0x00000004

	)

451 
	#L2C_310_DEBUG_DWB_MASK
 0x00000002

	)

454 
	#L2C_310_DEBUG_DCL_MASK
 0x00000002

	)

456 
uöt8_t
 
ª£rved_f44
[0xf60 - 0xf44];

459 
uöt32_t
 
¥e„tch_˘æ
;

461 
	#L2C_310_PREFETCH_OFFSET_MASK
 0x0000001F

	)

462 
uöt8_t
 
ª£rved_f64
[0xf80 - 0xf64];

465 
uöt32_t
 
powî_˘æ
;

466 } 
	tL2CC
;

468 
πems_öãºu±_lock
 
l2c_310_lock
 = 
RTEMS_INTERRUPT_LOCK_INITIALIZER
(

482 #i‡
BSP_ARM_L2C_310_RTL_RELEASE
 =
L2C_310_RTL_RELEASE_R3_P0


483 
	#L2C_310_ERRATA_IS_APPLICABLE_753970


	)

486 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_727913
(

487 
uöt32_t
 
πl_ªÀa£


490 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

492  
πl_ªÀa£
 ) {

493 
L2C_310_RTL_RELEASE_R3_P3
:

494 
L2C_310_RTL_RELEASE_R3_P2
:

495 
L2C_310_RTL_RELEASE_R3_P1
:

496 
L2C_310_RTL_RELEASE_R2_P0
:

497 
L2C_310_RTL_RELEASE_R1_P0
:

498 
L2C_310_RTL_RELEASE_R0_P0
:

499 
is_≠∂iˇbÀ
 = 
Ál£
;

501 
L2C_310_RTL_RELEASE_R3_P0
:

502 
is_≠∂iˇbÀ
 = 
åue
;

505 
as£π
( 0 );

509  
is_≠∂iˇbÀ
;

512 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_727914
(

513 
uöt32_t
 
πl_ªÀa£


516 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

518  
πl_ªÀa£
 ) {

519 
L2C_310_RTL_RELEASE_R3_P3
:

520 
L2C_310_RTL_RELEASE_R3_P2
:

521 
L2C_310_RTL_RELEASE_R3_P1
:

522 
L2C_310_RTL_RELEASE_R2_P0
:

523 
L2C_310_RTL_RELEASE_R1_P0
:

524 
L2C_310_RTL_RELEASE_R0_P0
:

525 
is_≠∂iˇbÀ
 = 
Ál£
;

527 
L2C_310_RTL_RELEASE_R3_P0
:

528 
is_≠∂iˇbÀ
 = 
åue
;

531 
as£π
( 0 );

535  
is_≠∂iˇbÀ
;

538 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_727915
(

539 
uöt32_t
 
πl_ªÀa£


542 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

544  
πl_ªÀa£
 ) {

545 
L2C_310_RTL_RELEASE_R3_P3
:

546 
L2C_310_RTL_RELEASE_R3_P2
:

547 
L2C_310_RTL_RELEASE_R3_P1
:

548 
L2C_310_RTL_RELEASE_R1_P0
:

549 
L2C_310_RTL_RELEASE_R0_P0
:

550 
is_≠∂iˇbÀ
 = 
Ál£
;

552 
L2C_310_RTL_RELEASE_R3_P0
:

553 
L2C_310_RTL_RELEASE_R2_P0
:

554 
is_≠∂iˇbÀ
 = 
åue
;

557 
as£π
( 0 );

561  
is_≠∂iˇbÀ
;

564 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_729806
(

565 
uöt32_t
 
πl_ªÀa£


568 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

570  
πl_ªÀa£
 ) {

571 
L2C_310_RTL_RELEASE_R3_P3
:

572 
L2C_310_RTL_RELEASE_R3_P2
:

573 
L2C_310_RTL_RELEASE_R2_P0
:

574 
L2C_310_RTL_RELEASE_R1_P0
:

575 
L2C_310_RTL_RELEASE_R0_P0
:

576 
is_≠∂iˇbÀ
 = 
Ál£
;

578 
L2C_310_RTL_RELEASE_R3_P1
:

579 
L2C_310_RTL_RELEASE_R3_P0
:

580 
is_≠∂iˇbÀ
 = 
åue
;

583 
as£π
( 0 );

587  
is_≠∂iˇbÀ
;

590 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_729815
(

591 
uöt32_t
 
πl_ªÀa£


594 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

596  
πl_ªÀa£
 ) {

597 
L2C_310_RTL_RELEASE_R3_P3
:

598 
L2C_310_RTL_RELEASE_R1_P0
:

599 
L2C_310_RTL_RELEASE_R0_P0
:

600 
is_≠∂iˇbÀ
 = 
Ál£
;

602 
L2C_310_RTL_RELEASE_R3_P2
:

603 
L2C_310_RTL_RELEASE_R3_P1
:

604 
L2C_310_RTL_RELEASE_R3_P0
:

605 
L2C_310_RTL_RELEASE_R2_P0
:

606 
is_≠∂iˇbÀ
 = 
åue
;

609 
as£π
( 0 );

613  
is_≠∂iˇbÀ
;

616 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_742884
(

617 
uöt32_t
 
πl_ªÀa£


620 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

622  
πl_ªÀa£
 ) {

623 
L2C_310_RTL_RELEASE_R3_P3
:

624 
L2C_310_RTL_RELEASE_R3_P2
:

625 
L2C_310_RTL_RELEASE_R3_P0
:

626 
L2C_310_RTL_RELEASE_R2_P0
:

627 
L2C_310_RTL_RELEASE_R1_P0
:

628 
L2C_310_RTL_RELEASE_R0_P0
:

629 
is_≠∂iˇbÀ
 = 
Ál£
;

631 
L2C_310_RTL_RELEASE_R3_P1
:

632 
is_≠∂iˇbÀ
 = 
åue
;

635 
as£π
( 0 );

639  
is_≠∂iˇbÀ
;

642 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_752271
(

643 
uöt32_t
 
πl_ªÀa£


646 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

648  
πl_ªÀa£
 ) {

649 
L2C_310_RTL_RELEASE_R3_P3
:

650 
L2C_310_RTL_RELEASE_R3_P2
:

651 
L2C_310_RTL_RELEASE_R2_P0
:

652 
L2C_310_RTL_RELEASE_R1_P0
:

653 
L2C_310_RTL_RELEASE_R0_P0
:

654 
is_≠∂iˇbÀ
 = 
Ál£
;

656 
L2C_310_RTL_RELEASE_R3_P1
:

657 
L2C_310_RTL_RELEASE_R3_P0
:

658 
is_≠∂iˇbÀ
 = 
åue
;

661 
as£π
( 0 );

665  
is_≠∂iˇbÀ
;

668 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_765569
(

669 
uöt32_t
 
πl_ªÀa£


672 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

674  
πl_ªÀa£
 ) {

675 
L2C_310_RTL_RELEASE_R3_P3
:

676 
L2C_310_RTL_RELEASE_R3_P2
:

677 
L2C_310_RTL_RELEASE_R3_P1
:

678 
L2C_310_RTL_RELEASE_R3_P0
:

679 
L2C_310_RTL_RELEASE_R2_P0
:

680 
L2C_310_RTL_RELEASE_R1_P0
:

681 
L2C_310_RTL_RELEASE_R0_P0
:

682 
is_≠∂iˇbÀ
 = 
åue
;

685 
as£π
( 0 );

689  
is_≠∂iˇbÀ
;

692 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_769419
(

693 
uöt32_t
 
πl_ªÀa£


696 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

698  
πl_ªÀa£
 ) {

699 
L2C_310_RTL_RELEASE_R3_P3
:

700 
L2C_310_RTL_RELEASE_R3_P2
:

701 
is_≠∂iˇbÀ
 = 
Ál£
;

703 
L2C_310_RTL_RELEASE_R3_P1
:

704 
L2C_310_RTL_RELEASE_R3_P0
:

705 
L2C_310_RTL_RELEASE_R2_P0
:

706 
L2C_310_RTL_RELEASE_R1_P0
:

707 
L2C_310_RTL_RELEASE_R0_P0
:

708 
is_≠∂iˇbÀ
 = 
åue
;

711 
as£π
( 0 );

715  
is_≠∂iˇbÀ
;

718 #i‡
BSP_ARM_L2C_310_RTL_RELEASE
 =
L2C_310_RTL_RELEASE_R0_P0
 \

719 || 
BSP_ARM_L2C_310_RTL_RELEASE
 =
L2C_310_RTL_RELEASE_R1_P0


720 
	#L2C_310_ERRATA_IS_APPLICABLE_588369


	)

723 #ifde‡
CACHE_ERRATA_CHECKS_FOR_IMPLEMENTED_ERRATAS


724 
boﬁ
 
l2c_310_îøè_is_≠∂iˇbÀ_754670
(

725 
uöt32_t
 
πl_ªÀa£


728 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

730  
πl_ªÀa£
 ) {

731 
L2C_310_RTL_RELEASE_R3_P3
:

732 
L2C_310_RTL_RELEASE_R3_P2
:

733 
L2C_310_RTL_RELEASE_R3_P1
:

734 
L2C_310_RTL_RELEASE_R3_P0
:

735 
L2C_310_RTL_RELEASE_R2_P0
:

736 
L2C_310_RTL_RELEASE_R1_P0
:

737 
L2C_310_RTL_RELEASE_R0_P0
:

738 
is_≠∂iˇbÀ
 = 
åue
;

741 
as£π
( 0 );

745  
is_≠∂iˇbÀ
;

753 
	#CACHE_ARM_ERRATA_775420_HANDLER
() \

754 if–
¨m_îøè_is_≠∂iˇbÀ_¥o˚ss‹_îøè_775420
 ) { \

756 

	)

757 
l2c_310_check_îøè
–
uöt32_t
 
πl_ªÀa£
 )

768 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_727913
–
πl_ªÀa£
 ) );

772 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_727914
–
πl_ªÀa£
 ) );

776 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_727915
–
πl_ªÀa£
 ) );

780 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_729806
–
πl_ªÀa£
 ) );

782 if–
l2c_310_îøè_is_≠∂iˇbÀ_729815
–
πl_ªÀa£
 ) )

784 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

786 
as£π
–0 =–
l2cc
->
aux_˘æ
 & 
L2C_310_AUX_HPSODRE_MASK
 ) );

807 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_742884
–
πl_ªÀa£
 ) );

811 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_752271
–
πl_ªÀa£
 ) );

818 if–
l2c_310_îøè_is_≠∂iˇbÀ_765569
–
πl_ªÀa£
 ) )

820 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

822 
as£π
–!––
l2cc
->
aux_˘æ
 & 
L2C_310_AUX_IPFE_MASK


823 || 
l2cc
->
aux_˘æ
 & 
L2C_310_AUX_DPFE_MASK
 )

824 && ( ( 
l2cc
->
¥e„tch_˘æ
 & 
L2C_310_PREFETCH_OFFSET_MASK
 )

842 
as£π
–! 
l2c_310_îøè_is_≠∂iˇbÀ_769419
–
πl_ªÀa£
 ) );

845 
ölöe
 

846 
l2c_310_sync
–vﬁ©ûê
L2CC
 *
l2cc
 )

848 #ifde‡
L2C_310_ERRATA_IS_APPLICABLE_753970


849 
l2cc
->
dummy_ˇche_sync_ªg
 = 0;

851 
l2cc
->
ˇche_sync
 = 0;

855 
ölöe
 

856 
l2c_310_Êush_1_löe
–vﬁ©ûê
L2CC
 *
l2cc
, 
uöt32_t
 
d_addr
 )

858 #ifde‡
L2C_310_ERRATA_IS_APPLICABLE_588369


865 
l2cc
->
˛ón_∑
 = 
d_addr
;

866 
l2c_310_sync
–
l2cc
 );

867 
l2cc
->
öv_∑
 = 
d_addr
;

869 
l2cc
->
˛ón_öv_∑
 = 
d_addr
;

873 
ölöe
 

874 
l2c_310_Êush_ønge
–c⁄° * 
d_addr
, c⁄° 
size_t
 
n_byãs
 )

877 
uöt32_t
 
adx
 = (uöt32_t)
d_addr


878 & ~
L2C_310_DATA_LINE_MASK
;

879 c⁄° 
uöt32_t
 
ADDR_LAST
 =

880 (
uöt32_t
)–(
size_t
)
d_addr
 + 
n_byãs
 - 1 );

881 
uöt32_t
 
block_íd
 =

882 
L2C_310_MIN
–
ADDR_LAST
, 
adx
 + 
L2C_310_MAX_LOCKING_BYTES
 );

883 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

885 i‡–
n_byãs
 == 0 ) {

890 
adx
 <
ADDR_LAST
;

891 
adx
 = 
block_íd
 + 1,

892 
block_íd
 = 
L2C_310_MIN
–
ADDR_LAST
, 
adx
 + 
L2C_310_MAX_LOCKING_BYTES
 )) {

893 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

895 
πems_öãºu±_lock_acquúe
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

897 ; 
adx
 <
block_íd
;ádx +
CPU_DATA_CACHE_ALIGNMENT
 ) {

898 
l2c_310_Êush_1_löe
–
l2cc
, 
adx
 );

901 
l2c_310_sync
–
l2cc
 );

903 
πems_öãºu±_lock_ªÀa£
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

907 
ölöe
 

908 
l2c_310_Êush_ítúe
( )

910 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

911 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

914 if––
l2cc
->
˘æ
 & 
L2C_310_CTRL_ENABLE
 ) != 0 ) {

917 
_ARM_D©a_mem‹y_b¨rõr
();

919 
πems_öãºu±_lock_acquúe
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

920 
l2cc
->
˛ón_öv_way
 = 
L2C_310_WAY_MASK
;

922  
l2cc
->
˛ón_öv_way
 & 
L2C_310_WAY_MASK
 ) {};

925 
l2c_310_sync
–
l2cc
 );

927 
πems_öãºu±_lock_ªÀa£
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

931 
ölöe
 

932 
l2c_310_övÆid©e_1_löe
–c⁄° *
d_addr
 )

934 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

937 
l2cc
->
öv_∑
 = (
uöt32_t
Ë
d_addr
;

938 
l2c_310_sync
–
l2cc
 );

941 
ölöe
 

942 
l2c_310_övÆid©e_ønge
–c⁄° * 
d_addr
, c⁄° 
size_t
 
n_byãs
 )

945 
uöt32_t
 
adx
 = (uöt32_t)
d_addr


946 & ~
L2C_310_DATA_LINE_MASK
;

947 c⁄° 
uöt32_t
 
ADDR_LAST
 =

948 (
uöt32_t
)–(
size_t
)
d_addr
 + 
n_byãs
 - 1 );

949 
uöt32_t
 
block_íd
 =

950 
L2C_310_MIN
–
ADDR_LAST
, 
adx
 + 
L2C_310_MAX_LOCKING_BYTES
 );

951 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

953 i‡–
n_byãs
 == 0 ) {

958 
adx
 <
ADDR_LAST
;

959 
adx
 = 
block_íd
 + 1,

960 
block_íd
 = 
L2C_310_MIN
–
ADDR_LAST
, 
adx
 + 
L2C_310_MAX_LOCKING_BYTES
 )) {

961 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

963 
πems_öãºu±_lock_acquúe
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

965 ; 
adx
 <
block_íd
;ádx +
CPU_DATA_CACHE_ALIGNMENT
 ) {

967 
l2cc
->
öv_∑
 = 
adx
;

970 
l2c_310_sync
–
l2cc
 );

972 
πems_öãºu±_lock_ªÀa£
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

977 
ölöe
 

978 
l2c_310_övÆid©e_ítúe
( )

980 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

985 
_ARM_D©a_mem‹y_b¨rõr
();

987 
l2cc
->
öv_way
 = 
L2C_310_WAY_MASK
;

989  
l2cc
->
öv_way
 & 
L2C_310_WAY_MASK
 ) ;

992 
l2c_310_sync
–
l2cc
 );

995 
ölöe
 

996 
l2c_310_˛ón_™d_övÆid©e_ítúe
( )

998 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

999 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

1001 if––
l2cc
->
˘æ
 & 
L2C_310_CTRL_ENABLE
 ) != 0 ) {

1005 
_ARM_D©a_mem‹y_b¨rõr
();

1007 
πems_öãºu±_lock_acquúe
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

1008 
l2cc
->
˛ón_öv_way
 = 
L2C_310_WAY_MASK
;

1010  
l2cc
->
˛ón_öv_way
 & 
L2C_310_WAY_MASK
 ) ;

1013 
l2c_310_sync
–
l2cc
 );

1015 
πems_öãºu±_lock_ªÀa£
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

1019 
ölöe
 

1020 
l2c_310_‰ìze
( )

1026 
ölöe
 

1027 
l2c_310_un‰ìze
( )

1033 
ölöe
 
size_t


1034 
l2c_310_gë_ˇche_size
( )

1036 
size_t
 
size
 = 0;

1037 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

1038 
uöt32_t
 
ˇche_ty≥
 = 
l2cc
->cache_type;

1039 
uöt32_t
 
way_size
;

1040 
uöt32_t
 
num_ways
;

1042 
way_size
 = (
ˇche_ty≥
 & 
L2C_310_TYPE_SIZE_D_WAYS_MASK
)

1043 >> 
L2C_310_TYPE_SIZE_D_WAYS_SHIFT
;

1044 
num_ways
 = (
ˇche_ty≥
 & 
L2C_310_TYPE_NUM_D_WAYS_MASK
)

1045 >> 
L2C_310_TYPE_NUM_D_WAYS_SHIFT
;

1047 
as£π
–
way_size
 <= 0x07 );

1048 
as£π
–
num_ways
 <= 0x01 );

1049 if–
way_size
 <0x07 && 
num_ways
 <= 0x01 ) {

1050 if–
way_size
 == 0x00 ) {

1051 
way_size
 = 16 * 1024;

1052 } if–
way_size
 == 0x07 ) {

1053 
way_size
 = 512 * 1024;

1055 
way_size
 = (1 << (way_size - 1)) * 16 * 1024;

1057  
num_ways
 ) {

1059 
num_ways
 = 8;

1062 
num_ways
 = 16;

1065 
num_ways
 = 0;

1068 
size
 = 
way_size
 * 
num_ways
;

1070  
size
;

1073 
l2c_310_u∆ock
–vﬁ©ûê
L2CC
 *
l2cc
 )

1075 
l2cc
->
d_lockdown_0
 = 0;

1076 
l2cc
->
i_lockdown_0
 = 0;

1077 
l2cc
->
d_lockdown_1
 = 0;

1078 
l2cc
->
i_lockdown_1
 = 0;

1079 
l2cc
->
d_lockdown_2
 = 0;

1080 
l2cc
->
i_lockdown_2
 = 0;

1081 
l2cc
->
d_lockdown_3
 = 0;

1082 
l2cc
->
i_lockdown_3
 = 0;

1083 
l2cc
->
d_lockdown_4
 = 0;

1084 
l2cc
->
i_lockdown_4
 = 0;

1085 
l2cc
->
d_lockdown_5
 = 0;

1086 
l2cc
->
i_lockdown_5
 = 0;

1087 
l2cc
->
d_lockdown_6
 = 0;

1088 
l2cc
->
i_lockdown_6
 = 0;

1089 
l2cc
->
d_lockdown_7
 = 0;

1090 
l2cc
->
i_lockdown_7
 = 0;

1093 
l2c_310_waô_f‹_background_›s
–vﬁ©ûê
L2CC
 *
l2cc
 )

1095  
l2cc
->
öv_way
 & 
L2C_310_WAY_MASK
 ) ;

1097  
l2cc
->
˛ón_way
 & 
L2C_310_WAY_MASK
 ) ;

1099  
l2cc
->
˛ón_öv_way
 & 
L2C_310_WAY_MASK
 ) ;

1104 #i‡(
BSP_ARM_L2C_310_ID
 & 
L2C_310_ID_PART_MASK
) \

1105 !
L2C_310_ID_PART_L310


1109 #i‡(
BSP_ARM_L2C_310_RTL_RELEASE
 !
L2C_310_RTL_RELEASE_R3_P2
) \

1110 && (
BSP_ARM_L2C_310_RTL_RELEASE
 !
L2C_310_RTL_RELEASE_R3_P3
)

1114 
ölöe
 

1115 
l2c_310_íabÀ
( )

1117 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

1118 
uöt32_t
 
ˇche_id
 = 
l2cc
->cache_id;

1119 
uöt32_t
 
πl_ªÀa£
 = 
ˇche_id
 & 
L2C_310_ID_RTL_MASK
;

1120 
uöt32_t
 
id_mask
 = 
L2C_310_ID_IMPL_MASK
 | 
L2C_310_ID_PART_MASK
;

1121 
uöt32_t
 
˘æ
;

1128 (
BSP_ARM_L2C_310_ID
 & 
id_mask
Ë!(
ˇche_id
 & id_mask)

1129 || 
πl_ªÀa£
 < 
BSP_ARM_L2C_310_RTL_RELEASE


1131 
b•_Áèl
–
ARM_FATAL_L2C_310_UNEXPECTED_ID
 );

1134 
l2c_310_check_îøè
–
πl_ªÀa£
 );

1136 
˘æ
 = 
l2cc
->ctrl;

1138 i‡––
˘æ
 & 
L2C_310_CTRL_EXCL_CONFIG
 ) != 0 ) {

1139 
b•_Áèl
–
ARM_FATAL_L2C_310_EXCLUSIVE_CONFIG
 );

1143 if––
˘æ
 & 
L2C_310_CTRL_ENABLE
 ) == 0 ) {

1144 
uöt32_t
 
aux_˘æ
;

1145 
ways
;

1148 
l2c_310_u∆ock
–
l2cc
 );

1150 
l2c_310_waô_f‹_background_›s
–
l2cc
 );

1152 
aux_˘æ
 = 
l2cc
->aux_ctrl;

1154 i‡–(
aux_˘æ
 & ( 1 << 16 )) != 0 ) {

1155 
ways
 = 16;

1157 
ways
 = 8;

1160 i‡–
ways
 !
L2C_310_NUM_WAYS
 ) {

1161 
b•_Áèl
–
ARM_FATAL_L2C_310_UNEXPECTED_NUM_WAYS
 );

1165 
aux_˘æ
 &
L2C_310_AUX_REG_ZERO_MASK
;

1166 
aux_˘æ
 |
L2C_310_AUX_REG_DEFAULT_MASK
;

1168 
l2cc
->
aux_˘æ
 =áux_ctrl;

1171 
l2cc
->
èg_øm_˘æ
 = 
L2C_310_TAG_RAM_DEFAULT_LAT
;

1172 
l2cc
->
d©a_øm_˘æ
 = 
L2C_310_DATA_RAM_DEFAULT_MASK
;

1174 
l2c_310_övÆid©e_ítúe
();

1177 
l2cc
->
öt_˛r
 =Ü2cc->
öt_øw_°©us
;

1180 
l2cc
->
˘æ
 = cå»| 
L2C_310_CTRL_ENABLE
;

1184 
ölöe
 

1185 
l2c_310_dißbÀ
( )

1187 vﬁ©ûê
L2CC
 *
l2cc
 = (vﬁ©ûêL2CC *Ë
BSP_ARM_L2C_310_BASE
;

1188 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

1190 i‡–
l2cc
->
˘æ
 & 
L2C_310_CTRL_ENABLE
 ) {

1192 
l2c_310_Êush_ítúe
();

1193 
πems_öãºu±_lock_acquúe
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

1195 
l2c_310_waô_f‹_background_›s
–
l2cc
 );

1198 
l2cc
->
˘æ
 &~
L2C_310_CTRL_ENABLE
;

1199 
πems_öãºu±_lock_ªÀa£
–&
l2c_310_lock
, &
lock_c⁄ãxt
 );

1203 
ölöe
 

1204 
_CPU_ˇche_íabÀ_d©a
( )

1206 
l2c_310_íabÀ
();

1209 
ölöe
 

1210 
_CPU_ˇche_dißbÀ_d©a
( )

1212 
¨m_ˇche_l1_dißbÀ_d©a
();

1213 
l2c_310_dißbÀ
();

1216 
ölöe
 

1217 
_CPU_ˇche_íabÀ_ö°ru˘i⁄
( )

1219 
l2c_310_íabÀ
();

1222 
ölöe
 

1223 
_CPU_ˇche_dißbÀ_ö°ru˘i⁄
( )

1225 
¨m_ˇche_l1_dißbÀ_ö°ru˘i⁄
();

1226 
l2c_310_dißbÀ
();

1229 
ölöe
 

1230 
_CPU_ˇche_Êush_d©a_ønge
(

1231 c⁄° *
d_addr
,

1232 
size_t
 
n_byãs


1235 
¨m_ˇche_l1_Êush_d©a_ønge
(

1236 
d_addr
,

1237 
n_byãs


1239 
l2c_310_Êush_ønge
(

1240 
d_addr
,

1241 
n_byãs


1245 
ölöe
 

1246 
_CPU_ˇche_Êush_ítúe_d©a
( )

1248 
¨m_ˇche_l1_Êush_ítúe_d©a
();

1249 
l2c_310_Êush_ítúe
();

1252 
ölöe
 

1253 
_CPU_ˇche_övÆid©e_d©a_ønge
(

1254 c⁄° *
addr_fú°
,

1255 
size_t
 
n_byãs


1258 
l2c_310_övÆid©e_ønge
(

1259 
addr_fú°
,

1260 
n_byãs


1262 
¨m_ˇche_l1_övÆid©e_d©a_ønge
(

1263 
addr_fú°
,

1264 
n_byãs


1268 
ölöe
 

1269 
_CPU_ˇche_övÆid©e_ítúe_d©a
( )

1272 
¨m_ˇche_l1_Êush_ítúe_d©a
();

1275 
l2c_310_˛ón_™d_övÆid©e_ítúe
();

1278 
¨m_ˇche_l1_˛ón_™d_övÆid©e_ítúe_d©a
();

1281 
ölöe
 

1282 
_CPU_ˇche_‰ìze_d©a
( )

1284 
¨m_ˇche_l1_‰ìze_d©a
();

1285 
l2c_310_‰ìze
();

1288 
ölöe
 

1289 
_CPU_ˇche_un‰ìze_d©a
( )

1291 
¨m_ˇche_l1_un‰ìze_d©a
();

1292 
l2c_310_un‰ìze
();

1295 
ölöe
 

1296 
_CPU_ˇche_övÆid©e_ö°ru˘i⁄_ønge
–c⁄° *
i_addr
, 
size_t
 
n_byãs
)

1298 
¨m_ˇche_l1_övÆid©e_ö°ru˘i⁄_ønge
–
i_addr
, 
n_byãs
 );

1301 
ölöe
 

1302 
_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
( )

1304 
¨m_ˇche_l1_övÆid©e_ítúe_ö°ru˘i⁄
();

1307 
ölöe
 

1308 
_CPU_ˇche_‰ìze_ö°ru˘i⁄
( )

1310 
¨m_ˇche_l1_‰ìze_ö°ru˘i⁄
();

1311 
l2c_310_‰ìze
();

1314 
ölöe
 

1315 
_CPU_ˇche_un‰ìze_ö°ru˘i⁄
( )

1317 
¨m_ˇche_l1_un‰ìze_ö°ru˘i⁄
();

1318 
l2c_310_un‰ìze
();

1321 
ölöe
 
size_t


1322 
_CPU_ˇche_gë_d©a_ˇche_size
–c⁄° 
uöt32_t
 
Àvñ
 )

1324 
size_t
 
size
 = 0;

1326  
Àvñ
 )

1329 
size
 = 
¨m_ˇche_l1_gë_d©a_ˇche_size
();

1333 
size
 = 
l2c_310_gë_ˇche_size
();

1336 
size
 = 0;

1339  
size
;

1342 
ölöe
 
size_t


1343 
_CPU_ˇche_gë_ö°ru˘i⁄_ˇche_size
–c⁄° 
uöt32_t
 
Àvñ
 )

1345 
size_t
 
size
 = 0;

1347  
Àvñ
 )

1350 
size
 = 
¨m_ˇche_l1_gë_ö°ru˘i⁄_ˇche_size
();

1354 
size
 = 
l2c_310_gë_ˇche_size
();

1357 
size
 = 0;

1360  
size
;

1366 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/arm-pl011.c

15 
	~<b•/¨m-∂011.h
>

17 vﬁ©ûê
∂011
 *
	$∂011_gë_ªgs
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

19 
¨m_∂011_c⁄ãxt
 *
˘x
 = (¨m_∂011_c⁄ãxà*Ë
ba£
;

21  
˘x
->
ªgs
;

22 
	}
}

25 
boﬁ
 
	$¨m_∂011_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

27 vﬁ©ûê
∂011
 *
ªgs
 = 
	`∂011_gë_ªgs
(
ba£
);

29 
ªgs
->
u¨é¸_h
 = 
	`PL011_UARTLCR_H_WLEN
(
PL011_UARTLCR_H_WLEN_8
);

30 
ªgs
->
u¨t¸
 = 
PL011_UARTCR_RXE


31 | 
PL011_UARTCR_TXE


32 | 
PL011_UARTCR_UARTEN
;

34  
åue
;

35 
	}
}

37 
boﬁ
 
	$∂011_fú°_›í
(

38 
πems_ãrmios_ây
 *
ây
,

39 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

40 
ãrmios
 *
ãrm
,

41 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


44 
¨m_∂011_c⁄ãxt
 *
˘x
 = (¨m_∂011_c⁄ãxà*Ë
ba£
;

46 
	`πems_ãrmios_£t_öôül_baud
(
ây
, 
˘x
->
öôül_baud
);

48  
åue
;

49 
	}
}

51 
	$∂011_ªad_pﬁÀd
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

53 vﬁ©ûê
∂011
 *
ªgs
 = 
	`∂011_gë_ªgs
(
ba£
);

55 i‡((
ªgs
->
u¨t‰
 & 
PL011_UARTFR_RXFE
) != 0) {

58  
	`PL011_UARTDR_DATA_GET
(
ªgs
->
u¨tdr
);

60 
	}
}

62 
	$¨m_∂011_wrôe_pﬁÀd
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
, 
c
)

64 vﬁ©ûê
∂011
 *
ªgs
 = 
	`∂011_gë_ªgs
(
ba£
);

66 (
ªgs
->
u¨t‰
 & 
PL011_UARTFR_TXFF
) != 0) {

70 
ªgs
->
u¨tdr
 = 
	`PL011_UARTDR_DATA
(
c
);

71 
	}
}

73 
	$∂011_wrôe_suµ‹t_pﬁÀd
(

74 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

75 c⁄° *
s
,

76 
size_t
 
n


79 
size_t
 
i
;

81 
i
 = 0; i < 
n
; ++i) {

82 
	`¨m_∂011_wrôe_pﬁÀd
(
ba£
, 
s
[
i
]);

84 
	}
}

86 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	g¨m_∂011_‚s
 = {

87 .
fú°_›í
 = 
∂011_fú°_›í
,

88 .
	gpﬁl_ªad
 = 
∂011_ªad_pﬁÀd
,

89 .
	gwrôe
 = 
∂011_wrôe_suµ‹t_pﬁÀd
,

90 .
	gmode
 = 
TERMIOS_POLLED


	@src/lib/libbsp/arm/shared/arm-pl050.c

15 
	~<as£π.h
>

17 
	~<b•/úq.h
>

18 
	~<b•/¨m-∂050.h
>

20 vﬁ©ûê
∂050
 *
	$∂050_gë_ªgs
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

22 
¨m_∂050_c⁄ãxt
 *
˘x
 = (¨m_∂050_c⁄ãxà*Ë
ba£
;

24  
˘x
->
ªgs
;

25 
	}
}

27 
	$∂050_öãºu±
(*
¨g
)

29 
πems_ãrmios_ây
 *
ây
 = 
¨g
;

30 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
 = 
	`πems_ãrmios_gë_devi˚_c⁄ãxt
(
ây
);

31 vﬁ©ûê
∂050
 *
ªgs
 = 
	`∂050_gë_ªgs
(
ba£
);

32 
uöt32_t
 
kmiú_rx
 = 
PL050_KMIIR_KMIRXINTR
;

33 
uöt32_t
 
kmiú_tx
 = (
ªgs
->
kmi¸
 & 
PL050_KMICR_KMITXINTREN
) != 0 ?

34 
PL050_KMIIR_KMITXINTR
 : 0;

35 
uöt32_t
 
kmiú
 = 
ªgs
->kmiir;

37 i‡((
kmiú
 & 
kmiú_rx
) != 0) {

38 
c
 = (Ë
	`PL050_KMIDATA_KMIDATA_GET
(
ªgs
->
kmid©a
);

40 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
ây
, &
c
, 1);

43 i‡((
kmiú
 & 
kmiú_tx
) != 0) {

44 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ây
, 1);

46 
	}
}

48 
boﬁ
 
	$∂050_fú°_›í
(

49 
πems_ãrmios_ây
 *
ây
,

50 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

51 
ãrmios
 *
ãrm
,

52 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


55 
¨m_∂050_c⁄ãxt
 *
˘x
 = (¨m_∂050_c⁄ãxà*Ë
ba£
;

56 vﬁ©ûê
∂050
 *
ªgs
 = 
	`∂050_gë_ªgs
(
ba£
);

57 
πems_°©us_code
 
sc
;

59 
	`πems_ãrmios_£t_öôül_baud
(
ây
, 
˘x
->
öôül_baud
);

61 
ªgs
->
kmi¸
 = 
PL050_KMICR_KMIEN
 | 
PL050_KMICR_KMIRXINTREN
;

63 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

64 
˘x
->
úq
,

66 
RTEMS_INTERRUPT_UNIQUE
,

67 
∂050_öãºu±
,

68 
ây


70 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

72  
åue
;

73 
	}
}

75 
	$∂050_œ°_˛o£
(

76 
πems_ãrmios_ây
 *
ây
,

77 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

78 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


81 
¨m_∂050_c⁄ãxt
 *
˘x
 = (¨m_∂050_c⁄ãxà*Ë
ba£
;

82 vﬁ©ûê
∂050
 *
ªgs
 = 
	`∂050_gë_ªgs
(
ba£
);

83 
πems_°©us_code
 
sc
;

85 
ªgs
->
kmi¸
 = 0;

87 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

88 
˘x
->
úq
,

89 
∂050_öãºu±
,

90 
ây


92 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

93 
	}
}

95 
	$∂050_wrôe_suµ‹t
(

96 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

97 c⁄° *
s
,

98 
size_t
 
n


101 vﬁ©ûê
∂050
 *
ªgs
 = 
	`∂050_gë_ªgs
(
ba£
);

103 i‡(
n
 > 0) {

104 
ªgs
->
kmid©a
 = 
	`PL050_KMIDATA_KMIDATA
(
s
[0]);

105 
ªgs
->
kmi¸
 |
PL050_KMICR_KMITXINTREN
;

107 
ªgs
->
kmi¸
 &~
PL050_KMICR_KMITXINTREN
;

109 
	}
}

111 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	g¨m_∂050_‚s
 = {

112 .
fú°_›í
 = 
∂050_fú°_›í
,

113 .
	gœ°_˛o£
 = 
∂050_œ°_˛o£
,

114 .
	gwrôe
 = 
∂050_wrôe_suµ‹t
,

115 .
	gmode
 = 
TERMIOS_IRQ_DRIVEN


	@src/lib/libbsp/arm/shared/arm-pl111-fb.c

15 
	~<î∫o.h
>

16 
	~<as£π.h
>

17 
	~<°dlib.h
>

19 
	~<πems/‰amebuf„r.h
>

20 
	~<πems/fb.h
>

21 
	~<πems/libio.h
>

23 
	~<b•.h
>

24 
	~<b•/¨m-∂111-fb.h
>

25 
	~<b•/Áèl.h
>

28 
πems_id
 
	m£m≠h‹e
;

29 *
	m‰ame_buf„r
;

30 } 
	t∂111_fb_c⁄ãxt
;

32 
∂111_fb_c⁄ãxt
 
	g∂111_fb_ö°™˚
;

34 c⁄° 
uöt8_t
 
	g∂111_bôs_≥r_pixñ
[] = { 1, 2, 4, 8, 16, 24, 16, 12 };

36 
uöt32_t
 
	$∂111_fb_gë_width
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

38  16U * (
	`PL111_LCD_TIMING0_PPL_GET
(
cfg
->
timög0
) + 1U);

39 
	}
}

41 
uöt32_t
 
	$∂111_fb_gë_height
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

43  
	`PL111_LCD_TIMING1_LPP_GET
(
cfg
->
timög1
) + 1U;

44 
	}
}

46 
uöt32_t
 
	$∂111_fb_gë_bôs_≥r_pixñ
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

48  
∂111_bôs_≥r_pixñ
[
	`PL111_LCD_CONTROL_LCD_BPP_GET
(
cfg
->
c⁄åﬁ
)];

49 
	}
}

51 
uöt32_t
 
	$∂111_fb_gë_löe_Àngth_ö_byãs
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

53 
uöt32_t
 
width
 = 
	`∂111_fb_gë_width
(
cfg
);

54 
uöt32_t
 
bôs_≥r_pixñ
 = 
	`∂111_fb_gë_bôs_≥r_pixñ
(
cfg
);

56  
width
 * ((
bôs_≥r_pixñ
 + 7U) / 8U);

57 
	}
}

59 
uöt32_t
 
	$∂111_fb_gë_‰ame_buf„r_size
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

61 
uöt32_t
 
löe_Àngth_ö_byãs
 = 
	`∂111_fb_gë_löe_Àngth_ö_byãs
(
cfg
);

62 
uöt32_t
 
height
 = 
	`∂111_fb_gë_height
(
cfg
);

64  
height
 * 
löe_Àngth_ö_byãs
;

65 
	}
}

67 
	$∂111_fb_powî_dñay
(c⁄° 
∂111_fb_c⁄fig
 *
cfg
)

69 
πems_öãrvÆ
 
dñay
 = (
cfg
->
powî_dñay_ö_us
 + 1)

70 / 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
();

71 
πems_°©us_code
 
sc
 = 
	`πems_èsk_wake_a·î
(
dñay
);

72 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

73 
	}
}

75 
πems_°©us_code
 
	$∂111_fb_öôülize
(
∂111_fb_c⁄ãxt
 *
˘x
)

77 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

78 c⁄° 
∂111_fb_c⁄fig
 *
cfg
 = 
	`¨m_∂111_fb_gë_c⁄fig
();

80 
˘x
->
‰ame_buf„r
 = 
	`ˇŒoc
(1, 
	`∂111_fb_gë_‰ame_buf„r_size
(
cfg
));

81 i‡(
˘x
->
‰ame_buf„r
 !
NULL
) {

82 vﬁ©ûê
∂111
 *
ªgs
 = 
cfg
->regs;

84 (*
cfg
->
£t_up
)(cfg);

86 
ªgs
->
lcd
.
upba£
 = (
uöt32_t
Ë
˘x
->
‰ame_buf„r
;

88 
ªgs
->
lcd
.
timög0
 = 
cfg
->timing0;

89 
ªgs
->
lcd
.
timög1
 = 
cfg
->timing1;

90 
ªgs
->
lcd
.
timög2
 = 
cfg
->timing2;

91 
ªgs
->
lcd
.
timög3
 = 
cfg
->timing3;

92 
ªgs
->
lcd
.
c⁄åﬁ
 = 
cfg
->control;

94 (*
cfg
->
pös_£t_up
)(cfg);

96 
ªgs
->
lcd
.
c⁄åﬁ
 = 
cfg
->control

97 | 
PL111_LCD_CONTROL_LCD_EN
;

99 
	`∂111_fb_powî_dñay
(
cfg
);

101 
ªgs
->
lcd
.
c⁄åﬁ
 = 
cfg
->control

102 | 
PL111_LCD_CONTROL_LCD_EN


103 | 
PL111_LCD_CONTROL_LCD_PWR
;

105 
sc
 = 
RTEMS_NO_MEMORY
;

108  
sc
;

109 
	}
}

111 
	$∂111_fb_de°roy
(c⁄° 
∂111_fb_c⁄ãxt
 *
˘x
)

113 c⁄° 
∂111_fb_c⁄fig
 *
cfg
 = 
	`¨m_∂111_fb_gë_c⁄fig
();

114 vﬁ©ûê
∂111
 *
ªgs
 = 
cfg
->regs;

116 
	`‰ì
(
˘x
->
‰ame_buf„r
);

118 
ªgs
->
lcd
.
c⁄åﬁ
 = 
cfg
->control

119 | 
PL111_LCD_CONTROL_LCD_EN
;

121 
	`∂111_fb_powî_dñay
(
cfg
);

123 
ªgs
->
lcd
.
c⁄åﬁ
 = 
cfg
->control;

125 (*
cfg
->
pös_ã¨_down
)(cfg);

126 (*
cfg
->
ã¨_down
)(cfg);

127 
	}
}

129 
	$∂111_fb_gë_fix_s¸ìn_öfo
(
fb_fix_s¸ìnöfo
 *
öfo
)

131 c⁄° 
∂111_fb_c⁄fig
 *
cfg
 = 
	`¨m_∂111_fb_gë_c⁄fig
();

132 c⁄° 
∂111_fb_c⁄ãxt
 *
˘x
 = &
∂111_fb_ö°™˚
;

134 
	`mem£t
(
öfo
, 0, (*info));

136 
öfo
->
smem_°¨t
 = 
˘x
->
‰ame_buf„r
;

137 
öfo
->
smem_Àn
 = 
	`∂111_fb_gë_‰ame_buf„r_size
(
cfg
);

138 
öfo
->
ty≥
 = 
FB_TYPE_PACKED_PIXELS
;

139 
öfo
->
visuÆ
 = 
FB_VISUAL_TRUECOLOR
;

140 
öfo
->
löe_Àngth
 = 
	`∂111_fb_gë_löe_Àngth_ö_byãs
(
cfg
);

141 
	}
}

143 
	$∂111_fb_gë_v¨_s¸ìn_öfo
(
fb_v¨_s¸ìnöfo
 *
öfo
)

145 c⁄° 
∂111_fb_c⁄fig
 *
cfg
 = 
	`¨m_∂111_fb_gë_c⁄fig
();

147 
	`mem£t
(
öfo
, 0, (*info));

149 
öfo
->
xªs
 = 
	`∂111_fb_gë_width
(
cfg
);

150 
öfo
->
yªs
 = 
	`∂111_fb_gë_height
(
cfg
);

151 
öfo
->
bôs_≥r_pixñ
 = 
	`∂111_fb_gë_bôs_≥r_pixñ
(
cfg
);

152 
	}
}

154 
	$∂111_fb_ªÀa£
(c⁄° 
∂111_fb_c⁄ãxt
 *
˘x
)

156 
πems_°©us_code
 
sc
 = 
	`πems_£m≠h‹e_ªÀa£
(
˘x
->
£m≠h‹e
);

157 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

158 
	`b•_Áèl
(
BSP_ARM_PL111_FATAL_SEM_RELEASE
);

160 
	}
}

162 
πems_devi˚_drivî
 
	$‰ame_buf„r_öôülize
(

163 
πems_devi˚_maj‹_numbî
 
maj‹
,

164 
πems_devi˚_mö‹_numbî
 
mö‹
,

165 *
¨g


168 
πems_°©us_code
 
sc
;

169 
∂111_fb_c⁄ãxt
 *
˘x
 = &
∂111_fb_ö°™˚
;

171 
sc
 = 
	`πems_io_ªgi°î_«me
(
FRAMEBUFFER_DEVICE_0_NAME
, 
maj‹
, 0);

172 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

173 
	`b•_Áèl
(
BSP_ARM_PL111_FATAL_REGISTER_DEV
);

176 
sc
 = 
	`πems_£m≠h‹e_¸óã
(

177 
	`πems_buûd_«me
('F', 'B', ' ', ' '),

179 
RTEMS_COUNTING_SEMAPHORE
,

181 &
˘x
->
£m≠h‹e


183 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

184 
	`b•_Áèl
(
BSP_ARM_PL111_FATAL_SEM_CREATE
);

187  
sc
;

188 
	}
}

190 
πems_devi˚_drivî
 
	$‰ame_buf„r_›í
(

191 
πems_devi˚_maj‹_numbî
 
maj‹
,

192 
πems_devi˚_mö‹_numbî
 
mö‹
,

193 *
¨g


196 
πems_°©us_code
 
sc
;

197 
∂111_fb_c⁄ãxt
 *
˘x
 = &
∂111_fb_ö°™˚
;

199 
sc
 = 
	`πems_£m≠h‹e_obèö
(

200 
˘x
->
£m≠h‹e
,

201 
RTEMS_WAIT
,

202 
RTEMS_NO_TIMEOUT


204 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

205 
sc
 = 
	`∂111_fb_öôülize
(
˘x
);

206 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

207 
	`∂111_fb_ªÀa£
(
˘x
);

211  
sc
;

212 
	}
}

214 
πems_devi˚_drivî
 
	$‰ame_buf„r_˛o£
(

215 
πems_devi˚_maj‹_numbî
 
maj‹
,

216 
πems_devi˚_mö‹_numbî
 
mö‹
,

217 *
¨g


220 c⁄° 
∂111_fb_c⁄ãxt
 *
˘x
 = &
∂111_fb_ö°™˚
;

222 
	`∂111_fb_de°roy
(
˘x
);

223 
	`∂111_fb_ªÀa£
(
˘x
);

225  
RTEMS_SUCCESSFUL
;

226 
	}
}

228 
πems_devi˚_drivî
 
	$‰ame_buf„r_ªad
(

229 
πems_devi˚_maj‹_numbî
 
maj‹
,

230 
πems_devi˚_mö‹_numbî
 
mö‹
,

231 *
¨g


234  
RTEMS_IO_ERROR
;

235 
	}
}

237 
πems_devi˚_drivî
 
	$‰ame_buf„r_wrôe
(

238 
πems_devi˚_maj‹_numbî
 
maj‹
,

239 
πems_devi˚_mö‹_numbî
 
mö‹
,

240 *
¨g


243  
RTEMS_IO_ERROR
;

244 
	}
}

246 
πems_devi˚_drivî
 
	$‰ame_buf„r_c⁄åﬁ
(

247 
πems_devi˚_maj‹_numbî
 
maj‹
,

248 
πems_devi˚_mö‹_numbî
 
mö‹
,

249 *
¨g


252 
πems_libio_io˘l_¨gs_t
 *
io˘l_¨g
 = 
¨g
;

253 
ío
 = 0;

255 
io˘l_¨g
->
comm™d
) {

256 
FBIOGET_FSCREENINFO
:

257 
	`∂111_fb_gë_fix_s¸ìn_öfo
(
io˘l_¨g
->
buf„r
);

259 
FBIOGET_VSCREENINFO
:

260 
	`∂111_fb_gë_v¨_s¸ìn_öfo
(
io˘l_¨g
->
buf„r
);

263 
ío
 = 
EINVAL
;

267 i‡(
ío
 == 0) {

268 
io˘l_¨g
->
io˘l_ªtu∫
 = 0;

270 
io˘l_¨g
->
io˘l_ªtu∫
 = -1;

271 
î∫o
 = 
ío
;

274  
RTEMS_SUCCESSFUL
;

275 
	}
}

	@src/lib/libbsp/arm/shared/armv7m/clock/armv7m-clock-config.c

15 
	~<πems.h
>

16 
	~<πems/timecou¡î.h
>

17 
	~<πems/sc‹e/¨mv7m.h
>

19 
	~<b•.h
>

21 #ifde‡
ARM_MULTILIB_ARCH_V7M


24 
Clock_i§
(*
¨g
);

27 
πems_timecou¡î_sim∂e
 
	mba£
;

28 
boﬁ
 
	mcou¡Êag
;

29 } 
	tARMV7M_Timecou¡î
;

31 
ARMV7M_Timecou¡î
 
	g_ARMV7M_TC
;

33 
uöt32_t
 
	$_ARMV7M_TC_gë
(
πems_timecou¡î_sim∂e
 *
tc
)

35 vﬁ©ûê
ARMV7M_Sy°ick
 *
sy°ick
 = 
_ARMV7M_Sy°ick
;

37  
sy°ick
->
cvr
;

38 
	}
}

40 
boﬁ
 
	$_ARMV7M_TC_is_≥ndög
(
πems_timecou¡î_sim∂e
 *
ba£
)

42 
ARMV7M_Timecou¡î
 *
tc
 = (ARMV7M_Timecou¡î *Ë
ba£
;

43 
πems_öãºu±_Àvñ
 
Àvñ
;

44 
boﬁ
 
cou¡Êag
;

46 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

48 
cou¡Êag
 = 
tc
->countflag;

49 i‡(!
cou¡Êag
) {

50 vﬁ©ûê
ARMV7M_Sy°ick
 *
sy°ick
 = 
_ARMV7M_Sy°ick
;

52 
cou¡Êag
 = ((
sy°ick
->
c§
 & 
ARMV7M_SYSTICK_CSR_COUNTFLAG
) != 0);

53 
tc
->
cou¡Êag
 = countflag;

56 
	`πems_öãºu±_íabÀ
(
Àvñ
);

58  
cou¡Êag
;

59 
	}
}

61 
uöt32_t
 
	$_ARMV7M_TC_gë_timecou¡
(
timecou¡î
 *
tc
)

63  
	`πems_timecou¡î_sim∂e_downcou¡î_gë
(

64 
tc
,

65 
_ARMV7M_TC_gë
,

66 
_ARMV7M_TC_is_≥ndög


68 
	}
}

70 
	$_ARMV7M_TC_©_tick
(
πems_timecou¡î_sim∂e
 *
ba£
)

72 
ARMV7M_Timecou¡î
 *
tc
 = (ARMV7M_Timecou¡î *Ë
ba£
;

73 vﬁ©ûê
ARMV7M_Sy°ick
 *
sy°ick
 = 
_ARMV7M_Sy°ick
;

75 
tc
->
cou¡Êag
 = 
Ál£
;

78 
sy°ick
->
c§
;

79 
	}
}

81 
	$_ARMV7M_TC_tick
()

83 
	`πems_timecou¡î_sim∂e_downcou¡î_tick
(

84 &
_ARMV7M_TC
.
ba£
,

85 
_ARMV7M_TC_gë
,

86 
_ARMV7M_TC_©_tick


88 
	}
}

90 
	$_ARMV7M_Sy°ick_h™dÀr
()

92 
	`_ARMV7M_I¡îru±_£rvi˚_íãr
();

93 
	`Clock_i§
(
NULL
);

94 
	`_ARMV7M_I¡îru±_£rvi˚_Àave
();

95 
	}
}

97 
	$_ARMV7M_Sy°ick_h™dÀr_ö°Æl
()

99 
	`_ARMV7M_Së_ex˚±i⁄_¥i‹ôy_™d_h™dÀr
(

100 
ARMV7M_VECTOR_SYSTICK
,

101 
BSP_ARMV7M_SYSTICK_PRIORITY
,

102 
_ARMV7M_Sy°ick_h™dÀr


104 
	}
}

106 
	$_ARMV7M_Sy°ick_öôülize
()

108 vﬁ©ûê
ARMV7M_Sy°ick
 *
sy°ick
 = 
_ARMV7M_Sy°ick
;

109 #ifde‡
BSP_ARMV7M_SYSTICK_FREQUENCY


110 
uöt64_t
 
‰eq
 = 
BSP_ARMV7M_SYSTICK_FREQUENCY
;

112 
uöt64_t
 
‰eq
 = 
	`ARMV7M_SYSTICK_CALIB_TENMS_GET
(
sy°ick
->
ˇlib
) * 100ULL;

114 
uöt64_t
 
us_≥r_tick
 = 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
();

115 
uöt64_t
 
öãrvÆ
 = (
‰eq
 * 
us_≥r_tick
) / 1000000ULL;

117 
sy°ick
->
rvr
 = (
uöt32_t
Ë
öãrvÆ
;

118 
sy°ick
->
cvr
 = 0;

119 
sy°ick
->
c§
 = 
ARMV7M_SYSTICK_CSR_ENABLE


120 | 
ARMV7M_SYSTICK_CSR_TICKINT


121 | 
ARMV7M_SYSTICK_CSR_CLKSOURCE
;

123 
	`πems_timecou¡î_sim∂e_ö°Æl
(

124 &
_ARMV7M_TC
.
ba£
,

125 
‰eq
,

126 
öãrvÆ
,

127 
_ARMV7M_TC_gë_timecou¡


129 
	}
}

131 
	$_ARMV7M_Sy°ick_˛ónup
()

133 vﬁ©ûê
ARMV7M_Sy°ick
 *
sy°ick
 = 
_ARMV7M_Sy°ick
;

135 
sy°ick
->
c§
 = 0;

136 
	}
}

138 
	#Clock_drivî_timecou¡î_tick
(Ë
	`_ARMV7M_TC_tick
()

	)

140 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

141 
	`_ARMV7M_Sy°ick_öôülize
()

	)

143 
	#Clock_drivî_suµ‹t_ö°Æl_i§
(
i§
, 
ﬁd_i§
) \

145 
	`_ARMV7M_Sy°ick_h™dÀr_ö°Æl
(); \

146 
ﬁd_i§
 = 
NULL
; \

147 } 0)

	)

149 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

150 
	`_ARMV7M_Sy°ick_˛ónup
()

	)

153 
	~"../../../../sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libbsp/arm/shared/armv7m/include/armv7m-irq.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARMV7M_IRQ_H


24 
	#LIBBSP_ARM_SHARED_ARMV7M_IRQ_H


	)

26 #ifde‡
__˝lu•lus


30 
_ARMV7M_NVIC_I¡îru±_di•©ch
();

32 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/armv7m/irq/armv7m-irq-dispatch.c

15 
	~<πems/sc‹e/¨mv7m.h
>

17 
	~<b•/úq-gíîic.h
>

18 
	~<b•/¨mv7m-úq.h
>

20 #ifde‡
ARM_MULTILIB_ARCH_V7M


22 
	$_ARMV7M_NVIC_I¡îru±_di•©ch
()

24 
πems_ve˘‹_numbî
 
ve˘‹
 =

25 
	`ARMV7M_SCB_ICSR_VECTACTIVE_GET
(
_ARMV7M_SCB
->
ic§
);

27 
	`_ARMV7M_I¡îru±_£rvi˚_íãr
();

28 
	`b•_öãºu±_h™dÀr_di•©ch
(
	`ARMV7M_IRQ_OF_VECTOR
(
ve˘‹
));

29 
	`_ARMV7M_I¡îru±_£rvi˚_Àave
();

30 
	}
}

	@src/lib/libbsp/arm/shared/armv7m/irq/armv7m-irq.c

15 
	~<πems/sc‹e/¨mv7m.h
>

17 
	~<b•.h
>

18 
	~<b•/úq.h
>

19 
	~<b•/úq-gíîic.h
>

20 
	~<b•/lökî-symbﬁs.h
>

21 
	~<b•/¨mv7m-úq.h
>

23 #ifde‡
ARM_MULTILIB_ARCH_V7M


25 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

27 
	`_ARMV7M_NVIC_Së_íabÀ
((Ë
ve˘‹
);

29  
RTEMS_SUCCESSFUL
;

30 
	}
}

32 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

34 
	`_ARMV7M_NVIC_CÀ¨_íabÀ
((Ë
ve˘‹
);

36  
RTEMS_SUCCESSFUL
;

37 
	}
}

39 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

41 
i
;

42 
ARMV7M_Ex˚±i⁄_h™dÀr
 *
ve˘‹_èbÀ
 =

43 (
ARMV7M_Ex˚±i⁄_h™dÀr
 *Ë
b•_ve˘‹_èbÀ_begö
;

45 
	`mem˝y
(

46 
ve˘‹_èbÀ
,

47 
b•_°¨t_ve˘‹_èbÀ_begö
,

48 (
size_t
Ë
b•_ve˘‹_èbÀ_size


51 
i
 = 
BSP_INTERRUPT_VECTOR_MIN
; i <
BSP_INTERRUPT_VECTOR_MAX
; ++i) {

52 
ve˘‹_èbÀ
 [
	`ARMV7M_VECTOR_IRQ
(
i
)] = 
_ARMV7M_NVIC_I¡îru±_di•©ch
;

53 
	`_ARMV7M_NVIC_CÀ¨_íabÀ
(
i
);

54 
	`_ARMV7M_NVIC_CÀ¨_≥ndög
(
i
);

55 
	`_ARMV7M_NVIC_Së_¥i‹ôy
(
i
, 
BSP_ARMV7M_IRQ_PRIORITY_DEFAULT
);

58 
_ARMV7M_SCB
->
vt‹
 = 
ve˘‹_èbÀ
;

60  
RTEMS_SUCCESSFUL
;

61 
	}
}

	@src/lib/libbsp/arm/shared/comm/uart.c

15 
	~<b•.h
>

16 
	~<úq.h
>

17 
	~<ªgi°îs.h
>

18 
	~<u¨t.h
>

19 
	~<πems/libio.h
>

20 
	~<as£π.h
>

26 
	su¨t_d©a


28 
	mhwFlow
;

29 
	mbaud
;

32 
u¨t_d©a
 
	gu¨t_d©a
[2];

39 
ölöe
 

40 
	$uªad
(
u¨t
, 
ªg
)

42 
vÆ
;

44 
vÆ
 = 
Regs
[
ªg
];

46  
vÆ
;

47 
	}
}

49 
ölöe
 

50 
	$uwrôe
(
u¨t
, 
ªg
, 
vÆ
)

53 
Regs
[
ªg
] = 
vÆ
;

55 
	}
}

57 #ifde‡
UARTDEBUG


59 
	$u¨tEº‹
(
u¨t
)

61 
u¨tSètus
, 
dummy
;

63 
u¨tSètus
 = 
	`uªad
(
u¨t
, 
LSR
);

64 
dummy
 = 
	`uªad
(
u¨t
, 
RBR
);

66 i‡(
u¨tSètus
 & 
OE
)

67 
	`¥ötk
("********* OverÑun Error **********\n");

68 i‡(
u¨tSètus
 & 
PE
)

69 
	`¥ötk
("********* Parity Error **********\n");

70 i‡(
u¨tSètus
 & 
FE
)

71 
	`¥ötk
("********* Framing Error **********\n");

72 i‡(
u¨tSètus
 & 
BI
)

73 
	`¥ötk
("********* Parity Error **********\n");

74 i‡(
u¨tSètus
 & 
ERFIFO
)

75 
	`¥ötk
("********* ErrorÑeceive Fifo **********\n");

77 
	}
}

79 
ölöe
 
	$u¨tEº‹
(
u¨t
)

81 
u¨tSètus
;

83 
u¨tSètus
 = 
	`uªad
(
u¨t
, 
LSR
);

84 
u¨tSètus
 = 
	`uªad
(
u¨t
, 
RBR
);

85 
	}
}

95 
	$BSP_u¨t_öô
(
u¨t
, 
baud
, 
hwFlow
)

97 
tmp
;

100 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

102 
baud
)

119 
	`as£π
(0);

124 
	`uwrôe
(
u¨t
, 
CNT
, 
UART_ENABLE
 | 
PAD_ENABLE
);

127 
	`uwrôe
(
u¨t
, 
LCR
, 
DLAB
);

130 
	`uwrôe
(
u¨t
, 
DLL
, (
BSPBa£Baud
/
baud
) & 0xff);

131 
	`uwrôe
(
u¨t
, 
DLM
, ((
BSPBa£Baud
/
baud
) >> 8) & 0xff);

134 
	`uwrôe
(
u¨t
, 
LCR
, 
CHR_8_BITS
);

137 
	`uwrôe
(
u¨t
, 
FCR
, 
FIFO_EN
 | 
XMIT_RESET
 | 
RCV_RESET
 | 
RECEIVE_FIFO_TRIGGER12
);

140 
	`uwrôe
(
u¨t
, 
IER
, 0);

143 
tmp
 = 
	`uªad
(
u¨t
, 
LSR
);

144 
tmp
 = 
	`uªad
(
u¨t
, 
RBR
);

147 
u¨t_d©a
[
u¨t
].
hwFlow
 = hwFlow;

148 
u¨t_d©a
[
u¨t
].
baud
 = baud;

150 
	}
}

156 
	$BSP_u¨t_£t_baud
(
u¨t
, 
baud
)

158 
õr
;

161 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

169 if(
baud
 =
u¨t_d©a
[
u¨t
].baud)

174 
õr
 = 
	`uªad
(
u¨t
, 
IER
);

176 
	`BSP_u¨t_öô
(
u¨t
, 
baud
, 
u¨t_d©a
[u¨t].
hwFlow
);

178 
	`uwrôe
(
u¨t
, 
IER
, 
õr
);

181 
	}
}

187 
	$BSP_u¨t_öå_˘æ
(
u¨t
, 
cmd
)

190 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

192 
cmd
)

194 
BSP_UART_INTR_CTRL_DISABLE
:

195 
	`uwrôe
(
u¨t
, 
IER
, 
INTERRUPT_DISABLE
);

197 
BSP_UART_INTR_CTRL_ENABLE
:

198 
	`uwrôe
(
u¨t
, 
IER
,

199 (
RECEIVE_ENABLE
 |

200 
TRANSMIT_ENABLE
 |

201 
RECEIVER_LINE_ST_ENABLE


205 
BSP_UART_INTR_CTRL_TERMIOS
:

206 
	`uwrôe
(
u¨t
, 
IER
,

207 (
RECEIVE_ENABLE
 |

208 
RECEIVER_LINE_ST_ENABLE


212 
BSP_UART_INTR_CTRL_GDB
:

213 
	`uwrôe
(
u¨t
, 
IER
, 
RECEIVE_ENABLE
);

216 
	`as£π
(0);

221 
	}
}

233 
	$BSP_u¨t_pﬁÀd_°©us
(
u¨t
)

235 
vÆ
;

237 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

239 
vÆ
 = 
	`uªad
(
u¨t
, 
LSR
);

241 if(
vÆ
 & 
BI
)

244 
	`uªad
(
u¨t
, 
RBR
);

245  
BSP_UART_STATUS_BREAK
;

248 if((
vÆ
 & (
DR
 | 
OE
 | 
FE
)) == 1)

251  
BSP_UART_STATUS_CHAR
;

254 if((
vÆ
 & (
DR
 | 
OE
 | 
FE
)) == 0)

257  
BSP_UART_STATUS_NOCHAR
;

264 
	`uªad
(
u¨t
, 
RBR
);

266  
BSP_UART_STATUS_ERROR
;

267 
	}
}

273 
	$BSP_u¨t_pﬁÀd_wrôe
(
u¨t
, 
vÆ
)

275 
vÆ1
;

278 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

282 if((
vÆ1
=
	`uªad
(
u¨t
, 
LSR
)Ë& 
THRE
)

288 
	`uwrôe
(
u¨t
, 
THR
, 
vÆ
 & 0xff);

291 
	}
}

294 
	$BSP_ouçut_ch¨_vü_£rül
(
vÆ
)

296 
	`BSP_u¨t_pﬁÀd_wrôe
(
BSPC⁄sﬁeP‹t
, 
vÆ
);

297 i‡(
vÆ
 ='\n'Ë
	`BSP_u¨t_pﬁÀd_wrôe
(
BSPC⁄sﬁeP‹t
,'\r');

298 
	}
}

304 
	$BSP_u¨t_pﬁÀd_ªad
(
u¨t
)

306 
vÆ
;

308 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

312 if(
	`uªad
(
u¨t
, 
LSR
Ë& 
DR
)

318 
vÆ
 = 
	`uªad
(
u¨t
, 
RBR
);

320  ()(
vÆ
 & 0xff);

321 
	}
}

324 
	$BSP_pﬁl_ch¨_vü_£rül
()

326  
	`BSP_u¨t_pﬁÀd_ªad
(
BSPC⁄sﬁeP‹t
);

327 
	}
}

331 vﬁ©ûê
	gãrmios_°›≥d_com1
 = 0;

332 vﬁ©ûê
	gãrmios_tx_a˘ive_com1
 = 0;

333 * 
	gãrmios_âyp_com1
 = 
NULL
;

334 
	gãrmios_tx_hﬁd_com1
 = 0;

335 vﬁ©ûê
	gãrmios_tx_hﬁd_vÆid_com1
 = 0;

337 vﬁ©ûê
	gãrmios_°›≥d_com2
 = 0;

338 vﬁ©ûê
	gãrmios_tx_a˘ive_com2
 = 0;

339 * 
	gãrmios_âyp_com2
 = 
NULL
;

340 
	gãrmios_tx_hﬁd_com2
 = 0;

341 vﬁ©ûê
	gãrmios_tx_hﬁd_vÆid_com2
 = 0;

347 
	$BSP_u¨t_ãrmios_£t
(
u¨t
, *
âyp
)

349 
	`as£π
(
u¨t
 =
BSP_UART_COM1
 || u¨à=
BSP_UART_COM2
);

351 if(
u¨t
 =
BSP_UART_COM1
)

353 
ãrmios_°›≥d_com1
 = 0;

354 
ãrmios_tx_a˘ive_com1
 = 0;

355 
ãrmios_âyp_com1
 = 
âyp
;

356 
ãrmios_tx_hﬁd_com1
 = 0;

357 
ãrmios_tx_hﬁd_vÆid_com1
 = 0;

361 
ãrmios_°›≥d_com2
 = 0;

362 
ãrmios_tx_a˘ive_com2
 = 0;

363 
ãrmios_âyp_com2
 = 
âyp
;

364 
ãrmios_tx_hﬁd_com2
 = 0;

365 
ãrmios_tx_hﬁd_vÆid_com2
 = 0;

369 
	}
}

372 
	$BSP_u¨t_ãrmios_wrôe_com1
(
mö‹
, c⁄° *
buf
, 
Àn
)

374 if(
Àn
 <= 0)

380 
	`as£π
((
	`uªad
(
BSP_UART_COM1
, 
LSR
Ë& 
THRE
) != 0);

382 if(
ãrmios_°›≥d_com1
)

385 
ãrmios_tx_hﬁd_com1
 = *
buf
;

386 
ãrmios_tx_hﬁd_vÆid_com1
 = 1;

391 
	`uwrôe
(
BSP_UART_COM1
, 
THR
, *
buf
 & 0xff);

394 if(!
ãrmios_tx_a˘ive_com1
)

396 
ãrmios_tx_a˘ive_com1
 = 1;

397 
	`uwrôe
(
BSP_UART_COM1
, 
IER
,

398 (
RECEIVE_ENABLE
 |

399 
TRANSMIT_ENABLE
 |

400 
RECEIVER_LINE_ST_ENABLE


406 
	}
}

409 
	$BSP_u¨t_ãrmios_wrôe_com2
(
mö‹
, c⁄° *
buf
, 
Àn
)

411 if(
Àn
 <= 0)

417 
	`as£π
((
	`uªad
(
BSP_UART_COM2
, 
LSR
Ë& 
THRE
) != 0);

419 if(
ãrmios_°›≥d_com2
)

422 
ãrmios_tx_hﬁd_com2
 = *
buf
;

423 
ãrmios_tx_hﬁd_vÆid_com2
 = 1;

429 
	`uwrôe
(
BSP_UART_COM2
, 
THR
, *
buf
 & 0xff);

432 if(!
ãrmios_tx_a˘ive_com2
)

434 
ãrmios_tx_a˘ive_com2
 = 1;

435 
	`uwrôe
(
BSP_UART_COM2
, 
IER
,

436 (
RECEIVE_ENABLE
 |

437 
TRANSMIT_ENABLE
 |

438 
RECEIVER_LINE_ST_ENABLE


444 
	}
}

447 
	$BSP_u¨t_ãrmios_i§_com1
()

449 
buf
[40];

450 
off
, 
ªt
, 
ve˘
;

452 
off
 = 0;

456 
ve˘
 = 
	`uªad
(
BSP_UART_COM1
, 
IIR
) & 0xf;

458 
ve˘
)

460 
NO_MORE_INTR
 :

462 if(
off
 != 0)

465 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
ãrmios_âyp_com1
,

466 (*)
buf
,

467 
off
);

470 
TRANSMITTER_HODING_REGISTER_EMPTY
 :

476 
ªt
 = 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ãrmios_âyp_com1
, 1);

479 if(
ªt
 == 0)

481 
	`uwrôe
(
BSP_UART_COM1
, 
IER
,

482 (
RECEIVE_ENABLE
 |

483 
RECEIVER_LINE_ST_ENABLE


486 
ãrmios_tx_a˘ive_com1
 = 0;

489 
RECEIVER_DATA_AVAIL
 :

490 
CHARACTER_TIMEOUT_INDICATION
:

492 
	`as£π
(
off
 < (
buf
));

493 
buf
[
off
++] = 
	`uªad
(
BSP_UART_COM1
, 
RBR
);

495 
RECEIVER_ERROR
:

497 
	`u¨tEº‹
(
BSP_UART_COM1
);

501 
	`as£π
(0);

505 
	}
}

508 
	$BSP_u¨t_ãrmios_i§_com2
()

510 
buf
[40];

511 
off
, 
ªt
, 
ve˘
;

513 
off
 = 0;

517 
ve˘
 = 
	`uªad
(
BSP_UART_COM2
, 
IIR
) & 0xf;

519 
ve˘
)

521 
NO_MORE_INTR
 :

523 if(
off
 != 0)

526 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
ãrmios_âyp_com2
,

527 (*)
buf
,

528 
off
);

531 
TRANSMITTER_HODING_REGISTER_EMPTY
 :

537 
ªt
 = 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ãrmios_âyp_com2
, 1);

540 if(
ªt
 == 0)

542 
	`uwrôe
(
BSP_UART_COM2
, 
IER
,

543 (
RECEIVE_ENABLE
 |

544 
RECEIVER_LINE_ST_ENABLE


547 
ãrmios_tx_a˘ive_com2
 = 0;

550 
RECEIVER_DATA_AVAIL
 :

551 
CHARACTER_TIMEOUT_INDICATION
:

553 
	`as£π
(
off
 < (
buf
));

554 
buf
[
off
++] = 
	`uªad
(
BSP_UART_COM2
, 
RBR
);

556 
RECEIVER_ERROR
:

558 
	`u¨tEº‹
(
BSP_UART_COM2
);

562 
	`as£π
(0);

566 
	}
}

	@src/lib/libbsp/arm/shared/comm/uart.h

23 #i‚de‡
_BSPUART_H


24 
	#_BSPUART_H


	)

26 
BSP_u¨t_öô
(
u¨t
, 
baud
, 
hwFlow
);

27 
BSP_u¨t_£t_baud
(
auπ
, 
baud
);

28 
BSP_u¨t_öå_˘æ
(
u¨t
, 
cmd
);

29 
BSP_u¨t_thrŸée
(
u¨t
);

30 
BSP_u¨t_u¡hrŸée
(
u¨t
);

31 
BSP_u¨t_pﬁÀd_°©us
(
u¨t
);

32 
BSP_u¨t_pﬁÀd_wrôe
(
u¨t
, 
vÆ
);

33 
BSP_u¨t_pﬁÀd_ªad
(
u¨t
);

34 
BSP_u¨t_ãrmios_£t
(
u¨t
, *
âyp
);

35 
BSP_u¨t_ãrmios_wrôe_com1
(
mö‹
, c⁄° *
buf
, 
Àn
);

36 
BSP_u¨t_ãrmios_wrôe_com2
(
mö‹
, c⁄° *
buf
, 
Àn
);

37 
BSP_u¨t_ãrmios_i§_com1
();

38 
BSP_u¨t_ãrmios_i§_com2
();

39 
BSP_u¨t_dbgi§_com1
();

40 
BSP_u¨t_dbgi§_com2
();

41 
BSP_pﬁl_ch¨_vü_£rül
();

42 
BSP_ouçut_ch¨_vü_£rül
(
vÆ
);

43 
BSPC⁄sﬁeP‹t
;

44 
BSPBa£Baud
;

50 
	#BSP_UART_INTR_CTRL_DISABLE
 (0)

	)

51 
	#BSP_UART_INTR_CTRL_GDB
 (0xØË

	)

52 
	#BSP_UART_INTR_CTRL_ENABLE
 (0xbbË

	)

53 
	#BSP_UART_INTR_CTRL_TERMIOS
 (0xccË

	)

56 
	#BSP_UART_STATUS_ERROR
 (-1Ë

	)

57 
	#BSP_UART_STATUS_NOCHAR
 (0Ë

	)

58 
	#BSP_UART_STATUS_CHAR
 (1Ë

	)

59 
	#BSP_UART_STATUS_BREAK
 (2Ë

	)

62 
	#BSP_UART_COM1
 (0)

	)

63 
	#BSP_UART_COM2
 (1)

	)

69 
	#COM1_BASE_IO
 0x3F8

	)

70 
	#COM2_BASE_IO
 0x2F8

	)

77 
	#RBR
 
RSRBR


	)

78 
	#THR
 
RSTHR


	)

79 
	#IER
 
RSIER


	)

82 
	#IIR
 
RSIIR


	)

83 
	#FCR
 
RSFCR


	)

84 
	#LCR
 
RSLCR


	)

85 
	#LSR
 
RSLSR


	)

88 
	#DLL
 
RSDLL


	)

89 
	#DLM
 
RSDLH


	)

92 
	#CNT
 
RSCNT


	)

97 
	#UART_ENABLE
 1

	)

98 
	#PAD_ENABLE
 2

	)

103 
	#NO_MORE_INTR
 1

	)

104 
	#TRANSMITTER_HODING_REGISTER_EMPTY
 2

	)

105 
	#RECEIVER_DATA_AVAIL
 4

	)

106 
	#RECEIVER_ERROR
 6

	)

107 
	#CHARACTER_TIMEOUT_INDICATION
 12

	)

112 
	#RECEIVE_ENABLE
 0x1

	)

113 
	#TRANSMIT_ENABLE
 0x2

	)

114 
	#RECEIVER_LINE_ST_ENABLE
 0x4

	)

115 
	#INTERRUPT_DISABLE
 0x0

	)

120 
	#DR
 0x01

	)

121 
	#OE
 0x02

	)

122 
	#PE
 0x04

	)

123 
	#FE
 0x08

	)

124 
	#BI
 0x10

	)

125 
	#THRE
 0x20

	)

126 
	#TEMT
 0x40

	)

127 
	#ERFIFO
 0x80

	)

132 
	#CHR_5_BITS
 0

	)

133 
	#CHR_6_BITS
 1

	)

134 
	#CHR_7_BITS
 2

	)

135 
	#CHR_8_BITS
 3

	)

137 
	#WL
 0x03

	)

138 
	#STB
 0x04

	)

139 
	#PEN
 0x08

	)

140 
	#EPS
 0x10

	)

141 
	#SP
 0x20

	)

142 
	#BCB
 0x40

	)

143 
	#DLAB
 0x80

	)

149 
	#FIFO_CTRL
 0x01

	)

150 
	#FIFO_EN
 0x01

	)

151 
	#XMIT_RESET
 0x04

	)

152 
	#RCV_RESET
 0x02

	)

153 
	#FCR3
 0x08

	)

155 
	#RECEIVE_FIFO_TRIGGER1
 0x0

	)

156 
	#RECEIVE_FIFO_TRIGGER4
 0x40

	)

157 
	#RECEIVE_FIFO_TRIGGER8
 0x80

	)

158 
	#RECEIVE_FIFO_TRIGGER12
 0xc0

	)

159 
	#TRIG_LEVEL
 0xc0

	)

	@src/lib/libbsp/arm/shared/doxygen.h

	@src/lib/libbsp/arm/shared/include/arm-a8core-start.h

17 #i‚de‡
LIBBSP_ARM_SHARED_ARM_A8CORE_START_H


18 
	#LIBBSP_ARM_SHARED_ARM_A8CORE_START_H


	)

20 
	~<lib˝u/¨m-˝15.h
>

22 
	~<b•.h
>

23 
	~<b•/°¨t.h
>

24 
	~<b•/¨m-îøè.h
>

26 #ifde‡
__˝lu•lus


30 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a8c‹e_°¨t_£t_ve˘‹_ba£
()

35 i‡(
b•_ve˘‹_èbÀ_íd
 !
b•_ve˘‹_èbÀ_size
) {

36 
uöt32_t
 
˘æ
;

38 
¨m_˝15_£t_ve˘‹_ba£_addªss
(
b•_ve˘‹_èbÀ_begö
);

40 
˘æ
 = 
¨m_˝15_gë_c⁄åﬁ
();

41 
˘æ
 &~
ARM_CP15_CTRL_V
;

42 
¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

46 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a8c‹e_°¨t_hook_1
()

48 
¨m_a8c‹e_°¨t_£t_ve˘‹_ba£
();

51 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-a9mpcore-clock.h

9 #i‚de‡
LIBBSP_ARM_SHARED_ARM_A9MPCORE_CLOCK_H


10 
	#LIBBSP_ARM_SHARED_ARM_A9MPCORE_CLOCK_H


	)

12 
	~<πems/cou¡î.h
>

14 #ifde‡
__˝lu•lus


23 
uöt32_t
 
a9mpc‹e_˛ock_≥rùh˛k
();

29 
ölöe
 
a9mpc‹e_˛ock_öôülize_óæy
()

31 
πems_cou¡î_öôülize_c⁄vîãr
(
a9mpc‹e_˛ock_≥rùh˛k
());

34 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-a9mpcore-irq.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_A9MPCORE_IRQ_H


24 
	#LIBBSP_ARM_SHARED_ARM_A9MPCORE_IRQ_H


	)

26 #ifde‡
__˝lu•lus


30 
	#A9MPCORE_IRQ_GT
 27

	)

31 
	#A9MPCORE_IRQ_NFIQ
 28

	)

32 
	#A9MPCORE_IRQ_PT
 29

	)

33 
	#A9MPCORE_IRQ_PW
 30

	)

34 
	#A9MPCORE_IRQ_NIRQ
 31

	)

36 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-a9mpcore-regs.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_A9MPCORE_REGS_H


24 
	#LIBBSP_ARM_SHARED_ARM_A9MPCORE_REGS_H


	)

26 
	~<b•/utûôy.h
>

29 
uöt32_t
 
	m˘æ
;

30 
	#A9MPCORE_SCU_CTRL_SCU_EN
 
	`BSP_BIT32
(0)

	)

31 
	#A9MPCORE_SCU_CTRL_ADDR_FLT_EN
 
	`BSP_BIT32
(1)

	)

32 
	#A9MPCORE_SCU_CTRL_RAM_PAR_EN
 
	`BSP_BIT32
(2)

	)

33 
	#A9MPCORE_SCU_CTRL_SCU_SPEC_LINE_FILL_EN
 
	`BSP_BIT32
(3)

	)

34 
	#A9MPCORE_SCU_CTRL_FORCE_PORT_0_EN
 
	`BSP_BIT32
(4)

	)

35 
	#A9MPCORE_SCU_CTRL_SCU_STANDBY_EN
 
	`BSP_BIT32
(5)

	)

36 
	#A9MPCORE_SCU_CTRL_IC_STANDBY_EN
 
	`BSP_BIT32
(6)

	)

37 
uöt32_t
 
	mcfg
;

38 
	#A9MPCORE_SCU_CFG_CPU_COUNT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 1)

	)

39 
	#A9MPCORE_SCU_CFG_CPU_COUNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

40 
	#A9MPCORE_SCU_CFG_CPU_COUNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 1)

	)

41 
	#A9MPCORE_SCU_CFG_SMP_MODE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

42 
	#A9MPCORE_SCU_CFG_SMP_MODE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

43 
	#A9MPCORE_SCU_CFG_SMP_MODE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

44 
	#A9MPCORE_SCU_CFG_TAG_RAM_SIZE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

45 
	#A9MPCORE_SCU_CFG_TAG_RAM_SIZE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

46 
	#A9MPCORE_SCU_CFG_TAG_RAM_SIZE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

47 
uöt32_t
 
	mpwr°
;

48 
uöt32_t
 
	mövss
;

49 
	#A9MPCORE_SCU_INVSS_CPU0
(
ways
Ë
	`BSP_FLD32
(
vÆ
, 0, 3)

	)

50 
	#A9MPCORE_SCU_INVSS_CPU0_GET
(
ªg
Ë

	)

51 
	#A9MPCORE_SCU_INVSS_CPU0_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

52 
	#A9MPCORE_SCU_INVSS_CPU1
(
ways
Ë
	`BSP_FLD32
(
vÆ
, 4, 7)

	)

53 
	#A9MPCORE_SCU_INVSS_CPU1_GET
(
ªg
Ë

	)

54 
	#A9MPCORE_SCU_INVSS_CPU1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

55 
	#A9MPCORE_SCU_INVSS_CPU2
(
ways
Ë
	`BSP_FLD32
(
vÆ
, 8, 11)

	)

56 
	#A9MPCORE_SCU_INVSS_CPU2_GET
(
ªg
Ë

	)

57 
	#A9MPCORE_SCU_INVSS_CPU2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

58 
	#A9MPCORE_SCU_INVSS_CPU3
(
ways
Ë
	`BSP_FLD32
(
vÆ
, 12, 15)

	)

59 
	#A9MPCORE_SCU_INVSS_CPU3_GET
(
ªg
Ë

	)

60 
	#A9MPCORE_SCU_INVSS_CPU3_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

61 
uöt32_t
 
	mª£rved_09
[8];

62 
uöt32_t
 
	mdügn_˘æ
;

63 
	#A9MPCORE_SCU_DIAGN_CTRL_MIGRATORY_BIT_DISABLE
 
	`BSP_BIT32
(0)

	)

64 
uöt32_t
 
	mª£rved_10
[3];

65 
uöt32_t
 
	mÊt°¨t
;

66 
uöt32_t
 
	mÊãnd
;

67 
uöt32_t
 
	mª£rved_48
[2];

68 
uöt32_t
 
	mßc
;

69 
uöt32_t
 
	m¢ßc
;

70 } 
	ta9mpc‹e_scu
;

73 } 
	ga9mpc‹e_gic
;

76 
uöt32_t
 
	m˙ålowî
;

77 
uöt32_t
 
	m˙åuµî
;

78 
	#A9MPCORE_GT_CTRL_PRESCALER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

79 
	#A9MPCORE_GT_CTRL_PRESCALER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

80 
	#A9MPCORE_GT_CTRL_PRESCALER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

81 
	#A9MPCORE_GT_CTRL_AUTOINC_EN
 
	`BSP_BIT32
(3)

	)

82 
	#A9MPCORE_GT_CTRL_IRQ_EN
 
	`BSP_BIT32
(2)

	)

83 
	#A9MPCORE_GT_CTRL_COMP_EN
 
	`BSP_BIT32
(1)

	)

84 
	#A9MPCORE_GT_CTRL_TMR_EN
 
	`BSP_BIT32
(0)

	)

85 
uöt32_t
 
	m˘æ
;

86 
	#A9MPCORE_GT_IRQST_EFLG
 
	`BSP_BIT32
(0)

	)

87 
uöt32_t
 
	múq°
;

88 
uöt32_t
 
	mcmpvÆlowî
;

89 
uöt32_t
 
	mcmpvÆuµî
;

90 
uöt32_t
 
	mautoöc
;

91 } 
	ta9mpc‹e_gt
;

94 
uöt32_t
 
	mlﬂd
;

95 
uöt32_t
 
	m˙å
;

96 
uöt32_t
 
	m˘æ
;

97 
	#A9MPCORE_PT_CTRL_PRESCALER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

98 
	#A9MPCORE_PT_CTRL_PRESCALER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

99 
	#A9MPCORE_PT_CTRL_PRESCALER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

100 
	#A9MPCORE_PT_CTRL_IRQ_EN
 
	`BSP_BIT32
(2)

	)

101 
	#A9MPCORE_PT_CTRL_AUTO_RLD
 
	`BSP_BIT32
(1)

	)

102 
	#A9MPCORE_PT_CTRL_TMR_EN
 
	`BSP_BIT32
(0)

	)

103 
uöt32_t
 
	múq°
;

104 
	#A9MPCORE_PT_IRQST_EFLG
 
	`BSP_BIT32
(0)

	)

105 } 
	ta9mpc‹e_±
;

108 
uöt32_t
 
	mlﬂd
;

109 
uöt32_t
 
	m˙å
;

110 
uöt32_t
 
	m˘æ
;

111 
uöt32_t
 
	múq°
;

112 
uöt32_t
 
	mr°°
;

113 
uöt32_t
 
	mdis
;

114 } 
	ta9mpc‹e_pw
;

117 } 
	ga9mpc‹e_idi°
;

120 
a9mpc‹e_scu
 
	mscu
;

121 
uöt32_t
 
	mª£rved_58
[42];

122 
a9mpc‹e_gic
 
	mgic
;

123 
uöt32_t
 
	mª£rved_100
[64];

124 
a9mpc‹e_gt
 
	mgt
;

125 
uöt32_t
 
	mª£rved_21c
[249];

126 
a9mpc‹e_±
 
	m±
;

127 
uöt32_t
 
	mª£rved_610
[4];

128 
a9mpc‹e_pw
 
	mpw
;

129 
uöt32_t
 
	mª£rved_638
[626];

130 
a9mpc‹e_idi°
 
	midi°
;

131 } 
	ta9mpc‹e
;

	@src/lib/libbsp/arm/shared/include/arm-a9mpcore-start.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_A9MPCORE_START_H


24 
	#LIBBSP_ARM_SHARED_ARM_A9MPCORE_START_H


	)

26 
	~<πems/sc‹e/smpim∂.h
>

28 
	~<lib˝u/¨m-˝15.h
>

30 
	~<b•.h
>

31 
	~<b•/°¨t.h
>

32 
	~<b•/¨m-a9mpc‹e-ªgs.h
>

33 
	~<b•/¨m-îøè.h
>

35 #ifde‡
__˝lu•lus


39 
BSP_START_TEXT_SECTION
 
ölöe
 

40 
¨m_a9mpc‹e_°¨t_£t_ve˘‹_ba£
()

45 i‡(
b•_ve˘‹_èbÀ_íd
 !
b•_ve˘‹_èbÀ_size
) {

46 
uöt32_t
 
˘æ
;

52 
¨m_˝15_£t_ve˘‹_ba£_addªss
(
b•_ve˘‹_èbÀ_begö
);

54 
˘æ
 = 
¨m_˝15_gë_c⁄åﬁ
();

55 
˘æ
 &~
ARM_CP15_CTRL_V
;

56 
¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

60 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a9mpc‹e_°¨t_scu_övÆid©e
(

61 vﬁ©ûê
a9mpc‹e_scu
 *
scu
,

62 
uöt32_t
 
˝u_id
,

63 
uöt32_t
 
ways


66 
scu
->
övss
 = (
ways
 & 0xfË<< ((
˝u_id
 & 0x3) * 4);

69 
BSP_START_TEXT_SECTION
 
ölöe
 

70 
¨m_a9mpc‹e_°¨t_îøè_764369_h™dÀr
(vﬁ©ûê
a9mpc‹e_scu
 *
scu
)

72 i‡(
¨m_îøè_is_≠∂iˇbÀ_¥o˚ss‹_îøè_764369
()) {

73 
scu
->
dügn_˘æ
 |
A9MPCORE_SCU_DIAGN_CTRL_MIGRATORY_BIT_DISABLE
;

77 
BSP_START_TEXT_SECTION
 
ölöe
 

78 
¨m_a9mpc‹e_°¨t_scu_íabÀ
(vﬁ©ûê
a9mpc‹e_scu
 *
scu
)

80 
scu
->
˘æ
 |
A9MPCORE_SCU_CTRL_SCU_EN
;

81 
¨m_a9mpc‹e_°¨t_îøè_764369_h™dÀr
(
scu
);

84 #ifde‡
RTEMS_SMP


85 
BSP_START_TEXT_SECTION
 
ölöe
 

86 
¨m_a9mpc‹e_°¨t_⁄_£c⁄d¨y_¥o˚ss‹
()

88 
uöt32_t
 
˘æ
;

90 
¨m_a9mpc‹e_°¨t_£t_ve˘‹_ba£
();

92 
¨m_gic_úq_öôülize_£c⁄d¨y_˝u
();

94 
˘æ
 = 
¨m_˝15_°¨t_£tup_mmu_™d_ˇche
(

96 
ARM_CP15_CTRL_AFE
 | 
ARM_CP15_CTRL_Z


99 
¨m_˝15_£t_domaö_ac˚ss_c⁄åﬁ
(

100 
ARM_CP15_DAC_DOMAIN
(
ARM_MMU_DEFAULT_CLIENT_DOMAIN
, 
ARM_CP15_DAC_CLIENT
)

104 
¨m_˝15_£t_å™¶©i⁄_èbÀ_ba£
(

105 (
uöt32_t
 *Ë
b•_å™¶©i⁄_èbÀ_ba£


108 
˘æ
 |
ARM_CP15_CTRL_I
 | 
ARM_CP15_CTRL_C
 | 
ARM_CP15_CTRL_M
;

109 
¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

111 
_SMP_Sèπ_mu…ôaskög_⁄_£c⁄d¨y_¥o˚ss‹
();

114 
BSP_START_TEXT_SECTION
 
ölöe
 

115 
¨m_a9mpc‹e_°¨t_íabÀ_smp_ö_auxûüry_c⁄åﬁ
()

121 
uöt32_t
 
a˘Ã
 = 
¨m_˝15_gë_auxûüry_c⁄åﬁ
();

122 
a˘Ã
 |
ARM_CORTEX_A9_ACTL_SMP
 | 
ARM_CORTEX_A9_ACTL_FW
;

123 
¨m_˝15_£t_auxûüry_c⁄åﬁ
(
a˘Ã
);

127 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a9mpc‹e_°¨t_hook_0
()

129 vﬁ©ûê
a9mpc‹e_scu
 *
scu
 =

130 (vﬁ©ûê
a9mpc‹e_scu
 *Ë
BSP_ARM_A9MPCORE_SCU_BASE
;

131 
uöt32_t
 
˝u_id
 = 
¨m_c‹ãx_a9_gë_mu…ùro˚ss‹_˝u_id
();

133 
¨m_˝15_bønch_¥edi˘‹_övÆid©e_Æl
();

135 i‡(
˝u_id
 == 0) {

136 
¨m_a9mpc‹e_°¨t_scu_íabÀ
(
scu
);

139 #ifde‡
RTEMS_SMP


140 
¨m_a9mpc‹e_°¨t_íabÀ_smp_ö_auxûüry_c⁄åﬁ
();

143 
¨m_a9mpc‹e_°¨t_scu_övÆid©e
(
scu
, 
˝u_id
, 0xf);

145 #ifde‡
RTEMS_SMP


146 i‡(
˝u_id
 != 0) {

147 
¨m_a9mpc‹e_°¨t_⁄_£c⁄d¨y_¥o˚ss‹
();

152 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a9mpc‹e_°¨t_globÆ_timî
()

154 vﬁ©ûê
a9mpc‹e_gt
 *
gt
 = (vﬁ©ûêa9mpc‹e_gà*Ë
BSP_ARM_A9MPCORE_GT_BASE
;

156 
gt
->
˘æ
 = 0;

157 
gt
->
˙ålowî
 = 0;

158 
gt
->
˙åuµî
 = 0;

159 
gt
->
˘æ
 = 
A9MPCORE_GT_CTRL_TMR_EN
;

162 
BSP_START_TEXT_SECTION
 
ölöe
 
¨m_a9mpc‹e_°¨t_hook_1
()

164 
¨m_a9mpc‹e_°¨t_globÆ_timî
();

165 
¨m_a9mpc‹e_°¨t_£t_ve˘‹_ba£
();

168 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-cache-l1.h

25 #i‚de‡
LIBBSP_ARM_SHARED_CACHE_L1_H


26 
	#LIBBSP_ARM_SHARED_CACHE_L1_H


	)

28 
	~<b•.h
>

29 
	~<lib˝u/¨m-˝15.h
>

31 #ifde‡
__˝lu•lus


36 
	#ARM_CACHE_L1_CPU_DATA_ALIGNMENT
 32

	)

37 
	#ARM_CACHE_L1_CPU_INSTRUCTION_ALIGNMENT
 32

	)

38 
	#ARM_CACHE_L1_CPU_SUPPORT_PROVIDES_RANGE_FUNCTIONS


	)

40 
	#ARM_CACHE_L1_CSS_ID_DATA
 0

	)

41 
	#ARM_CACHE_L1_CSS_ID_INSTRUCTION
 1

	)

42 
	#ARM_CACHE_L1_DATA_LINE_MASK
 ( 
ARM_CACHE_L1_CPU_DATA_ALIGNMENT
 - 1 )

	)

43 
	#ARM_CACHE_L1_INSTRUCTION_LINE_MASK
 \

44 –
ARM_CACHE_L1_CPU_INSTRUCTION_ALIGNMENT
 \

45 - 1 )

	)

48 
¨m_ˇche_l1_îøè_764369_h™dÀr
( )

50 #ifde‡
RTEMS_SMP


51 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

55 
¨m_ˇche_l1_£À˘
–c⁄° 
uöt32_t
 
£À˘i⁄
 )

58 
¨m_˝15_£t_ˇche_size_£À˘i⁄
–
£À˘i⁄
 );

61 
_ARM_In°ru˘i⁄_synchr⁄iz©i⁄_b¨rõr
();

72 
ölöe
 
¨m_ˇche_l1_¥›îtõs
(

73 
uöt32_t
 *
l1LöeSize
,

74 
uöt32_t
 *
l1Assocütivôy
,

75 
uöt32_t
 *
l1NumSës
 )

77 
uöt32_t
 
id
;

79 
_ARM_In°ru˘i⁄_synchr⁄iz©i⁄_b¨rõr
();

80 
id
 = 
¨m_˝15_gë_ˇche_size_id
();

83 *
l1LöeSize
 = ( 
id
 & 0x0007U ) + 2 + 2;

85 *
l1Assocütivôy
 = ( ( 
id
 >> 3 ) & 0x03ffU ) + 1;

87 *
l1NumSës
 = ( ( 
id
 >> 13 ) & 0x7fffU ) + 1;

99 
ölöe
 
uöt32_t
 
¨m_ˇche_l1_gë_£t_way_∑øm
(

100 c⁄° 
uöt32_t
 
log_2_löe_byãs
,

101 c⁄° 
uöt32_t
 
assocütivôy
,

102 c⁄° 
uöt32_t
 
ˇche_Àvñ_idx
,

103 c⁄° 
uöt32_t
 
£t
,

104 c⁄° 
uöt32_t
 
way
 )

106 
uöt32_t
 
way_shi·
 = 
__buûtö_˛z
–
assocütivôy
 - 1 );

110 | ( 
way


111 << 
way_shi·
 ) | ( 
£t
 << 
log_2_löe_byãs
 ) | ( 
ˇche_Àvñ_idx
 << 1 ) );

114 
ölöe
 
¨m_ˇche_l1_Êush_1_d©a_löe
–c⁄° *
d_addr
 )

117 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e_löe
–
d_addr
 );

120 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

123 
ölöe
 
¨m_ˇche_l1_Êush_ítúe_d©a
( )

125 
uöt32_t
 
l1LöeSize
, 
l1Assocütivôy
, 
l1NumSës
;

126 
uöt32_t
 
s
, 
w
;

127 
uöt32_t
 
£t_way_∑øm
;

130 
_ARM_D©a_mem‹y_b¨rõr
();

133 
¨m_ˇche_l1_¥›îtõs
–&
l1LöeSize
, &
l1Assocütivôy
,

134 &
l1NumSës
 );

136  
w
 = 0; w < 
l1Assocütivôy
; ++w ) {

137  
s
 = 0; s < 
l1NumSës
; ++s ) {

138 
£t_way_∑øm
 = 
¨m_ˇche_l1_gë_£t_way_∑øm
(

139 
l1LöeSize
,

140 
l1Assocütivôy
,

142 
s
,

143 
w


145 
¨m_˝15_d©a_ˇche_˛ón_löe_by_£t_™d_way
–
£t_way_∑øm
 );

150 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

153 
ölöe
 
¨m_ˇche_l1_övÆid©e_ítúe_d©a
( )

155 
uöt32_t
 
l1LöeSize
, 
l1Assocütivôy
, 
l1NumSës
;

156 
uöt32_t
 
s
, 
w
;

157 
uöt32_t
 
£t_way_∑øm
;

160 
_ARM_D©a_mem‹y_b¨rõr
();

163 
¨m_ˇche_l1_¥›îtõs
–&
l1LöeSize
, &
l1Assocütivôy
,

164 &
l1NumSës
 );

166  
w
 = 0; w < 
l1Assocütivôy
; ++w ) {

167  
s
 = 0; s < 
l1NumSës
; ++s ) {

168 
£t_way_∑øm
 = 
¨m_ˇche_l1_gë_£t_way_∑øm
(

169 
l1LöeSize
,

170 
l1Assocütivôy
,

172 
s
,

173 
w


175 
¨m_˝15_d©a_ˇche_övÆid©e_löe_by_£t_™d_way
–
£t_way_∑øm
 );

180 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

183 
ölöe
 
¨m_ˇche_l1_˛ón_™d_övÆid©e_ítúe_d©a
( )

185 
uöt32_t
 
l1LöeSize
, 
l1Assocütivôy
, 
l1NumSës
;

186 
uöt32_t
 
s
, 
w
;

187 
uöt32_t
 
£t_way_∑øm
;

190 
_ARM_D©a_mem‹y_b¨rõr
();

194 
¨m_ˇche_l1_¥›îtõs
–&
l1LöeSize
, &
l1Assocütivôy
,

195 &
l1NumSës
 );

197  
w
 = 0; w < 
l1Assocütivôy
; ++w ) {

198  
s
 = 0; s < 
l1NumSës
; ++s ) {

199 
£t_way_∑øm
 = 
¨m_ˇche_l1_gë_£t_way_∑øm
(

200 
l1LöeSize
,

201 
l1Assocütivôy
,

203 
s
,

204 
w


206 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e_löe_by_£t_™d_way
(

207 
£t_way_∑øm
 );

212 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

215 
ölöe
 
¨m_ˇche_l1_Êush_d©a_ønge
(

216 c⁄° *
d_addr
,

217 
size_t
 
n_byãs


220 i‡–
n_byãs
 != 0 ) {

221 
uöt32_t
 
adx
 = (uöt32_tË
d_addr


222 & ~
ARM_CACHE_L1_DATA_LINE_MASK
;

223 c⁄° 
uöt32_t
 
ADDR_LAST
 =

224 (
uöt32_t
)–(
size_t
Ë
d_addr
 + 
n_byãs
 - 1 );

226 
¨m_ˇche_l1_îøè_764369_h™dÀr
();

228 ; 
adx
 <
ADDR_LAST
;ádx +
ARM_CACHE_L1_CPU_DATA_ALIGNMENT
 ) {

230 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e_löe
–(*)
adx
 );

233 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

238 
ölöe
 
¨m_ˇche_l1_övÆid©e_1_d©a_löe
(

239 c⁄° *
d_addr
 )

242 
¨m_˝15_d©a_ˇche_övÆid©e_löe
–
d_addr
 );

245 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

248 
ölöe
 
¨m_ˇche_l1_‰ìze_d©a
( )

253 
ölöe
 
¨m_ˇche_l1_un‰ìze_d©a
( )

258 
ölöe
 
¨m_ˇche_l1_övÆid©e_1_ö°ru˘i⁄_löe
(

259 c⁄° *
i_addr
 )

262 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e_löe
–
i_addr
 );

265 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

268 
ölöe
 
¨m_ˇche_l1_övÆid©e_d©a_ønge
(

269 c⁄° *
d_addr
,

270 
size_t
 
n_byãs


273 i‡–
n_byãs
 != 0 ) {

274 
uöt32_t
 
adx
 = (uöt32_tË
d_addr


275 & ~
ARM_CACHE_L1_DATA_LINE_MASK
;

276 c⁄° 
uöt32_t
 
íd
 =

277 (
uöt32_t
)–(
size_t
)
d_addr
 + 
n_byãs
 -1);

279 
¨m_ˇche_l1_îøè_764369_h™dÀr
();

283 
adx
 <
íd
;

284 
adx
 +
ARM_CACHE_L1_CPU_DATA_ALIGNMENT
 ) {

286 
¨m_˝15_d©a_ˇche_övÆid©e_löe
–(*)
adx
 );

289 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

293 
ölöe
 
¨m_ˇche_l1_övÆid©e_ö°ru˘i⁄_ønge
(

294 c⁄° *
i_addr
,

295 
size_t
 
n_byãs


298 i‡–
n_byãs
 != 0 ) {

299 
uöt32_t
 
adx
 = (uöt32_tË
i_addr


300 & ~
ARM_CACHE_L1_INSTRUCTION_LINE_MASK
;

301 c⁄° 
uöt32_t
 
íd
 =

302 (
uöt32_t
)–(
size_t
)
i_addr
 + 
n_byãs
 -1);

304 
¨m_ˇche_l1_îøè_764369_h™dÀr
();

308 
adx
 <
íd
;

309 
adx
 +
ARM_CACHE_L1_CPU_INSTRUCTION_ALIGNMENT
 ) {

311 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e_löe
–(*)
adx
 );

314 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

318 
ölöe
 
¨m_ˇche_l1_övÆid©e_ítúe_ö°ru˘i⁄
( )

320 
uöt32_t
 
˘æ
 = 
¨m_˝15_gë_c⁄åﬁ
();

323 #ifde‡
RTEMS_SMP


326 
¨m_˝15_ö°ru˘i⁄_ˇche_ö√r_sh¨óbÀ_övÆid©e_Æl
();

329 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e
();

332 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e
();

335 i‡––
˘æ
 & 
ARM_CP15_CTRL_Z
 ) == 0 ) {

336 
¨m_˝15_bønch_¥edi˘‹_ö√r_sh¨óbÀ_övÆid©e_Æl
();

337 
¨m_˝15_bønch_¥edi˘‹_övÆid©e_Æl
();

341 
ölöe
 
¨m_ˇche_l1_‰ìze_ö°ru˘i⁄
( )

346 
ölöe
 
¨m_ˇche_l1_un‰ìze_ö°ru˘i⁄
( )

351 
ölöe
 
¨m_ˇche_l1_dißbÀ_d©a
( )

354 
¨m_ˇche_l1_Êush_ítúe_d©a
();

357 
¨m_˝15_£t_c⁄åﬁ
–
¨m_˝15_gë_c⁄åﬁ
(Ë& ~
ARM_CP15_CTRL_C
 );

360 
ölöe
 
¨m_ˇche_l1_dißbÀ_ö°ru˘i⁄
( )

363 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

366 
¨m_ˇche_l1_övÆid©e_ítúe_ö°ru˘i⁄
();

369 
¨m_˝15_£t_c⁄åﬁ
–
¨m_˝15_gë_c⁄åﬁ
(Ë& ~
ARM_CP15_CTRL_I
 );

372 
ölöe
 
size_t
 
¨m_ˇche_l1_gë_d©a_ˇche_size
( )

374 
πems_öãºu±_Àvñ
 
Àvñ
;

375 
size_t
 
size
;

376 
uöt32_t
 
löe_size
 = 0;

377 
uöt32_t
 
assocütivôy
 = 0;

378 
uöt32_t
 
num_£ts
 = 0;

380 
πems_öãºu±_loˇl_dißbÀ
(
Àvñ
);

382 
¨m_ˇche_l1_£À˘
–
ARM_CACHE_L1_CSS_ID_DATA
 );

383 
¨m_ˇche_l1_¥›îtõs
–&
löe_size
, &
assocütivôy
,

384 &
num_£ts
 );

386 
πems_öãºu±_loˇl_íabÀ
(
Àvñ
);

388 
size
 = (1 << 
löe_size
Ë* 
assocütivôy
 * 
num_£ts
;

390  
size
;

393 
ölöe
 
size_t
 
¨m_ˇche_l1_gë_ö°ru˘i⁄_ˇche_size
( )

395 
πems_öãºu±_Àvñ
 
Àvñ
;

396 
size_t
 
size
;

397 
uöt32_t
 
löe_size
 = 0;

398 
uöt32_t
 
assocütivôy
 = 0;

399 
uöt32_t
 
num_£ts
 = 0;

401 
πems_öãºu±_loˇl_dißbÀ
(
Àvñ
);

403 
¨m_ˇche_l1_£À˘
–
ARM_CACHE_L1_CSS_ID_INSTRUCTION
 );

404 
¨m_ˇche_l1_¥›îtõs
–&
löe_size
, &
assocütivôy
,

405 &
num_£ts
 );

407 
πems_öãºu±_loˇl_íabÀ
(
Àvñ
);

409 
size
 = (1 << 
löe_size
Ë* 
assocütivôy
 * 
num_£ts
;

411  
size
;

414 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-cp15-start.h

25 #i‚de‡
LIBBSP_ARM_SHARED_ARM_CP15_START_H


26 
	#LIBBSP_ARM_SHARED_ARM_CP15_START_H


	)

28 
	~<lib˝u/¨m-˝15.h
>

29 
	~<b•/°¨t.h
>

30 
	~<b•/lökî-symbﬁs.h
>

32 #ifde‡
__˝lu•lus


37 
uöt32_t
 
begö
;

38 
uöt32_t
 
íd
;

39 
uöt32_t
 
Êags
;

40 } 
	t¨m_˝15_°¨t_£˘i⁄_c⁄fig
;

42 
	#ARMV7_CP15_START_DEFAULT_SECTIONS
 \

44 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_ãxt_begö
, \

45 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_ãxt_íd
, \

46 .
Êags
 = 
ARMV7_MMU_CODE_CACHED
 \

48 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_d©a_begö
, \

49 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_Á°_d©a_íd
, \

50 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

52 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_°¨t_begö
, \

53 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_°¨t_íd
, \

54 .
Êags
 = 
ARMV7_MMU_CODE_CACHED
 \

56 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_ve˘‹_begö
, \

57 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_ve˘‹_íd
, \

58 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

60 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_ãxt_begö
, \

61 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_ãxt_íd
, \

62 .
Êags
 = 
ARMV7_MMU_CODE_CACHED
 \

64 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_rod©a_begö
, \

65 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_rod©a_íd
, \

66 .
Êags
 = 
ARMV7_MMU_DATA_READ_ONLY_CACHED
 \

68 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_d©a_begö
, \

69 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_d©a_íd
, \

70 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

72 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_bss_begö
, \

73 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_bss_íd
, \

74 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

76 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_w‹k_begö
, \

77 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_w‹k_íd
, \

78 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

80 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_°ack_begö
, \

81 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_°ack_íd
, \

82 .
Êags
 = 
ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

84 .
begö
 = (
uöt32_t
Ë
b•_£˘i⁄_noˇche_begö
, \

85 .
íd
 = (
uöt32_t
Ë
b•_£˘i⁄_noˇche_íd
, \

86 .
Êags
 = 
ARMV7_MMU_DEVICE
 \

87 }

	)

89 
BSP_START_DATA_SECTION
 c⁄° 
¨m_˝15_°¨t_£˘i⁄_c⁄fig


90 
¨m_˝15_°¨t_mmu_c⁄fig_èbÀ
[];

92 
BSP_START_DATA_SECTION
 c⁄° 
size_t


93 
¨m_˝15_°¨t_mmu_c⁄fig_èbÀ_size
;

95 
BSP_START_TEXT_SECTION
 
ölöe
 

96 
¨m_˝15_°¨t_£t_å™¶©i⁄_èbÀ_íåõs
(

97 
uöt32_t
 *
âb
,

98 c⁄° 
¨m_˝15_°¨t_£˘i⁄_c⁄fig
 *
c⁄fig


101 
uöt32_t
 
	gi
 = 
ARM_MMU_SECT_GET_INDEX
(
c⁄fig
->
begö
);

102 
uöt32_t
 
	gõnd
 =

103 
ARM_MMU_SECT_GET_INDEX
(
ARM_MMU_SECT_MVA_ALIGN_UP
(
c⁄fig
->
íd
));

104 
uöt32_t
 
	gödex_mask
 = (1U << (32 - 
ARM_MMU_SECT_BASE_SHIFT
)) - 1U;

106 i‡(
	gc⁄fig
->
	gbegö
 !
c⁄fig
->
íd
) {

107 
i
 !
õnd
) {

108 
âb
 [
i
] = (ò<< 
ARM_MMU_SECT_BASE_SHIFT
Ë| 
c⁄fig
->
Êags
;

109 
	gi
 = (
i
 + 1UË& 
ödex_mask
;

114 
BSP_START_TEXT_SECTION
 
ölöe
 

115 
¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ
(

116 
uöt32_t
 *
âb
,

117 
uöt32_t
 
˛õ¡_domaö
,

118 c⁄° 
¨m_˝15_°¨t_£˘i⁄_c⁄fig
 *
c⁄fig_èbÀ
,

119 
size_t
 
c⁄fig_cou¡


122 
uöt32_t
 
	gdac
 = 
ARM_CP15_DAC_DOMAIN
(
˛õ¡_domaö
, 
ARM_CP15_DAC_CLIENT
);

123 
size_t
 
	gi
;

125 
¨m_˝15_£t_domaö_ac˚ss_c⁄åﬁ
(
dac
);

126 
¨m_˝15_£t_å™¶©i⁄_èbÀ_ba£
(
âb
);

129 
	gi
 = 0; i < 
	gARM_MMU_TRANSLATION_TABLE_ENTRY_COUNT
; ++i) {

130 
	gâb
 [
i
] = 0;

133 
	gi
 = 0; i < 
	gc⁄fig_cou¡
; ++i) {

134 
¨m_˝15_°¨t_£t_å™¶©i⁄_èbÀ_íåõs
(
âb
, &
c⁄fig_èbÀ
 [
i
]);

138 
BSP_START_TEXT_SECTION
 
ölöe
 

139 
¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ_™d_íabÀ_mmu_™d_ˇche
(

140 
uöt32_t
 
˘æ
,

141 
uöt32_t
 *
âb
,

142 
uöt32_t
 
˛õ¡_domaö
,

143 c⁄° 
¨m_˝15_°¨t_£˘i⁄_c⁄fig
 *
c⁄fig_èbÀ
,

144 
size_t
 
c⁄fig_cou¡


147 
¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ
(

148 
âb
,

149 
˛õ¡_domaö
,

150 
c⁄fig_èbÀ
,

151 
c⁄fig_cou¡


155 
	g˘æ
 |
ARM_CP15_CTRL_I
 | 
ARM_CP15_CTRL_C
 | 
ARM_CP15_CTRL_M
;

157 
¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

160 
BSP_START_TEXT_SECTION
 
ölöe
 
uöt32_t


161 
¨m_˝15_°¨t_£tup_mmu_™d_ˇche
(
uöt32_t
 
˘æ_˛ór
, uöt32_à
˘æ_£t
)

163 
uöt32_t
 
	g˘æ
 = 
¨m_˝15_gë_c⁄åﬁ
();

165 
	g˘æ
 &~
˘æ_˛ór
;

166 
	g˘æ
 |
˘æ_£t
;

168 
¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

170 
¨m_˝15_éb_övÆid©e
();

172  
	g˘æ
;

175 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-errata.h

23 #i‚de‡
ARM_ERRATA_H_


24 
	#ARM_ERRATA_H_


	)

26 
	~<b•/¨m-ªÀa£-id.h
>

27 
	~<lib˝u/¨m-˝15.h
>

29 #ifde‡
__˝lu•lus


33 #i‡
deföed
–
__ARM_ARCH_7A__
 )

34 
¨m_ªÀa£_id
 
	$¨m_îøè_gë_¥o˚ss‹_ªÀa£
(

38 c⁄° 
uöt32_t
 
MIDR
 = 
	`¨m_˝15_gë_id_code
();

39 c⁄° 
uöt8_t
 
REVISION
 = (
MIDR
 & 0xF00000U) >> 20;

40 c⁄° 
uöt8_t
 
PATCH_LEVEL
 = (
MIDR
 & 0xFU);

42  
	`ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
(

43 
REVISION
,

44 
PATCH_LEVEL


46 
	}
}

49 #i‡
deföed
–
__ARM_ARCH_7A__
 )

50 #i‡–
deföed
–
RTEMS_SMP
 ) )

51 
boﬁ
 
	$¨m_îøè_is_≠∂iˇbÀ_¥o˚ss‹_îøè_764369
(

55 c⁄° 
¨m_ªÀa£_id
 
RELEASE
 = 
	`¨m_îøè_gë_¥o˚ss‹_ªÀa£
();

56 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

68  
RELEASE
 ) {

69 
ARM_RELEASE_ID_R4_P1
:

70 
ARM_RELEASE_ID_R4_P4
:

71 
ARM_RELEASE_ID_R3_P0
:

72 
ARM_RELEASE_ID_R2_P10
:

73 
ARM_RELEASE_ID_R2_P8
:

74 
ARM_RELEASE_ID_R2_P6
:

75 
ARM_RELEASE_ID_R2_P4
:

76 
ARM_RELEASE_ID_R2_P3
:

77 
ARM_RELEASE_ID_R2_P2
:

78 
ARM_RELEASE_ID_R2_P0
:

79 
is_≠∂iˇbÀ
 = 
åue
;

82 
is_≠∂iˇbÀ
 = 
Ál£
;

86  
is_≠∂iˇbÀ
;

87 
	}
}

89 
	#¨m_îøè_is_≠∂iˇbÀ_¥o˚ss‹_îøè_764369
(Ë
Ál£


	)

93 #i‡
deföed
–
__ARM_ARCH_7A__
 )

94 
boﬁ
 
¨m_îøè_is_≠∂iˇbÀ_¥o˚ss‹_îøè_775420
(

98 c⁄° 
¨m_ªÀa£_id
 
RELEASE
 = 
¨m_îøè_gë_¥o˚ss‹_ªÀa£
();

99 
boﬁ
 
is_≠∂iˇbÀ
 = 
Ál£
;

111  
RELEASE
 ) {

112 
ARM_RELEASE_ID_R2_P10
:

113 
ARM_RELEASE_ID_R2_P8
:

114 
ARM_RELEASE_ID_R2_P6
:

115 
ARM_RELEASE_ID_R2_P4
:

116 
ARM_RELEASE_ID_R2_P3
:

117 
ARM_RELEASE_ID_R2_P2
:

118 
is_≠∂iˇbÀ
 = 
åue
;

121 
is_≠∂iˇbÀ
 = 
Ál£
;

125  
is_≠∂iˇbÀ
;

129 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-gic-irq.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_GIC_IRQ_H


24 
	#LIBBSP_ARM_SHARED_ARM_GIC_IRQ_H


	)

26 
	~<b•.h
>

27 
	~<b•/¨m-gic.h
>

29 #ifde‡
__˝lu•lus


33 
	#ARM_GIC_IRQ_SGI_0
 0

	)

34 
	#ARM_GIC_IRQ_SGI_1
 1

	)

35 
	#ARM_GIC_IRQ_SGI_2
 2

	)

36 
	#ARM_GIC_IRQ_SGI_3
 3

	)

37 
	#ARM_GIC_IRQ_SGI_5
 5

	)

38 
	#ARM_GIC_IRQ_SGI_6
 6

	)

39 
	#ARM_GIC_IRQ_SGI_7
 7

	)

40 
	#ARM_GIC_IRQ_SGI_8
 8

	)

41 
	#ARM_GIC_IRQ_SGI_9
 9

	)

42 
	#ARM_GIC_IRQ_SGI_10
 10

	)

43 
	#ARM_GIC_IRQ_SGI_11
 11

	)

44 
	#ARM_GIC_IRQ_SGI_12
 12

	)

45 
	#ARM_GIC_IRQ_SGI_13
 13

	)

46 
	#ARM_GIC_IRQ_SGI_14
 14

	)

47 
	#ARM_GIC_IRQ_SGI_15
 15

	)

49 
	#ARM_GIC_DIST
 ((vﬁ©ûê
gic_di°
 *Ë
BSP_ARM_GIC_DIST_BASE
)

	)

51 
πems_°©us_code
 
¨m_gic_úq_£t_¥i‹ôy
(

52 
πems_ve˘‹_numbî
 
ve˘‹
,

53 
uöt8_t
 
¥i‹ôy


56 
πems_°©us_code
 
¨m_gic_úq_gë_¥i‹ôy
(

57 
πems_ve˘‹_numbî
 
ve˘‹
,

58 
uöt8_t
 *
¥i‹ôy


62 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_ALL_IN_LIST
,

63 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_ALL_EXCEPT_SELF
,

64 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_SELF


65 } 
	t¨m_gic_úq_so·w¨e_úq_èrgë_fûãr
;

67 
ölöe
 
πems_°©us_code
 
¨m_gic_úq_gíî©e_so·w¨e_úq
(

68 
πems_ve˘‹_numbî
 
ve˘‹
,

69 
¨m_gic_úq_so·w¨e_úq_èrgë_fûãr
 
fûãr
,

70 
uöt8_t
 
èrgës


73 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

75 i‡(
ve˘‹
 <
ARM_GIC_IRQ_SGI_15
) {

76 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

78 
di°
->
icdsgú
 = 
GIC_DIST_ICDSGIR_TARGET_LIST_FILTER
(
fûãr
)

79 | 
GIC_DIST_ICDSGIR_CPU_TARGET_LIST
(
èrgës
)

80 | 
GIC_DIST_ICDSGIR_SGIINTID
(
ve˘‹
);

82 
sc
 = 
RTEMS_INVALID_ID
;

85  
sc
;

88 
ölöe
 
uöt32_t
 
¨m_gic_úq_¥o˚ss‹_cou¡
()

90 vﬁ©ûê
gic_di°
 *
di°
 = 
ARM_GIC_DIST
;

92  
GIC_DIST_ICDICTR_CPU_NUMBER_GET
(
di°
->
icdi˘r
) + 1;

95 
¨m_gic_úq_öôülize_£c⁄d¨y_˝u
();

97 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-gic-regs.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_GIC_REGS_H


24 
	#LIBBSP_ARM_SHARED_ARM_GIC_REGS_H


	)

26 
	~<b•/utûôy.h
>

29 
uöt32_t
 
	micci¸
;

30 
	#GIC_CPUIF_ICCICR_ENABLE
 
	`BSP_BIT32
(0)

	)

31 
uöt32_t
 
	mic˝mr
;

32 
	#GIC_CPUIF_ICCPMR_PRIORITY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

33 
	#GIC_CPUIF_ICCPMR_PRIORITY_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

34 
	#GIC_CPUIF_ICCPMR_PRIORITY_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

35 
uöt32_t
 
	miccb¥
;

36 
	#GIC_CPUIF_ICCBPR_BINARY_POINT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

37 
	#GIC_CPUIF_ICCBPR_BINARY_POINT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

38 
	#GIC_CPUIF_ICCBPR_BINARY_POINT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

39 
uöt32_t
 
	miccür
;

40 
	#GIC_CPUIF_ICCIAR_CPUID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 12)

	)

41 
	#GIC_CPUIF_ICCIAR_CPUID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 12)

	)

42 
	#GIC_CPUIF_ICCIAR_CPUID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 12)

	)

43 
	#GIC_CPUIF_ICCIAR_ACKINTID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

44 
	#GIC_CPUIF_ICCIAR_ACKINTID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

45 
	#GIC_CPUIF_ICCIAR_ACKINTID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

46 
uöt32_t
 
	mic˚oú
;

47 
	#GIC_CPUIF_ICCEOIR_CPUID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 12)

	)

48 
	#GIC_CPUIF_ICCEOIR_CPUID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 12)

	)

49 
	#GIC_CPUIF_ICCEOIR_CPUID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 12)

	)

50 
	#GIC_CPUIF_ICCEOIR_EOIINTID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

51 
	#GIC_CPUIF_ICCEOIR_EOIINTID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

52 
	#GIC_CPUIF_ICCEOIR_EOIINTID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

53 
uöt32_t
 
	mic¸¥
;

54 
	#GIC_CPUIF_ICCRPR_PRIORITY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

55 
	#GIC_CPUIF_ICCRPR_PRIORITY_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

56 
	#GIC_CPUIF_ICCRPR_PRIORITY_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

57 
uöt32_t
 
	micchpú
;

58 
	#GIC_CPUIF_ICCHPIR_CPUID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 12)

	)

59 
	#GIC_CPUIF_ICCHPIR_CPUID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 12)

	)

60 
	#GIC_CPUIF_ICCHPIR_CPUID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 12)

	)

61 
	#GIC_CPUIF_ICCHPIR_PENDINTID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

62 
	#GIC_CPUIF_ICCHPIR_PENDINTID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

63 
	#GIC_CPUIF_ICCHPIR_PENDINTID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

64 
uöt32_t
 
	micˇb¥
;

65 
	#GIC_CPUIF_ICCABPR_BINARY_POINT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

66 
	#GIC_CPUIF_ICCABPR_BINARY_POINT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

67 
	#GIC_CPUIF_ICCABPR_BINARY_POINT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

68 
uöt32_t
 
	mª£rved_20
[55];

69 
uöt32_t
 
	micciidr
;

70 
	#GIC_CPUIF_ICCIIDR_PRODUCT_ID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

71 
	#GIC_CPUIF_ICCIIDR_PRODUCT_ID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

72 
	#GIC_CPUIF_ICCIIDR_PRODUCT_ID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 31)

	)

73 
	#GIC_CPUIF_ICCIIDR_ARCH_VERSION
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 19)

	)

74 
	#GIC_CPUIF_ICCIIDR_ARCH_VERSION_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 19)

	)

75 
	#GIC_CPUIF_ICCIIDR_ARCH_VERSION_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 19)

	)

76 
	#GIC_CPUIF_ICCIIDR_REVISION
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

77 
	#GIC_CPUIF_ICCIIDR_REVISION_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

78 
	#GIC_CPUIF_ICCIIDR_REVISION_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

79 
	#GIC_CPUIF_ICCIIDR_IMPLEMENTER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 11)

	)

80 
	#GIC_CPUIF_ICCIIDR_IMPLEMENTER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

81 
	#GIC_CPUIF_ICCIIDR_IMPLEMENTER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

82 } 
	tgic_˝uif
;

85 
uöt32_t
 
	micdd¸
;

86 
	#GIC_DIST_ICDDCR_ENABLE
 
	`BSP_BIT32
(0)

	)

87 
uöt32_t
 
	micdi˘r
;

88 
	#GIC_DIST_ICDICTR_LSPI
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 11, 15)

	)

89 
	#GIC_DIST_ICDICTR_LSPI_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 11, 15)

	)

90 
	#GIC_DIST_ICDICTR_LSPI_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 11, 15)

	)

91 
	#GIC_DIST_ICDICTR_SECURITY_EXTN
 
	`BSP_BIT32
(10)

	)

92 
	#GIC_DIST_ICDICTR_CPU_NUMBER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 5, 7)

	)

93 
	#GIC_DIST_ICDICTR_CPU_NUMBER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 5, 7)

	)

94 
	#GIC_DIST_ICDICTR_CPU_NUMBER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 5, 7)

	)

95 
	#GIC_DIST_ICDICTR_IT_LINES_NUMBER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 4)

	)

96 
	#GIC_DIST_ICDICTR_IT_LINES_NUMBER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

97 
	#GIC_DIST_ICDICTR_IT_LINES_NUMBER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 4)

	)

98 
uöt32_t
 
	micdiidr
;

99 
	#GIC_DIST_ICDIIDR_PRODUCT_ID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

100 
	#GIC_DIST_ICDIIDR_PRODUCT_ID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

101 
	#GIC_DIST_ICDIIDR_PRODUCT_ID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 31)

	)

102 
	#GIC_DIST_ICDIIDR_VARIANT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 19)

	)

103 
	#GIC_DIST_ICDIIDR_VARIANT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 19)

	)

104 
	#GIC_DIST_ICDIIDR_VARIANT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 19)

	)

105 
	#GIC_DIST_ICDIIDR_REVISION
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

106 
	#GIC_DIST_ICDIIDR_REVISION_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

107 
	#GIC_DIST_ICDIIDR_REVISION_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

108 
	#GIC_DIST_ICDIIDR_IMPLEMENTER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 11)

	)

109 
	#GIC_DIST_ICDIIDR_IMPLEMENTER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

110 
	#GIC_DIST_ICDIIDR_IMPLEMENTER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

111 
uöt32_t
 
	mª£rved_0c
[29];

112 
uöt32_t
 
	micdi§
[32];

113 
uöt32_t
 
	micdi£r
[32];

114 
uöt32_t
 
	micdi˚r
[32];

115 
uöt32_t
 
	micdi•r
[32];

116 
uöt32_t
 
	micdi˝r
[32];

117 
uöt32_t
 
	micdabr
[32];

118 
uöt32_t
 
	mª£rved_380
[32];

119 
uöt8_t
 
	micdùr
[256];

120 
uöt32_t
 
	mª£rved_500
[192];

121 
uöt8_t
 
	micdùå
[256];

122 
uöt32_t
 
	mª£rved_900
[192];

123 
uöt32_t
 
	micdic‰
[64];

124 
uöt32_t
 
	mª£rved_d00
[128];

125 
uöt32_t
 
	micdsgú
;

126 
	#GIC_DIST_ICDSGIR_TARGET_LIST_FILTER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 25)

	)

127 
	#GIC_DIST_ICDSGIR_TARGET_LIST_FILTER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 25)

	)

128 
	#GIC_DIST_ICDSGIR_TARGET_LIST_FILTER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 25)

	)

129 
	#GIC_DIST_ICDSGIR_CPU_TARGET_LIST
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

130 
	#GIC_DIST_ICDSGIR_CPU_TARGET_LIST_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

131 
	#GIC_DIST_ICDSGIR_CPU_TARGET_LIST_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 23)

	)

132 
	#GIC_DIST_ICDSGIR_SATT
 
	`BSP_BIT32
(15)

	)

133 
	#GIC_DIST_ICDSGIR_SGIINTID
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

134 
	#GIC_DIST_ICDSGIR_SGIINTID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

135 
	#GIC_DIST_ICDSGIR_SGIINTID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

136 } 
	tgic_di°
;

	@src/lib/libbsp/arm/shared/include/arm-gic-tm27.h

23 #i‚de‡
_RTEMS_TMTEST27


27 #i‚de‡
LIBBSP_ARM_SHARED_ARM_GIC_TM27_H


28 
	#LIBBSP_ARM_SHARED_ARM_GIC_TM27_H


	)

30 
	~<as£π.h
>

32 
	~<b•.h
>

33 
	~<b•/úq.h
>

35 
	#MUST_WAIT_FOR_INTERRUPT
 1

	)

37 
	#ARM_GIC_TM27_IRQ_LOW
 
ARM_GIC_IRQ_SGI_12


	)

39 
	#ARM_GIC_TM27_IRQ_HIGH
 
ARM_GIC_IRQ_SGI_13


	)

41 
	#ARM_GIC_TM27_PRIO_LOW
 0x80

	)

43 
	#ARM_GIC_TM27_PRIO_HIGH
 0x00

	)

45 
ölöe
 
In°Æl_tm27_ve˘‹
((*
h™dÀr
)(
πems_ve˘‹_numbî
))

47 
πems_°©us_code
 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

48 
ARM_GIC_TM27_IRQ_LOW
,

50 
RTEMS_INTERRUPT_UNIQUE
,

51 (
πems_öãºu±_h™dÀr
Ë
h™dÀr
,

52 
NULL


54 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

56 
sc
 = 
	`¨m_gic_úq_£t_¥i‹ôy
(

57 
ARM_GIC_TM27_IRQ_LOW
,

58 
ARM_GIC_TM27_PRIO_LOW


60 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

62 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

63 
ARM_GIC_TM27_IRQ_HIGH
,

65 
RTEMS_INTERRUPT_UNIQUE
,

66 (
πems_öãºu±_h™dÀr
Ë
h™dÀr
,

67 
NULL


69 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

71 
sc
 = 
	`¨m_gic_úq_£t_¥i‹ôy
(

72 
ARM_GIC_TM27_IRQ_HIGH
,

73 
ARM_GIC_TM27_PRIO_HIGH


75 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

76 
	}
}

78 
ölöe
 
	$Cau£_tm27_öå
()

80 
πems_°©us_code
 
sc
 = 
	`¨m_gic_úq_gíî©e_so·w¨e_úq
(

81 
ARM_GIC_TM27_IRQ_LOW
,

82 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_SELF
,

85 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

86 
	}
}

88 
ölöe
 
	$CÀ¨_tm27_öå
()

91 
	}
}

93 
ölöe
 
	$Lowî_tm27_öå
()

95 
πems_°©us_code
 
sc
 = 
	`¨m_gic_úq_gíî©e_so·w¨e_úq
(

96 
ARM_GIC_TM27_IRQ_HIGH
,

97 
ARM_GIC_IRQ_SOFTWARE_IRQ_TO_SELF
,

100 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

101 
	}
}

	@src/lib/libbsp/arm/shared/include/arm-gic.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_GIC_H


24 
	#LIBBSP_ARM_SHARED_ARM_GIC_H


	)

26 
	~<b•/¨m-gic-ªgs.h
>

28 
	~<°dboﬁ.h
>

30 #ifde‡
__˝lu•lus


42 
	#GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
Ë((idË>> 5)

	)

43 
	#GIC_ID_TO_ONE_BIT_REG_BIT
(
id
Ë(1U << ((idË& 0x1fU))

	)

45 
	#GIC_ID_TO_TWO_BITS_REG_INDEX
(
id
Ë((idË>> 4)

	)

46 
	#GIC_ID_TO_TWO_BITS_REG_OFFSET
(
id
Ë((idË& 0xfU)

	)

48 
ölöe
 
boﬁ
 
gic_id_is_íabÀd
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

50 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

51 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

53  (
di°
->
icdi£r
[
i
] & 
bô
) != 0;

56 
ölöe
 
gic_id_íabÀ
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

58 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

59 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

61 
di°
->
icdi£r
[
i
] = 
bô
;

64 
ölöe
 
gic_id_dißbÀ
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

66 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

67 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

69 
di°
->
icdi˚r
[
i
] = 
bô
;

72 
ölöe
 
boﬁ
 
gic_id_is_≥ndög
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

74 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

75 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

77  (
di°
->
icdi•r
[
i
] & 
bô
) != 0;

80 
ölöe
 
gic_id_£t_≥ndög
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

82 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

83 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

85 
di°
->
icdi•r
[
i
] = 
bô
;

88 
ölöe
 
gic_id_˛ór_≥ndög
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

90 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

91 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

93 
di°
->
icdi˝r
[
i
] = 
bô
;

96 
ölöe
 
boﬁ
 
gic_id_is_a˘ive
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

98 
uöt32_t
 
i
 = 
GIC_ID_TO_ONE_BIT_REG_INDEX
(
id
);

99 
uöt32_t
 
bô
 = 
GIC_ID_TO_ONE_BIT_REG_BIT
(
id
);

101  (
di°
->
icdabr
[
i
] & 
bô
) != 0;

104 
ölöe
 
gic_id_£t_¥i‹ôy
(

105 vﬁ©ûê
gic_di°
 *
di°
,

106 
uöt32_t
 
id
,

107 
uöt8_t
 
¥i‹ôy


110 
di°
->
icdùr
[
id
] = 
¥i‹ôy
;

113 
ölöe
 
uöt8_t
 
gic_id_gë_¥i‹ôy
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

115  
di°
->
icdùr
[
id
];

118 
ölöe
 
gic_id_£t_èrgës
(

119 vﬁ©ûê
gic_di°
 *
di°
,

120 
uöt32_t
 
id
,

121 
uöt8_t
 
èrgës


124 
di°
->
icdùå
[
id
] = 
èrgës
;

127 
ölöe
 
uöt8_t
 
gic_id_gë_èrgës
(vﬁ©ûê
gic_di°
 *
di°
, 
uöt32_t
 
id
)

129  
di°
->
icdùå
[
id
];

133 
GIC_LEVEL_SENSITIVE
,

134 
GIC_EDGE_TRIGGERED


135 } 
	tgic_åiggî_mode
;

137 
ölöe
 
gic_åiggî_mode
 
gic_id_gë_åiggî_mode
(

138 vﬁ©ûê
gic_di°
 *
di°
,

139 
uöt32_t
 
id


142 
uöt32_t
 
i
 = 
GIC_ID_TO_TWO_BITS_REG_INDEX
(
id
);

143 
uöt32_t
 
o
 = 
GIC_ID_TO_TWO_BITS_REG_OFFSET
(
id
) + 1;

144 
uöt32_t
 
bô
 = 1U << 
o
;

146  (
di°
->
icdic‰
[
i
] & 
bô
) != 0 ?

147 
GIC_EDGE_TRIGGERED
 : 
GIC_LEVEL_SENSITIVE
;

150 
ölöe
 
gic_id_£t_åiggî_mode
(

151 vﬁ©ûê
gic_di°
 *
di°
,

152 
uöt32_t
 
id
,

153 
gic_åiggî_mode
 
mode


156 
uöt32_t
 
i
 = 
GIC_ID_TO_TWO_BITS_REG_INDEX
(
id
);

157 
uöt32_t
 
o
 = 
GIC_ID_TO_TWO_BITS_REG_OFFSET
(
id
) + 1;

158 
uöt32_t
 
bô
 = 
mode
 << 
o
;

159 
uöt32_t
 
mask
 = 1U << 
o
;

160 
uöt32_t
 
icdic‰
 = 
di°
->icdic‰[
i
];

162 
icdic‰
 &~
mask
;

163 
icdic‰
 |
bô
;

165 
di°
->
icdic‰
[
i
] = icdicfr;

169 
GIC_N_TO_N
,

170 
GIC_1_TO_N


171 } 
	tgic_h™dlög_modñ
;

173 
ölöe
 
gic_h™dlög_modñ
 
gic_id_gë_h™dlög_modñ
(

174 vﬁ©ûê
gic_di°
 *
di°
,

175 
uöt32_t
 
id


178 
uöt32_t
 
i
 = 
GIC_ID_TO_TWO_BITS_REG_INDEX
(
id
);

179 
uöt32_t
 
o
 = 
GIC_ID_TO_TWO_BITS_REG_OFFSET
(
id
);

180 
uöt32_t
 
bô
 = 1U << 
o
;

182  (
di°
->
icdic‰
[
i
] & 
bô
Ë!0 ? 
GIC_1_TO_N
 : 
GIC_N_TO_N
;

185 
ölöe
 
gic_id_£t_h™dlög_modñ
(

186 vﬁ©ûê
gic_di°
 *
di°
,

187 
uöt32_t
 
id
,

188 
gic_h™dlög_modñ
 
modñ


191 
uöt32_t
 
i
 = 
GIC_ID_TO_TWO_BITS_REG_INDEX
(
id
);

192 
uöt32_t
 
o
 = 
GIC_ID_TO_TWO_BITS_REG_OFFSET
(
id
);

193 
uöt32_t
 
bô
 = 
modñ
 << 
o
;

194 
uöt32_t
 
mask
 = 1U << 
o
;

195 
uöt32_t
 
icdic‰
 = 
di°
->icdic‰[
i
];

197 
icdic‰
 &~
mask
;

198 
icdic‰
 |
bô
;

200 
di°
->
icdic‰
[
i
] = icdicfr;

203 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-pl011-regs.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL011_REGS_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL011_REGS_H


	)

26 
	~<b•/utûôy.h
>

29 
uöt32_t
 
	mu¨tdr
;

30 
	#PL011_UARTDR_OE
 
	`BSP_BIT32
(11)

	)

31 
	#PL011_UARTDR_BE
 
	`BSP_BIT32
(10)

	)

32 
	#PL011_UARTDR_PE
 
	`BSP_BIT32
(9)

	)

33 
	#PL011_UARTDR_FE
 
	`BSP_BIT32
(8)

	)

34 
	#PL011_UARTDR_DATA
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

35 
	#PL011_UARTDR_DATA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

36 
	#PL011_UARTDR_DATA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

37 
uöt32_t
 
	mu¨å§_u¨ã¸
;

38 
	#PL011_UARTRSR_UARTECR_OE
 
	`BSP_BIT32
(3)

	)

39 
	#PL011_UARTRSR_UARTECR_BE
 
	`BSP_BIT32
(2)

	)

40 
	#PL011_UARTRSR_UARTECR_PE
 
	`BSP_BIT32
(1)

	)

41 
	#PL011_UARTRSR_UARTECR_FE
 
	`BSP_BIT32
(0)

	)

42 
uöt32_t
 
	mª£rved_08
[4];

43 
uöt32_t
 
	mu¨t‰
;

44 
	#PL011_UARTFR_RI
 
	`BSP_BIT32
(8)

	)

45 
	#PL011_UARTFR_TXFE
 
	`BSP_BIT32
(7)

	)

46 
	#PL011_UARTFR_RXFF
 
	`BSP_BIT32
(6)

	)

47 
	#PL011_UARTFR_TXFF
 
	`BSP_BIT32
(5)

	)

48 
	#PL011_UARTFR_RXFE
 
	`BSP_BIT32
(4)

	)

49 
	#PL011_UARTFR_BUSY
 
	`BSP_BIT32
(3)

	)

50 
	#PL011_UARTFR_DCD
 
	`BSP_BIT32
(2)

	)

51 
	#PL011_UARTFR_DSR
 
	`BSP_BIT32
(1)

	)

52 
	#PL011_UARTFR_CTS
 
	`BSP_BIT32
(0)

	)

53 
uöt32_t
 
	mª£rved_1c
;

54 
uöt32_t
 
	mu¨tû¥
;

55 
	#PL011_UARTILPR_ILPDVSR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

56 
	#PL011_UARTILPR_ILPDVSR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

57 
	#PL011_UARTILPR_ILPDVSR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

58 
uöt32_t
 
	mu¨tibrd
;

59 
	#PL011_UARTIBRD_BAUD_DIVINT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 15)

	)

60 
	#PL011_UARTIBRD_BAUD_DIVINT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

61 
	#PL011_UARTIBRD_BAUD_DIVINT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

62 
uöt32_t
 
	mu¨tfbrd
;

63 
	#PL011_UARTFBRD_BAUD_DIVFRAC
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

64 
	#PL011_UARTFBRD_BAUD_DIVFRAC_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

65 
	#PL011_UARTFBRD_BAUD_DIVFRAC_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

66 
uöt32_t
 
	mu¨é¸_h
;

67 
	#PL011_UARTLCR_H_SPS
 
	`BSP_BIT32
(7)

	)

68 
	#PL011_UARTLCR_H_WLEN
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 5, 6)

	)

69 
	#PL011_UARTLCR_H_WLEN_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 5, 6)

	)

70 
	#PL011_UARTLCR_H_WLEN_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 5, 6)

	)

71 
	#PL011_UARTLCR_H_WLEN_5
 0x00U

	)

72 
	#PL011_UARTLCR_H_WLEN_6
 0x01U

	)

73 
	#PL011_UARTLCR_H_WLEN_7
 0x02U

	)

74 
	#PL011_UARTLCR_H_WLEN_8
 0x03U

	)

75 
	#PL011_UARTLCR_H_FEN
 
	`BSP_BIT32
(4)

	)

76 
	#PL011_UARTLCR_H_STP2
 
	`BSP_BIT32
(3)

	)

77 
	#PL011_UARTLCR_H_EPS
 
	`BSP_BIT32
(2)

	)

78 
	#PL011_UARTLCR_H_PEN
 
	`BSP_BIT32
(1)

	)

79 
	#PL011_UARTLCR_H_BRK
 
	`BSP_BIT32
(0)

	)

80 
uöt32_t
 
	mu¨t¸
;

81 
	#PL011_UARTCR_CTSEN
 
	`BSP_BIT32
(15)

	)

82 
	#PL011_UARTCR_RTSEN
 
	`BSP_BIT32
(14)

	)

83 
	#PL011_UARTCR_OUT2
 
	`BSP_BIT32
(13)

	)

84 
	#PL011_UARTCR_OUT1
 
	`BSP_BIT32
(12)

	)

85 
	#PL011_UARTCR_RTS
 
	`BSP_BIT32
(11)

	)

86 
	#PL011_UARTCR_DTR
 
	`BSP_BIT32
(10)

	)

87 
	#PL011_UARTCR_RXE
 
	`BSP_BIT32
(9)

	)

88 
	#PL011_UARTCR_TXE
 
	`BSP_BIT32
(8)

	)

89 
	#PL011_UARTCR_LBE
 
	`BSP_BIT32
(7)

	)

90 
	#PL011_UARTCR_SIRLP
 
	`BSP_BIT32
(3)

	)

91 
	#PL011_UARTCR_SIREN
 
	`BSP_BIT32
(2)

	)

92 
	#PL011_UARTCR_UARTEN
 
	`BSP_BIT32
(1)

	)

93 
uöt32_t
 
	mu¨tiÊs
;

94 
	#PL011_UARTIFLS_RXIFLSEL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 3, 5)

	)

95 
	#PL011_UARTIFLS_RXIFLSEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 3, 5)

	)

96 
	#PL011_UARTIFLS_RXIFLSEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 3, 5)

	)

97 
	#PL011_UARTIFLS_TXIFLSEL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

98 
	#PL011_UARTIFLS_TXIFLSEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

99 
	#PL011_UARTIFLS_TXIFLSEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

100 
uöt32_t
 
	mu¨timsc
;

101 
uöt32_t
 
	mu¨åis
;

102 
uöt32_t
 
	mu¨tmis
;

103 
uöt32_t
 
	mu¨ti¸
;

104 
	#PL011_UARTI_OEI
 
	`BSP_BIT32
(10)

	)

105 
	#PL011_UARTI_BEI
 
	`BSP_BIT32
(9)

	)

106 
	#PL011_UARTI_PEI
 
	`BSP_BIT32
(8)

	)

107 
	#PL011_UARTI_FEI
 
	`BSP_BIT32
(7)

	)

108 
	#PL011_UARTI_RTI
 
	`BSP_BIT32
(6)

	)

109 
	#PL011_UARTI_TXI
 
	`BSP_BIT32
(5)

	)

110 
	#PL011_UARTI_RXI
 
	`BSP_BIT32
(4)

	)

111 
	#PL011_UARTI_DSRMI
 
	`BSP_BIT32
(3)

	)

112 
	#PL011_UARTI_DCDMI
 
	`BSP_BIT32
(2)

	)

113 
	#PL011_UARTI_CTSMI
 
	`BSP_BIT32
(1)

	)

114 
	#PL011_UARTI_RIMI
 
	`BSP_BIT32
(0)

	)

115 
uöt32_t
 
	mu¨tdma¸
;

116 
	#PL011_UARTDMACR_DMAONERR
 
	`BSP_BIT32
(2)

	)

117 
	#PL011_UARTDMACR_TXDMAE
 
	`BSP_BIT32
(1)

	)

118 
	#PL011_UARTDMACR_RXDMAE
 
	`BSP_BIT32
(0)

	)

119 
uöt32_t
 
	mª£rved_4c
[997];

120 
uöt32_t
 
	mu¨çîùhid0
;

121 
uöt32_t
 
	mu¨çîùhid1
;

122 
uöt32_t
 
	mu¨çîùhid2
;

123 
uöt32_t
 
	mu¨çîùhid3
;

124 
uöt32_t
 
	mu¨ç˚Œid0
;

125 
uöt32_t
 
	mu¨ç˚Œid1
;

126 
uöt32_t
 
	mu¨ç˚Œid2
;

127 
uöt32_t
 
	mu¨ç˚Œid3
;

128 } 
	t∂011
;

	@src/lib/libbsp/arm/shared/include/arm-pl011.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL011_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL011_H


	)

26 
	~<πems/ãrmio°y≥s.h
>

28 
	~<b•/¨m-∂011-ªgs.h
>

30 #ifde‡
__˝lu•lus


35 
πems_ãrmios_devi˚_c⁄ãxt
 
ba£
;

36 vﬁ©ûê
∂011
 *
ªgs
;

37 
πems_ve˘‹_numbî
 
úq
;

38 
uöt32_t
 
öôül_baud
;

39 } 
	t¨m_∂011_c⁄ãxt
;

41 
boﬁ
 
¨m_∂011_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
);

43 
¨m_∂011_wrôe_pﬁÀd
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
, 
c
);

45 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
¨m_∂011_‚s
;

47 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-pl050-regs.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL050_REGS_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL050_REGS_H


	)

26 
	~<b•/utûôy.h
>

29 
uöt32_t
 
	mkmi¸
;

30 
	#PL050_KMICR_KMITYPE
 
	`BSP_BIT32
(5)

	)

31 
	#PL050_KMICR_KMIRXINTREN
 
	`BSP_BIT32
(4)

	)

32 
	#PL050_KMICR_KMITXINTREN
 
	`BSP_BIT32
(3)

	)

33 
	#PL050_KMICR_KMIEN
 
	`BSP_BIT32
(2)

	)

34 
	#PL050_KMICR_FKMID
 
	`BSP_BIT32
(1)

	)

35 
	#PL050_KMICR_FKMIC
 
	`BSP_BIT32
(0)

	)

36 
uöt32_t
 
	mkmi°©
;

37 
	#PL050_KMISTAT_TXEMPTY
 
	`BSP_BIT32
(6)

	)

38 
	#PL050_KMISTAT_TXBUSY
 
	`BSP_BIT32
(5)

	)

39 
	#PL050_KMISTAT_RXFULL
 
	`BSP_BIT32
(4)

	)

40 
	#PL050_KMISTAT_RXBUSY
 
	`BSP_BIT32
(3)

	)

41 
	#PL050_KMISTAT_RXPARITY
 
	`BSP_BIT32
(2)

	)

42 
	#PL050_KMISTAT_KMIC
 
	`BSP_BIT32
(1)

	)

43 
	#PL050_KMISTAT_KMID
 
	`BSP_BIT32
(0)

	)

44 
uöt32_t
 
	mkmid©a
;

45 
	#PL050_KMIDATA_KMIDATA
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

46 
	#PL050_KMIDATA_KMIDATA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

47 
	#PL050_KMIDATA_KMIDATA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

48 
uöt32_t
 
	mkmi˛kdiv
;

49 
	#PL050_KMICLKDIV_KMICLKDIV
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

50 
	#PL050_KMICLKDIV_KMICLKDIV_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

51 
	#PL050_KMICLKDIV_KMICLKDIV_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

52 
uöt32_t
 
	mkmiú
;

53 
	#PL050_KMIIR_KMITXINTR
 
	`BSP_BIT32
(1)

	)

54 
	#PL050_KMIIR_KMIRXINTR
 
	`BSP_BIT32
(0)

	)

55 } 
	t∂050
;

	@src/lib/libbsp/arm/shared/include/arm-pl050.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL050_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL050_H


	)

26 
	~<πems/ãrmio°y≥s.h
>

28 
	~<b•/¨m-∂050-ªgs.h
>

30 #ifde‡
__˝lu•lus


35 
πems_ãrmios_devi˚_c⁄ãxt
 
ba£
;

36 vﬁ©ûê
∂050
 *
ªgs
;

37 
πems_ve˘‹_numbî
 
úq
;

38 
uöt32_t
 
öôül_baud
;

39 } 
	t¨m_∂050_c⁄ãxt
;

41 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
¨m_∂050_‚s
;

43 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/arm-pl111-fb.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL111_FB_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL111_FB_H


	)

26 
	~<b•/¨m-∂111-ªgs.h
>

28 
	s∂111_fb_c⁄fig
 {

29 vﬁ©ûê
∂111
 *
	mªgs
;

30 
uöt32_t
 
	mtimög0
;

31 
uöt32_t
 
	mtimög1
;

32 
uöt32_t
 
	mtimög2
;

33 
uöt32_t
 
	mtimög3
;

34 
uöt32_t
 
	mc⁄åﬁ
;

35 
uöt32_t
 
	mpowî_dñay_ö_us
;

36 (*
	m£t_up
)(c⁄° 
∂111_fb_c⁄fig
 *
	mcfg
);

37 (*
	mpös_£t_up
)(c⁄° 
∂111_fb_c⁄fig
 *
	mcfg
);

38 (*
	mpös_ã¨_down
)(c⁄° 
∂111_fb_c⁄fig
 *
	mcfg
);

39 (*
	mã¨_down
)(c⁄° 
∂111_fb_c⁄fig
 *
	mcfg
);

40 } 
	t∂111_fb_c⁄fig
;

42 c⁄° 
∂111_fb_c⁄fig
 *
¨m_∂111_fb_gë_c⁄fig
();

	@src/lib/libbsp/arm/shared/include/arm-pl111-regs.h

23 #i‚de‡
LIBBSP_ARM_SHARED_ARM_PL111_REGS_H


24 
	#LIBBSP_ARM_SHARED_ARM_PL111_REGS_H


	)

26 
	~<b•/utûôy.h
>

29 
uöt32_t
 
	mtimög0
;

30 
	#PL111_LCD_TIMING0_PPL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 2, 7)

	)

31 
	#PL111_LCD_TIMING0_PPL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 2, 7)

	)

32 
	#PL111_LCD_TIMING0_PPL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 2, 7)

	)

33 
	#PL111_LCD_TIMING0_HSW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

34 
	#PL111_LCD_TIMING0_HSW_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

35 
	#PL111_LCD_TIMING0_HSW_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

36 
	#PL111_LCD_TIMING0_HFP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

37 
	#PL111_LCD_TIMING0_HFP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

38 
	#PL111_LCD_TIMING0_HFP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 23)

	)

39 
	#PL111_LCD_TIMING0_HBP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

40 
	#PL111_LCD_TIMING0_HBP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

41 
	#PL111_LCD_TIMING0_HBP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 31)

	)

42 
uöt32_t
 
	mtimög1
;

43 
	#PL111_LCD_TIMING1_LPP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

44 
	#PL111_LCD_TIMING1_LPP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

45 
	#PL111_LCD_TIMING1_LPP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

46 
	#PL111_LCD_TIMING1_VSW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 15)

	)

47 
	#PL111_LCD_TIMING1_VSW_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 15)

	)

48 
	#PL111_LCD_TIMING1_VSW_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 15)

	)

49 
	#PL111_LCD_TIMING1_VFP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

50 
	#PL111_LCD_TIMING1_VFP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

51 
	#PL111_LCD_TIMING1_VFP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 23)

	)

52 
	#PL111_LCD_TIMING1_VBP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

53 
	#PL111_LCD_TIMING1_VBP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

54 
	#PL111_LCD_TIMING1_VBP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 31)

	)

55 
uöt32_t
 
	mtimög2
;

56 
	#PL111_LCD_TIMING2_PCD_LO
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 4)

	)

57 
	#PL111_LCD_TIMING2_PCD_LO_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

58 
	#PL111_LCD_TIMING2_PCD_LO_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 4)

	)

59 
	#PL111_LCD_TIMING2_CLKSEL
 
	`BSP_BIT32
(5)

	)

60 
	#PL111_LCD_TIMING2_ACB
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 10)

	)

61 
	#PL111_LCD_TIMING2_ACB_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 10)

	)

62 
	#PL111_LCD_TIMING2_ACB_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 10)

	)

63 
	#PL111_LCD_TIMING2_IVS
 
	`BSP_BIT32
(11)

	)

64 
	#PL111_LCD_TIMING2_IHS
 
	`BSP_BIT32
(12)

	)

65 
	#PL111_LCD_TIMING2_IPC
 
	`BSP_BIT32
(13)

	)

66 
	#PL111_LCD_TIMING2_IOE
 
	`BSP_BIT32
(14)

	)

67 
	#PL111_LCD_TIMING2_CPL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 25)

	)

68 
	#PL111_LCD_TIMING2_CPL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 25)

	)

69 
	#PL111_LCD_TIMING2_CPL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 25)

	)

70 
	#PL111_LCD_TIMING2_BCD
 
	`BSP_BIT32
(26)

	)

71 
	#PL111_LCD_TIMING2_PCD_HI
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 27, 31)

	)

72 
	#PL111_LCD_TIMING2_PCD_HI_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 27, 31)

	)

73 
	#PL111_LCD_TIMING2_PCD_HI_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 27, 31)

	)

74 
uöt32_t
 
	mtimög3
;

75 
	#PL111_LCD_TIMING3_LED
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 6)

	)

76 
	#PL111_LCD_TIMING3_LED_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 6)

	)

77 
	#PL111_LCD_TIMING3_LED_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 6)

	)

78 
	#PL111_LCD_TIMING3_LEE
 
	`BSP_BIT32
(16)

	)

79 
uöt32_t
 
	mupba£
;

80 
uöt32_t
 
	mÕba£
;

81 
uöt32_t
 
	mc⁄åﬁ
;

82 
	#PL111_LCD_CONTROL_LCD_EN
 
	`BSP_BIT32
(0)

	)

83 
	#PL111_LCD_CONTROL_LCD_BPP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 3)

	)

84 
	#PL111_LCD_CONTROL_LCD_BPP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 3)

	)

85 
	#PL111_LCD_CONTROL_LCD_BPP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 1, 3)

	)

86 
	#PL111_LCD_CONTROL_LCD_BPP_1
 0x00U

	)

87 
	#PL111_LCD_CONTROL_LCD_BPP_2
 0x01U

	)

88 
	#PL111_LCD_CONTROL_LCD_BPP_4
 0x02U

	)

89 
	#PL111_LCD_CONTROL_LCD_BPP_8
 0x03U

	)

90 
	#PL111_LCD_CONTROL_LCD_BPP_16
 0x04U

	)

91 
	#PL111_LCD_CONTROL_LCD_BPP_24
 0x05U

	)

92 
	#PL111_LCD_CONTROL_LCD_BPP_16
 0x06U

	)

93 
	#PL111_LCD_CONTROL_LCD_BPP_12
 0x07U

	)

94 
	#PL111_LCD_CONTROL_LCD_BW
 
	`BSP_BIT32
(4)

	)

95 
	#PL111_LCD_CONTROL_LCD_TFT
 
	`BSP_BIT32
(5)

	)

96 
	#PL111_LCD_CONTROL_LCD_MONO8
 
	`BSP_BIT32
(6)

	)

97 
	#PL111_LCD_CONTROL_LCD_DUAL
 
	`BSP_BIT32
(7)

	)

98 
	#PL111_LCD_CONTROL_BGR
 
	`BSP_BIT32
(8)

	)

99 
	#PL111_LCD_CONTROL_BEBO
 
	`BSP_BIT32
(9)

	)

100 
	#PL111_LCD_CONTROL_BEPO
 
	`BSP_BIT32
(10)

	)

101 
	#PL111_LCD_CONTROL_LCD_PWR
 
	`BSP_BIT32
(11)

	)

102 
	#PL111_LCD_CONTROL_LCD_V_COMP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 13)

	)

103 
	#PL111_LCD_CONTROL_LCD_V_COMP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 13)

	)

104 
	#PL111_LCD_CONTROL_LCD_V_COMP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 13)

	)

105 
	#PL111_LCD_CONTROL_WATERMARK
 
	`BSP_BIT32
(16)

	)

106 
uöt32_t
 
	mimsc
;

107 
uöt32_t
 
	mris
;

108 
uöt32_t
 
	mmis
;

109 
uöt32_t
 
	mi¸
;

110 
	#PL111_LCD_I_FUF
 
	`BSP_BIT32
(1)

	)

111 
	#PL111_LCD_I_LNBU
 
	`BSP_BIT32
(2)

	)

112 
	#PL111_LCD_I_VCOMP
 
	`BSP_BIT32
(3)

	)

113 
	#PL111_LCD_I_MBERROR
 
	`BSP_BIT32
(4)

	)

114 
uöt32_t
 
	mupcuº
;

115 
uöt32_t
 
	mÕcuº
;

116 
uöt32_t
 
	mª£rved_34
[115];

117 
uöt16_t
 
	m∑l
[256];

118 
	#PL111_LCD_PAL_R
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 0, 4)

	)

119 
	#PL111_LCD_PAL_R_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 0, 4)

	)

120 
	#PL111_LCD_PAL_R_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 0, 4)

	)

121 
	#PL111_LCD_PAL_G
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 5, 9)

	)

122 
	#PL111_LCD_PAL_G_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 5, 9)

	)

123 
	#PL111_LCD_PAL_G_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 5, 9)

	)

124 
	#PL111_LCD_PAL_B
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 10, 14)

	)

125 
	#PL111_LCD_PAL_B_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 10, 14)

	)

126 
	#PL111_LCD_PAL_B_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 10, 14)

	)

127 
	#PL111_LCD_PAL_I
 
	`BSP_BIT16
(15)

	)

128 } 
	t∂111_lcd
;

131 
uöt8_t
 
	mimage
[1024];

132 
uöt32_t
 
	m˘æ
;

133 
	#PL111_CRSR_CTRL_ON
 
	`BSP_BIT32
(0)

	)

134 
	#PL111_CRSR_CTRL_NUMBER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 5)

	)

135 
	#PL111_CRSR_CTRL_NUMBER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 5)

	)

136 
	#PL111_CRSR_CTRL_NUMBER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 5)

	)

137 
uöt32_t
 
	mc⁄fig
;

138 
	#PL111_CRSR_CONFIG_SIZE
 
	`BSP_BIT32
(0)

	)

139 
	#PL111_CRSR_CONFIG_FRAME_SYNC
 
	`BSP_BIT32
(1)

	)

140 
uöt32_t
 
	m∑Àâe0
;

141 
uöt32_t
 
	m∑Àâe1
;

142 
	#PL111_CRSR_PALETTE_RED
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

143 
	#PL111_CRSR_PALETTE_RED_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

144 
	#PL111_CRSR_PALETTE_RED_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

145 
	#PL111_CRSR_PALETTE_GREEN
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

146 
	#PL111_CRSR_PALETTE_GREEN_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

147 
	#PL111_CRSR_PALETTE_GREEN_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

148 
	#PL111_CRSR_PALETTE_BLUE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

149 
	#PL111_CRSR_PALETTE_BLUE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

150 
	#PL111_CRSR_PALETTE_BLUE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 23)

	)

151 
uöt32_t
 
	mxy
;

152 
	#PL111_CRSR_XY_X
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

153 
	#PL111_CRSR_XY_X_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

154 
	#PL111_CRSR_XY_X_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

155 
	#PL111_CRSR_XY_X_EXP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 11)

	)

156 
	#PL111_CRSR_XY_X_EXP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 11)

	)

157 
	#PL111_CRSR_XY_X_EXP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 11)

	)

158 
	#PL111_CRSR_XY_Y
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 25)

	)

159 
	#PL111_CRSR_XY_Y_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 25)

	)

160 
	#PL111_CRSR_XY_Y_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 25)

	)

161 
	#PL111_CRSR_XY_Y_EXP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 25, 27)

	)

162 
	#PL111_CRSR_XY_Y_EXP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 25, 27)

	)

163 
	#PL111_CRSR_XY_Y_EXP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 25, 27)

	)

164 
uöt32_t
 
	m˛ù
;

165 
	#PL111_CRSR_CLIP_X
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

166 
	#PL111_CRSR_CLIP_X_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

167 
	#PL111_CRSR_CLIP_X_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

168 
	#PL111_CRSR_CLIP_Y
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 13)

	)

169 
	#PL111_CRSR_CLIP_Y_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 13)

	)

170 
	#PL111_CRSR_CLIP_Y_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 13)

	)

171 
uöt32_t
 
	mimsc
;

172 
uöt32_t
 
	mi¸
;

173 
uöt32_t
 
	mris
;

174 
uöt32_t
 
	mmis
;

175 
	#PL111_CRSR_I_CRSR
 
	`BSP_BIT32
(0)

	)

176 } 
	t∂111_¸§
;

179 
∂111_lcd
 
	mlcd
;

180 
uöt32_t
 
	mª£rved_400
[256];

181 
∂111_¸§
 
	m¸§
;

182 } 
	t∂111
;

	@src/lib/libbsp/arm/shared/include/arm-release-id.h

23 #i‚de‡
ARM_RELEASE_ID_H_


24 
	#ARM_RELEASE_ID_H_


	)

26 #ifde‡
__˝lu•lus


32 
	#ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
–
ªÀa£_no
, 
∑tch_Àvñ
 ) \

33 ––––
ªÀa£_no
 ) & 0xFFFF ) << 16 ) + ( ( 
∑tch_Àvñ
 ) & 0xFFFF ) )

	)

36 
ARM_RELEASE_ID_R0_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 0 ),

37 
ARM_RELEASE_ID_R0_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 1 ),

38 
ARM_RELEASE_ID_R0_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 2 ),

39 
ARM_RELEASE_ID_R0_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 3 ),

40 
ARM_RELEASE_ID_R0_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 4 ),

41 
ARM_RELEASE_ID_R0_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 5 ),

42 
ARM_RELEASE_ID_R0_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 6 ),

43 
ARM_RELEASE_ID_R0_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 7 ),

44 
ARM_RELEASE_ID_R0_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 8 ),

45 
ARM_RELEASE_ID_R0_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 9 ),

46 
ARM_RELEASE_ID_R0_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 0, 10 ),

47 
ARM_RELEASE_ID_R1_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 0 ),

48 
ARM_RELEASE_ID_R1_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 1 ),

49 
ARM_RELEASE_ID_R1_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 2 ),

50 
ARM_RELEASE_ID_R1_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 3 ),

51 
ARM_RELEASE_ID_R1_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 4 ),

52 
ARM_RELEASE_ID_R1_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 5 ),

53 
ARM_RELEASE_ID_R1_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 6 ),

54 
ARM_RELEASE_ID_R1_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 7 ),

55 
ARM_RELEASE_ID_R1_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 8 ),

56 
ARM_RELEASE_ID_R1_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 9 ),

57 
ARM_RELEASE_ID_R1_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 1, 10 ),

58 
ARM_RELEASE_ID_R2_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 0 ),

59 
ARM_RELEASE_ID_R2_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 1 ),

60 
ARM_RELEASE_ID_R2_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 2 ),

61 
ARM_RELEASE_ID_R2_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 3 ),

62 
ARM_RELEASE_ID_R2_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 4 ),

63 
ARM_RELEASE_ID_R2_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 5 ),

64 
ARM_RELEASE_ID_R2_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 6 ),

65 
ARM_RELEASE_ID_R2_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 7 ),

66 
ARM_RELEASE_ID_R2_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 8 ),

67 
ARM_RELEASE_ID_R2_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 9 ),

68 
ARM_RELEASE_ID_R2_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 2, 10 ),

69 
ARM_RELEASE_ID_R3_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 0 ),

70 
ARM_RELEASE_ID_R3_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 1 ),

71 
ARM_RELEASE_ID_R3_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 2 ),

72 
ARM_RELEASE_ID_R3_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 3 ),

73 
ARM_RELEASE_ID_R3_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 4 ),

74 
ARM_RELEASE_ID_R3_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 5 ),

75 
ARM_RELEASE_ID_R3_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 6 ),

76 
ARM_RELEASE_ID_R3_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 7 ),

77 
ARM_RELEASE_ID_R3_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 8 ),

78 
ARM_RELEASE_ID_R3_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 9 ),

79 
ARM_RELEASE_ID_R3_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 3, 10 ),

80 
ARM_RELEASE_ID_R4_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 0 ),

81 
ARM_RELEASE_ID_R4_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 1 ),

82 
ARM_RELEASE_ID_R4_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 2 ),

83 
ARM_RELEASE_ID_R4_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 3 ),

84 
ARM_RELEASE_ID_R4_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 4 ),

85 
ARM_RELEASE_ID_R4_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 5 ),

86 
ARM_RELEASE_ID_R4_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 6 ),

87 
ARM_RELEASE_ID_R4_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 7 ),

88 
ARM_RELEASE_ID_R4_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 8 ),

89 
ARM_RELEASE_ID_R4_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 9 ),

90 
ARM_RELEASE_ID_R4_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 4, 10 ),

91 
ARM_RELEASE_ID_R5_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 0 ),

92 
ARM_RELEASE_ID_R5_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 1 ),

93 
ARM_RELEASE_ID_R5_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 2 ),

94 
ARM_RELEASE_ID_R5_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 3 ),

95 
ARM_RELEASE_ID_R5_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 4 ),

96 
ARM_RELEASE_ID_R5_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 5 ),

97 
ARM_RELEASE_ID_R5_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 6 ),

98 
ARM_RELEASE_ID_R5_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 7 ),

99 
ARM_RELEASE_ID_R5_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 8 ),

100 
ARM_RELEASE_ID_R5_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 9 ),

101 
ARM_RELEASE_ID_R5_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 5, 10 ),

102 
ARM_RELEASE_ID_R6_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 0 ),

103 
ARM_RELEASE_ID_R6_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 1 ),

104 
ARM_RELEASE_ID_R6_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 2 ),

105 
ARM_RELEASE_ID_R6_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 3 ),

106 
ARM_RELEASE_ID_R6_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 4 ),

107 
ARM_RELEASE_ID_R6_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 5 ),

108 
ARM_RELEASE_ID_R6_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 6 ),

109 
ARM_RELEASE_ID_R6_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 7 ),

110 
ARM_RELEASE_ID_R6_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 8 ),

111 
ARM_RELEASE_ID_R6_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 9 ),

112 
ARM_RELEASE_ID_R6_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 6, 10 ),

113 
ARM_RELEASE_ID_R7_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 0 ),

114 
ARM_RELEASE_ID_R7_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 1 ),

115 
ARM_RELEASE_ID_R7_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 2 ),

116 
ARM_RELEASE_ID_R7_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 3 ),

117 
ARM_RELEASE_ID_R7_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 4 ),

118 
ARM_RELEASE_ID_R7_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 5 ),

119 
ARM_RELEASE_ID_R7_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 6 ),

120 
ARM_RELEASE_ID_R7_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 7 ),

121 
ARM_RELEASE_ID_R7_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 8 ),

122 
ARM_RELEASE_ID_R7_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 9 ),

123 
ARM_RELEASE_ID_R7_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 7, 10 ),

124 
ARM_RELEASE_ID_R8_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 0 ),

125 
ARM_RELEASE_ID_R8_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 1 ),

126 
ARM_RELEASE_ID_R8_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 2 ),

127 
ARM_RELEASE_ID_R8_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 3 ),

128 
ARM_RELEASE_ID_R8_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 4 ),

129 
ARM_RELEASE_ID_R8_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 5 ),

130 
ARM_RELEASE_ID_R8_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 6 ),

131 
ARM_RELEASE_ID_R8_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 7 ),

132 
ARM_RELEASE_ID_R8_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 8 ),

133 
ARM_RELEASE_ID_R8_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 9 ),

134 
ARM_RELEASE_ID_R8_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 8, 10 ),

135 
ARM_RELEASE_ID_R9_P0
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 0 ),

136 
ARM_RELEASE_ID_R9_P1
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 1 ),

137 
ARM_RELEASE_ID_R9_P2
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 2 ),

138 
ARM_RELEASE_ID_R9_P3
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 3 ),

139 
ARM_RELEASE_ID_R9_P4
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 4 ),

140 
ARM_RELEASE_ID_R9_P5
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 5 ),

141 
ARM_RELEASE_ID_R9_P6
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 6 ),

142 
ARM_RELEASE_ID_R9_P7
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 7 ),

143 
ARM_RELEASE_ID_R9_P8
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 8 ),

144 
ARM_RELEASE_ID_R9_P9
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 9 ),

145 
ARM_RELEASE_ID_R9_P10
 = 
ARM_RELEASE_ID_FROM_NUMBER_AND_PATCH_LEVEL
( 9, 10 )

146 } 
	t¨m_ªÀa£_id
;

148 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/linker-symbols.h

23 #i‚de‡
LIBBSP_ARM_SHARED_LINKER_SYMBOLS_H


24 
	#LIBBSP_ARM_SHARED_LINKER_SYMBOLS_H


	)

26 #ifde‡
__˝lu•lus


40 #i‚de‡
ASM


41 
	#LINKER_SYMBOL
(
sym
Ësym [];

	)

43 
	#LINKER_SYMBOL
(
sym
Ë.
	)
sym

46 
LINKER_SYMBOL
(
b•_°ack_úq_begö
)

47 
LINKER_SYMBOL
(
b•_°ack_úq_íd
)

48 
LINKER_SYMBOL
(
b•_°ack_úq_size
)

50 
LINKER_SYMBOL
(
b•_°ack_fiq_begö
)

51 
LINKER_SYMBOL
(
b•_°ack_fiq_íd
)

52 
LINKER_SYMBOL
(
b•_°ack_úq_size
)

54 
LINKER_SYMBOL
(
b•_°ack_abt_begö
)

55 
LINKER_SYMBOL
(
b•_°ack_abt_íd
)

56 
LINKER_SYMBOL
(
b•_°ack_abt_size
)

58 
LINKER_SYMBOL
(
b•_°ack_und_begö
)

59 
LINKER_SYMBOL
(
b•_°ack_und_íd
)

60 
LINKER_SYMBOL
(
b•_°ack_und_size
)

62 
LINKER_SYMBOL
(
b•_°ack_svc_begö
)

63 
LINKER_SYMBOL
(
b•_°ack_svc_íd
)

64 
LINKER_SYMBOL
(
b•_°ack_svc_size
)

66 
LINKER_SYMBOL
(
b•_£˘i⁄_°¨t_begö
)

67 
LINKER_SYMBOL
(
b•_£˘i⁄_°¨t_íd
)

68 
LINKER_SYMBOL
(
b•_£˘i⁄_°¨t_size
)

70 
LINKER_SYMBOL
(
b•_£˘i⁄_ve˘‹_begö
)

71 
LINKER_SYMBOL
(
b•_£˘i⁄_ve˘‹_íd
)

72 
LINKER_SYMBOL
(
b•_£˘i⁄_ve˘‹_size
)

74 
LINKER_SYMBOL
(
b•_£˘i⁄_ãxt_begö
)

75 
LINKER_SYMBOL
(
b•_£˘i⁄_ãxt_íd
)

76 
LINKER_SYMBOL
(
b•_£˘i⁄_ãxt_size
)

77 
LINKER_SYMBOL
(
b•_£˘i⁄_ãxt_lﬂd_begö
)

78 
LINKER_SYMBOL
(
b•_£˘i⁄_ãxt_lﬂd_íd
)

80 
LINKER_SYMBOL
(
b•_£˘i⁄_rod©a_begö
)

81 
LINKER_SYMBOL
(
b•_£˘i⁄_rod©a_íd
)

82 
LINKER_SYMBOL
(
b•_£˘i⁄_rod©a_size
)

83 
LINKER_SYMBOL
(
b•_£˘i⁄_rod©a_lﬂd_begö
)

84 
LINKER_SYMBOL
(
b•_£˘i⁄_rod©a_lﬂd_íd
)

86 
LINKER_SYMBOL
(
b•_£˘i⁄_d©a_begö
)

87 
LINKER_SYMBOL
(
b•_£˘i⁄_d©a_íd
)

88 
LINKER_SYMBOL
(
b•_£˘i⁄_d©a_size
)

89 
LINKER_SYMBOL
(
b•_£˘i⁄_d©a_lﬂd_begö
)

90 
LINKER_SYMBOL
(
b•_£˘i⁄_d©a_lﬂd_íd
)

92 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_ãxt_begö
)

93 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_ãxt_íd
)

94 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_ãxt_size
)

95 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_ãxt_lﬂd_begö
)

96 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_ãxt_lﬂd_íd
)

98 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_d©a_begö
)

99 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_d©a_íd
)

100 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_d©a_size
)

101 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_d©a_lﬂd_begö
)

102 
LINKER_SYMBOL
(
b•_£˘i⁄_Á°_d©a_lﬂd_íd
)

104 
LINKER_SYMBOL
(
b•_£˘i⁄_bss_begö
)

105 
LINKER_SYMBOL
(
b•_£˘i⁄_bss_íd
)

106 
LINKER_SYMBOL
(
b•_£˘i⁄_bss_size
)

108 
LINKER_SYMBOL
(
b•_£˘i⁄_w‹k_begö
)

109 
LINKER_SYMBOL
(
b•_£˘i⁄_w‹k_íd
)

110 
LINKER_SYMBOL
(
b•_£˘i⁄_w‹k_size
)

112 
LINKER_SYMBOL
(
b•_£˘i⁄_°ack_begö
)

113 
LINKER_SYMBOL
(
b•_£˘i⁄_°ack_íd
)

114 
LINKER_SYMBOL
(
b•_£˘i⁄_°ack_size
)

116 
LINKER_SYMBOL
(
b•_£˘i⁄_noˇche_begö
)

117 
LINKER_SYMBOL
(
b•_£˘i⁄_noˇche_íd
)

118 
LINKER_SYMBOL
(
b•_£˘i⁄_noˇche_size
)

119 
LINKER_SYMBOL
(
b•_£˘i⁄_noˇche_lﬂd_begö
)

120 
LINKER_SYMBOL
(
b•_£˘i⁄_noˇche_lﬂd_íd
)

122 
LINKER_SYMBOL
(
b•_ve˘‹_èbÀ_begö
)

123 
LINKER_SYMBOL
(
b•_ve˘‹_èbÀ_íd
)

124 
LINKER_SYMBOL
(
b•_ve˘‹_èbÀ_size
)

126 
LINKER_SYMBOL
(
b•_°¨t_ve˘‹_èbÀ_begö
)

127 
LINKER_SYMBOL
(
b•_°¨t_ve˘‹_èbÀ_íd
)

128 
LINKER_SYMBOL
(
b•_°¨t_ve˘‹_èbÀ_size
)

130 
LINKER_SYMBOL
(
b•_å™¶©i⁄_èbÀ_ba£
)

131 
LINKER_SYMBOL
(
b•_å™¶©i⁄_èbÀ_íd
)

133 
LINKER_SYMBOL
(
b•_noˇche_hóp_begö
)

134 
LINKER_SYMBOL
(
b•_noˇche_hóp_íd
)

135 
LINKER_SYMBOL
(
b•_noˇche_hóp_size
)

137 
	#BSP_FAST_TEXT_SECTION
 
	`__©åibuã__
((
	`£˘i⁄
(".b•_Á°_ãxt")))

	)

139 
	#BSP_FAST_DATA_SECTION
 
	`__©åibuã__
((
	`£˘i⁄
(".b•_Á°_d©a")))

	)

141 
	#BSP_NOCACHE_SECTION
 
	`__©åibuã__
((
	`£˘i⁄
(".b•_noˇche")))

	)

143 
LINKER_SYMBOL
(
b•_¥o˚ss‹_cou¡
)

147 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/include/start.h

23 #i‚de‡
LIBBSP_ARM_SHARED_START_H


24 
	#LIBBSP_ARM_SHARED_START_H


	)

26 
	~<°rög.h
>

28 
	~<b•/lökî-symbﬁs.h
>

30 #ifde‡
__˝lu•lus


44 
	#BSP_START_TEXT_SECTION
 
	`__©åibuã__
((
	`£˘i⁄
(".b•_°¨t_ãxt")))

	)

46 
	#BSP_START_DATA_SECTION
 
	`__©åibuã__
((
	`£˘i⁄
(".b•_°¨t_d©a")))

	)

51 
_°¨t
();

60 
b•_°¨t_hook_0
();

68 
b•_°¨t_hook_1
();

76 
b•_°¨t_mem˝y
(*
de°
, c⁄° *
§c
, 
size_t
 
n
);

81 
b•_°¨t_mem˝y_¨m
(*
de°
, c⁄° *
§c
, 
size_t
 
n
);

86 
BSP_START_TEXT_SECTION
 
ölöe
 
b•_°¨t_c›y_£˘i⁄s
()

89 
b•_°¨t_mem˝y
(

90 (*Ë
b•_£˘i⁄_ãxt_begö
,

91 (c⁄° *Ë
b•_£˘i⁄_ãxt_lﬂd_begö
,

92 (
size_t
Ë
b•_£˘i⁄_ãxt_size


96 
b•_°¨t_mem˝y
(

97 (*Ë
b•_£˘i⁄_rod©a_begö
,

98 (c⁄° *Ë
b•_£˘i⁄_rod©a_lﬂd_begö
,

99 (
size_t
Ë
b•_£˘i⁄_rod©a_size


103 
b•_°¨t_mem˝y
(

104 (*Ë
b•_£˘i⁄_d©a_begö
,

105 (c⁄° *Ë
b•_£˘i⁄_d©a_lﬂd_begö
,

106 (
size_t
Ë
b•_£˘i⁄_d©a_size


110 
b•_°¨t_mem˝y
(

111 (*Ë
b•_£˘i⁄_Á°_ãxt_begö
,

112 (c⁄° *Ë
b•_£˘i⁄_Á°_ãxt_lﬂd_begö
,

113 (
size_t
Ë
b•_£˘i⁄_Á°_ãxt_size


117 
b•_°¨t_mem˝y
(

118 (*Ë
b•_£˘i⁄_Á°_d©a_begö
,

119 (c⁄° *Ë
b•_£˘i⁄_Á°_d©a_lﬂd_begö
,

120 (
size_t
Ë
b•_£˘i⁄_Á°_d©a_size


124 
BSP_START_TEXT_SECTION
 
ölöe
 
b•_°¨t_˛ór_bss
()

126 
mem£t
(
b•_£˘i⁄_bss_begö
, 0, (
size_t
Ë
b•_£˘i⁄_bss_size
);

131 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/clock/lpc-clock-config.c

23 
	~<πems.h
>

24 
	~<πems/timecou¡î.h
>

26 
	~<b•/Õc-˛ock-c⁄fig.h
>

27 
	~<b•/Õc-timî.h
>

29 #ifde‡
ARM_MULTILIB_ARCH_V4


32 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

34 vﬁ©ûê
Õc_timî
 *c⁄° 
	gÕc_˛ock
 =

35 (vﬁ©ûê
Õc_timî
 *Ë
LPC_CLOCK_TIMER_BASE
;

37 vﬁ©ûê
Õc_timî
 *c⁄° 
	gÕc_timecou¡î
 =

38 (vﬁ©ûê
Õc_timî
 *Ë
LPC_CLOCK_TIMECOUNTER_BASE
;

40 
timecou¡î
 
	gÕc_˛ock_tc
;

42 
uöt32_t
 
	$Õc_˛ock_tc_gë_timecou¡
(
timecou¡î
 *
tc
)

44  
Õc_timecou¡î
->
tc
;

45 
	}
}

47 
	$Õc_˛ock_©_tick
()

49 
Õc_˛ock
->
ú
 = 
LPC_TIMER_IR_MR0
;

50 
	}
}

52 
	$Õc_˛ock_h™dÀr_ö°Æl
()

54 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

56 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

57 
LPC_CLOCK_INTERRUPT
,

59 
RTEMS_INTERRUPT_UNIQUE
,

60 (
πems_öãºu±_h™dÀr
Ë
Clock_i§
,

61 
NULL


63 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

64 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

66 
	}
}

68 
	$Õc_˛ock_öôülize
()

70 
uöt64_t
 
öãrvÆ
 = ((uöt64_tË
LPC_CLOCK_REFERENCE


71 * (
uöt64_t
Ë
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) / 1000000;

74 
	`LPC_CLOCK_MODULE_ENABLE
();

77 
Õc_˛ock
->
t¸
 = 
LPC_TIMER_TCR_RST
;

80 
Õc_˛ock
->
ú
 = 
LPC_TIMER_IR_ALL
;

83 
Õc_˛ock
->
c¸
 = 0;

86 
Õc_˛ock
->
¥
 = 0;

89 
Õc_˛ock
->
mr0
 = (
uöt32_t
Ë
öãrvÆ
;

92 
Õc_˛ock
->
m¸
 = 
LPC_TIMER_MCR_MR0_INTR
 | 
LPC_TIMER_MCR_MR0_RST
;

95 
Õc_˛ock
->
emr
 = 0x0;

98 
Õc_˛ock
->
t¸
 = 
LPC_TIMER_TCR_EN
;

101 
Õc_˛ock_tc
.
tc_gë_timecou¡
 = 
Õc_˛ock_tc_gë_timecou¡
;

102 
Õc_˛ock_tc
.
tc_cou¡î_mask
 = 0xffffffff;

103 
Õc_˛ock_tc
.
tc_‰equícy
 = 
LPC_CLOCK_REFERENCE
;

104 
Õc_˛ock_tc
.
tc_quÆôy
 = 
RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER
;

105 
	`πems_timecou¡î_ö°Æl
(&
Õc_˛ock_tc
);

106 
	}
}

108 
	$Õc_˛ock_˛ónup
()

110 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

113 
Õc_˛ock
->
t¸
 = 0x0;

116 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

117 
LPC_CLOCK_INTERRUPT
,

118 (
πems_öãºu±_h™dÀr
Ë
Clock_i§
,

119 
NULL


121 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

122 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

124 
	}
}

126 
	#Clock_drivî_suµ‹t_©_tick
(Ë
	`Õc_˛ock_©_tick
()

	)

127 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
(Ë
	`Õc_˛ock_öôülize
()

	)

128 
	#Clock_drivî_suµ‹t_ö°Æl_i§
(
i§
, 
ﬁd_i§
) \

130 
	`Õc_˛ock_h™dÀr_ö°Æl
(); \

131 
ﬁd_i§
 = 
NULL
; \

132 } 0)

	)

134 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
(Ë
	`Õc_˛ock_˛ónup
()

	)

137 
	~"../../../../sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libbsp/arm/shared/lpc/include/lpc-dma.h

23 #i‚de‡
LIBBSP_ARM_SHARED_LPC_DMA_H


24 
	#LIBBSP_ARM_SHARED_LPC_DMA_H


	)

26 
	~<b•›ts.h
>

27 
	~<b•/utûôy.h
>

29 #ifde‡
__˝lu•lus


48 
uöt32_t
 
§c
;

49 
uöt32_t
 
de°
;

50 
uöt32_t
 
Œi
;

51 
uöt32_t
 
˘æ
;

52 } 
	tÕc_dma_des¸ùt‹
;

58 
Õc_dma_des¸ùt‹
 
desc
;

59 
uöt32_t
 
cfg
;

60 
uöt32_t
 
ª£rved
 [3];

61 } 
	tÕc_dma_ch™√l
;

67 
uöt32_t
 
öt_°©
;

68 
uöt32_t
 
öt_tc_°©
;

69 
uöt32_t
 
öt_tc_˛ór
;

70 
uöt32_t
 
öt_îr_°©
;

71 
uöt32_t
 
öt_îr_˛ór
;

72 
uöt32_t
 
øw_tc_°©
;

73 
uöt32_t
 
øw_îr_°©
;

74 
uöt32_t
 
íabÀd_ch™√ls
;

75 
uöt32_t
 
so·_bur°_ªq
;

76 
uöt32_t
 
so·_sögÀ_ªq
;

77 
uöt32_t
 
so·_œ°_bur°_ªq
;

78 
uöt32_t
 
so·_œ°_sögÀ_ªq
;

79 
uöt32_t
 
cfg
;

80 
uöt32_t
 
sync
;

81 
uöt32_t
 
ª£rved
 [50];

82 
Õc_dma_ch™√l
 
ch™√ls
 [
LPC_DMA_CHANNEL_COUNT
];

83 } 
	tÕc_dma
;

91 
	#DMA_CFG_E
 
	`BSP_BIT32
(0)

	)

92 
	#DMA_CFG_M_0
 
	`BSP_BIT32
(1)

	)

93 
	#DMA_CFG_M_1
 
	`BSP_BIT32
(2)

	)

103 
	#DMA_CH_CTRL_TSZ
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 11)

	)

104 
	#DMA_CH_CTRL_TSZ_MAX
 
	`DMA_CH_CTRL_TSZ
(0xfff)

	)

106 
	#DMA_CH_CTRL_SB
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 14)

	)

107 
	#DMA_CH_CTRL_SB_1
 
	`DMA_CH_CTRL_SB
(0)

	)

108 
	#DMA_CH_CTRL_SB_4
 
	`DMA_CH_CTRL_SB
(1)

	)

109 
	#DMA_CH_CTRL_SB_8
 
	`DMA_CH_CTRL_SB
(2)

	)

110 
	#DMA_CH_CTRL_SB_16
 
	`DMA_CH_CTRL_SB
(3)

	)

111 
	#DMA_CH_CTRL_SB_32
 
	`DMA_CH_CTRL_SB
(4)

	)

112 
	#DMA_CH_CTRL_SB_64
 
	`DMA_CH_CTRL_SB
(5)

	)

113 
	#DMA_CH_CTRL_SB_128
 
	`DMA_CH_CTRL_SB
(6)

	)

114 
	#DMA_CH_CTRL_SB_256
 
	`DMA_CH_CTRL_SB
(7)

	)

116 
	#DMA_CH_CTRL_DB
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 15, 17)

	)

117 
	#DMA_CH_CTRL_DB_1
 
	`DMA_CH_CTRL_DB
(0)

	)

118 
	#DMA_CH_CTRL_DB_4
 
	`DMA_CH_CTRL_DB
(1)

	)

119 
	#DMA_CH_CTRL_DB_8
 
	`DMA_CH_CTRL_DB
(2)

	)

120 
	#DMA_CH_CTRL_DB_16
 
	`DMA_CH_CTRL_DB
(3)

	)

121 
	#DMA_CH_CTRL_DB_32
 
	`DMA_CH_CTRL_DB
(4)

	)

122 
	#DMA_CH_CTRL_DB_64
 
	`DMA_CH_CTRL_DB
(5)

	)

123 
	#DMA_CH_CTRL_DB_128
 
	`DMA_CH_CTRL_DB
(6)

	)

124 
	#DMA_CH_CTRL_DB_256
 
	`DMA_CH_CTRL_DB
(7)

	)

126 
	#DMA_CH_CTRL_SW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 18, 20)

	)

127 
	#DMA_CH_CTRL_SW_8
 
	`DMA_CH_CTRL_SW
(0)

	)

128 
	#DMA_CH_CTRL_SW_16
 
	`DMA_CH_CTRL_SW
(1)

	)

129 
	#DMA_CH_CTRL_SW_32
 
	`DMA_CH_CTRL_SW
(2)

	)

131 
	#DMA_CH_CTRL_DW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 21, 23)

	)

132 
	#DMA_CH_CTRL_DW_8
 
	`DMA_CH_CTRL_DW
(0)

	)

133 
	#DMA_CH_CTRL_DW_16
 
	`DMA_CH_CTRL_DW
(1)

	)

134 
	#DMA_CH_CTRL_DW_32
 
	`DMA_CH_CTRL_DW
(2)

	)

136 
	#DMA_CH_CTRL_S
 
	`BSP_BIT32
(24)

	)

137 
	#DMA_CH_CTRL_D
 
	`BSP_BIT32
(25)

	)

138 
	#DMA_CH_CTRL_SI
 
	`BSP_BIT32
(26)

	)

139 
	#DMA_CH_CTRL_DI
 
	`BSP_BIT32
(27)

	)

140 
	#DMA_CH_CTRL_PROT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 28, 30)

	)

141 
	#DMA_CH_CTRL_I
 
	`BSP_BIT32
(31)

	)

151 
	#DMA_CH_CFG_E
 
	`BSP_BIT32
(0)

	)

152 
	#DMA_CH_CFG_SPER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 5)

	)

153 
	#DMA_CH_CFG_DPER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 10)

	)

155 
	#DMA_CH_CFG_FLOW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 11, 13)

	)

156 
	#DMA_CH_CFG_FLOW_MEM_TO_MEM_DMA
 
	`DMA_CH_CFG_FLOW
(0)

	)

157 
	#DMA_CH_CFG_FLOW_MEM_TO_PER_DMA
 
	`DMA_CH_CFG_FLOW
(1)

	)

158 
	#DMA_CH_CFG_FLOW_PER_TO_MEM_DMA
 
	`DMA_CH_CFG_FLOW
(2)

	)

159 
	#DMA_CH_CFG_FLOW_PER_TO_PER_DMA
 
	`DMA_CH_CFG_FLOW
(3)

	)

160 
	#DMA_CH_CFG_FLOW_PER_TO_PER_DEST
 
	`DMA_CH_CFG_FLOW
(4)

	)

161 
	#DMA_CH_CFG_FLOW_MEM_TO_PER_PER
 
	`DMA_CH_CFG_FLOW
(5)

	)

162 
	#DMA_CH_CFG_FLOW_PER_TO_MEM_PER
 
	`DMA_CH_CFG_FLOW
(6)

	)

163 
	#DMA_CH_CFG_FLOW_PER_TO_PER_SRC
 
	`DMA_CH_CFG_FLOW
(7)

	)

165 
	#DMA_CH_CFG_IE
 
	`BSP_BIT32
(14)

	)

166 
	#DMA_CH_CFG_ITC
 
	`BSP_BIT32
(15)

	)

167 
	#DMA_CH_CFG_L
 
	`BSP_BIT32
(16)

	)

168 
	#DMA_CH_CFG_A
 
	`BSP_BIT32
(17)

	)

169 
	#DMA_CH_CFG_H
 
	`BSP_BIT32
(18)

	)

179 
	#LPC24XX_DMA_PER_SSP_0_TX
 0

	)

180 
	#LPC24XX_DMA_PER_SSP_0_RX
 1

	)

181 
	#LPC24XX_DMA_PER_SSP_1_TX
 2

	)

182 
	#LPC24XX_DMA_PER_SSP_1_RX
 3

	)

183 
	#LPC24XX_DMA_PER_SD_MMC
 4

	)

184 
	#LPC24XX_DMA_PER_I2S_CH_0
 5

	)

185 
	#LPC24XX_DMA_PER_I2S_CH_1
 6

	)

195 
	#LPC32XX_DMA_PER_I2S_0_CH_0
 0

	)

196 
	#LPC32XX_DMA_PER_I2S_0_CH_1
 13

	)

197 
	#LPC32XX_DMA_PER_I2S_1_CH_0
 2

	)

198 
	#LPC32XX_DMA_PER_I2S_1_CH_1
 10

	)

199 
	#LPC32XX_DMA_PER_NAND_0
 1

	)

200 
	#LPC32XX_DMA_PER_NAND_1
 12

	)

201 
	#LPC32XX_DMA_PER_SD_MMC
 4

	)

202 
	#LPC32XX_DMA_PER_SSP_0_RX
 14

	)

203 
	#LPC32XX_DMA_PER_SSP_0_TX
 15

	)

204 
	#LPC32XX_DMA_PER_SSP_1_RX
 3

	)

205 
	#LPC32XX_DMA_PER_SSP_1_TX
 11

	)

206 
	#LPC32XX_DMA_PER_UART_1_RX
 6

	)

207 
	#LPC32XX_DMA_PER_UART_1_TX
 5

	)

208 
	#LPC32XX_DMA_PER_UART_2_RX
 8

	)

209 
	#LPC32XX_DMA_PER_UART_2_TX
 7

	)

210 
	#LPC32XX_DMA_PER_UART_7_RX
 10

	)

211 
	#LPC32XX_DMA_PER_UART_7_TX
 9

	)

217 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/include/lpc-emc.h

23 #i‚de‡
LIBBSP_ARM_SHARED_LPC_EMC_H


24 
	#LIBBSP_ARM_SHARED_LPC_EMC_H


	)

26 
	~<b•/utûôy.h
>

28 #ifde‡
__˝lu•lus


49 
	#EMC_CTRL_E
 
	`BSP_BIT32
(0)

	)

50 
	#EMC_CTRL_M
 
	`BSP_BIT32
(0)

	)

51 
	#EMC_CTRL_L
 
	`BSP_BIT32
(2)

	)

61 
	#EMC_DYN_CTRL_CE
 
	`BSP_BIT32
(0)

	)

62 
	#EMC_DYN_CTRL_CS
 
	`BSP_BIT32
(1)

	)

63 
	#EMC_DYN_CTRL_SR
 
	`BSP_BIT32
(2)

	)

64 
	#EMC_DYN_CTRL_SRMCC
 
	`BSP_BIT32
(3)

	)

65 
	#EMC_DYN_CTRL_IMCC
 
	`BSP_BIT32
(4)

	)

66 
	#EMC_DYN_CTRL_MCC
 
	`BSP_BIT32
(5)

	)

67 
	#EMC_DYN_CTRL_I_MASK
 
	`BSP_MSK32
(7, 8)

	)

68 
	#EMC_DYN_CTRL_I_NORMAL
 
	`BSP_FLD32
(0x0, 7, 8)

	)

69 
	#EMC_DYN_CTRL_I_MODE
 
	`BSP_FLD32
(0x1, 7, 8)

	)

70 
	#EMC_DYN_CTRL_I_PALL
 
	`BSP_FLD32
(0x2, 7, 8)

	)

71 
	#EMC_DYN_CTRL_I_NOP
 
	`BSP_FLD32
(0x3, 7, 8)

	)

72 
	#EMC_DYN_CTRL_DP
 
	`BSP_BIT32
(13)

	)

82 
	#EMC_DYN_READ_CONFIG_SDR_STRAT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 1)

	)

83 
	#EMC_DYN_READ_CONFIG_SDR_POL_POS
 
	`BSP_BIT32
(4)

	)

84 
	#EMC_DYN_READ_CONFIG_DDR_STRAT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 9)

	)

85 
	#EMC_DYN_READ_CONFIG_DDR_POL_POS
 
	`BSP_BIT32
(12)

	)

95 
	#EMC_DYN_CFG_MD_LPC24XX
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 3, 4)

	)

96 
	#EMC_DYN_CFG_MD_LPC32XX
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 2)

	)

97 
	#EMC_DYN_CFG_AM
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 7, 14)

	)

98 
	#EMC_DYN_CFG_B
 
	`BSP_BIT32
(19)

	)

99 
	#EMC_DYN_CFG_P
 
	`BSP_BIT32
(20)

	)

109 
	#EMC_DYN_RASCAS_RAS
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

110 
	#EMC_DYN_RASCAS_CAS
(
vÆ
, 
hÆf
Ë
	`BSP_FLD32
(((vÆË<< 1Ë| (hÆf), 7, 10)

	)

114 
	#EMC_DYN_CHIP_COUNT
 4

	)

116 
	#EMC_STATIC_CHIP_COUNT
 4

	)

119 
uöt32_t
 
c⁄fig
;

120 
uöt32_t
 
øsˇs
;

121 
uöt32_t
 
ª£rved_0
 [6];

122 } 
	tÕc_emc_dy«mic
;

125 
uöt32_t
 
c⁄fig
;

126 
uöt32_t
 
waôwí
;

127 
uöt32_t
 
waô€n
;

128 
uöt32_t
 
waôrd
;

129 
uöt32_t
 
waô∑ge
;

130 
uöt32_t
 
waôwr
;

131 
uöt32_t
 
waôtu∫
;

132 
uöt32_t
 
ª£rved_0
 [1];

133 } 
	tÕc_emc_°©ic
;

136 
uöt32_t
 
c⁄åﬁ
;

137 
uöt32_t
 
°©us
;

138 
uöt32_t
 
c⁄fig
;

139 
uöt32_t
 
ª£rved_0
 [5];

140 
uöt32_t
 
dy«micc⁄åﬁ
;

141 
uöt32_t
 
dy«mi¸e‰esh
;

142 
uöt32_t
 
dy«mi¸ódc⁄fig
;

143 
uöt32_t
 
ª£rved_1
;

144 
uöt32_t
 
dy«mi˘Ω
;

145 
uöt32_t
 
dy«mi˘øs
;

146 
uöt32_t
 
dy«mi˘§ex
;

147 
uöt32_t
 
dy«mi˘≠r
;

148 
uöt32_t
 
dy«mi˘dÆ
;

149 
uöt32_t
 
dy«mi˘wr
;

150 
uöt32_t
 
dy«mi˘rc
;

151 
uöt32_t
 
dy«mi˘rfc
;

152 
uöt32_t
 
dy«mi˘x§
;

153 
uöt32_t
 
dy«mi˘ºd
;

154 
uöt32_t
 
dy«mi˘mrd
;

155 
uöt32_t
 
dy«mi˘cdÃ
;

156 
uöt32_t
 
ª£rved_3
 [8];

157 
uöt32_t
 
°©i˚xãndedwaô
;

158 
uöt32_t
 
ª£rved_4
 [31];

159 
Õc_emc_dy«mic
 
dy«mic
 [
EMC_DYN_CHIP_COUNT
];

160 
uöt32_t
 
ª£rved_5
 [32];

161 
Õc_emc_°©ic
 
emc°©ic
 [
EMC_STATIC_CHIP_COUNT
];

162 } 
	tÕc_emc
;

166 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/include/lpc-i2s.h

23 #i‚de‡
LIBBSP_ARM_SHARED_LPC_I2S_H


24 
	#LIBBSP_ARM_SHARED_LPC_I2S_H


	)

26 
	~<b•/utûôy.h
>

28 #ifde‡
__˝lu•lus


47 
uöt32_t
 
dao
;

48 
uöt32_t
 
dai
;

49 
uöt32_t
 
txfifo
;

50 
uöt32_t
 
rxfifo
;

51 
uöt32_t
 
°©e
;

52 
uöt32_t
 
dma
 [2];

53 
uöt32_t
 
úq
;

54 
uöt32_t
 
txøã
;

55 
uöt32_t
 
rxøã
;

56 } 
	tÕc_i2s
;

64 
	#I2S_DAIO_WORDWIDTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 1)

	)

65 
	#I2S_DAIO_MONO
 
	`BSP_BIT32
(2)

	)

66 
	#I2S_DAIO_STOP
 
	`BSP_BIT32
(3)

	)

67 
	#I2S_DAIO_RESET
 
	`BSP_BIT32
(4)

	)

68 
	#I2S_DAIO_WS_SEL
 
	`BSP_BIT32
(5)

	)

69 
	#I2S_DAIO_WS_HALFPERIOD
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 14)

	)

70 
	#I2S_DAIO_MUTE
 
	`BSP_BIT32
(15)

	)

80 
	#I2S_STATE_IRQ
 
	`BSP_BIT32
(0)

	)

81 
	#I2S_STATE_DMAREQ_0
 
	`BSP_BIT32
(1)

	)

82 
	#I2S_STATE_DMAREQ_1
 
	`BSP_BIT32
(2)

	)

83 
	#I2S_STATE_RX_LEVEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

84 
	#I2S_STATE_TX_LEVEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 19)

	)

94 
	#I2S_DMA_RX_ENABLE
 
	`BSP_BIT32
(0)

	)

95 
	#I2S_DMA_TX_ENABLE
 
	`BSP_BIT32
(1)

	)

96 
	#I2S_DMA_RX_DEPTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

97 
	#I2S_DMA_TX_DEPTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 19)

	)

107 
	#I2S_IRQ_RX
 
	`BSP_BIT32
(0)

	)

108 
	#I2S_IRQ_TX
 
	`BSP_BIT32
(1)

	)

109 
	#I2S_IRQ_RX_DEPTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

110 
	#I2S_IRQ_TX_DEPTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 19)

	)

120 
	#LPC24XX_I2S_RATE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

121 
	#LPC32XX_I2S_RATE_X_DIVIDER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

122 
	#LPC32XX_I2S_RATE_Y_DIVIDER
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

128 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/include/lpc-lcd.h

23 #i‚de‡
LIBBSP_ARM_SHARED_LPC_LCD_H


24 
	#LIBBSP_ARM_SHARED_LPC_LCD_H


	)

26 
	~<b•/utûôy.h
>

28 #ifde‡
__˝lu•lus


44 
uöt8_t
 
img
 [1024];

45 
uöt32_t
 
˘æ
;

46 
uöt32_t
 
cfg
;

47 
uöt32_t
 
∑l0
;

48 
uöt32_t
 
∑l1
;

49 
uöt32_t
 
xy
;

50 
uöt32_t
 
˛ù
;

51 
uöt32_t
 
ötmsk
;

52 
uöt32_t
 
öt˛r
;

53 
uöt32_t
 
öåaw
;

54 
uöt32_t
 
öt°©
;

55 } 
	tÕc_curs‹
;

58 
uöt32_t
 
timh
;

59 
uöt32_t
 
timv
;

60 
uöt32_t
 
pﬁ
;

61 
uöt32_t
 
À
;

62 
uöt32_t
 
upba£
;

63 
uöt32_t
 
Õba£
;

64 
uöt32_t
 
˘æ
;

65 
uöt32_t
 
ötmsk
;

66 
uöt32_t
 
öåaw
;

67 
uöt32_t
 
öt°©
;

68 
uöt32_t
 
öt˛r
;

69 
uöt32_t
 
upcuº
;

70 
uöt32_t
 
Õcuº
;

71 
uöt8_t
 
ª£rved_0
 [0x200 - 0x034];

72 
uöt16_t
 
∑l
 [256];

73 
uöt8_t
 
ª£rved_1
 [0x800 - 0x400];

74 
Õc_curs‹
 
¸§
;

75 } 
	tÕc_lcd
;

83 
	#LCD_CFG_CLKDIV
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 4)

	)

84 
	#LCD_CFG_HCLK_ENABLE
 
	`BSP_BIT32
(5)

	)

85 
	#LCD_CFG_MODE_SELECT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 7)

	)

86 
	#LCD_CFG_DISPLAY_TYPE
 
	`BSP_BIT32
(8)

	)

96 
	#LCD_TIMH_PPL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 2, 7)

	)

97 
	#LCD_TIMH_PPL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 2, 7)

	)

98 
	#LCD_TIMH_HSW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

99 
	#LCD_TIMH_HSW_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

100 
	#LCD_TIMH_HFP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

101 
	#LCD_TIMH_HFP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

102 
	#LCD_TIMH_HBP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

103 
	#LCD_TIMH_HBP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

113 
	#LCD_TIMV_LPP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

114 
	#LCD_TIMV_LPP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

115 
	#LCD_TIMV_VSW
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 10, 15)

	)

116 
	#LCD_TIMV_VSW_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 15)

	)

117 
	#LCD_TIMV_VFP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 23)

	)

118 
	#LCD_TIMV_VFP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 23)

	)

119 
	#LCD_TIMV_VBP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 31)

	)

120 
	#LCD_TIMV_VBP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 31)

	)

130 
	#LCD_POL_PCD_LO
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 4)

	)

131 
	#LCD_POL_PCD_LO_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

132 
	#LCD_POL_CLKSEL
 
	`BSP_BIT32
(5)

	)

133 
	#LCD_POL_ACB
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 10)

	)

134 
	#LCD_POL_ACB_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 10)

	)

135 
	#LCD_POL_IVS
 
	`BSP_BIT32
(11)

	)

136 
	#LCD_POL_IHS
 
	`BSP_BIT32
(12)

	)

137 
	#LCD_POL_IPC
 
	`BSP_BIT32
(13)

	)

138 
	#LCD_POL_IOE
 
	`BSP_BIT32
(14)

	)

139 
	#LCD_POL_CPL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 25)

	)

140 
	#LCD_POL_CPL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 25)

	)

141 
	#LCD_POL_BCD
 
	`BSP_BIT32
(26)

	)

142 
	#LCD_POL_PCD_HI
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 27, 31)

	)

143 
	#LCD_POL_PCD_HI_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 27, 31)

	)

153 
	#LCD_LE_LED
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 6)

	)

154 
	#LCD_LE_LEE
 
	`BSP_BIT32
(16)

	)

164 
	#LCD_CTRL_LCDEN
 
	`BSP_BIT32
(0)

	)

165 
	#LCD_CTRL_LCDBPP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 3)

	)

166 
	#LCD_CTRL_LCDBPP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 3)

	)

167 
	#LCD_CTRL_LCDBW
 
	`BSP_BIT32
(4)

	)

168 
	#LCD_CTRL_LCDTFT
 
	`BSP_BIT32
(5)

	)

169 
	#LCD_CTRL_LCDMONO8
 
	`BSP_BIT32
(6)

	)

170 
	#LCD_CTRL_LCDDUAL
 
	`BSP_BIT32
(7)

	)

171 
	#LCD_CTRL_BGR
 
	`BSP_BIT32
(8)

	)

172 
	#LCD_CTRL_BEBO
 
	`BSP_BIT32
(9)

	)

173 
	#LCD_CTRL_BEPO
 
	`BSP_BIT32
(10)

	)

174 
	#LCD_CTRL_LCDPWR
 
	`BSP_BIT32
(11)

	)

175 
	#LCD_CTRL_LCDVCOMP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 13)

	)

176 
	#LCD_CTRL_LCDVCOMP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 13)

	)

177 
	#LCD_CTRL_WATERMARK
 
	`BSP_BIT32
(16)

	)

187 
	#LCD_INT_FUF
 
	`BSP_BIT32
(1)

	)

188 
	#LCD_INT_LNBU
 
	`BSP_BIT32
(2)

	)

189 
	#LCD_INT_VCOMP
 
	`BSP_BIT32
(3)

	)

190 
	#LCD_INT_BER
 
	`BSP_BIT32
(4)

	)

200 
	#LCD_PAL_R
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 0, 4)

	)

201 
	#LCD_PAL_G
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 5, 9)

	)

202 
	#LCD_PAL_B
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 10, 14)

	)

203 
	#LCD_PAL_I
 
	`BSP_BIT16
(15)

	)

209 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/include/lpc-timer.h

22 #i‚de‡
LIBBSP_ARM_SHARED_LPC_TIMER_H


23 
	#LIBBSP_ARM_SHARED_LPC_TIMER_H


	)

25 
	~<°döt.h
>

27 #ifde‡
__˝lu•lus


48 
	#LPC_TIMER_IR_MR0
 0x1U

	)

49 
	#LPC_TIMER_IR_MR1
 0x2U

	)

50 
	#LPC_TIMER_IR_MR2
 0x4U

	)

51 
	#LPC_TIMER_IR_MR3
 0x8U

	)

52 
	#LPC_TIMER_IR_CR0
 0x10U

	)

53 
	#LPC_TIMER_IR_CR1
 0x20U

	)

54 
	#LPC_TIMER_IR_CR2
 0x40U

	)

55 
	#LPC_TIMER_IR_CR3
 0x80U

	)

56 
	#LPC_TIMER_IR_ALL
 0xffU

	)

66 
	#LPC_TIMER_TCR_EN
 0x1U

	)

67 
	#LPC_TIMER_TCR_RST
 0x2U

	)

77 
	#LPC_TIMER_MCR_MR0_INTR
 0x1U

	)

78 
	#LPC_TIMER_MCR_MR0_RST
 0x2U

	)

79 
	#LPC_TIMER_MCR_MR0_STOP
 0x4U

	)

80 
	#LPC_TIMER_MCR_MR1_INTR
 0x8U

	)

81 
	#LPC_TIMER_MCR_MR1_RST
 0x10U

	)

82 
	#LPC_TIMER_MCR_MR1_STOP
 0x20U

	)

83 
	#LPC_TIMER_MCR_MR2_INTR
 0x40U

	)

84 
	#LPC_TIMER_MCR_MR2_RST
 0x80U

	)

85 
	#LPC_TIMER_MCR_MR2_STOP
 0x100U

	)

86 
	#LPC_TIMER_MCR_MR3_INTR
 0x200U

	)

87 
	#LPC_TIMER_MCR_MR3_RST
 0x400U

	)

88 
	#LPC_TIMER_MCR_MR3_STOP
 0x800U

	)

98 
	#LPC_TIMER_CCR_CAP0_RE
 0x1U

	)

99 
	#LPC_TIMER_CCR_CAP0_FE
 0x2U

	)

100 
	#LPC_TIMER_CCR_CAP0_INTR
 0x4U

	)

101 
	#LPC_TIMER_CCR_CAP1_RE
 0x8U

	)

102 
	#LPC_TIMER_CCR_CAP1_FE
 0x10U

	)

103 
	#LPC_TIMER_CCR_CAP1_INTR
 0x20U

	)

104 
	#LPC_TIMER_CCR_CAP2_RE
 0x40U

	)

105 
	#LPC_TIMER_CCR_CAP2_FE
 0x80U

	)

106 
	#LPC_TIMER_CCR_CAP2_INTR
 0x100U

	)

107 
	#LPC_TIMER_CCR_CAP3_RE
 0x200U

	)

108 
	#LPC_TIMER_CCR_CAP3_FE
 0x400U

	)

109 
	#LPC_TIMER_CCR_CAP3_INTR
 0x800U

	)

119 
	#LPC_TIMER_EMR_EM0_RE
 0x1U

	)

120 
	#LPC_TIMER_EMR_EM1_FE
 0x2U

	)

121 
	#LPC_TIMER_EMR_EM2_INTR
 0x4U

	)

122 
	#LPC_TIMER_EMR_EM3_RE
 0x8U

	)

123 
	#LPC_TIMER_EMR_EMC0_FE
 0x10U

	)

124 
	#LPC_TIMER_EMR_EMC1_INTR
 0x20U

	)

125 
	#LPC_TIMER_EMR_EMC2_RE
 0x40U

	)

126 
	#LPC_TIMER_EMR_EMC3_FE
 0x80U

	)

134 
uöt32_t
 
ú
;

135 
uöt32_t
 
t¸
;

136 
uöt32_t
 
tc
;

137 
uöt32_t
 
¥
;

138 
uöt32_t
 
pc
;

139 
uöt32_t
 
m¸
;

140 
uöt32_t
 
mr0
;

141 
uöt32_t
 
mr1
;

142 
uöt32_t
 
mr2
;

143 
uöt32_t
 
mr3
;

144 
uöt32_t
 
c¸
;

145 
uöt32_t
 
¸0
;

146 
uöt32_t
 
¸1
;

147 
uöt32_t
 
¸2
;

148 
uöt32_t
 
¸3
;

149 
uöt32_t
 
emr
;

150 
uöt32_t
 
˘¸
;

151 } 
	tÕc_timî
;

155 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/shared/lpc/network/lpc-ethernet.c

23 
	#__INSIDE_RTEMS_BSD_TCPIP_STACK__
 1

	)

24 
	#__BSD_VISIBLE
 1

	)

26 
	~<î∫o.h
>

27 
	~<öây≥s.h
>

28 
	~<°dlib.h
>

29 
	~<°dio.h
>

30 
	~<°rög.h
>

31 
	~<as£π.h
>

33 
	~<πems.h
>

34 
	~<πems/πems_bsd√t.h
>

35 
	~<πems/πems_mii_io˘l.h
>

37 
	~<sys/∑øm.h
>

38 
	~<sys/sockë.h
>

39 
	~<sys/sockio.h
>

40 
	~<sys/mbuf.h
>

42 
	~<√t/if.h
>

43 
	~<√t/if_¨p.h
>

44 
	~<√töë/ö.h
>

45 
	~<√töë/if_ëhî.h
>

46 
	~<√töë/ö_sy°m.h
>

47 
	~<√töë/ù.h
>

49 
	~<b•.h
>

50 
	~<b•/úq.h
>

51 
	~<b•/Õc-ëhî√t-c⁄fig.h
>

52 
	~<b•/utûôy.h
>

54 #i‡
MCLBYTES
 > (2 * 1024)

58 #ifde‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


59 
	#LPC_ETH_CONFIG_TX_BUF_SIZE
 (
mbuf
 *)

	)

61 
	#LPC_ETH_CONFIG_TX_BUF_SIZE
 1518U

	)

64 
	#DEFAULT_PHY
 0

	)

65 
	#WATCHDOG_TIMEOUT
 5

	)

68 
uöt32_t
 
	m°¨t
;

69 
uöt32_t
 
	mc⁄åﬁ
;

70 } 
	tÕc_ëh_å™s„r_des¸ùt‹
;

73 
uöt32_t
 
	möfo
;

74 
uöt32_t
 
	mhash_¸c
;

75 } 
	tÕc_ëh_ª˚ive_°©us
;

78 
uöt32_t
 
	mmac1
;

79 
uöt32_t
 
	mmac2
;

80 
uöt32_t
 
	mùgt
;

81 
uöt32_t
 
	mùgr
;

82 
uöt32_t
 
	m˛π
;

83 
uöt32_t
 
	mmaxf
;

84 
uöt32_t
 
	msuµ
;

85 
uöt32_t
 
	mã°
;

86 
uöt32_t
 
	mmcfg
;

87 
uöt32_t
 
	mmcmd
;

88 
uöt32_t
 
	mmadr
;

89 
uöt32_t
 
	mmwtd
;

90 
uöt32_t
 
	mmrdd
;

91 
uöt32_t
 
	mmöd
;

92 
uöt32_t
 
	mª£rved_0
 [2];

93 
uöt32_t
 
	mß0
;

94 
uöt32_t
 
	mß1
;

95 
uöt32_t
 
	mß2
;

96 
uöt32_t
 
	mª£rved_1
 [45];

97 
uöt32_t
 
	mcomm™d
;

98 
uöt32_t
 
	m°©us
;

99 
uöt32_t
 
	mrxdes¸ùt‹
;

100 
uöt32_t
 
	mrx°©us
;

101 
uöt32_t
 
	mrxdes¸ùt‹num
;

102 
uöt32_t
 
	mrx¥odu˚ödex
;

103 
uöt32_t
 
	mrxc⁄sumeödex
;

104 
uöt32_t
 
	mtxdes¸ùt‹
;

105 
uöt32_t
 
	mtx°©us
;

106 
uöt32_t
 
	mtxdes¸ùt‹num
;

107 
uöt32_t
 
	mtx¥odu˚ödex
;

108 
uöt32_t
 
	mtxc⁄sumeödex
;

109 
uöt32_t
 
	mª£rved_2
 [10];

110 
uöt32_t
 
	mtsv0
;

111 
uöt32_t
 
	mtsv1
;

112 
uöt32_t
 
	mrsv
;

113 
uöt32_t
 
	mª£rved_3
 [3];

114 
uöt32_t
 
	mÊowc⁄åﬁ˙t
;

115 
uöt32_t
 
	mÊowc⁄åﬁ°s
;

116 
uöt32_t
 
	mª£rved_4
 [34];

117 
uöt32_t
 
	mrxfûãr˘æ
;

118 
uöt32_t
 
	mrxfûãrwﬁ°s
;

119 
uöt32_t
 
	mrxfûãrwﬁ˛r
;

120 
uöt32_t
 
	mª£rved_5
 [1];

121 
uöt32_t
 
	mhashfûãæ
;

122 
uöt32_t
 
	mhashfûãrh
;

123 
uöt32_t
 
	mª£rved_6
 [882];

124 
uöt32_t
 
	möt°©us
;

125 
uöt32_t
 
	möã«bÀ
;

126 
uöt32_t
 
	möt˛ór
;

127 
uöt32_t
 
	möt£t
;

128 
uöt32_t
 
	mª£rved_7
 [1];

129 
uöt32_t
 
	mpowîdown
;

130 } 
	tÕc_ëh_c⁄åﬁÀr
;

132 vﬁ©ûê
Õc_ëh_c⁄åﬁÀr
 *c⁄° 
	gÕc_ëh
 =

133 (vﬁ©ûê
Õc_ëh_c⁄åﬁÀr
 *Ë
LPC_ETH_CONFIG_REG_BASE
;

137 
	#ETH_RX_CTRL_SIZE_MASK
 0x000007ffU

	)

138 
	#ETH_RX_CTRL_INTERRUPT
 0x80000000U

	)

142 
	#ETH_RX_STAT_RXSIZE_MASK
 0x000007ffU

	)

143 
	#ETH_RX_STAT_BYTES
 0x00000100U

	)

144 
	#ETH_RX_STAT_CONTROL_FRAME
 0x00040000U

	)

145 
	#ETH_RX_STAT_VLAN
 0x00080000U

	)

146 
	#ETH_RX_STAT_FAIL_FILTER
 0x00100000U

	)

147 
	#ETH_RX_STAT_MULTICAST
 0x00200000U

	)

148 
	#ETH_RX_STAT_BROADCAST
 0x00400000U

	)

149 
	#ETH_RX_STAT_CRC_ERROR
 0x00800000U

	)

150 
	#ETH_RX_STAT_SYMBOL_ERROR
 0x01000000U

	)

151 
	#ETH_RX_STAT_LENGTH_ERROR
 0x02000000U

	)

152 
	#ETH_RX_STAT_RANGE_ERROR
 0x04000000U

	)

153 
	#ETH_RX_STAT_ALIGNMENT_ERROR
 0x08000000U

	)

154 
	#ETH_RX_STAT_OVERRUN
 0x10000000U

	)

155 
	#ETH_RX_STAT_NO_DESCRIPTOR
 0x20000000U

	)

156 
	#ETH_RX_STAT_LAST_FLAG
 0x40000000U

	)

157 
	#ETH_RX_STAT_ERROR
 0x80000000U

	)

161 
	#ETH_TX_CTRL_SIZE_MASK
 0x7ffU

	)

162 
	#ETH_TX_CTRL_SIZE_SHIFT
 0

	)

163 
	#ETH_TX_CTRL_OVERRIDE
 0x04000000U

	)

164 
	#ETH_TX_CTRL_HUGE
 0x08000000U

	)

165 
	#ETH_TX_CTRL_PAD
 0x10000000U

	)

166 
	#ETH_TX_CTRL_CRC
 0x20000000U

	)

167 
	#ETH_TX_CTRL_LAST
 0x40000000U

	)

168 
	#ETH_TX_CTRL_INTERRUPT
 0x80000000U

	)

172 
	#ETH_TX_STAT_COLLISION_COUNT_MASK
 0x01e00000U

	)

173 
	#ETH_TX_STAT_DEFER
 0x02000000U

	)

174 
	#ETH_TX_STAT_EXCESSIVE_DEFER
 0x04000000U

	)

175 
	#ETH_TX_STAT_EXCESSIVE_COLLISION
 0x08000000U

	)

176 
	#ETH_TX_STAT_LATE_COLLISION
 0x10000000U

	)

177 
	#ETH_TX_STAT_UNDERRUN
 0x20000000U

	)

178 
	#ETH_TX_STAT_NO_DESCRIPTOR
 0x40000000U

	)

179 
	#ETH_TX_STAT_ERROR
 0x80000000U

	)

183 
	#ETH_INT_RX_OVERRUN
 0x00000001U

	)

184 
	#ETH_INT_RX_ERROR
 0x00000002U

	)

185 
	#ETH_INT_RX_FINISHED
 0x00000004U

	)

186 
	#ETH_INT_RX_DONE
 0x00000008U

	)

187 
	#ETH_INT_TX_UNDERRUN
 0x00000010U

	)

188 
	#ETH_INT_TX_ERROR
 0x00000020U

	)

189 
	#ETH_INT_TX_FINISHED
 0x00000040U

	)

190 
	#ETH_INT_TX_DONE
 0x00000080U

	)

191 
	#ETH_INT_SOFT
 0x00001000U

	)

192 
	#ETH_INT_WAKEUP
 0x00002000U

	)

196 
	#ETH_RX_FIL_CTRL_ACCEPT_UNICAST
 0x00000001U

	)

197 
	#ETH_RX_FIL_CTRL_ACCEPT_BROADCAST
 0x00000002U

	)

198 
	#ETH_RX_FIL_CTRL_ACCEPT_MULTICAST
 0x00000004U

	)

199 
	#ETH_RX_FIL_CTRL_ACCEPT_UNICAST_HASH
 0x00000008U

	)

200 
	#ETH_RX_FIL_CTRL_ACCEPT_MULTICAST_HASH
 0x00000010U

	)

201 
	#ETH_RX_FIL_CTRL_ACCEPT_PERFECT
 0x00000020U

	)

202 
	#ETH_RX_FIL_CTRL_MAGIC_PACKET_WOL
 0x00001000U

	)

203 
	#ETH_RX_FIL_CTRL_RX_FILTER_WOL
 0x00002000U

	)

207 
	#ETH_CMD_RX_ENABLE
 0x00000001U

	)

208 
	#ETH_CMD_TX_ENABLE
 0x00000002U

	)

209 
	#ETH_CMD_REG_RESET
 0x00000008U

	)

210 
	#ETH_CMD_TX_RESET
 0x00000010U

	)

211 
	#ETH_CMD_RX_RESET
 0x00000020U

	)

212 
	#ETH_CMD_PASS_RUNT_FRAME
 0x00000040U

	)

213 
	#ETH_CMD_PASS_RX_FILTER
 0X00000080U

	)

214 
	#ETH_CMD_TX_FLOW_CONTROL
 0x00000100U

	)

215 
	#ETH_CMD_RMII
 0x00000200U

	)

216 
	#ETH_CMD_FULL_DUPLEX
 0x00000400U

	)

220 
	#ETH_STAT_RX_ACTIVE
 0x00000001U

	)

221 
	#ETH_STAT_TX_ACTIVE
 0x00000002U

	)

225 
	#ETH_MAC2_FULL_DUPLEX
 
	`BSP_BIT32
(8)

	)

229 
	#ETH_SUPP_SPEED
 
	`BSP_BIT32
(8)

	)

233 
	#ETH_MCFG_CLOCK_SELECT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 2, 4)

	)

235 
	#ETH_MCFG_RESETMIIMGMT
 
	`BSP_BIT32
(15)

	)

239 
	#ETH_MCMD_READ
 
	`BSP_BIT32
(0)

	)

240 
	#ETH_MCMD_SCAN
 
	`BSP_BIT32
(1)

	)

244 
	#ETH_MADR_REG
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 4)

	)

245 
	#ETH_MADR_PHY
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 12)

	)

249 
	#ETH_MIND_BUSY
 
	`BSP_BIT32
(0)

	)

250 
	#ETH_MIND_SCANNING
 
	`BSP_BIT32
(1)

	)

251 
	#ETH_MIND_NOT_VALID
 
	`BSP_BIT32
(2)

	)

252 
	#ETH_MIND_MII_LINK_FAIL
 
	`BSP_BIT32
(3)

	)

256 
	#LPC_ETH_EVENT_INITIALIZE
 
RTEMS_EVENT_1


	)

258 
	#LPC_ETH_EVENT_TXSTART
 
RTEMS_EVENT_2


	)

260 
	#LPC_ETH_EVENT_INTERRUPT
 
RTEMS_EVENT_3


	)

262 
	#LPC_ETH_EVENT_STOP
 
RTEMS_EVENT_4


	)

266 
	#LPC_ETH_INTERRUPT_RECEIVE
 \

267 (
ETH_INT_RX_ERROR
 | 
ETH_INT_RX_FINISHED
 | 
ETH_INT_RX_DONE
)

	)

269 
	#LPC_ETH_INTERRUPT_TRANSMIT
 \

270 (
ETH_INT_TX_DONE
 | 
ETH_INT_TX_FINISHED
 | 
ETH_INT_TX_ERROR
)

	)

272 
	#LPC_ETH_RX_STAT_ERRORS
 \

273 (
ETH_RX_STAT_CRC_ERROR
 \

274 | 
ETH_RX_STAT_SYMBOL_ERROR
 \

275 | 
ETH_RX_STAT_LENGTH_ERROR
 \

276 | 
ETH_RX_STAT_ALIGNMENT_ERROR
 \

277 | 
ETH_RX_STAT_OVERRUN
 \

278 | 
ETH_RX_STAT_NO_DESCRIPTOR
)

	)

280 
	#LPC_ETH_LAST_FRAGMENT_FLAGS
 \

281 (
ETH_TX_CTRL_OVERRIDE
 \

282 | 
ETH_TX_CTRL_PAD
 \

283 | 
ETH_TX_CTRL_CRC
 \

284 | 
ETH_TX_CTRL_INTERRUPT
 \

285 | 
ETH_TX_CTRL_LAST
)

	)

289 #ifde‡
DEBUG


290 
	#LPC_ETH_PRINTF
(...Ë
	`¥ötf
(
__VA_ARGS__
)

	)

291 
	#LPC_ETH_PRINTK
(...Ë
	`¥ötk
(
__VA_ARGS__
)

	)

293 
	#LPC_ETH_PRINTF
(...)

	)

294 
	#LPC_ETH_PRINTK
(...)

	)

298 
	mLPC_ETH_STATE_NOT_INITIALIZED
 = 0,

299 
	mLPC_ETH_STATE_DOWN
,

300 
	mLPC_ETH_STATE_UP


301 } 
	tÕc_ëh_°©e
;

304 
¨pcom
 
	m¨pcom
;

305 
Õc_ëh_°©e
 
	m°©e
;

306 
πems_mdio_öfo
 
	mmdio
;

307 
uöt32_t
 
	m™Õ¨
;

308 
πems_id
 
	mª˚ive_èsk
;

309 
πems_id
 
	må™smô_èsk
;

310 
	mrx_unô_cou¡
;

311 
	mtx_unô_cou¡
;

312 vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *
	mrx_desc_èbÀ
;

313 vﬁ©ûê
Õc_ëh_ª˚ive_°©us
 *
	mrx_°©us_èbÀ
;

314 
mbuf
 **
	mrx_mbuf_èbÀ
;

315 vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *
	mtx_desc_èbÀ
;

316 vﬁ©ûê
uöt32_t
 *
	mtx_°©us_èbÀ
;

317 *
	mtx_buf_èbÀ
;

318 
	mª˚ived_‰ames
;

319 
	mª˚ive_öãºu±s
;

320 
	må™smôãd_‰ames
;

321 
	må™smô_öãºu±s
;

322 
	mª˚ive_dr›_îr‹s
;

323 
	mª˚ive_ovîrun_îr‹s
;

324 
	mª˚ive_‰agmít_îr‹s
;

325 
	mª˚ive_¸c_îr‹s
;

326 
	mª˚ive_symbﬁ_îr‹s
;

327 
	mª˚ive_Àngth_îr‹s
;

328 
	mª˚ive_Æignmít_îr‹s
;

329 
	mª˚ive_no_des¸ùt‹_îr‹s
;

330 
	mª˚ive_Áèl_îr‹s
;

331 
	må™smô_undîrun_îr‹s
;

332 
	må™smô_œã_cﬁlisi⁄_îr‹s
;

333 
	må™smô_ex˚ssive_cﬁlisi⁄_îr‹s
;

334 
	må™smô_ex˚ssive_de„r_îr‹s
;

335 
	må™smô_no_des¸ùt‹_îr‹s
;

336 
	må™smô_ovîÊow_îr‹s
;

337 
	må™smô_Áèl_îr‹s
;

338 
uöt32_t
 
	mphy_id
;

339 
	mphy
;

340 
πems_ve˘‹_numbî
 
	möãºu±_numbî
;

341 
πems_id
 
	mc⁄åﬁ_èsk
;

342 } 
	tÕc_ëh_drivî_íåy
;

344 
Õc_ëh_drivî_íåy
 
	gÕc_ëh_drivî_d©a
;

346 
	$Õc_ëh_c⁄åﬁ_ªque°_com∂ëe
(c⁄° 
Õc_ëh_drivî_íåy
 *
e
)

348 
πems_°©us_code
 
sc
 = 
	`πems_evít_å™sõ¡_£nd
(
e
->
c⁄åﬁ_èsk
);

349 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

350 
	}
}

352 
	$Õc_ëh_c⁄åﬁ_ªque°
(

353 
Õc_ëh_drivî_íåy
 *
e
,

354 
πems_id
 
èsk
,

355 
πems_evít_£t
 
evít


358 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

359 
uöt32_t
 
√°_cou¡
 = 0;

361 
e
->
c⁄åﬁ_èsk
 = 
	`πems_èsk_£lf
();

363 
sc
 = 
	`πems_bsd√t_evít_£nd
(
èsk
, 
evít
);

364 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

366 
√°_cou¡
 = 
	`πems_bsd√t_£m≠h‹e_ªÀa£_ªcursive
();

367 
sc
 = 
	`πems_evít_å™sõ¡_ª˚ive
(
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
);

368 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

369 
	`πems_bsd√t_£m≠h‹e_obèö_ªcursive
(
√°_cou¡
);

371 
e
->
c⁄åﬁ_èsk
 = 0;

372 
	}
}

374 
ölöe
 
uöt32_t
 
	$Õc_ëh_ö¸emít
(

375 
uöt32_t
 
vÆue
,

376 
uöt32_t
 
cy˛e


379 i‡(
vÆue
 < 
cy˛e
) {

380  ++
vÆue
;

384 
	}
}

386 
	$Õc_ëh_íabÀ_¥omiscous_mode
(
boﬁ
 
íabÀ
)

388 i‡(
íabÀ
) {

389 
Õc_ëh
->
rxfûãr˘æ
 = 
ETH_RX_FIL_CTRL_ACCEPT_UNICAST


390 | 
ETH_RX_FIL_CTRL_ACCEPT_MULTICAST


391 | 
ETH_RX_FIL_CTRL_ACCEPT_BROADCAST
;

393 
Õc_ëh
->
rxfûãr˘æ
 = 
ETH_RX_FIL_CTRL_ACCEPT_PERFECT


394 | 
ETH_RX_FIL_CTRL_ACCEPT_MULTICAST_HASH


395 | 
ETH_RX_FIL_CTRL_ACCEPT_BROADCAST
;

397 
	}
}

399 
	$Õc_ëh_öãºu±_h™dÀr
(*
¨g
)

401 
Õc_ëh_drivî_íåy
 *
e
 = (Õc_ëh_drivî_íåy *Ë
¨g
;

402 
πems_evít_£t
 
ª
 = 0;

403 
πems_evít_£t
 
ã
 = 0;

404 
uöt32_t
 
õ
 = 0;

407 
uöt32_t
 
im
 = 
Õc_ëh
->
öã«bÀ
;

408 
uöt32_t
 
is
 = 
Õc_ëh
->
öt°©us
 & 
im
;

411 i‡((
is
 & 
ETH_INT_RX_OVERRUN
) != 0) {

412 
ª
 = 
LPC_ETH_EVENT_INITIALIZE
;

413 ++
e
->
ª˚ive_Áèl_îr‹s
;

414 } i‡((
is
 & 
LPC_ETH_INTERRUPT_RECEIVE
) != 0) {

415 
ª
 = 
LPC_ETH_EVENT_INTERRUPT
;

416 
õ
 |
LPC_ETH_INTERRUPT_RECEIVE
;

420 i‡(
ª
 != 0) {

421 ++
e
->
ª˚ive_öãºu±s
;

422 (Ë
	`πems_bsd√t_evít_£nd
(
e
->
ª˚ive_èsk
, 
ª
);

426 i‡((
is
 & 
ETH_INT_TX_UNDERRUN
) != 0) {

427 
ã
 = 
LPC_ETH_EVENT_INITIALIZE
;

428 ++
e
->
å™smô_Áèl_îr‹s
;

429 } i‡((
is
 & 
LPC_ETH_INTERRUPT_TRANSMIT
) != 0) {

430 
ã
 = 
LPC_ETH_EVENT_INTERRUPT
;

431 
õ
 |
LPC_ETH_INTERRUPT_TRANSMIT
;

435 i‡(
ã
 != 0) {

436 ++
e
->
å™smô_öãºu±s
;

437 (Ë
	`πems_bsd√t_evít_£nd
(
e
->
å™smô_èsk
, 
ã
);

440 
	`LPC_ETH_PRINTK
("öãºu±:Ñx = 0x%08x,Åx = 0x%08x\n", 
ª
, 
ã
);

443 
Õc_ëh
->
öã«bÀ
 = 
im
 & ~
õ
;

446 
Õc_ëh
->
öt˛ór
 = 
is
;

447 
	}
}

449 
	$Õc_ëh_íabÀ_ª˚ive_öãºu±s
()

451 
πems_öãºu±_Àvñ
 
Àvñ
;

453 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

454 
Õc_ëh
->
öã«bÀ
 |
LPC_ETH_INTERRUPT_RECEIVE
;

455 
	`πems_öãºu±_íabÀ
(
Àvñ
);

456 
	}
}

458 
	$Õc_ëh_dißbÀ_ª˚ive_öãºu±s
()

460 
πems_öãºu±_Àvñ
 
Àvñ
;

462 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

463 
Õc_ëh
->
öã«bÀ
 &~
LPC_ETH_INTERRUPT_RECEIVE
;

464 
	`πems_öãºu±_íabÀ
(
Àvñ
);

465 
	}
}

467 
	$Õc_ëh_íabÀ_å™smô_öãºu±s
()

469 
πems_öãºu±_Àvñ
 
Àvñ
;

471 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

472 
Õc_ëh
->
öã«bÀ
 |
LPC_ETH_INTERRUPT_TRANSMIT
;

473 
	`πems_öãºu±_íabÀ
(
Àvñ
);

474 
	}
}

476 
	$Õc_ëh_dißbÀ_å™smô_öãºu±s
()

478 
πems_öãºu±_Àvñ
 
Àvñ
;

480 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

481 
Õc_ëh
->
öã«bÀ
 &~
LPC_ETH_INTERRUPT_TRANSMIT
;

482 
	`πems_öãºu±_íabÀ
(
Àvñ
);

483 
	}
}

485 
	#LPC_ETH_RX_DATA_OFFSET
 2

	)

487 
mbuf
 *
	$Õc_ëh_√w_mbuf
(
i‚ë
 *
iÂ
, 
boﬁ
 
waô
)

489 
mbuf
 *
m
 = 
NULL
;

490 
mw
 = 
waô
 ? 
M_WAIT
 : 
M_DONTWAIT
;

492 
	`MGETHDR
(
m
, 
mw
, 
MT_DATA
);

493 i‡(
m
 !
NULL
) {

494 
	`MCLGET
(
m
, 
mw
);

495 i‡((
m
->
m_Êags
 & 
M_EXT
) != 0) {

497 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

500 
m
->
m_d©a
 = 
	`mtod
(m, *Ë+ 
LPC_ETH_RX_DATA_OFFSET
;

502  
m
;

504 
	`m_‰ì
(
m
);

508  
NULL
;

509 
	}
}

511 
boﬁ
 
	$Õc_ëh_add_√w_mbuf
(

512 
i‚ë
 *
iÂ
,

513 vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *
desc
,

514 
mbuf
 **
mbufs
,

515 
uöt32_t
 
i
,

516 
boﬁ
 
waô


520 
mbuf
 *
m
 = 
	`Õc_ëh_√w_mbuf
(
iÂ
, 
waô
);

523 i‡(
m
 !
NULL
) {

525 
	`πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
(

526 
	`mtod
(
m
, *),

527 
MCLBYTES
 - 
LPC_ETH_RX_DATA_OFFSET


531 
desc
 [
i
].
°¨t
 = 
	`mtod
(
m
, 
uöt32_t
);

532 
desc
 [
i
].
c⁄åﬁ
 = (
MCLBYTES
 - 
LPC_ETH_RX_DATA_OFFSET
 - 1)

533 | 
ETH_RX_CTRL_INTERRUPT
;

536 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

537 (*Ë&
desc
 [
i
],

538 (
desc
 [0])

542 
mbufs
 [
i
] = 
m
;

544  
åue
;

546  
Ál£
;

548 
	}
}

550 
	$Õc_ëh_ª˚ive_èsk
(*
¨g
)

552 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

553 
πems_evít_£t
 
evíts
 = 0;

554 
Õc_ëh_drivî_íåy
 *c⁄° 
e
 = (Õc_ëh_drivî_íåy *Ë
¨g
;

555 
i‚ë
 *c⁄° 
iÂ
 = &
e
->
¨pcom
.
ac_if
;

556 vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *c⁄° 
desc
 = 
e
->
rx_desc_èbÀ
;

557 vﬁ©ûê
Õc_ëh_ª˚ive_°©us
 *c⁄° 
°©us
 = 
e
->
rx_°©us_èbÀ
;

558 
mbuf
 **c⁄° 
mbufs
 = 
e
->
rx_mbuf_èbÀ
;

559 
uöt32_t
 c⁄° 
ödex_max
 = 
e
->
rx_unô_cou¡
 - 1;

560 
uöt32_t
 
¥odu˚_ödex
 = 0;

561 
uöt32_t
 
c⁄sume_ödex
 = 0;

563 
	`LPC_ETH_PRINTF
("%s\n", 
__func__
);

566 
åue
) {

568 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
(

569 
LPC_ETH_EVENT_INITIALIZE


570 | 
LPC_ETH_EVENT_STOP


571 | 
LPC_ETH_EVENT_INTERRUPT
,

572 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

573 
RTEMS_NO_TIMEOUT
,

574 &
evíts


576 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

578 
	`LPC_ETH_PRINTF
("rx: wakêup: 0x%08" 
PRIx32
 "\n", 
evíts
);

581 i‡((
evíts
 & 
LPC_ETH_EVENT_STOP
) != 0) {

582 
	`Õc_ëh_c⁄åﬁ_ªque°_com∂ëe
(
e
);

589 i‡((
evíts
 & 
LPC_ETH_EVENT_INITIALIZE
) != 0) {

591 
	`Õc_ëh_dißbÀ_ª˚ive_öãºu±s
();

594 
Õc_ëh
->
comm™d
 &~
ETH_CMD_RX_ENABLE
;

597 (
Õc_ëh
->
°©us
 & 
ETH_STAT_RX_ACTIVE
) != 0) {

602 
Õc_ëh
->
comm™d
 |
ETH_CMD_RX_RESET
;

605 
Õc_ëh
->
öt˛ór
 = 
LPC_ETH_INTERRUPT_RECEIVE
;

608 
c⁄sume_ödex
 = 0;

609 
¥odu˚_ödex
 = 0;Örodu˚_ödex <
ödex_max
; ++produce_index) {

610 i‡(
mbufs
 [
¥odu˚_ödex
] !
NULL
) {

611 
mbufs
 [
c⁄sume_ödex
] = mbuf†[
¥odu˚_ödex
];

612 ++
c⁄sume_ödex
;

618 
¥odu˚_ödex
 = 
c⁄sume_ödex
;

619 
¥odu˚_ödex
 <
ödex_max
;

620 ++
¥odu˚_ödex


622 
	`Õc_ëh_add_√w_mbuf
(
iÂ
, 
desc
, 
mbufs
, 
¥odu˚_ödex
, 
åue
);

626 
Õc_ëh
->
rxdes¸ùt‹num
 = 
ödex_max
;

627 
Õc_ëh
->
rxdes¸ùt‹
 = (
uöt32_t
Ë
desc
;

628 
Õc_ëh
->
rx°©us
 = (
uöt32_t
Ë
°©us
;

631 
¥odu˚_ödex
 = 
Õc_ëh
->
rx¥odu˚ödex
;

632 
c⁄sume_ödex
 = 
Õc_ëh
->
rxc⁄sumeödex
;

635 
Õc_ëh
->
comm™d
 |
ETH_CMD_RX_ENABLE
;

638 
	`Õc_ëh_íabÀ_ª˚ive_öãºu±s
();

640 
	`Õc_ëh_c⁄åﬁ_ªque°_com∂ëe
(
e
);

646 
åue
) {

648 
Õc_ëh
->
öt˛ór
 = 
LPC_ETH_INTERRUPT_RECEIVE
;

651 
¥odu˚_ödex
 = 
Õc_ëh
->
rx¥odu˚ödex
;

653 i‡(
c⁄sume_ödex
 !
¥odu˚_ödex
) {

654 
uöt32_t
 
°©
 = 0;

657 
	`πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
(

658 (*Ë&
°©us
 [
c⁄sume_ödex
],

659 (
°©us
 [0])

661 
°©
 = 
°©us
 [
c⁄sume_ödex
].
öfo
;

664 (
°©
 & 
ETH_RX_STAT_LAST_FLAG
) != 0

665 && (
°©
 & 
LPC_ETH_RX_STAT_ERRORS
) == 0

668 
mbuf
 *
m
 = 
mbufs
 [
c⁄sume_ödex
];

670 i‡(
	`Õc_ëh_add_√w_mbuf
(
iÂ
, 
desc
, 
mbufs
, 
c⁄sume_ödex
, 
Ál£
)) {

672 
ëhî_hódî
 *
eh
 = 
	`mtod
(
m
, ether_header *);

675 
sz
 = (Ë(
°©
 & 
ETH_RX_STAT_RXSIZE_MASK
) + 1

676 - 
ETHER_HDR_LEN
 - 
ETHER_CRC_LEN
;

679 
m
->
m_Àn
 = 
sz
;

680 
m
->
m_pkthdr
.
Àn
 = 
sz
;

681 
m
->
m_d©a
 = 
	`mtod
(m, *Ë+ 
ETHER_HDR_LEN
;

683 
	`LPC_ETH_PRINTF
("rx: %02" 
PRIu32
 ": %u\n", 
c⁄sume_ödex
, 
sz
);

686 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

689 ++
e
->
ª˚ived_‰ames
;

691 ++
e
->
ª˚ive_dr›_îr‹s
;

695 i‡((
°©
 & 
ETH_RX_STAT_OVERRUN
) != 0) {

696 ++
e
->
ª˚ive_ovîrun_îr‹s
;

698 i‡((
°©
 & 
ETH_RX_STAT_LAST_FLAG
) == 0) {

699 ++
e
->
ª˚ive_‰agmít_îr‹s
;

701 i‡((
°©
 & 
ETH_RX_STAT_CRC_ERROR
) != 0) {

702 ++
e
->
ª˚ive_¸c_îr‹s
;

704 i‡((
°©
 & 
ETH_RX_STAT_SYMBOL_ERROR
) != 0) {

705 ++
e
->
ª˚ive_symbﬁ_îr‹s
;

707 i‡((
°©
 & 
ETH_RX_STAT_LENGTH_ERROR
) != 0) {

708 ++
e
->
ª˚ive_Àngth_îr‹s
;

710 i‡((
°©
 & 
ETH_RX_STAT_ALIGNMENT_ERROR
) != 0) {

711 ++
e
->
ª˚ive_Æignmít_îr‹s
;

713 i‡((
°©
 & 
ETH_RX_STAT_NO_DESCRIPTOR
) != 0) {

714 ++
e
->
ª˚ive_no_des¸ùt‹_îr‹s
;

719 
c⁄sume_ödex
 = 
	`Õc_ëh_ö¸emít
(c⁄sume_ödex, 
ödex_max
);

720 
Õc_ëh
->
rxc⁄sumeödex
 = 
c⁄sume_ödex
;

723 
	`Õc_ëh_íabÀ_ª˚ive_öãºu±s
();

728 
	}
}

730 
mbuf
 *
	$Õc_ëh_√xt_‰agmít
(

731 
i‚ë
 *
iÂ
,

732 
mbuf
 *
m
,

733 
uöt32_t
 *
˘æ


736 
mbuf
 *
n
 = 
NULL
;

737 
size
 = 0;

739 
åue
) {

740 i‡(
m
 =
NULL
) {

742 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

745 i‡(
m
 =
NULL
) {

746  
m
;

751 
size
 = 
m
->
m_Àn
;

753 i‡(
size
 > 0) {

758 
m
 = 
	`m_‰ì
(m);

763 *
˘æ
 = (
uöt32_t
Ë(
size
 - 1);

766 
n
 = 
m
->
m_√xt
;

767 
n
 !
NULL
 &&Ç->
m_Àn
 <= 0) {

768 
n
 = 
	`m_‰ì
(n);

770 
m
->
m_√xt
 = 
n
;

773 i‡(
n
 =
NULL
) {

774 *
˘æ
 |
LPC_ETH_LAST_FRAGMENT_FLAGS
;

777  
m
;

778 
	}
}

780 
	$Õc_ëh_å™smô_èsk
(*
¨g
)

782 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

783 
πems_evít_£t
 
evíts
 = 0;

784 
Õc_ëh_drivî_íåy
 *
e
 = (Õc_ëh_drivî_íåy *Ë
¨g
;

785 
i‚ë
 *
iÂ
 = &
e
->
¨pcom
.
ac_if
;

786 vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *c⁄° 
desc
 = 
e
->
tx_desc_èbÀ
;

787 vﬁ©ûê
uöt32_t
 *c⁄° 
°©us
 = 
e
->
tx_°©us_èbÀ
;

788 #ifde‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


789 
mbuf
 **c⁄° 
mbufs
 = 
e
->
tx_buf_èbÀ
;

791 *c⁄° 
buf
 = 
e
->
tx_buf_èbÀ
;

793 
mbuf
 *
m
 = 
NULL
;

794 
uöt32_t
 c⁄° 
ödex_max
 = 
e
->
tx_unô_cou¡
 - 1;

795 
uöt32_t
 
¥odu˚_ödex
 = 0;

796 
uöt32_t
 
c⁄sume_ödex
 = 0;

797 
uöt32_t
 
˘æ
 = 0;

798 #i‚de‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


799 
uöt32_t
 
‰ame_Àngth
 = 0;

800 *
‰ame_buf„r
 = 
NULL
;

803 
	`LPC_ETH_PRINTF
("%s\n", 
__func__
);

805 #i‚de‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


807 
¥odu˚_ödex
 = 0;Örodu˚_ödex <
ödex_max
; ++produce_index) {

808 
desc
 [
¥odu˚_ödex
].
°¨t
 =

809 (
uöt32_t
Ë(
buf
 + 
¥odu˚_ödex
 * 
LPC_ETH_CONFIG_TX_BUF_SIZE
);

814 
åue
) {

816 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
(

817 
LPC_ETH_EVENT_INITIALIZE


818 | 
LPC_ETH_EVENT_STOP


819 | 
LPC_ETH_EVENT_TXSTART


820 | 
LPC_ETH_EVENT_INTERRUPT
,

821 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

822 
RTEMS_NO_TIMEOUT
,

823 &
evíts


825 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

827 
	`LPC_ETH_PRINTF
("tx: wakêup: 0x%08" 
PRIx32
 "\n", 
evíts
);

830 i‡((
evíts
 & 
LPC_ETH_EVENT_STOP
) != 0) {

831 
	`Õc_ëh_c⁄åﬁ_ªque°_com∂ëe
(
e
);

838 i‡((
evíts
 & 
LPC_ETH_EVENT_INITIALIZE
) != 0) {

840 
	`Õc_ëh_dißbÀ_å™smô_öãºu±s
();

843 
Õc_ëh
->
comm™d
 &~
ETH_CMD_TX_ENABLE
;

846 (
Õc_ëh
->
°©us
 & 
ETH_STAT_TX_ACTIVE
) != 0) {

851 
Õc_ëh
->
comm™d
 |
ETH_CMD_TX_RESET
;

854 
Õc_ëh
->
öt˛ór
 = 
LPC_ETH_INTERRUPT_TRANSMIT
;

857 
Õc_ëh
->
txdes¸ùt‹num
 = 
ödex_max
;

858 
Õc_ëh
->
txdes¸ùt‹
 = (
uöt32_t
Ë
desc
;

859 
Õc_ëh
->
tx°©us
 = (
uöt32_t
Ë
°©us
;

861 #ifde‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


863 
¥odu˚_ödex
 = 0;Örodu˚_ödex <
ödex_max
; ++produce_index) {

864 
mbuf
 *
vi˘im
 = 
mbufs
 [
¥odu˚_ödex
];

866 i‡(
vi˘im
 !
NULL
) {

867 
	`m_‰ì
(
vi˘im
);

868 
mbufs
 [
¥odu˚_ödex
] = 
NULL
;

874 
¥odu˚_ödex
 = 
Õc_ëh
->
tx¥odu˚ödex
;

875 
c⁄sume_ödex
 = 
Õc_ëh
->
txc⁄sumeödex
;

877 #i‚de‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


879 
‰ame_Àngth
 = 0;

880 
‰ame_buf„r
 = (*Ë
desc
 [
¥odu˚_ödex
].
°¨t
;

884 
Õc_ëh
->
comm™d
 |
ETH_CMD_TX_ENABLE
;

886 
	`Õc_ëh_c⁄åﬁ_ªque°_com∂ëe
(
e
);

890 
åue
) {

892 
uöt32_t
 
c
 = 
c⁄sume_ödex
;

895 
Õc_ëh
->
öt˛ór
 = 
LPC_ETH_INTERRUPT_TRANSMIT
;

898 
c⁄sume_ödex
 = 
Õc_ëh
->
txc⁄sumeödex
;

901 i‡(
c
 =
c⁄sume_ödex
) {

905 
c
 !
c⁄sume_ödex
) {

906 
uöt32_t
 
s
 = 
°©us
 [
c
];

909 i‡((
s
 & (
ETH_TX_STAT_ERROR
 | 
ETH_TX_STAT_NO_DESCRIPTOR
)) != 0) {

910 i‡((
s
 & 
ETH_TX_STAT_UNDERRUN
) != 0) {

911 ++
e
->
å™smô_undîrun_îr‹s
;

913 i‡((
s
 & 
ETH_TX_STAT_LATE_COLLISION
) != 0) {

914 ++
e
->
å™smô_œã_cﬁlisi⁄_îr‹s
;

916 i‡((
s
 & 
ETH_TX_STAT_EXCESSIVE_COLLISION
) != 0) {

917 ++
e
->
å™smô_ex˚ssive_cﬁlisi⁄_îr‹s
;

919 i‡((
s
 & 
ETH_TX_STAT_EXCESSIVE_DEFER
) != 0) {

920 ++
e
->
å™smô_ex˚ssive_de„r_îr‹s
;

922 i‡((
s
 & 
ETH_TX_STAT_NO_DESCRIPTOR
) != 0) {

923 ++
e
->
å™smô_no_des¸ùt‹_îr‹s
;

927 #ifde‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


929 
	`m_‰ì
(
mbufs
 [
c
]);

930 
mbufs
 [
c
] = 
NULL
;

934 
c
 = 
	`Õc_ëh_ö¸emít
(c, 
ödex_max
);

939 
åue
) {

941 
uöt32_t
 
p
 = 
	`Õc_ëh_ö¸emít
(
¥odu˚_ödex
, 
ödex_max
);

944 
m
 = 
	`Õc_ëh_√xt_‰agmít
(
iÂ
, m, &
˘æ
);

947 i‡(
p
 =
c⁄sume_ödex
) {

948 
	`LPC_ETH_PRINTF
("tx: fuŒ queue: 0x%08x\n", 
m
);

955 i‡(
m
 !
NULL
) {

956 #ifde‡
LPC_ETH_CONFIG_USE_TRANSMIT_DMA


958 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

959 
	`mtod
(
m
, const *),

960 (
size_t
Ë
m
->
m_Àn


962 
desc
 [
¥odu˚_ödex
].
°¨t
 = 
	`mtod
(
m
, 
uöt32_t
);

963 
desc
 [
¥odu˚_ödex
].
c⁄åﬁ
 = 
˘æ
;

964 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

965 (*Ë&
desc
 [
¥odu˚_ödex
],

966 (
desc
 [0])

968 
mbufs
 [
¥odu˚_ödex
] = 
m
;

970 
	`LPC_ETH_PRINTF
(

971 "tx: %02" 
PRIu32
 ": %u %s\n",

972 
¥odu˚_ödex
, 
m
->
m_Àn
,

973 (
˘æ
 & 
ETH_TX_CTRL_LAST
) != 0 ? "L" : ""

977 
¥odu˚_ödex
 = 
p
;

980 i‡((
˘æ
 & 
ETH_TX_CTRL_LAST
) != 0) {

982 
Õc_ëh
->
tx¥odu˚ödex
 = 
¥odu˚_ödex
;

985 ++
e
->
å™smôãd_‰ames
;

989 
m
 = m->
m_√xt
;

991 
size_t
 
‰agmít_Àngth
 = (size_tË
m
->
m_Àn
;

992 *
‰agmít_°¨t
 = 
	`mtod
(
m
, *);

993 
uöt32_t
 
√w_‰ame_Àngth
 = 
‰ame_Àngth
 + 
‰agmít_Àngth
;

996 i‡(
√w_‰ame_Àngth
 > 
LPC_ETH_CONFIG_TX_BUF_SIZE
) {

997 
	`LPC_ETH_PRINTF
("tx: overflow\n");

1000 
√w_‰ame_Àngth
 = 
LPC_ETH_CONFIG_TX_BUF_SIZE
;

1001 
‰agmít_Àngth
 = 
√w_‰ame_Àngth
 - 
‰ame_Àngth
;

1004 
˘æ
 |
LPC_ETH_LAST_FRAGMENT_FLAGS
;

1007 ++
e
->
å™smô_ovîÊow_îr‹s
;

1010 
	`LPC_ETH_PRINTF
(

1011 "tx: c›y: %" 
PRIu32
 "%s%s\n",

1012 
‰agmít_Àngth
,

1013 (
m
->
m_Êags
 & 
M_EXT
) != 0 ? ", E" : "",

1014 (
m
->
m_Êags
 & 
M_PKTHDR
) != 0 ? ", H" : ""

1018 
	`mem˝y
(
‰ame_buf„r
, 
‰agmít_°¨t
, 
‰agmít_Àngth
);

1020 i‡((
˘æ
 & 
ETH_TX_CTRL_LAST
) != 0) {

1022 
desc
 [
¥odu˚_ödex
].
c⁄åﬁ
 = (
˘æ
 & ~
ETH_TX_CTRL_SIZE_MASK
)

1023 | (
√w_‰ame_Àngth
 - 1);

1025 
	`LPC_ETH_PRINTF
(

1026 "tx: %02" 
PRIu32
 ": %" PRIu32 "\n",

1027 
¥odu˚_ödex
,

1028 
√w_‰ame_Àngth


1032 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

1033 (c⁄° *Ë
desc
 [
¥odu˚_ödex
].
°¨t
,

1034 
√w_‰ame_Àngth


1038 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

1039 (*Ë&
desc
 [
¥odu˚_ödex
],

1040 (
desc
 [0])

1044 
¥odu˚_ödex
 = 
p
;

1047 
Õc_ëh
->
tx¥odu˚ödex
 = 
¥odu˚_ödex
;

1050 
‰ame_Àngth
 = 0;

1051 
‰ame_buf„r
 = (*Ë
desc
 [
¥odu˚_ödex
].
°¨t
;

1054 ++
e
->
å™smôãd_‰ames
;

1057 
‰ame_Àngth
 = 
√w_‰ame_Àngth
;

1060 
‰ame_buf„r
 +
‰agmít_Àngth
;

1064 
m
 = 
	`m_‰ì
(m);

1073 i‡(
m
 =
NULL
) {

1075 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

1077 
	`LPC_ETH_PRINTF
("tx:Énable interrupts\n");

1080 
	`Õc_ëh_íabÀ_å™smô_öãºu±s
();

1083 
	}
}

1085 
	$Õc_ëh_mdio_waô_f‹_nŸ_busy
()

1087 
πems_öãrvÆ
 
⁄e_£c⁄d
 = 
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

1088 
πems_öãrvÆ
 
i
 = 0;

1090 (
Õc_ëh
->
möd
 & 
ETH_MIND_BUSY
Ë!0 && 
i
 < 
⁄e_£c⁄d
) {

1091 
	`πems_èsk_wake_a·î
(1);

1092 ++
i
;

1095 
	`LPC_ETH_PRINTK
("tx:Üpc_eth_mdio_wait %sáfter %d\n",

1096 
i
 !
⁄e_£c⁄d
? "succeed": "timeout", i);

1098  
i
 !
⁄e_£c⁄d
 ? 0 : 
ETIMEDOUT
;

1099 
	}
}

1101 
uöt32_t
 
	$Õc_ëh_mdio_ªad_™Õ¨
(
phy
)

1103 
uöt32_t
 
madr
 = 
	`ETH_MADR_REG
(
MII_ANLPAR
Ë| 
	`ETH_MADR_PHY
(
phy
);

1104 
uöt32_t
 
™Õ¨
 = 0;

1105 
ío
 = 0;

1107 i‡(
Õc_ëh
->
madr
 != madr) {

1108 
Õc_ëh
->
madr
 = madr;

1111 i‡(
Õc_ëh
->
mcmd
 !
ETH_MCMD_READ
) {

1112 
Õc_ëh
->
mcmd
 = 0;

1113 
Õc_ëh
->
mcmd
 = 
ETH_MCMD_READ
;

1116 
ío
 = 
	`Õc_ëh_mdio_waô_f‹_nŸ_busy
();

1117 i‡(
ío
 == 0) {

1118 
™Õ¨
 = 
Õc_ëh
->
mrdd
;

1122 
Õc_ëh
->
mcmd
 = 0;

1123 
Õc_ëh
->
mcmd
 = 
ETH_MCMD_READ
;

1125  
™Õ¨
;

1126 
	}
}

1128 
Õc_ëh_mdio_ªad
(

1129 
phy
,

1130 *
¨g
 
__©åibuã__
((
unu£d
)),

1131 
ªg
,

1132 
uöt32_t
 *
vÆ


1135 
	gío
 = 0;

1137 i‡(0 <
phy
 &&Öhy <= 31) {

1138 
Õc_ëh
->
madr
 = 
ETH_MADR_REG
(
ªg
Ë| 
ETH_MADR_PHY
(
phy
);

1139 
	gÕc_ëh
->
	gmcmd
 = 0;

1140 
	gÕc_ëh
->
	gmcmd
 = 
ETH_MCMD_READ
;

1141 
	gío
 = 
Õc_ëh_mdio_waô_f‹_nŸ_busy
();

1143 i‡(
	gío
 == 0) {

1144 *
vÆ
 = 
Õc_ëh
->
mrdd
;

1147 
	gío
 = 
EINVAL
;

1150  
	gío
;

1153 
Õc_ëh_mdio_wrôe
(

1154 
phy
,

1155 *
¨g
 
__©åibuã__
((
unu£d
)),

1156 
ªg
,

1157 
uöt32_t
 
vÆ


1160 
	gío
 = 0;

1162 i‡(0 <
phy
 &&Öhy <= 31) {

1163 
Õc_ëh
->
madr
 = 
ETH_MADR_REG
(
ªg
Ë| 
ETH_MADR_PHY
(
phy
);

1164 
	gÕc_ëh
->
	gmwtd
 = 
vÆ
;

1165 
	gío
 = 
Õc_ëh_mdio_waô_f‹_nŸ_busy
();

1167 
	gío
 = 
EINVAL
;

1170  
	gío
;

1173 
	$Õc_ëh_phy_gë_id
(
phy
, 
uöt32_t
 *
id
)

1175 
uöt32_t
 
id1
 = 0;

1176 
ío
 = 
	`Õc_ëh_mdio_ªad
(
phy
, 
NULL
, 
MII_PHYIDR1
, &
id1
);

1178 i‡(
ío
 == 0) {

1179 
uöt32_t
 
id2
 = 0;

1181 
ío
 = 
	`Õc_ëh_mdio_ªad
(
phy
, 
NULL
, 
MII_PHYIDR2
, &
id2
);

1182 i‡(
ío
 == 0) {

1183 *
id
 = (
id1
 << 16Ë| (
id2
 & 0xfff0);

1187  
ío
;

1188 
	}
}

1190 
	#PHY_KSZ80X1RNL
 0x221550

	)

1191 
	#PHY_DP83848
 0x20005c90

	)

1194 
	mªg
;

1195 
uöt32_t
 
	m£t
;

1196 
uöt32_t
 
	m˛ór
;

1197 } 
	tÕc_ëh_phy_a˘i⁄
;

1199 
	$Õc_ëh_phy_£t_™d_˛ór
(

1200 
Õc_ëh_drivî_íåy
 *
e
,

1201 c⁄° 
Õc_ëh_phy_a˘i⁄
 *
a˘i⁄s
,

1202 
size_t
 
n


1205 
ío
 = 0;

1206 
size_t
 
i
;

1208 
i
 = 0; 
ío
 =0 && i < 
n
; ++i) {

1209 c⁄° 
Õc_ëh_phy_a˘i⁄
 *
a˘i⁄
 = &
a˘i⁄s
 [
i
];

1210 
uöt32_t
 
vÆ
;

1212 
ío
 = 
	`Õc_ëh_mdio_ªad
(
e
->
phy
, 
NULL
, 
a˘i⁄
->
ªg
, &
vÆ
);

1213 i‡(
ío
 == 0) {

1214 
vÆ
 |
a˘i⁄
->
£t
;

1215 
vÆ
 &~
a˘i⁄
->
˛ór
;

1216 
ío
 = 
	`Õc_ëh_mdio_wrôe
(
e
->
phy
, 
NULL
, 
a˘i⁄
->
ªg
, 
vÆ
);

1220  
ío
;

1221 
	}
}

1223 c⁄° 
Õc_ëh_phy_a˘i⁄
 
	gÕc_ëh_phy_up_a˘i⁄_deÁu…
 [] = {

1224 { 
MII_BMCR
, 0, 
BMCR_PDOWN
 },

1225 { 
MII_BMCR
, 
BMCR_RESET
, 0 },

1226 { 
MII_BMCR
, 
BMCR_AUTOEN
, 0 }

1229 c⁄° 
Õc_ëh_phy_a˘i⁄
 
	gÕc_ëh_phy_up_¥e_a˘i⁄_KSZ80X1RNL
 [] = {

1234 c⁄° 
Õc_ëh_phy_a˘i⁄
 
	gÕc_ëh_phy_up_po°_a˘i⁄_KSZ80X1RNL
 [] = {

1241 
	$Õc_ëh_phy_up
(
Õc_ëh_drivî_íåy
 *
e
)

1243 
ío
;

1244 
ªåõs
 = 64;

1245 
uöt32_t
 
vÆ
;

1247 
e
->
phy
 = 
DEFAULT_PHY
 - 1;

1248 
åue
) {

1249 
e
->
phy
 = (e->phy + 1) % 32;

1251 --
ªåõs
;

1252 
ío
 = 
	`Õc_ëh_phy_gë_id
(
e
->
phy
, &e->
phy_id
);

1254 (
ío
 =0 && 
e
->
phy_id
 != 0xfffffff0 &&É->phy_id != 0)

1255 || 
ªåõs
 <= 0

1260 
	`πems_èsk_wake_a·î
(1);

1263 
	`LPC_ETH_PRINTF
("Õc_ëh_phy_gë_id: 0x%08" 
PRIx32
 " fromÖhy %dÑetries %d\n",

1264 
e
->
phy_id
,É->
phy
, 
ªåõs
);

1266 i‡(
ío
 == 0) {

1267 
e
->
phy_id
) {

1268 
PHY_KSZ80X1RNL
:

1269 
ío
 = 
	`Õc_ëh_phy_£t_™d_˛ór
(

1270 
e
,

1271 &
Õc_ëh_phy_up_¥e_a˘i⁄_KSZ80X1RNL
 [0],

1272 
	`RTEMS_ARRAY_SIZE
(
Õc_ëh_phy_up_¥e_a˘i⁄_KSZ80X1RNL
)

1275 
PHY_DP83848
:

1276 
ío
 = 
	`Õc_ëh_mdio_ªad
(
e
->
phy
, 
NULL
, 0x17, &
vÆ
);

1277 
	`LPC_ETH_PRINTF
("phy PHY_DP83848 RBR 0x%08" 
PRIx32
 "\n", 
vÆ
);

1279 
vÆ
 = 0x32 ;

1280 
ío
 = 
	`Õc_ëh_mdio_wrôe
(
e
->
phy
, 
NULL
, 0x17, 
vÆ
);

1284 
ío
 = 
EIO
;

1285 
e
->
phy
 = 
DEFAULT_PHY
;

1291 i‡(
ío
 == 0) {

1292 
ío
 = 
	`Õc_ëh_phy_£t_™d_˛ór
(

1293 
e
,

1294 &
Õc_ëh_phy_up_a˘i⁄_deÁu…
 [0],

1295 
	`RTEMS_ARRAY_SIZE
(
Õc_ëh_phy_up_a˘i⁄_deÁu…
)

1299 i‡(
ío
 == 0) {

1300 
e
->
phy_id
) {

1301 
PHY_KSZ80X1RNL
:

1302 
ío
 = 
	`Õc_ëh_phy_£t_™d_˛ór
(

1303 
e
,

1304 &
Õc_ëh_phy_up_po°_a˘i⁄_KSZ80X1RNL
 [0],

1305 
	`RTEMS_ARRAY_SIZE
(
Õc_ëh_phy_up_po°_a˘i⁄_KSZ80X1RNL
)

1313 
e
->
phy_id
 = 0;

1316  
ío
;

1317 
	}
}

1319 c⁄° 
Õc_ëh_phy_a˘i⁄
 
	gÕc_ëh_phy_down_a˘i⁄_deÁu…
 [] = {

1320 { 
MII_BMCR
, 
BMCR_PDOWN
, 0 }

1323 c⁄° 
Õc_ëh_phy_a˘i⁄
 
	gÕc_ëh_phy_down_po°_a˘i⁄_KSZ80X1RNL
 [] = {

1328 
	$Õc_ëh_phy_down
(
Õc_ëh_drivî_íåy
 *
e
)

1330 
ío
 = 
	`Õc_ëh_phy_£t_™d_˛ór
(

1331 
e
,

1332 &
Õc_ëh_phy_down_a˘i⁄_deÁu…
 [0],

1333 
	`RTEMS_ARRAY_SIZE
(
Õc_ëh_phy_down_a˘i⁄_deÁu…
)

1336 i‡(
ío
 == 0) {

1337 
e
->
phy_id
) {

1338 
PHY_KSZ80X1RNL
:

1339 
ío
 = 
	`Õc_ëh_phy_£t_™d_˛ór
(

1340 
e
,

1341 &
Õc_ëh_phy_down_po°_a˘i⁄_KSZ80X1RNL
 [0],

1342 
	`RTEMS_ARRAY_SIZE
(
Õc_ëh_phy_down_po°_a˘i⁄_KSZ80X1RNL
)

1349 
	}
}

1351 
	$Õc_ëh_so·_ª£t
()

1353 
Õc_ëh
->
comm™d
 = 0x38;

1354 
Õc_ëh
->
mac1
 = 0xcf00;

1355 
Õc_ëh
->
mac1
 = 0x0;

1356 
	}
}

1358 
	$Õc_ëh_up_‹_down
(
Õc_ëh_drivî_íåy
 *
e
, 
boﬁ
 
up
)

1360 
ío
 = 0;

1361 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1362 
i‚ë
 *
iÂ
 = &
e
->
¨pcom
.
ac_if
;

1364 i‡(
up
 && 
e
->
°©e
 =
LPC_ETH_STATE_DOWN
) {

1366 
	`Õc_ëh_c⁄fig_moduÀ_íabÀ
();

1369 
Õc_ëh
->
mac1
 = 0xf00;

1373 
Õc_ëh
->
mcfg
 = 
	`ETH_MCFG_CLOCK_SELECT
(10Ë| 
ETH_MCFG_RESETMIIMGMT
;

1374 
	`πems_èsk_wake_a·î
(1);

1375 
Õc_ëh
->
mcfg
 = 
	`ETH_MCFG_CLOCK_SELECT
(10);

1376 
	`πems_èsk_wake_a·î
(1);

1377 
ío
 = 
	`Õc_ëh_phy_up
(
e
);

1379 i‡(
ío
 == 0) {

1384 
	`Õc_ëh_so·_ª£t
();

1387 
Õc_ëh
->
mac2
 = 0x31;

1388 
Õc_ëh
->
ùgt
 = 0x15;

1389 
Õc_ëh
->
ùgr
 = 0x12;

1390 
Õc_ëh
->
˛π
 = 0x370f;

1391 
Õc_ëh
->
maxf
 = 0x0600;

1392 
Õc_ëh
->
suµ
 = 
ETH_SUPP_SPEED
;

1393 
Õc_ëh
->
ã°
 = 0;

1394 #ifde‡
LPC_ETH_CONFIG_RMII


1395 
Õc_ëh
->
comm™d
 = 0x0600;

1397 
Õc_ëh
->
comm™d
 = 0x0400;

1399 
Õc_ëh
->
öã«bÀ
 = 
ETH_INT_RX_OVERRUN
 | 
ETH_INT_TX_UNDERRUN
;

1400 
Õc_ëh
->
öt˛ór
 = 0x30ff;

1401 
Õc_ëh
->
powîdown
 = 0;

1404 
Õc_ëh
->
ß0
 = ((
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [5] << 8)

1405 | (
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [4];

1406 
Õc_ëh
->
ß1
 = ((
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [3] << 8)

1407 | (
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [2];

1408 
Õc_ëh
->
ß2
 = ((
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [1] << 8)

1409 | (
uöt32_t
Ë
e
->
¨pcom
.
ac_íaddr
 [0];

1412 
Õc_ëh
->
mac1
 = 0x03;

1415 
	`Õc_ëh_c⁄åﬁ_ªque°
(
e
,É->
ª˚ive_èsk
, 
LPC_ETH_EVENT_INITIALIZE
);

1416 
	`Õc_ëh_c⁄åﬁ_ªque°
(
e
,É->
å™smô_èsk
, 
LPC_ETH_EVENT_INITIALIZE
);

1419 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

1420 
e
->
öãºu±_numbî
,

1422 
RTEMS_INTERRUPT_UNIQUE
,

1423 
Õc_ëh_öãºu±_h™dÀr
,

1424 
e


1426 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

1429 
iÂ
->
if_timî
 = 1;

1432 
e
->
°©e
 = 
LPC_ETH_STATE_UP
;

1435 i‡(
ío
 != 0) {

1436 
iÂ
->
if_Êags
 &~
IFF_UP
;

1438 } i‡(!
up
 && 
e
->
°©e
 =
LPC_ETH_STATE_UP
) {

1440 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

1441 
e
->
öãºu±_numbî
,

1442 
Õc_ëh_öãºu±_h™dÀr
,

1443 
e


1445 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

1448 
	`Õc_ëh_c⁄åﬁ_ªque°
(
e
,É->
ª˚ive_èsk
, 
LPC_ETH_EVENT_STOP
);

1449 
	`Õc_ëh_c⁄åﬁ_ªque°
(
e
,É->
å™smô_èsk
, 
LPC_ETH_EVENT_STOP
);

1451 
	`Õc_ëh_so·_ª£t
();

1452 
	`Õc_ëh_phy_down
(
e
);

1453 
	`Õc_ëh_c⁄fig_moduÀ_dißbÀ
();

1456 
iÂ
->
if_timî
 = 0;

1459 
e
->
°©e
 = 
LPC_ETH_STATE_DOWN
;

1462  
ío
;

1463 
	}
}

1465 
	$Õc_ëh_öãrÁ˚_öô
(*
¨g
)

1468 
	}
}

1470 
	$Õc_ëh_öãrÁ˚_°©s
(
Õc_ëh_drivî_íåy
 *
e
)

1472 
ío
 = 
EIO
;

1473 
medü
 = 0;

1475 i‡(
e
->
°©e
 =
LPC_ETH_STATE_UP
) {

1476 
medü
 = 
	`IFM_MAKEWORD
(0, 0, 0, 0);

1477 
ío
 = 
	`πems_mii_io˘l
(&
e
->
mdio
,É, 
SIOCGIFMEDIA
, &
medü
);

1480 
	`πems_bsd√t_£m≠h‹e_ªÀa£
();

1482 i‡(
ío
 == 0) {

1483 
	`πems_ifmedü2°r
(
medü
, 
NULL
, 0);

1484 
	`¥ötf
("\n");

1487 
	`¥ötf
("ª˚ived fømes: %u\n", 
e
->
ª˚ived_‰ames
);

1488 
	`¥ötf
("ª˚ivêöãºu±s: %u\n", 
e
->
ª˚ive_öãºu±s
);

1489 
	`¥ötf
("å™smôãd fømes: %u\n", 
e
->
å™smôãd_‰ames
);

1490 
	`¥ötf
("å™smô i¡îru±s: %u\n", 
e
->
å™smô_öãºu±s
);

1491 
	`¥ötf
("ª˚ivêdr›Éº‹s: %u\n", 
e
->
ª˚ive_dr›_îr‹s
);

1492 
	`¥ötf
("ª˚ivêovîru¿îr‹s: %u\n", 
e
->
ª˚ive_ovîrun_îr‹s
);

1493 
	`¥ötf
("ª˚ivê‰agmíàîr‹s: %u\n", 
e
->
ª˚ive_‰agmít_îr‹s
);

1494 
	`¥ötf
("ª˚ivêCRCÉº‹s: %u\n", 
e
->
ª˚ive_¸c_îr‹s
);

1495 
	`¥ötf
("ª˚ivêsymbﬁÉº‹s: %u\n", 
e
->
ª˚ive_symbﬁ_îr‹s
);

1496 
	`¥ötf
("ª˚ivêÀngthÉº‹s: %u\n", 
e
->
ª˚ive_Àngth_îr‹s
);

1497 
	`¥ötf
("ª˚ivêÆignmíàîr‹s: %u\n", 
e
->
ª˚ive_Æignmít_îr‹s
);

1498 
	`¥ötf
("ª˚ivênÿdes¸ùt‹Éº‹s: %u\n", 
e
->
ª˚ive_no_des¸ùt‹_îr‹s
);

1499 
	`¥ötf
("ª˚ivêÁè»îr‹s: %u\n", 
e
->
ª˚ive_Áèl_îr‹s
);

1500 
	`¥ötf
("å™smô undîru¿îr‹s: %u\n", 
e
->
å™smô_undîrun_îr‹s
);

1501 
	`¥ötf
("å™smôÜ©êcﬁlisi⁄Éº‹s: %u\n", 
e
->
å™smô_œã_cﬁlisi⁄_îr‹s
);

1502 
	`¥ötf
("å™smôÉx˚ssivêcﬁlisi⁄Éº‹s: %u\n", 
e
->
å™smô_ex˚ssive_cﬁlisi⁄_îr‹s
);

1503 
	`¥ötf
("å™smôÉx˚ssivêde„∏îr‹s: %u\n", 
e
->
å™smô_ex˚ssive_de„r_îr‹s
);

1504 
	`¥ötf
("å™smôÇÿdes¸ùt‹Éº‹s: %u\n", 
e
->
å™smô_no_des¸ùt‹_îr‹s
);

1505 
	`¥ötf
("å™smô ovîÊowÉº‹s: %u\n", 
e
->
å™smô_ovîÊow_îr‹s
);

1506 
	`¥ötf
("å™smô f©ÆÉº‹s: %u\n", 
e
->
å™smô_Áèl_îr‹s
);

1508 
	`πems_bsd√t_£m≠h‹e_obèö
();

1509 
	}
}

1511 
	$Õc_ëh_mu…iˇ°_c⁄åﬁ
(

1512 
boﬁ
 
add
,

1513 
i‰eq
 *
i‰
,

1514 
¨pcom
 *
ac


1517 
ío
 = 0;

1519 i‡(
add
) {

1520 
ío
 = 
	`ëhî_addmu…i
(
i‰
, 
ac
);

1522 
ío
 = 
	`ëhî_dñmu…i
(
i‰
, 
ac
);

1525 i‡(
ío
 =
ENETRESET
) {

1526 
ëhî_mu…i°ï
 
°ï
;

1527 
ëhî_mu…i
 *
ím
;

1529 
ío
 = 0;

1531 
Õc_ëh
->
hashfûãæ
 = 0;

1532 
Õc_ëh
->
hashfûãrh
 = 0;

1534 
	`ETHER_FIRST_MULTI
(
°ï
, 
ac
, 
ím
);

1535 
ím
 !
NULL
) {

1536 
uöt64_t
 
addæo
 = 0;

1537 
uöt64_t
 
addrhi
 = 0;

1539 
	`mem˝y
(&
addæo
, 
ím
->
ím_addæo
, 
ETHER_ADDR_LEN
);

1540 
	`mem˝y
(&
addrhi
, 
ím
->
ím_addrhi
, 
ETHER_ADDR_LEN
);

1541 
addæo
 <
addrhi
) {

1543 
uöt32_t
 
¸c
 = 
	`ëhî_¸c32_be
((
uöt8_t
 *Ë&
addæo
, 
ETHER_ADDR_LEN
);

1544 
uöt32_t
 
ödex
 = (
¸c
 >> 23) & 0x3f;

1546 i‡(
ödex
 < 32) {

1547 
Õc_ëh
->
hashfûãæ
 |1U << 
ödex
;

1549 
Õc_ëh
->
hashfûãrh
 |1U << (
ödex
 - 32);

1551 ++
addæo
;

1553 
	`ETHER_NEXT_MULTI
(
°ï
, 
ím
);

1557  
ío
;

1558 
	}
}

1560 
	$Õc_ëh_öãrÁ˚_io˘l
(

1561 
i‚ë
 *
iÂ
,

1562 
io˘l_comm™d_t
 
cmd
,

1563 
ˇddr_t
 
d©a


1566 
Õc_ëh_drivî_íåy
 *
e
 = (Õc_ëh_drivî_íåy *Ë
iÂ
->
if_so·c
;

1567 
i‰eq
 *
i‰
 = (i‰eq *Ë
d©a
;

1568 
ío
 = 0;

1570 
	`LPC_ETH_PRINTF
("%s\n", 
__func__
);

1572 
cmd
) {

1573 
SIOCGIFMEDIA
:

1574 
SIOCSIFMEDIA
:

1575 
	`πems_mii_io˘l
(&
e
->
mdio
,É, 
cmd
, &
i‰
->
i‰_medü
);

1577 
SIOCGIFADDR
:

1578 
SIOCSIFADDR
:

1579 
	`ëhî_io˘l
(
iÂ
, 
cmd
, 
d©a
);

1581 
SIOCSIFFLAGS
:

1582 
ío
 = 
	`Õc_ëh_up_‹_down
(
e
, (
iÂ
->
if_Êags
 & 
IFF_UP
) != 0);

1583 i‡(
ío
 =0 && (
iÂ
->
if_Êags
 & 
IFF_UP
) != 0) {

1584 
	`Õc_ëh_íabÀ_¥omiscous_mode
((
iÂ
->
if_Êags
 & 
IFF_PROMISC
) != 0);

1587 
SIOCADDMULTI
:

1588 
SIOCDELMULTI
:

1589 
ío
 = 
	`Õc_ëh_mu…iˇ°_c⁄åﬁ
(
cmd
 =
SIOCADDMULTI
, 
i‰
, &
e
->
¨pcom
);

1591 
SIO_RTEMS_SHOW_STATS
:

1592 
	`Õc_ëh_öãrÁ˚_°©s
(
e
);

1595 
ío
 = 
EINVAL
;

1599  
ío
;

1600 
	}
}

1602 
	$Õc_ëh_öãrÁ˚_°¨t
(
i‚ë
 *
iÂ
)

1604 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1605 
Õc_ëh_drivî_íåy
 *
e
 = (Õc_ëh_drivî_íåy *Ë
iÂ
->
if_so·c
;

1607 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

1609 i‡(
e
->
°©e
 =
LPC_ETH_STATE_UP
) {

1610 
sc
 = 
	`πems_bsd√t_evít_£nd
(
e
->
å™smô_èsk
, 
LPC_ETH_EVENT_TXSTART
);

1611 
	`as£π
(
sc
 =
RTEMS_SUCCESSFUL
);

1613 
	}
}

1615 
	$Õc_ëh_öãrÁ˚_w©chdog
(
i‚ë
 *
iÂ
)

1617 
Õc_ëh_drivî_íåy
 *
e
 = (Õc_ëh_drivî_íåy *Ë
iÂ
->
if_so·c
;

1619 i‡(
e
->
°©e
 =
LPC_ETH_STATE_UP
) {

1620 
uöt32_t
 
™Õ¨
 = 
	`Õc_ëh_mdio_ªad_™Õ¨
(
e
->
phy
);

1622 i‡(
e
->
™Õ¨
 !=ánlpar) {

1623 
boﬁ
 
fuŒ_du∂ex
 = 
Ál£
;

1624 
boﬁ
 
•ìd
 = 
Ál£
;

1626 
e
->
™Õ¨
 =ánlpar;

1628 i‡((
™Õ¨
 & 
ANLPAR_TX_FD
) != 0) {

1629 
fuŒ_du∂ex
 = 
åue
;

1630 
•ìd
 = 
åue
;

1631 } i‡((
™Õ¨
 & 
ANLPAR_T4
) != 0) {

1632 
•ìd
 = 
åue
;

1633 } i‡((
™Õ¨
 & 
ANLPAR_TX
) != 0) {

1634 
•ìd
 = 
åue
;

1635 } i‡((
™Õ¨
 & 
ANLPAR_10_FD
) != 0) {

1636 
fuŒ_du∂ex
 = 
åue
;

1639 i‡(
fuŒ_du∂ex
) {

1640 
Õc_ëh
->
mac2
 |
ETH_MAC2_FULL_DUPLEX
;

1642 
Õc_ëh
->
mac2
 &~
ETH_MAC2_FULL_DUPLEX
;

1645 i‡(
•ìd
) {

1646 
Õc_ëh
->
suµ
 |
ETH_SUPP_SPEED
;

1648 
Õc_ëh
->
suµ
 &~
ETH_SUPP_SPEED
;

1652 
iÂ
->
if_timî
 = 
WATCHDOG_TIMEOUT
;

1654 
	}
}

1656 
	$Õc_ëh_fixup_unô_cou¡
(
cou¡
, 
deÁu…_vÆue
, 
max
)

1658 i‡(
cou¡
 <= 0) {

1659 
cou¡
 = 
deÁu…_vÆue
;

1660 } i‡(
cou¡
 > 
max
) {

1661 
cou¡
 = 
max
;

1664  
LPC_ETH_CONFIG_UNIT_MULTIPLE


1665 + (((Ë
cou¡
 - 1UË& ~(
LPC_ETH_CONFIG_UNIT_MULTIPLE
 - 1U));

1666 
	}
}

1668 
	$Õc_ëh_©èch
(
πems_bsd√t_ifc⁄fig
 *
c⁄fig
)

1670 
Õc_ëh_drivî_íåy
 *
e
 = &
Õc_ëh_drivî_d©a
;

1671 
i‚ë
 *
iÂ
 = &
e
->
¨pcom
.
ac_if
;

1672 *
unô_«me
 = 
NULL
;

1673 
unô_ödex
 = 
	`πems_bsd√t_∑r£_drivî_«me
(
c⁄fig
, &
unô_«me
);

1674 
size_t
 
èbÀ_¨ó_size
 = 0;

1675 *
èbÀ_¨ó
 = 
NULL
;

1676 *
èbÀ_loˇti⁄
 = 
NULL
;

1679 i‡(
unô_ödex
 < 0) {

1682 i‡(
unô_ödex
 != 0) {

1683 
˛ónup
;

1685 i‡(
c⁄fig
->
h¨dw¨e_addªss
 =
NULL
) {

1686 
˛ónup
;

1688 i‡(
e
->
°©e
 !
LPC_ETH_STATE_NOT_INITIALIZED
) {

1689 
˛ónup
;

1693 
e
->
mdio
.
mdio_r
 = 
Õc_ëh_mdio_ªad
;

1694 
e
->
mdio
.
mdio_w
 = 
Õc_ëh_mdio_wrôe
;

1695 
e
->
mdio
.
has_gmii
 = 0;

1696 
e
->
™Õ¨
 = 0;

1699 
c⁄fig
->
úno
 = 
LPC_ETH_CONFIG_INTERRUPT
;

1702 
c⁄fig
->
drv_˘æ
 = 
e
;

1705 
e
->
rx_unô_cou¡
 = 
	`Õc_ëh_fixup_unô_cou¡
(

1706 
c⁄fig
->
rbuf_cou¡
,

1707 
LPC_ETH_CONFIG_RX_UNIT_COUNT_DEFAULT
,

1708 
LPC_ETH_CONFIG_RX_UNIT_COUNT_MAX


1710 
c⁄fig
->
rbuf_cou¡
 = (Ë
e
->
rx_unô_cou¡
;

1713 
e
->
tx_unô_cou¡
 = 
	`Õc_ëh_fixup_unô_cou¡
(

1714 
c⁄fig
->
xbuf_cou¡
,

1715 
LPC_ETH_CONFIG_TX_UNIT_COUNT_DEFAULT
,

1716 
LPC_ETH_CONFIG_TX_UNIT_COUNT_MAX


1718 
c⁄fig
->
xbuf_cou¡
 = (Ë
e
->
tx_unô_cou¡
;

1721 
e
->
öãºu±_numbî
 = 
c⁄fig
->
úno
;

1724 
	`mem˝y
(
e
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

1727 
èbÀ_¨ó_size
 =

1728 
e
->
rx_unô_cou¡


1729 * ((
Õc_ëh_å™s„r_des¸ùt‹
)

1730 + (
Õc_ëh_ª˚ive_°©us
)

1731 + (
mbuf
 *))

1732 + 
e
->
tx_unô_cou¡


1733 * ((
Õc_ëh_å™s„r_des¸ùt‹
)

1734 + (
uöt32_t
)

1735 + 
LPC_ETH_CONFIG_TX_BUF_SIZE
);

1736 
èbÀ_¨ó
 = 
	`Õc_ëh_c⁄fig_Æloc_èbÀ_¨ó
(
èbÀ_¨ó_size
);

1737 i‡(
èbÀ_¨ó
 =
NULL
) {

1738 
˛ónup
;

1740 
	`mem£t
(
èbÀ_¨ó
, 0, 
èbÀ_¨ó_size
);

1742 
èbÀ_loˇti⁄
 = 
èbÀ_¨ó
;

1748 
e
->
rx_°©us_èbÀ
 = (vﬁ©ûê
Õc_ëh_ª˚ive_°©us
 *Ë
èbÀ_loˇti⁄
;

1749 
èbÀ_loˇti⁄
 +
e
->
rx_unô_cou¡
 * ”->
rx_°©us_èbÀ
 [0]);

1751 
e
->
rx_desc_èbÀ
 = (vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *Ë
èbÀ_loˇti⁄
;

1752 
èbÀ_loˇti⁄
 +
e
->
rx_unô_cou¡
 * ”->
rx_desc_èbÀ
 [0]);

1754 
e
->
rx_mbuf_èbÀ
 = (
mbuf
 **Ë
èbÀ_loˇti⁄
;

1755 
èbÀ_loˇti⁄
 +
e
->
rx_unô_cou¡
 * ”->
rx_mbuf_èbÀ
 [0]);

1757 
e
->
tx_desc_èbÀ
 = (vﬁ©ûê
Õc_ëh_å™s„r_des¸ùt‹
 *Ë
èbÀ_loˇti⁄
;

1758 
èbÀ_loˇti⁄
 +
e
->
tx_unô_cou¡
 * ”->
tx_desc_èbÀ
 [0]);

1760 
e
->
tx_°©us_èbÀ
 = (vﬁ©ûê
uöt32_t
 *Ë
èbÀ_loˇti⁄
;

1761 
èbÀ_loˇti⁄
 +
e
->
tx_unô_cou¡
 * ”->
tx_°©us_èbÀ
 [0]);

1763 
e
->
tx_buf_èbÀ
 = 
èbÀ_loˇti⁄
;

1766 
iÂ
->
if_so·c
 = 
e
;

1767 
iÂ
->
if_unô
 = (Ë
unô_ödex
;

1768 
iÂ
->
if_«me
 = 
unô_«me
;

1769 
iÂ
->
if_mtu
 = (
c⁄fig
->
mtu
 > 0Ë? (
u_l⁄g
Ëc⁄fig->mtu : 
ETHERMTU
;

1770 
iÂ
->
if_öô
 = 
Õc_ëh_öãrÁ˚_öô
;

1771 
iÂ
->
if_io˘l
 = 
Õc_ëh_öãrÁ˚_io˘l
;

1772 
iÂ
->
if_°¨t
 = 
Õc_ëh_öãrÁ˚_°¨t
;

1773 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

1774 
iÂ
->
if_w©chdog
 = 
Õc_ëh_öãrÁ˚_w©chdog
;

1775 
iÂ
->
if_Êags
 = 
IFF_MULTICAST
 | 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

1776 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

1777 
iÂ
->
if_timî
 = 0;

1780 
e
->
ª˚ive_èsk
 = 
	`πems_bsd√t_√w¥oc
(

1783 
Õc_ëh_ª˚ive_èsk
,

1784 
e


1786 
e
->
å™smô_èsk
 = 
	`πems_bsd√t_√w¥oc
(

1789 
Õc_ëh_å™smô_èsk
,

1790 
e


1794 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1795 
e
->
°©e
 = 
LPC_ETH_STATE_DOWN
;

1798 
	`if_©èch
(
iÂ
);

1799 
	`ëhî_iÁâach
(
iÂ
);

1803 
˛ónup
:

1805 
	`Õc_ëh_c⁄fig_‰ì_èbÀ_¨ó
(
èbÀ_¨ó
);

1808 
	`‰ì
(
unô_«me
, () 0xdeadbeef);

1811 
	}
}

1813 
Õc_ëh_dëach
(

1814 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
 
__©åibuã__
((
unu£d
))

1820 
	gÕc_ëh
->
	gcomm™d
 = 0x38;

1821 
	gÕc_ëh
->
	gmac1
 = 0xcf00;

1828 
	$Õc_ëh_©èch_dëach
(

1829 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

1830 
©èchög


1835 i‡(
©èchög
) {

1836  
	`Õc_ëh_©èch
(
c⁄fig
);

1838  
	`Õc_ëh_dëach
(
c⁄fig
);

1840 
	}
}

	@src/lib/libbsp/arm/shared/mminit.c

9 
	#ARM_CP15_TEXT_SECTION
 
BSP_START_TEXT_SECTION


	)

11 
	~<b•/°¨t.h
>

12 
	~<b•/¨m-˝15-°¨t.h
>

13 
	~<b•/lökî-symbﬁs.h
>

14 
	~<b•/mm.h
>

16 
BSP_START_TEXT_SECTION
 
	$b•_mem‹y_m™agemít_öôülize
()

18 
uöt32_t
 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

20 
˘æ
 |
ARM_CP15_CTRL_AFE
 | 
ARM_CP15_CTRL_S
 | 
ARM_CP15_CTRL_XP
;

22 
	`¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ_™d_íabÀ_mmu_™d_ˇche
(

23 
˘æ
,

24 (
uöt32_t
 *Ë
b•_å™¶©i⁄_èbÀ_ba£
,

25 
ARM_MMU_DEFAULT_CLIENT_DOMAIN
,

26 &
¨m_˝15_°¨t_mmu_c⁄fig_èbÀ
[0],

27 
¨m_˝15_°¨t_mmu_c⁄fig_èbÀ_size


29 
	}
}

	@src/lib/libbsp/arm/smdk2410/include/bsp.h

18 #i‚de‡
LIBBSP_ARM_SMDK2410_BSP_H


19 
	#LIBBSP_ARM_SMDK2410_BSP_H


	)

21 
	~<b•›ts.h
>

22 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

24 #ifde‡
__˝lu•lus


41 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/smdk2410/startup/bspreset.c

9 
	~<b•.h
>

10 
	~<b•/boŸˇrd.h
>

12 
	$b•_ª£t
()

14 #i‡
ON_SKYEYE
 == 1

15 
	#SKYEYE_MAGIC_ADDRESS
 (*(vﬁ©ûê*)(0xb0000000))

	)

17 
SKYEYE_MAGIC_ADDRESS
 = 0xff;

20 
πems_öãºu±_Àvñ
 
Àvñ
;

22 (Ë
Àvñ
;

23 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

25 
__asm__
 volatile(""

48 
	}
}

	@src/lib/libbsp/arm/smdk2410/startup/memmap.c

11 
	~<πems.h
>

12 
	~<lib˝u/mmu.h
>

17 
mmu_£˘_m≠_t
 
	gmem_m≠
[] = {

19 {0x30000000, 0x00000000, 1, 
MMU_CACHE_NONE
},

20 {0x30000000, 0x30000000, 32, 
MMU_CACHE_WTHROUGH
},

21 {0x32000000, 0x32000000, 32, 
MMU_CACHE_NONE
},

22 {0x48000000, 0x48000000, 256, 
MMU_CACHE_NONE
},

23 {0x50000000, 0x50000000, 256, 
MMU_CACHE_NONE
},

	@src/lib/libbsp/arm/stm32f4/console/console-config.c

15 
	~<πems/b•Io.h
>

17 
	~<libchù/£rül.h
>

19 
	~<b•›ts.h
>

20 
	~<b•/úq.h
>

21 
	~<b•/ußπ.h
>

22 
	~<b•/°m32f4.h
>

24 
c⁄sﬁe_tbl
 
	gC⁄sﬁe_C⁄figuøti⁄_P‹ts
 [] = {

25 #ifde‡
STM32F4_ENABLE_USART_1


27 .
sDevi˚Name
 = "/dev/ttyS0",

28 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

29 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

30 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_1
,

31 .
	gulCålP‹t2
 = 0,

32 .
	gulClock
 = 
STM32F4_USART_BAUD
,

33 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_USART1


36 #ifde‡
STM32F4_ENABLE_USART_2


38 .
	gsDevi˚Name
 = "/dev/ttyS1",

39 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

40 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

41 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_2
,

42 .
	gulCålP‹t2
 = 1,

43 .
	gulClock
 = 
STM32F4_USART_BAUD
,

44 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_USART2


47 #ifde‡
STM32F4_ENABLE_USART_3


49 .
	gsDevi˚Name
 = "/dev/ttyS2",

50 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

51 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

52 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_3
,

53 .
	gulCålP‹t2
 = 2,

54 .
	gulClock
 = 
STM32F4_USART_BAUD
,

55 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_USART3


58 #ifde‡
STM32F4_ENABLE_UART_4


60 .
	gsDevi˚Name
 = "/dev/ttyS3",

61 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

62 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

63 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_4
,

64 .
	gulCålP‹t2
 = 3,

65 .
	gulClock
 = 
STM32F4_USART_BAUD
,

66 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_UART4


69 #ifde‡
STM32F4_ENABLE_UART_5


71 .
	gsDevi˚Name
 = "/dev/ttyS4",

72 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

73 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

74 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_5
,

75 .
	gulCålP‹t2
 = 4,

76 .
	gulClock
 = 
STM32F4_USART_BAUD
,

77 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_UART5


80 #ifde‡
STM32F4_ENABLE_USART_6


82 .
	gsDevi˚Name
 = "/dev/ttyS5",

83 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

84 .
	gpDevi˚Fns
 = &
°m32f4_ußπ_‚s
,

85 .
	gulCålP‹t1
 = (
uöt32_t
Ë
STM32F4_USART_6
,

86 .
	gulCålP‹t2
 = 5,

87 .
	gulClock
 = 
STM32F4_USART_BAUD
,

88 .
	gulI¡Ve˘‹
 = 
STM32F4_IRQ_USART6


93 
	#PORT_COUNT
 \

94 ((
C⁄sﬁe_C⁄figuøti⁄_P‹ts
) \

95 / (
C⁄sﬁe_C⁄figuøti⁄_P‹ts
 [0]))

	)

97 
	gC⁄sﬁe_C⁄figuøti⁄_Cou¡
 = 
PORT_COUNT
;

99 
	$ouçut_ch¨
(
c
)

101 c⁄° 
c⁄sﬁe_‚s
 *
c⁄
 =

102 
C⁄sﬁe_C⁄figuøti⁄_P‹ts
 [
C⁄sﬁe_P‹t_Mö‹
].
pDevi˚Fns
;

104 i‡(
c
 == '\n') {

105 
c⁄
->
	`devi˚WrôePﬁÀd
((Ë
C⁄sﬁe_P‹t_Mö‹
, '\r');

107 
c⁄
->
	`devi˚WrôePﬁÀd
((Ë
C⁄sﬁe_P‹t_Mö‹
, 
c
);

108 
	}
}

110 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
ouçut_ch¨
;

112 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
NULL
;

	@src/lib/libbsp/arm/stm32f4/console/usart.c

15 
	~<libchù/£rsuµ.h
>

17 
	~<b•.h
>

18 
	~<b•/io.h
>

19 
	~<b•/rcc.h
>

20 
	~<b•/úq.h
>

21 
	~<b•/ußπ.h
>

22 
	~<b•/°m32f4.h
>

24 vﬁ©ûê
°m32f4_ußπ
 *
	$ußπ_gë_ªgs
(c⁄° 
c⁄sﬁe_tbl
 *
˘
)

26  (
°m32f4_ußπ
 *Ë
˘
->
ulCålP‹t1
;

27 
	}
}

30 
πems_ve˘‹_numbî
 
	$ußπ_gë_úq_numbî
(c⁄° 
c⁄sﬁe_tbl
 *
˘
)

32  
˘
->
ulI¡Ve˘‹
;

33 
	}
}

36 c⁄° 
°m32f4_rcc_ödex
 
	gußπ_rcc_ödex
 [] = {

37 
STM32F4_RCC_USART1
,

38 
STM32F4_RCC_USART2
,

39 
STM32F4_RCC_USART3
,

40 
STM32F4_RCC_UART4
,

41 
STM32F4_RCC_UART5
,

42 #ifde‡
STM32F4_FAMILY_F4XXXX


43 
STM32F4_RCC_USART6


47 
°m32f4_rcc_ödex
 
	$ußπ_gë_rcc_ödex
(c⁄° 
c⁄sﬁe_tbl
 *
˘
)

49  
ußπ_rcc_ödex
 [
˘
->
ulCålP‹t2
];

50 
	}
}

52 c⁄° 
uöt8_t
 
	gußπ_p˛k_ödex
 [] = { 1, 0, 0, 0, 0, 1 };

54 c⁄° 
uöt32_t
 
	gußπ_p˛k_by_ödex
 [] = {

55 
STM32F4_PCLK1
,

56 
STM32F4_PCLK2


59 
uöt32_t
 
	$ußπ_gë_p˛k
(c⁄° 
c⁄sﬁe_tbl
 *
˘
)

61  
ußπ_p˛k_by_ödex
 [
ußπ_p˛k_ödex
 [
˘
->
ulCålP‹t2
]];

62 
	}
}

64 
uöt32_t
 
	$ußπ_gë_baud
(c⁄° 
c⁄sﬁe_tbl
 *
˘
)

66  
˘
->
ulClock
;

67 
	}
}

84 
uöt32_t
 
	$ußπ_gë_bbr
(

85 vﬁ©ûê
°m32f4_ußπ
 *
ußπ
,

86 
uöt32_t
 
p˛k
,

87 
uöt32_t
 
baud


90 
uöt32_t
 
a
 = 8 * (2 - ((
ußπ
->
¸1
 & 
STM32F4_USART_CR1_OVER8
) != 0));

91 
uöt32_t
 
div_m™tisß_low
 = 
p˛k
 / (
a
 * 
baud
);

92 
uöt32_t
 
div_‰a˘i⁄_low
 = 
p˛k
 / (
baud
 - 
a
 * 
div_m™tisß_low
);

93 
uöt32_t
 
div_m™tisß_high
;

94 
uöt32_t
 
div_‰a˘i⁄_high
;

95 
uöt32_t
 
high_îr
;

96 
uöt32_t
 
low_îr
;

97 
uöt32_t
 
div_m™tisß
;

98 
uöt32_t
 
div_‰a˘i⁄
;

100 i‡(
div_‰a˘i⁄_low
 < 
a
 - 1) {

101 
div_m™tisß_high
 = 
div_‰a˘i⁄_low
;

102 
div_‰a˘i⁄_high
 = 
div_‰a˘i⁄_low
 + 1;

104 
div_m™tisß_high
 = 
div_‰a˘i⁄_low
 + 1;

105 
div_‰a˘i⁄_high
 = 0;

108 
high_îr
 = 
p˛k
 - 
baud
 * (
a
 * 
div_m™tisß_high
 + 
div_‰a˘i⁄_high
);

109 
low_îr
 = 
baud
 * (
a
 * 
div_m™tisß_low
 + 
div_‰a˘i⁄_low
Ë- 
p˛k
;

111 i‡(
low_îr
 < 
high_îr
) {

112 
div_m™tisß
 = 
div_m™tisß_low
;

113 
div_‰a˘i⁄
 = 
div_‰a˘i⁄_low
;

115 
div_m™tisß
 = 
div_m™tisß_high
;

116 
div_‰a˘i⁄
 = 
div_‰a˘i⁄_high
;

119  
	`STM32F4_USART_BBR_DIV_MANTISSA
(
div_m™tisß
)

120 | 
	`STM32F4_USART_BBR_DIV_FRACTION
(
div_‰a˘i⁄
);

121 
	}
}

123 
	$ußπ_öôülize
(
mö‹
)

125 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

126 vﬁ©ûê
°m32f4_ußπ
 *
ußπ
 = 
	`ußπ_gë_ªgs
(
˘
);

127 
uöt32_t
 
p˛k
 = 
	`ußπ_gë_p˛k
(
˘
);

128 
uöt32_t
 
baud
 = 
	`ußπ_gë_baud
(
˘
);

129 
°m32f4_rcc_ödex
 
rcc_ödex
 = 
	`ußπ_gë_rcc_ödex
(
˘
);

131 
	`°m32f4_rcc_£t_˛ock
(
rcc_ödex
, 
åue
);

133 
ußπ
->
¸1
 = 0;

134 
ußπ
->
¸2
 = 0;

135 
ußπ
->
¸3
 = 0;

136 
ußπ
->
bbr
 = 
	`ußπ_gë_bbr
(ußπ, 
p˛k
, 
baud
);

137 
ußπ
->
¸1
 = 
STM32F4_USART_CR1_UE


138 | 
STM32F4_USART_CR1_TE


139 | 
STM32F4_USART_CR1_RE
;

140 
	}
}

142 
	$ußπ_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

144 
πems_libio_›í_˛o£_¨gs_t
 *
oc
 = (πems_libio_›í_˛o£_¨gs_à*Ë
¨g
;

145 
πems_ãrmios_ây
 *
ây
 = (πems_ãrmios_ây *Ë
oc
->
i›
->
d©a1
;

146 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

147 
c⁄sﬁe_d©a
 *
cd
 = &
C⁄sﬁe_P‹t_D©a
 [
mö‹
];

149 
cd
->
ãrmios_d©a
 = 
ây
;

150 
	`πems_ãrmios_£t_öôül_baud
(
ây
, 
˘
->
ulClock
);

153 
	}
}

155 
	$ußπ_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

158 
	}
}

160 
	$ußπ_ªad_pﬁÀd
(
mö‹
)

162 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

163 vﬁ©ûê
°m32f4_ußπ
 *
ußπ
 = 
	`ußπ_gë_ªgs
(
˘
);

165 i‡((
ußπ
->
§
 & 
STM32F4_USART_SR_RXNE
) != 0) {

166  
	`STM32F4_USART_DR_GET
(
ußπ
->
dr
);

170 
	}
}

172 
	$ußπ_wrôe_pﬁÀd
(
mö‹
, 
c
)

174 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

175 vﬁ©ûê
°m32f4_ußπ
 *
ußπ
 = 
	`ußπ_gë_ªgs
(
˘
);

177 (
ußπ
->
§
 & 
STM32F4_USART_SR_TXE
) == 0) {

181 
ußπ
->
dr
 = 
	`STM32F4_USART_DR
(
c
);

182 
	}
}

184 
ssize_t
 
	$ußπ_wrôe_suµ‹t_pﬁÀd
(

185 
mö‹
,

186 c⁄° *
s
,

187 
size_t
 
n


190 
ssize_t
 
i
 = 0;

192 
i
 = 0; i < 
n
; ++i) {

193 
	`ußπ_wrôe_pﬁÀd
(
mö‹
, 
s
 [
i
]);

196  
n
;

197 
	}
}

199 
	$ußπ_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
ãrm
)

202 
	}
}

204 c⁄° 
c⁄sﬁe_‚s
 
	g°m32f4_ußπ_‚s
 = {

205 .
devi˚Probe
 = 
libchù_£rül_deÁu…_¥obe
,

206 .
	gdevi˚Fú°O≥n
 = 
ußπ_fú°_›í
,

207 .
	gdevi˚La°Clo£
 = 
ußπ_œ°_˛o£
,

208 .
	gdevi˚Ród
 = 
ußπ_ªad_pﬁÀd
,

209 .
	gdevi˚Wrôe
 = 
ußπ_wrôe_suµ‹t_pﬁÀd
,

210 .
	gdevi˚Inôülize
 = 
ußπ_öôülize
,

211 .
	gdevi˚WrôePﬁÀd
 = 
ußπ_wrôe_pﬁÀd
,

212 .
	gdevi˚SëAâribuãs
 = 
ußπ_£t_©åibuãs
,

213 .
	gdevi˚OuçutU£sI¡îru±s
 = 
Ál£


	@src/lib/libbsp/arm/stm32f4/i2c/i2c-config.c

15 
	~<b•›ts.h
>

16 
	~<b•/i2c.h
>

17 
	~<b•/úq.h
>

19 #ifde‡
STM32F4_ENABLE_I2C1


20 
°m32f4_i2c_bus_íåy
 
	g°m32f4_i2c1_íåy
 = {

21 .
ªgs
 = 
STM32F4_I2C1
,

22 .
	gödex
 = 0,

23 .
	gve˘‹
 = 
STM32F4_IRQ_I2C1_EV
,

26 
°m32f4_i2c_bus_íåy
 *c⁄° 
	g°m32f4_i2c1
 = &
°m32f4_i2c1_íåy
;

29 #ifde‡
STM32F4_ENABLE_I2C2


30 
°m32f4_i2c_bus_íåy
 
	g°m32f4_i2c2_íåy
 = {

31 .
ªgs
 = 
STM32F4_I2C2
,

32 .
	gödex
 = 1,

33 .
	gve˘‹
 = 
STM32F4_IRQ_I2C2_EV
,

36 
°m32f4_i2c_bus_íåy
 *c⁄° 
	g°m32f4_i2c2
 = &
°m32f4_i2c2_íåy
;

	@src/lib/libbsp/arm/stm32f4/i2c/i2c.c

20 
	~<b•.h
>

21 
	~<b•/i2c.h
>

22 
	~<b•/rcc.h
>

23 
	~<b•/úq.h
>

24 
	~<b•/úq-gíîic.h
>

25 
	~<as£π.h
>

27 
	#RTEMS_STATUS_CHECKS_USE_PRINTK


	)

29 
	~<πems/°©us-checks.h
>

31 
	#STM32F4_I2C_INITIAL_BITRATE
 100000

	)

33 
	#I2C_RW_BIT
 0x1

	)

35 
°m32f4_rcc_ödex
 
	gi2c_rcc_ödex
 [] = {

36 
STM32F4_RCC_I2C1
,

37 
STM32F4_RCC_I2C2
,

40 
°m32f4_rcc_ödex
 
	$i2c_gë_rcc_ödex
(
°m32f4_i2c_bus_íåy
 *
e
)

42  
i2c_rcc_ödex
 [
e
->
ödex
];

43 
	}
}

45 
uöt32_t
 
	$i2c_gë_p˛k
(
°m32f4_i2c_bus_íåy
 *
e
)

47  
STM32F4_PCLK1
;

48 
	}
}

50 
πems_°©us_code
 
	$°m32f4_i2c_£t_bôøã
(

51 
°m32f4_i2c_bus_íåy
 *
e
,

52 
uöt32_t
 
br


55 vﬁ©ûê
°m32f4_i2c
 *
ªgs
 = 
e
->regs;

56 
uöt32_t
 
c¸
;

57 
uöt32_t
 
åi£
;

58 
uöt32_t
 
p˛k
 = 
	`i2c_gë_p˛k
(
e
);

61 if((
ªgs
->
¸1
 & 
STM32F4_I2C_CR1_PE
) != 0)

63  
RTEMS_RESOURCE_IN_USE
;

67 
c¸
 = 
ªgs
->ccr;

68 
åi£
 = 
ªgs
->trise;

70 if(
br
 <= 100000)

72 
uöt32_t
 
c¸_vÆ
 = 
p˛k
 / (2 * 
br
);

74 
uöt32_t
 
åi£_vÆ
 = 
p˛k
 / 1000000 + 1;

75 
åi£
 = 
	`STM32F4_I2C_TRISE_SET
—ri£, 
åi£_vÆ
);

77 if(
c¸_vÆ
 > 
STM32F4_I2C_CCR_CCR_MAX
)

79  
RTEMS_INVALID_NUMBER
;

83 
c¸
 &~
STM32F4_I2C_CCR_FS
;

84 
c¸
 = 
	`STM32F4_I2C_CCR_CCR_SET
(c¸, 
c¸_vÆ
);

89  
RTEMS_NOT_IMPLEMENTED
;

92 
ªgs
->
c¸
 = ccr;

93 
ªgs
->
åi£
 =Årise;

95  
RTEMS_SUCCESSFUL
;

96 
	}
}

98 
	$°m32f4_i2c_h™dÀr
(*
¨g
)

102 
°m32f4_i2c_bus_íåy
 *
e
 = 
¨g
;

103 vﬁ©ûê
°m32f4_i2c
 *
ªgs
 = 
e
->regs;

104 
uöt32_t
 
§1
 = 
ªgs
->sr1;

105 
uöt8_t
 *
d©a
 = 
e
->data;

106 
uöt8_t
 *
œ°
 = 
e
->last;

107 
boﬁ
 
ªad
 = 
e
->read;

108 
boﬁ
 
wake_èsk
 = 
Ál£
;

109 
uöt32_t
 
¸1
;

111 if(
§1
 & 
STM32F4_I2C_SR1_SB
) {

113 
ªgs
->
dr
 = 
e
->
addr_wôh_rw
;

116 if(
ªad
) {

117 
size_t
 
Àn
 = 
e
->len;

119 if(
Àn
 == 1) {

121 if(
§1
 & 
STM32F4_I2C_SR1_ADDR
) {

122 
¸1
 = 
ªgs
->cr1;

123 
¸1
 &~
STM32F4_I2C_CR1_ACK
;

124 
ªgs
->
¸1
 = cr1;

127 
ªgs
->
§2
;

129 
¸1
 = 
ªgs
->cr1;

130 
¸1
 |
STM32F4_I2C_CR1_STOP
;

131 
ªgs
->
¸1
 = cr1;

132 } if(
§1
 & 
STM32F4_I2C_SR1_RxNE
) {

133 *
d©a
 = 
ªgs
->
dr
;

134 
wake_èsk
 = 
åue
;

136 } i‡(
Àn
 == 2) {

138 if(
§1
 & 
STM32F4_I2C_SR1_ADDR
) {

140 
ªgs
->
§2
;

142 
¸1
 = 
ªgs
->cr1;

143 
¸1
 &~
STM32F4_I2C_CR1_ACK
;

144 
ªgs
->
¸1
 = cr1;

145 } if(
§1
 & 
STM32F4_I2C_SR1_BTF
) {

146 
¸1
 = 
ªgs
->cr1;

147 
¸1
 |
STM32F4_I2C_CR1_STOP
;

148 
ªgs
->
¸1
 = cr1;

150 *
d©a
 = 
ªgs
->
dr
;

151 ++
d©a
;

152 *
d©a
 = 
ªgs
->
dr
;

153 
wake_èsk
 = 
åue
;

157 if(
§1
 & 
STM32F4_I2C_SR1_ADDR
) {

159 
ªgs
->
§2
;

160 } if(
§1
 & 
STM32F4_I2C_SR1_BTF
 && 
d©a
 =
œ°
 - 2) {

161 
¸1
 = 
ªgs
->cr1;

162 
¸1
 &~
STM32F4_I2C_CR1_ACK
;

163 
ªgs
->
¸1
 = cr1;

165 *
d©a
 = 
ªgs
->
dr
;

166 ++
d©a
;

168 
¸1
 = 
ªgs
->cr1;

169 
¸1
 |
STM32F4_I2C_CR1_STOP
;

170 
ªgs
->
¸1
 = cr1;

172 *
d©a
 = 
ªgs
->
dr
;

173 ++
d©a
;

174 } if((
§1
 & 
STM32F4_I2C_SR1_RxNE
Ë&& (
d©a
 !
œ°
 - 2)) {

175 *
d©a
 = 
ªgs
->
dr
;

177 if(
d©a
 =
œ°
) {

178 
wake_èsk
 = 
åue
;

180 ++
d©a
;

185 if(
§1
 & 
STM32F4_I2C_SR1_ADDR
) {

187 
ªgs
->
§2
;

190 if((
§1
 & (
STM32F4_I2C_SR1_ADDR
 | 
STM32F4_I2C_SR1_TxE
)Ë&& (
d©a
 <
œ°
)) {

191 
ªgs
->
dr
 = *
d©a
;

192 ++
d©a
;

193 } if(
§1
 & 
STM32F4_I2C_SR1_BTF
) {

194 
uöt32_t
 
¸1
 = 
ªgs
->cr1;

195 
¸1
 |
STM32F4_I2C_CR1_STOP
;

196 
ªgs
->
¸1
 = cr1;

197 
wake_èsk
 = 
åue
;

201 
e
->
d©a
 = data;

203 if(
wake_èsk
) {

204 
	`b•_öãºu±_ve˘‹_dißbÀ
(
e
->
ve˘‹
);

205 
	`πems_evít_å™sõ¡_£nd
(
e
->
èsk_id
);

207 
	}
}

209 
πems_°©us_code
 
	$i2c_waô_d⁄e
(
°m32f4_i2c_bus_íåy
 *
e
)

211 
	`b•_öãºu±_ve˘‹_íabÀ
(
e
->
ve˘‹
);

212 
e
->
èsk_id
 = 
	`πems_èsk_£lf
();

213  
	`πems_evít_å™sõ¡_ª˚ive
(
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
);

214 
	}
}

216 
πems_°©us_code
 
	$°m32f4_i2c_öô
(
°m32f4_i2c_bus_íåy
 *
e
)

218 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

219 vﬁ©ûê
°m32f4_i2c
 *
ªgs
 = 
e
->regs;

220 
°m32f4_rcc_ödex
 
rcc_ödex
 = 
	`i2c_gë_rcc_ödex
(
e
);

221 
uöt32_t
 
p˛k
 = 
	`i2c_gë_p˛k
(
e
);

222 
uöt32_t
 
¸1
 = 0;

223 
uöt32_t
 
¸2
 = 0;

225 
	`as£π
(
p˛k
 >= 2000000);

228 
sc
 = 
	`πems_£m≠h‹e_¸óã
 (

229 
	`πems_buûd_«me
 ('I', '2', 'C', '1' + 
e
->
ödex
),

231 
RTEMS_BINARY_SEMAPHORE
 | 
RTEMS_PRIORITY
 | 
RTEMS_INHERIT_PRIORITY
,

233 &
e
->
muãx


235 
	`RTEMS_CHECK_SC
(
sc
, "create mutex");

238 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

239 
e
->
ve˘‹
,

241 
RTEMS_INTERRUPT_UNIQUE
,

242 
°m32f4_i2c_h™dÀr
,

243 
e


245 
	`RTEMS_CHECK_SC
(
sc
, "install interrupt handler");

246 
	`b•_öãºu±_ve˘‹_dißbÀ
(
e
->
ve˘‹
);

249 
	`°m32f4_rcc_£t_˛ock
(
rcc_ödex
, 
åue
);

252 
sc
 = 
	`°m32f4_i2c_£t_bôøã
(
e
, 
STM32F4_I2C_INITIAL_BITRATE
);

253 
	`RTEMS_CHECK_SC
(
sc
, "set bitrate");

256 
¸2
 = 
ªgs
->cr2;

257 
¸2
 = 
	`STM32F4_I2C_CR2_FREQ_SET
(¸2, 
p˛k
 / 1000000);

258 
¸2
 |
STM32F4_I2C_CR2_ITEVTEN
;

259 
¸2
 |
STM32F4_I2C_CR2_ITBUFEN
;

260 
ªgs
->
¸2
 = cr2;

262 
¸1
 = 
ªgs
->cr1;

263 
¸1
 |
STM32F4_I2C_CR1_PE
;

264 
ªgs
->
¸1
 = cr1;

266  
RTEMS_SUCCESSFUL
;

267 
	}
}

269 
πems_°©us_code
 
	$°m32f4_i2c_¥o˚ss_mesßge
(

270 
°m32f4_i2c_bus_íåy
 *
e
,

271 
°m32f4_i2c_mesßge
 *
msg


274 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

275 
πems_°©us_code
 
sc_ªtu∫
 = 
RTEMS_SUCCESSFUL
;

276 vﬁ©ûê
°m32f4_i2c
 *
ªgs
 = 
e
->regs;

277 
uöt16_t
 
max_7_bô_addªss
 = (1 << 7) - 1;

278 
uöt32_t
 
¸1
 = 
ªgs
->cr1;

280 if(
msg
->
addr
 > 
max_7_bô_addªss
) {

281  
RTEMS_NOT_IMPLEMENTED
;

284 if(
msg
->
Àn
 == 0) {

285  
RTEMS_INVALID_SIZE
;

288 
sc
 = 
	`πems_£m≠h‹e_obèö
(
e
->
muãx
, 
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
);

289 
	`RTEMS_CHECK_SC
(
sc
, "obtaining mutex");

291 
e
->
d©a
 = 
msg
->
buf
;

292 
e
->
œ°
 = 
msg
->
buf
 + msg->
Àn
 - 1;

293 
e
->
Àn
 = 
msg
->len;

295 
e
->
addr_wôh_rw
 = 
msg
->
addr
 << 1;

296 if(
msg
->
ªad
) {

297 
e
->
addr_wôh_rw
 |
I2C_RW_BIT
;

299 
e
->
ªad
 = 
msg
->read;

302 if(
¸1
 & 
STM32F4_I2C_CR1_STOP
) {

303  
RTEMS_IO_ERROR
;

307 
¸1
 = 
ªgs
->cr1;

308 if(
e
->
Àn
 == 2) {

309 
¸1
 |
STM32F4_I2C_CR1_POS
;

311 
¸1
 &~
STM32F4_I2C_CR1_POS
;

313 
¸1
 |
STM32F4_I2C_CR1_ACK
;

314 
¸1
 |
STM32F4_I2C_CR1_START
;

315 
ªgs
->
¸1
 = cr1;

318 
sc
 = 
	`i2c_waô_d⁄e
(
e
);

320 if(
sc
 !
RTEMS_SUCCESSFUL
) {

321 
sc_ªtu∫
 = 
sc
;

324 
sc
 = 
	`πems_£m≠h‹e_ªÀa£
(
e
->
muãx
);

325 
	`RTEMS_CHECK_SC
(
sc
, "releasing mutex");

327  
sc_ªtu∫
;

328 
	}
}

	@src/lib/libbsp/arm/stm32f4/include/bsp.h

28 #i‚de‡
LIBBSP_ARM_STM32F4_BSP_H


29 
	#LIBBSP_ARM_STM32F4_BSP_H


	)

31 
	~<b•›ts.h
>

32 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

34 
	~<πems.h
>

35 
	~<πems/c⁄sﬁe.h
>

36 
	~<πems/˛ockdrv.h
>

38 #ifde‡
__˝lu•lus


42 
	#BSP_FEATURE_IRQ_EXTENSION


	)

44 
	#BSP_ARMV7M_IRQ_PRIORITY_DEFAULT
 (13 << 4)

	)

46 
	#BSP_ARMV7M_SYSTICK_PRIORITY
 (14 << 4)

	)

48 
	#BSP_ARMV7M_SYSTICK_FREQUENCY
 
STM32F4_HCLK


	)

52 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/stm32f4/include/i2c.h

26 #i‚de‡
LIBBSP_ARM_STM32F4_I2C_H


27 
	#LIBBSP_ARM_STM32F4_I2C_H


	)

29 
	~<πems.h
>

31 
	~<b•/io.h
>

32 
	~<b•/°m32f4.h
>

34 #ifde‡
__˝lu•lus


50 
uöt16_t
 
addr
;

52 
boﬁ
 
ªad
;

54 
size_t
 
Àn
;

56 
uöt8_t
 *
buf
;

57 } 
	t°m32f4_i2c_mesßge
;

60 vﬁ©ûê
°m32f4_i2c
 *
ªgs
;

61 
size_t
 
ödex
;

62 
πems_ve˘‹_numbî
 
ve˘‹
;

63 
πems_id
 
muãx
;

64 
πems_id
 
èsk_id
;

65 
uöt8_t
 *
d©a
;

66 
uöt8_t
 *
œ°
;

67 
size_t
 
Àn
;

68 
boﬁ
 
ªad
;

69 
uöt8_t
 
addr_wôh_rw
;

70 } 
	t°m32f4_i2c_bus_íåy
;

73 
πems_°©us_code
 
°m32f4_i2c_öô
(
°m32f4_i2c_bus_íåy
 *
e
);

76 
πems_°©us_code
 
°m32f4_i2c_¥o˚ss_mesßge
(

77 
°m32f4_i2c_bus_íåy
 *
e
,

78 
°m32f4_i2c_mesßge
 *
msg


82 
πems_°©us_code
 
°m32f4_i2c_£t_bôøã
(

83 
°m32f4_i2c_bus_íåy
 *
e
,

84 
uöt32_t
 
br


87 
°m32f4_i2c_bus_íåy
 *c⁄° 
°m32f4_i2c1
;

88 
°m32f4_i2c_bus_íåy
 *c⁄° 
°m32f4_i2c2
;

92 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/stm32f4/include/io.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_IO_H


22 
	#LIBBSP_ARM_STM32F4_IO_H


	)

24 
	~<°dboﬁ.h
>

25 
	~<°döt.h
>

26 
	~<b•›ts.h
>

28 #ifde‡
__˝lu•lus


39 
	#STM32F4_GPIO_PIN
(
p‹t
, 
ödex
Ë(((’‹tË<< 4Ë| (ödex)Ë& 0xff)

	)

41 
	#STM32F4_GPIO_PORT_OF_PIN
(
pö
Ë((’öË>> 4Ë& 0xf)

	)

43 
	#STM32F4_GPIO_INDEX_OF_PIN
(
pö
Ë(’öË& 0xf)

	)

45 #ifde‡
STM32F4_FAMILY_F4XXXX


53 
STM32F4_GPIO_MODE_INPUT
,

54 
STM32F4_GPIO_MODE_OUTPUT
,

55 
STM32F4_GPIO_MODE_AF
,

56 
STM32F4_GPIO_MODE_ANALOG


57 } 
	t°m32f4_gpio_mode
;

60 
STM32F4_GPIO_OTYPE_PUSH_PULL
,

61 
STM32F4_GPIO_OTYPE_OPEN_DRAIN


62 } 
	t°m32f4_gpio_Ÿy≥
;

65 
STM32F4_GPIO_OSPEED_2_MHZ
,

66 
STM32F4_GPIO_OSPEED_25_MHZ
,

67 
STM32F4_GPIO_OSPEED_50_MHZ
,

68 
STM32F4_GPIO_OSPEED_100_MHZ


69 } 
	t°m32f4_gpio_o•ìd
;

72 
STM32F4_GPIO_NO_PULL
,

73 
STM32F4_GPIO_PULL_UP
,

74 
STM32F4_GPIO_PULL_DOWN


75 } 
	t°m32f4_gpio_puŒ
;

78 
STM32F4_GPIO_AF_SYSTEM
 = 0,

79 
STM32F4_GPIO_AF_TIM1
 = 1,

80 
STM32F4_GPIO_AF_TIM2
 = 1,

81 
STM32F4_GPIO_AF_TIM3
 = 2,

82 
STM32F4_GPIO_AF_TIM4
 = 2,

83 
STM32F4_GPIO_AF_TIM5
 = 2,

84 
STM32F4_GPIO_AF_TIM8
 = 3,

85 
STM32F4_GPIO_AF_TIM9
 = 3,

86 
STM32F4_GPIO_AF_TIM10
 = 3,

87 
STM32F4_GPIO_AF_TIM11
 = 3,

88 
STM32F4_GPIO_AF_I2C1
 = 4,

89 
STM32F4_GPIO_AF_I2C2
 = 4,

90 
STM32F4_GPIO_AF_I2C3
 = 4,

91 
STM32F4_GPIO_AF_SPI1
 = 5,

92 
STM32F4_GPIO_AF_SPI2
 = 5,

93 
STM32F4_GPIO_AF_SPI3
 = 6,

94 
STM32F4_GPIO_AF_USART1
 = 7,

95 
STM32F4_GPIO_AF_USART2
 = 7,

96 
STM32F4_GPIO_AF_USART3
 = 7,

97 
STM32F4_GPIO_AF_UART4
 = 8,

98 
STM32F4_GPIO_AF_UART5
 = 8,

99 
STM32F4_GPIO_AF_USART6
 = 8,

100 
STM32F4_GPIO_AF_CAN1
 = 9,

101 
STM32F4_GPIO_AF_CAN2
 = 9,

102 
STM32F4_GPIO_AF_TIM12
 = 9,

103 
STM32F4_GPIO_AF_TIM13
 = 9,

104 
STM32F4_GPIO_AF_TIM14
 = 9,

105 
STM32F4_GPIO_AF_OTG_FS
 = 10,

106 
STM32F4_GPIO_AF_OTG_HS
 = 10,

107 
STM32F4_GPIO_AF_ETH
 = 11,

108 
STM32F4_GPIO_AF_FSMC
 = 12,

109 
STM32F4_GPIO_AF_OTG_HS_FS
 = 12,

110 
STM32F4_GPIO_AF_SDIO
 = 12,

111 
STM32F4_GPIO_AF_DCMI
 = 13,

112 
STM32F4_GPIO_AF_EVENTOUT
 = 15

113 } 
	t°m32f4_gpio_af
;

117 
uöt32_t
 
pö_fú°
 : 8;

118 
uöt32_t
 
pö_œ°
 : 8;

119 
uöt32_t
 
mode
 : 2;

120 
uöt32_t
 
Ÿy≥
 : 1;

121 
uöt32_t
 
o•ìd
 : 2;

122 
uöt32_t
 
pupd
 : 2;

123 
uöt32_t
 
ouçut
 : 1;

124 
uöt32_t
 
af
 : 4;

125 
uöt32_t
 
ª£rved
 : 4;

126 } 
fõlds
;

128 
uöt32_t
 
vÆue
;

129 } 
	t°m32f4_gpio_c⁄fig
;

131 
	#STM32F4_GPIO_CONFIG_TERMINAL
 \

132 { { 0xff, 0xff, 0x3, 0x1, 0x3, 0x3, 0x1, 0xf, 0x‡} }

	)

137 #ifde‡
STM32F4_FAMILY_F10XXX


145 
STM32F4_GPIO_MODE_INPUT
,

146 
STM32F4_GPIO_MODE_OUTPUT_10MHz
,

147 
STM32F4_GPIO_MODE_OUTPUT_2MHz
,

148 
STM32F4_GPIO_MODE_OUTPUT_50MHz


149 } 
	t°m32f4_gpio_mode
;

152 
STM32F4_GPIO_CNF_IN_ANALOG
 = 0,

153 
STM32F4_GPIO_CNF_IN_FLOATING
 = 1,

154 
STM32F4_GPIO_CNF_IN_PULL_UPDOWN
 = 2,

156 
STM32F4_GPIO_CNF_OUT_GPIO_PP
 = 0,

157 
STM32F4_GPIO_CNF_OUT_GPIO_OD
 = 1,

158 
STM32F4_GPIO_CNF_OUT_AF_PP
 = 2,

159 
STM32F4_GPIO_CNF_OUT_AF_OD
 = 3,

160 } 
	t°m32f4_gpio_˙f
;

163 
STM32F4_GPIO_REMAP_DONT_CHANGE
,

164 
STM32F4_GPIO_REMAP_SPI1_0
,

165 
STM32F4_GPIO_REMAP_SPI1_1
,

166 
STM32F4_GPIO_REMAP_I2C1_0
,

167 
STM32F4_GPIO_REMAP_I2C1_1
,

168 
STM32F4_GPIO_REMAP_USART1_0
,

169 
STM32F4_GPIO_REMAP_USART1_1
,

170 
STM32F4_GPIO_REMAP_USART2_0
,

171 
STM32F4_GPIO_REMAP_USART2_1
,

172 
STM32F4_GPIO_REMAP_USART3_0
,

173 
STM32F4_GPIO_REMAP_USART3_1
,

174 
STM32F4_GPIO_REMAP_USART3_3
,

175 
STM32F4_GPIO_REMAP_TIM1_0
,

176 
STM32F4_GPIO_REMAP_TIM1_1
,

177 
STM32F4_GPIO_REMAP_TIM1_3
,

178 
STM32F4_GPIO_REMAP_TIM2_0
,

179 
STM32F4_GPIO_REMAP_TIM2_1
,

180 
STM32F4_GPIO_REMAP_TIM2_2
,

181 
STM32F4_GPIO_REMAP_TIM2_3
,

182 
STM32F4_GPIO_REMAP_TIM3_0
,

183 
STM32F4_GPIO_REMAP_TIM3_2
,

184 
STM32F4_GPIO_REMAP_TIM3_3
,

185 
STM32F4_GPIO_REMAP_TIM4_0
,

186 
STM32F4_GPIO_REMAP_TIM4_1
,

187 
STM32F4_GPIO_REMAP_CAN1_0
,

188 
STM32F4_GPIO_REMAP_CAN1_2
,

189 
STM32F4_GPIO_REMAP_CAN1_3
,

190 
STM32F4_GPIO_REMAP_PD01_0
,

191 
STM32F4_GPIO_REMAP_PD01_1
,

192 
STM32F4_GPIO_REMAP_TIM5CH4_0
,

193 
STM32F4_GPIO_REMAP_TIM5CH4_1
,

194 
STM32F4_GPIO_REMAP_ADC1_ETRGINJ_0
,

195 
STM32F4_GPIO_REMAP_ADC1_ETRGINJ_1
,

196 
STM32F4_GPIO_REMAP_ADC1_ETRGREG_0
,

197 
STM32F4_GPIO_REMAP_ADC1_ETRGREG_1
,

198 
STM32F4_GPIO_REMAP_ADC2_ETRGINJ_0
,

199 
STM32F4_GPIO_REMAP_ADC2_ETRGINJ_1
,

200 
STM32F4_GPIO_REMAP_ADC2_ETRGREG_0
,

201 
STM32F4_GPIO_REMAP_ADC2_ETRGREG_1
,

202 
STM32F4_GPIO_REMAP_ETH_0
,

203 
STM32F4_GPIO_REMAP_ETH_1
,

204 
STM32F4_GPIO_REMAP_CAN2_0
,

205 
STM32F4_GPIO_REMAP_CAN2_1
,

206 
STM32F4_GPIO_REMAP_MII_RMII_0
,

207 
STM32F4_GPIO_REMAP_MII_RMII_1
,

208 
STM32F4_GPIO_REMAP_SWJ_0
,

209 
STM32F4_GPIO_REMAP_SWJ_1
,

210 
STM32F4_GPIO_REMAP_SWJ_2
,

211 
STM32F4_GPIO_REMAP_SWJ_4
,

212 
STM32F4_GPIO_REMAP_SPI3_0
,

213 
STM32F4_GPIO_REMAP_SPI3_1
,

214 
STM32F4_GPIO_REMAP_TIM2ITR1_0
,

215 
STM32F4_GPIO_REMAP_TIM2ITR1_1
,

216 
STM32F4_GPIO_REMAP_PTP_PPS_0
,

217 
STM32F4_GPIO_REMAP_PTP_PPS_1
,

218 
STM32F4_GPIO_REMAP_TIM15_0
,

219 
STM32F4_GPIO_REMAP_TIM15_1
,

220 
STM32F4_GPIO_REMAP_TIM16_0
,

221 
STM32F4_GPIO_REMAP_TIM16_1
,

222 
STM32F4_GPIO_REMAP_TIM17_0
,

223 
STM32F4_GPIO_REMAP_TIM17_1
,

224 
STM32F4_GPIO_REMAP_CEC_0
,

225 
STM32F4_GPIO_REMAP_CEC_1
,

226 
STM32F4_GPIO_REMAP_TIM1_DMA_0
,

227 
STM32F4_GPIO_REMAP_TIM1_DMA_1
,

228 
STM32F4_GPIO_REMAP_TIM9_0
,

229 
STM32F4_GPIO_REMAP_TIM9_1
,

230 
STM32F4_GPIO_REMAP_TIM10_0
,

231 
STM32F4_GPIO_REMAP_TIM10_1
,

232 
STM32F4_GPIO_REMAP_TIM11_0
,

233 
STM32F4_GPIO_REMAP_TIM11_1
,

234 
STM32F4_GPIO_REMAP_TIM13_0
,

235 
STM32F4_GPIO_REMAP_TIM13_1
,

236 
STM32F4_GPIO_REMAP_TIM14_0
,

237 
STM32F4_GPIO_REMAP_TIM14_1
,

238 
STM32F4_GPIO_REMAP_FSMC_0
,

239 
STM32F4_GPIO_REMAP_FSMC_1
,

240 
STM32F4_GPIO_REMAP_TIM67_DAC_DMA_0
,

241 
STM32F4_GPIO_REMAP_TIM67_DAC_DMA_1
,

242 
STM32F4_GPIO_REMAP_TIM12_0
,

243 
STM32F4_GPIO_REMAP_TIM12_1
,

244 
STM32F4_GPIO_REMAP_MISC_0
,

245 
STM32F4_GPIO_REMAP_MISC_1
,

246 } 
	t°m32f4_gpio_ªm≠
;

250 
uöt32_t
 
pö_fú°
 : 8;

251 
uöt32_t
 
pö_œ°
 : 8;

252 
uöt32_t
 
mode
 : 2;

253 
uöt32_t
 
˙f
 : 2;

254 
uöt32_t
 
ouçut
 : 1;

255 
uöt32_t
 
ªm≠
 : 8;

256 
uöt32_t
 
ª£rved
 : 3;

257 } 
fõlds
;

259 
uöt32_t
 
vÆue
;

260 } 
	t°m32f4_gpio_c⁄fig
;

262 
	#STM32F4_GPIO_CONFIG_TERMINAL
 \

263 { { 0xff, 0xff, 0x3, 0x3, 0x1, 0xff, 0x7 } }

	)

269 c⁄° 
°m32f4_gpio_c⁄fig
 
°m32f4_°¨t_c⁄fig_gpio
 [];

271 
°m32f4_gpio_£t_˛ock
(
pö
, 
boﬁ
 
£t
);

273 
°m32f4_gpio_£t_c⁄fig
(c⁄° 
°m32f4_gpio_c⁄fig
 *
c⁄fig
);

279 
°m32f4_gpio_£t_c⁄fig_¨øy
(c⁄° 
°m32f4_gpio_c⁄fig
 *
c⁄figs
);

281 
°m32f4_gpio_£t_ouçut
(
pö
, 
boﬁ
 
£t
);

283 
boﬁ
 
°m32f4_gpio_gë_öput
(
pö
);

285 #ifde‡
STM32F4_FAMILY_F4XXXX


292 
	#STM32F4_PIN_USART
(
p‹t
, 
idx
, 
Ætfunc
) \

295 .
pö_fú°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

296 .
pö_œ°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

297 .
mode
 = 
STM32F4_GPIO_MODE_AF
, \

298 .
Ÿy≥
 = 
STM32F4_GPIO_OTYPE_PUSH_PULL
, \

299 .
o•ìd
 = 
STM32F4_GPIO_OSPEED_2_MHZ
, \

300 .
pupd
 = 
STM32F4_GPIO_PULL_UP
, \

301 .
af
 = 
Ætfunc
 \

303 }

	)

305 
	#STM32F4_PIN_USART1_TX_PA9
 
	`STM32F4_PIN_USART
(0, 9, 
STM32F4_GPIO_AF_USART1
)

	)

306 
	#STM32F4_PIN_USART1_TX_PB6
 
	`STM32F4_PIN_USART
(1, 6, 
STM32F4_GPIO_AF_USART1
)

	)

307 
	#STM32F4_PIN_USART1_RX_PA10
 
	`STM32F4_PIN_USART
(0, 10, 
STM32F4_GPIO_AF_USART1
)

	)

308 
	#STM32F4_PIN_USART1_RX_PB7
 
	`STM32F4_PIN_USART
(1, 7, 
STM32F4_GPIO_AF_USART1
)

	)

310 
	#STM32F4_PIN_USART2_TX_PA2
 
	`STM32F4_PIN_USART
(0, 2, 
STM32F4_GPIO_AF_USART2
)

	)

311 
	#STM32F4_PIN_USART2_TX_PD5
 
	`STM32F4_PIN_USART
(3, 5, 
STM32F4_GPIO_AF_USART2
)

	)

312 
	#STM32F4_PIN_USART2_RX_PA3
 
	`STM32F4_PIN_USART
(0, 3, 
STM32F4_GPIO_AF_USART2
)

	)

313 
	#STM32F4_PIN_USART2_RX_PD6
 
	`STM32F4_PIN_USART
(3, 6, 
STM32F4_GPIO_AF_USART2
)

	)

315 
	#STM32F4_PIN_USART3_TX_PC10
 
	`STM32F4_PIN_USART
(2, 10, 
STM32F4_GPIO_AF_USART3
)

	)

316 
	#STM32F4_PIN_USART3_TX_PD8
 
	`STM32F4_PIN_USART
(3, 8, 
STM32F4_GPIO_AF_USART3
)

	)

317 
	#STM32F4_PIN_USART3_RX_PC11
 
	`STM32F4_PIN_USART
(2, 11, 
STM32F4_GPIO_AF_USART3
)

	)

318 
	#STM32F4_PIN_USART3_RX_PD9
 
	`STM32F4_PIN_USART
(3, 9, 
STM32F4_GPIO_AF_USART3
)

	)

320 
	#STM32F4_PIN_UART4_TX_PA0
 
	`STM32F4_PIN_USART
(0, 0, 
STM32F4_GPIO_AF_UART4
)

	)

321 
	#STM32F4_PIN_UART4_TX_PC10
 
	`STM32F4_PIN_USART
(2, 10, 
STM32F4_GPIO_AF_UART4
)

	)

322 
	#STM32F4_PIN_UART4_RX_PA1
 
	`STM32F4_PIN_USART
(0, 1, 
STM32F4_GPIO_AF_UART4
)

	)

323 
	#STM32F4_PIN_UART4_RX_PC11
 
	`STM32F4_PIN_USART
(2, 11, 
STM32F4_GPIO_AF_UART4
)

	)

325 
	#STM32F4_PIN_UART5_TX_PC12
 
	`STM32F4_PIN_USART
(2, 12, 
STM32F4_GPIO_AF_UART5
)

	)

326 
	#STM32F4_PIN_UART5_RX_PD2
 
	`STM32F4_PIN_USART
(3, 2, 
STM32F4_GPIO_AF_UART5
)

	)

328 
	#STM32F4_PIN_USART6_TX_PC6
 
	`STM32F4_PIN_USART
(2, 6, 
STM32F4_GPIO_AF_USART6
)

	)

329 
	#STM32F4_PIN_USART6_RX_PC7
 
	`STM32F4_PIN_USART
(2, 7, 
STM32F4_GPIO_AF_USART6
)

	)

334 #ifde‡
STM32F4_FAMILY_F10XXX


341 
	#STM32F4_PIN_USART_TX
(
p‹t
, 
idx
, 
ªm≠vÆue
) \

344 .
pö_fú°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

345 .
pö_œ°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

346 .
mode
 = 
STM32F4_GPIO_MODE_OUTPUT_2MHz
, \

347 .
˙f
 = 
STM32F4_GPIO_CNF_OUT_AF_PP
, \

348 .
ouçut
 = 0, \

349 .
ªm≠
 = 
ªm≠vÆue
 \

351 }

	)

353 
	#STM32F4_PIN_USART_RX
(
p‹t
, 
idx
, 
ªm≠vÆue
) \

356 .
pö_fú°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

357 .
pö_œ°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

358 .
mode
 = 
STM32F4_GPIO_MODE_INPUT
, \

359 .
˙f
 = 
STM32F4_GPIO_CNF_IN_FLOATING
, \

360 .
ouçut
 = 0, \

361 .
ªm≠
 = 
ªm≠vÆue
 \

363 }

	)

365 
	#STM32F4_PIN_USART1_TX_MAP_0
 
	`STM32F4_PIN_USART_TX
(0, 9, 
STM32F4_GPIO_REMAP_USART1_0
)

	)

366 
	#STM32F4_PIN_USART1_RX_MAP_0
 
	`STM32F4_PIN_USART_RX
(0, 10, 
STM32F4_GPIO_REMAP_USART1_0
)

	)

367 
	#STM32F4_PIN_USART1_TX_MAP_1
 
	`STM32F4_PIN_USART_TX
(1, 6, 
STM32F4_GPIO_REMAP_USART1_1
)

	)

368 
	#STM32F4_PIN_USART1_RX_MAP_1
 
	`STM32F4_PIN_USART_RX
(1, 7, 
STM32F4_GPIO_REMAP_USART1_1
)

	)

370 
	#STM32F4_PIN_USART2_TX_MAP_0
 
	`STM32F4_PIN_USART_TX
(0, 2, 
STM32F4_GPIO_REMAP_USART2_0
)

	)

371 
	#STM32F4_PIN_USART2_RX_MAP_0
 
	`STM32F4_PIN_USART_RX
(0, 3, 
STM32F4_GPIO_REMAP_USART2_0
)

	)

372 
	#STM32F4_PIN_USART2_TX_MAP_1
 
	`STM32F4_PIN_USART_TX
(3, 5, 
STM32F4_GPIO_REMAP_USART2_1
)

	)

373 
	#STM32F4_PIN_USART2_RX_MAP_1
 
	`STM32F4_PIN_USART_RX
(3, 6, 
STM32F4_GPIO_REMAP_USART2_1
)

	)

375 
	#STM32F4_PIN_USART3_TX_MAP_0
 
	`STM32F4_PIN_USART_TX
(1, 10, 
STM32F4_GPIO_REMAP_USART3_0
)

	)

376 
	#STM32F4_PIN_USART3_RX_MAP_0
 
	`STM32F4_PIN_USART_RX
(1, 11, 
STM32F4_GPIO_REMAP_USART3_0
)

	)

377 
	#STM32F4_PIN_USART3_TX_MAP_1
 
	`STM32F4_PIN_USART_TX
(2, 10, 
STM32F4_GPIO_REMAP_USART3_1
)

	)

378 
	#STM32F4_PIN_USART3_RX_MAP_1
 
	`STM32F4_PIN_USART_RX
(2, 11, 
STM32F4_GPIO_REMAP_USART3_1
)

	)

379 
	#STM32F4_PIN_USART3_TX_MAP_3
 
	`STM32F4_PIN_USART_TX
(3, 8, 
STM32F4_GPIO_REMAP_USART3_3
)

	)

380 
	#STM32F4_PIN_USART3_RX_MAP_3
 
	`STM32F4_PIN_USART_RX
(3, 9, 
STM32F4_GPIO_REMAP_USART3_3
)

	)

382 
	#STM32F4_PIN_UART4_TX
 
	`STM32F4_PIN_USART_TX
(2, 10, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

383 
	#STM32F4_PIN_UART4_RX
 
	`STM32F4_PIN_USART_RX
(2, 11, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

385 
	#STM32F4_PIN_UART5_TX
 
	`STM32F4_PIN_USART_TX
(2, 12, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

386 
	#STM32F4_PIN_UART5_RX
 
	`STM32F4_PIN_USART_RX
(3, 2, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

388 
	#STM32F4_PIN_I2C
(
p‹t
, 
idx
, 
ªm≠vÆue
) \

391 .
pö_fú°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

392 .
pö_œ°
 = 
	`STM32F4_GPIO_PIN
(
p‹t
, 
idx
), \

393 .
mode
 = 
STM32F4_GPIO_MODE_OUTPUT_2MHz
, \

394 .
˙f
 = 
STM32F4_GPIO_CNF_OUT_AF_OD
, \

395 .
ouçut
 = 0, \

396 .
ªm≠
 = 
ªm≠vÆue
 \

398 }

	)

400 
	#STM32F4_PIN_I2C1_SCL_MAP0
 
	`STM32F4_PIN_I2C
(1, 6, 
STM32F4_GPIO_REMAP_I2C1_0
)

	)

401 
	#STM32F4_PIN_I2C1_SDA_MAP0
 
	`STM32F4_PIN_I2C
(1, 7, 
STM32F4_GPIO_REMAP_I2C1_0
)

	)

402 
	#STM32F4_PIN_I2C1_SCL_MAP1
 
	`STM32F4_PIN_I2C
(1, 8, 
STM32F4_GPIO_REMAP_I2C1_1
)

	)

403 
	#STM32F4_PIN_I2C1_SDA_MAP1
 
	`STM32F4_PIN_I2C
(1, 9, 
STM32F4_GPIO_REMAP_I2C1_1
)

	)

405 
	#STM32F4_PIN_I2C2_SCL
 
	`STM32F4_PIN_I2C
(1, 10, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

406 
	#STM32F4_PIN_I2C2_SDA
 
	`STM32F4_PIN_I2C
(1, 11, 
STM32F4_GPIO_REMAP_DONT_CHANGE
)

	)

412 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/stm32f4/include/irq.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_IRQ_H


22 
	#LIBBSP_ARM_STM32F4_IRQ_H


	)

24 #i‚de‡
ASM


26 
	~<πems.h
>

27 
	~<πems/úq.h
>

28 
	~<πems/úq-exãnsi⁄.h
>

30 #ifde‡
__˝lu•lus


34 #ifde‡
__˝lu•lus


47 
	#STM32F4_IRQ_WWDG
 0

	)

48 
	#STM32F4_IRQ_PVD
 1

	)

49 
	#STM32F4_IRQ_TAMP_STAMP
 2

	)

50 
	#STM32F4_IRQ_RTC_WKUP
 3

	)

51 
	#STM32F4_IRQ_FLASH
 4

	)

52 
	#STM32F4_IRQ_RCC
 5

	)

53 
	#STM32F4_IRQ_EXTI0
 6

	)

54 
	#STM32F4_IRQ_EXTI1
 7

	)

55 
	#STM32F4_IRQ_EXTI2
 8

	)

56 
	#STM32F4_IRQ_EXTI3
 9

	)

57 
	#STM32F4_IRQ_EXTI4
 10

	)

58 
	#STM32F4_IRQ_DMA1_STREAM0
 11

	)

59 
	#STM32F4_IRQ_DMA1_STREAM1
 12

	)

60 
	#STM32F4_IRQ_DMA1_STREAM2
 13

	)

61 
	#STM32F4_IRQ_DMA1_STREAM3
 14

	)

62 
	#STM32F4_IRQ_DMA1_STREAM4
 15

	)

63 
	#STM32F4_IRQ_DMA1_STREAM5
 16

	)

64 
	#STM32F4_IRQ_DMA1_STREAM6
 17

	)

65 
	#STM32F4_IRQ_ADC
 18

	)

66 
	#STM32F4_IRQ_CAN1_TX
 19

	)

67 
	#STM32F4_IRQ_CAN1_RX0
 20

	)

68 
	#STM32F4_IRQ_CAN1_RX1
 21

	)

69 
	#STM32F4_IRQ_CAN1_SCE
 22

	)

70 
	#STM32F4_IRQ_EXTI9_5
 23

	)

71 
	#STM32F4_IRQ_TIM1_BRK_TIM9
 24

	)

72 
	#STM32F4_IRQ_TIM1_UP_TIM10
 25

	)

73 
	#STM32F4_IRQ_TIM1_TRG_COM_TIM11
 26

	)

74 
	#STM32F4_IRQ_TIM1_CC
 27

	)

75 
	#STM32F4_IRQ_TIM2
 28

	)

76 
	#STM32F4_IRQ_TIM3
 29

	)

77 
	#STM32F4_IRQ_TIM4
 30

	)

78 
	#STM32F4_IRQ_I2C1_EV
 31

	)

79 
	#STM32F4_IRQ_I2C1_ER
 32

	)

80 
	#STM32F4_IRQ_I2C2_EV
 33

	)

81 
	#STM32F4_IRQ_I2C2_ER
 34

	)

82 
	#STM32F4_IRQ_SPI1
 35

	)

83 
	#STM32F4_IRQ_SPI2
 36

	)

84 
	#STM32F4_IRQ_USART1
 37

	)

85 
	#STM32F4_IRQ_USART2
 38

	)

86 
	#STM32F4_IRQ_USART3
 39

	)

87 
	#STM32F4_IRQ_EXTI15_10
 40

	)

88 
	#STM32F4_IRQ_RTC_ALARM
 41

	)

89 
	#STM32F4_IRQ_OTG_FS_WKUP
 42

	)

90 
	#STM32F4_IRQ_TIM8_BRK_TIM12
 43

	)

91 
	#STM32F4_IRQ_TIM8_UP_TIM13
 44

	)

92 
	#STM32F4_IRQ_TIM8_TRG_COM_TIM14
 45

	)

93 
	#STM32F4_IRQ_TIM8_CC
 46

	)

94 
	#STM32F4_IRQ_DMA1_STREAM7
 47

	)

95 
	#STM32F4_IRQ_FSMC
 48

	)

96 
	#STM32F4_IRQ_SDIO
 49

	)

97 
	#STM32F4_IRQ_TIM5
 50

	)

98 
	#STM32F4_IRQ_SPI3
 51

	)

99 
	#STM32F4_IRQ_UART4
 52

	)

100 
	#STM32F4_IRQ_UART5
 53

	)

101 
	#STM32F4_IRQ_TIM6_DAC
 54

	)

102 
	#STM32F4_IRQ_TIM7
 55

	)

103 
	#STM32F4_IRQ_DMA2_STREAM0
 56

	)

104 
	#STM32F4_IRQ_DMA2_STREAM1
 57

	)

105 
	#STM32F4_IRQ_DMA2_STREAM2
 58

	)

106 
	#STM32F4_IRQ_DMA2_STREAM3
 59

	)

107 
	#STM32F4_IRQ_DMA2_STREAM4
 60

	)

108 
	#STM32F4_IRQ_ETH
 61

	)

109 
	#STM32F4_IRQ_ETH_WKUP
 62

	)

110 
	#STM32F4_IRQ_CAN2_TX
 63

	)

111 
	#STM32F4_IRQ_CAN2_RX0
 64

	)

112 
	#STM32F4_IRQ_CAN2_RX1
 65

	)

113 
	#STM32F4_IRQ_CAN2_SCE
 66

	)

114 
	#STM32F4_IRQ_OTG_FS
 67

	)

115 
	#STM32F4_IRQ_DMA2_STREAM5
 68

	)

116 
	#STM32F4_IRQ_DMA2_STREAM6
 69

	)

117 
	#STM32F4_IRQ_DMA2_STREAM7
 70

	)

118 
	#STM32F4_IRQ_USART6
 71

	)

119 
	#STM32F4_IRQ_I2C3_EV
 72

	)

120 
	#STM32F4_IRQ_I2C3_ER
 73

	)

121 
	#STM32F4_IRQ_OTG_HS_EP1_OUT
 74

	)

122 
	#STM32F4_IRQ_OTG_HS_EP1_IN
 75

	)

123 
	#STM32F4_IRQ_OTG_HS_WKUP
 76

	)

124 
	#STM32F4_IRQ_OTG_HS
 77

	)

125 
	#STM32F4_IRQ_DCMI
 78

	)

126 
	#STM32F4_IRQ_CRYP
 79

	)

127 
	#STM32F4_IRQ_HASH_RNG
 80

	)

128 
	#STM32F4_IRQ_FPU
 81

	)

130 
	#STM32F4_IRQ_PRIORITY_VALUE_MIN
 0

	)

131 
	#STM32F4_IRQ_PRIORITY_VALUE_MAX
 15

	)

132 
	#STM32F4_IRQ_PRIORITY_COUNT
 (
STM32F4_IRQ_PRIORITY_VALUE_MAX
 + 1)

	)

133 
	#STM32F4_IRQ_PRIORITY_HIGHEST
 
STM32F4_IRQ_PRIORITY_VALUE_MIN


	)

134 
	#STM32F4_IRQ_PRIORITY_LOWEST
 
STM32F4_IRQ_PRIORITY_VALUE_MAX


	)

136 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

137 
	#BSP_INTERRUPT_VECTOR_MAX
 81

	)

	@src/lib/libbsp/arm/stm32f4/include/rcc.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_RCC_H


22 
	#LIBBSP_ARM_STM32F4_RCC_H


	)

24 
	~<°dboﬁ.h
>

25 
	~<b•›ts.h
>

27 #ifde‡
__˝lu•lus


38 
	#STM32F4_RCC_INDEX
(
ªg
, 
idx
Ë((‘egË<< 5Ë| (idx))

	)

41 #ifde‡
STM32F4_FAMILY_F4XXXX


48 
STM32F4_RCC_OTGHS
 = 
STM32F4_RCC_INDEX
(0, 29),

49 
STM32F4_RCC_ETHMAC
 = 
STM32F4_RCC_INDEX
(0, 25),

50 
STM32F4_RCC_DMA2
 = 
STM32F4_RCC_INDEX
(0, 22),

51 
STM32F4_RCC_DMA1
 = 
STM32F4_RCC_INDEX
(0, 21),

52 
STM32F4_RCC_CRC
 = 
STM32F4_RCC_INDEX
(0, 12),

53 
STM32F4_RCC_GPIOI
 = 
STM32F4_RCC_INDEX
(0, 8),

54 
STM32F4_RCC_GPIOH
 = 
STM32F4_RCC_INDEX
(0, 7),

55 
STM32F4_RCC_GPIOG
 = 
STM32F4_RCC_INDEX
(0, 6),

56 
STM32F4_RCC_GPIOF
 = 
STM32F4_RCC_INDEX
(0, 5),

57 
STM32F4_RCC_GPIOE
 = 
STM32F4_RCC_INDEX
(0, 4),

58 
STM32F4_RCC_GPIOD
 = 
STM32F4_RCC_INDEX
(0, 3),

59 
STM32F4_RCC_GPIOC
 = 
STM32F4_RCC_INDEX
(0, 2),

60 
STM32F4_RCC_GPIOB
 = 
STM32F4_RCC_INDEX
(0, 1),

61 
STM32F4_RCC_GPIOA
 = 
STM32F4_RCC_INDEX
(0, 0),

63 
STM32F4_RCC_OTGFS
 = 
STM32F4_RCC_INDEX
(1, 7),

64 
STM32F4_RCC_RNG
 = 
STM32F4_RCC_INDEX
(1, 6),

65 
STM32F4_RCC_HASH
 = 
STM32F4_RCC_INDEX
(1, 5),

66 
STM32F4_RCC_CRYP
 = 
STM32F4_RCC_INDEX
(1, 4),

67 
STM32F4_RCC_DCMI
 = 
STM32F4_RCC_INDEX
(1, 0),

69 
STM32F4_RCC_FSMCR
 = 
STM32F4_RCC_INDEX
(2, 0),

71 
STM32F4_RCC_DAC
 = 
STM32F4_RCC_INDEX
(4, 29),

72 
STM32F4_RCC_PWR
 = 
STM32F4_RCC_INDEX
(4, 28),

73 
STM32F4_RCC_CAN2
 = 
STM32F4_RCC_INDEX
(4, 26),

74 
STM32F4_RCC_CAN1
 = 
STM32F4_RCC_INDEX
(4, 25),

75 
STM32F4_RCC_I2C3
 = 
STM32F4_RCC_INDEX
(4, 23),

76 
STM32F4_RCC_I2C2
 = 
STM32F4_RCC_INDEX
(4, 22),

77 
STM32F4_RCC_I2C1
 = 
STM32F4_RCC_INDEX
(4, 21),

78 
STM32F4_RCC_UART5
 = 
STM32F4_RCC_INDEX
(4, 20),

79 
STM32F4_RCC_UART4
 = 
STM32F4_RCC_INDEX
(4, 19),

80 
STM32F4_RCC_USART3
 = 
STM32F4_RCC_INDEX
(4, 18),

81 
STM32F4_RCC_USART2
 = 
STM32F4_RCC_INDEX
(4, 17),

82 
STM32F4_RCC_SPI3
 = 
STM32F4_RCC_INDEX
(4, 15),

83 
STM32F4_RCC_SPI2
 = 
STM32F4_RCC_INDEX
(4, 14),

84 
STM32F4_RCC_WWDG
 = 
STM32F4_RCC_INDEX
(4, 11),

85 
STM32F4_RCC_TIM14
 = 
STM32F4_RCC_INDEX
(4, 8),

86 
STM32F4_RCC_TIM13
 = 
STM32F4_RCC_INDEX
(4, 7),

87 
STM32F4_RCC_TIM12
 = 
STM32F4_RCC_INDEX
(4, 6),

88 
STM32F4_RCC_TIM7
 = 
STM32F4_RCC_INDEX
(4, 5),

89 
STM32F4_RCC_TIM6
 = 
STM32F4_RCC_INDEX
(4, 4),

90 
STM32F4_RCC_TIM5
 = 
STM32F4_RCC_INDEX
(4, 3),

91 
STM32F4_RCC_TIM4
 = 
STM32F4_RCC_INDEX
(4, 2),

92 
STM32F4_RCC_TIM3
 = 
STM32F4_RCC_INDEX
(4, 1),

93 
STM32F4_RCC_TIM2
 = 
STM32F4_RCC_INDEX
(4, 0),

95 
STM32F4_RCC_TIM11
 = 
STM32F4_RCC_INDEX
(5, 18),

96 
STM32F4_RCC_TIM10
 = 
STM32F4_RCC_INDEX
(5, 17),

97 
STM32F4_RCC_TIM9
 = 
STM32F4_RCC_INDEX
(5, 16),

98 
STM32F4_RCC_SYSCFG
 = 
STM32F4_RCC_INDEX
(5, 14),

99 
STM32F4_RCC_SPI1
 = 
STM32F4_RCC_INDEX
(5, 12),

100 
STM32F4_RCC_SDIO
 = 
STM32F4_RCC_INDEX
(5, 11),

101 
STM32F4_RCC_ADC3
 = 
STM32F4_RCC_INDEX
(5, 10),

102 
STM32F4_RCC_ADC2
 = 
STM32F4_RCC_INDEX
(5, 9),

103 
STM32F4_RCC_ADC1
 = 
STM32F4_RCC_INDEX
(5, 8),

104 
STM32F4_RCC_USART6
 = 
STM32F4_RCC_INDEX
(5, 5),

105 
STM32F4_RCC_USART1
 = 
STM32F4_RCC_INDEX
(5, 4),

106 
STM32F4_RCC_TIM8
 = 
STM32F4_RCC_INDEX
(5, 1),

107 
STM32F4_RCC_TIM1
 = 
STM32F4_RCC_INDEX
(5, 0),

112 #ifde‡
STM32F4_FAMILY_F10XXX


119 
STM32F4_RCC_DMA1
 = 
STM32F4_RCC_INDEX
(0, 0),

120 
STM32F4_RCC_DMA2
 = 
STM32F4_RCC_INDEX
(0, 1),

121 
STM32F4_RCC_SRAM
 = 
STM32F4_RCC_INDEX
(0, 2),

122 
STM32F4_RCC_FLITF
 = 
STM32F4_RCC_INDEX
(0, 4),

123 
STM32F4_RCC_CRCEN
 = 
STM32F4_RCC_INDEX
(0, 6),

124 
STM32F4_RCC_FSMC
 = 
STM32F4_RCC_INDEX
(0, 8),

125 
STM32F4_RCC_SDIO
 = 
STM32F4_RCC_INDEX
(0, 10),

126 
STM32F4_RCC_OTGFS
 = 
STM32F4_RCC_INDEX
(0, 12),

127 
STM32F4_RCC_ETHMAC
 = 
STM32F4_RCC_INDEX
(0, 14),

128 
STM32F4_RCC_ETHMACTX
 = 
STM32F4_RCC_INDEX
(0, 15),

129 
STM32F4_RCC_ETHMACRX
 = 
STM32F4_RCC_INDEX
(0, 16),

131 
STM32F4_RCC_AFIO
 = 
STM32F4_RCC_INDEX
(1, 0),

132 
STM32F4_RCC_GPIOA
 = 
STM32F4_RCC_INDEX
(1, 2),

133 
STM32F4_RCC_GPIOB
 = 
STM32F4_RCC_INDEX
(1, 3),

134 
STM32F4_RCC_GPIOC
 = 
STM32F4_RCC_INDEX
(1, 4),

135 
STM32F4_RCC_GPIOD
 = 
STM32F4_RCC_INDEX
(1, 5),

136 
STM32F4_RCC_GPIOE
 = 
STM32F4_RCC_INDEX
(1, 6),

137 
STM32F4_RCC_GPIOF
 = 
STM32F4_RCC_INDEX
(1, 7),

138 
STM32F4_RCC_GPIOG
 = 
STM32F4_RCC_INDEX
(1, 8),

139 
STM32F4_RCC_ADC1
 = 
STM32F4_RCC_INDEX
(1, 9),

140 
STM32F4_RCC_ADC2
 = 
STM32F4_RCC_INDEX
(1, 10),

141 
STM32F4_RCC_TIM1
 = 
STM32F4_RCC_INDEX
(1, 11),

142 
STM32F4_RCC_SPI1
 = 
STM32F4_RCC_INDEX
(1, 12),

143 
STM32F4_RCC_TIM8
 = 
STM32F4_RCC_INDEX
(1, 13),

144 
STM32F4_RCC_USART1
 = 
STM32F4_RCC_INDEX
(1, 14),

145 
STM32F4_RCC_ADC3
 = 
STM32F4_RCC_INDEX
(1, 15),

146 
STM32F4_RCC_TIM9
 = 
STM32F4_RCC_INDEX
(1, 19),

147 
STM32F4_RCC_TIM10
 = 
STM32F4_RCC_INDEX
(1, 20),

148 
STM32F4_RCC_TIM11
 = 
STM32F4_RCC_INDEX
(1, 21),

150 
STM32F4_RCC_TIM2
 = 
STM32F4_RCC_INDEX
(2, 0),

151 
STM32F4_RCC_TIM3
 = 
STM32F4_RCC_INDEX
(2, 1),

152 
STM32F4_RCC_TIM4
 = 
STM32F4_RCC_INDEX
(2, 2),

153 
STM32F4_RCC_TIM5
 = 
STM32F4_RCC_INDEX
(2, 3),

154 
STM32F4_RCC_TIM6
 = 
STM32F4_RCC_INDEX
(2, 4),

155 
STM32F4_RCC_TIM7
 = 
STM32F4_RCC_INDEX
(2, 5),

156 
STM32F4_RCC_TIM12
 = 
STM32F4_RCC_INDEX
(2, 6),

157 
STM32F4_RCC_TIM13
 = 
STM32F4_RCC_INDEX
(2, 7),

158 
STM32F4_RCC_TIM14
 = 
STM32F4_RCC_INDEX
(2, 8),

159 
STM32F4_RCC_WWDG
 = 
STM32F4_RCC_INDEX
(2, 11),

160 
STM32F4_RCC_SPI2
 = 
STM32F4_RCC_INDEX
(2, 14),

161 
STM32F4_RCC_SPI3
 = 
STM32F4_RCC_INDEX
(2, 15),

162 
STM32F4_RCC_USART2
 = 
STM32F4_RCC_INDEX
(2, 17),

163 
STM32F4_RCC_USART3
 = 
STM32F4_RCC_INDEX
(2, 18),

164 
STM32F4_RCC_UART4
 = 
STM32F4_RCC_INDEX
(2, 19),

165 
STM32F4_RCC_UART5
 = 
STM32F4_RCC_INDEX
(2, 20),

166 
STM32F4_RCC_I2C1
 = 
STM32F4_RCC_INDEX
(2, 21),

167 
STM32F4_RCC_I2C2
 = 
STM32F4_RCC_INDEX
(2, 22),

168 
STM32F4_RCC_USB
 = 
STM32F4_RCC_INDEX
(2, 23),

169 
STM32F4_RCC_CAN1
 = 
STM32F4_RCC_INDEX
(2, 24),

170 
STM32F4_RCC_CAN2
 = 
STM32F4_RCC_INDEX
(2, 25),

171 
STM32F4_RCC_BKP
 = 
STM32F4_RCC_INDEX
(2, 27),

172 
STM32F4_RCC_PWR
 = 
STM32F4_RCC_INDEX
(2, 28),

173 
STM32F4_RCC_DAC
 = 
STM32F4_RCC_INDEX
(2, 29),

178 } 
	t°m32f4_rcc_ödex
;

180 
°m32f4_rcc_ª£t
(
°m32f4_rcc_ödex
 
ödex
);

182 
°m32f4_rcc_£t_ª£t
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
);

184 
°m32f4_rcc_£t_˛ock
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
);

186 #ifde‡
STM32F4_FAMILY_F4XXXX


187 
°m32f4_rcc_£t_low_powî_˛ock
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
);

192 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/stm32f4/include/stm32_i2c.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32_I2C_H


22 
	#LIBBSP_ARM_STM32F4_STM32_I2C_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	m¸1
;

35 
	#STM32F4_I2C_CR1_SWRST
 
	`BSP_BIT32
(15)

	)

36 
	#STM32F4_I2C_CR1_ALERT
 
	`BSP_BIT32
(13)

	)

37 
	#STM32F4_I2C_CR1_PEC
 
	`BSP_BIT32
(12)

	)

38 
	#STM32F4_I2C_CR1_POS
 
	`BSP_BIT32
(11)

	)

39 
	#STM32F4_I2C_CR1_ACK
 
	`BSP_BIT32
(10)

	)

40 
	#STM32F4_I2C_CR1_STOP
 
	`BSP_BIT32
(9)

	)

41 
	#STM32F4_I2C_CR1_START
 
	`BSP_BIT32
(8)

	)

42 
	#STM32F4_I2C_CR1_NOSTRETCH
 
	`BSP_BIT32
(7)

	)

43 
	#STM32F4_I2C_CR1_ENGC
 
	`BSP_BIT32
(6)

	)

44 
	#STM32F4_I2C_CR1_ENPEC
 
	`BSP_BIT32
(5)

	)

45 
	#STM32F4_I2C_CR1_ENARP
 
	`BSP_BIT32
(4)

	)

46 
	#STM32F4_I2C_CR1_SMBTYPE
 
	`BSP_BIT32
(3)

	)

47 
	#STM32F4_I2C_CR1_SMBUS
 
	`BSP_BIT32
(1)

	)

48 
	#STM32F4_I2C_CR1_PE
 
	`BSP_BIT32
(0)

	)

49 
uöt32_t
 
	m¸2
;

50 
	#STM32F4_I2C_CR2_LAST
 
	`BSP_BIT32
(12)

	)

51 
	#STM32F4_I2C_CR2_DMAEN
 
	`BSP_BIT32
(11)

	)

52 
	#STM32F4_I2C_CR2_ITBUFEN
 
	`BSP_BIT32
(10)

	)

53 
	#STM32F4_I2C_CR2_ITEVTEN
 
	`BSP_BIT32
(9)

	)

54 
	#STM32F4_I2C_CR2_ITERREN
 
	`BSP_BIT32
(8)

	)

55 
	#STM32F4_I2C_CR2_FREQ
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

56 
	#STM32F4_I2C_CR2_FREQ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

57 
	#STM32F4_I2C_CR2_FREQ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

58 
uöt32_t
 
	mﬂr1
;

59 
	#STM32F4_I2C_OAR1_ADDMODE
 
	`BSP_BIT32
(15)

	)

60 
	#STM32F4_I2C_OAR1_ADD
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

61 
	#STM32F4_I2C_OAR1_ADD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

62 
	#STM32F4_I2C_OAR1_ADD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

63 
uöt32_t
 
	mﬂr2
;

64 
	#STM32F4_I2C_OAR2_ADD2
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 7)

	)

65 
	#STM32F4_I2C_OAR2_ADD2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 7)

	)

66 
	#STM32F4_I2C_OAR2_ADD2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 1, 7)

	)

67 
	#STM32F4_I2C_OAR2_ENDUAL
 
	`BSP_BIT32
(0)

	)

68 
uöt32_t
 
	mdr
;

69 
	#STM32F4_I2C_DR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

70 
	#STM32F4_I2C_DR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

71 
	#STM32F4_I2C_DR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

72 
uöt32_t
 
	m§1
;

73 
	#STM32F4_I2C_SR1_SMBALERT
 
	`BSP_BIT32
(15)

	)

74 
	#STM32F4_I2C_SR1_TIMEOUT
 
	`BSP_BIT32
(14)

	)

75 
	#STM32F4_I2C_SR1_PECERR
 
	`BSP_BIT32
(12)

	)

76 
	#STM32F4_I2C_SR1_OVR
 
	`BSP_BIT32
(11)

	)

77 
	#STM32F4_I2C_SR1_AF
 
	`BSP_BIT32
(10)

	)

78 
	#STM32F4_I2C_SR1_ARLO
 
	`BSP_BIT32
(9)

	)

79 
	#STM32F4_I2C_SR1_BERR
 
	`BSP_BIT32
(8)

	)

80 
	#STM32F4_I2C_SR1_TxE
 
	`BSP_BIT32
(7)

	)

81 
	#STM32F4_I2C_SR1_RxNE
 
	`BSP_BIT32
(6)

	)

82 
	#STM32F4_I2C_SR1_STOPF
 
	`BSP_BIT32
(4)

	)

83 
	#STM32F4_I2C_SR1_ADD10
 
	`BSP_BIT32
(3)

	)

84 
	#STM32F4_I2C_SR1_BTF
 
	`BSP_BIT32
(2)

	)

85 
	#STM32F4_I2C_SR1_ADDR
 
	`BSP_BIT32
(1)

	)

86 
	#STM32F4_I2C_SR1_SB
 
	`BSP_BIT32
(0)

	)

87 
uöt32_t
 
	m§2
;

88 
	#STM32F4_I2C_SR2_PEC
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

89 
	#STM32F4_I2C_SR2_PEC_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

90 
	#STM32F4_I2C_SR2_PEC_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

91 
	#STM32F4_I2C_SR2_DUALF
 
	`BSP_BIT32
(7)

	)

92 
	#STM32F4_I2C_SR2_SMBHOST
 
	`BSP_BIT32
(6)

	)

93 
	#STM32F4_I2C_SR2_SMBDEFAULT
 
	`BSP_BIT32
(5)

	)

94 
	#STM32F4_I2C_SR2_GENCALL
 
	`BSP_BIT32
(4)

	)

95 
	#STM32F4_I2C_SR2_TRA
 
	`BSP_BIT32
(2)

	)

96 
	#STM32F4_I2C_SR2_BUSY
 
	`BSP_BIT32
(1)

	)

97 
	#STM32F4_I2C_SR2_MSL
 
	`BSP_BIT32
(0)

	)

98 
uöt32_t
 
	mc¸
;

99 
	#STM32F4_I2C_CCR_FS
 
	`BSP_BIT32
(15)

	)

100 
	#STM32F4_I2C_CCR_DUTY
 
	`BSP_BIT32
(14)

	)

101 
	#STM32F4_I2C_CCR_CCR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 11)

	)

102 
	#STM32F4_I2C_CCR_CCR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

103 
	#STM32F4_I2C_CCR_CCR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

104 
	#STM32F4_I2C_CCR_CCR_MAX
 
	`STM32F4_I2C_CCR_CCR_GET
(
	`BSP_MSK32
(0, 11))

	)

105 
uöt32_t
 
	måi£
;

106 
	#STM32F4_I2C_TRISE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

107 
	#STM32F4_I2C_TRISE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

108 
	#STM32F4_I2C_TRISE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

109 } 
	t°m32f4_i2c
;

	@src/lib/libbsp/arm/stm32f4/include/stm32_usart.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32_USART_H


22 
	#LIBBSP_ARM_STM32F4_STM32_USART_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	m§
;

35 
	#STM32F4_USART_SR_CTS
 
	`BSP_BIT32
(9)

	)

36 
	#STM32F4_USART_SR_LBD
 
	`BSP_BIT32
(8)

	)

37 
	#STM32F4_USART_SR_TXE
 
	`BSP_BIT32
(7)

	)

38 
	#STM32F4_USART_SR_TC
 
	`BSP_BIT32
(6)

	)

39 
	#STM32F4_USART_SR_RXNE
 
	`BSP_BIT32
(5)

	)

40 
	#STM32F4_USART_SR_IDLE
 
	`BSP_BIT32
(4)

	)

41 
	#STM32F4_USART_SR_ORE
 
	`BSP_BIT32
(3)

	)

42 
	#STM32F4_USART_SR_NF
 
	`BSP_BIT32
(2)

	)

43 
	#STM32F4_USART_SR_FE
 
	`BSP_BIT32
(1)

	)

44 
	#STM32F4_USART_SR_PE
 
	`BSP_BIT32
(0)

	)

45 
uöt32_t
 
	mdr
;

46 
	#STM32F4_USART_DR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

47 
	#STM32F4_USART_DR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

48 
	#STM32F4_USART_DR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

49 
uöt32_t
 
	mbbr
;

50 
	#STM32F4_USART_BBR_DIV_MANTISSA
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 15)

	)

51 
	#STM32F4_USART_BBR_DIV_MANTISSA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 15)

	)

52 
	#STM32F4_USART_BBR_DIV_MANTISSA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 15)

	)

53 
	#STM32F4_USART_BBR_DIV_FRACTION
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

54 
	#STM32F4_USART_BBR_DIV_FRACTION_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

55 
	#STM32F4_USART_BBR_DIV_FRACTION_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

56 
uöt32_t
 
	m¸1
;

57 
	#STM32F4_USART_CR1_OVER8
 
	`BSP_BIT32
(15)

	)

58 
	#STM32F4_USART_CR1_UE
 
	`BSP_BIT32
(13)

	)

59 
	#STM32F4_USART_CR1_M
 
	`BSP_BIT32
(12)

	)

60 
	#STM32F4_USART_CR1_WAKE
 
	`BSP_BIT32
(11)

	)

61 
	#STM32F4_USART_CR1_PCE
 
	`BSP_BIT32
(10)

	)

62 
	#STM32F4_USART_CR1_PS
 
	`BSP_BIT32
(9)

	)

63 
	#STM32F4_USART_CR1_PEIE
 
	`BSP_BIT32
(8)

	)

64 
	#STM32F4_USART_CR1_TXEIE
 
	`BSP_BIT32
(7)

	)

65 
	#STM32F4_USART_CR1_TCIE
 
	`BSP_BIT32
(6)

	)

66 
	#STM32F4_USART_CR1_RXNEIE
 
	`BSP_BIT32
(5)

	)

67 
	#STM32F4_USART_CR1_IDLEIE
 
	`BSP_BIT32
(4)

	)

68 
	#STM32F4_USART_CR1_TE
 
	`BSP_BIT32
(3)

	)

69 
	#STM32F4_USART_CR1_RE
 
	`BSP_BIT32
(2)

	)

70 
	#STM32F4_USART_CR1_RWU
 
	`BSP_BIT32
(1)

	)

71 
	#STM32F4_USART_CR1_SBK
 
	`BSP_BIT32
(0)

	)

72 
uöt32_t
 
	m¸2
;

73 
	#STM32F4_USART_CR2_LINEN
 
	`BSP_BIT32
(14)

	)

74 
	#STM32F4_USART_CR2_STOP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 13)

	)

75 
	#STM32F4_USART_CR2_STOP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 13)

	)

76 
	#STM32F4_USART_CR2_STOP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 13)

	)

77 
	#STM32F4_USART_CR2_CLKEN
 
	`BSP_BIT32
(11)

	)

78 
	#STM32F4_USART_CR2_CPOL
 
	`BSP_BIT32
(10)

	)

79 
	#STM32F4_USART_CR2_CPHA
 
	`BSP_BIT32
(9)

	)

80 
	#STM32F4_USART_CR2_LBCL
 
	`BSP_BIT32
(8)

	)

81 
	#STM32F4_USART_CR2_LBDIE
 
	`BSP_BIT32
(6)

	)

82 
	#STM32F4_USART_CR2_LBDL
 
	`BSP_BIT32
(5)

	)

83 
	#STM32F4_USART_CR2_ADD
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

84 
	#STM32F4_USART_CR2_ADD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

85 
	#STM32F4_USART_CR2_ADD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

86 
uöt32_t
 
	m¸3
;

87 
	#STM32F4_USART_CR3_ONEBIT
 
	`BSP_BIT32
(11)

	)

88 
	#STM32F4_USART_CR3_CTSIE
 
	`BSP_BIT32
(10)

	)

89 
	#STM32F4_USART_CR3_CTSE
 
	`BSP_BIT32
(9)

	)

90 
	#STM32F4_USART_CR3_RTSE
 
	`BSP_BIT32
(8)

	)

91 
	#STM32F4_USART_CR3_DMAT
 
	`BSP_BIT32
(7)

	)

92 
	#STM32F4_USART_CR3_DMAR
 
	`BSP_BIT32
(6)

	)

93 
	#STM32F4_USART_CR3_SCEN
 
	`BSP_BIT32
(5)

	)

94 
	#STM32F4_USART_CR3_NACK
 
	`BSP_BIT32
(4)

	)

95 
	#STM32F4_USART_CR3_HDSEL
 
	`BSP_BIT32
(3)

	)

96 
	#STM32F4_USART_CR3_IRLP
 
	`BSP_BIT32
(2)

	)

97 
	#STM32F4_USART_CR3_IREN
 
	`BSP_BIT32
(1)

	)

98 
	#STM32F4_USART_CR3_EIE
 
	`BSP_BIT32
(0)

	)

99 
uöt32_t
 
	mgçr
;

100 
	#STM32F4_USART_GTPR_GT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 15)

	)

101 
	#STM32F4_USART_GTPR_GT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

102 
	#STM32F4_USART_GTPR_GT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

103 
	#STM32F4_USART_GTPR_PSC
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

104 
	#STM32F4_USART_GTPR_PSC_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

105 
	#STM32F4_USART_GTPR_PSC_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

106 } 
	t°m32f4_ußπ
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_exti.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F10XXX_EXTI_H


22 
	#LIBBSP_ARM_STM32F4_STM32F10XXX_EXTI_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	mimr
;

35 
	#STM32F4_EXTI_IMR
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

36 
uöt32_t
 
	memr
;

37 
	#STM32F4_EXTI_EMR
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

38 
uöt32_t
 
	mπ§
;

39 
	#STM32F4_EXTI_RTSR
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

40 
uöt32_t
 
	m·§
;

41 
	#STM32F4_EXTI_FTSR
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

42 
uöt32_t
 
	mswõr
;

43 
	#STM32F4_EXTI_SWIER
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

44 
uöt32_t
 
	m¥
;

45 
	#STM32F4_EXTI_PR
(
löe
Ë
	`BSP_BIT32
÷öe)

	)

46 } 
	t°m32f4_exti
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_gpio.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F10XXX_GPIO_H


22 
	#LIBBSP_ARM_STM32F4_STM32F10XXX_GPIO_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	m¸
[2];

35 
uöt32_t
 
	midr
;

36 
uöt32_t
 
	modr
;

37 
uöt32_t
 
	mb§r
;

38 
uöt32_t
 
	mbº
;

39 
uöt32_t
 
	mlckr
;

40 } 
	t°m32f4_gpio
;

43 
uöt32_t
 
	mev¸
;

44 
uöt32_t
 
	mm≠r
;

45 
uöt32_t
 
	mexti¸
[4];

46 
uöt32_t
 
	mm≠r2
;

47 } 
	t°m32f4_afio
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_rcc.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F10XXX_RCC_H


22 
	#LIBBSP_ARM_STM32F4_STM32F10XXX_RCC_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	m¸
;

35 
uöt32_t
 
	mcfgr
;

36 
uöt32_t
 
	mcú
;

37 
uöt32_t
 
	m≠br°r
 [2];

38 
uöt32_t
 
	mahbír
 [1];

39 
uöt32_t
 
	m≠bír
 [2];

40 
uöt32_t
 
	mbd¸
;

41 
uöt32_t
 
	mc§
;

42 
uöt32_t
 
	mahb°r
;

43 
uöt32_t
 
	mcfgr2
;

44 } 
	t°m32f4_rcc
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4_H


22 
	#LIBBSP_ARM_STM32F4_STM32F4_H


	)

24 
	~<b•/utûôy.h
>

25 
	~<b•›ts.h
>

27 
	#STM32F4_BASE
 0x00

	)

29 #ifde‡
STM32F4_FAMILY_F4XXXX


38 
	#STM32F4_APB1_BASE
 (
STM32F4_BASE
 + 0x40000000)

	)

39 
	#STM32F4_APB2_BASE
 (
STM32F4_BASE
 + 0x40010000)

	)

40 
	#STM32F4_AHB1_BASE
 (
STM32F4_BASE
 + 0x40020000)

	)

41 
	#STM32F4_AHB2_BASE
 (
STM32F4_BASE
 + 0x50000000)

	)

48 
	~<b•/°m32f4xxxx_gpio.h
>

49 
	#STM32F4_GPIO
(
i
Ë((vﬁ©ûê
°m32f4_gpio
 *Ë(
STM32F4_BASE
 + 0x40020000Ë+ (i))

	)

58 
	~<b•/°m32f4xxxx_rcc.h
>

59 
	#STM32F4_RCC
 ((vﬁ©ûê
°m32f4_rcc
 *Ë(
STM32F4_AHB1_BASE
 + 0x3800))

	)

68 
	~<b•/°m32f4xxxx_Êash.h
>

69 
	#STM32F4_FLASH
 ((vﬁ©ûê
°m32f4_Êash
 *Ë(
STM32F4_BASE
 + 0x40023C00))

	)

73 
	~<b•/°m32_i2c.h
>

80 
	#STM32F4_I2C3
 ((vﬁ©ûê
°m32f4_i2c
 *Ë(
STM32F4_BASE
 + 0x40005C00))

	)

81 
	#STM32F4_I2C2
 ((vﬁ©ûê
°m32f4_i2c
 *Ë(
STM32F4_BASE
 + 0x40005800))

	)

82 
	#STM32F4_I2C1
 ((vﬁ©ûê
°m32f4_i2c
 *Ë(
STM32F4_BASE
 + 0x40005400))

	)

91 
	~<b•/°m32_ußπ.h
>

92 
	#STM32F4_USART_1
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40011000))

	)

93 
	#STM32F4_USART_2
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004400))

	)

94 
	#STM32F4_USART_3
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004800))

	)

95 
	#STM32F4_USART_4
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004c00))

	)

96 
	#STM32F4_USART_5
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40005000))

	)

97 
	#STM32F4_USART_6
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40011400))

	)

106 
	~<b•/°m32f4xxxx_pwr.h
>

107 
	#STM32F4_PWR
 ((vﬁ©ûê
°m32f4_pwr
 *Ë(
STM32F4_APB1_BASE
 + 0x7000))

	)

116 
	~<b•/°m32f4xxxx_exti.h
>

117 
	#STM32F4_EXTI
 ((vﬁ©ûê
°m32f4_exti
 *Ë(
STM32F4_APB2_BASE
 + 0x3c00))

	)

126 
	~<b•/°m32f4xxxx_syscfg.h
>

127 
	#STM32F4_SYSCFG
 ((vﬁ©ûê
°m32f4_syscfg
 *Ë(
STM32F4_APB2_BASE
 + 0x3800))

	)

136 
	~<b•/°m32f4xxxx_Êash.h
>

137 
	#STM32F4_FLASH
 ((vﬁ©ûê
°m32f4_Êash
 *Ë(
STM32F4_AHB1_BASE
 + 0x3c00))

	)

146 
	~<b•/°m32f4xxxx_tim.h
>

147 
	#STM32F4_TIM1
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB2_BASE
 + 0x0000))

	)

148 
	#STM32F4_TIM2
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x0000))

	)

149 
	#STM32F4_TIM3
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x0400))

	)

150 
	#STM32F4_TIM4
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x0800))

	)

151 
	#STM32F4_TIM5
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x0c00))

	)

152 
	#STM32F4_TIM6
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x1000))

	)

153 
	#STM32F4_TIM7
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x1400))

	)

154 
	#STM32F4_TIM8
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB2_BASE
 + 0x0400))

	)

155 
	#STM32F4_TIM9
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB2_BASE
 + 0x4000))

	)

156 
	#STM32F4_TIM10
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB2_BASE
 + 0x4400))

	)

157 
	#STM32F4_TIM11
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB2_BASE
 + 0x4800))

	)

158 
	#STM32F4_TIM12
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x1800))

	)

159 
	#STM32F4_TIM13
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x1c00))

	)

160 
	#STM32F4_TIM14
 ((vﬁ©ûê
°m32f4_tim
 *Ë(
STM32F4_APB1_BASE
 + 0x2000))

	)

169 
	~<b•/°m32f4xxxx_adc.h
>

170 
	#STM32F4_ADC1
 ((vﬁ©ûê
°m32f4_adc_ch™
 *Ë(
STM32F4_APB2_BASE
 + 0x2000))

	)

171 
	#STM32F4_ADC2
 ((vﬁ©ûê
°m32f4_adc_ch™
 *Ë(
STM32F4_APB2_BASE
 + 0x2100))

	)

172 
	#STM32F4_ADC3
 ((vﬁ©ûê
°m32f4_adc_ch™
 *Ë(
STM32F4_APB2_BASE
 + 0x2200))

	)

173 
	#STM32F4_ADC_COMMON
 ((vﬁ©ûê
°m32f4_adc_com
 *Ë(
STM32F4_APB2_BASE
 + 0x2300))

	)

182 
	~<b•/°m32f4xxxx_Ÿgfs.h
>

183 
	#STM32F4_OTGFS_BASE
 (
STM32F4_AHB2_BASE
 + 0x0000)

	)

184 
	#STM32F4_OTGFS_CORE
 ((vﬁ©ûê
°m32f4_Ÿgfs
 *Ë(
STM32F4_OTGFS_BASE
 + 0x000))

	)

185 
	#STM32F4_OTGFS_DEV
 ((vﬁ©ûê
°m32f4_Ÿgfs_dªgs
 *Ë(
STM32F4_OTGFS_BASE
 + 0x800))

	)

186 
	#STM32F4_OTGFS_INEP
 ((vﬁ©ûê
°m32f4_Ÿgfs_öïªgs
 *Ë(
STM32F4_OTGFS_BASE
 + 0x900))

	)

187 
	#STM32F4_OTGFS_OUTEP
 ((vﬁ©ûê
°m32f4_Ÿgfs_ouã¥egs
 *Ë(
STM32F4_OTGFS_BASE
 + 0xb00))

	)

188 
	#STM32F4_OTGFS_PWRCTL
 ((vﬁ©ûê
°m32f4_Ÿgfs_pwr˘Ãegs
 *Ë(
STM32F4_OTGFS_BASE
 + 0xe00))

	)

190 
	#STM32F4_OTGFS_FIFO_BASE
 (
STM32F4_OTGFS_BASE
 + 
USB_FIFO_BASE
)

	)

196 #ifde‡
STM32F4_FAMILY_F10XXX


203 
	~<b•/°m32f10xxx_exti.h
>

204 
	#STM32F4_EXTI
 ((vﬁ©ûê
°m32f4_exti
 *Ë(
STM32F4_BASE
 + 0x40010400))

	)

213 
	~<b•/°m32f10xxx_gpio.h
>

214 
	#STM32F4_GPIO
(
i
Ë((vﬁ©ûê
°m32f4_gpio
 *Ë(
STM32F4_BASE
 + 0x40010800 + i * 0x400))

	)

215 
	#STM32F4_AFIO
 ((vﬁ©ûê
°m32f4_afio
 *Ë(
STM32F4_BASE
 + 0x40010000))

	)

224 
	~<b•/°m32f10xxx_rcc.h
>

225 
	#STM32F4_RCC
 ((vﬁ©ûê
°m32f4_rcc
 *Ë(
STM32F4_BASE
 + 0x40021000))

	)

234 
	~<b•/°m32_i2c.h
>

235 
	#STM32F4_I2C2
 ((vﬁ©ûê
°m32f4_i2c
 *Ë(
STM32F4_BASE
 + 0x40005800))

	)

236 
	#STM32F4_I2C1
 ((vﬁ©ûê
°m32f4_i2c
 *Ë(
STM32F4_BASE
 + 0x40005400))

	)

245 
	~<b•/°m32_ußπ.h
>

246 
	#STM32F4_USART_1
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40013800))

	)

247 
	#STM32F4_USART_2
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004400))

	)

248 
	#STM32F4_USART_3
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004800))

	)

249 
	#STM32F4_USART_4
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40004c00))

	)

250 
	#STM32F4_USART_5
 ((vﬁ©ûê
°m32f4_ußπ
 *Ë(
STM32F4_BASE
 + 0x40005000))

	)

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_adc.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_ADC_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_ADC_H


	)

18 
	~<b•/utûôy.h
>

20 
	s°m32f4_adc_ch™_s
 {

21 
uöt32_t
 
	m§
;

22 
	#STM32F4_ADC_SR_OVR
 
	`BSP_BIT32
(5)

23 
	#STM32F4_ADC_SR_STRT
 
	`BSP_BIT32
(4)

24 
	#STM32F4_ADC_SR_JSTRT
 
	`BSP_BIT32
(3)

25 
	#STM32F4_ADC_SR_JEOC
 
	`BSP_BIT32
(2)

26 
	#STM32F4_ADC_SR_EOC
 
	`BSP_BIT32
(1)

27 
	#STM32F4_ADC_SR_AWD
 
	`BSP_BIT32
(0)

28 

	)

29 
uöt32_t
 
	m¸1
;

30 
	#STM32F4_ADC_CR1_OVRIE
 
	`BSP_BIT32
(26)

31 
	#STM32F4_ADC_CR1_RES
(
vÆ
Ë
	`BSP_FLD32
(val, 24, 25)

32 
	#STM32F4_ADC_CR1_RES_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 25)

	)

33 
	#STM32F4_ADC_CR1_RES_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 25)

	)

34 
	#ADC_CR1_RES_12BIT
 0

	)

35 
	#ADC_CR1_RES_10BIT
 1

	)

36 
	#ADC_CR1_RES_8BIT
 2

	)

37 
	#ADC_CR1_RES_6BIT
 3

	)

38 
	#STM32F4_ADC_CR1_AWDEN
 
	`BSP_BIT32
(23)

39 
	#STM32F4_ADC_CR1_JAWDEN
 
	`BSP_BIT32
(22)

40 
	#STM32F4_ADC_CR1_DISCNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 13, 15)

41 
	#STM32F4_ADC_CR1_DISCNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 13, 15)

	)

42 
	#STM32F4_ADC_CR1_DISCNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 13, 15)

	)

43 
	#STM32F4_ADC_CR1_JDISCEN
 
	`BSP_BIT32
(12)

44 
	#STM32F4_ADC_CR1_DISCEN
 
	`BSP_BIT32
(11)

45 
	#STM32F4_ADC_CR1_JAUTO
 
	`BSP_BIT32
(10)

46 
	#STM32F4_ADC_CR1_AWDSGL
 
	`BSP_BIT32
(9)

47 
	#STM32F4_ADC_CR1_SCAN
 
	`BSP_BIT32
(8)

48 
	#STM32F4_ADC_CR1_JEOCIE
 
	`BSP_BIT32
(7)

49 
	#STM32F4_ADC_CR1_AWDIE
 
	`BSP_BIT32
(6)

50 
	#STM32F4_ADC_CR1_EOCIE
 
	`BSP_BIT32
(5)

51 
	#STM32F4_ADC_CR1_AWDCH
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 4)

52 
	#STM32F4_ADC_CR1_AWDCH_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

53 
	#STM32F4_ADC_CR1_AWDCH_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 4)

	)

55 
uöt32_t
 
	m¸2
;

56 
	#STM32F4_ADC_CR2_SWSTART
 
	`BSP_BIT32
(30)

57 
	#STM32F4_ADC_CR2_EXTEN
(
vÆ
Ë
	`BSP_FLD32
(val, 28, 29)

58 
	#STM32F4_ADC_CR2_EXTEN_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 28, 29)

	)

59 
	#STM32F4_ADC_CR2_EXTEN_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 28, 29)

	)

60 
	#STM32F4_ADC_CR2_JEXTEN
(
vÆ
Ë
	`BSP_FLD32
(val, 20, 21)

61 
	#STM32F4_ADC_CR2_JEXTEN_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 20, 21)

	)

62 
	#STM32F4_ADC_CR2_JEXTEN_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 20, 21)

	)

63 
	#ADC_CR2_TRIGGER_DISABLE
 0

	)

64 
	#ADC_CR2_TRIGGER_RISING
 1

	)

65 
	#ADC_CR2_TRIGGER_FALLING
 2

	)

66 
	#ADC_CR2_TRIGGER_BOTH
 3

	)

67 
	#STM32F4_ADC_CR2_EXTSEL
(
vÆ
Ë
	`BSP_FLD32
(val, 24, 27)

68 
	#STM32F4_ADC_CR2_EXTSEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 27)

	)

69 
	#STM32F4_ADC_CR2_EXTSEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 27)

	)

70 
	#ADC_CR2_EVT_TIMER1_CC1
 0x0

	)

71 
	#ADC_CR2_EVT_TIMER1_CC2
 0x1

	)

72 
	#ADC_CR2_EVT_TIMER1_CC3
 0x2

	)

73 
	#ADC_CR2_EVT_TIMER2_CC2
 0x3

	)

74 
	#ADC_CR2_EVT_TIMER2_CC3
 0x4

	)

75 
	#ADC_CR2_EVT_TIMER2_CC4
 0x5

	)

76 
	#ADC_CR2_EVT_TIMER2_TRGO
 0x6

	)

77 
	#ADC_CR2_EVT_TIMER3_CC1
 0x7

	)

78 
	#ADC_CR2_EVT_TIMER3_TRGO
 0x8

	)

79 
	#ADC_CR2_EVT_TIMER4_CC1
 0x9

	)

80 
	#ADC_CR2_EVT_TIMER5_CC1
 0xa

	)

81 
	#ADC_CR2_EVT_TIMER5_CC2
 0xb

	)

82 
	#ADC_CR2_EVT_TIMER5_CC3
 0xc

	)

83 
	#ADC_CR2_EVT_TIMER8_CC1
 0xd

	)

84 
	#ADC_CR2_EVT_TIMER8_TRGO
 0xe

	)

85 
	#ADC_CR2_EVT_EXTI_11
 0xf

	)

86 
	#STM32F4_ADC_CR2_JSWSTART
 
	`BSP_BIT32
(22)

87 
	#STM32F4_ADC_CR2_JEXTSEL
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 19)

88 
	#STM32F4_ADC_CR2_JEXTSEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 19)

	)

89 
	#STM32F4_ADC_CR2_JEXTSEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 19)

	)

90 
	#ADC_CR2_JEVT_TIMER1_CC4
 0x0

	)

91 
	#ADC_CR2_JEVT_TIMER1_TRGO
 0x1

	)

92 
	#ADC_CR2_JEVT_TIMER2_CC1
 0x2

	)

93 
	#ADC_CR2_JEVT_TIMER2_TRGO
 0x3

	)

94 
	#ADC_CR2_JEVT_TIMER3_CC2
 0x4

	)

95 
	#ADC_CR2_JEVT_TIMER3_CC4
 0x5

	)

96 
	#ADC_CR2_JEVT_TIMER4_CC1
 0x6

	)

97 
	#ADC_CR2_JEVT_TIMER4_CC2
 0x7

	)

98 
	#ADC_CR2_JEVT_TIMER4_CC3
 0x8

	)

99 
	#ADC_CR2_JEVT_TIMER4_TRGO
 0x9

	)

100 
	#ADC_CR2_JEVT_TIMER5_CC4
 0xa

	)

101 
	#ADC_CR2_JEVT_TIMER5_TRGO
 0xb

	)

102 
	#ADC_CR2_JEVT_TIMER8_CC2
 0xc

	)

103 
	#ADC_CR2_JEVT_TIMER8_CC3
 0xd

	)

104 
	#ADC_CR2_JEVT_TIMER8_CC4
 0xe

	)

105 
	#ADC_CR2_JEVT_EXTI_15
 0xf

	)

106 
	#STM32F4_ADC_CR2_ALIGN
 
	`BSP_BIT32
(11)

107 
	#STM32F4_ADC_CR2_ALIGN_RIGHT
 0

	)

108 
	#STM32F4_ADC_CR2_ALIGN_LEFT
 
STM32F4_ADC_CR2_ALIGN


	)

109 
	#STM32F4_ADC_CR2_EOCS
 
	`BSP_BIT32
(10)

110 
	#STM32F4_ADC_CR2_DDS
 
	`BSP_BIT32
(9)

111 
	#STM32F4_ADC_CR2_DMA
 
	`BSP_BIT32
(8)

112 
	#STM32F4_ADC_CR2_CONT
 
	`BSP_BIT32
(1)

113 
	#STM32F4_ADC_CR2_ADON
 
	`BSP_BIT32
(0)

114 

	)

115 
uöt32_t
 
	msm¥1
;

116 
	#ADC_SAMPLE_3CYCLE
 0

	)

117 
	#ADC_SAMPLE_15CYCLE
 1

	)

118 
	#ADC_SAMPLE_28CYCLE
 2

	)

119 
	#ADC_SAMPLE_56CYCLE
 3

	)

120 
	#ADC_SAMPLE_84CYCLE
 4

	)

121 
	#ADC_SAMPLE_112CYCLE
 5

	)

122 
	#ADC_SAMPLE_144CYCLE
 6

	)

123 
	#ADC_SAMPLE_480CYCLE
 7

	)

124 
	#STM32F4_ADC_SMP18
(
vÆ
Ë
	`BSP_FLD32
(val, 24, 26)

125 
	#STM32F4_ADC_SMP18_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 26)

	)

126 
	#STM32F4_ADC_SMP18_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 26)

	)

127 
	#STM32F4_ADC_SMP17
(
vÆ
Ë
	`BSP_FLD32
(val, 21, 23)

128 
	#STM32F4_ADC_SMP17_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 21, 23)

	)

129 
	#STM32F4_ADC_SMP17_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 21, 23)

	)

130 
	#STM32F4_ADC_SMP16
(
vÆ
Ë
	`BSP_FLD32
(val, 18, 20)

131 
	#STM32F4_ADC_SMP16_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 18, 20)

	)

132 
	#STM32F4_ADC_SMP16_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 18, 20)

	)

133 
	#STM32F4_ADC_SMP15
(
vÆ
Ë
	`BSP_FLD32
(val, 15, 17)

134 
	#STM32F4_ADC_SMP15_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 15, 17)

	)

135 
	#STM32F4_ADC_SMP15_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 15, 17)

	)

136 
	#STM32F4_ADC_SMP14
(
vÆ
Ë
	`BSP_FLD32
(val, 12, 14)

137 
	#STM32F4_ADC_SMP14_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 14)

	)

138 
	#STM32F4_ADC_SMP14_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 14)

	)

139 
	#STM32F4_ADC_SMP13
(
vÆ
Ë
	`BSP_FLD32
(val, 9, 11)

140 
	#STM32F4_ADC_SMP13_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 9, 11)

	)

141 
	#STM32F4_ADC_SMP13_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 9, 11)

	)

142 
	#STM32F4_ADC_SMP12
(
vÆ
Ë
	`BSP_FLD32
(val, 6, 8)

143 
	#STM32F4_ADC_SMP12_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 8)

	)

144 
	#STM32F4_ADC_SMP12_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 8)

	)

145 
	#STM32F4_ADC_SMP11
(
vÆ
Ë
	`BSP_FLD32
(val, 3, 5)

146 
	#STM32F4_ADC_SMP11_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 3, 5)

	)

147 
	#STM32F4_ADC_SMP11_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 3, 5)

	)

148 
	#STM32F4_ADC_SMP10
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 2)

149 
	#STM32F4_ADC_SMP10_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

150 
	#STM32F4_ADC_SMP10_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

152 
uöt32_t
 
	msm¥2
;

153 
	#STM32F4_ADC_SMP9
(
vÆ
Ë
	`BSP_FLD32
(val, 27, 29)

154 
	#STM32F4_ADC_SMP9_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 27, 29)

	)

155 
	#STM32F4_ADC_SMP9_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 27, 29)

	)

156 
	#STM32F4_ADC_SMP8
(
vÆ
Ë
	`BSP_FLD32
(val, 24, 26)

157 
	#STM32F4_ADC_SMP8_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 26)

	)

158 
	#STM32F4_ADC_SMP8_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 26)

	)

159 
	#STM32F4_ADC_SMP7
(
vÆ
Ë
	`BSP_FLD32
(val, 21, 23)

160 
	#STM32F4_ADC_SMP7_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 21, 23)

	)

161 
	#STM32F4_ADC_SMP7_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 21, 23)

	)

162 
	#STM32F4_ADC_SMP6
(
vÆ
Ë
	`BSP_FLD32
(val, 18, 20)

163 
	#STM32F4_ADC_SMP6_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 18, 20)

	)

164 
	#STM32F4_ADC_SMP6_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 18, 20)

	)

165 
	#STM32F4_ADC_SMP5
(
vÆ
Ë
	`BSP_FLD32
(val, 15, 17)

166 
	#STM32F4_ADC_SMP5_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 15, 17)

	)

167 
	#STM32F4_ADC_SMP5_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 15, 17)

	)

168 
	#STM32F4_ADC_SMP4
(
vÆ
Ë
	`BSP_FLD32
(val, 12, 14)

169 
	#STM32F4_ADC_SMP4_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 14)

	)

170 
	#STM32F4_ADC_SMP4_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 14)

	)

171 
	#STM32F4_ADC_SMP3
(
vÆ
Ë
	`BSP_FLD32
(val, 9, 11)

172 
	#STM32F4_ADC_SMP3_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 9, 11)

	)

173 
	#STM32F4_ADC_SMP3_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 9, 11)

	)

174 
	#STM32F4_ADC_SMP2
(
vÆ
Ë
	`BSP_FLD32
(val, 6, 8)

175 
	#STM32F4_ADC_SMP2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 8)

	)

176 
	#STM32F4_ADC_SMP2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 8)

	)

177 
	#STM32F4_ADC_SMP1
(
vÆ
Ë
	`BSP_FLD32
(val, 3, 5)

178 
	#STM32F4_ADC_SMP1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 3, 5)

	)

179 
	#STM32F4_ADC_SMP1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 3, 5)

	)

180 
	#STM32F4_ADC_SMP0
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 2)

181 
	#STM32F4_ADC_SMP0_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

182 
	#STM32F4_ADC_SMP0_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

184 
uöt32_t
 
	mjo‰
[4];

185 
	#STM32F4_ADC_JOFFSET
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 11)

186 
	#STM32F4_ADC_JOFFSET_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

187 
	#STM32F4_ADC_JOFFSET_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

189 
uöt32_t
 
	mhå
;

190 
	#STM32F4_ADC_HT
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 11)

191 
	#STM32F4_ADC_HT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

192 
	#STM32F4_ADC_HT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

194 
uöt32_t
 
	m…r
;

195 
	#STM32F4_ADC_LT
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 11)

196 
	#STM32F4_ADC_LT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 11)

	)

197 
	#STM32F4_ADC_LT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 11)

	)

199 
uöt32_t
 
	msqr
[3];

200 
	#STM32F4_ADC_SQR_L
(
vÆ
Ë
	`BSP_FLD32
(val, 20, 23)

201 
	#STM32F4_ADC_SQR_L_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 20, 23)

	)

202 
	#STM32F4_ADC_SQR_L_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 20, 23)

	)

204 
uöt32_t
 
	mjsqr
;

205 
	#STM32F4_ADC_JSQR_JL
(
vÆ
Ë
	`BSP_FLD32
(val, 20, 21)

206 
	#STM32F4_ADC_JSQR_JL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 20, 21)

	)

207 
	#STM32F4_ADC_JSQR_JL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 20, 21)

	)

208 
	#STM32F4_ADC_JSQR_JSQ4
(
vÆ
Ë
	`BSP_FLD32
(val, 15, 19)

209 
	#STM32F4_ADC_JSQR_JSQ4_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 15, 19)

	)

210 
	#STM32F4_ADC_JSQR_JSQ4_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 15, 19)

	)

211 
	#STM32F4_ADC_JSQR_JSQ3
(
vÆ
Ë
	`BSP_FLD32
(val, 10, 14)

212 
	#STM32F4_ADC_JSQR_JSQ3_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 14)

	)

213 
	#STM32F4_ADC_JSQR_JSQ3_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 14)

	)

214 
	#STM32F4_ADC_JSQR_JSQ2
(
vÆ
Ë
	`BSP_FLD32
(val, 5, 9)

215 
	#STM32F4_ADC_JSQR_JSQ2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 5, 9)

	)

216 
	#STM32F4_ADC_JSQR_JSQ2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 5, 9)

	)

217 
	#STM32F4_ADC_JSQR_JSQ1
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 4)

218 
	#STM32F4_ADC_JSQR_JSQ1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

219 
	#STM32F4_ADC_JSQR_JSQ1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 4)

	)

221 
uöt32_t
 
	mjdr
[4];

222 
	#STM32F4_ADC_JDATA
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

223 
	#STM32F4_ADC_JDATA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

224 
	#STM32F4_ADC_JDATA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

226 
uöt32_t
 
	mdr
;

227 
	#STM32F4_ADC_DATA
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

228 
	#STM32F4_ADC_DATA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

229 
	#STM32F4_ADC_DATA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

231 } 
__©åibuã__
 ((
∑cked
));

232 
°m32f4_adc_ch™_s
 
	t°m32f4_adc_ch™
;

234 
	s°m32f4_adc_com_s
 {

235 
uöt32_t
 
	mc§
;

236 
	#STM32F4_ADC_CSR_OVR3
 
	`BSP_BIT32
(21)

237 
	#STM32F4_ADC_CSR_STRT3
 
	`BSP_BIT32
(20)

238 
	#STM32F4_ADC_CSR_JSTRT3
 
	`BSP_BIT32
(19)

239 
	#STM32F4_ADC_CSR_JEOC3
 
	`BSP_BIT32
(18)

240 
	#STM32F4_ADC_CSR_EOC3
 
	`BSP_BIT32
(17)

241 
	#STM32F4_ADC_CSR_AWD3
 
	`BSP_BIT32
(16)

242 
	#STM32F4_ADC_CSR_OVR2
 
	`BSP_BIT32
(13)

243 
	#STM32F4_ADC_CSR_STRT2
 
	`BSP_BIT32
(12)

244 
	#STM32F4_ADC_CSR_JSTRT2
 
	`BSP_BIT32
(11)

245 
	#STM32F4_ADC_CSR_JEOC2
 
	`BSP_BIT32
(10)

246 
	#STM32F4_ADC_CSR_EOC2
 
	`BSP_BIT32
(9)

247 
	#STM32F4_ADC_CSR_AWD2
 
	`BSP_BIT32
(8)

248 
	#STM32F4_ADC_CSR_OVR1
 
	`BSP_BIT32
(5)

249 
	#STM32F4_ADC_CSR_STRT1
 
	`BSP_BIT32
(4)

250 
	#STM32F4_ADC_CSR_JSTRT1
 
	`BSP_BIT32
(3)

251 
	#STM32F4_ADC_CSR_JEOC1
 
	`BSP_BIT32
(2)

252 
	#STM32F4_ADC_CSR_EOC1
 
	`BSP_BIT32
(1)

253 
	#STM32F4_ADC_CSR_AWD1
 
	`BSP_BIT32
(0)

254 

	)

255 
uöt32_t
 
	mc¸
;

256 
	#STM32F4_ADC_CCR_TSVREFE
 
	`BSP_BIT32
(23)

257 
	#STM32F4_ADC_CCR_VBATE
 
	`BSP_BIT32
(22)

258 
	#STM32F4_ADC_CCR_ADCPRE
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 17)

259 
	#STM32F4_ADC_CCR_ADCPRE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 17)

	)

260 
	#STM32F4_ADC_CCR_ADCPRE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 17)

	)

261 
	#ADC_ADCPRE_PCLK2_2
 0

	)

262 
	#ADC_ADCPRE_PCLK2_4
 1

	)

263 
	#ADC_ADCPRE_PCLK2_6
 2

	)

264 
	#ADC_ADCPRE_PCLK2_8
 3

	)

265 
	#STM32F4_ADC_CCR_DMA
(
vÆ
Ë
	`BSP_FLD32
(val, 14, 15)

266 
	#STM32F4_ADC_CCR_DMA_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 14, 15)

	)

267 
	#STM32F4_ADC_CCR_DMA_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 14, 15)

	)

268 
	#ADC_DMA_DISABLE
 0

	)

269 
	#ADC_DMA_MODE1
 1

	)

270 
	#ADC_DMA_MODE2
 2

	)

271 
	#ADC_DMA_MODE3
 3

	)

272 
	#STM32F4_ADC_CCR_DDS
 
	`BSP_BIT32
(13)

273 
	#STM32F4_ADC_CCR_DELAY
(
vÆ
Ë
	`BSP_FLD32
(val, 8, 11)

274 
	#STM32F4_ADC_CCR_DELAY_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

275 
	#STM32F4_ADC_CCR_DELAY_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

276 
	#ADC_DELAY_5T
 0

	)

277 
	#ADC_DELAY_6T
 1

	)

278 
	#ADC_DELAY_7T
 2

	)

279 
	#ADC_DELAY_8T
 3

	)

280 
	#ADC_DELAY_9T
 4

	)

281 
	#ADC_DELAY_10T
 5

	)

282 
	#ADC_DELAY_11T
 6

	)

283 
	#ADC_DELAY_12T
 7

	)

284 
	#ADC_DELAY_13T
 8

	)

285 
	#ADC_DELAY_14T
 9

	)

286 
	#ADC_DELAY_15T
 10

	)

287 
	#ADC_DELAY_16T
 11

	)

288 
	#ADC_DELAY_17T
 12

	)

289 
	#ADC_DELAY_18T
 13

	)

290 
	#ADC_DELAY_19T
 14

	)

291 
	#ADC_DELAY_20T
 15

	)

292 
	#STM32F4_ADC_CCR_MULTI
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 4)

293 
	#STM32F4_ADC_CCR_MULTI_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 4)

	)

294 
	#STM32F4_ADC_CCR_MULTI_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 4)

	)

295 
	#ADC_MULTI_INDEPENDENT
 0x00

	)

296 
	#ADC_MULTI_DUAL_REG_INJ
 0x01

	)

297 
	#ADC_MULTI_DUAL_REG_ALT
 0x02

	)

298 
	#ADC_MULTI_DUAL_INJ
 0x05

	)

299 
	#ADC_MULTI_DUAL_REG
 0x06

	)

300 
	#ADC_MULTI_DUAL_INTRL
 0x07

	)

301 
	#ADC_MULTI_DUAL_ALT_TRIG
 0x09

	)

302 
	#ADC_MULTI_TRIPLE_REG_INJ
 0x11

	)

303 
	#ADC_MULTI_TRIPLE_REG_ALT
 0x12

	)

304 
	#ADC_MULTI_TRIPLE_INJ
 0x15

	)

305 
	#ADC_MULTI_TRIPLE_REG
 0x16

	)

306 
	#ADC_MULTI_TRIPLE_INTRL
 0x17

	)

307 
	#ADC_MULTI_TRIPLE_ALT_TRIG
 0x19

	)

309 
uöt32_t
 
	mcdr
;

310 
	#STM32F4_ADC_CDR_DATA2
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 31)

311 
	#STM32F4_ADC_CDR_DATA2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 31)

	)

312 
	#STM32F4_ADC_CDR_DATA2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 31)

	)

313 
	#STM32F4_ADC_CDR_DATA1
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

314 
	#STM32F4_ADC_CDR_DATA1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

315 
	#STM32F4_ADC_CDR_DATA1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

317 } 
__©åibuã__
 ((
∑cked
));

318 
°m32f4_adc_com_s
 
	t°m32f4_adc_com
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_exti.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_EXTI_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_EXTI_H


	)

18 
	~<b•/utûôy.h
>

20 
	#EXTI_PORTA
 0

	)

21 
	#EXTI_PORTB
 1

	)

22 
	#EXTI_PORTC
 2

	)

23 
	#EXTI_PORTD
 3

	)

24 
	#EXTI_PORTE
 4

	)

25 
	#EXTI_PORTF
 5

	)

26 
	#EXTI_PORTG
 6

	)

27 
	#EXTI_PORTH
 7

	)

28 
	#EXTI_PORTI
 8

	)

30 
	#STM32F4_EXTI_LINE22
 
	`BSP_BIT32
(21)

	)

31 
	#STM32F4_EXTI_LINE21
 
	`BSP_BIT32
(21)

	)

32 
	#STM32F4_EXTI_LINE20
 
	`BSP_BIT32
(20)

	)

33 
	#STM32F4_EXTI_LINE19
 
	`BSP_BIT32
(19)

	)

34 
	#STM32F4_EXTI_LINE18
 
	`BSP_BIT32
(18)

	)

35 
	#STM32F4_EXTI_LINE17
 
	`BSP_BIT32
(17)

	)

36 
	#STM32F4_EXTI_LINE16
 
	`BSP_BIT32
(16)

	)

37 
	#STM32F4_EXTI_LINE15
 
	`BSP_BIT32
(15)

	)

38 
	#STM32F4_EXTI_LINE14
 
	`BSP_BIT32
(14)

	)

39 
	#STM32F4_EXTI_LINE13
 
	`BSP_BIT32
(13)

	)

40 
	#STM32F4_EXTI_LINE12
 
	`BSP_BIT32
(12)

	)

41 
	#STM32F4_EXTI_LINE11
 
	`BSP_BIT32
(11)

	)

42 
	#STM32F4_EXTI_LINE10
 
	`BSP_BIT32
(10)

	)

43 
	#STM32F4_EXTI_LINE9
 
	`BSP_BIT32
(9)

	)

44 
	#STM32F4_EXTI_LINE8
 
	`BSP_BIT32
(8)

	)

45 
	#STM32F4_EXTI_LINE7
 
	`BSP_BIT32
(7)

	)

46 
	#STM32F4_EXTI_LINE6
 
	`BSP_BIT32
(6)

	)

47 
	#STM32F4_EXTI_LINE5
 
	`BSP_BIT32
(5)

	)

48 
	#STM32F4_EXTI_LINE4
 
	`BSP_BIT32
(4)

	)

49 
	#STM32F4_EXTI_LINE3
 
	`BSP_BIT32
(3)

	)

50 
	#STM32F4_EXTI_LINE2
 
	`BSP_BIT32
(2)

	)

51 
	#STM32F4_EXTI_LINE1
 
	`BSP_BIT32
(1)

	)

52 
	#STM32F4_EXTI_LINE0
 
	`BSP_BIT32
(0)

	)

54 
	s°m32f4_exti_s
 {

55 
uöt32_t
 
	mimr
;

56 
uöt32_t
 
	memr
;

57 
uöt32_t
 
	mπ§
;

58 
uöt32_t
 
	m·§
;

59 
uöt32_t
 
	mswõr
;

60 
uöt32_t
 
	m¥
;

61 } 
__©åibuã__
 ((
∑cked
));

62 
°m32f4_exti_s
 
	t°m32f4_exti
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_flash.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_FLASH_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_FLASH_H


	)

18 
	~<b•/utûôy.h
>

20 
	s°m32f4_Êash_s
 {

22 
uöt32_t
 
	ma¸
;

23 
	#STM32F4_FLASH_ACR_DCRST
 
	`BSP_BIT32
(12)

24 
	#STM32F4_FLASH_ACR_ICRST
 
	`BSP_BIT32
(11)

25 
	#STM32F4_FLASH_ACR_DCEN
 
	`BSP_BIT32
(10)

26 
	#STM32F4_FLASH_ACR_ICEN
 
	`BSP_BIT32
(9)

27 
	#STM32F4_FLASH_ACR_PRFTEN
 
	`BSP_BIT32
(8)

28 
	#STM32F4_FLASH_ACR_LATENCY
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 2)

29 
	#STM32F4_FLASH_ACR_LATENCY_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

30 
	#STM32F4_FLASH_ACR_LATENCY_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

32 
uöt32_t
 
	mkeyr
;

33 
	#STM32F4_FLASH_KEYR_KEY1
 0x45670123

	)

34 
	#STM32F4_FLASH_KEYR_KEY2
 0xCDEF89AB

	)

36 
uöt32_t
 
	m›tkeyr
;

37 
	#STM32F4_FLASH_OPTKEYR_OPTKEY1
 0x08192A3B

	)

38 
	#STM32F4_FLASH_OPTKEYR_OPTKEY2
 0x4C5D6E7F

	)

40 
uöt32_t
 
	m§
;

41 
	#STM32F4_FLASH_SR_BSY
 
	`BSP_BIT32
(16)

42 
	#STM32F4_FLASH_SR_PGSERR
 
	`BSP_BIT32
(7)

43 
	#STM32F4_FLASH_SR_PGPERR
 
	`BSP_BIT32
(6)

44 
	#STM32F4_FLASH_SR_PGAERR
 
	`BSP_BIT32
(5)

45 
	#STM32F4_FLASH_SR_WRPERR
 
	`BSP_BIT32
(4)

46 
	#STM32F4_FLASH_SR_OPERR
 
	`BSP_BIT32
(1)

47 
	#STM32F4_FLASH_SR_EOP
 
	`BSP_BIT32
(0)

48 

	)

49 
uöt32_t
 
	m¸
;

50 
	#STM32F4_FLASH_CR_LOCK
 
	`BSP_BIT32
(31)

51 
	#STM32F4_FLASH_CR_ERRIE
 
	`BSP_BIT32
(25)

52 
	#STM32F4_FLASH_CR_EOPIE
 
	`BSP_BIT32
(24)

53 
	#STM32F4_FLASH_CR_STRT
 
	`BSP_BIT32
(16)

54 
	#STM32F4_FLASH_CR_PSIZE
(
vÆ
Ë
	`BSP_FLD32
(val, 8, 9)

55 
	#STM32F4_FLASH_CR_PSIZE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 9)

	)

56 
	#STM32F4_FLASH_CR_PSIZE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 9)

	)

57 
	#STM32F4_FLASH_CR_SNB
 
	`BSP_FLD32
(
vÆ
, 3, 6)

58 
	#STM32F4_FLASH_CR_SNB_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 3, 6)

	)

59 
	#STM32F4_FLASH_CR_SNB_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 3, 6)

	)

60 
	#STM32F4_FLASH_CR_MER
 
	`BSP_BIT32
(2)

61 
	#STM32F4_FLASH_CR_SER
 
	`BSP_BIT32
(1)

62 
	#STM32F4_FLASH_CR_PG
 
	`BSP_BIT32
(0)

63 

	)

64 
uöt32_t
 
	m›t¸
;

65 
	#STM32F4_FLASH_OPTCR_NWRP
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 27)

66 
	#STM32F4_FLASH_OPTCR_NWRP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 27)

	)

67 
	#STM32F4_FLASH_OPTCR_NWRP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 27)

	)

68 
	#STM32F4_FLASH_OPTCR_RDP
(
vÆ
Ë
	`BSP_FLD32
(val, 8, 15)

69 
	#STM32F4_FLASH_OPTCR_RDP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 15)

	)

70 
	#STM32F4_FLASH_OPTCR_RDP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 15)

	)

71 
	#STM32F4_FLASH_OPTCR_USER
(
vÆ
Ë
	`BSP_FLD32
(val, 5, 7)

72 
	#STM32F4_FLASH_OPTCR_USER_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 5, 7)

	)

73 
	#STM32F4_FLASH_OPTCR_USER_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 5, 7)

	)

74 
	#STM32F4_FLASH_OPTCR_BOR_LEVEL
(
vÆ
Ë
	`BSP_FLD32
(val, 2, 3)

75 
	#STM32F4_FLASH_OPTCR_BOR_LEVEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 2, 3)

	)

76 
	#STM32F4_FLASH_OPTCR_BOR_LEVEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 2, 3)

	)

77 
	#STM32F4_FLASH_CR_OPTSTRT
 
	`BSP_BIT32
(1)

78 
	#STM32F4_FLASH_CR_OPTLOCK
 
	`BSP_BIT32
(0)

79 

	)

80 } 
__©åibuã__
 ((
∑cked
));

81 
°m32f4_Êash_s
 
	t°m32f4_Êash
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_gpio.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_GPIO_H


22 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_GPIO_H


	)

24 
	~<b•/utûôy.h
>

27 
uöt32_t
 
	mmodî
;

28 
uöt32_t
 
	mŸy≥r
;

29 
uöt32_t
 
	mo•ìdr
;

30 
uöt32_t
 
	mpupdr
;

31 
uöt32_t
 
	midr
;

32 
uöt32_t
 
	modr
;

33 
uöt32_t
 
	mb§r
;

34 
uöt32_t
 
	mlckr
;

35 
uöt32_t
 
	ma‰
 [2];

36 
uöt32_t
 
	mª£rved_28
 [246];

37 } 
	t°m32f4_gpio
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_otgfs.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_OTGFS_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_OTGFS_H


	)

18 
	~<b•/utûôy.h
>

20 
	#USB_OTG_NUM_EPS
 4

	)

21 
	#USB_OTG_MAX_TX_FIFOS
 4

	)

23 
	#USB_FIFO_BASE
 0x1000

	)

24 
	#USB_FIFO_OFFS
 0x1000

	)

26 
	s°m32f4_Ÿgfs_s
 {

27 
uöt32_t
 
	mgŸg˘l
;

28 
	#STM32F4_OTGFS_GOTGCTL_BSVLD
 
	`BSP_BIT32
(19)

29 
	#STM32F4_OTGFS_GOTGCTL_ASVLD
 
	`BSP_BIT32
(18)

30 
	#STM32F4_OTGFS_GOTGCTL_DBCT
 
	`BSP_BIT32
(17)

31 
	#STM32F4_OTGFS_GOTGCTL_CIDSTS
 
	`BSP_BIT32
(16)

32 
	#STM32F4_OTGFS_GOTGCTL_DHNPEN
 
	`BSP_BIT32
(11)

33 
	#STM32F4_OTGFS_GOTGCTL_HSHNPEN
 
	`BSP_BIT32
(10)

34 
	#STM32F4_OTGFS_GOTGCTL_HNPRQ
 
	`BSP_BIT32
(9)

35 
	#STM32F4_OTGFS_GOTGCTL_HNGSCS
 
	`BSP_BIT32
(8)

36 
	#STM32F4_OTGFS_GOTGCTL_SRQ
 
	`BSP_BIT32
(1)

37 
	#STM32F4_OTGFS_GOTGCTL_SRQSCS
 
	`BSP_BIT32
(0)

38 

	)

39 
uöt32_t
 
	mgŸgöt
;

40 
	#STM32F4_OTGFS_GOTGINT_DBCDNE
 
	`BSP_BIT32
(19)

41 
	#STM32F4_OTGFS_GOTGINT_ADTOCHG
 
	`BSP_BIT32
(18)

42 
	#STM32F4_OTGFS_GOTGINT_HNGDET
 
	`BSP_BIT32
(17)

43 
	#STM32F4_OTGFS_GOTGINT_HNSSCHG
 
	`BSP_BIT32
(9)

44 
	#STM32F4_OTGFS_GOTGINT_SRSSCHG
 
	`BSP_BIT32
(8)

45 
	#STM32F4_OTGFS_GOTGINT_SEDET
 
	`BSP_BIT32
(2)

46 

	)

47 
uöt32_t
 
	mgahbcfg
;

48 
	#STM32F4_OTGFS_GAHBCFG_PTXFELVL
 
	`BSP_BIT32
(8)

49 
	#STM32F4_OTGFS_GAHBCFG_TXFELVL
 
	`BSP_BIT32
(7)

50 
	#STM32F4_OTGFS_GAHBCFG_GINTMSK
 
	`BSP_BIT32
(0)

51 

	)

52 
uöt32_t
 
	mgusbcfg
;

53 
	#STM32F4_OTGFS_GUSBCFG_CTXPKT
 
	`BSP_BIT32
(31)

54 
	#STM32F4_OTGFS_GUSBCFG_FDMOD
 
	`BSP_BIT32
(30)

55 
	#STM32F4_OTGFS_GUSBCFG_FHMOD
 
	`BSP_BIT32
(29)

56 
	#STM32F4_OTGFS_GUSBCFG_TRDT
(
vÆ
Ë
	`BSP_FLD32
(val, 10, 13)

57 
	#STM32F4_OTGFS_GUSBCFG_TRDT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 13)

	)

58 
	#STM32F4_OTGFS_GUSBCFG_TRDT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 13)

	)

59 
	#STM32F4_OTGFS_GUSBCFG_HNPCAP
 
	`BSP_BIT32
(9)

60 
	#STM32F4_OTGFS_GUSBCFG_SRPCAP
 
	`BSP_BIT32
(8)

61 
	#STM32F4_OTGFS_GUSBCFG_PHYSEL
 
	`BSP_BIT32
(6)

62 
	#STM32F4_OTGFS_GUSBCFG_TOCAL
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 2)

63 
	#STM32F4_OTGFS_GUSBCFG_TOCAL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 2)

	)

64 
	#STM32F4_OTGFS_GUSBCFG_TOCAL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 2)

	)

66 
uöt32_t
 
	mgr°˘l
;

67 
	#STM32F4_OTGFS_GRSTCTL_AHBIDL
 
	`BSP_BIT32
(31)

68 
	#STM32F4_OTGFS_GRSTCTL_TXFNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 6, 10)

69 
	#STM32F4_OTGFS_GRSTCTL_TXFNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 10)

	)

70 
	#STM32F4_OTGFS_GRSTCTL_TXFNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 10)

	)

71 
	#STM32F4_OTGFS_GRSTCTL_TXFNUM_ALL
 
	`STM32F4_OTGFS_GRSTCTL_TXFNUM
(0x10)

	)

72 
	#STM32F4_OTGFS_GRSTCTL_TXFFLSH
 
	`BSP_BIT32
(5)

73 
	#STM32F4_OTGFS_GRSTCTL_RXFFLSH
 
	`BSP_BIT32
(4)

74 
	#STM32F4_OTGFS_GRSTCTL_FCRST
 
	`BSP_BIT32
(2)

75 
	#STM32F4_OTGFS_GRSTCTL_HSRST
 
	`BSP_BIT32
(1)

76 
	#STM32F4_OTGFS_GRSTCTL_CSRST
 
	`BSP_BIT32
(0)

77 

	)

78 
uöt32_t
 
	mgöt°s
;

79 
	#STM32F4_OTGFS_GINTSTS_WKUPINT
 
	`BSP_BIT32
(31)

80 
	#STM32F4_OTGFS_GINTSTS_SRQINT
 
	`BSP_BIT32
(30)

81 
	#STM32F4_OTGFS_GINTSTS_DISCINT
 
	`BSP_BIT32
(29)

82 
	#STM32F4_OTGFS_GINTSTS_CIDSCHG
 
	`BSP_BIT32
(28)

83 
	#STM32F4_OTGFS_GINTSTS_PTXFE
 
	`BSP_BIT32
(26)

84 
	#STM32F4_OTGFS_GINTSTS_HCINT
 
	`BSP_BIT32
(25)

85 
	#STM32F4_OTGFS_GINTSTS_HPRTINT
 
	`BSP_BIT32
(24)

86 
	#STM32F4_OTGFS_GINTSTS_IPXFR
 
	`BSP_BIT32
(21)

87 
	#STM32F4_OTGFS_GINTSTS_IISOOXFR
 
	`BSP_BIT32
(21)

88 
	#STM32F4_OTGFS_GINTSTS_IISOIXFR
 
	`BSP_BIT32
(20)

89 
	#STM32F4_OTGFS_GINTSTS_OEPINT
 
	`BSP_BIT32
(19)

90 
	#STM32F4_OTGFS_GINTSTS_IEPINT
 
	`BSP_BIT32
(18)

91 
	#STM32F4_OTGFS_GINTSTS_EOPF
 
	`BSP_BIT32
(15)

92 
	#STM32F4_OTGFS_GINTSTS_ISOODRP
 
	`BSP_BIT32
(14)

93 
	#STM32F4_OTGFS_GINTSTS_ENUMDNE
 
	`BSP_BIT32
(13)

94 
	#STM32F4_OTGFS_GINTSTS_USBRST
 
	`BSP_BIT32
(12)

95 
	#STM32F4_OTGFS_GINTSTS_USBSUSP
 
	`BSP_BIT32
(11)

96 
	#STM32F4_OTGFS_GINTSTS_ESUSP
 
	`BSP_BIT32
(10)

97 
	#STM32F4_OTGFS_GINTSTS_GONAKEFF
 
	`BSP_BIT32
(7)

98 
	#STM32F4_OTGFS_GINTSTS_GINAKEFF
 
	`BSP_BIT32
(6)

99 
	#STM32F4_OTGFS_GINTSTS_NPTXFE
 
	`BSP_BIT32
(5)

100 
	#STM32F4_OTGFS_GINTSTS_RXFLVL
 
	`BSP_BIT32
(4)

101 
	#STM32F4_OTGFS_GINTSTS_SOF
 
	`BSP_BIT32
(3)

102 
	#STM32F4_OTGFS_GINTSTS_OTGINT
 
	`BSP_BIT32
(2)

103 
	#STM32F4_OTGFS_GINTSTS_MMIS
 
	`BSP_BIT32
(1)

104 
	#STM32F4_OTGFS_GINTSTS_CMOD
 
	`BSP_BIT32
(0)

105 

	)

106 
uöt32_t
 
	mgötmsk
;

108 
uöt32_t
 
	mgrx°§
;

110 
uöt32_t
 
	mgrx°•
;

111 
	#STM32F4_OTGFS_GRXSTSP_FRMNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 21, 24)

112 
	#STM32F4_OTGFS_GRXSTSP_FRMNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 21, 24)

	)

113 
	#STM32F4_OTGFS_GRXSTSP_FRMNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 21, 24)

	)

114 
	#STM32F4_OTGFS_GRXSTSP_PKTSTS
(
vÆ
Ë
	`BSP_FLD32
(val, 17, 20)

115 
	#STM32F4_OTGFS_GRXSTSP_PKTSTS_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 17, 20)

	)

116 
	#STM32F4_OTGFS_GRXSTSP_PKTSTS_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 17, 20)

	)

117 
	#PKTSTS_IN_DATA
 (0x2)

	)

118 
	#PKTSTS_IN_COMPLETE
 (0x3)

	)

119 
	#PKTSTS_TOGGLE_ERR
 (0x5)

	)

120 
	#PKTSTS_HALTED
 (0x7)

	)

121 
	#PKTSTS_OUTNAK
 (0x1)

	)

122 
	#PKTSTS_OUT_DATA
 (0x2)

	)

123 
	#PKTSTS_OUT_COMPLETE
 (0x3)

	)

124 
	#PKTSTS_SETUP_COMPLETE
 (0x4)

	)

125 
	#PKTSTS_SETUP_DATA
 (0x6)

	)

126 
	#STM32F4_OTGFS_GRXSTSP_DPIG
(
vÆ
Ë
	`BSP_FLD32
(val, 15, 16)

127 
	#STM32F4_OTGFS_GRXSTSP_DPID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 15, 16)

	)

128 
	#STM32F4_OTGFS_GRXSTSP_DPID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 15, 16)

	)

129 
	#STM32F4_OTGFS_GRXSTSP_DPID_DATA0
 
	`STM32F4_OTGFS_GRXSTSP_PKTSTS
(0x0)

	)

130 
	#STM32F4_OTGFS_GRXSTSP_DPID_DATA1
 
	`STM32F4_OTGFS_GRXSTSP_PKTSTS
(0x1)

	)

131 
	#STM32F4_OTGFS_GRXSTSP_DPID_DATA2
 
	`STM32F4_OTGFS_GRXSTSP_PKTSTS
(0x2)

	)

132 
	#STM32F4_OTGFS_GRXSTSP_DPID_MDATA0
 
	`STM32F4_OTGFS_GRXSTSP_PKTSTS
(0x3)

	)

133 
	#STM32F4_OTGFS_GRXSTSP_BCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 4, 14)

134 
	#STM32F4_OTGFS_GRXSTSP_BCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 14)

	)

135 
	#STM32F4_OTGFS_GRXSTSP_BCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 14)

	)

136 
	#STM32F4_OTGFS_GRXSTSP_CHNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 3)

137 
	#STM32F4_OTGFS_GRXSTSP_CHNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

138 
	#STM32F4_OTGFS_GRXSTSP_CHNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

139 
	#STM32F4_OTGFS_GRXSTSP_EPNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 3)

140 
	#STM32F4_OTGFS_GRXSTSP_EPNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

141 
	#STM32F4_OTGFS_GRXSTSP_EPNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

143 
uöt32_t
 
	mgrxfsiz
;

144 
	#STM32F4_OTGFS_GRXFSIZ_RXFD
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 15)

	)

145 
	#STM32F4_OTGFS_GRXFSIZ_RXFD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

146 
	#STM32F4_OTGFS_GRXFSIZ_RXFD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

147 
	#STM32F4_OTGFS_GRXFSIZ_RXFD_MIN
 16

	)

148 
	#STM32F4_OTGFS_GRXFSIZ_RXFD_MAX
 256

	)

150 
uöt32_t
 
	mdõ±xf0
;

151 
	#STM32F4_OTGFS_DIEPTXF_DEPTH
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 31)

	)

152 
	#STM32F4_OTGFS_DIEPTXF_DEPTH_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 31)

	)

153 
	#STM32F4_OTGFS_DIEPTXF_DEPTH_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 31)

	)

154 
	#STM32F4_OTGFS_DIEPTXF_DEPTH_MIN
 16

	)

155 
	#STM32F4_OTGFS_DIEPTXF_DEPTH_MAX
 256

	)

156 
	#STM32F4_OTGFS_DIEPTXF_SADDR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 15)

	)

157 
	#STM32F4_OTGFS_DIEPTXF_SADDR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

158 
	#STM32F4_OTGFS_DIEPTXF_SADDR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

160 
uöt32_t
 
	mªsv2C
;

162 
uöt32_t
 
	mgi2c˘l
;

163 
uöt32_t
 
	mªsv34
;

165 
uöt32_t
 
	mgccfg
;

166 
	#STM32F4_OTGFS_GCCFG_NOVBUSSENS
 
	`BSP_BIT32
(21)

167 
	#STM32F4_OTGFS_GCCFG_SOFOUTEN
 
	`BSP_BIT32
(20)

168 
	#STM32F4_OTGFS_GCCFG_VBUSBSEN
 
	`BSP_BIT32
(19)

169 
	#STM32F4_OTGFS_GCCFG_VBUSASEN
 
	`BSP_BIT32
(18)

170 
	#STM32F4_OTGFS_GCCFG_PWRDWN
 
	`BSP_BIT32
(16)

171 

	)

172 
uöt32_t
 
	mcid
;

174 
uöt32_t
 
	mªsv40
[48];

176 
uöt32_t
 
	mh±xfsiz
;

178 
uöt32_t
 
	mdõ±xf
[
USB_OTG_MAX_TX_FIFOS
];

180 } 
__©åibuã__
 ((
∑cked
));

181 
°m32f4_Ÿgfs_s
 
	t°m32f4_Ÿgfs
;

183 
	s°m32f4_Ÿgfs_dªgs_s
 {

184 
uöt32_t
 
	mdcfg
;

185 
	#STM32F4_OTGFS_DCFG_PFIVL
(
vÆ
Ë
	`BSP_FLD32
(val, 11, 12)

186 
	#STM32F4_OTGFS_DCFG_PFIVL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 11, 12)

	)

187 
	#STM32F4_OTGFS_DCFG_PFIVL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 11, 12)

	)

188 
	#PFIVL_80
 0

	)

189 
	#PFIVL_85
 1

	)

190 
	#PFIVL_90
 2

	)

191 
	#PFIVL_95
 3

	)

192 
	#STM32F4_OTGFS_DCFG_DAD
(
vÆ
Ë
	`BSP_FLD32
(val, 4, 10)

193 
	#STM32F4_OTGFS_DCFG_DAD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 10)

	)

194 
	#STM32F4_OTGFS_DCFG_DAD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 10)

	)

195 
	#STM32F4_OTGFS_DCFG_NZLSOHSK
 
	`BSP_BIT32
(2)

196 
	#STM32F4_OTGFS_DCFG_DSPD
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 1)

197 
	#STM32F4_OTGFS_DCFG_DSPD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

198 
	#STM32F4_OTGFS_DCFG_DSPD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 1)

	)

199 
	#STM32F4_OTGFS_DCFG_DSPD_FULL
 
	`STM32F4_OTGFS_DCFG_DSPD
(0x3)

	)

201 
uöt32_t
 
	md˘l
;

202 
	#STM32F4_OTGFS_DCTL_POPRGDNE
 
	`BSP_BIT32
(11)

203 
	#STM32F4_OTGFS_DCTL_CGONAK
 
	`BSP_BIT32
(10)

204 
	#STM32F4_OTGFS_DCTL_SGONAK
 
	`BSP_BIT32
(9)

205 
	#STM32F4_OTGFS_DCTL_CGINAK
 
	`BSP_BIT32
(8)

206 
	#STM32F4_OTGFS_DCTL_SGINAK
 
	`BSP_BIT32
(7)

207 
	#STM32F4_OTGFS_DCTL_TCTL
(
vÆ
Ë
	`BSP_FLD32
(val, 4, 6)

208 
	#STM32F4_OTGFS_DCTL_TCTL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 6)

	)

209 
	#STM32F4_OTGFS_DCTL_TCTL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 6)

	)

210 
	#STM32F4_OTGFS_DCTL_GONSTS
 
	`BSP_BIT32
(3)

211 
	#STM32F4_OTGFS_DCTL_GINSTS
 
	`BSP_BIT32
(2)

212 
	#STM32F4_OTGFS_DCTL_SDIS
 
	`BSP_BIT32
(1)

213 
	#STM32F4_OTGFS_DCTL_RWUSIG
 
	`BSP_BIT32
(0)

214 

	)

215 
uöt32_t
 
	md°s
;

216 
	#STM32F4_OTGFS_DSTS_FNSOF
(
vÆ
Ë
	`BSP_FLD32
(val, 8, 21)

217 
	#STM32F4_OTGFS_DSTS_FNSOF_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 21)

	)

218 
	#STM32F4_OTGFS_DSTS_EERR
 
	`BSP_BIT32
(3)

219 
	#STM32F4_OTGFS_DSTS_ENUMSPD
(
vÆ
Ë
	`BSP_FLD32
(val, 1, 2)

220 
	#STM32F4_OTGFS_DSTS_ENUMSPD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 2)

	)

221 
	#STM32F4_OTGFS_DSTS_ENUMSPD_FULL
 
	`STM32F4_OTGFS_DSTS_ENUMSPD
(0x3)

	)

222 
	#STM32F4_OTGFS_DSTS_SUSPSTS
 
	`BSP_BIT32
(0)

223 

	)

224 
uöt32_t
 
	munu£d4
;

226 
uöt32_t
 
	mdõpmsk
;

228 
uöt32_t
 
	md€pmsk
;

230 
uöt32_t
 
	mdaöt
;

231 
	#STM32F4_OTGFS_DAINT_OEPINT15
 
	`BSP_BIT32
(31)

232 
	#STM32F4_OTGFS_DAINT_OEPINT14
 
	`BSP_BIT32
(30)

233 
	#STM32F4_OTGFS_DAINT_OEPINT13
 
	`BSP_BIT32
(29)

234 
	#STM32F4_OTGFS_DAINT_OEPINT12
 
	`BSP_BIT32
(28)

235 
	#STM32F4_OTGFS_DAINT_OEPINT11
 
	`BSP_BIT32
(27)

236 
	#STM32F4_OTGFS_DAINT_OEPINT10
 
	`BSP_BIT32
(26)

237 
	#STM32F4_OTGFS_DAINT_OEPINT9
 
	`BSP_BIT32
(25)

238 
	#STM32F4_OTGFS_DAINT_OEPINT8
 
	`BSP_BIT32
(24)

239 
	#STM32F4_OTGFS_DAINT_OEPINT7
 
	`BSP_BIT32
(23)

240 
	#STM32F4_OTGFS_DAINT_OEPINT6
 
	`BSP_BIT32
(22)

241 
	#STM32F4_OTGFS_DAINT_OEPINT5
 
	`BSP_BIT32
(21)

242 
	#STM32F4_OTGFS_DAINT_OEPINT4
 
	`BSP_BIT32
(20)

243 
	#STM32F4_OTGFS_DAINT_OEPINT3
 
	`BSP_BIT32
(19)

244 
	#STM32F4_OTGFS_DAINT_OEPINT2
 
	`BSP_BIT32
(18)

245 
	#STM32F4_OTGFS_DAINT_OEPINT1
 
	`BSP_BIT32
(17)

246 
	#STM32F4_OTGFS_DAINT_OEPINT0
 
	`BSP_BIT32
(16)

247 
	#STM32F4_OTGFS_DAINT_IEPINT15
 
	`BSP_BIT32
(15)

248 
	#STM32F4_OTGFS_DAINT_IEPINT14
 
	`BSP_BIT32
(14)

249 
	#STM32F4_OTGFS_DAINT_IEPINT13
 
	`BSP_BIT32
(13)

250 
	#STM32F4_OTGFS_DAINT_IEPINT12
 
	`BSP_BIT32
(12)

251 
	#STM32F4_OTGFS_DAINT_IEPINT11
 
	`BSP_BIT32
(11)

252 
	#STM32F4_OTGFS_DAINT_IEPINT10
 
	`BSP_BIT32
(10)

253 
	#STM32F4_OTGFS_DAINT_IEPINT9
 
	`BSP_BIT32
(9)

254 
	#STM32F4_OTGFS_DAINT_IEPINT8
 
	`BSP_BIT32
(8)

255 
	#STM32F4_OTGFS_DAINT_IEPINT7
 
	`BSP_BIT32
(7)

256 
	#STM32F4_OTGFS_DAINT_IEPINT6
 
	`BSP_BIT32
(6)

257 
	#STM32F4_OTGFS_DAINT_IEPINT5
 
	`BSP_BIT32
(5)

258 
	#STM32F4_OTGFS_DAINT_IEPINT4
 
	`BSP_BIT32
(4)

259 
	#STM32F4_OTGFS_DAINT_IEPINT3
 
	`BSP_BIT32
(3)

260 
	#STM32F4_OTGFS_DAINT_IEPINT2
 
	`BSP_BIT32
(2)

261 
	#STM32F4_OTGFS_DAINT_IEPINT1
 
	`BSP_BIT32
(1)

262 
	#STM32F4_OTGFS_DAINT_IEPINT0
 
	`BSP_BIT32
(0)

263 

	)

264 
uöt32_t
 
	mdaötmsk
;

265 
	#STM32F4_OTGFS_DAINTMSK_OEPM
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 31)

266 
	#STM32F4_OTGFS_DAINTMSK_OEPM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 31)

	)

267 
	#STM32F4_OTGFS_DAINTMSK_OEPM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 31)

	)

268 
	#STM32F4_OTGFS_DAINTMSK_IEPM
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

269 
	#STM32F4_OTGFS_DAINTMSK_IEPM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

270 
	#STM32F4_OTGFS_DAINTMSK_IEPM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

272 
uöt32_t
 
	munu£d5
[2];

274 
uöt32_t
 
	mdvbusdis
;

275 
	#STM32F4_OTGFS_DVBUSDIS_VBUSDT
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

276 
	#STM32F4_OTGFS_DVBUSDIS_VBUSDT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

277 
	#STM32F4_OTGFS_DVBUSDIS_VBUSDT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

279 
uöt32_t
 
	mdvbu•ul£
;

280 
	#STM32F4_OTGFS_DVBUSPULSE_DVBUSP
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

281 
	#STM32F4_OTGFS_DVBUSPULSE_DVBUSP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

282 
	#STM32F4_OTGFS_DVBUSPULSE_DVBUSP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

284 
uöt32_t
 
	munu£d6
;

286 
uöt32_t
 
	mdõ≥mpmsk
;

287 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM15
 
	`BSP_BIT32
(15)

288 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM14
 
	`BSP_BIT32
(14)

289 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM13
 
	`BSP_BIT32
(13)

290 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM12
 
	`BSP_BIT32
(12)

291 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM11
 
	`BSP_BIT32
(11)

292 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM10
 
	`BSP_BIT32
(10)

293 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM9
 
	`BSP_BIT32
(9)

294 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM8
 
	`BSP_BIT32
(8)

295 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM7
 
	`BSP_BIT32
(7)

296 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM6
 
	`BSP_BIT32
(6)

297 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM5
 
	`BSP_BIT32
(5)

298 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM4
 
	`BSP_BIT32
(4)

299 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM3
 
	`BSP_BIT32
(3)

300 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM2
 
	`BSP_BIT32
(2)

301 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM1
 
	`BSP_BIT32
(1)

302 
	#STM32F4_OTGFS_DIEPEMPMSK_INEPTXFEM0
 
	`BSP_BIT32
(0)

303 

	)

304 } 
__©åibuã__
 ((
∑cked
));

305 
°m32f4_Ÿgfs_dªgs_s
 
	t°m32f4_Ÿgfs_dªgs
;

307 
	s°m32f4_Ÿgfs_öïªgs_s
 {

308 
uöt32_t
 
	mdõp˘l
;

309 
	#STM32F4_OTGFS_DIEPCTL_EPENA
 
	`BSP_BIT32
(31)

310 
	#STM32F4_OTGFS_DIEPCTL_EPDIS
 
	`BSP_BIT32
(30)

311 
	#STM32F4_OTGFS_DIEPCTL_SODDFRM
 
	`BSP_BIT32
(29)

312 
	#STM32F4_OTGFS_DIEPCTL_SD0PID
 
	`BSP_BIT32
(28)

313 
	#STM32F4_OTGFS_DIEPCTL_SEVNFRM
 
	`BSP_BIT32
(28)

314 
	#STM32F4_OTGFS_DIEPCTL_SNAK
 
	`BSP_BIT32
(27)

315 
	#STM32F4_OTGFS_DIEPCTL_CNAK
 
	`BSP_BIT32
(26)

316 
	#STM32F4_OTGFS_DIEPCTL_TXFNUM
(
vÆ
Ë
	`BSP_FLD32
(val, 22, 25)

317 
	#STM32F4_OTGFS_DIEPCTL_TXFNUM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 22, 25)

	)

318 
	#STM32F4_OTGFS_DIEPCTL_TXFNUM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 22, 25)

	)

319 
	#STM32F4_OTGFS_DIEPCTL_STALL
 
	`BSP_BIT32
(21)

320 
	#STM32F4_OTGFS_DIEPCTL_EPTYP
(
vÆ
Ë
	`BSP_FLD32
(val, 18, 19)

321 
	#STM32F4_OTGFS_DIEPCTL_EPTYP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 18, 19)

	)

322 
	#STM32F4_OTGFS_DIEPCTL_EPTYP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 18, 19)

	)

323 
	#EPTYPE_CTRL
 0

	)

324 
	#EPTYPE_ISOC
 1

	)

325 
	#EPTYPE_BULK
 2

	)

326 
	#EPTYPE_INTR
 3

	)

327 
	#STM32F4_OTGFS_DIEPCTL_NAKSTS
 
	`BSP_BIT32
(17)

328 
	#STM32F4_OTGFS_DIEPCTL_EONUM_DPID
 
	`BSP_BIT32
(16)

329 
	#STM32F4_OTGFS_DIEPCTL_USBAEP
 
	`BSP_BIT32
(15)

330 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 1)

331 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

332 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 1)

	)

333 
	#EP0_MPSIZ_8
 3

	)

334 
	#EP0_MPSIZ_16
 2

	)

335 
	#EP0_MPSIZ_32
 1

	)

336 
	#EP0_MPSIZ_64
 0

	)

337 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_8
 
	`STM32F4_OTGFS_DIEPCTL_MPSIZ
(
EP0_MPSIZ_8
)

	)

338 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_16
 
	`STM32F4_OTGFS_DIEPCTL_MPSIZ
(
EP0_MPSIZ_16
)

	)

339 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_32
 
	`STM32F4_OTGFS_DIEPCTL_MPSIZ
(
EP0_MPSIZ_32
)

	)

340 
	#STM32F4_OTGFS_DIEPCTL_EP0_MPSIZ_64
 
	`STM32F4_OTGFS_DIEPCTL_MPSIZ
(
EP0_MPSIZ_64
)

	)

341 
	#STM32F4_OTGFS_DIEPCTL_MPSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 10)

342 
	#STM32F4_OTGFS_DIEPCTL_MPSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 10)

	)

343 
	#STM32F4_OTGFS_DIEPCTL_MPSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 10)

	)

345 
uöt32_t
 
	mª£rved_04
;

347 
uöt32_t
 
	mdõpöt
;

348 
	#STM32F4_OTGFS_DIEPINT_TXFE
 
	`BSP_BIT32
(7)

349 
	#STM32F4_OTGFS_DIEPINT_INEPNE
 
	`BSP_BIT32
(6)

350 
	#STM32F4_OTGFS_DIEPINT_ITTXFE
 
	`BSP_BIT32
(4)

351 
	#STM32F4_OTGFS_DIEPINT_TOC
 
	`BSP_BIT32
(3)

352 
	#STM32F4_OTGFS_DIEPINT_EPDISD
 
	`BSP_BIT32
(1)

353 
	#STM32F4_OTGFS_DIEPINT_XFRC
 
	`BSP_BIT32
(0)

354 

	)

355 
uöt32_t
 
	mª£rved_0C
;

357 
uöt32_t
 
	mdõ±siz
;

358 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_PKTCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 19, 20)

359 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_PKTCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 19, 20)

	)

360 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_PKTCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 19, 20)

	)

361 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_XFRSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 6)

362 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_XFRSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 6)

	)

363 
	#STM32F4_OTGFS_DIEPTSIZ_EP0_XFRSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 6)

	)

364 
	#STM32F4_OTGFS_DIEPTSIZ_MCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 29, 30)

365 
	#STM32F4_OTGFS_DIEPTSIZ_MCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 29, 30)

	)

366 
	#STM32F4_OTGFS_DIEPTSIZ_MCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 29, 30)

	)

367 
	#STM32F4_OTGFS_DIEPTSIZ_PKTCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 19, 28)

368 
	#STM32F4_OTGFS_DIEPTSIZ_PKTCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 19, 28)

	)

369 
	#STM32F4_OTGFS_DIEPTSIZ_PKTCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 19, 28)

	)

370 
	#STM32F4_OTGFS_DIEPTSIZ_XFRSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 18)

371 
	#STM32F4_OTGFS_DIEPTSIZ_XFRSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 18)

	)

372 
	#STM32F4_OTGFS_DIEPTSIZ_XFRSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 18)

	)

374 
uöt32_t
 
	mª£rved_14
;

376 
uöt32_t
 
	mdtxf°s
;

377 
	#STM32F4_OTGFS_DTXFSTS_INEPTFSAV
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 15)

378 
	#STM32F4_OTGFS_DTXFSTS_INEPTFSAV_GET
(
ªg
Ë
	`BSP_FLD32
‘eg, 0, 15)

	)

379 
	#STM32F4_OTGFS_DTXFSTS_INEPTFSAV_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

381 
uöt32_t
 
	mª£rved_1C
;

383 } 
__©åibuã__
 ((
∑cked
));

384 
°m32f4_Ÿgfs_öïªgs_s
 
	t°m32f4_Ÿgfs_öïªgs
;

386 
	s°m32f4_Ÿgfs_ouã¥egs_s
 {

387 
uöt32_t
 
	md€p˘l
;

388 
	#STM32F4_OTGFS_DOEPCTL_EPENA
 
	`BSP_BIT32
(31)

389 
	#STM32F4_OTGFS_DOEPCTL_EPDIS
 
	`BSP_BIT32
(30)

390 
	#STM32F4_OTGFS_DOEPCTL_SD1PID
 
	`BSP_BIT32
(29)

391 
	#STM32F4_OTGFS_DOEPCTL_SD0PID
 
	`BSP_BIT32
(28)

392 
	#STM32F4_OTGFS_DOEPCTL_SNAK
 
	`BSP_BIT32
(27)

393 
	#STM32F4_OTGFS_DOEPCTL_CNAK
 
	`BSP_BIT32
(26)

394 
	#STM32F4_OTGFS_DOEPCTL_STALL
 
	`BSP_BIT32
(21)

395 
	#STM32F4_OTGFS_DOEPCTL_SNPM
 
	`BSP_BIT32
(20)

396 
	#STM32F4_OTGFS_DOEPCTL_EPTYP
(
vÆ
Ë
	`BSP_FLD32
(val, 18, 19)

397 
	#STM32F4_OTGFS_DOEPCTL_EPTYP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 18, 19)

	)

398 
	#STM32F4_OTGFS_DOEPCTL_EPTYP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 18, 19)

	)

399 
	#STM32F4_OTGFS_DOEPCTL_NAKSTS
 
	`BSP_BIT32
(17)

400 
	#STM32F4_OTGFS_DOEPCTL_EONUM_DPID
 
	`BSP_BIT32
(16)

401 
	#STM32F4_OTGFS_DOEPCTL_USBAEP
 
	`BSP_BIT32
(15)

402 
	#STM32F4_OTGFS_DOEPCTL_MPSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 10)

403 
	#STM32F4_OTGFS_DOEPCTL_MPSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 10)

	)

404 
	#STM32F4_OTGFS_DOEPCTL_MPSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 10)

	)

406 
uöt32_t
 
	mªsv04
;

408 
uöt32_t
 
	md€pöt
;

409 
	#STM32F4_OTGFS_DOEPINT_B2BSTUP
 
	`BSP_BIT32
(6)

410 
	#STM32F4_OTGFS_DOEPINT_OTEPDIS
 
	`BSP_BIT32
(4)

411 
	#STM32F4_OTGFS_DOEPINT_STUP
 
	`BSP_BIT32
(3)

412 
	#STM32F4_OTGFS_DOEPINT_EPDISD
 
	`BSP_BIT32
(1)

413 
	#STM32F4_OTGFS_DOEPINT_XFRC
 
	`BSP_BIT32
(0)

414 

	)

415 
uöt32_t
 
	md€±siz
;

416 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_STUPCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 29, 30)

417 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_STUPCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 29, 30)

	)

418 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_STUPCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 29, 30)

	)

419 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_PKTCNT
 
	`BSP_BIT32
(19)

420 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_XFRSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 6)

421 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_XFRSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 6)

	)

422 
	#STM32F4_OTGFS_DOEPTSIZ_EP0_XFRSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 6)

	)

423 
	#STM32F4_OTGFS_DOEPTSIZ_RXDPID
(
vÆ
Ë
	`BSP_FLD32
(val, 29, 30)

424 
	#STM32F4_OTGFS_DOEPTSIZ_RXDPID_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 29, 30)

	)

425 
	#STM32F4_OTGFS_DOEPTSIZ_RXDPID_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 29, 30)

	)

426 
	#STM32F4_OTGFS_DOEPTSIZ_PKTCNT
(
vÆ
Ë
	`BSP_FLD32
(val, 19, 28)

427 
	#STM32F4_OTGFS_DOEPTSIZ_PKTCNT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 19, 28)

	)

428 
	#STM32F4_OTGFS_DOEPTSIZ_PKTCNT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 19, 28)

	)

429 
	#STM32F4_OTGFS_DOEPTSIZ_XFRSIZ
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 18)

430 
	#STM32F4_OTGFS_DOEPTSIZ_XFRSIZ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 18)

	)

431 
	#STM32F4_OTGFS_DOEPTSIZ_XFRSIZ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 18)

	)

433 
uöt32_t
 
	mªsv14
[3];

434 } 
__©åibuã__
 ((
∑cked
));

435 
°m32f4_Ÿgfs_ouã¥egs_s
 
	t°m32f4_Ÿgfs_ouã¥egs
;

437 
	s°m32f4_Ÿgfs_pwr˘Ãegs_s
 {

438 
uöt32_t
 
	mpcgc˘l
;

439 
	#STM32F4_OTGFS_PCGCCTL_PHYSUSP
 
	`BSP_BIT32
(4)

440 
	#STM32F4_OTGFS_PCGCCTL_GATEHCLK
 
	`BSP_BIT32
(1)

441 
	#STM32F4_OTGFS_PCGCCTL_STPPCLK
 
	`BSP_BIT32
(0)

442 } 
	`__©åibuã__
 ((
∑cked
));

	)

443 
°m32f4_Ÿgfs_pwr˘Ãegs_s
 
	t°m32f4_Ÿgfs_pwr˘Ãegs
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_pwr.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_PWR_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_PWR_H


	)

18 
	~<b•/utûôy.h
>

20 
	s°m32f4_pwr_s
 {

22 
uöt32_t
 
	m¸
;

23 
	#STM32F4_PWR_CR_VOS
 
	`BSP_BIT32
(14)

24 
	#STM32F4_PWR_CR_FPDS
 
	`BSP_BIT32
(9)

25 
	#STM32F4_PWR_CR_DBP
 
	`BSP_BIT32
(8)

26 
	#STM32F4_PWR_CR_PLS
 
	`BSP_FLD32
(
vÆ
, 5, 7)

27 
	#STM32F4_PWR_CR_PLS_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 5, 7)

	)

28 
	#STM32F4_PWR_CR_PLS_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 5, 7)

	)

29 
	#STM32F4_PWR_CR_PVDE
 
	`BSP_BIT32
(4)

30 
	#STM32F4_PWR_CR_CSBF
 
	`BSP_BIT32
(3)

31 
	#STM32F4_PWR_CR_CWUF
 
	`BSP_BIT32
(2)

32 
	#STM32F4_PWR_CR_PDDS
 
	`BSP_BIT32
(1)

33 
	#STM32F4_PWR_CR_LPDS
 
	`BSP_BIT32
(0)

34 

	)

35 
uöt32_t
 
	mc§
;

36 
	#STM32F4_PWR_CSR_VOSRDY
 
	`BSP_BIT32
(14)

37 
	#STM32F4_PWR_CSR_BRE
 
	`BSP_BIT32
(9)

38 
	#STM32F4_PWR_CSR_EWUP
 
	`BSP_BIT32
(8)

39 
	#STM32F4_PWR_CSR_BRR
 
	`BSP_BIT32
(3)

40 
	#STM32F4_PWR_CSR_PVDO
 
	`BSP_BIT32
(2)

41 
	#STM32F4_PWR_CSR_SBF
 
	`BSP_BIT32
(1)

42 
	#STM32F4_PWR_CSR_WUF
 
	`BSP_BIT32
(0)

43 

	)

44 } 
__©åibuã__
 ((
∑cked
));

45 
°m32f4_pwr_s
 
	t°m32f4_pwr
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_rcc.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_RCC_H


22 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_RCC_H


	)

24 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	m¸
;

35 
	#STM32F4_RCC_CR_PLLI2SRDY
 
	`BSP_BIT32
(27)

36 
	#STM32F4_RCC_CR_PLLI2SON
 
	`BSP_BIT32
(26)

37 
	#STM32F4_RCC_CR_PLLRDY
 
	`BSP_BIT32
(25)

38 
	#STM32F4_RCC_CR_PLLON
 
	`BSP_BIT32
(24)

39 
	#STM32F4_RCC_CR_CSSON
 
	`BSP_BIT32
(19)

40 
	#STM32F4_RCC_CR_HSEBYP
 
	`BSP_BIT32
(18)

41 
	#STM32F4_RCC_CR_HSERDY
 
	`BSP_BIT32
(17)

42 
	#STM32F4_RCC_CR_HSEON
 
	`BSP_BIT32
(16)

43 
	#STM32F4_RCC_CR_HSIRDY
 
	`BSP_BIT32
(1)

44 
	#STM32F4_RCC_CR_HSION
 
	`BSP_BIT32
(0)

45 

	)

46 
uöt32_t
 
	m∂lcfgr
;

47 
	#STM32F4_RCC_PLLCFGR_PLLQ
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 24, 27)

	)

48 
	#STM32F4_RCC_PLLCFGR_PLLQ_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 27)

	)

49 
	#STM32F4_RCC_PLLCFGR_PLLQ_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 27)

	)

50 
	#STM32F4_RCC_PLLCFGR_SRC
 
	`BSP_BIT32
(22)

51 
	#STM32F4_RCC_PLLCFGR_SRC_HSE
 
STM32F4_RCC_PLLCFGR_SRC


	)

52 
	#STM32F4_RCC_PLLCFGR_SRC_HSI
 0

	)

53 
	#STM32F4_RCC_PLLCFGR_PLLP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 16, 17)

	)

54 
	#STM32F4_RCC_PLLCFGR_PLLP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 17)

	)

55 
	#STM32F4_RCC_PLLCFGR_PLLP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 17)

	)

56 
	#STM32F4_RCC_PLLCFGR_PLLP_2
 
	`STM32F4_RCC_PLLCFGR_PLLP
(0)

	)

57 
	#STM32F4_RCC_PLLCFGR_PLLP_4
 
	`STM32F4_RCC_PLLCFGR_PLLP
(1)

	)

58 
	#STM32F4_RCC_PLLCFGR_PLLP_6
 
	`STM32F4_RCC_PLLCFGR_PLLP
(2)

	)

59 
	#STM32F4_RCC_PLLCFGR_PLLP_8
 
	`STM32F4_RCC_PLLCFGR_PLLP
(3)

	)

60 
	#STM32F4_RCC_PLLCFGR_PLLN
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 14)

	)

61 
	#STM32F4_RCC_PLLCFGR_PLLN_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 14)

	)

62 
	#STM32F4_RCC_PLLCFGR_PLLN_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 14)

	)

63 
	#STM32F4_RCC_PLLCFGR_PLLM
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

64 
	#STM32F4_RCC_PLLCFGR_PLLM_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

65 
	#STM32F4_RCC_PLLCFGR_PLLM_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

67 
uöt32_t
 
	mcfgr
;

68 
	#STM32F4_RCC_CFGR_MCO2
(
vÆ
Ë
	`BSP_FLD32
(val, 30, 31)

69 
	#STM32F4_RCC_CFGR_MCO2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 30, 31)

	)

70 
	#STM32F4_RCC_CFGR_MCO2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 30, 31)

	)

71 
	#STM32F4_RCC_CFGR_MCO2_SYSCLK
 
	`STM32F4_RCC_CFGR_MCO2
(0)

	)

72 
	#STM32F4_RCC_CFGR_MCO2_PLLI2S
 
	`STM32F4_RCC_CFGR_MCO2
(1)

	)

73 
	#STM32F4_RCC_CFGR_MCO2_HSE
 
	`STM32F4_RCC_CFGR_MCO2
(2)

	)

74 
	#STM32F4_RCC_CFGR_MCO2_PLL
 
	`STM32F4_RCC_CFGR_MCO2
(3)

	)

75 
	#STM32F4_RCC_CFGR_MCO2_PRE
(
vÆ
Ë
	`BSP_FLD32
(val, 27, 29)

76 
	#STM32F4_RCC_CFGR_MCO2_PRE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 27, 29)

	)

77 
	#STM32F4_RCC_CFGR_MCO2_PRE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 27, 29)

	)

78 
	#STM32F4_RCC_CFGR_MCO2_DIV1
 
	`STM32F4_RCC_CFGR_MCO2_PRE
(0)

	)

79 
	#STM32F4_RCC_CFGR_MCO2_DIV2
 
	`STM32F4_RCC_CFGR_MCO2_PRE
(4)

	)

80 
	#STM32F4_RCC_CFGR_MCO2_DIV3
 
	`STM32F4_RCC_CFGR_MCO2_PRE
(5)

	)

81 
	#STM32F4_RCC_CFGR_MCO2_DIV4
 
	`STM32F4_RCC_CFGR_MCO2_PRE
(6)

	)

82 
	#STM32F4_RCC_CFGR_MCO2_DIV5
 
	`STM32F4_RCC_CFGR_MCO2_PRE
(7)

	)

83 
	#STM32F4_RCC_CFGR_MCO1_PRE
(
vÆ
Ë
	`BSP_FLD32
(val, 24, 26)

84 
	#STM32F4_RCC_CFGR_MCO1_PRE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 24, 26)

	)

85 
	#STM32F4_RCC_CFGR_MCO1_PRE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 24, 26)

	)

86 
	#STM32F4_RCC_CFGR_MCO1_DIV1
 
	`STM32F4_RCC_CFGR_MCO1_PRE
(0)

	)

87 
	#STM32F4_RCC_CFGR_MCO1_DIV2
 
	`STM32F4_RCC_CFGR_MCO1_PRE
(4)

	)

88 
	#STM32F4_RCC_CFGR_MCO1_DIV3
 
	`STM32F4_RCC_CFGR_MCO1_PRE
(5)

	)

89 
	#STM32F4_RCC_CFGR_MCO1_DIV4
 
	`STM32F4_RCC_CFGR_MCO1_PRE
(6)

	)

90 
	#STM32F4_RCC_CFGR_MCO1_DIV5
 
	`STM32F4_RCC_CFGR_MCO1_PRE
(7)

	)

91 
	#STM32F4_RCC_CFGR_I2SSCR
 
	`BSP_BIT32
(23)

92 
	#STM32F4_RCC_CFGR_MCO1
(
vÆ
Ë
	`BSP_FLD32
(val, 21, 22)

93 
	#STM32F4_RCC_CFGR_MCO1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 21, 22)

	)

94 
	#STM32F4_RCC_CFGR_MCO1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 21, 22)

	)

95 
	#STM32F4_RCC_CFGR_MCO1_HSI
 
	`STM32F4_RCC_CFGR_MCO1
(0)

	)

96 
	#STM32F4_RCC_CFGR_MCO1_LSE
 
	`STM32F4_RCC_CFGR_MCO1
(1)

	)

97 
	#STM32F4_RCC_CFGR_MCO1_HSE
 
	`STM32F4_RCC_CFGR_MCO1
(2)

	)

98 
	#STM32F4_RCC_CFGR_MCO1_PLL
 
	`STM32F4_RCC_CFGR_MCO1
(3)

	)

99 
	#STM32F4_RCC_CFGR_RTCPRE
(
vÆ
Ë
	`BSP_FLD32
(val, 16, 20)

100 
	#STM32F4_RCC_CFGR_RTCPRE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 16, 20)

	)

101 
	#STM32F4_RCC_CFGR_RTCPRE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 16, 20)

	)

102 
	#STM32F4_RCC_CFGR_PPRE2
(
vÆ
Ë
	`BSP_FLD32
(val, 13, 15)

103 
	#STM32F4_RCC_CFGR_PPRE2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 13, 15)

	)

104 
	#STM32F4_RCC_CFGR_PPRE2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 13, 15)

	)

105 
	#STM32F4_RCC_CFGR_PPRE2_DIV1
 
	`STM32F4_RCC_CFGR_PPRE2
(0)

	)

106 
	#STM32F4_RCC_CFGR_PPRE2_DIV2
 
	`STM32F4_RCC_CFGR_PPRE2
(4)

	)

107 
	#STM32F4_RCC_CFGR_PPRE2_DIV4
 
	`STM32F4_RCC_CFGR_PPRE2
(5)

	)

108 
	#STM32F4_RCC_CFGR_PPRE2_DIV8
 
	`STM32F4_RCC_CFGR_PPRE2
(6)

	)

109 
	#STM32F4_RCC_CFGR_PPRE2_DIV16
 
	`STM32F4_RCC_CFGR_PPRE2
(7)

	)

110 
	#STM32F4_RCC_CFGR_PPRE1
(
vÆ
Ë
	`BSP_FLD32
(val, 10, 12)

111 
	#STM32F4_RCC_CFGR_PPRE1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 10, 12)

	)

112 
	#STM32F4_RCC_CFGR_PPRE1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 10, 12)

	)

113 
	#STM32F4_RCC_CFGR_PPRE1_DIV1
 
	`STM32F4_RCC_CFGR_PPRE1
(0)

	)

114 
	#STM32F4_RCC_CFGR_PPRE1_DIV2
 
	`STM32F4_RCC_CFGR_PPRE1
(4)

	)

115 
	#STM32F4_RCC_CFGR_PPRE1_DIV4
 
	`STM32F4_RCC_CFGR_PPRE1
(5)

	)

116 
	#STM32F4_RCC_CFGR_PPRE1_DIV8
 
	`STM32F4_RCC_CFGR_PPRE1
(6)

	)

117 
	#STM32F4_RCC_CFGR_PPRE1_DIV16
 
	`STM32F4_RCC_CFGR_PPRE1
(7)

	)

118 
	#STM32F4_RCC_CFGR_HPRE
(
vÆ
Ë
	`BSP_FLD32
(val, 4, 15)

119 
	#STM32F4_RCC_CFGR_HPRE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

120 
	#STM32F4_RCC_CFGR_HPRE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

121 
	#STM32F4_RCC_CFGR_HPRE_DIV1
 
	`STM32F4_RCC_CFGR_HPRE
(0)

	)

122 
	#STM32F4_RCC_CFGR_HPRE_DIV2
 
	`STM32F4_RCC_CFGR_HPRE
(8)

	)

123 
	#STM32F4_RCC_CFGR_HPRE_DIV4
 
	`STM32F4_RCC_CFGR_HPRE
(9)

	)

124 
	#STM32F4_RCC_CFGR_HPRE_DIV8
 
	`STM32F4_RCC_CFGR_HPRE
(10)

	)

125 
	#STM32F4_RCC_CFGR_HPRE_DIV16
 
	`STM32F4_RCC_CFGR_HPRE
(11)

	)

126 
	#STM32F4_RCC_CFGR_HPRE_DIV64
 
	`STM32F4_RCC_CFGR_HPRE
(12)

	)

127 
	#STM32F4_RCC_CFGR_HPRE_DIV128
 
	`STM32F4_RCC_CFGR_HPRE
(13)

	)

128 
	#STM32F4_RCC_CFGR_HPRE_DIV256
 
	`STM32F4_RCC_CFGR_HPRE
(14)

	)

129 
	#STM32F4_RCC_CFGR_HPRE_DIV512
 
	`STM32F4_RCC_CFGR_HPRE
(15)

	)

130 
	#STM32F4_RCC_CFGR_SWS
(
vÆ
Ë
	`BSP_FLD32
(val, 2, 3)

131 
	#STM32F4_RCC_CFGR_SWS_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 2, 3)

	)

132 
	#STM32F4_RCC_CFGR_SWS_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 2, 3)

	)

133 
	#STM32F4_RCC_CFGR_SWS_HSI
 
	`STM32F4_RCC_CFGR_SWS
(0)

	)

134 
	#STM32F4_RCC_CFGR_SWS_HSE
 
	`STM32F4_RCC_CFGR_SWS
(1)

	)

135 
	#STM32F4_RCC_CFGR_SWS_PLL
 
	`STM32F4_RCC_CFGR_SWS
(2)

	)

136 
	#STM32F4_RCC_CFGR_SW
(
vÆ
Ë
	`BSP_FLD32
(val, 0, 1)

137 
	#STM32F4_RCC_CFGR_SW_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

138 
	#STM32F4_RCC_CFGR_SW_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 1)

	)

139 
	#STM32F4_RCC_CFGR_SW_HSI
 
	`STM32F4_RCC_CFGR_SW
(0)

	)

140 
	#STM32F4_RCC_CFGR_SW_HSE
 
	`STM32F4_RCC_CFGR_SW
(1)

	)

141 
	#STM32F4_RCC_CFGR_SW_PLL
 
	`STM32F4_RCC_CFGR_SW
(2)

	)

143 
uöt32_t
 
	mcú
;

145 
uöt32_t
 
	mahbr°r
 [3];

147 
uöt32_t
 
	mª£rved_1c
;

149 
uöt32_t
 
	m≠br°r
 [2];

151 
uöt32_t
 
	mª£rved_28
 [2];

153 
uöt32_t
 
	mahbír
 [3];

155 
uöt32_t
 
	mª£rved_3c
;

157 
uöt32_t
 
	m≠bír
 [2];

159 
uöt32_t
 
	mª£rved_48
 [2];

161 
uöt32_t
 
	mahbÕír
 [3];

163 
uöt32_t
 
	mª£rved_5c
;

165 
uöt32_t
 
	m≠bÕír
 [2];

167 
uöt32_t
 
	mª£rved_68
 [2];

169 
uöt32_t
 
	mbd¸
;

171 
uöt32_t
 
	mc§
;

173 
uöt32_t
 
	mª£rved_78
 [2];

175 
uöt32_t
 
	msscgr
;

177 
uöt32_t
 
	m∂li2scfgr
;

179 } 
	t°m32f4_rcc
;

183 
	#RCC_CR_HSION
 
	`BSP_BIT32
–0 )

	)

184 
	#RCC_CR_HSIRDY
 
	`BSP_BIT32
–1 )

	)

185 
	#RCC_CR_HSITRIM
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 3, 7 )

	)

186 
	#RCC_CR_HSITRIM_MSK
 
	`BSP_MSK32
–3, 7 )

	)

187 
	#RCC_CR_HSICAL
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 8, 15 )

	)

188 
	#RCC_CR_HSICAL_MSK
 
	`BSP_MSK32
–8, 15 )

	)

189 
	#RCC_CR_HSEON
 
	`BSP_BIT32
–16 )

	)

190 
	#RCC_CR_HSERDY
 
	`BSP_BIT32
–17 )

	)

191 
	#RCC_CR_HSEBYP
 
	`BSP_BIT32
–18 )

	)

192 
	#RCC_CR_CSSON
 
	`BSP_BIT32
–19 )

	)

193 
	#RCC_CR_PLLON
 
	`BSP_BIT32
–24 )

	)

194 
	#RCC_CR_PLLRDY
 
	`BSP_BIT32
–25 )

	)

195 
	#RCC_CR_PLLI2SON
 
	`BSP_BIT32
–26 )

	)

196 
	#RCC_CR_PLLI2SRDY
 
	`BSP_BIT32
–27 )

	)

198 
	#RCC_PLLCFGR_PLLM
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 0, 5 )

	)

199 
	#RCC_PLLCFGR_PLLM_MSK
 
	`BSP_MSK32
–0, 5 )

	)

200 
	#RCC_PLLCFGR_PLLN
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 6, 14 )

	)

201 
	#RCC_PLLCFGR_PLLN_MSK
 
	`BSP_MSK32
–6, 14 )

	)

203 
	#RCC_PLLCFGR_PLLP
 16

	)

204 
	#RCC_PLLCFGR_PLLP_MSK
 
	`BSP_MSK32
–16, 17 )

	)

205 
	#RCC_PLLCFGR_PLLP_BY_2
 0

	)

206 
	#RCC_PLLCFGR_PLLP_BY_4
 
	`BSP_FLD32
–1, 16, 17 )

	)

207 
	#RCC_PLLCFGR_PLLP_BY_6
 
	`BSP_FLD32
–2, 16, 17 )

	)

208 
	#RCC_PLLCFGR_PLLP_BY_8
 
	`BSP_FLD32
–3, 16, 17 )

	)

210 
	#RCC_PLLCFGR_PLLSRC_HSE
 
	`BSP_BIT32
–22 )

	)

211 
	#RCC_PLLCFGR_PLLSRC_HSI
 0

	)

213 
	#RCC_PLLCFGR_PLLQ
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 24, 27 )

	)

214 
	#RCC_PLLCFGR_PLLQ_MSK
 
	`BSP_MSK32
–24, 27 )

	)

216 
	#RCC_CFGR_SW
 0

	)

217 
	#RCC_CFGR_SW_MSK
 
	`BSP_MSK32
–0, 1 )

	)

218 
	#RCC_CFGR_SW_HSI
 0

	)

219 
	#RCC_CFGR_SW_HSE
 1

	)

220 
	#RCC_CFGR_SW_PLL
 2

	)

222 
	#RCC_CFGR_SWS
 2

	)

223 
	#RCC_CFGR_SWS_MSK
 
	`BSP_MSK32
–2, 3 )

	)

224 
	#RCC_CFGR_SWS_HSI
 0

	)

225 
	#RCC_CFGR_SWS_HSE
 
	`BSP_FLD32
–1, 2, 3 )

	)

226 
	#RCC_CFGR_SWS_PLL
 
	`BSP_FLD32
–2, 2, 3 )

	)

228 
	#RCC_CFGR_HPRE
 4

	)

229 
	#RCC_CFGR_HPRE_BY_1
 0

	)

230 
	#RCC_CFGR_HPRE_BY_2
 
	`BSP_FLD32
–8, 4, 7 )

	)

231 
	#RCC_CFGR_HPRE_BY_4
 
	`BSP_FLD32
–9, 4, 7 )

	)

232 
	#RCC_CFGR_HPRE_BY_8
 
	`BSP_FLD32
–10, 4, 7 )

	)

233 
	#RCC_CFGR_HPRE_BY_16
 
	`BSP_FLD32
–11, 4, 7 )

	)

234 
	#RCC_CFGR_HPRE_BY_64
 
	`BSP_FLD32
–12, 4, 7 )

	)

235 
	#RCC_CFGR_HPRE_BY_128
 
	`BSP_FLD32
–13, 4, 7 )

	)

236 
	#RCC_CFGR_HPRE_BY_256
 
	`BSP_FLD32
–14, 4, 7 )

	)

237 
	#RCC_CFGR_HPRE_BY_512
 
	`BSP_FLD32
–15, 4, 7 )

	)

239 
	#RCC_CFGR_PPRE1
 10

	)

240 
	#RCC_CFGR_PPRE1_BY_1
 0

	)

241 
	#RCC_CFGR_PPRE1_BY_2
 
	`BSP_FLD32
–4, 10, 12 )

	)

242 
	#RCC_CFGR_PPRE1_BY_4
 
	`BSP_FLD32
–5, 10, 12 )

	)

243 
	#RCC_CFGR_PPRE1_BY_8
 
	`BSP_FLD32
–6, 10, 12 )

	)

244 
	#RCC_CFGR_PPRE1_BY_16
 
	`BSP_FLD32
–7, 10, 12 )

	)

246 
	#RCC_CFGR_PPRE2
 13

	)

247 
	#RCC_CFGR_PPRE2
 
	`BSP_MSK32
–13, 15 )

	)

248 
	#RCC_CFGR_PPRE2_BY_1
 0

	)

249 
	#RCC_CFGR_PPRE2_BY_2
 
	`BSP_FLD32
–4, 13, 15 )

	)

250 
	#RCC_CFGR_PPRE2_BY_4
 
	`BSP_FLD32
–5, 13, 15 )

	)

251 
	#RCC_CFGR_PPRE2_BY_8
 
	`BSP_FLD32
–6, 13, 15 )

	)

252 
	#RCC_CFGR_PPRE2_BY_16
 
	`BSP_FLD32
–7, 13, 15 )

	)

254 
	#RCC_CFGR_RTCPRE
–
vÆ
 ) 
	`BSP_FLD32
–vÆ, 16, 20 )

	)

255 
	#RCC_CFGR_RTCPRE_MSK
 
	`BSP_MSK32
–16, 20 )

	)

257 
	#RCC_CFGR_MCO1
 21

	)

258 
	#RCC_CFGR_MCO1_MSK
 
	`BSP_MSK32
–21, 22 )

	)

259 
	#RCC_CFGR_MCO1_HSI
 0

	)

260 
	#RCC_CFGR_MCO1_LSE
 
	`BSP_FLD32
–1, 21, 22 )

	)

261 
	#RCC_CFGR_MCO1_HSE
 
	`BSP_FLD32
–2, 21, 22 )

	)

262 
	#RCC_CFGR_MCO1_PLL
 
	`BSP_FLD32
–3, 21, 22 )

	)

264 
	#RCC_CFGR_I2SSRC
 
	`BSP_BIT32
–23 )

	)

266 
	#RCC_CFGR_MCO1PRE
 24

	)

267 
	#RCC_CFGR_MCO1PRE_MSK
 
	`BSP_MSK32
–24, 26 )

	)

268 
	#RCC_CFGR_MCO1PRE_BY_1
 0

	)

269 
	#RCC_CFGR_MCO1PRE_BY_2
 
	`BSP_FLD32
–4, 24, 26 )

	)

270 
	#RCC_CFGR_MCO1PRE_BY_3
 
	`BSP_FLD32
–5, 24, 26 )

	)

271 
	#RCC_CFGR_MCO1PRE_BY_4
 
	`BSP_FLD32
–6, 24, 26 )

	)

272 
	#RCC_CFGR_MCO1PRE_BY_5
 
	`BSP_FLD32
–7, 24, 26 )

	)

274 
	#RCC_CFGR_MCO2PRE
 27

	)

275 
	#RCC_CFGR_MCO2PRE_MSK
 
	`BSP_MSK32
–27, 29 )

	)

276 
	#RCC_CFGR_MCO2PRE_BY_1
 0

	)

277 
	#RCC_CFGR_MCO2PRE_BY_2
 
	`BSP_FLD32
–4, 27, 29 )

	)

278 
	#RCC_CFGR_MCO2PRE_BY_3
 
	`BSP_FLD32
–5, 27, 29 )

	)

279 
	#RCC_CFGR_MCO2PRE_BY_4
 
	`BSP_FLD32
–6, 27, 29 )

	)

280 
	#RCC_CFGR_MCO2PRE_BY_5
 
	`BSP_FLD32
–7, 27, 29 )

	)

282 
	#RCC_CFGR_MCO2
 30

	)

283 
	#RCC_CFGR_MCO2_MSK
 
	`BSP_MSK32
–30, 31 )

	)

284 
	#RCC_CFGR_MCO2_SYSCLK
 0

	)

285 
	#RCC_CFGR_MCO2_PLLI2S
 
	`BSP_FLD32
–1, 30, 31 )

	)

286 
	#RCC_CFGR_MCO2_HSE
 
	`BSP_FLD32
–2, 30, 31 )

	)

287 
	#RCC_CFGR_MCO2_PLL
 
	`BSP_FLD32
–3, 30, 31 )

	)

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_syscfg.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_SYSCFG_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_SYSCFG_H


	)

18 
	~<b•/utûôy.h
>

20 
	#EXTI_PORTA
 0

	)

21 
	#EXTI_PORTB
 1

	)

22 
	#EXTI_PORTC
 2

	)

23 
	#EXTI_PORTD
 3

	)

24 
	#EXTI_PORTE
 4

	)

25 
	#EXTI_PORTF
 5

	)

26 
	#EXTI_PORTG
 6

	)

27 
	#EXTI_PORTH
 7

	)

28 
	#EXTI_PORTI
 8

	)

30 
	s°m32f4_syscfg_s
 {

31 
uöt32_t
 
	mmemrmp
;

32 
	#STM32F4_SYSCFG_MEM_MODE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 1)

	)

33 
	#STM32F4_SYSCFG_MEM_MODE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 1)

	)

34 
	#STM32F4_SYSCFG_MEM_MODE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 1)

	)

35 
uöt32_t
 
	mpmc
;

36 
	#STM32F4_SYSCFG_RMII_SEL
 
	`BSP_BIT32
(23)

	)

37 
uöt32_t
 
	mexti¸
[4];

38 
	#STM32F4_SYSCFG_EXTI0_IDX
 0

	)

39 
	#STM32F4_SYSCFG_EXTI0
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

40 
	#STM32F4_SYSCFG_EXTI0_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

41 
	#STM32F4_SYSCFG_EXTI0_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

42 
	#STM32F4_SYSCFG_EXTI1_IDX
 0

	)

43 
	#STM32F4_SYSCFG_EXTI1
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

44 
	#STM32F4_SYSCFG_EXTI1_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

45 
	#STM32F4_SYSCFG_EXTI1_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

46 
	#STM32F4_SYSCFG_EXTI2_IDX
 0

	)

47 
	#STM32F4_SYSCFG_EXTI2
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

48 
	#STM32F4_SYSCFG_EXTI2_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

49 
	#STM32F4_SYSCFG_EXTI2_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

50 
	#STM32F4_SYSCFG_EXTI3_IDX
 0

	)

51 
	#STM32F4_SYSCFG_EXTI3
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

52 
	#STM32F4_SYSCFG_EXTI3_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

53 
	#STM32F4_SYSCFG_EXTI3_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

54 
	#STM32F4_SYSCFG_EXTI4_IDX
 1

	)

55 
	#STM32F4_SYSCFG_EXTI4
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

56 
	#STM32F4_SYSCFG_EXTI4_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

57 
	#STM32F4_SYSCFG_EXTI4_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

58 
	#STM32F4_SYSCFG_EXTI5_IDX
 1

	)

59 
	#STM32F4_SYSCFG_EXTI5
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

60 
	#STM32F4_SYSCFG_EXTI5_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

61 
	#STM32F4_SYSCFG_EXTI5_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

62 
	#STM32F4_SYSCFG_EXTI6_IDX
 1

	)

63 
	#STM32F4_SYSCFG_EXTI6
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

64 
	#STM32F4_SYSCFG_EXTI6_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

65 
	#STM32F4_SYSCFG_EXTI6_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

66 
	#STM32F4_SYSCFG_EXTI7_IDX
 1

	)

67 
	#STM32F4_SYSCFG_EXTI7
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

68 
	#STM32F4_SYSCFG_EXTI7_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

69 
	#STM32F4_SYSCFG_EXTI7_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

70 
	#STM32F4_SYSCFG_EXTI8_IDX
 2

	)

71 
	#STM32F4_SYSCFG_EXTI8
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

72 
	#STM32F4_SYSCFG_EXTI8_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

73 
	#STM32F4_SYSCFG_EXTI8_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

74 
	#STM32F4_SYSCFG_EXTI9_IDX
 2

	)

75 
	#STM32F4_SYSCFG_EXTI9
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

76 
	#STM32F4_SYSCFG_EXTI9_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

77 
	#STM32F4_SYSCFG_EXTI9_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

78 
	#STM32F4_SYSCFG_EXTI10_IDX
 2

	)

79 
	#STM32F4_SYSCFG_EXTI10
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

80 
	#STM32F4_SYSCFG_EXTI10_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

81 
	#STM32F4_SYSCFG_EXTI10_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

82 
	#STM32F4_SYSCFG_EXTI11_IDX
 2

	)

83 
	#STM32F4_SYSCFG_EXTI11
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

84 
	#STM32F4_SYSCFG_EXTI11_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

85 
	#STM32F4_SYSCFG_EXTI11_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

86 
	#STM32F4_SYSCFG_EXTI12_IDX
 3

	)

87 
	#STM32F4_SYSCFG_EXTI12
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

88 
	#STM32F4_SYSCFG_EXTI12_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

89 
	#STM32F4_SYSCFG_EXTI12_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

90 
	#STM32F4_SYSCFG_EXTI13_IDX
 3

	)

91 
	#STM32F4_SYSCFG_EXTI13
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 4, 7)

	)

92 
	#STM32F4_SYSCFG_EXTI13_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 4, 7)

	)

93 
	#STM32F4_SYSCFG_EXTI13_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 4, 7)

	)

94 
	#STM32F4_SYSCFG_EXTI14_IDX
 3

	)

95 
	#STM32F4_SYSCFG_EXTI14
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 11)

	)

96 
	#STM32F4_SYSCFG_EXTI14_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 11)

	)

97 
	#STM32F4_SYSCFG_EXTI14_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 11)

	)

98 
	#STM32F4_SYSCFG_EXTI15_IDX
 3

	)

99 
	#STM32F4_SYSCFG_EXTI15
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 12, 15)

	)

100 
	#STM32F4_SYSCFG_EXTI15_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 12, 15)

	)

101 
	#STM32F4_SYSCFG_EXTI15_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 12, 15)

	)

102 
uöt32_t
 
	mcmp¸
;

103 
	#STM32F4_SYSCFG_CMPCR_READY
 
	`BSP_BIT32
(8)

	)

104 
	#STM32F4_SYSCFG_CMPCR_PD
 
	`BSP_BIT32
(0)

	)

105 } 
__©åibuã__
 ((
∑cked
));

106 
°m32f4_syscfg_s
 
	t°m32f4_syscfg
;

	@src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_tim.h

15 #i‚de‡
LIBBSP_ARM_STM32F4_STM32F4XXXX_TIM_H


16 
	#LIBBSP_ARM_STM32F4_STM32F4XXXX_TIM_H


	)

18 
	~<b•/utûôy.h
>

20 
	s°m32f4_tim_s
 {

21 
uöt16_t
 
	m¸1
;

22 
	#STM32F4_TIMER_CR1_CKD_DIV
 0x0300

	)

23 
	#STM32F4_TIMER_CR1_CKD_DIV1
 0x0000

	)

24 
	#STM32F4_TIMER_CR1_CKD_DIV2
 0x0100

	)

25 
	#STM32F4_TIMER_CR1_CKD_DIV3
 0x0200

	)

26 
	#STM32F4_TIMER_CR1_ARPE
 
	`BSP_BIT16
(7)

	)

27 
	#STM32F4_TIMER_CR1_CMS
 0x0060

	)

28 
	#STM32F4_TIMER_CR1_CMS_EDGE
 0x0000

	)

29 
	#STM32F4_TIMER_CR1_CMS_CENTER1
 0x0020

	)

30 
	#STM32F4_TIMER_CR1_CMS_CENTER2
 0x0040

	)

31 
	#STM32F4_TIMER_CR1_CMS_CENTER3
 0x0060

	)

32 
	#STM32F4_TIMER_CR1_DIR
 
	`BSP_BIT16
(4)

	)

33 
	#STM32F4_TIMER_CR1_DIR_UP
 0x0000

	)

34 
	#STM32F4_TIMER_CR1_DIR_DOWN
 0x0010

	)

35 
	#STM32F4_TIMER_CR1_DIR_OPM
 0x0008

	)

36 
	#STM32F4_TIMER_CR1_DIR_OPM_CONT
 0x0000

	)

37 
	#STM32F4_TIMER_CR1_DIR_OPM_STOP
 0x0008

	)

38 
	#STM32F4_TIMER_CR1_DIR_URS
 0x0004

	)

39 
	#STM32F4_TIMER_CR1_DIR_UDIS
 0x0002

	)

40 
	#STM32F4_TIMER_CR1_DIR_UDIS_EN
 0x0000

	)

41 
	#STM32F4_TIMER_CR1_DIR_UDIS_DIS
 0x0002

	)

42 
	#STM32F4_TIMER_CR1_CEN
 0x0001

	)

43 
uöt16_t
 
	mª£rved_02
;

44 
uöt16_t
 
	m¸2
;

45 
uöt16_t
 
	mª£rved_06
;

46 
uöt16_t
 
	msm¸
;

47 
uöt16_t
 
	mª£rved_0a
;

48 
uöt16_t
 
	mdõr
;

49 
	#STM32F4_TIMER_DIER_TDE
 
	`BSP_BIT16
(14)

50 
	#STM32F4_TIMER_DIER_CC4DE
 
	`BSP_BIT16
(12)

51 
	#STM32F4_TIMER_DIER_CC3DE
 
	`BSP_BIT16
(11)

52 
	#STM32F4_TIMER_DIER_CC2DE
 
	`BSP_BIT16
(10)

53 
	#STM32F4_TIMER_DIER_CC1DE
 
	`BSP_BIT16
(9)

54 
	#STM32F4_TIMER_DIER_UDE
 
	`BSP_BIT16
(8)

55 
	#STM32F4_TIMER_DIER_TIE
 
	`BSP_BIT16
(6)

56 
	#STM32F4_TIMER_DIER_CC4IE
 
	`BSP_BIT16
(4)

57 
	#STM32F4_TIMER_DIER_CC3IE
 
	`BSP_BIT16
(3)

58 
	#STM32F4_TIMER_DIER_CC2IE
 
	`BSP_BIT16
(2)

59 
	#STM32F4_TIMER_DIER_CC1IE
 
	`BSP_BIT16
(1)

60 
	#STM32F4_TIMER_DIER_UIE
 
	`BSP_BIT16
(0)

61 

	)

62 
uöt16_t
 
	mª£rved_0e
;

63 
uöt16_t
 
	m§
;

64 
	#STM32F4_TIMER_SR_CC4OF
 
	`BSP_BIT16
(12)

65 
	#STM32F4_TIMER_SR_CC3OF
 
	`BSP_BIT16
(11)

66 
	#STM32F4_TIMER_SR_CC2OF
 
	`BSP_BIT16
(10)

67 
	#STM32F4_TIMER_SR_CC1OF
 
	`BSP_BIT16
(9)

68 
	#STM32F4_TIMER_SR_TIF
 
	`BSP_BIT16
(6)

69 
	#STM32F4_TIMER_SR_CC4IF
 
	`BSP_BIT16
(4)

70 
	#STM32F4_TIMER_SR_CC3IF
 
	`BSP_BIT16
(3)

71 
	#STM32F4_TIMER_SR_CC2IF
 
	`BSP_BIT16
(2)

72 
	#STM32F4_TIMER_SR_CC1IF
 
	`BSP_BIT16
(1)

73 
	#STM32F4_TIMER_SR_UIF
 
	`BSP_BIT16
(0)

74 
uöt16_t
 
ª£rved_12
;

	)

75 
uöt16_t
 
	megr
;

76 
	#STM32F4_TIMER_EGR_TG
 
	`BSP_BIT16
(6)

77 
	#STM32F4_TIMER_EGR_CC4G
 
	`BSP_BIT16
(4)

78 
	#STM32F4_TIMER_EGR_CC3G
 
	`BSP_BIT16
(3)

79 
	#STM32F4_TIMER_EGR_CC2G
 
	`BSP_BIT16
(2)

80 
	#STM32F4_TIMER_EGR_CC1G
 
	`BSP_BIT16
(1)

81 
	#STM32F4_TIMER_EGR_UG
 
	`BSP_BIT16
(0)

82 
uöt16_t
 
ª£rved_16
;

	)

83 
uöt16_t
 
	mccmr1
;

84 
	#STM32F4_TIMER_CCMR1_OC2CE
 
	`BSP_BIT16
(15)

85 
	#STM32F4_TIMER_CCMR1_OC2M
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 12, 14)

	)

86 
	#STM32F4_TIMER_CCMR1_OC2M_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 12, 14)

	)

87 
	#STM32F4_TIMER_CCMR1_OC2M_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 12, 14)

	)

88 
	#STM32F4_TIMER_CCMR1_OC2M_FROZEN
 
	`STM32F4_TIMER_CCMR1_OC2M
(0)

	)

89 
	#STM32F4_TIMER_CCMR1_OC2M_ACTIVE
 
	`STM32F4_TIMER_CCMR1_OC2M
(1)

	)

90 
	#STM32F4_TIMER_CCMR1_OC2M_INACTIVE
 
	`STM32F4_TIMER_CCMR1_OC2M
(2)

	)

91 
	#STM32F4_TIMER_CCMR1_OC2M_TOGGLE
 
	`STM32F4_TIMER_CCMR1_OC2M
(3)

	)

92 
	#STM32F4_TIMER_CCMR1_OC2M_FORCE_LOW
 
	`STM32F4_TIMER_CCMR1_OC2M
(4)

	)

93 
	#STM32F4_TIMER_CCMR1_OC2M_FORCE_HIGH
 
	`STM32F4_TIMER_CCMR1_OC2M
(5)

	)

94 
	#STM32F4_TIMER_CCMR1_OC2M_PWM1
 
	`STM32F4_TIMER_CCMR1_OC2M
(6)

	)

95 
	#STM32F4_TIMER_CCMR1_OC2M_PWM2
 
	`STM32F4_TIMER_CCMR1_OC2M
(7)

	)

96 
	#STM32F4_TIMER_CCMR1_OC2PE
 
	`BSP_BIT16
(11)

97 
	#STM32F4_TIMER_CCMR1_OC2FE
 
	`BSP_BIT16
(10)

98 
	#STM32F4_TIMER_CCMR1_CC2S
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 8, 9)

	)

99 
	#STM32F4_TIMER_CCMR1_CC2S_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 8, 9)

	)

100 
	#STM32F4_TIMER_CCMR1_CC2S_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 8, 9)

	)

101 
	#STM32F4_TIMER_CCMR1_CC2S_OUTPUT
 
	`STM32F4_TIMER_CCMR1_OC2S
(0)

	)

102 
	#STM32F4_TIMER_CCMR1_CC2S_TI2
 
	`STM32F4_TIMER_CCMR1_OC2S
(1)

	)

103 
	#STM32F4_TIMER_CCMR1_CC2S_TI1
 
	`STM32F4_TIMER_CCMR1_OC2S
(2)

	)

104 
	#STM32F4_TIMER_CCMR1_CC2S_TRC
 
	`STM32F4_TIMER_CCMR1_OC2S
(3)

	)

105 
	#STM32F4_TIMER_CCMR1_OC1CE
 
	`BSP_BIT16
(7)

106 
	#STM32F4_TIMER_CCMR1_OC1M
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 4, 6)

	)

107 
	#STM32F4_TIMER_CCMR1_OC1M_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 4, 6)

	)

108 
	#STM32F4_TIMER_CCMR1_OC1M_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 4, 6)

	)

109 
	#STM32F4_TIMER_CCMR1_OC1M_FROZEN
 
	`STM32F4_TIMER_CCMR1_OC1M
(0)

	)

110 
	#STM32F4_TIMER_CCMR1_OC1M_ACTIVE
 
	`STM32F4_TIMER_CCMR1_OC1M
(1)

	)

111 
	#STM32F4_TIMER_CCMR1_OC1M_INACTIVE
 
	`STM32F4_TIMER_CCMR1_OC1M
(2)

	)

112 
	#STM32F4_TIMER_CCMR1_OC1M_TOGGLE
 
	`STM32F4_TIMER_CCMR1_OC1M
(3)

	)

113 
	#STM32F4_TIMER_CCMR1_OC1M_FORCE_LOW
 
	`STM32F4_TIMER_CCMR1_OC1M
(4)

	)

114 
	#STM32F4_TIMER_CCMR1_OC1M_FORCE_HIGH
 
	`STM32F4_TIMER_CCMR1_OC1M
(5)

	)

115 
	#STM32F4_TIMER_CCMR1_OC1M_PWM1
 
	`STM32F4_TIMER_CCMR1_OC1M
(6)

	)

116 
	#STM32F4_TIMER_CCMR1_OC1M_PWM2
 
	`STM32F4_TIMER_CCMR1_OC1M
(7)

	)

117 
	#STM32F4_TIMER_CCMR1_OC1PE
 
	`BSP_BIT16
(3)

118 
	#STM32F4_TIMER_CCMR1_OC1FE
 
	`BSP_BIT16
(2)

119 
	#STM32F4_TIMER_CCMR1_CC1S
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 0, 1)

	)

120 
	#STM32F4_TIMER_CCMR1_CC1S_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 0, 1)

	)

121 
	#STM32F4_TIMER_CCMR1_CC1S_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 0, 1)

	)

122 
	#STM32F4_TIMER_CCMR1_CC1S_OUTPUT
 
	`STM32F4_TIMER_CCMR1_OC1S
(0)

	)

123 
	#STM32F4_TIMER_CCMR1_CC1S_TI2
 
	`STM32F4_TIMER_CCMR1_OC1S
(1)

	)

124 
	#STM32F4_TIMER_CCMR1_CC1S_TI1
 
	`STM32F4_TIMER_CCMR1_OC1S
(2)

	)

125 
	#STM32F4_TIMER_CCMR1_CC1S_TRC
 
	`STM32F4_TIMER_CCMR1_OC1S
(3)

	)

126 
uöt16_t
 
	mª£rved_1a
;

127 
uöt16_t
 
	mccmr2
;

128 
	#STM32F4_TIMER_CCMR2_OC4CE
 
	`BSP_BIT16
(15)

129 
	#STM32F4_TIMER_CCMR2_OC4M
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 12, 14)

	)

130 
	#STM32F4_TIMER_CCMR2_OC4M_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 12, 14)

	)

131 
	#STM32F4_TIMER_CCMR2_OC4M_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 12, 14)

	)

132 
	#STM32F4_TIMER_CCMR2_OC4M_FROZEN
 
	`STM32F4_TIMER_CCMR2_OC4M
(0)

	)

133 
	#STM32F4_TIMER_CCMR2_OC4M_ACTIVE
 
	`STM32F4_TIMER_CCMR2_OC4M
(1)

	)

134 
	#STM32F4_TIMER_CCMR2_OC4M_INACTIVE
 
	`STM32F4_TIMER_CCMR2_OC4M
(2)

	)

135 
	#STM32F4_TIMER_CCMR2_OC4M_TOGGLE
 
	`STM32F4_TIMER_CCMR2_OC4M
(3)

	)

136 
	#STM32F4_TIMER_CCMR2_OC4M_FORCE_LOW
 
	`STM32F4_TIMER_CCMR2_OC4M
(4)

	)

137 
	#STM32F4_TIMER_CCMR2_OC4M_FORCE_HIGH
 
	`STM32F4_TIMER_CCMR2_OC4M
(5)

	)

138 
	#STM32F4_TIMER_CCMR2_OC4M_PWM1
 
	`STM32F4_TIMER_CCMR2_OC4M
(6)

	)

139 
	#STM32F4_TIMER_CCMR2_OC4M_PWM2
 
	`STM32F4_TIMER_CCMR2_OC4M
(7)

	)

140 
	#STM32F4_TIMER_CCMR2_OC4PE
 
	`BSP_BIT16
(11)

141 
	#STM32F4_TIMER_CCMR2_OC4FE
 
	`BSP_BIT16
(10)

142 
	#STM32F4_TIMER_CCMR2_CC4S
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 8, 9)

	)

143 
	#STM32F4_TIMER_CCMR2_CC4S_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 8, 9)

	)

144 
	#STM32F4_TIMER_CCMR2_CC4S_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 8, 9)

	)

145 
	#STM32F4_TIMER_CCMR2_CC4S_OUTPUT
 
	`STM32F4_TIMER_CCMR2_OC4S
(0)

	)

146 
	#STM32F4_TIMER_CCMR2_CC4S_TI2
 
	`STM32F4_TIMER_CCMR2_OC4S
(1)

	)

147 
	#STM32F4_TIMER_CCMR2_CC4S_TI1
 
	`STM32F4_TIMER_CCMR2_OC4S
(2)

	)

148 
	#STM32F4_TIMER_CCMR2_CC4S_TRC
 
	`STM32F4_TIMER_CCMR2_OC4S
(3)

	)

149 
	#STM32F4_TIMER_CCMR2_OC3CE
 
	`BSP_BIT16
(7)

150 
	#STM32F4_TIMER_CCMR2_OC3M
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 4, 6)

	)

151 
	#STM32F4_TIMER_CCMR2_OC3M_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 4, 6)

	)

152 
	#STM32F4_TIMER_CCMR2_OC3M_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 4, 6)

	)

153 
	#STM32F4_TIMER_CCMR2_OC3M_FROZEN
 
	`STM32F4_TIMER_CCMR2_OC3M
(0)

	)

154 
	#STM32F4_TIMER_CCMR2_OC3M_ACTIVE
 
	`STM32F4_TIMER_CCMR2_OC3M
(1)

	)

155 
	#STM32F4_TIMER_CCMR2_OC3M_INACTIVE
 
	`STM32F4_TIMER_CCMR2_OC3M
(2)

	)

156 
	#STM32F4_TIMER_CCMR2_OC3M_TOGGLE
 
	`STM32F4_TIMER_CCMR2_OC3M
(3)

	)

157 
	#STM32F4_TIMER_CCMR2_OC3M_FORCE_LOW
 
	`STM32F4_TIMER_CCMR2_OC3M
(4)

	)

158 
	#STM32F4_TIMER_CCMR2_OC3M_FORCE_HIGH
 
	`STM32F4_TIMER_CCMR2_OC3M
(5)

	)

159 
	#STM32F4_TIMER_CCMR2_OC3M_PWM1
 
	`STM32F4_TIMER_CCMR2_OC3M
(6)

	)

160 
	#STM32F4_TIMER_CCMR2_OC3M_PWM2
 
	`STM32F4_TIMER_CCMR2_OC3M
(7)

	)

161 
	#STM32F4_TIMER_CCMR2_OC3PE
 
	`BSP_BIT16
(3)

162 
	#STM32F4_TIMER_CCMR2_OC3FE
 
	`BSP_BIT16
(2)

163 
	#STM32F4_TIMER_CCMR2_CC3S
(
vÆ
Ë
	`BSP_FLD16
(vÆ, 0, 1)

	)

164 
	#STM32F4_TIMER_CCMR2_CC3S_GET
(
ªg
Ë
	`BSP_FLD16GET
‘eg, 0, 1)

	)

165 
	#STM32F4_TIMER_CCMR2_CC3S_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD16SET
‘eg, vÆ, 0, 1)

	)

166 
	#STM32F4_TIMER_CCMR2_CC3S_OUTPUT
 
	`STM32F4_TIMER_CCMR2_OC3S
(0)

	)

167 
	#STM32F4_TIMER_CCMR2_CC3S_TI2
 
	`STM32F4_TIMER_CCMR2_OC3S
(1)

	)

168 
	#STM32F4_TIMER_CCMR2_CC3S_TI1
 
	`STM32F4_TIMER_CCMR2_OC3S
(2)

	)

169 
	#STM32F4_TIMER_CCMR2_CC3S_TRC
 
	`STM32F4_TIMER_CCMR2_OC3S
(3)

	)

170 
uöt16_t
 
	mª£rved_1e
;

171 
uöt16_t
 
	mc˚r
;

172 
	#STM32F4_TIMER_CCER_CC4NP
 
	`BSP_BIT16
(15)

173 
	#STM32F4_TIMER_CCER_CC4P
 
	`BSP_BIT16
(13)

174 
	#STM32F4_TIMER_CCER_CC4E
 
	`BSP_BIT16
(12)

175 
	#STM32F4_TIMER_CCER_CC3NP
 
	`BSP_BIT16
(11)

176 
	#STM32F4_TIMER_CCER_CC3P
 
	`BSP_BIT16
(9)

177 
	#STM32F4_TIMER_CCER_CC3E
 
	`BSP_BIT16
(8)

178 
	#STM32F4_TIMER_CCER_CC2NP
 
	`BSP_BIT16
(7)

179 
	#STM32F4_TIMER_CCER_CC2P
 
	`BSP_BIT16
(5)

180 
	#STM32F4_TIMER_CCER_CC2E
 
	`BSP_BIT16
(4)

181 
	#STM32F4_TIMER_CCER_CC1NP
 
	`BSP_BIT16
(3)

182 
	#STM32F4_TIMER_CCER_CC1P
 
	`BSP_BIT16
(1)

183 
	#STM32F4_TIMER_CCER_CC1E
 
	`BSP_BIT16
(0)

184 
uöt16_t
 
ª£rved_22
;

	)

185 
uöt32_t
 
	m˙t
;

186 
	#STM32F4_TIMER_DR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 31)

	)

187 
	#STM32F4_TIMER_DR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 31)

	)

188 
	#STM32F4_TIMER_DR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 31)

	)

189 
uöt16_t
 
	mpsc
;

190 
uöt16_t
 
	mª£rved_2a
;

191 
uöt32_t
 
	m¨r
;

192 
uöt16_t
 
	mr¸
;

193 
uöt16_t
 
	mr£rved_32
;

194 
uöt32_t
 
	mc¸
[4];

195 
uöt16_t
 
	mbdå
;

196 
uöt16_t
 
	mª£rved_46
;

197 
uöt16_t
 
	md¸
;

198 
uöt16_t
 
	mª£rved_4a
;

199 
uöt16_t
 
	mdm¨
;

200 
uöt16_t
 
	mª£rved_4e
;

201 
uöt16_t
 
	m‹
;

202 
uöt16_t
 
	mª£rved_52
;

203 } 
__©åibuã__
 ((
∑cked
));

204 
°m32f4_tim_s
 
	t°m32f4_tim
;

	@src/lib/libbsp/arm/stm32f4/include/usart.h

21 #i‚de‡
LIBBSP_ARM_STM32F4_USART_H


22 
	#LIBBSP_ARM_STM32F4_USART_H


	)

24 
	~<libchù/£rül.h
>

33 #ifde‡
__˝lu•lus


37 c⁄° 
c⁄sﬁe_‚s
 
°m32f4_ußπ_‚s
;

41 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/stm32f4/startup/bspreset.c

15 
	~<πems.h
>

17 
	~<b•/boŸˇrd.h
>

19 
	$b•_ª£t
()

21 
πems_öãºu±_Àvñ
 
Àvñ
;

23 (Ë
Àvñ
;

24 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

27 
	}
}

	@src/lib/libbsp/arm/stm32f4/startup/bspstart.c

15 
	~<b•.h
>

16 
	~<b•/io.h
>

17 
	~<b•/úq.h
>

18 
	~<b•/boŸˇrd.h
>

19 
	~<b•/úq-gíîic.h
>

20 
	~<as£π.h
>

21 
	~<b•/°m32f4.h
>

23 #ifde‡
STM32F4_FAMILY_F4XXXX


25 
	~<b•/°m32f4xxxx_rcc.h
>

26 
	~<b•/°m32f4xxxx_Êash.h
>

28 
πems_°©us_code
 
£t_sy°em_˛k
(

29 
uöt32_t
 
sys_˛k
,

30 
uöt32_t
 
h£_˛k
,

31 
uöt32_t
 
h£_Êag


34 
	$öô_maö_osc
( )

36 vﬁ©ûê
°m32f4_rcc
 *
rcc
 = 
STM32F4_RCC
;

37 
πems_°©us_code
 
°©us
;

40 
rcc
->
¸
 |
RCC_CR_HSION
;

42  !–
rcc
->
¸
 & 
RCC_CR_HSIRDY
 ) ) ;

44 
rcc
->
cfgr
 &= 0x00000300;

46 
rcc
->
¸
 &= 0xF0F0FFFD;

48 
°©us
 = 
	`£t_sy°em_˛k
–
STM32F4_SYSCLK
 / 1000000L,

49 
STM32F4_HSE_OSCILLATOR
 / 1000000L,

52 
	`as£π
–
	`πems_is_°©us_suc˚ssful
–
°©us
 ) );

53 
	}
}

81 
πems_°©us_code
 
	$£t_sy°em_˛k
(

82 
uöt32_t
 
sys_˛k
,

83 
uöt32_t
 
h£_˛k
,

84 
uöt32_t
 
h£_Êag


87 vﬁ©ûê
°m32f4_rcc
 *
rcc
 = 
STM32F4_RCC
;

88 vﬁ©ûê
°m32f4_Êash
 *
Êash
 = 
STM32F4_FLASH
;

89 
timeout
 = 0;

91 
§c_˛k
 = 0;

93 
uöt32_t
 
∂l_m
 = 0;

94 
uöt32_t
 
∂l_n
 = 0;

95 
uöt32_t
 
∂l_p
 = 0;

96 
uöt32_t
 
∂l_q
 = 0;

98 
uöt32_t
 
ahb¥e
 = 0;

99 
uöt32_t
 
≠b¥e1
 = 0;

100 
uöt32_t
 
≠b¥e2
 = 0;

102 i‡–
sys_˛k
 =16 && 
h£_˛k
 != 16 ) {

104 
rcc
->
¸
 |
RCC_CR_HSION
;

106  !–
rcc
->
¸
 & 
RCC_CR_HSIRDY
 ) ) ;

109 
rcc
->
cfgr
 &0x00000300 | 
RCC_CFGR_SW_HSI
;

110 
rcc
->
¸
 &= 0xF0F0FFFD;

111 
Êash
->
a¸
 = 0;

113  
RTEMS_SUCCESSFUL
;

116 i‡–
sys_˛k
 =
h£_˛k
 ) {

118 
rcc
->
¸
 |
RCC_CR_HSEON
;

119 
timeout
 = 400;

121  !–
rcc
->
¸
 & 
RCC_CR_HSERDY
 ) && --
timeout
 ) ;

123 
	`as£π
–
timeout
 != 0 );

125 i‡–
timeout
 == 0 ) {

126  
RTEMS_TIMEOUT
;

130 
rcc
->
cfgr
 &= 0x00000300;

131 
rcc
->
cfgr
 |
RCC_CFGR_SW_HSE
;

133 
rcc
->
¸
 &0xF0F0FFFC | 
RCC_CR_HSEON
;

134 
Êash
->
a¸
 = 0;

136  
RTEMS_SUCCESSFUL
;

150 i‡–
sys_˛k
 > 180 ) {

151  
RTEMS_INVALID_NUMBER
;

152 } i‡–
sys_˛k
 >= 96 ) {

153 
∂l_n
 = 
sys_˛k
 << 1;

154 
∂l_p
 = 
RCC_PLLCFGR_PLLP_BY_2
;

155 } i‡–
sys_˛k
 >= 48 ) {

156 
∂l_n
 = 
sys_˛k
 << 2;

157 
∂l_p
 = 
RCC_PLLCFGR_PLLP_BY_4
;

158 } i‡–
sys_˛k
 >= 24 ) {

159 
∂l_n
 = 
sys_˛k
 << 3;

160 
∂l_p
 = 
RCC_PLLCFGR_PLLP_BY_8
;

162  
RTEMS_INVALID_NUMBER
;

165 i‡–
h£_˛k
 =0 || 
h£_Êag
 == 0 ) {

166 
§c_˛k
 = 16;

167 
h£_Êag
 = 0;

169 
§c_˛k
 = 
h£_˛k
;

172 
∂l_m
 = 
§c_˛k
;

177 
∂l_q
 = ( (Ë–
§c_˛k
 * 
∂l_n
 ) ) / 
∂l_m
 / 48;

179 i‡–
∂l_q
 < 2 ) {

180 
∂l_q
 = 2;

184 
≠b¥e1
 = ( 
sys_˛k
 * 100 ) / 42;

186 i‡–
≠b¥e1
 <= 100 ) {

187 
≠b¥e1
 = 
RCC_CFGR_PPRE1_BY_1
;

188 } i‡–
≠b¥e1
 <= 200 ) {

189 
≠b¥e1
 = 
RCC_CFGR_PPRE1_BY_2
;

190 } i‡–
≠b¥e1
 <= 400 ) {

191 
≠b¥e1
 = 
RCC_CFGR_PPRE1_BY_4
;

192 } i‡–
≠b¥e1
 <= 800 ) {

193 
≠b¥e1
 = 
RCC_CFGR_PPRE1_BY_8
;

194 } i‡–
≠b¥e1
 ) {

195 
≠b¥e1
 = 
RCC_CFGR_PPRE1_BY_16
;

199 
≠b¥e2
 = ( 
sys_˛k
 * 100 ) / 84;

201 i‡–
≠b¥e2
 <= 100 ) {

202 
≠b¥e2
 = 
RCC_CFGR_PPRE2_BY_1
;

203 } i‡–
≠b¥e2
 <= 200 ) {

204 
≠b¥e2
 = 
RCC_CFGR_PPRE2_BY_2
;

205 } i‡–
≠b¥e2
 <= 400 ) {

206 
≠b¥e2
 = 
RCC_CFGR_PPRE2_BY_4
;

207 } i‡–
≠b¥e2
 <= 800 ) {

208 
≠b¥e2
 = 
RCC_CFGR_PPRE2_BY_8
;

210 
≠b¥e2
 = 
RCC_CFGR_PPRE2_BY_16
;

213 
rcc
->
¸
 |
RCC_CR_HSION
;

215  ( !–
rcc
->
¸
 & 
RCC_CR_HSIRDY
 ) ) ) ;

218 
rcc
->
cfgr
 &= 0x00000300;

219 
rcc
->
cfgr
 |
RCC_CFGR_SW_HSI
;

221  ( ( 
rcc
->
cfgr
 & 
RCC_CFGR_SWS_MSK
 ) !
RCC_CFGR_SWS_HSI
 ) ) ;

224 
rcc
->
¸
 &~–
RCC_CR_PLLON
 | 
RCC_CR_PLLRDY
 );

227 i‡–
h£_Êag
 ) {

228 
rcc
->
¸
 |
RCC_CR_HSEON
;

229 
timeout
 = 400;

231  ( !–
rcc
->
¸
 & 
RCC_CR_HSERDY
 ) ) && 
timeout
-- ) ;

233 
	`as£π
–
timeout
 != 0 );

235 i‡–
timeout
 == 0 ) {

236  
RTEMS_TIMEOUT
;

240 
rcc
->
∂lcfgr
 &= 0xF0BC8000;

243 
rcc
->
∂lcfgr
 |
	`RCC_PLLCFGR_PLLM
–
∂l_m
 ) |

244 
	`RCC_PLLCFGR_PLLN
–
∂l_n
 ) |

245 
∂l_p
 |

247 –
h£_Êag
 ? 
RCC_PLLCFGR_PLLSRC_HSE
 : 
RCC_PLLCFGR_PLLSRC_HSI
 )

249 
	`RCC_PLLCFGR_PLLQ
–
∂l_q
 );

252 
rcc
->
cfgr
 |
≠b¥e1
 |

253 
≠b¥e2
 |

254 
ahb¥e
;

260 
Êash
->
a¸
 = 
	`STM32F4_FLASH_ACR_LATENCY
( 5 ) |

261 
STM32F4_FLASH_ACR_ICEN
 |

262 
STM32F4_FLASH_ACR_DCEN
 |

263 
STM32F4_FLASH_ACR_PRFTEN
;

266 
rcc
->
¸
 |
RCC_CR_PLLON
;

267 
timeout
 = 40000;

269  ( !–
rcc
->
¸
 & 
RCC_CR_PLLRDY
 ) ) && --
timeout
 ) ;

271 
	`as£π
–
timeout
 != 0 );

273 i‡–
timeout
 == 0 ) {

274  
RTEMS_TIMEOUT
;

278 
rcc
->
cfgr
 = (Ñcc->cfg∏& ~
RCC_CFGR_SW_MSK
 ) | 
RCC_CFGR_SW_PLL
;

280  ( ( 
rcc
->
cfgr
 & 
RCC_CFGR_SWS_MSK
 ) !
RCC_CFGR_SWS_PLL
 ) ) ;

282  
RTEMS_SUCCESSFUL
;

283 
	}
}

287 #ifde‡
STM32F4_FAMILY_F10XXX


289 
	$öô_maö_osc
( )

292 
	}
}

296 
	$b•_°¨t
( )

298 
	`öô_maö_osc
();

300 
	`°m32f4_gpio_£t_c⁄fig_¨øy
–&
°m32f4_°¨t_c⁄fig_gpio
[ 0 ] );

302 
	`b•_öãºu±_öôülize
();

303 
	}
}

	@src/lib/libbsp/arm/stm32f4/startup/bspstarthook.c

15 
	~<b•.h
>

16 
	~<b•/°¨t.h
>

18 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_0
()

21 
	}
}

23 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_1
()

25 
	`b•_°¨t_c›y_£˘i⁄s
();

26 
	`b•_°¨t_˛ór_bss
();

29 
	}
}

	@src/lib/libbsp/arm/stm32f4/startup/io.c

15 
	~<b•/io.h
>

16 
	~<b•/rcc.h
>

17 
	~<b•/°m32f4.h
>

19 
	~<πems.h
>

21 
RTEMS_STATIC_ASSERT
((
°m32f4_gpio_c⁄fig
Ë=4, 
size_of_c⁄fig
);

23 
	$°m32f4_gpio_£t_˛ock
(
pö
, 
boﬁ
 
£t
)

25 
p‹t
 = 
	`STM32F4_GPIO_PORT_OF_PIN
(
pö
);

26 
°m32f4_rcc_ödex
 
ödex
 = 
STM32F4_RCC_GPIOA
 + 
p‹t
;

28 
	`°m32f4_rcc_£t_˛ock
(
ödex
, 
£t
);

29 
	}
}

31 
	$˛ór_™d_£t
(

32 vﬁ©ûê
uöt32_t
 *
ªg
,

33 
ödex
,

34 
width
,

35 
uöt32_t
 
£t


38 
uöt32_t
 
mask
 = (1U << 
width
) - 1U;

39 
shi·
 = 
width
 * 
ödex
;

40 
uöt32_t
 
vÆ
 = *
ªg
;

42 
vÆ
 &~(
mask
 << 
shi·
);

43 
vÆ
 |
£t
 << 
shi·
;

45 *
ªg
 = 
vÆ
;

46 
	}
}

48 #ifde‡
STM32F4_FAMILY_F10XXX


49 
	#STM32F4_AFIO_REMAP_ENTRY
(
mod
, 
afio_ªg_v
, 
°¨t_v
, 
width_v
, 
vÆue_v
) \

50 [
mod
] = { \

51 .
afio_ªg
 = 
afio_ªg_v
, \

52 .
°¨t
 = 
°¨t_v
, \

53 .
width
 = 
width_v
, \

54 .
vÆue
 = 
vÆue_v
, \

55 .
ª£rved
 = 0 \

56 }

	)

59 
uöt16_t
 
	mafio_ªg
 : 3;

60 
uöt16_t
 
	m°¨t
 : 5;

61 
uöt16_t
 
	mwidth
 : 2;

62 
uöt16_t
 
	mvÆue
 : 3;

63 
uöt16_t
 
	mª£rved
 : 3;

64 } 
	t°m32f4_afio_ªm≠_íåy
;

66 c⁄° 
°m32f4_afio_ªm≠_íåy
 
	g°m32f4_afio_ªm≠_èbÀ
 [] = {

67 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_DONT_CHANGE
, 0, 0, 0, 0),

68 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SPI1_0
, 1, 0, 1, 0),

69 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SPI1_1
, 1, 0, 1, 1),

70 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_I2C1_0
, 1, 1, 1, 0),

71 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_I2C1_1
, 1, 1, 1, 1),

72 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART1_0
, 1, 2, 1, 0),

73 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART1_1
, 1, 2, 1, 1),

74 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART2_0
, 1, 3, 1, 0),

75 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART2_1
, 1, 3, 1, 1),

76 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART3_0
, 1, 4, 2, 0),

77 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART3_1
, 1, 4, 2, 1),

78 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_USART3_3
, 1, 4, 2, 3),

79 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM1_0
, 1, 6, 2, 0),

80 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM1_1
, 1, 6, 2, 1),

81 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM1_3
, 1, 6, 2, 3),

82 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2_0
, 1, 8, 2, 0),

83 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2_1
, 1, 8, 2, 1),

84 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2_2
, 1, 8, 2, 2),

85 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2_3
, 1, 8, 2, 3),

86 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM3_0
, 1, 10, 2, 0),

87 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM3_2
, 1, 10, 2, 2),

88 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM3_3
, 1, 10, 2, 3),

89 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM4_0
, 1, 12, 1, 0),

90 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM4_1
, 1, 12, 1, 1),

91 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CAN1_0
, 1, 13, 2, 0),

92 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CAN1_2
, 1, 13, 2, 2),

93 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CAN1_3
, 1, 13, 2, 3),

94 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_PD01_0
, 1, 15, 1, 0),

95 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_PD01_1
, 1, 15, 1, 1),

96 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM5CH4_0
, 1, 16, 1, 0),

97 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM5CH4_1
, 1, 16, 1, 1),

98 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC1_ETRGINJ_0
, 1, 17, 1, 0),

99 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC1_ETRGINJ_1
, 1, 17, 1, 1),

100 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC1_ETRGREG_0
, 1, 18, 1, 0),

101 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC1_ETRGREG_1
, 1, 18, 1, 1),

102 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC2_ETRGINJ_0
, 1, 19, 1, 0),

103 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC2_ETRGINJ_1
, 1, 19, 1, 1),

104 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC2_ETRGREG_0
, 1, 20, 1, 0),

105 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ADC2_ETRGREG_1
, 1, 20, 1, 1),

106 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ETH_0
, 1, 21, 1, 0),

107 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_ETH_1
, 1, 21, 1, 1),

108 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CAN2_0
, 1, 22, 1, 0),

109 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CAN2_1
, 1, 22, 1, 1),

110 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_MII_RMII_0
, 1, 23, 1, 0),

111 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_MII_RMII_1
, 1, 23, 1, 1),

112 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SWJ_0
, 1, 24, 3, 0),

113 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SWJ_1
, 1, 24, 3, 1),

114 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SWJ_2
, 1, 24, 3, 2),

115 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SWJ_4
, 1, 24, 3, 4),

116 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SPI3_0
, 1, 28, 1, 0),

117 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_SPI3_1
, 1, 28, 1, 1),

118 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2ITR1_0
, 1, 29, 1, 0),

119 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM2ITR1_1
, 1, 29, 1, 1),

120 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_PTP_PPS_0
, 1, 30, 1, 0),

121 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_PTP_PPS_1
, 1, 30, 1, 1),

122 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM15_0
, 6, 0, 1, 0),

123 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM15_1
, 6, 0, 1, 1),

124 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM16_0
, 6, 1, 1, 0),

125 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM16_1
, 6, 1, 1, 1),

126 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM17_0
, 6, 2, 1, 0),

127 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM17_1
, 6, 2, 1, 1),

128 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CEC_0
, 6, 3, 1, 0),

129 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_CEC_1
, 6, 3, 1, 1),

130 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM1_DMA_0
, 6, 4, 1, 0),

131 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM1_DMA_1
, 6, 4, 1, 1),

132 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM9_0
, 6, 5, 1, 0),

133 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM9_1
, 6, 5, 1, 1),

134 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM10_0
, 6, 6, 1, 0),

135 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM10_1
, 6, 6, 1, 1),

136 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM11_0
, 6, 7, 1, 0),

137 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM11_1
, 6, 7, 1, 1),

138 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM13_0
, 6, 8, 1, 0),

139 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM13_1
, 6, 8, 1, 1),

140 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM14_0
, 6, 9, 1, 0),

141 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM14_1
, 6, 9, 1, 1),

142 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_FSMC_0
, 6, 10, 1, 0),

143 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_FSMC_1
, 6, 10, 1, 1),

144 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM67_DAC_DMA_0
, 6, 11, 1, 0),

145 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM67_DAC_DMA_1
, 6, 11, 1, 1),

146 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM12_0
, 6, 12, 1, 0),

147 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_TIM12_1
, 6, 12, 1, 1),

148 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_MISC_0
, 6, 13, 1, 0),

149 
STM32F4_AFIO_REMAP_ENTRY
(
STM32F4_GPIO_REMAP_MISC_1
, 6, 13, 1, 1),

152 
	$£t_ªm≠_c⁄fig
(
°m32f4_gpio_ªm≠
 
ªm≠
)

154 if(
ªm≠
 !
STM32F4_GPIO_REMAP_DONT_CHANGE
)

156 
°m32f4_afio_ªm≠_íåy
 
íåy
 = 
°m32f4_afio_ªm≠_èbÀ
[
ªm≠
];

157 vﬁ©ûê
°m32f4_afio
 *
afio
 = 
STM32F4_AFIO
;

158 vﬁ©ûê
uöt32_t
 *
ªg
 = ((uöt32_t*Ë
afio
Ë+ 
íåy
.
afio_ªg
;

159 
uöt32_t
 
mask
 = (1 << 
íåy
.
width
) - 1;

160 
uöt32_t
 
vÆue
 = *
ªg
;

162 
vÆue
 &
mask
 << 
íåy
.
°¨t
;

163 
vÆue
 |
íåy
.vÆuê<<É¡ry.
°¨t
;

165 *
ªg
 = 
vÆue
;

167 
	}
}

171 
	$£t_c⁄fig
(
pö
, c⁄° 
°m32f4_gpio_c⁄fig
 *
c⁄fig
)

173 
p‹t
 = 
	`STM32F4_GPIO_PORT_OF_PIN
(
pö
);

174 vﬁ©ûê
°m32f4_gpio
 *
gpio
 = 
	`STM32F4_GPIO
(
p‹t
);

175 
ödex
 = 
	`STM32F4_GPIO_INDEX_OF_PIN
(
pö
);

176 
πems_öãºu±_Àvñ
 
Àvñ
;

177 
£t_‹_˛ór_off£t
 = 
c⁄fig
->
fõlds
.
ouçut
 ? 0 : 16;

178 #ifde‡
STM32F4_FAMILY_F4XXXX


179 
af_ªg
 = 
ödex
 >> 3;

180 
af_ödex
 = 
ödex
 & 0x7;

182 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

183 
gpio
->
b§r
 = 1U << (
ödex
 + 
£t_‹_˛ór_off£t
);

184 
	`˛ór_™d_£t
(&
gpio
->
pupdr
, 
ödex
, 2, 
c⁄fig
->
fõlds
.
pupd
);

185 
	`˛ór_™d_£t
(&
gpio
->
Ÿy≥r
, 
ödex
, 1, 
c⁄fig
->
fõlds
.
Ÿy≥
);

186 
	`˛ór_™d_£t
(&
gpio
->
o•ìdr
, 
ödex
, 2, 
c⁄fig
->
fõlds
.
o•ìd
);

187 
	`˛ór_™d_£t
(&
gpio
->
a‰
 [
af_ªg
], 
af_ödex
, 4, 
c⁄fig
->
fõlds
.
af
);

188 
	`˛ór_™d_£t
(&
gpio
->
modî
, 
ödex
, 2, 
c⁄fig
->
fõlds
.
mode
);

189 
	`πems_öãºu±_íabÀ
(
Àvñ
);

192 #ifde‡
STM32F4_FAMILY_F10XXX


193 
¸_ªg
 = 
ödex
 >> 3;

194 
¸_ödex
 = 
ödex
 & 0x7;

196 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

197 
gpio
->
b§r
 = 1U << (
ödex
 + 
£t_‹_˛ór_off£t
);

198 
	`˛ór_™d_£t
(&
gpio
->
¸
[
¸_ªg
], 
¸_ödex
, 4,

199 (
c⁄fig
->
fõlds
.
˙f
 << 2Ë| c⁄fig->fõlds.
mode
);

200 
	`£t_ªm≠_c⁄fig
(
c⁄fig
->
fõlds
.
ªm≠
);

201 
	`πems_öãºu±_íabÀ
(
Àvñ
);

204 
	}
}

206 
	$°m32f4_gpio_£t_c⁄fig
(c⁄° 
°m32f4_gpio_c⁄fig
 *
c⁄fig
)

208 
cuºít
 = 
c⁄fig
->
fõlds
.
pö_fú°
;

209 
œ°
 = 
c⁄fig
->
fõlds
.
pö_œ°
;

211 #ifde‡
STM32F4_FAMILY_F10XXX


212 
	`°m32f4_rcc_£t_˛ock
(
STM32F4_RCC_AFIO
, 
åue
);

215 
cuºít
 <
œ°
) {

216 
	`°m32f4_gpio_£t_˛ock
(
cuºít
, 
åue
);

217 
	`£t_c⁄fig
(
cuºít
, 
c⁄fig
);

218 ++
cuºít
;

220 
	}
}

222 
	$°m32f4_gpio_£t_c⁄fig_¨øy
(c⁄° 
°m32f4_gpio_c⁄fig
 *
c⁄figs
)

224 
°m32f4_gpio_c⁄fig
 
ãrmöÆ
 = 
STM32F4_GPIO_CONFIG_TERMINAL
;

226 
c⁄figs
->
vÆue
 !
ãrmöÆ
.value) {

227 
	`°m32f4_gpio_£t_c⁄fig
(
c⁄figs
);

228 ++
c⁄figs
;

230 
	}
}

232 
	$°m32f4_gpio_£t_ouçut
(
pö
, 
boﬁ
 
£t
)

234 
p‹t
 = 
	`STM32F4_GPIO_PORT_OF_PIN
(
pö
);

235 vﬁ©ûê
°m32f4_gpio
 *
gpio
 = 
	`STM32F4_GPIO
(
p‹t
);

236 
ödex
 = 
	`STM32F4_GPIO_INDEX_OF_PIN
(
pö
);

237 
£t_‹_˛ór_off£t
 = 
£t
 ? 0 : 16;

239 
gpio
->
b§r
 = 1U << (
ödex
 + 
£t_‹_˛ór_off£t
);

240 
	}
}

242 
boﬁ
 
	$°m32f4_gpio_gë_öput
(
pö
)

244 
p‹t
 = 
	`STM32F4_GPIO_PORT_OF_PIN
(
pö
);

245 vﬁ©ûê
°m32f4_gpio
 *
gpio
 = 
	`STM32F4_GPIO
(
p‹t
);

246 
ödex
 = 
	`STM32F4_GPIO_INDEX_OF_PIN
(
pö
);

248  (
gpio
->
idr
 & (1U << 
ödex
)) != 0;

249 
	}
}

	@src/lib/libbsp/arm/stm32f4/startup/rcc.c

15 
	~<b•/rcc.h
>

16 
	~<b•/°m32f4.h
>

18 
	~<πems.h
>

20 
	$rcc_£t
(

21 
°m32f4_rcc_ödex
 
ödex
,

22 
boﬁ
 
£t
,

23 vﬁ©ûê
uöt32_t
 *
ªgs


26 
ªg
 = 
ödex
 >> 5;

27 
uöt32_t
 
⁄e
 = 1;

28 
uöt32_t
 
bô
 = 
⁄e
 << (
ödex
 & 0x1f);

29 
πems_öãºu±_Àvñ
 
Àvñ
;

30 
uöt32_t
 
vÆ
;

32 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

33 
vÆ
 = 
ªgs
 [
ªg
];

34 i‡(
£t
) {

35 
vÆ
 |
bô
;

37 
vÆ
 &~
bô
;

39 
ªgs
 [
ªg
] = 
vÆ
;

40 
	`πems_öãºu±_íabÀ
(
Àvñ
);

41 
	}
}

43 
	$°m32f4_rcc_ª£t
(
°m32f4_rcc_ödex
 
ödex
)

45 
	`°m32f4_rcc_£t_ª£t
(
ödex
, 
åue
);

46 
	`°m32f4_rcc_£t_ª£t
(
ödex
, 
Ál£
);

47 
	}
}

49 
	$°m32f4_rcc_£t_ª£t
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
)

51 vﬁ©ûê
°m32f4_rcc
 *
rcc
 = 
STM32F4_RCC
;

53 #ifde‡
STM32F4_FAMILY_F4XXXX


54 
	`rcc_£t
(
ödex
, 
£t
, &
rcc
->
ahbr°r
 [0]);

56 #ifde‡
STM32F4_FAMILY_F10XXX


58 
	`rcc_£t
(
ödex
, 
£t
, &
rcc
->
cú
);

60 
	}
}

62 
	$°m32f4_rcc_£t_˛ock
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
)

64 vﬁ©ûê
°m32f4_rcc
 *
rcc
 = 
STM32F4_RCC
;

66 
	`rcc_£t
(
ödex
, 
£t
, &
rcc
->
ahbír
 [0]);

67 
	}
}

69 #ifde‡
STM32F4_FAMILY_F4XXXX


70 
	$°m32f4_rcc_£t_low_powî_˛ock
(
°m32f4_rcc_ödex
 
ödex
, 
boﬁ
 
£t
)

72 vﬁ©ûê
°m32f4_rcc
 *
rcc
 = 
STM32F4_RCC
;

74 
	`rcc_£t
(
ödex
, 
£t
, &
rcc
->
ahbÕír
 [0]);

75 
	}
}

	@src/lib/libbsp/arm/stm32f4/startup/start-config-io.c

15 
	~<b•/io.h
>

16 
	~<b•.h
>

18 c⁄° 
°m32f4_gpio_c⁄fig
 
	g°m32f4_°¨t_c⁄fig_gpio
 [] = {

19 #ifde‡
STM32F4_FAMILY_F4XXXX


20 #ifde‡
STM32F4_ENABLE_USART_1


21 
STM32F4_PIN_USART1_TX_PA9
,

22 
STM32F4_PIN_USART1_RX_PA10
,

24 #ifde‡
STM32F4_ENABLE_USART_2


25 
STM32F4_PIN_USART2_TX_PA2
,

26 
STM32F4_PIN_USART2_RX_PA3
,

28 #ifde‡
STM32F4_ENABLE_USART_3


29 
STM32F4_PIN_USART3_TX_PD8
,

30 
STM32F4_PIN_USART3_RX_PD9
,

32 #ifde‡
STM32F4_ENABLE_UART_4


33 
STM32F4_PIN_UART4_TX_PA0
,

34 
STM32F4_PIN_UART4_RX_PA1
,

36 #ifde‡
STM32F4_ENABLE_UART_5


37 
STM32F4_PIN_UART5_TX_PC12
,

38 
STM32F4_PIN_UART5_RX_PD2
,

40 #ifde‡
STM32F4_ENABLE_USART_6


41 
STM32F4_PIN_USART6_TX_PC6
,

42 
STM32F4_PIN_USART6_RX_PC7
,

44 #ifde‡
STM32F4_ENABLE_I2C1


45 #îr‹ 
NŸ
 
im∂emíãd
.

47 #ifde‡
STM32F4_ENABLE_I2C2


48 #îr‹ 
NŸ
 
im∂emíãd
.

51 #ifde‡
STM32F4_FAMILY_F10XXX


52 #ifde‡
STM32F4_ENABLE_USART_1


53 
STM32F4_PIN_USART1_TX_MAP_0
,

54 
STM32F4_PIN_USART1_RX_MAP_0
,

56 #ifde‡
STM32F4_ENABLE_USART_2


57 
STM32F4_PIN_USART2_TX_MAP_0
,

58 
STM32F4_PIN_USART2_RX_MAP_0
,

60 #ifde‡
STM32F4_ENABLE_USART_3


61 
STM32F4_PIN_USART3_TX_MAP_0
,

62 
STM32F4_PIN_USART3_RX_MAP_0
,

64 #ifde‡
STM32F4_ENABLE_UART_4


65 
STM32F4_PIN_UART4_TX
,

66 
STM32F4_PIN_UART4_RX
,

68 #ifde‡
STM32F4_ENABLE_UART_5


69 
STM32F4_PIN_UART5_TX
,

70 
STM32F4_PIN_UART5_RX
,

72 #ifde‡
STM32F4_ENABLE_USART_6


73 #îr‹ 
STM32F10XXX
 
has
 
no
 
USART
 6

75 #ifde‡
STM32F4_ENABLE_I2C1


76 
STM32F4_PIN_I2C1_SCL_MAP0
,

77 
STM32F4_PIN_I2C1_SDA_MAP0
,

79 #ifde‡
STM32F4_ENABLE_I2C2


80 
STM32F4_PIN_I2C2_SCL
,

81 
STM32F4_PIN_I2C2_SDA
,

84 
STM32F4_GPIO_CONFIG_TERMINAL


	@src/lib/libbsp/arm/xilinx-zynq/console/console-config.c

15 
	~<libchù/£rül.h
>

17 
	~<b•.h
>

18 
	~<b•/úq.h
>

19 
	~<b•/zynq-u¨t.h
>

21 
c⁄sﬁe_tbl
 
	gC⁄sﬁe_C⁄figuøti⁄_P‹ts
[] = {

23 .
sDevi˚Name
 = "/dev/ttyS0",

24 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

25 .
	gpDevi˚Fns
 = &
zynq_u¨t_‚s
,

26 .
	gdevi˚Probe
 = 
NULL
,

27 .
	gpDevi˚Flow
 = 
NULL
,

28 .
	gulM¨gö
 = 0,

29 .
	gulHy°îesis
 = 0,

30 .
	gpDevi˚P¨ams
 = (*) 115200,

31 .
	gulCålP‹t1
 = 0xe0000000,

32 .
	gulCålP‹t2
 = 0,

33 .
	gulD©aP‹t
 = 0,

34 .
	ggëRegi°î
 = 
NULL
,

35 .
	g£tRegi°î
 = 
NULL
,

36 .
	ggëD©a
 = 
NULL
,

37 .
	g£tD©a
 = 
NULL
,

38 .
	gulClock
 = 0,

39 .
	gulI¡Ve˘‹
 = 
ZYNQ_IRQ_UART_0


41 .
	gsDevi˚Name
 = "/dev/ttyS1",

42 .
	gdevi˚Ty≥
 = 
SERIAL_CUSTOM
,

43 .
	gpDevi˚Fns
 = &
zynq_u¨t_‚s
,

44 .
	gdevi˚Probe
 = 
NULL
,

45 .
	gpDevi˚Flow
 = 
NULL
,

46 .
	gulM¨gö
 = 0,

47 .
	gulHy°îesis
 = 0,

48 .
	gpDevi˚P¨ams
 = (*) 115200,

49 .
	gulCålP‹t1
 = 0xe0001000,

50 .
	gulCålP‹t2
 = 0,

51 .
	gulD©aP‹t
 = 0,

52 .
	ggëRegi°î
 = 
NULL
,

53 .
	g£tRegi°î
 = 
NULL
,

54 .
	ggëD©a
 = 
NULL
,

55 .
	g£tD©a
 = 
NULL
,

56 .
	gulClock
 = 0,

57 .
	gulI¡Ve˘‹
 = 
ZYNQ_IRQ_UART_1


61 
	gC⁄sﬁe_C⁄figuøti⁄_Cou¡
 =

62 
RTEMS_ARRAY_SIZE
(
C⁄sﬁe_C⁄figuøti⁄_P‹ts
);

64 
	$ouçut_ch¨
(
c
)

66 
mö‹
 = (Ë
C⁄sﬁe_P‹t_Mö‹
;

67 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 !
NULL
 ?

68 
C⁄sﬁe_P‹t_Tbl
[
mö‹
] : &
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[minor];

69 c⁄° 
c⁄sﬁe_‚s
 *
cf
 = 
˘
->
pDevi˚Fns
;

71 i‡(
c
 == '\n') {

72 (*
cf
->
devi˚WrôePﬁÀd
)(
mö‹
, '\r');

75 (*
cf
->
devi˚WrôePﬁÀd
)(
mö‹
, 
c
);

76 
	}
}

78 
	$ouçut_ch¨_öô
(
c
)

80 i‡(
C⁄sﬁe_P‹t_Tbl
 =
NULL
) {

81 
mö‹
;

82 c⁄° 
c⁄sﬁe_‚s
 *
cf
;

84 
	`b•_c⁄sﬁe_£À˘
();

86 
mö‹
 = (Ë
C⁄sﬁe_P‹t_Mö‹
;

87 
cf
 = 
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[
mö‹
].
pDevi˚Fns
;

89 (*
cf
->
devi˚Inôülize
)(
mö‹
);

92 
BSP_ouçut_ch¨
 = 
ouçut_ch¨
;

93 
	`ouçut_ch¨
(
c
);

94 
	}
}

96 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
ouçut_ch¨_öô
;

98 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
NULL
;

	@src/lib/libbsp/arm/xilinx-zynq/console/zynq-uart.c

15 
	~<b•/zynq-u¨t.h
>

16 
	~<b•/zynq-u¨t-ªgs.h
>

18 
	~<b•›ts.h
>

20 
	~<libchù/£rsuµ.h
>

22 vﬁ©ûê
zynq_u¨t
 *
	$zynq_u¨t_gë_ªgs
(
mö‹
)

24 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 !
NULL
 ?

25 
C⁄sﬁe_P‹t_Tbl
[
mö‹
] : &
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[minor];

27  (vﬁ©ûê
zynq_u¨t
 *Ë
˘
->
ulCålP‹t1
;

28 
	}
}

33 
uöt32_t
 
	$zynq_u¨t_öput_˛ock
(Ë
	`__©åibuã__
 ((
wók
));

35 
uöt32_t
 
	$zynq_u¨t_öput_˛ock
()

37  
ZYNQ_CLOCK_UART
;

38 
	}
}

40 
	$zynq_ˇl_baud_øã
(
uöt32_t
 
baudøã
,

41 
uöt32_t
* 
brgr
,

42 
uöt32_t
* 
bauddiv
,

43 
uöt32_t
 
modîeg
)

45 
uöt32_t
 
brgr_vÆue
;

46 
uöt32_t
 
ˇlcbaudøã
;

47 
uöt32_t
 
baudîr‹
;

48 
uöt32_t
 
be°_îr‹
 = 0xFFFFFFFF;

49 
uöt32_t
 
≥r˚¡îr‹
;

50 
uöt32_t
 
bdiv
;

51 
uöt32_t
 
öput˛k
 = 
	`zynq_u¨t_öput_˛ock
();

57 i‡((
baudøã
 * 2Ë> 
öput˛k
) {

63 if(
modîeg
 & 
ZYNQ_UART_MODE_CLKS
) {

64 
öput˛k
 = inputclk / 8;

71 
bdiv
 = 4; bdiv < 255; bdiv++) {

76 
brgr_vÆue
 = 
öput˛k
 / (
baudøã
 * (
bdiv
 + 1));

81 
ˇlcbaudøã
 = 
öput˛k
/ (
brgr_vÆue
 * (
bdiv
 + 1));

86 i‡(
baudøã
 > 
ˇlcbaudøã
) {

87 
baudîr‹
 = 
baudøã
 - 
ˇlcbaudøã
;

90 
baudîr‹
 = 
ˇlcbaudøã
 - 
baudøã
;

96 i‡(
be°_îr‹
 > 
baudîr‹
) {

97 *
brgr
 = 
brgr_vÆue
;

98 *
bauddiv
 = 
bdiv
;

99 
be°_îr‹
 = 
baudîr‹
;

106 
≥r˚¡îr‹
 = (
be°_îr‹
 * 100Ë/ 
baudøã
;

107 
	#XUARTPS_MAX_BAUD_ERROR_RATE
 3

	)

108 i‡(
XUARTPS_MAX_BAUD_ERROR_RATE
 < 
≥r˚¡îr‹
) {

113 
	}
}

115 
	$zynq_u¨t_öôülize
(
mö‹
)

117 vﬁ©ûê
zynq_u¨t
 *
ªgs
 = 
	`zynq_u¨t_gë_ªgs
(
mö‹
);

118 
uöt32_t
 
brgr
 = 0x3e;

119 
uöt32_t
 
bauddiv
 = 0x6;

121 
	`zynq_ˇl_baud_øã
(115200, &
brgr
, &
bauddiv
, 
ªgs
->
mode
);

123 
ªgs
->
c⁄åﬁ
 &~(
ZYNQ_UART_CONTROL_RXEN
 | 
ZYNQ_UART_CONTROL_TXEN
);

124 
ªgs
->
c⁄åﬁ
 = 
ZYNQ_UART_CONTROL_RXDIS


125 | 
ZYNQ_UART_CONTROL_TXDIS


126 | 
ZYNQ_UART_CONTROL_RXRES


127 | 
ZYNQ_UART_CONTROL_TXRES
;

128 
ªgs
->
mode
 = 
	`ZYNQ_UART_MODE_CHMODE
(
ZYNQ_UART_MODE_CHMODE_NORMAL
)

129 | 
	`ZYNQ_UART_MODE_PAR
(
ZYNQ_UART_MODE_PAR_NONE
)

130 | 
	`ZYNQ_UART_MODE_CHRL
(
ZYNQ_UART_MODE_CHRL_8
);

131 
ªgs
->
baud_øã_gí
 = 
	`ZYNQ_UART_BAUD_RATE_GEN_CD
(
brgr
);

132 
ªgs
->
baud_øã_div
 = 
	`ZYNQ_UART_BAUD_RATE_DIV_BDIV
(
bauddiv
);

133 
ªgs
->
rx_fifo_åg_lvl
 = 
	`ZYNQ_UART_RX_FIFO_TRG_LVL_RTRIG
(0);

134 
ªgs
->
rx_timeout
 = 
	`ZYNQ_UART_RX_TIMEOUT_RTO
(0);

135 
ªgs
->
c⁄åﬁ
 = 
ZYNQ_UART_CONTROL_RXEN


136 | 
ZYNQ_UART_CONTROL_TXEN


137 | 
ZYNQ_UART_CONTROL_RSTTO
;

138 
	}
}

140 
	$zynq_u¨t_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

142 
πems_libio_›í_˛o£_¨gs_t
 *
oc
 = (πems_libio_›í_˛o£_¨gs_à*Ë
¨g
;

143 
πems_ãrmios_ây
 *
ây
 = (πems_ãrmios_ây *Ë
oc
->
i›
->
d©a1
;

144 
c⁄sﬁe_d©a
 *
cd
 = &
C⁄sﬁe_P‹t_D©a
[
mö‹
];

145 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

147 
cd
->
ãrmios_d©a
 = 
ây
;

148 
	`πems_ãrmios_£t_öôül_baud
(
ây
, (
πems_ãrmios_baud_t
Ë
˘
->
pDevi˚P¨ams
);

151 
	}
}

153 
	$zynq_u¨t_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

156 
	}
}

158 
	$zynq_u¨t_ªad_pﬁÀd
(
mö‹
)

160 vﬁ©ûê
zynq_u¨t
 *
ªgs
 = 
	`zynq_u¨t_gë_ªgs
(
mö‹
);

162 i‡((
ªgs
->
ch™√l_°s
 & 
ZYNQ_UART_CHANNEL_STS_REMPTY
) != 0) {

165  
	`ZYNQ_UART_TX_RX_FIFO_FIFO_GET
(
ªgs
->
tx_rx_fifo
);

167 
	}
}

169 
	$zynq_u¨t_wrôe_pﬁÀd
(
mö‹
, 
c
)

171 vﬁ©ûê
zynq_u¨t
 *
ªgs
 = 
	`zynq_u¨t_gë_ªgs
(
mö‹
);

173 (
ªgs
->
ch™√l_°s
 & 
ZYNQ_UART_CHANNEL_STS_TFUL
) != 0) {

177 
ªgs
->
tx_rx_fifo
 = 
	`ZYNQ_UART_TX_RX_FIFO_FIFO
(
c
);

178 
	}
}

180 
ssize_t
 
	$zynq_u¨t_wrôe_suµ‹t_pﬁÀd
(

181 
mö‹
,

182 c⁄° *
s
,

183 
size_t
 
n


186 
ssize_t
 
i
 = 0;

188 
i
 = 0; i < 
n
; ++i) {

189 
	`zynq_u¨t_wrôe_pﬁÀd
(
mö‹
, 
s
[
i
]);

192  
n
;

193 
	}
}

195 
	$zynq_u¨t_£t_©åibues
(
mö‹
, c⁄° 
ãrmios
 *
ãrm
)

198 vﬁ©ûê
zynq_u¨t
 *
ªgs
 = 
	`zynq_u¨t_gë_ªgs
(
mö‹
);

199 
uöt32_t
 
brgr
 = 0;

200 
uöt32_t
 
bauddiv
 = 0;

201 
rc
;

203 
rc
 = 
	`zynq_ˇl_baud_øã
(115200, &
brgr
, &
bauddiv
, 
ªgs
->
mode
);

204 i‡(
rc
 != 0)

205  
rc
;

207 
ªgs
->
c⁄åﬁ
 &~(
ZYNQ_UART_CONTROL_RXEN
 | 
ZYNQ_UART_CONTROL_TXEN
);

208 
ªgs
->
baud_øã_gí
 = 
	`ZYNQ_UART_BAUD_RATE_GEN_CD
(
brgr
);

209 
ªgs
->
baud_øã_div
 = 
	`ZYNQ_UART_BAUD_RATE_DIV_BDIV
(
bauddiv
);

210 
ªgs
->
c⁄åﬁ
 |
ZYNQ_UART_CONTROL_RXEN
 | 
ZYNQ_UART_CONTROL_TXEN
;

216 
	}
}

218 c⁄° 
c⁄sﬁe_‚s
 
	gzynq_u¨t_‚s
 = {

219 .
devi˚Probe
 = 
libchù_£rül_deÁu…_¥obe
,

220 .
	gdevi˚Fú°O≥n
 = 
zynq_u¨t_fú°_›í
,

221 .
	gdevi˚La°Clo£
 = 
zynq_u¨t_œ°_˛o£
,

222 .
	gdevi˚Ród
 = 
zynq_u¨t_ªad_pﬁÀd
,

223 .
	gdevi˚Wrôe
 = 
zynq_u¨t_wrôe_suµ‹t_pﬁÀd
,

224 .
	gdevi˚Inôülize
 = 
zynq_u¨t_öôülize
,

225 .
	gdevi˚WrôePﬁÀd
 = 
zynq_u¨t_wrôe_pﬁÀd
,

226 .
	gdevi˚SëAâribuãs
 = 
zynq_u¨t_£t_©åibues
,

227 .
	gdevi˚OuçutU£sI¡îru±s
 = 
Ál£


	@src/lib/libbsp/arm/xilinx-zynq/i2c/cadence-i2c.c

15 
	~<b•/ˇdí˚-i2c.h
>

16 
	~<b•/ˇdí˚-i2c-ªgs.h
>

18 
	~<πems/úq-exãnsi⁄.h
>

19 
	~<πems/sc‹e/as£π.h
>

21 
	~<dev/i2c/i2c.h
>

23 
	#CADENCE_I2C_DIV_A_MAX
 4

	)

25 
	#CADENCE_I2C_DIV_B_MAX
 64

	)

27 
	#CADENCE_I2C_FIFO_DEPTH
 16

	)

29 
	#CADENCE_I2C_DATA_IRQ_DEPTH
 (
CADENCE_I2C_FIFO_DEPTH
 - 2)

	)

31 
	#CADENCE_I2C_TRANSFER_SIZE_MAX
 255

	)

33 
	#CADENCE_I2C_TRANSFER_SIZE_ONCE_MAX
 (18 * 
CADENCE_I2C_DATA_IRQ_DEPTH
)

	)

35 
	#CADENCE_I2C_IRQ_ERROR
 \

36 (
CADENCE_I2C_IXR_ARB_LOST
 \

37 | 
CADENCE_I2C_IXR_RX_UNF
 \

38 | 
CADENCE_I2C_IXR_TX_OVR
 \

39 | 
CADENCE_I2C_IXR_RX_OVR
 \

40 | 
CADENCE_I2C_IXR_NACK
)

	)

42 
	#CADENCE_I2C_IRQ_USED
 \

43 (
CADENCE_I2C_IRQ_ERROR
 \

44 | 
CADENCE_I2C_IXR_DATA
 \

45 | 
CADENCE_I2C_IXR_COMP
)

	)

48 
i2c_bus
 
	mba£
;

49 vﬁ©ûê
ˇdí˚_i2c
 *
	mªgs
;

50 
i2c_msg
 *
	mmsgs
;

51 
uöt32_t
 
	mmsg_todo
;

52 
uöt32_t
 
	mcuºít_msg_todo
;

53 
uöt8_t
 *
	mcuºít_msg_byã
;

54 
uöt32_t
 
	mcuºít_todo
;

55 
uöt32_t
 
	múq°©us
;

56 
boﬁ
 
	mªad
;

57 
boﬁ
 
	mhﬁd
;

58 
πems_id
 
	mèsk_id
;

59 
uöt32_t
 
	möput_˛ock
;

60 
πems_ve˘‹_numbî
 
	múq
;

61 } 
	tˇdí˚_i2c_bus
;

63 
	$ˇdí˚_i2c_dißbÀ_öãºu±s
(vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
)

65 
ªgs
->
úqdißbÀ
 = 0xffff;

66 
	}
}

68 
	$ˇdí˚_i2c_˛ór_úq_°©us
(vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
)

70 
ªgs
->
úq°©us
 =Ñegs->irqstatus;

71 
	}
}

73 
	$ˇdí˚_i2c_ª£t
(
ˇdí˚_i2c_bus
 *
bus
)

75 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
 = 
bus
->regs;

76 
uöt32_t
 
vÆ
;

78 
	`ˇdí˚_i2c_dißbÀ_öãºu±s
(
ªgs
);

80 
vÆ
 = 
ªgs
->
c⁄åﬁ
;

81 
vÆ
 &~
CADENCE_I2C_CONTROL_HOLD
;

82 
vÆ
 |
CADENCE_I2C_CONTROL_ACKEN


83 | 
CADENCE_I2C_CONTROL_MS


84 | 
CADENCE_I2C_CONTROL_CLR_FIFO
;

85 
ªgs
->
c⁄åﬁ
 = 
vÆ
;

87 
ªgs
->
å™s„r_size
 = 0;

88 
ªgs
->
°©us
 =Ñegs->status;

90 
	`ˇdí˚_i2c_˛ór_úq_°©us
(
ªgs
);

91 
	}
}

93 
uöt32_t
 
	$ˇdí˚_i2c_£t_addªss_size
(

94 c⁄° 
i2c_msg
 *
msg
,

95 
uöt32_t
 
c⁄åﬁ


98 i‡((
msg
->
Êags
 & 
I2C_M_TEN
) == 0) {

99 
c⁄åﬁ
 |
CADENCE_I2C_CONTROL_NEA
;

101 
c⁄åﬁ
 &~
CADENCE_I2C_CONTROL_NEA
;

104  
c⁄åﬁ
;

105 
	}
}

107 
	$ˇdí˚_i2c_£tup_ªad_å™s„r
(

108 
ˇdí˚_i2c_bus
 *
bus
,

109 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
,

110 
uöt32_t
 
c⁄åﬁ


113 
c⁄åﬁ
 |
CADENCE_I2C_CONTROL_RW
;

114 
ªgs
->
c⁄åﬁ
 = control;

116 i‡(
bus
->
cuºít_todo
 <
CADENCE_I2C_TRANSFER_SIZE_MAX
) {

117 
ªgs
->
å™s„r_size
 = 
bus
->
cuºít_todo
;

119 
ªgs
->
å™s„r_size
 = 
CADENCE_I2C_TRANSFER_SIZE_ONCE_MAX
;

121 
	}
}

123 
	$ˇdí˚_i2c_√xt_byã
(
ˇdí˚_i2c_bus
 *
bus
)

125 --
bus
->
cuºít_msg_todo
;

126 ++
bus
->
cuºít_msg_byã
;

128 i‡(
bus
->
cuºít_msg_todo
 == 0) {

129 
i2c_msg
 *
msg
;

131 ++
bus
->
msgs
;

132 --
bus
->
msg_todo
;

134 
msg
 = &
bus
->
msgs
[0];

136 
bus
->
cuºít_msg_todo
 = 
msg
->
Àn
;

137 
bus
->
cuºít_msg_byã
 = 
msg
->
buf
;

139 
	}
}

141 
	$ˇdí˚_i2c_wrôe_to_fifo
(

142 
ˇdí˚_i2c_bus
 *
bus
,

143 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs


146 
uöt32_t
 
•a˚_avaûabÀ
;

147 
uöt32_t
 
todo_now
;

148 
uöt32_t
 
i
;

150 
•a˚_avaûabÀ
 = 
CADENCE_I2C_FIFO_DEPTH
 - 
ªgs
->
å™s„r_size
;

152 i‡(
bus
->
cuºít_todo
 > 
•a˚_avaûabÀ
) {

153 
todo_now
 = 
•a˚_avaûabÀ
;

155 
todo_now
 = 
bus
->
cuºít_todo
;

158 
bus
->
cuºít_todo
 -
todo_now
;

160 
i
 = 0; i < 
todo_now
; ++i) {

161 
ªgs
->
d©a
 = *
bus
->
cuºít_msg_byã
;

163 
	`ˇdí˚_i2c_√xt_byã
(
bus
);

165 
	}
}

167 
	$ˇdí˚_i2c_£tup_wrôe_å™s„r
(

168 
ˇdí˚_i2c_bus
 *
bus
,

169 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
,

170 
uöt32_t
 
c⁄åﬁ


173 
c⁄åﬁ
 &~
CADENCE_I2C_CONTROL_RW
;

174 
ªgs
->
c⁄åﬁ
 = control;

176 
	`ˇdí˚_i2c_wrôe_to_fifo
(
bus
, 
ªgs
);

177 
	}
}

179 
	$ˇdí˚_i2c_£tup_å™s„r
(

180 
ˇdí˚_i2c_bus
 *
bus
,

181 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs


184 c⁄° 
i2c_msg
 *
msgs
 = 
bus
->msgs;

185 
uöt32_t
 
msg_todo
 = 
bus
->msg_todo;

186 
uöt32_t
 
i
;

187 
uöt32_t
 
c⁄åﬁ
;

189 
bus
->
cuºít_todo
 = 
msgs
[0].
Àn
;

190 
i
 = 1; i < 
msg_todo
 && (
msgs
[i].
Êags
 & 
I2C_M_NOSTART
) != 0; ++i) {

191 
bus
->
cuºít_todo
 +
msgs
[
i
].
Àn
;

194 
ªgs
 = 
bus
->regs;

196 
c⁄åﬁ
 = 
ªgs
->control;

197 
c⁄åﬁ
 |
CADENCE_I2C_CONTROL_CLR_FIFO
;

199 
bus
->
hﬁd
 = 
i
 < 
msg_todo
;

201 i‡(
bus
->
hﬁd
 || bus->
cuºít_todo
 > 
CADENCE_I2C_FIFO_DEPTH
) {

202 
c⁄åﬁ
 |
CADENCE_I2C_CONTROL_HOLD
;

204 
c⁄åﬁ
 &~
CADENCE_I2C_CONTROL_HOLD
;

207 
c⁄åﬁ
 = 
	`ˇdí˚_i2c_£t_addªss_size
(
msgs
, control);

209 
bus
->
ªad
 = (
msgs
->
Êags
 & 
I2C_M_RD
) != 0;

210 i‡(
bus
->
ªad
) {

211 
	`ˇdí˚_i2c_£tup_ªad_å™s„r
(
bus
, 
ªgs
, 
c⁄åﬁ
);

213 
	`ˇdí˚_i2c_£tup_wrôe_å™s„r
(
bus
, 
ªgs
, 
c⁄åﬁ
);

216 
	`ˇdí˚_i2c_˛ór_úq_°©us
(
ªgs
);

218 
ªgs
->
addªss
 = 
	`CADENCE_I2C_ADDRESS
(
msgs
->
addr
);

219 
	}
}

221 
	$ˇdí˚_i2c_c⁄töue_ªad_å™s„r
(

222 
ˇdí˚_i2c_bus
 *
bus
,

223 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs


226 
uöt32_t
 
i
;

228 
bus
->
cuºít_todo
 -
CADENCE_I2C_DATA_IRQ_DEPTH
;

237 i‡(
ªgs
->
å™s„r_size
 == 0) {

238 i‡(
bus
->
cuºít_todo
 <
CADENCE_I2C_TRANSFER_SIZE_MAX
) {

239 
ªgs
->
å™s„r_size
 = 
bus
->
cuºít_todo
;

241 
ªgs
->
å™s„r_size
 = 
CADENCE_I2C_TRANSFER_SIZE_ONCE_MAX
;

245 
i
 = 0; i < 
CADENCE_I2C_DATA_IRQ_DEPTH
; ++i) {

246 *
bus
->
cuºít_msg_byã
 = (
uöt8_t
Ë
ªgs
->
d©a
;

248 
	`ˇdí˚_i2c_√xt_byã
(
bus
);

251 i‡(!
bus
->
hﬁd
 && bus->
cuºít_todo
 <
CADENCE_I2C_FIFO_DEPTH
) {

252 
ªgs
->
c⁄åﬁ
 &~
CADENCE_I2C_CONTROL_HOLD
;

254 
	}
}

256 
	$ˇdí˚_i2c_öãºu±
(*
¨g
)

258 
ˇdí˚_i2c_bus
 *
bus
 = 
¨g
;

259 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
 = 
bus
->regs;

260 
uöt32_t
 
úq°©us
 = 
ªgs
->irqstatus;

261 
boﬁ
 
d⁄e
 = 
Ál£
;

264 
ªgs
->
úq°©us
 = irqstatus;

266 i‡((
úq°©us
 & (
CADENCE_I2C_IXR_ARB_LOST
 | 
CADENCE_I2C_IXR_NACK
)) != 0) {

267 
d⁄e
 = 
åue
;

271 (
úq°©us
 & 
CADENCE_I2C_IXR_DATA
) != 0

272 && 
bus
->
ªad


273 && 
bus
->
cuºít_todo
 >
CADENCE_I2C_DATA_IRQ_DEPTH


275 
	`ˇdí˚_i2c_c⁄töue_ªad_å™s„r
(
bus
, 
ªgs
);

278 i‡((
úq°©us
 & 
CADENCE_I2C_IXR_COMP
) != 0) {

279 i‡(
bus
->
ªad
) {

280 
uöt32_t
 
todo_now
 = 
bus
->
cuºít_todo
;

281 
uöt32_t
 
i
;

283 
i
 = 0; i < 
todo_now
; ++i) {

284 *
bus
->
cuºít_msg_byã
 = (
uöt8_t
Ë
ªgs
->
d©a
;

286 
	`ˇdí˚_i2c_√xt_byã
(
bus
);

289 
bus
->
cuºít_todo
 = 0;

291 
d⁄e
 = 
åue
;

293 i‡(
bus
->
cuºít_todo
 > 0) {

294 
	`ˇdí˚_i2c_wrôe_to_fifo
(
bus
, 
ªgs
);

296 
d⁄e
 = 
åue
;

299 i‡(!
bus
->
hﬁd
 && bus->
cuºít_todo
 == 0) {

300 
ªgs
->
c⁄åﬁ
 &~
CADENCE_I2C_CONTROL_HOLD
;

305 i‡(
d⁄e
) {

306 
uöt32_t
 
îr
 = 
úq°©us
 & 
CADENCE_I2C_IRQ_ERROR
;

308 i‡(
bus
->
msg_todo
 =0 || 
îr
 != 0) {

309 
πems_°©us_code
 
sc
;

311 
	`ˇdí˚_i2c_dißbÀ_öãºu±s
(
ªgs
);

313 
bus
->
úq°©us
 = 
îr
;

315 
sc
 = 
	`πems_evít_å™sõ¡_£nd
(
bus
->
èsk_id
);

316 
	`_As£π
(
sc
 =
RTEMS_SUCCESSFUL
);

317 (Ë
sc
;

319 
	`ˇdí˚_i2c_£tup_å™s„r
(
bus
, 
ªgs
);

322 
	}
}

324 
	$ˇdí˚_i2c_å™s„r
(

325 
i2c_bus
 *
ba£
,

326 
i2c_msg
 *
msgs
,

327 
uöt32_t
 
msg_cou¡


330 
ˇdí˚_i2c_bus
 *
bus
 = (ˇdí˚_i2c_bu†*Ë
ba£
;

331 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
;

332 
πems_°©us_code
 
sc
;

333 
uöt32_t
 
i
;

335 
	`_As£π
(
msg_cou¡
 > 0);

337 
i
 = 0; i < 
msg_cou¡
; ++i) {

339 i‡((
msgs
[
i
].
Êags
 & 
I2C_M_RECV_LEN
) != 0) {

340  -
EINVAL
;

344 
bus
->
msgs
 = &msgs[0];

345 
bus
->
msg_todo
 = 
msg_cou¡
;

346 
bus
->
cuºít_msg_todo
 = 
msgs
[0].
Àn
;

347 
bus
->
cuºít_msg_byã
 = 
msgs
[0].
buf
;

348 
bus
->
èsk_id
 = 
	`πems_èsk_£lf
();

350 
ªgs
 = 
bus
->regs;

351 
	`ˇdí˚_i2c_£tup_å™s„r
(
bus
, 
ªgs
);

352 
ªgs
->
úqíabÀ
 = 
CADENCE_I2C_IRQ_USED
;

354 
sc
 = 
	`πems_evít_å™sõ¡_ª˚ive
(
RTEMS_WAIT
, 
bus
->
ba£
.
timeout
);

355 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

356 
	`ˇdí˚_i2c_ª£t
(
bus
);

357 
	`πems_evít_å™sõ¡_˛ór
();

359  -
ETIMEDOUT
;

362  
bus
->
úq°©us
 =0 ? 0 : -
EIO
;

363 
	}
}

365 
	$ˇdí˚_i2c_£t_˛ock
(
i2c_bus
 *
ba£
, 
˛ock
)

367 
ˇdí˚_i2c_bus
 *
bus
 = (ˇdí˚_i2c_bu†*Ë
ba£
;

368 vﬁ©ûê
ˇdí˚_i2c
 *
ªgs
 = 
bus
->regs;

369 
uöt32_t
 
îr‹
 = 0xffffffff;

370 
uöt32_t
 
be°_div_a
 = 
CADENCE_I2C_DIV_A_MAX
 - 1;

371 
uöt32_t
 
be°_div_b
 = 
CADENCE_I2C_DIV_B_MAX
 - 1;

372 
uöt32_t
 
div
 = 
bus
->
öput_˛ock
 / (22 * 
˛ock
);

373 
uöt32_t
 
div_a
;

374 
uöt32_t
 
c⁄åﬁ
;

376 i‡(
div
 <0 || div > (
CADENCE_I2C_DIV_A_MAX
 * 
CADENCE_I2C_DIV_B_MAX
)) {

377  -
EIO
;

380 
div_a
 = 0; div_®< 
CADENCE_I2C_DIV_A_MAX
; ++div_a) {

381 
uöt32_t
 
a
 = 22 * 
˛ock
 * (
div_a
 + 1);

382 
uöt32_t
 
b
 = (
bus
->
öput_˛ock
 + 
a
 - 1) /á;

384 i‡(
b
 > 0 && b <
CADENCE_I2C_DIV_B_MAX
) {

385 
uöt32_t
 
a˘uÆ_˛ock
 = 
bus
->
öput_˛ock
 / (22 * (
div_a
 + 1Ë* 
b
);

386 
uöt32_t
 
e
 = 
˛ock
 < 
a˘uÆ_˛ock
 ?

387 
a˘uÆ_˛ock
 - 
˛ock
 : clock -áctual_clock;

394 i‡(
e
 <
îr‹
 && 
a˘uÆ_˛ock
 <
˛ock
) {

395 
îr‹
 = 
e
;

396 
be°_div_a
 = 
div_a
;

397 
be°_div_b
 = 
b
 - 1;

402 
c⁄åﬁ
 = 
ªgs
->control;

403 
c⁄åﬁ
 = 
	`CADENCE_I2C_CONTROL_DIV_A_SET
(c⁄åﬁ, 
be°_div_a
);

404 
c⁄åﬁ
 = 
	`CADENCE_I2C_CONTROL_DIV_B_SET
(c⁄åﬁ, 
be°_div_b
);

405 
ªgs
->
c⁄åﬁ
 = control;

408 
	}
}

410 
	$ˇdí˚_i2c_de°roy
(
i2c_bus
 *
ba£
)

412 
ˇdí˚_i2c_bus
 *
bus
 = (ˇdí˚_i2c_bu†*Ë
ba£
;

413 
πems_°©us_code
 
sc
;

415 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(
bus
->
úq
, 
ˇdí˚_i2c_öãºu±
, bus);

416 
	`_As£π
(
sc
 =
RTEMS_SUCCESSFUL
);

417 (Ë
sc
;

419 
	`i2c_bus_de°roy_™d_‰ì
(&
bus
->
ba£
);

420 
	}
}

422 
	$i2c_bus_ªgi°î_ˇdí˚
(

423 c⁄° *
bus_∑th
,

424 
uöçå_t
 
ªgi°î_ba£
,

425 
uöt32_t
 
öput_˛ock
,

426 
πems_ve˘‹_numbî
 
úq


429 
ˇdí˚_i2c_bus
 *
bus
;

430 
πems_°©us_code
 
sc
;

431 
îr
;

433 
bus
 = (
ˇdí˚_i2c_bus
 *Ë
	`i2c_bus_Æloc_™d_öô
((*bus));

434 i‡(
bus
 =
NULL
) {

438 
bus
->
ªgs
 = (vﬁ©ûê
ˇdí˚_i2c
 *Ë
ªgi°î_ba£
;

439 
bus
->
öput_˛ock
 = input_clock;

440 
bus
->
úq
 = irq;

442 
	`ˇdí˚_i2c_ª£t
(
bus
);

444 
îr
 = 
	`ˇdí˚_i2c_£t_˛ock
(&
bus
->
ba£
, 
I2C_BUS_CLOCK_DEFAULT
);

445 i‡(
îr
 != 0) {

446 (*
bus
->
ba£
.
de°roy
)(&bus->base);

448 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
(-
îr
);

451 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

452 
úq
,

454 
RTEMS_INTERRUPT_UNIQUE
,

455 
ˇdí˚_i2c_öãºu±
,

456 
bus


458 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

459 (*
bus
->
ba£
.
de°roy
)(&bus->base);

461 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
(
EIO
);

464 
bus
->
ba£
.
å™s„r
 = 
ˇdí˚_i2c_å™s„r
;

465 
bus
->
ba£
.
£t_˛ock
 = 
ˇdí˚_i2c_£t_˛ock
;

466 
bus
->
ba£
.
de°roy
 = 
ˇdí˚_i2c_de°roy
;

468  
	`i2c_bus_ªgi°î
(&
bus
->
ba£
, 
bus_∑th
);

469 
	}
}

	@src/lib/libbsp/arm/xilinx-zynq/include/bsp.h

21 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_BSP_H


22 
	#LIBBSP_ARM_XILINX_ZYNQ_BSP_H


	)

24 
	~<b•›ts.h
>

26 
	#BSP_FEATURE_IRQ_EXTENSION


	)

28 #i‚de‡
ASM


30 
	~<πems.h
>

31 
	~<πems/c⁄sﬁe.h
>

32 
	~<πems/˛ockdrv.h
>

34 
	~<b•/deÁu…-öôül-exãnsi⁄.h
>

35 
	~<b•/°¨t.h
>

37 #ifde‡
__˝lu•lus


48 
	#BSP_ARM_A9MPCORE_SCU_BASE
 0xf8f00000

	)

50 
	#BSP_ARM_GIC_CPUIF_BASE
 0xf8f00100

	)

52 
	#BSP_ARM_A9MPCORE_GT_BASE
 0xf8f00200

	)

54 
	#BSP_ARM_A9MPCORE_PT_BASE
 0xf8f00600

	)

56 
	#BSP_ARM_GIC_DIST_BASE
 0xf8f01000

	)

58 
	#BSP_ARM_L2C_310_BASE
 0xf8f02000

	)

60 
	#BSP_ARM_L2C_310_ID
 0x410000c8

	)

70 
BSP_START_TEXT_SECTION
 
zynq_£tup_mmu_™d_ˇche
();

72 
uöt32_t
 
zynq_˛ock_˝u_1x
();

76 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/xilinx-zynq/include/cadence-i2c-regs.h

15 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_CADENCE_I2C_REGS_H


16 
	#LIBBSP_ARM_XILINX_ZYNQ_CADENCE_I2C_REGS_H


	)

18 
	~<b•/utûôy.h
>

21 
uöt32_t
 
	mc⁄åﬁ
;

22 
	#CADENCE_I2C_CONTROL_DIV_A
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 14, 15)

	)

23 
	#CADENCE_I2C_CONTROL_DIV_A_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 14, 15)

	)

24 
	#CADENCE_I2C_CONTROL_DIV_A_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 14, 15)

	)

25 
	#CADENCE_I2C_CONTROL_DIV_B
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 13)

	)

26 
	#CADENCE_I2C_CONTROL_DIV_B_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 13)

	)

27 
	#CADENCE_I2C_CONTROL_DIV_B_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 13)

	)

28 
	#CADENCE_I2C_CONTROL_CLR_FIFO
 
	`BSP_BIT32
(6)

	)

29 
	#CADENCE_I2C_CONTROL_SLVMON
 
	`BSP_BIT32
(5)

	)

30 
	#CADENCE_I2C_CONTROL_HOLD
 
	`BSP_BIT32
(4)

	)

31 
	#CADENCE_I2C_CONTROL_ACKEN
 
	`BSP_BIT32
(3)

	)

32 
	#CADENCE_I2C_CONTROL_NEA
 
	`BSP_BIT32
(2)

	)

33 
	#CADENCE_I2C_CONTROL_MS
 
	`BSP_BIT32
(1)

	)

34 
	#CADENCE_I2C_CONTROL_RW
 
	`BSP_BIT32
(0)

	)

35 
uöt32_t
 
	m°©us
;

36 
	#CADENCE_I2C_STATUS_BA
 
	`BSP_BIT32
(8)

	)

37 
	#CADENCE_I2C_STATUS_RXOVF
 
	`BSP_BIT32
(7)

	)

38 
	#CADENCE_I2C_STATUS_TXDV
 
	`BSP_BIT32
(6)

	)

39 
	#CADENCE_I2C_STATUS_RXDV
 
	`BSP_BIT32
(5)

	)

40 
	#CADENCE_I2C_STATUS_RXRW
 
	`BSP_BIT32
(3)

	)

41 
uöt32_t
 
	maddªss
;

42 
	#CADENCE_I2C_ADDRESS
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 9)

	)

43 
	#CADENCE_I2C_ADDRESS_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 9)

	)

44 
	#CADENCE_I2C_ADDRESS_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 9)

	)

45 
uöt32_t
 
	md©a
;

46 
uöt32_t
 
	múq°©us
;

47 
	#CADENCE_I2C_IXR_ARB_LOST
 
	`BSP_BIT32
(9)

	)

48 
	#CADENCE_I2C_IXR_RX_UNF
 
	`BSP_BIT32
(7)

	)

49 
	#CADENCE_I2C_IXR_TX_OVR
 
	`BSP_BIT32
(6)

	)

50 
	#CADENCE_I2C_IXR_RX_OVR
 
	`BSP_BIT32
(5)

	)

51 
	#CADENCE_I2C_IXR_SLV_RDY
 
	`BSP_BIT32
(4)

	)

52 
	#CADENCE_I2C_IXR_TO
 
	`BSP_BIT32
(3)

	)

53 
	#CADENCE_I2C_IXR_NACK
 
	`BSP_BIT32
(2)

	)

54 
	#CADENCE_I2C_IXR_DATA
 
	`BSP_BIT32
(1)

	)

55 
	#CADENCE_I2C_IXR_COMP
 
	`BSP_BIT32
(0)

	)

56 
uöt32_t
 
	må™s„r_size
;

57 
	#CADENCE_I2C_TRANSFER_SIZE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

58 
	#CADENCE_I2C_TRANSFER_SIZE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

59 
	#CADENCE_I2C_TRANSFER_SIZE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

60 
uöt32_t
 
	m¶ave_m⁄_∑u£
;

61 
	#CADENCE_I2C_SLAVE_MON_PAUSE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 3)

	)

62 
	#CADENCE_I2C_SLAVE_MON_PAUSE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 3)

	)

63 
	#CADENCE_I2C_SLAVE_MON_PAUSE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 3)

	)

64 
uöt32_t
 
	mtimeout
;

65 
	#CADENCE_I2C_TIMEOUT
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

66 
	#CADENCE_I2C_TIMEOUT_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

67 
	#CADENCE_I2C_TIMEOUT_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

68 
uöt32_t
 
	múqmask
;

69 
uöt32_t
 
	múqíabÀ
;

70 
uöt32_t
 
	múqdißbÀ
;

71 } 
	tˇdí˚_i2c
;

	@src/lib/libbsp/arm/xilinx-zynq/include/cadence-i2c.h

15 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_CADENCE_I2C_H


16 
	#LIBBSP_ARM_XILINX_ZYNQ_CADENCE_I2C_H


	)

18 
	~<πems.h
>

20 #ifde‡
__˝lu•lus


24 
i2c_bus_ªgi°î_ˇdí˚
(

25 c⁄° *
bus_∑th
,

26 
uöçå_t
 
ªgi°î_ba£
,

27 
uöt32_t
 
öput_˛ock
,

28 
πems_ve˘‹_numbî
 
úq


31 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/xilinx-zynq/include/i2c.h

15 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_I2C_H


16 
	#LIBBSP_ARM_XILINX_ZYNQ_I2C_H


	)

18 
	~<b•/ˇdí˚-i2c.h
>

19 
	~<b•/úq.h
>

20 
	~<b•.h
>

22 #ifde‡
__˝lu•lus


26 
ölöe
 
zynq_ªgi°î_i2c_0
()

28  
i2c_bus_ªgi°î_ˇdí˚
(

31 
zynq_˛ock_˝u_1x
(),

32 
ZYNQ_IRQ_I2C_0


36 
ölöe
 
zynq_ªgi°î_i2c_1
()

38  
i2c_bus_ªgi°î_ˇdí˚
(

41 
zynq_˛ock_˝u_1x
(),

42 
ZYNQ_IRQ_I2C_1


46 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/xilinx-zynq/include/irq.h

21 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_IRQ_H


22 
	#LIBBSP_ARM_XILINX_ZYNQ_IRQ_H


	)

24 #i‚de‡
ASM


26 
	~<πems/úq.h
>

27 
	~<πems/úq-exãnsi⁄.h
>

29 
	~<b•/¨m-a9mpc‹e-úq.h
>

30 
	~<b•/¨m-gic-úq.h
>

32 #ifde‡
__˝lu•lus


43 
	#ZYNQ_IRQ_CPU_0
 32

	)

44 
	#ZYNQ_IRQ_CPU_1
 33

	)

45 
	#ZYNQ_IRQ_L2_CACHE
 34

	)

46 
	#ZYNQ_IRQ_OCM
 35

	)

47 
	#ZYNQ_IRQ_PMU_0
 37

	)

48 
	#ZYNQ_IRQ_PMU_1
 38

	)

49 
	#ZYNQ_IRQ_XADC
 39

	)

50 
	#ZYNQ_IRQ_DVI
 40

	)

51 
	#ZYNQ_IRQ_SWDT
 41

	)

52 
	#ZYNQ_IRQ_TTC_0_0
 42

	)

53 
	#ZYNQ_IRQ_TTC_1_0
 43

	)

54 
	#ZYNQ_IRQ_TTC_2_0
 44

	)

55 
	#ZYNQ_IRQ_DMAC_ABORT
 45

	)

56 
	#ZYNQ_IRQ_DMAC_0
 46

	)

57 
	#ZYNQ_IRQ_DMAC_1
 47

	)

58 
	#ZYNQ_IRQ_DMAC_2
 48

	)

59 
	#ZYNQ_IRQ_DMAC_3
 49

	)

60 
	#ZYNQ_IRQ_SMC
 50

	)

61 
	#ZYNQ_IRQ_QUAD_SPI
 51

	)

62 
	#ZYNQ_IRQ_GPIO
 52

	)

63 
	#ZYNQ_IRQ_USB_0
 53

	)

64 
	#ZYNQ_IRQ_ETHERNET_0
 54

	)

65 
	#ZYNQ_IRQ_ETHERNET_0_WAKEUP
 55

	)

66 
	#ZYNQ_IRQ_SDIO_0
 56

	)

67 
	#ZYNQ_IRQ_I2C_0
 57

	)

68 
	#ZYNQ_IRQ_SPI_0
 58

	)

69 
	#ZYNQ_IRQ_UART_0
 59

	)

70 
	#ZYNQ_IRQ_CAN_0
 60

	)

71 
	#ZYNQ_IRQ_FPGA_0
 61

	)

72 
	#ZYNQ_IRQ_FPGA_1
 62

	)

73 
	#ZYNQ_IRQ_FPGA_2
 63

	)

74 
	#ZYNQ_IRQ_FPGA_3
 64

	)

75 
	#ZYNQ_IRQ_FPGA_4
 65

	)

76 
	#ZYNQ_IRQ_FPGA_5
 66

	)

77 
	#ZYNQ_IRQ_FPGA_6
 67

	)

78 
	#ZYNQ_IRQ_FPGA_7
 68

	)

79 
	#ZYNQ_IRQ_TTC_0_1
 69

	)

80 
	#ZYNQ_IRQ_TTC_1_1
 70

	)

81 
	#ZYNQ_IRQ_TTC_2_1
 71

	)

82 
	#ZYNQ_IRQ_DMAC_4
 72

	)

83 
	#ZYNQ_IRQ_DMAC_5
 73

	)

84 
	#ZYNQ_IRQ_DMAC_6
 74

	)

85 
	#ZYNQ_IRQ_DMAC_7
 75

	)

86 
	#ZYNQ_IRQ_USB_1
 76

	)

87 
	#ZYNQ_IRQ_ETHERNET_1
 77

	)

88 
	#ZYNQ_IRQ_ETHERNET_1_WAKEUP
 78

	)

89 
	#ZYNQ_IRQ_SDIO_1
 79

	)

90 
	#ZYNQ_IRQ_I2C_1
 80

	)

91 
	#ZYNQ_IRQ_SPI_1
 81

	)

92 
	#ZYNQ_IRQ_UART_1
 82

	)

93 
	#ZYNQ_IRQ_CAN_1
 83

	)

94 
	#ZYNQ_IRQ_FPGA_8
 84

	)

95 
	#ZYNQ_IRQ_FPGA_9
 85

	)

96 
	#ZYNQ_IRQ_FPGA_10
 86

	)

97 
	#ZYNQ_IRQ_FPGA_11
 87

	)

98 
	#ZYNQ_IRQ_FPGA_12
 88

	)

99 
	#ZYNQ_IRQ_FPGA_13
 89

	)

100 
	#ZYNQ_IRQ_FPGA_14
 90

	)

101 
	#ZYNQ_IRQ_FPGA_15
 91

	)

102 
	#ZYNQ_IRQ_PARITY
 92

	)

104 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

105 
	#BSP_INTERRUPT_VECTOR_MAX
 92

	)

109 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/xilinx-zynq/include/tm27.h

21 #i‚de‡
_RTEMS_TMTEST27


25 #i‚de‡
__tm27_h


26 
	#__tm27_h


	)

34 
	~<b•/¨m-gic-tm27.h
>

	@src/lib/libbsp/arm/xilinx-zynq/include/zynq-uart-regs.h

28 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_UART_REGS_H


29 
	#LIBBSP_ARM_XILINX_ZYNQ_UART_REGS_H


	)

31 
	~<b•/utûôy.h
>

34 
uöt32_t
 
	mc⁄åﬁ
;

35 
	#ZYNQ_UART_CONTROL_STPBRK
 
	`BSP_BIT32
(8)

	)

36 
	#ZYNQ_UART_CONTROL_STTBRK
 
	`BSP_BIT32
(7)

	)

37 
	#ZYNQ_UART_CONTROL_RSTTO
 
	`BSP_BIT32
(6)

	)

38 
	#ZYNQ_UART_CONTROL_TXDIS
 
	`BSP_BIT32
(5)

	)

39 
	#ZYNQ_UART_CONTROL_TXEN
 
	`BSP_BIT32
(4)

	)

40 
	#ZYNQ_UART_CONTROL_RXDIS
 
	`BSP_BIT32
(3)

	)

41 
	#ZYNQ_UART_CONTROL_RXEN
 
	`BSP_BIT32
(2)

	)

42 
	#ZYNQ_UART_CONTROL_TXRES
 
	`BSP_BIT32
(1)

	)

43 
	#ZYNQ_UART_CONTROL_RXRES
 
	`BSP_BIT32
(0)

	)

44 
uöt32_t
 
	mmode
;

45 
	#ZYNQ_UART_MODE_CHMODE
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 8, 9)

	)

46 
	#ZYNQ_UART_MODE_CHMODE_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 8, 9)

	)

47 
	#ZYNQ_UART_MODE_CHMODE_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 8, 9)

	)

48 
	#ZYNQ_UART_MODE_CHMODE_NORMAL
 0x00U

	)

49 
	#ZYNQ_UART_MODE_CHMODE_AUTO_ECHO
 0x01U

	)

50 
	#ZYNQ_UART_MODE_CHMODE_LOCAL_LOOPBACK
 0x02U

	)

51 
	#ZYNQ_UART_MODE_CHMODE_REMOTE_LOOPBACK
 0x03U

	)

52 
	#ZYNQ_UART_MODE_NBSTOP
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 6, 7)

	)

53 
	#ZYNQ_UART_MODE_NBSTOP_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 6, 7)

	)

54 
	#ZYNQ_UART_MODE_NBSTOP_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 6, 7)

	)

55 
	#ZYNQ_UART_MODE_NBSTOP_STOP_1
 0x00U

	)

56 
	#ZYNQ_UART_MODE_NBSTOP_STOP_1_5
 0x01U

	)

57 
	#ZYNQ_UART_MODE_NBSTOP_STOP_2
 0x02U

	)

58 
	#ZYNQ_UART_MODE_PAR
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 3, 5)

	)

59 
	#ZYNQ_UART_MODE_PAR_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 3, 5)

	)

60 
	#ZYNQ_UART_MODE_PAR_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 3, 5)

	)

61 
	#ZYNQ_UART_MODE_PAR_EVEN
 0x00U

	)

62 
	#ZYNQ_UART_MODE_PAR_ODD
 0x01U

	)

63 
	#ZYNQ_UART_MODE_PAR_SPACE
 0x02U

	)

64 
	#ZYNQ_UART_MODE_PAR_MARK
 0x03U

	)

65 
	#ZYNQ_UART_MODE_PAR_NONE
 0x04U

	)

66 
	#ZYNQ_UART_MODE_CHRL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 1, 2)

	)

67 
	#ZYNQ_UART_MODE_CHRL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 1, 2)

	)

68 
	#ZYNQ_UART_MODE_CHRL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 1, 2)

	)

69 
	#ZYNQ_UART_MODE_CHRL_8
 0x00U

	)

70 
	#ZYNQ_UART_MODE_CHRL_7
 0x02U

	)

71 
	#ZYNQ_UART_MODE_CHRL_6
 0x03U

	)

72 
	#ZYNQ_UART_MODE_CLKS
 
	`BSP_BIT32
(0)

	)

73 
uöt32_t
 
	múq_í
;

74 
uöt32_t
 
	múq_dis
;

75 
uöt32_t
 
	múq_mask
;

76 
uöt32_t
 
	múq_°s
;

77 
	#ZYNQ_UART_TOVR
 
	`BSP_BIT32
(12)

	)

78 
	#ZYNQ_UART_TNFUL
 
	`BSP_BIT32
(11)

	)

79 
	#ZYNQ_UART_TTRIG
 
	`BSP_BIT32
(10)

	)

80 
	#ZYNQ_UART_DMSI
 
	`BSP_BIT32
(9)

	)

81 
	#ZYNQ_UART_TIMEOUT
 
	`BSP_BIT32
(8)

	)

82 
	#ZYNQ_UART_PARE
 
	`BSP_BIT32
(7)

	)

83 
	#ZYNQ_UART_FRAME
 
	`BSP_BIT32
(6)

	)

84 
	#ZYNQ_UART_ROVR
 
	`BSP_BIT32
(5)

	)

85 
	#ZYNQ_UART_TFUL
 
	`BSP_BIT32
(4)

	)

86 
	#ZYNQ_UART_TEMPTY
 
	`BSP_BIT32
(3)

	)

87 
	#ZYNQ_UART_RFUL
 
	`BSP_BIT32
(2)

	)

88 
	#ZYNQ_UART_REMPTY
 
	`BSP_BIT32
(1)

	)

89 
	#ZYNQ_UART_RTRIG
 
	`BSP_BIT32
(0)

	)

90 
uöt32_t
 
	mbaud_øã_gí
;

91 
	#ZYNQ_UART_BAUD_RATE_GEN_CD
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 15)

	)

92 
	#ZYNQ_UART_BAUD_RATE_GEN_CD_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 15)

	)

93 
	#ZYNQ_UART_BAUD_RATE_GEN_CD_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 15)

	)

94 
uöt32_t
 
	mrx_timeout
;

95 
	#ZYNQ_UART_RX_TIMEOUT_RTO
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

96 
	#ZYNQ_UART_RX_TIMEOUT_RTO_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

97 
	#ZYNQ_UART_RX_TIMEOUT_RTO_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

98 
uöt32_t
 
	mrx_fifo_åg_lvl
;

99 
	#ZYNQ_UART_RX_FIFO_TRG_LVL_RTRIG
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

100 
	#ZYNQ_UART_RX_FIFO_TRG_LVL_RTRIG_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

101 
	#ZYNQ_UART_RX_FIFO_TRG_LVL_RTRIG_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

102 
uöt32_t
 
	mmodem_˘æ
;

103 
	#ZYNQ_UART_MODEM_CTRL_FCM
 
	`BSP_BIT32
(5)

	)

104 
	#ZYNQ_UART_MODEM_CTRL_RTS
 
	`BSP_BIT32
(1)

	)

105 
	#ZYNQ_UART_MODEM_CTRL_DTR
 
	`BSP_BIT32
(0)

	)

106 
uöt32_t
 
	mmodem_°s
;

107 
	#ZYNQ_UART_MODEM_STS_FCMS
 
	`BSP_BIT32
(8)

	)

108 
	#ZYNQ_UART_MODEM_STS_DCD
 
	`BSP_BIT32
(7)

	)

109 
	#ZYNQ_UART_MODEM_STS_RI
 
	`BSP_BIT32
(6)

	)

110 
	#ZYNQ_UART_MODEM_STS_DSR
 
	`BSP_BIT32
(5)

	)

111 
	#ZYNQ_UART_MODEM_STS_CTS
 
	`BSP_BIT32
(4)

	)

112 
	#ZYNQ_UART_MODEM_STS_DDCD
 
	`BSP_BIT32
(3)

	)

113 
	#ZYNQ_UART_MODEM_STS_TERI
 
	`BSP_BIT32
(2)

	)

114 
	#ZYNQ_UART_MODEM_STS_DDSR
 
	`BSP_BIT32
(1)

	)

115 
	#ZYNQ_UART_MODEM_STS_DCTS
 
	`BSP_BIT32
(0)

	)

116 
uöt32_t
 
	mch™√l_°s
;

117 
	#ZYNQ_UART_CHANNEL_STS_TNFUL
 
	`BSP_BIT32
(14)

	)

118 
	#ZYNQ_UART_CHANNEL_STS_TTRIG
 
	`BSP_BIT32
(13)

	)

119 
	#ZYNQ_UART_CHANNEL_STS_FDELT
 
	`BSP_BIT32
(12)

	)

120 
	#ZYNQ_UART_CHANNEL_STS_TACTIVE
 
	`BSP_BIT32
(11)

	)

121 
	#ZYNQ_UART_CHANNEL_STS_RACTIVE
 
	`BSP_BIT32
(10)

	)

122 
	#ZYNQ_UART_CHANNEL_STS_TFUL
 
	`BSP_BIT32
(4)

	)

123 
	#ZYNQ_UART_CHANNEL_STS_TEMPTY
 
	`BSP_BIT32
(3)

	)

124 
	#ZYNQ_UART_CHANNEL_STS_RFUL
 
	`BSP_BIT32
(2)

	)

125 
	#ZYNQ_UART_CHANNEL_STS_REMPTY
 
	`BSP_BIT32
(1)

	)

126 
	#ZYNQ_UART_CHANNEL_STS_RTRIG
 
	`BSP_BIT32
(0)

	)

127 
uöt32_t
 
	mtx_rx_fifo
;

128 
	#ZYNQ_UART_TX_RX_FIFO_FIFO
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

129 
	#ZYNQ_UART_TX_RX_FIFO_FIFO_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

130 
	#ZYNQ_UART_TX_RX_FIFO_FIFO_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

131 
uöt32_t
 
	mbaud_øã_div
;

132 
	#ZYNQ_UART_BAUD_RATE_DIV_BDIV
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 7)

	)

133 
	#ZYNQ_UART_BAUD_RATE_DIV_BDIV_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 7)

	)

134 
	#ZYNQ_UART_BAUD_RATE_DIV_BDIV_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 7)

	)

135 
uöt32_t
 
	mÊow_dñay
;

136 
	#ZYNQ_UART_FLOW_DELAY_FDEL
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

137 
	#ZYNQ_UART_FLOW_DELAY_FDEL_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

138 
	#ZYNQ_UART_FLOW_DELAY_FDEL_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

139 
uöt32_t
 
	mª£rved_3c
[2];

140 
uöt32_t
 
	mtx_fifo_åg_lvl
;

141 
	#ZYNQ_UART_TX_FIFO_TRG_LVL_TTRIG
(
vÆ
Ë
	`BSP_FLD32
(vÆ, 0, 5)

	)

142 
	#ZYNQ_UART_TX_FIFO_TRG_LVL_TTRIG_GET
(
ªg
Ë
	`BSP_FLD32GET
‘eg, 0, 5)

	)

143 
	#ZYNQ_UART_TX_FIFO_TRG_LVL_TTRIG_SET
(
ªg
, 
vÆ
Ë
	`BSP_FLD32SET
‘eg, vÆ, 0, 5)

	)

144 } 
	tzynq_u¨t
;

	@src/lib/libbsp/arm/xilinx-zynq/include/zynq-uart.h

21 #i‚de‡
LIBBSP_ARM_XILINX_ZYNQ_UART_H


22 
	#LIBBSP_ARM_XILINX_ZYNQ_UART_H


	)

24 
	~<libchù/£rül.h
>

26 #ifde‡
__˝lu•lus


36 c⁄° 
c⁄sﬁe_‚s
 
zynq_u¨t_‚s
;

38 #ifde‡
__˝lu•lus


	@src/lib/libbsp/arm/xilinx-zynq/startup/bspreset.c

15 
	~<b•/boŸˇrd.h
>

17 
	$b•_ª£t
()

19 vﬁ©ûê
uöt32_t
 *
¶¸_u∆ock
 = (volatile uint32_t *) 0xf8000008;

20 vﬁ©ûê
uöt32_t
 *
pss_r°_˘æ
 = (volatile uint32_t *) 0xf8000200;

22 
åue
) {

23 *
¶¸_u∆ock
 = 0xdf0d;

24 *
pss_r°_˘æ
 = 0x1;

26 
	}
}

	@src/lib/libbsp/arm/xilinx-zynq/startup/bspsmp.c

15 
	~<πems/sc‹e/smpim∂.h
>

17 
boﬁ
 
	$_CPU_SMP_Sèπ_¥o˚ss‹
(
uöt32_t
 
˝u_ödex
)

23  
	`_Pî_CPU_Sèã_waô_f‹_n⁄_öôül_°©e
(
˝u_ödex
, 0);

24 
	}
}

	@src/lib/libbsp/arm/xilinx-zynq/startup/bspstart.c

15 
	~<b•.h
>

16 
	~<b•/boŸˇrd.h
>

17 
	~<b•/¨m-a9mpc‹e-˛ock.h
>

18 
	~<b•/úq-gíîic.h
>

19 
	~<b•/lökî-symbﬁs.h
>

21 
__©åibuã__
 ((
wók
)Ë
uöt32_t
 
	$zynq_˛ock_˝u_1x
()

23  
ZYNQ_CLOCK_CPU_1X
;

24 
	}
}

26 
	$b•_°¨t
()

28 
	`a9mpc‹e_˛ock_öôülize_óæy
();

29 
	`b•_öãºu±_öôülize
();

30 
	`πems_ˇche_cohîít_add_¨ó
(

31 
b•_noˇche_hóp_begö
,

32 (
uöçå_t
Ë
b•_noˇche_hóp_size


34 
	}
}

	@src/lib/libbsp/arm/xilinx-zynq/startup/bspstarthooks.c

15 
	#ARM_CP15_TEXT_SECTION
 
BSP_START_TEXT_SECTION


	)

17 
	~<b•.h
>

18 
	~<b•/°¨t.h
>

19 
	~<b•/¨m-˝15-°¨t.h
>

20 
	~<b•/¨m-a9mpc‹e-°¨t.h
>

22 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_0
()

24 
	`¨m_a9mpc‹e_°¨t_hook_0
();

25 
	}
}

27 
BSP_START_TEXT_SECTION
 
	$b•_°¨t_hook_1
()

29 
	`¨m_a9mpc‹e_°¨t_hook_1
();

30 
	`b•_°¨t_c›y_£˘i⁄s
();

31 
	`zynq_£tup_mmu_™d_ˇche
();

33 #i‡!
	`deföed
(
RTEMS_SMP
) \

34 && (
	`deföed
(
BSP_DATA_CACHE_ENABLED
) \

35 || 
	`deföed
(
BSP_INSTRUCTION_CACHE_ENABLED
))

37 
	`πems_ˇche_íabÀ_d©a
();

40 
	`b•_°¨t_˛ór_bss
();

41 
	}
}

	@src/lib/libbsp/arm/xilinx-zynq/startup/bspstartmmu.c

15 
	#ARM_CP15_TEXT_SECTION
 
BSP_START_TEXT_SECTION


	)

17 
	~<b•.h
>

18 
	~<b•/°¨t.h
>

19 
	~<b•/¨m-˝15-°¨t.h
>

20 
	~<b•/¨m-a9mpc‹e-°¨t.h
>

22 
BSP_START_DATA_SECTION
 c⁄° 
¨m_˝15_°¨t_£˘i⁄_c⁄fig


23 
	gzynq_mmu_c⁄fig_èbÀ
[] = {

24 
ARMV7_CP15_START_DEFAULT_SECTIONS
,

26 .
begö
 = 0xe0000000U,

27 .
	gíd
 = 0xe0200000U,

28 .
	gÊags
 = 
ARMV7_MMU_DEVICE


30 .
	gbegö
 = 0xf8000000U,

31 .
	gíd
 = 0xf9000000U,

32 .
	gÊags
 = 
ARMV7_MMU_DEVICE


39 
BSP_START_TEXT_SECTION
 
	$zynq_£tup_mmu_™d_ˇche
(Ë
	`__©åibuã__
 ((
wók
));

41 
BSP_START_TEXT_SECTION
 
	$zynq_£tup_mmu_™d_ˇche
()

43 
uöt32_t
 
˘æ
 = 
	`¨m_˝15_°¨t_£tup_mmu_™d_ˇche
(

44 
ARM_CP15_CTRL_A
,

45 
ARM_CP15_CTRL_AFE
 | 
ARM_CP15_CTRL_Z


48 
	`¨m_˝15_°¨t_£tup_å™¶©i⁄_èbÀ_™d_íabÀ_mmu_™d_ˇche
(

49 
˘æ
,

50 (
uöt32_t
 *Ë
b•_å™¶©i⁄_èbÀ_ba£
,

51 
ARM_MMU_DEFAULT_CLIENT_DOMAIN
,

52 &
zynq_mmu_c⁄fig_èbÀ
[0],

53 
	`RTEMS_ARRAY_SIZE
(
zynq_mmu_c⁄fig_èbÀ
)

55 
	}
}

	@src/lib/libbsp/shared/bootcard.c

49 
	~<b•/boŸˇrd.h
>

50 
	~<i2c.h
>

51 
	~<πems.h
>

57 c⁄° *
	gb•_boŸ_cmdlöe
;

65 
	$boŸ_ˇrd
(

66 c⁄° *
cmdlöe


69 
πems_öãºu±_Àvñ
 
b•_i§_Àvñ
;

74 (Ë
b•_i§_Àvñ
;

75 
	`πems_öãºu±_loˇl_dißbÀ
–
b•_i§_Àvñ
 );

77 
b•_boŸ_cmdlöe
 = 
cmdlöe
;

82 
	`b•_°¨t
();

87 
	`b•_w‹k_¨ó_öôülize
();

92 
	`πems_öôülize_d©a_°ru˘uªs
();

98 
	`b•_libc_öô
();

108 
	`b•_¥ëaskög_hook
();

117 #ifde‡
RTEMS_DEBUG


118 
	`πems_debug_íabÀ
–
RTEMS_DEBUG_ALL_MASK
 );

125 
	`πems_öôülize_bef‹e_drivîs
();

135 
	`b•_¥edrivî_hook
();

140 
	`πems_öôülize_devi˚_drivîs
();

146 
	`b•_po°drivî_hook
();

152 
	`πems_öôülize_°¨t_mu…ôaskög
();

159 
	}
}

	@src/lib/libbsp/shared/bspclean.c

10 
	~<b•.h
>

11 
	~<b•/boŸˇrd.h
>

12 
	~<πems/b•Io.h
>

14 
	$b•_Áèl_exãnsi⁄
(

15 
πems_Áèl_sour˚
 
sour˚
,

16 
boﬁ
 
is_öã∫Æ
,

17 
πems_Áèl_code
 
code


20 #i‡(
BSP_PRESS_KEY_FOR_RESET
)

21 
	`¥ötk
( "\nEXECUTIVE SHUTDOWN! Any keyÅoÑeboot..." );

26  
	`gëch¨k
() == -1 )

29 
	`¥ötk
("\n");

32 #i‡(
BSP_PRINT_EXCEPTION_CONTEXT
)

33 i‡–
sour˚
 =
RTEMS_FATAL_SOURCE_EXCEPTION
 ) {

34 
	`πems_ex˚±i⁄_‰ame_¥öt
–(c⁄° 
πems_ex˚±i⁄_‰ame
 *Ë
code
 );

42 #i‡(
BSP_PRESS_KEY_FOR_RESET
Ë|| (
BSP_RESET_BOARD_AT_EXIT
)

43 
	`b•_ª£t
();

45 
	}
}

	@src/lib/libbsp/shared/bspdriverlevelhook.c

12 
	~<b•/boŸˇrd.h
>

14 
	$b•_drivî_Àvñ_hook
–
Àvñ
 )

16 
	}
}

	@src/lib/libbsp/shared/bspgetworkarea.c

16 
	~<b•.h
>

17 
	~<b•/boŸˇrd.h
>

18 #ifde‡
BSP_INTERRUPT_STACK_AT_WORK_AREA_BEGIN


19 
	~<πems/c⁄fig.h
>

22 #i‡
deföed
(
HAS_UBOOT
Ë&& !deföed(
BSP_DISABLE_UBOOT_WORK_AREA_CONFIG
)

23 
	#USE_UBOOT


	)

29 
W‹kAªaBa£
[];

34 #ifde‡
USE_UBOOT


35 
	~<b•/u-boŸ.h
>

37 
RamBa£
[];

38 
RamSize
[];

41 
	$b•_w‹k_¨ó_öôülize
()

43 
uöçå_t
 
w‹k_ba£
 = (uöçå_tË
W‹kAªaBa£
;

44 
uöçå_t
 
øm_íd
;

46 #ifde‡
USE_UBOOT


47 
øm_íd
 = (
uöçå_t
Ë
b•_uboŸ_bﬂrd_öfo
.
bi_mem°¨t
 +

48 
b•_uboŸ_bﬂrd_öfo
.
bi_memsize
;

50 
øm_íd
 = (
uöçå_t
)
RamBa£
 + (uöçå_t)
RamSize
;

53 #ifde‡
BSP_INTERRUPT_STACK_AT_WORK_AREA_BEGIN


54 
w‹k_ba£
 +
	`πems_c⁄figuøti⁄_gë_öãºu±_°ack_size
();

57 
	`b•_w‹k_¨ó_öôülize_deÁu…
–(*Ë
w‹k_ba£
, 
øm_íd
 - work_base );

58 
	}
}

	@src/lib/libbsp/shared/bsplibc.c

6 
	~<πems/libio.h
>

7 
	~<πems/libcsuµ‹t.h
>

9 
	~<b•/boŸˇrd.h
>

11 
	$b•_libc_öô
()

18 (*
πems_libio_öô_hñ≥r
)();

23 
	`libc_öô
();

24 
	}
}

	@src/lib/libbsp/shared/bsppost.c

15 
	~<πems/libio.h
>

17 
	~<b•/boŸˇrd.h
>

19 
	$b•_po°drivî_hook
()

21 (*
πems_libio_po°_drivî_hñ≥r
)();

22 
	}
}

	@src/lib/libbsp/shared/bsppredriverhook.c

12 
	~<b•/boŸˇrd.h
>

14 
	$b•_¥edrivî_hook
( )

16 
	}
}

	@src/lib/libbsp/shared/bsppretaskinghook.c

12 
	~<b•/boŸˇrd.h
>

14 
	$b•_¥ëaskög_hook
()

17 
	}
}

	@src/lib/libbsp/shared/bspreset.c

12 
	~<πems.h
>

13 
	~<b•/boŸˇrd.h
>

15 
	$b•_ª£t
( )

17 
	}
}

	@src/lib/libbsp/shared/bspreset_loop.c

10 
	~<πems.h
>

11 
	~<b•/boŸˇrd.h
>

13 
	$b•_ª£t
( )

17 
	}
}

	@src/lib/libbsp/shared/bspsmp.c

12 
	~<πems/sc‹e/˝u.h
>

14 
uöt32_t
 
	$_CPU_SMP_Inôülize
( )

18 
	}
}

20 
boﬁ
 
	$_CPU_SMP_Sèπ_¥o˚ss‹
–
uöt32_t
 
˝u_ödex
 )

22  
åue
;

23 
	}
}

25 
	$_CPU_SMP_FöÆize_öôüliz©i⁄
–
uöt32_t
 
˝u_cou¡
 )

27 
	}
}

29 
	$_CPU_SMP_Pª∑ª_°¨t_mu…ôaskög
( )

31 
	}
}

33 
	$_CPU_SMP_Síd_öãºu±
–
uöt32_t
 
èrgë_¥o˚ss‹_ödex
 )

35 
	}
}

	@src/lib/libbsp/shared/bspsmpgetcurrentprocessor.c

10 
	~<πems/sc‹e/˝u.h
>

12 
uöt32_t
 
	$_CPU_SMP_Gë_cuºít_¥o˚ss‹
( )

15 
	}
}

	@src/lib/libbsp/shared/bspstart.c

10 
	~<b•.h
>

11 
	~<b•/boŸˇrd.h
>

18 
	$b•_°¨t
( )

20 
	}
}

	@src/lib/libbsp/shared/clock_driver_simidle.c

8 
	~<πems.h
>

9 
	~<πems/sc‹e/≥r˝u.h
>

10 
	~<πems/sc‹e/thªaddi•©ch.h
>

12 
	#CLOCK_VECTOR
 0

	)

14 
	#Clock_drivî_suµ‹t_©_tick
()

	)

16 
	#Clock_drivî_suµ‹t_ö°Æl_i§
–
_√w
, 
_ﬁd
 ) \

17 dÿ{ 
_ﬁd
 = 0; } 0)

	)

19 vﬁ©ûê
boﬁ
 
	g˛ock_drivî_íabÀd
;

21 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

23 
˛ock_drivî_íabÀd
 = 
åue
; \

24 } 0)

	)

26 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

28 
˛ock_drivî_íabÀd
 = 
Ál£
; \

29 } 0)

	)

31 
	#CLOCK_DRIVER_USE_DUMMY_TIMECOUNTER


	)

33 
	~"˛ockdrv_shñl.h
"

40 #i‚de‡
BSP_CLOCK_DRIVER_DELAY


41 
	#BSP_CLOCK_DRIVER_DELAY
()

	)

49 
Thªad
 
	$˛ock_drivî_sim_idÀ_body
(

50 
uöçå_t
 
ign‹ed


54 i‡–
˛ock_drivî_íabÀd
 ) {

55 
	`_Thªad_DißbÀ_di•©ch
();

56 
_ISR_Ne°_Àvñ
++;

57 
	`πems_˛ock_tick
();

58 
_ISR_Ne°_Àvñ
--;

59 
	`_Thªad_E«bÀ_di•©ch
();

60 
	`BSP_CLOCK_DRIVER_DELAY
();

64 
	}
}

	@src/lib/libbsp/shared/clockdrv_shell.h

18 
	~<°dlib.h
>

20 
	~<b•.h
>

21 
	~<πems/˛ockdrv.h
>

22 
	~<πems/sc‹e/≥r˝u.h
>

24 #ifde‡
Clock_drivî_«no£c⁄ds_sö˚_œ°_tick


36 #i‡
CLOCK_DRIVER_USE_FAST_IDLE
 && 
CLOCK_DRIVER_ISRS_PER_TICK


43 #i‚de‡
Clock_drivî_suµ‹t_föd_timî


44 
	#Clock_drivî_suµ‹t_föd_timî
()

	)

50 #i‚de‡
Clock_drivî_suµ‹t_©_tick


51 
	#Clock_drivî_suµ‹t_©_tick
()

	)

58 #i‚de‡
Clock_drivî_timecou¡î_tick


59 #ifde‡
CLOCK_DRIVER_USE_DUMMY_TIMECOUNTER


60 
	#Clock_drivî_timecou¡î_tick
(Ë
	`πems_˛ock_tick
()

	)

62 
	#Clock_drivî_timecou¡î_tick
(Ë
	`πems_timecou¡î_tick
()

	)

69 #i‡
CLOCK_DRIVER_ISRS_PER_TICK


70 vﬁ©ûê
uöt32_t
 
	gClock_drivî_i§s
;

76 vﬁ©ûê
uöt32_t
 
	gClock_drivî_ticks
;

78 
Clock_exô
( );

87 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
) || \

88 (
	gCPU_SIMPLE_VECTORED_INTERRUPTS
 !
TRUE
)

89 
Clock_i§
(*
¨g
);

90 
	$Clock_i§
(*
¨g
)

93 
πems_i§
 
	`Clock_i§
(
πems_ve˘‹_numbî
 
ve˘‹
);

94 
πems_i§
 
	$Clock_i§
(

95 
πems_ve˘‹_numbî
 
ve˘‹


102 
Clock_drivî_ticks
 += 1;

104 #i‡
CLOCK_DRIVER_USE_FAST_IDLE


106 
timecou¡î
 *
tc
 = 
_Timecou¡î
;

107 
uöt64_t
 
us_≥r_tick
 = 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
();

108 
uöt32_t
 
öãrvÆ
 = (uint32_t)

109 ((
tc
->
tc_‰equícy
 * 
us_≥r_tick
) / 1000000);

111 
	`Clock_drivî_timecou¡î_tick
();

114 
_Thªad_Heú
 =
_Thªad_Executög


115 && 
_Thªad_Executög
->
Sèπ
.
íåy_poöt


116 =(
Thªad_E¡ry
Ë
	`πems_c⁄figuøti⁄_gë_idÀ_èsk
()

118 
ISR_lock_C⁄ãxt
 
lock_c⁄ãxt
;

120 
	`_Timecou¡î_Acquúe
(&
lock_c⁄ãxt
);

121 
	`_Timecou¡î_Tick_sim∂e
(

122 
öãrvÆ
,

123 (*
tc
->
tc_gë_timecou¡
)(tc),

124 &
lock_c⁄ãxt


128 
	`Clock_drivî_suµ‹t_©_tick
();

136 
	`Clock_drivî_suµ‹t_©_tick
();

138 #i‡
CLOCK_DRIVER_ISRS_PER_TICK


142 i‡–!
Clock_drivî_i§s
 ) {

143 
	`Clock_drivî_timecou¡î_tick
();

145 
Clock_drivî_i§s
 = 
CLOCK_DRIVER_ISRS_PER_TICK
;

147 
Clock_drivî_i§s
--;

152 
	`Clock_drivî_timecou¡î_tick
();

155 
	}
}

163 
	$Clock_exô
( )

165 
	`Clock_drivî_suµ‹t_shutdown_h¨dw¨e
();

168 
	}
}

181 
πems_devi˚_drivî
 
	$Clock_öôülize
(

182 
πems_devi˚_maj‹_numbî
 
maj‹
,

183 
πems_devi˚_mö‹_numbî
 
mö‹
,

184 *
∑rgp


187 
πems_i§_íåy
 
Old_tickî
;

189 
Clock_drivî_ticks
 = 0;

194 
	`Clock_drivî_suµ‹t_föd_timî
();

199 (Ë
Old_tickî
;

200 
	`Clock_drivî_suµ‹t_ö°Æl_i§
–
Clock_i§
, 
Old_tickî
 );

205 
	`Clock_drivî_suµ‹t_öôülize_h¨dw¨e
();

207 
	`©exô
–
Clock_exô
 );

212 #i‡
CLOCK_DRIVER_ISRS_PER_TICK


213 
Clock_drivî_i§s
 = 
CLOCK_DRIVER_ISRS_PER_TICK_VALUE
;

216  
RTEMS_SUCCESSFUL
;

217 
	}
}

	@src/lib/libbsp/shared/console-output-char.c

15 
	~<libchù/£rül.h
>

17 
	$ouçut_ch¨
(
c
)

19 
mö‹
 = (Ë
C⁄sﬁe_P‹t_Mö‹
;

20 c⁄° 
c⁄sﬁe_tbl
 *
˘
 = 
C⁄sﬁe_P‹t_Tbl
 !
NULL
 ?

21 
C⁄sﬁe_P‹t_Tbl
[
mö‹
] : &
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[minor];

22 c⁄° 
c⁄sﬁe_‚s
 *
cf
 = 
˘
->
pDevi˚Fns
;

24 i‡(
c
 == '\n') {

25 (*
cf
->
devi˚WrôePﬁÀd
)(
mö‹
, '\r');

28 (*
cf
->
devi˚WrôePﬁÀd
)(
mö‹
, 
c
);

29 
	}
}

31 
	$ouçut_ch¨_öô
(
c
)

33 i‡(
C⁄sﬁe_P‹t_Tbl
 =
NULL
) {

34 
mö‹
 = (Ë
C⁄sﬁe_P‹t_Mö‹
;

35 c⁄° 
c⁄sﬁe_‚s
 *
cf
 = 
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[
mö‹
].
pDevi˚Fns
;

37 (*
cf
->
devi˚Inôülize
)(
mö‹
);

40 
BSP_ouçut_ch¨
 = 
ouçut_ch¨
;

41 
	`ouçut_ch¨
(
c
);

42 
	}
}

44 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
ouçut_ch¨_öô
;

46 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
NULL
;

	@src/lib/libbsp/shared/console-polled.c

16 
	~<b•.h
>

17 
	~<πems/libio.h
>

18 
	~<°dlib.h
>

19 
	~<as£π.h
>

21 
	~<b•/c⁄sﬁe-pﬁÀd.h
>

26 
ssize_t
 
c⁄sﬁe_wrôe_suµ‹t
(, c⁄° *, 
size_t
);

32 
ssize_t
 
	$c⁄sﬁe_wrôe_suµ‹t
 (

33 
mö‹
,

34 c⁄° *
buÁrg
,

35 
size_t
 
Àn


38 
nwrôe
 = 0;

39 c⁄° *
buf
 = 
buÁrg
;

41 
nwrôe
 < 
Àn
) {

42 
	`c⁄sﬁe_outbyã_pﬁÀd
–
mö‹
, *
buf
++ );

43 
nwrôe
++;

45  
nwrôe
;

46 
	}
}

53 
πems_devi˚_drivî
 
	$c⁄sﬁe_öôülize
(

54 
πems_devi˚_maj‹_numbî
 
maj‹
,

55 
πems_devi˚_mö‹_numbî
 
mö‹
,

56 *
¨g


59 
πems_°©us_code
 
°©us
;

64 
	`πems_ãrmios_öôülize
();

69 
	`c⁄sﬁe_öôülize_h¨dw¨e
();

74 
°©us
 = 
	`πems_io_ªgi°î_«me
–"/dev/c⁄sﬁe", 
maj‹
, 0 );

75 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

76 
	`πems_Áèl_îr‹_occuºed
(
°©us
);

78  
RTEMS_SUCCESSFUL
;

79 
	}
}

81 
πems_devi˚_drivî
 
	$c⁄sﬁe_›í
(

82 
πems_devi˚_maj‹_numbî
 
maj‹
,

83 
πems_devi˚_mö‹_numbî
 
mö‹
,

84 * 
¨g


87 c⁄° 
πems_ãrmios_ˇŒbacks
 
pﬁlCÆlbacks
 = {

88 
NULL
,

89 
NULL
,

90 
c⁄sﬁe_öbyã_n⁄blockög
,

91 
c⁄sﬁe_wrôe_suµ‹t
,

92 
NULL
,

93 
NULL
,

94 
NULL
,

98 
	`as£π
–
mö‹
 <= 1 );

99 i‡–
mö‹
 > 1 )

100  
RTEMS_INVALID_NUMBER
;

102 
	`πems_ãrmios_›í
–
maj‹
, 
mö‹
, 
¨g
, &
pﬁlCÆlbacks
 );

104  
RTEMS_SUCCESSFUL
;

105 
	}
}

107 
πems_devi˚_drivî
 
	$c⁄sﬁe_˛o£
(

108 
πems_devi˚_maj‹_numbî
 
maj‹
,

109 
πems_devi˚_mö‹_numbî
 
mö‹
,

110 * 
¨g


113  
	`πems_ãrmios_˛o£
–
¨g
 );

114 
	}
}

116 
πems_devi˚_drivî
 
	$c⁄sﬁe_ªad
(

117 
πems_devi˚_maj‹_numbî
 
maj‹
,

118 
πems_devi˚_mö‹_numbî
 
mö‹
,

119 * 
¨g


122  
	`πems_ãrmios_ªad
–
¨g
 );

123 
	}
}

125 
πems_devi˚_drivî
 
	$c⁄sﬁe_wrôe
(

126 
πems_devi˚_maj‹_numbî
 
maj‹
,

127 
πems_devi˚_mö‹_numbî
 
mö‹
,

128 * 
¨g


131  
	`πems_ãrmios_wrôe
–
¨g
 );

132 
	}
}

134 
πems_devi˚_drivî
 
	$c⁄sﬁe_c⁄åﬁ
(

135 
πems_devi˚_maj‹_numbî
 
maj‹
,

136 
πems_devi˚_mö‹_numbî
 
mö‹
,

137 * 
¨g


140  
	`πems_ãrmios_io˘l
–
¨g
 );

141 
	}
}

	@src/lib/libbsp/shared/console-termios-init.c

15 
	~<b•/c⁄sﬁe-ãrmios.h
>

16 
	~<b•/Áèl.h
>

18 
	~<πems/c⁄sﬁe.h
>

20 
RTEMS_INTERRUPT_LOCK_DEFINE
–, 
c⁄sﬁe_lock
, "console" )

22 
πems_devi˚_maj‹_numbî
 
	gc⁄sﬁe_maj‹
 = 
UINT32_MAX
;

24 
πems_devi˚_mö‹_numbî
 
	gc⁄sﬁe_mö‹
;

26 
πems_°©us_code
 
	$c⁄sﬁe_devi˚_ö°Æl
(

27 c⁄° *
devi˚_fûe
,

28 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 *
h™dÀr
,

29 c⁄° 
πems_ãrmios_devi˚_Êow
 *
Êow
,

30 
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt


33 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

34 
πems_devi˚_mö‹_numbî
 
mö‹
;

36 
	`πems_öãºu±_lock_acquúe
–&
c⁄sﬁe_lock
, &
lock_c⁄ãxt
 );

37 
mö‹
 = 
c⁄sﬁe_mö‹
;

38 ++
c⁄sﬁe_mö‹
;

39 
	`πems_öãºu±_lock_ªÀa£
–&
c⁄sﬁe_lock
, &
lock_c⁄ãxt
 );

41  
	`πems_ãrmios_devi˚_ö°Æl
(

42 
devi˚_fûe
,

43 
c⁄sﬁe_maj‹
,

44 
mö‹
,

45 
h™dÀr
,

46 
Êow
,

47 
c⁄ãxt


49 
	}
}

51 
boﬁ
 
	$c⁄sﬁe_devi˚_¥obe_deÁu…
(
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
)

53 (Ë
c⁄ãxt
;

55  
åue
;

56 
	}
}

58 
πems_devi˚_drivî
 
	$c⁄sﬁe_öôülize
(

59 
πems_devi˚_maj‹_numbî
 
maj‹
,

60 
πems_devi˚_mö‹_numbî
 
mö‹
,

61 *
¨g


64 
boﬁ
 
c⁄sﬁe_devi˚_d⁄e
 = 
Ál£
;

66 
	`πems_ãrmios_öôülize
();

68  
mö‹
 = 0; mö‹ < 
c⁄sﬁe_devi˚_cou¡
; ++minor ) {

69 c⁄° 
c⁄sﬁe_devi˚
 *
˘x
 = &
c⁄sﬁe_devi˚_èbÀ
[ 
mö‹
 ];

70 
πems_°©us_code
 
sc
;

72 i‡––*
˘x
->
¥obe
 )–˘x->
c⁄ãxt
 ) ) {

73 
sc
 = 
	`πems_ãrmios_devi˚_ö°Æl
(

74 
˘x
->
devi˚_fûe
,

75 
maj‹
,

76 
mö‹
,

77 
˘x
->
h™dÀr
,

78 
˘x
->
Êow
,

79 
˘x
->
c⁄ãxt


81 i‡–
sc
 !
RTEMS_SUCCESSFUL
 ) {

82 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_INSTALL_0
 );

85 i‡–!
c⁄sﬁe_devi˚_d⁄e
 ) {

86 
c⁄sﬁe_devi˚_d⁄e
 = 
åue
;

88 
sc
 = 
	`πems_io_ªgi°î_«me
–
CONSOLE_DEVICE_NAME
, 
maj‹
, 
mö‹
 );

89 i‡–
sc
 !
RTEMS_SUCCESSFUL
 ) {

90 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_INSTALL_1
 );

96 
c⁄sﬁe_maj‹
 = 
maj‹
;

97 
c⁄sﬁe_mö‹
 = 
mö‹
;

99  
RTEMS_SUCCESSFUL
;

100 
	}
}

	@src/lib/libbsp/shared/console-termios.c

15 
	~<πems/c⁄sﬁe.h
>

16 
	~<πems/ãrmio°y≥s.h
>

18 
πems_devi˚_drivî
 
	$c⁄sﬁe_›í
(

19 
πems_devi˚_maj‹_numbî
 
maj‹
,

20 
πems_devi˚_mö‹_numbî
 
mö‹
,

21 *
¨g


24  
	`πems_ãrmios_devi˚_›í
–
maj‹
, 
mö‹
, 
¨g
 );

25 
	}
}

27 
πems_devi˚_drivî
 
	$c⁄sﬁe_˛o£
(

28 
πems_devi˚_maj‹_numbî
 
maj‹
,

29 
πems_devi˚_mö‹_numbî
 
mö‹
,

30 *
¨g


33 (Ë
maj‹
;

34 (Ë
mö‹
;

36  
	`πems_ãrmios_devi˚_˛o£
–
¨g
 );

37 
	}
}

39 
πems_devi˚_drivî
 
	$c⁄sﬁe_ªad
(

40 
πems_devi˚_maj‹_numbî
 
maj‹
,

41 
πems_devi˚_mö‹_numbî
 
mö‹
,

42 *
¨g


45 (Ë
maj‹
;

46 (Ë
mö‹
;

48  
	`πems_ãrmios_ªad
–
¨g
 );

49 
	}
}

51 
πems_devi˚_drivî
 
	$c⁄sﬁe_wrôe
(

52 
πems_devi˚_maj‹_numbî
 
maj‹
,

53 
πems_devi˚_mö‹_numbî
 
mö‹
,

54 *
¨g


57 (Ë
maj‹
;

58 (Ë
mö‹
;

60  
	`πems_ãrmios_wrôe
–
¨g
 );

61 
	}
}

63 
πems_devi˚_drivî
 
	$c⁄sﬁe_c⁄åﬁ
(

64 
πems_devi˚_maj‹_numbî
 
maj‹
,

65 
πems_devi˚_mö‹_numbî
 
mö‹
,

66 *
¨g


69 (Ë
maj‹
;

70 (Ë
mö‹
;

72  
	`πems_ãrmios_io˘l
–
¨g
 );

73 
	}
}

	@src/lib/libbsp/shared/console.c

18 
	~<b•.h
>

19 
	~<b•/Áèl.h
>

20 
	~<πems/libio.h
>

21 
	~<πems/c⁄sﬁe.h
>

22 
	~<°dlib.h
>

23 
	~<as£π.h
>

24 
	~<ãrmios.h
>

26 
	~<πems/ãrmio°y≥s.h
>

27 
	~<libchù/£rül.h
>

28 
	~"c⁄sﬁe_¥iv©e.h
"

30 
	gC⁄sﬁe_P‹t_Cou¡
 = 0;

31 
c⁄sﬁe_tbl
 **
	gC⁄sﬁe_P‹t_Tbl
 = 
NULL
;

32 
c⁄sﬁe_d©a
 *
	gC⁄sﬁe_P‹t_D©a
 = 
NULL
;

33 
πems_devi˚_mö‹_numbî
 
	gC⁄sﬁe_P‹t_Mö‹
 = 0;

34 
boﬁ
 
	gc⁄sﬁe_öôülized
 = 
Ál£
;

42 
	$c⁄sﬁe_öôülize_poöãrs
()

44 
i
;

46 i‡–
C⁄sﬁe_P‹t_Tbl
 )

49 
C⁄sﬁe_P‹t_Cou¡
 = 
C⁄sﬁe_C⁄figuøti⁄_Cou¡
;

50 
C⁄sﬁe_P‹t_Tbl
 = 
	`mÆloc
–
C⁄sﬁe_P‹t_Cou¡
 * –
c⁄sﬁe_tbl
 * ) );

51 i‡(
C⁄sﬁe_P‹t_Tbl
 =
NULL
)

52 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_NO_MEMORY_0
 );

54 
i
=0 ; i < 
C⁄sﬁe_P‹t_Cou¡
 ; i++)

55 
C⁄sﬁe_P‹t_Tbl
[
i
] = &
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[i];

56 
	}
}

64 
	$c⁄sﬁe_ªgi°î_devi˚s
(

65 
c⁄sﬁe_tbl
 *
√w_p‹ts
,

66 
size_t
 
numbî_of_p‹ts


69 
ﬁd_numbî_of_p‹ts
;

70 
i
;

72 
	`c⁄sﬁe_öôülize_poöãrs
();

78 i‡–
c⁄sﬁe_öôülized
 ) {

79 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_MULTI_INIT
 );

85 
ﬁd_numbî_of_p‹ts
 = 
C⁄sﬁe_P‹t_Cou¡
;

86 
C⁄sﬁe_P‹t_Cou¡
 +
numbî_of_p‹ts
;

87 
C⁄sﬁe_P‹t_Tbl
 = 
	`ªÆloc
(

88 
C⁄sﬁe_P‹t_Tbl
,

89 
C⁄sﬁe_P‹t_Cou¡
 * –
c⁄sﬁe_tbl
 * )

91 i‡–
C⁄sﬁe_P‹t_Tbl
 =
NULL
 ) {

92 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_NO_MEMORY_1
 );

95 
C⁄sﬁe_P‹t_D©a
 = 
	`ˇŒoc
–
C⁄sﬁe_P‹t_Cou¡
, –
c⁄sﬁe_d©a
 ) );

96 i‡–
C⁄sﬁe_P‹t_D©a
 =
NULL
 ) {

97 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_NO_MEMORY_2
 );

104 
i
=0 ; i < 
numbî_of_p‹ts
 ; i++) {

105 
C⁄sﬁe_P‹t_Tbl
[
ﬁd_numbî_of_p‹ts
 + 
i
] = &
√w_p‹ts
[i];

107 
	}
}

114 
πems_devi˚_drivî
 
	$c⁄sﬁe_›í
(

115 
πems_devi˚_maj‹_numbî
 
maj‹
,

116 
πems_devi˚_mö‹_numbî
 
mö‹
,

117 * 
¨g


120 
πems_°©us_code
 
°©us
;

121 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs
 = 
¨g
;

122 
πems_libio_io˘l_¨gs_t
 
Io˘lArgs
;

123 
ãrmios
 
Tîmios
;

124 
πems_ãrmios_ˇŒbacks
 
CÆlbacks
;

125 
c⁄sﬁe_tbl
 *
˝å
;

126 
πems_ãrmios_ây
 *
cuºít_ây
;

131 i‡–
mö‹
 > 
C⁄sﬁe_P‹t_Cou¡
 ) {

132  
RTEMS_INVALID_NUMBER
;

139 
˝å
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

140 
CÆlbacks
.
fú°O≥n
 = 
˝å
->
pDevi˚Fns
->
devi˚Fú°O≥n
;

141 
CÆlbacks
.
œ°Clo£
 = 
˝å
->
pDevi˚Fns
->
devi˚La°Clo£
;

142 
CÆlbacks
.
pﬁlRód
 = 
˝å
->
pDevi˚Fns
->
devi˚Ród
;

143 
CÆlbacks
.
wrôe
 = 
˝å
->
pDevi˚Fns
->
devi˚Wrôe
;

144 
CÆlbacks
.
£tAâribuãs
 = 
˝å
->
pDevi˚Fns
->
devi˚SëAâribuãs
;

145 i‡(
˝å
->
pDevi˚Flow
 !
NULL
) {

146 
CÆlbacks
.
°›RemŸeTx
 = 
˝å
->
pDevi˚Flow
->
devi˚St›RemŸeTx
;

147 
CÆlbacks
.
°¨tRemŸeTx
 = 
˝å
->
pDevi˚Flow
->
devi˚SèπRemŸeTx
;

149 
CÆlbacks
.
°›RemŸeTx
 = 
NULL
;

150 
CÆlbacks
.
°¨tRemŸeTx
 = 
NULL
;

152 
CÆlbacks
.
ouçutU£sI¡îru±s
 = 
˝å
->
pDevi˚Fns
->
devi˚OuçutU£sI¡îru±s
;

159 
°©us
 = 
	`πems_ãrmios_›í
–
maj‹
, 
mö‹
, 
¨g
, &
CÆlbacks
 );

160 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
 = 
¨gs
->
i›
->
d©a1
;

163 
cuºít_ây
 = 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
;

165 i‡–(
cuºít_ây
->
ªfcou¡
 == 1) ) {

170 #i‡
	`deföed
(
BSP_DEFAULT_BAUD_RATE
)

171 
	`πems_ãrmios_£t_öôül_baud
–
cuºít_ây
, 
BSP_DEFAULT_BAUD_RATE
 );

177 i‡–
mö‹
 !
C⁄sﬁe_P‹t_Mö‹
 ) {

181 
Io˘lArgs
.
i›
 = 
¨gs
->iop;

182 
Io˘lArgs
.
comm™d
 = 
RTEMS_IO_GET_ATTRIBUTES
;

183 
Io˘lArgs
.
buf„r
 = &
Tîmios
;

184 
	`πems_ãrmios_io˘l
–&
Io˘lArgs
 );

186 
Tîmios
.
c_lÊag
 = 
ICANON
;

187 
Io˘lArgs
.
comm™d
 = 
RTEMS_IO_SET_ATTRIBUTES
;

188 
	`πems_ãrmios_io˘l
–&
Io˘lArgs
 );

192 i‡–(
¨gs
->
i›
->
Êags
&
LIBIO_FLAGS_READ
) &&

193 
˝å
->
pDevi˚Flow
 &&

194 
˝å
->
pDevi˚Flow
->
devi˚SèπRemŸeTx
) {

195 
˝å
->
pDevi˚Flow
->
	`devi˚SèπRemŸeTx
(
mö‹
);

198  
°©us
;

199 
	}
}

206 
πems_devi˚_drivî
 
	$c⁄sﬁe_˛o£
(

207 
πems_devi˚_maj‹_numbî
 
maj‹
,

208 
πems_devi˚_mö‹_numbî
 
mö‹
,

209 * 
¨g


212 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs
 = 
¨g
;

213 
πems_ãrmios_ây
 *
cuºít_ây
;

214 
c⁄sﬁe_tbl
 *
˝å
;

216 
˝å
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

219 
cuºít_ây
 = 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
;

224 i‡–(
cuºít_ây
->
ªfcou¡
 == 1) ) {

225 i‡–(
¨gs
->
i›
->
Êags
&
LIBIO_FLAGS_READ
) &&

226 
˝å
->
pDevi˚Flow
 &&

227 
˝å
->
pDevi˚Flow
->
devi˚St›RemŸeTx
) {

228 
˝å
->
pDevi˚Flow
->
	`devi˚St›RemŸeTx
(
mö‹
);

232  
	`πems_ãrmios_˛o£
 (
¨g
);

233 
	}
}

240 
πems_devi˚_drivî
 
	$c⁄sﬁe_öôülize
(

241 
πems_devi˚_maj‹_numbî
 
maj‹
,

242 
πems_devi˚_mö‹_numbî
 
mö‹_¨g
,

243 *
¨g


246 
πems_°©us_code
 
°©us
;

247 
πems_devi˚_mö‹_numbî
 
mö‹
;

248 
c⁄sﬁe_tbl
 *
p‹t
;

254 i‡–! 
C⁄sﬁe_P‹t_Tbl
 ) {

255 
	`c⁄sﬁe_öôülize_poöãrs
();

256 
C⁄sﬁe_P‹t_D©a
 = 
	`ˇŒoc
–
C⁄sﬁe_P‹t_Cou¡
, –
c⁄sﬁe_d©a
 ) );

257 i‡–
C⁄sﬁe_P‹t_D©a
 =
NULL
 ) {

258 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_NO_MEMORY_3
 );

266 
c⁄sﬁe_öôülized
 = 
åue
;

273 
	`πems_ãrmios_öôülize
();

274 
	`b•_c⁄sﬁe_£À˘
();

280 
mö‹
=0 ; mö‹ < 
C⁄sﬁe_P‹t_Cou¡
 ; minor++) {

285 
p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

287 i‡–(!
p‹t
->
devi˚Probe
 ||Ö‹t->
	`devi˚Probe
(
mö‹
)) &&

288 
p‹t
->
pDevi˚Fns
->
	`devi˚Probe
(
mö‹
)) {

290 i‡(
p‹t
->
sDevi˚Name
 !
NULL
) {

291 
°©us
 = 
	`πems_io_ªgi°î_«me
–
p‹t
->
sDevi˚Name
, 
maj‹
, 
mö‹
 );

292 i‡(
°©us
 !
RTEMS_SUCCESSFUL
) {

293 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_REGISTER_DEV_0
 );

297 i‡(
mö‹
 =
C⁄sﬁe_P‹t_Mö‹
) {

298 
°©us
 = 
	`πems_io_ªgi°î_«me
–
CONSOLE_DEVICE_NAME
, 
maj‹
, 
mö‹
 );

299 i‡(
°©us
 !
RTEMS_SUCCESSFUL
) {

300 
	`b•_Áèl
–
BSP_FATAL_CONSOLE_REGISTER_DEV_1
 );

307 
p‹t
->
pDevi˚Fns
->
	`devi˚Inôülize
(
mö‹
);

312  
RTEMS_SUCCESSFUL
;

313 
	}
}

	@src/lib/libbsp/shared/console_control.c

22 
	~<b•.h
>

23 
	~<πems/libio.h
>

24 
	~<°dlib.h
>

25 
	~<as£π.h
>

26 
	~<ãrmios.h
>

28 
	~<πems/ãrmio°y≥s.h
>

29 
	~<πems/c⁄sﬁe.h
>

30 
	~<libchù/£rül.h
>

31 
	~"c⁄sﬁe_¥iv©e.h
"

38 
πems_devi˚_drivî
 
	$c⁄sﬁe_c⁄åﬁ
(

39 
πems_devi˚_maj‹_numbî
 
maj‹
,

40 
πems_devi˚_mö‹_numbî
 
mö‹
,

41 * 
¨g


44  
	`πems_ãrmios_io˘l
 (
¨g
);

45 
	}
}

	@src/lib/libbsp/shared/console_private.h

18 #i‚de‡
_PC386_CONSOLE_PRIVATE_h


19 
	#_PC386_CONSOLE_PRIVATE_h


	)

21 
	~<πems.h
>

23 
	~<libchù/£rül.h
>

25 #ifde‡
__˝lu•lus


29 
πems_devi˚_mö‹_numbî
 
BSPPrötkP‹t
;

38 
b•_com_outch
(
ch
);

49 
b•_com_öch
();

58 
vt_io˘l
–
cmd
, 
¨g
);

71 
c⁄sﬁe_ªgi°î_devi˚s
(

72 
c⁄sﬁe_tbl
 *
√w_p‹ts
,

73 
size_t
 
numbî_of_p‹ts


76 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/console_read.c

21 
	~<b•.h
>

22 
	~<πems/libio.h
>

23 
	~<°dlib.h
>

24 
	~<as£π.h
>

25 
	~<ãrmios.h
>

27 
	~<πems/ãrmio°y≥s.h
>

28 
	~<πems/c⁄sﬁe.h
>

29 
	~<libchù/£rül.h
>

30 
	~"c⁄sﬁe_¥iv©e.h
"

37 
πems_devi˚_drivî
 
	$c⁄sﬁe_ªad
(

38 
πems_devi˚_maj‹_numbî
 
maj‹
,

39 
πems_devi˚_mö‹_numbî
 
mö‹
,

40 * 
¨g


43  
	`πems_ãrmios_ªad
 (
¨g
);

44 
	}
}

	@src/lib/libbsp/shared/console_select.c

21 
	~<b•.h
>

22 
	~<b•/Áèl.h
>

23 
	~<πems/libio.h
>

24 
	~<°dlib.h
>

25 
	~<as£π.h
>

26 
	~<ãrmios.h
>

28 
	~<πems/ãrmio°y≥s.h
>

29 
	~<libchù/£rül.h
>

30 
	~"c⁄sﬁe_¥iv©e.h
"

36 
boﬁ
 
	$b•_Is_AvaûabÀ
–
πems_devi˚_mö‹_numbî
 
mö‹
 )

38 
c⁄sﬁe_tbl
 *
˝å
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

44 i‡((!
˝å
->
devi˚Probe
 || c±r->
	`devi˚Probe
(
mö‹
)) &&

45 
˝å
->
pDevi˚Fns
->
	`devi˚Probe
(
mö‹
)) {

46  
åue
;

48  
Ál£
;

49 
	}
}

54 
πems_devi˚_mö‹_numbî
 
	$b•_Fú°_AvaûabÀ_Devi˚
( )

56 
πems_devi˚_mö‹_numbî
 
mö‹
;

58 
mö‹
=0; mö‹ < 
C⁄sﬁe_P‹t_Cou¡
 ; minor++) {

59 
c⁄sﬁe_tbl
 *
˝å
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
];

66 i‡((!
˝å
->
devi˚Probe
 || c±r->
	`devi˚Probe
(
mö‹
)) &&

67 
˝å
->
pDevi˚Fns
->
	`devi˚Probe
(
mö‹
)) {

68  
mö‹
;

75 
	`b•_Áèl
(
BSP_FATAL_CONSOLE_NO_DEV
);

76 
	}
}

78 
	$b•_c⁄sﬁe_£À˘
()

94 i‡–!
	`b•_Is_AvaûabÀ
–
C⁄sﬁe_P‹t_Mö‹
 ) ) {

95 
C⁄sﬁe_P‹t_Mö‹
 = 
	`b•_Fú°_AvaûabÀ_Devi˚
();

97 
	}
}

	@src/lib/libbsp/shared/console_select_simple.c

15 
	~<libchù/£rül.h
>

17 
	~<b•.h
>

19 
	$b•_c⁄sﬁe_£À˘
()

21 
C⁄sﬁe_P‹t_Mö‹
 = 
BSP_CONSOLE_MINOR
;

22 
	}
}

	@src/lib/libbsp/shared/console_write.c

21 
	~<b•.h
>

22 
	~<πems/libio.h
>

23 
	~<°dlib.h
>

24 
	~<as£π.h
>

25 
	~<ãrmios.h
>

27 
	~<πems/ãrmio°y≥s.h
>

28 
	~<πems/c⁄sﬁe.h
>

29 
	~<libchù/£rül.h
>

30 
	~"c⁄sﬁe_¥iv©e.h
"

37 
πems_devi˚_drivî
 
	$c⁄sﬁe_wrôe
(

38 
πems_devi˚_maj‹_numbî
 
maj‹
,

39 
πems_devi˚_mö‹_numbî
 
mö‹
,

40 * 
¨g


43  
	`πems_ãrmios_wrôe
 (
¨g
);

44 
	}
}

	@src/lib/libbsp/shared/cpucounterdiff.c

15 
	~<πems/sc‹e/˝u.h
>

17 
CPU_Cou¡î_ticks
 
	$_CPU_Cou¡î_dif„ªn˚
(

18 
CPU_Cou¡î_ticks
 
£c⁄d
,

19 
CPU_Cou¡î_ticks
 
fú°


22  
£c⁄d
 - 
fú°
;

23 
	}
}

	@src/lib/libbsp/shared/cpucounterread.c

15 
	~<πems/sc‹e/˝u.h
>

17 
CPU_Cou¡î_ticks
 
	$_CPU_Cou¡î_ªad
( )

19 
CPU_Cou¡î_ticks
 
cou¡î
;

21 
CPU_Cou¡î_ticks
 
¢≠shŸ
;

23 
¢≠shŸ
 = 
cou¡î
;

24 
cou¡î
 = 
¢≠shŸ
 + 1;

26  
¢≠shŸ
;

27 
	}
}

	@src/lib/libbsp/shared/doxygen.h

	@src/lib/libbsp/shared/dummy_printk_support.c

22 
	~<πems.h
>

23 
	~<πems/b•Io.h
>

25 
	$BSP_ouçut_ch¨_f
(
c
)

28 
	}
}

30 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
BSP_ouçut_ch¨_f
;

31 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
NULL
;

	@src/lib/libbsp/shared/gdbstub/rtems-stub-glue.c

31 
	~<πems.h
>

32 
	~<πems/sc‹e/sys°©e.h
>

33 
	~<πems/sc‹e/obje˘im∂.h
>

34 
	~<°rög.h
>

36 
	~"gdb_if.h
"

39 #unde‡
ASSERT


40 
	#ASSERT
(
x
)

	)

42 c⁄° 
gdb_hexch¨s
[];

49 
πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
(

50 *
ªgi°îs
,

51 
Thªad_C⁄åﬁ
 *
th


55 
	$πems_gdb_°ub_thªad_suµ‹t_ok
()

57 i‡(
	`_Sy°em_°©e_Gë
(Ë=
SYSTEM_STATE_UP
) {

61 
	}
}

69 
	$πems_gdb_°ub_id_to_ödex
(

70 
Obje˘s_Id
 
thªad_obj_id


73 
gdb_ödex
 = 0;

74 
fú°
 = 1;

75 
size_t
 
≠i_ödex
;

77 i‡(
	`_Sy°em_°©e_Gë
(Ë!
SYSTEM_STATE_UP
) {

79 
gdb_ödex
 = 1;

83 
≠i_ödex
 = 1;

84 
gdb_ödex
 =0 && 
≠i_ödex
 <
OBJECTS_APIS_LAST
;

85 ++
≠i_ödex


87 i‡(
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
] !
NULL
) {

88 c⁄° 
Obje˘s_Inf‹m©i⁄
 *
öfo
 =

89 
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
][1];

90 
Obje˘s_Id
 
mö_id
 = 
öfo
->
möimum_id
;

91 
Obje˘s_Id
 
max_id
 = 
öfo
->
maximum_id
;

92 
œ°
 = 
fú°
 + (Ë(
max_id
 - 
mö_id
);

94 i‡(
thªad_obj_id
 >
mö_id
 &&Åhªad_obj_id < 
max_id
) {

95 
gdb_ödex
 = 
fú°
 + (Ë(
thªad_obj_id
 - 
mö_id
);

98 
fú°
 = 
œ°
 + 1;

102  
gdb_ödex
;

103 
	}
}

106 
Thªad_C⁄åﬁ
 *
	$πems_gdb_ödex_to_°ub_id
(

107 
gdb_ödex


110 
Thªad_C⁄åﬁ
 *
th
 = 
NULL
;

111 
fú°
 = 1;

112 
size_t
 
≠i_ödex
;

114 
	`ASSERT
(
ªgi°îs
 !
NULL
);

116 i‡(
	`_Sy°em_°©e_Gë
(Ë!
SYSTEM_STATE_UP
 || 
gdb_ödex
 <= 0) {

118  
NULL
;

122 
≠i_ödex
 = 1;

123 
th
 =
NULL
 && 
≠i_ödex
 <
OBJECTS_APIS_LAST
;

124 ++
≠i_ödex


126 i‡(
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
] !
NULL
) {

127 c⁄° 
Obje˘s_Inf‹m©i⁄
 *
öfo
 =

128 
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
][1];

129 
Obje˘s_Id
 
mö_id
 = 
öfo
->
möimum_id
;

130 
Obje˘s_Id
 
max_id
 = 
öfo
->
maximum_id
;

131 
œ°
 = 
fú°
 + (Ë(
max_id
 - 
mö_id
);

133 i‡(
gdb_ödex
 <
fú°
 + (Ë(
max_id
 - 
mö_id
)) {

134 
th
 = (
Thªad_C⁄åﬁ
 *)

135 
öfo
->
loˇl_èbÀ
[
gdb_ödex
 - 
fú°
 + 1];

138 
fú°
 = 
œ°
 + 1;

142  
th
;

143 
	}
}

146 
	$πems_gdb_°ub_gë_cuºít_thªad
()

148  
	`πems_gdb_°ub_id_to_ödex
–
	`πems_èsk_£lf
() );

149 
	}
}

153 
	$πems_gdb_°ub_gë_√xt_thªad
(
gdb_ödex
)

155 
√xt_gdb_ödex
 = 0;

156 
fú°
 = 1;

157 
size_t
 
≠i_ödex
;

159 i‡(
	`_Sy°em_°©e_Gë
(Ë!
SYSTEM_STATE_UP
) {

161  (
gdb_ödex
 < 1) ? 1 : 0;

165 
≠i_ödex
 = 1;

166 
√xt_gdb_ödex
 =0 && 
≠i_ödex
 <
OBJECTS_APIS_LAST
;

167 ++
≠i_ödex


169 i‡(
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
] !
NULL
) {

170 c⁄° 
Obje˘s_Inf‹m©i⁄
 *
öfo
 =

171 
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
][1];

172 
Obje˘s_Id
 
mö_id
 = 
öfo
->
möimum_id
;

173 
Obje˘s_Id
 
max_id
 = 
öfo
->
maximum_id
;

174 
œ°
 = 
fú°
 + (Ë(
max_id
 - 
mö_id
);

176 i‡(
gdb_ödex
 <
œ°
) {

177 
°¨t
 = 
gdb_ödex
 < 
fú°
 ? first : gdb_index + 1;

178 
pŸítül_√xt
;

181 
pŸítül_√xt
 = 
°¨t
;

182 
√xt_gdb_ödex
 =0 && 
pŸítül_√xt
 <
œ°
;

183 ++
pŸítül_√xt


185 i‡(
öfo
->
loˇl_èbÀ
[
pŸítül_√xt
 - 
fú°
 + 1] !
NULL
) {

186 
√xt_gdb_ödex
 = 
pŸítül_√xt
;

191 
fú°
 = 
œ°
 + 1;

195  
√xt_gdb_ödex
;

196 
	}
}

200 
	$πems_gdb_°ub_gë_thªad_ªgs
(

201 
thªad
,

202 *
ªgi°îs


205 
Thªad_C⁄åﬁ
 *
th
;

207 
th

	`πems_gdb_ödex_to_°ub_id
(
thªad
);

209 if–
th
 )

211 
	`πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
–
ªgi°îs
, 
th
 );

215 
	}
}

221 
	$πems_gdb_°ub_£t_thªad_ªgs
(

222 
thªad
,

223 *
ªgi°îs


231 
	}
}

235 
	$πems_gdb_°ub_gë_thªad_öfo
(

236 
gdb_ödex
,

237 
πems_gdb_°ub_thªad_öfo
 *
öfo


240 
fú°
 = 1;

241 
size_t
 
≠i_ödex
;

243 
	`ASSERT
(
öfo
 !
NULL
);

245 i‡(
gdb_ödex
 <= 0) {

249 i‡(
	`_Sy°em_°©e_Gë
(Ë!
SYSTEM_STATE_UP
 || 
gdb_ödex
 == 1) {

252 
	`°r˝y
(
öfo
->
di•œy
, "idleÅhread");

253 
	`°r˝y
(
öfo
->
«me
, "IDLE");

254 
öfo
->
m‹e_di•œy
[0] = 0;

260 
≠i_ödex
 = 1;

261 
≠i_ödex
 <
OBJECTS_APIS_LAST
;

262 ++
≠i_ödex


264 i‡(
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
] !
NULL
) {

265 c⁄° 
Obje˘s_Inf‹m©i⁄
 *
obj_öfo
 =

266 
_Obje˘s_Inf‹m©i⁄_èbÀ
[
≠i_ödex
][1];

267 
Obje˘s_Id
 
mö_id
 = 
obj_öfo
->
möimum_id
;

268 
Obje˘s_Id
 
max_id
 = 
obj_öfo
->
maximum_id
;

269 
œ°
 = 
fú°
 + (Ë(
max_id
 - 
mö_id
);

271 i‡(
gdb_ödex
 <
œ°
) {

272 
Thªad_C⁄åﬁ
 *
th
 = (Thread_Control *)

273 
obj_öfo
->
loˇl_èbÀ
[
gdb_ödex
 - 
fú°
 + 1];

275 i‡(
th
 !
NULL
) {

276 
tmp_buf
[9];

278 
	`°r˝y
(
öfo
->
di•œy
, "task: controlát 0x");

280 
tmp_buf
[0] = 
gdb_hexch¨s
[((()
th
) >> 28) & 0xf];

281 
tmp_buf
[1] = 
gdb_hexch¨s
[((()
th
) >> 24) & 0xf];

282 
tmp_buf
[2] = 
gdb_hexch¨s
[((()
th
) >> 20) & 0xf];

283 
tmp_buf
[3] = 
gdb_hexch¨s
[((()
th
) >> 16) & 0xf];

284 
tmp_buf
[4] = 
gdb_hexch¨s
[((()
th
) >> 12) & 0xf];

285 
tmp_buf
[5] = 
gdb_hexch¨s
[((()
th
) >> 8) & 0xf];

286 
tmp_buf
[6] = 
gdb_hexch¨s
[((()
th
) >> 4) & 0xf];

287 
tmp_buf
[7] = 
gdb_hexch¨s
[(()
th
) & 0xf];

288 
tmp_buf
[8] = 0;

290 
	`°rˇt
(
öfo
->
di•œy
, 
tmp_buf
);

291 
	`πems_obje˘_gë_«me
–
th
->
Obje˘
.
id
, 5, 
öfo
->
«me
 );

292 
öfo
->
m‹e_di•œy
[0] = 0;

301 
fú°
 = 
œ°
 + 1;

306 
	}
}

311 
	$∑r£_zbªak
(c⁄° *
ö
, *
ty≥
, **
addr
, *
Àn
)

313 
âmp
, 
©mp
, 
…mp
;

315 
	`ASSERT
(
ö
 !
NULL
);

316 
	`ASSERT
(
ty≥
 !
NULL
);

317 
	`ASSERT
(
addr
 !
NULL
);

318 
	`ASSERT
(
Àn
 !
NULL
);

320 
	`ASSERT
(*
ö
 == 'z' || *in == 'Z');

322 
ö
++;

324 i‡(!
	`h°r2nibbÀ
(
ö
, &
âmp
) || *(in+1) != ',')

328 
ö
 += 2;

330 
ö
 = 
	`vh°r2öt
(ö, &
©mp
);

331 i‡(
ö
 =
NULL
 || *in != ',')

335 
ö
++;

337 
ö
 = 
	`vh°r2öt
(ö, &
…mp
);

338 i‡(
ö
 =
NULL
 || 
…mp
 < 1)

343 *
ty≥
 = 
âmp
;

344 *
addr
 = (*)
©mp
;

345 *
Àn
 = 
…mp
;

348 
	}
}

352 
	$∑r£_qp
(c⁄° *
ö
, *
mask
, *
thªad
)

354 c⁄° *
±r
;

356 
	`ASSERT
(
ö
 !
NULL
);

357 
	`ASSERT
(*
ö
 == 'q');

358 
	`ASSERT
(*(
ö
+1) == 'P');

360 
±r
 = 
	`fh°r2öt
(
ö
+2, 
mask
);

361 i‡(
±r
 =
NULL
)

366 
±r
 = 
	`fh°r2thªad
’å, 
thªad
);

367 i‡(
±r
 =
NULL
)

373 
	}
}

377 
	$∑ck_qq
(*
out
, 
mask
, 
thªad
, 
πems_gdb_°ub_thªad_öfo
 *
öfo
)

379 
Àn
;

381 
	`ASSERT
(
out
 !
NULL
);

382 
	`ASSERT
(
öfo
 !
NULL
);

384 *
out
++ = 'q';

385 *
out
++ = 'Q';

386 
out
 = 
	`öt2fh°r
(out, 
mask
);

387 
out
 = 
	`thªad2fh°r
(out, 
thªad
);

389 i‡(
mask
 & 0x1) {

391 
	`mem˝y
(
out
, "00000001", 8);

392 
out
 += 8;

393 *
out
++ = '1';

394 *
out
++ = '0';

395 
out
 = 
	`thªad2fh°r
(out, 
thªad
);

398 i‡(
mask
 & 0x2) {

400 
	`mem˝y
(
out
, "00000002", 8);

401 
out
 += 8;

402 *
out
++ = '0';

403 *
out
++ = '1';

404 *
out
++ = '1';

407 i‡(
mask
 & 0x4) {

409 
	`mem˝y
(
out
, "00000004", 8);

410 
out
 += 8;

412 
öfo
->
di•œy
[(info->display)-1] = 0;

414 
Àn
 = 
	`°æí
(
öfo
->
di•œy
);

416 *
out
++ = 
gdb_hexch¨s
[
Àn
 >> 4];

417 *
out
++ = 
gdb_hexch¨s
[
Àn
 & 0x0f];

419 
	`mem˝y
(
out
, 
öfo
->
di•œy
, 
Àn
);

421 
out
 +
Àn
;

424 i‡(
mask
 & 0x8) {

426 
	`mem˝y
(
out
, "00000008", 8);

427 
out
 += 8;

429 
öfo
->
«me
[(info->name)-1] = 0;

431 
Àn
 = 
	`°æí
(
öfo
->
«me
);

433 *
out
++ = 
gdb_hexch¨s
[
Àn
 >> 4];

434 *
out
++ = 
gdb_hexch¨s
[
Àn
 & 0x0f];

436 
	`mem˝y
(
out
, 
öfo
->
«me
, 
Àn
);

438 
out
 +
Àn
;

441 i‡(
mask
 & 0x10) {

443 
	`mem˝y
(
out
, "00000010", 8);

444 
out
 += 8;

446 
öfo
->
m‹e_di•œy
[(info->more_display)-1] = 0;

448 
Àn
 = 
	`°æí
(
öfo
->
m‹e_di•œy
);

450 *
out
++ = 
gdb_hexch¨s
[
Àn
 >> 4];

451 *
out
++ = 
gdb_hexch¨s
[
Àn
 & 0x0f];

453 
	`mem˝y
(
out
, 
öfo
->
m‹e_di•œy
, 
Àn
);

455 
out
 +
Àn
;

458 *
out
 = 0;

461 
	}
}

465 
	$∑r£_ql
(c⁄° *
ö
, *
fú°
, *
max_cou¡
, *
©hªad
)

467 c⁄° *
±r
;

469 
	`ASSERT
(
ö
 !
NULL
);

470 
	`ASSERT
(*
ö
 == 'q');

471 
	`ASSERT
(*(
ö
+1) == 'L');

472 
	`ASSERT
(
fú°
 !
NULL
);

473 
	`ASSERT
(
max_cou¡
 !
NULL
);

474 
	`ASSERT
(
©hªad
 !
NULL
);

476 
±r
 = 
ö
 + 2;

479 i‡(!
	`h°r2nibbÀ
(
±r
, 
fú°
))

483 
±r
++;

486 i‡(!
	`h°r2byã
(
±r
, 
max_cou¡
))

490 
±r
 += 2;

493 
±r
 = 
	`fh°r2thªad
’å, 
©hªad
);

494 i‡(
±r
 =
NULL
)

500 
	}
}

504 
	$ª£rve_qm_hódî
(*
out
)

506 
	`ASSERT
(
out
 !
NULL
);

508  
out
 + 21;

509 
	}
}

513 
	$∑ck_qm_thªad
(*
out
, 
thªad
)

515 
	`ASSERT
(
out
 != 0);

517  
	`thªad2fh°r
(
out
, 
thªad
);

518 
	}
}

522 
	$∑ck_qm_hódî
(*
out
, 
cou¡
, 
d⁄e
, 
©hªad
)

524 
	`ASSERT
(
out
 != 0);

525 
	`ASSERT
(
cou¡
 >= 0 && count < 256);

527 *
out
++ = 'q';

528 *
out
++ = 'M';

530 *
out
++ = 
gdb_hexch¨s
[(
cou¡
 >> 4) & 0x0f];

531 *
out
++ = 
gdb_hexch¨s
[
cou¡
 & 0x0f];

533 i‡(
d⁄e
) {

534 *
out
++ = '1';

536 *
out
++ = '0';

539 
	`thªad2fh°r
(
out
, 
©hªad
);

541 
	}
}

543 
	$πems_gdb_¥o˚ss_quîy
(

544 *
öbuf„r
,

545 *
outbuf„r
,

546 
do_thªads
,

547 
thªad


550 *
›å
;

552 
öbuf„r
[1]) {

555 i‡(!
do_thªads
) {

559 
›å
 = 
outbuf„r
;

561 *
›å
++ = 'Q';

562 *
›å
++ = 'C';

563 
›å
 = 
	`thªad2vh°r
(›å, 
thªad
);

564 *
›å
 = 0;

569 i‡(!
do_thªads
) {

574 
ªt
, 
πhªad
, 
mask
;

575 
πems_gdb_°ub_thªad_öfo
 
öfo
;

577 
ªt
 = 
	`∑r£_qp
(
öbuf„r
, &
mask
, &
πhªad
);

578 i‡(!
ªt
|| 
mask
 & ~0x1f) {

579 
	`°r˝y
(
outbuf„r
, "E01");

583 
ªt
 = 
	`πems_gdb_°ub_gë_thªad_öfo
(
πhªad
, &
öfo
);

584 i‡(!
ªt
) {

587 
	`°r˝y
(
outbuf„r
, "E02");

592 
	`∑ck_qq
(
outbuf„r
, 
mask
, 
πhªad
, &
öfo
);

598 i‡(!
do_thªads
) {

603 
ªt
, 
©hªad
, 
fú°
, 
max_˙t
, 
i
, 
d⁄e
, 
πhªad
;

605 
ªt
 = 
	`∑r£_ql
(
öbuf„r
, &
fú°
, &
max_˙t
, &
©hªad
);

606 i‡(!
ªt
) {

607 
	`°r˝y
(
outbuf„r
, "E02");

611 i‡(
max_˙t
 == 0) {

612 
	`°r˝y
(
outbuf„r
, "E02");

616 i‡(
max_˙t
 > 
QM_MAX_THREADS
) {

618 
max_˙t
 = 
QM_MAX_THREADS
;

622 
›å
 = 
	`ª£rve_qm_hódî
(
outbuf„r
);

624 i‡(
fú°
) {

625 
πhªad
 = 0;

627 
πhªad
 = 
©hªad
;

630 
d⁄e
 = 0;

632 
i
=0; i<
max_˙t
; i++) {

633 
πhªad
 = 
	`πems_gdb_°ub_gë_√xt_thªad
(rthread);

635 i‡(
πhªad
 <= 0) {

636 
d⁄e
 = 1;

640 
›å
 = 
	`∑ck_qm_thªad
(›å, 
πhªad
);

643 *
›å
 = 0;

645 
	`ASSERT
((
›å
 - 
outbuf„r
Ë< 
BUFMAX
);

648 
	`∑ck_qm_hódî
(
outbuf„r
, 
i
, 
d⁄e
, 
©hªad
);

653 i‡(
	`memcmp
(
öbuf„r
, "qOffsets", 8) == 0) {

654 *
t
, *
d
, *
b
;

655 *
out
;

657 i‡(!
	`πems_gdb_°ub_gë_off£ts
(&
t
, &
d
, &
b
)) {

661 
out
 = 
outbuf„r
;

663 *
out
++ = 'T';

664 *
out
++ = 'e';

665 *
out
++ = 'x';

666 *
out
++ = 't';

667 *
out
++ = '=';

669 
out
 = 
	`öt2vh°r
(out, ()
t
);

671 *
out
++ = ';';

672 *
out
++ = 'D';

673 *
out
++ = 'a';

674 *
out
++ = 't';

675 *
out
++ = 'a';

676 *
out
++ = '=';

678 
out
 = 
	`öt2vh°r
(out, ()
d
);

680 *
out
++ = ';';

681 *
out
++ = 'B';

682 *
out
++ = 's';

683 *
out
++ = 's';

684 *
out
++ = '=';

686 
out
 = 
	`öt2vh°r
(out, ()
b
);

688 *
out
++ = ';';

689 *
out
++ = 0;

697 
	}
}

701 
	$thªad2vh°r
(*
buf
, 
thªad
)

703 
i
, 
nibbÀ
, 
shi·
;

705 
	`ASSERT
(
buf
 !
NULL
);

707 
i
=0, 
shi·
=28; i<8; i++, shift-=4)

709 
nibbÀ
 = (
thªad
 >> 
shi·
) & 0x0f;

711 i‡(
nibbÀ
 != 0)

717 i‡(
i
 == 8)

719 *
buf
++ = '0';

720  
buf
;

723 *
buf
++ = 
gdb_hexch¨s
[
nibbÀ
];

725 
i
++, 
shi·
-=4; i<8; i++, shi·-=4, 
buf
++)

727 
nibbÀ
 = (
thªad
 >> 
shi·
) & 0x0f;

728 *
buf
 = 
gdb_hexch¨s
[
nibbÀ
];

731  
buf
;

732 
	}
}

736 
	$thªad2fh°r
(*
buf
, 
thªad
)

738 
i
, 
nibbÀ
, 
shi·
;

740 
	`ASSERT
(
buf
 !
NULL
);

742 
i
=0; i<8; i++, 
buf
++)

744 *
buf
 = '0';

747 
i
=0, 
shi·
=28; i<8; i++, shi·-=4, 
buf
++)

749 
nibbÀ
 = (
thªad
 >> 
shi·
) & 0x0f;

750 *
buf
 = 
gdb_hexch¨s
[
nibbÀ
];

753  
buf
;

754 
	}
}

758 
	$fh°r2thªad
(c⁄° *
buf
, *
thªad
)

760 
i
, 
vÆ
, 
nibbÀ
;

762 
	`ASSERT
(
buf
 !
NULL
);

763 
	`ASSERT
(
thªad
 !
NULL
);

765 
i
=0; i<8; i++, 
buf
++)

767 i‡(*
buf
 != '0')

769  
NULL
;

773 
vÆ
 = 0;

775 
i
=0; i<8; i++, 
buf
++)

777 i‡(!
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

779  
NULL
;

782 
	`ASSERT
(
nibbÀ
 >=0 &&Çibble < 16);

784 
vÆ
 = (vÆ << 4Ë| 
nibbÀ
;

787 *
thªad
 = 
vÆ
;

789  
buf
;

790 
	}
}

794 
	$vh°r2thªad
(c⁄° *
buf
, *
thªad
)

796 
i
, 
vÆ
, 
nibbÀ
;

797 
found_zîo
, 
lim
;

799 
	`ASSERT
(
buf
 !
NULL
);

800 
	`ASSERT
(
thªad
 !
NULL
);

803 
found_zîo
 = 0;

805 
i
=0; i<16; i++, 
buf
++)

807 i‡(*
buf
 != '0')

812 
found_zîo
 = 1;

816 
lim
 = 16 - 
i
;

817 
vÆ
 = 0;

819 
i
=0; i<
lim
; i++, 
buf
++)

821 i‡(!
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

823 i‡(
i
 =0 && !
found_zîo
)

826  
NULL
;

829 *
thªad
 = 
vÆ
;

830  
buf
;

833 
	`ASSERT
(
nibbÀ
 >= 0 &&Çibble < 16);

835 
vÆ
 = (vÆ << 4Ë| 
nibbÀ
;

838 i‡(
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

841  
NULL
;

844 *
thªad
 = 
vÆ
;

845  
buf
;

846 
	}
}

850 
	$öt2vh°r
(*
buf
, 
vÆ
)

852 
i
, 
nibbÀ
, 
shi·
;

854 
	`ASSERT
(
buf
 !
NULL
);

856 
i
=0, 
shi·
=28; i<8; i++, shift-=4)

858 
nibbÀ
 = (
vÆ
 >> 
shi·
) & 0x0f;

860 i‡(
nibbÀ
 != 0)

866 i‡(
i
 == 8)

868 *
buf
++ = '0';

869  
buf
;

872 *
buf
++ = 
gdb_hexch¨s
[
nibbÀ
];

874 
i
++, 
shi·
-=4; i<8; i++, shi·-=4, 
buf
++)

876 
nibbÀ
 = (
vÆ
 >> 
shi·
) & 0x0f;

877 *
buf
 = 
gdb_hexch¨s
[
nibbÀ
];

880  
buf
;

881 
	}
}

885 
	$öt2fh°r
(*
buf
, 
vÆ
)

887 
i
, 
nibbÀ
, 
shi·
;

889 
	`ASSERT
(
buf
 !
NULL
);

891 
i
=0, 
shi·
=28; i<8; i++, shi·-=4, 
buf
++)

893 
nibbÀ
 = (
vÆ
 >> 
shi·
) & 0x0f;

894 *
buf
 = 
gdb_hexch¨s
[
nibbÀ
];

897  
buf
;

898 
	}
}

902 
	$fh°r2öt
(c⁄° *
buf
, *
ivÆ
)

904 
i
, 
vÆ
, 
nibbÀ
;

906 
	`ASSERT
(
buf
 !
NULL
);

907 
	`ASSERT
(
ivÆ
 !
NULL
);

909 
vÆ
 = 0;

911 
i
=0; i<8; i++, 
buf
++)

913 i‡(!
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

915  
NULL
;

918 
	`ASSERT
(
nibbÀ
 >=0 &&Çibble < 16);

920 
vÆ
 = (vÆ << 4Ë| 
nibbÀ
;

923 *
ivÆ
 = 
vÆ
;

925  
buf
;

926 
	}
}

930 
	$vh°r2öt
(c⁄° *
buf
, *
ivÆ
)

932 
i
, 
vÆ
, 
nibbÀ
;

933 
found_zîo
, 
lim
;

935 
	`ASSERT
(
buf
 !
NULL
);

936 
	`ASSERT
(
ivÆ
 !
NULL
);

939 
found_zîo
 = 0;

941 
i
=0; i<8; i++, 
buf
++)

943 i‡(*
buf
 != '0')

948 
found_zîo
 = 1;

952 
lim
 = 8 - 
i
;

953 
vÆ
 = 0;

955 
i
=0; i<
lim
; i++, 
buf
++)

957 i‡(!
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

959 i‡(
i
 =0 && !
found_zîo
)

962  
NULL
;

965 *
ivÆ
 = 
vÆ
;

966  
buf
;

969 
	`ASSERT
(
nibbÀ
 >= 0 &&Çibble < 16);

971 
vÆ
 = (vÆ << 4Ë| 
nibbÀ
;

974 i‡(
	`h°r2nibbÀ
(
buf
, &
nibbÀ
))

977  
NULL
;

980 *
ivÆ
 = 
vÆ
;

981  
buf
;

982 
	}
}

985 
	$h°r2byã
(c⁄° *
buf
, *
bvÆ
)

987 
hnib
, 
 ib
;

989 
	`ASSERT
(
buf
 !
NULL
);

990 
	`ASSERT
(
bvÆ
 !
NULL
);

992 i‡(!
	`h°r2nibbÀ
(
buf
, &
hnib
Ë|| !h°r2nibbÀ(buf+1, &
 ib
))

997 *
bvÆ
 = (
hnib
 << 4Ë| 
 ib
;

999 
	}
}

1002 
	$h°r2nibbÀ
(c⁄° *
buf
, *
nibbÀ
)

1004 
ch
;

1006 
	`ASSERT
(
buf
 !
NULL
);

1007 
	`ASSERT
(
nibbÀ
 !
NULL
);

1009 
ch
 = *
buf
;

1011 i‡(
ch
 >= '0' && ch <= '9')

1013 *
nibbÀ
 = 
ch
 - '0';

1017 i‡(
ch
 >= 'a' && ch <= 'f')

1019 *
nibbÀ
 = 
ch
 - 'a' + 10;

1023 i‡(
ch
 >= 'A' && ch <= 'F')

1025 *
nibbÀ
 = 
ch
 - 'A' + 10;

1030 
	}
}

1032 vﬁ©ûê
	gmem_îr
 = 0;

1033 
£t_mem_îr
();

1034 (*vﬁ©ûê
mem_Áu…_routöe
Ë(Ë
NULL
;

1040 
	$mem2h°r
(*
buf
, c⁄° *
mem
, 
cou¡
)

1042 
i
;

1043 
ch
;

1045 
mem_îr
 = 0;

1047 
mem_Áu…_routöe
 = 
£t_mem_îr
;

1049 
i
 = 0; i<
cou¡
; i++, 
mem
++)

1051 
ch
 = 
	`gë_byã
 (
mem
);

1052 i‡(
mem_îr
)

1054 
mem_Áu…_routöe
 = 
NULL
;

1055  
NULL
;

1058 *
buf
++ = 
gdb_hexch¨s
[
ch
 >> 4];

1059 *
buf
++ = 
gdb_hexch¨s
[
ch
 & 0x0f];

1062 *
buf
 = 0;

1064 
mem_Áu…_routöe
 = 
NULL
;

1066  
buf
;

1067 
	}
}

1072 
	$h°r2mem
 (*
mem
, c⁄° *
buf
, 
cou¡
)

1074 
i
;

1075 
bvÆ
;

1077 
mem_îr
 = 0;

1079 
mem_Áu…_routöe
 = 
£t_mem_îr
;

1081 
i
 = 0; i < 
cou¡
; i++, 
mem
++, 
buf
+=2)

1083 i‡(!
	`h°r2byã
(
buf
, &
bvÆ
))

1085 
mem_Áu…_routöe
 = 
NULL
;

1089 
	`ASSERT
(
bvÆ
 >=0 && bval < 256);

1091 
	`£t_byã
 (
mem
, 
bvÆ
);

1093 i‡(
mem_îr
)

1095 
mem_Áu…_routöe
 = 
NULL
;

1100 
mem_Áu…_routöe
 = 
NULL
;

1102 
	}
}

1105 
	$£t_mem_îr
 ()

1107 
mem_îr
 = 1;

1108 
	}
}

1116 
	$gë_byã
 (c⁄° *
addr
)

1118  *
addr
;

1119 
	}
}

1122 
	$£t_byã
 (*
addr
, 
vÆ
)

1124 *
addr
 = 
vÆ
;

1125 
	}
}

1132 #i‡
deföed
(
__i386__
)

1134 
	~"i386-°ub.h
"

1137 
	ei386_°ub_ªg«mes
 {

1138 
	mI386_STUB_REG_EAX
, 
	mI386_STUB_REG_ECX
, 
	mI386_STUB_REG_EDX
, 
	mI386_STUB_REG_EBX
,

1139 
	mI386_STUB_REG_ESP
, 
	mI386_STUB_REG_EBP
, 
	mI386_STUB_REG_ESI
, 
	mI386_STUB_REG_EDI
,

1140 
	mI386_STUB_REG_PC
 ,

1141 
	mI386_STUB_REG_PS
 ,

1142 
	mI386_STUB_REG_CS
, 
	mI386_STUB_REG_SS
, 
	mI386_STUB_REG_DS
, 
	mI386_STUB_REG_ES
,

1143 
	mI386_STUB_REG_FS
, 
	mI386_STUB_REG_GS


1146 
	$πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
(

1147 *
ªgi°îs
,

1148 
Thªad_C⁄åﬁ
 *
th


1151 
ªgi°îs
[
I386_STUB_REG_EAX
] = 0;

1152 
ªgi°îs
[
I386_STUB_REG_ECX
] = 0;

1153 
ªgi°îs
[
I386_STUB_REG_EDX
] = 0;

1154 
ªgi°îs
[
I386_STUB_REG_EBX
] = ()
th
->
Regi°îs
.
ebx
;

1155 
ªgi°îs
[
I386_STUB_REG_ESP
] = ()
th
->
Regi°îs
.
e•
;

1156 
ªgi°îs
[
I386_STUB_REG_EBP
] = ()
th
->
Regi°îs
.
ebp
;

1157 
ªgi°îs
[
I386_STUB_REG_ESI
] = ()
th
->
Regi°îs
.
esi
;

1158 
ªgi°îs
[
I386_STUB_REG_EDI
] = ()
th
->
Regi°îs
.
edi
;

1159 
ªgi°îs
[
I386_STUB_REG_PC
] = *(*)
th
->
Regi°îs
.
e•
;

1160 
ªgi°îs
[
I386_STUB_REG_PS
] = ()
th
->
Regi°îs
.
eÊags
;

1165 
ªgi°îs
[
I386_STUB_REG_CS
] = 0x8;

1166 
ªgi°îs
[
I386_STUB_REG_SS
] = 0x10;

1167 
ªgi°îs
[
I386_STUB_REG_DS
] = 0x10;

1168 
ªgi°îs
[
I386_STUB_REG_ES
] = 0x10;

1169 
ªgi°îs
[
I386_STUB_REG_FS
] = 0x10;

1170 
ªgi°îs
[
I386_STUB_REG_GS
] = 0x10;

1171 
	}
}

1173 
	$πems_gdb_°ub_gë_off£ts
(

1174 **
ãxt_addr
,

1175 **
d©a_addr
,

1176 **
bss_addr


1179 
_ãxt_°¨t
;

1180 
_d©a_°¨t
;

1181 
_bss_°¨t
;

1183 *
ãxt_addr
 = &
_ãxt_°¨t
;

1184 *
d©a_addr
 = &
_d©a_°¨t
;

1185 *
bss_addr
 = &
_bss_°¨t
;

1188 
	}
}

1190 #ñi‡
deföed
(
__mùs__
)

1192 
	$πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
(

1193 *
ªgi°îs
,

1194 
Thªad_C⁄åﬁ
 *
th


1197 
ªgi°îs
[
S0
] = ()
th
->
Regi°îs
.
s0
;

1198 
ªgi°îs
[
S1
] = ()
th
->
Regi°îs
.
s1
;

1199 
ªgi°îs
[
S2
] = ()
th
->
Regi°îs
.
s2
;

1200 
ªgi°îs
[
S3
] = ()
th
->
Regi°îs
.
s3
;

1201 
ªgi°îs
[
S4
] = ()
th
->
Regi°îs
.
s4
;

1202 
ªgi°îs
[
S5
] = ()
th
->
Regi°îs
.
s5
;

1203 
ªgi°îs
[
S6
] = ()
th
->
Regi°îs
.
s6
;

1204 
ªgi°îs
[
S7
] = ()
th
->
Regi°îs
.
s7
;

1206 
ªgi°îs
[
SP
] = ()
th
->
Regi°îs
.
•
;

1207 
ªgi°îs
[
RA
] = ()
th
->
Regi°îs
.
ø
;

1209 
ªgi°îs
[
SR
] = ()
th
->
Regi°îs
.
c0_§
;

1210 
ªgi°îs
[
PC
] = ()
th
->
Regi°îs
.
c0_ïc
;

1211 
	}
}

1213 
	$πems_gdb_°ub_gë_off£ts
(

1214 **
ãxt_addr
,

1215 **
d©a_addr
,

1216 **
bss_addr


1228 *
ãxt_addr
 = 0;

1229 *
d©a_addr
 = 0;

1230 *
bss_addr
 = 0;

1232 
	}
}

1234 #ñi‡
deföed
(
__mc68000__
)

1236 
	$πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
(

1237 *
ªgi°îs
,

1238 
Thªad_C⁄åﬁ
 *
th


1246 
ªgi°îs
[
D0
] = 0;

1247 
ªgi°îs
[
D1
] = 0;

1248 
ªgi°îs
[
D2
] = (
uöt32_t
)
th
->
Regi°îs
.
d2
;

1249 
ªgi°îs
[
D3
] = (
uöt32_t
)
th
->
Regi°îs
.
d3
;

1250 
ªgi°îs
[
D4
] = (
uöt32_t
)
th
->
Regi°îs
.
d4
;

1251 
ªgi°îs
[
D5
] = (
uöt32_t
)
th
->
Regi°îs
.
d5
;

1252 
ªgi°îs
[
D6
] = (
uöt32_t
)
th
->
Regi°îs
.
d6
;

1253 
ªgi°îs
[
D7
] = (
uöt32_t
)
th
->
Regi°îs
.
d7
;

1255 
ªgi°îs
[
A0
] = 0;

1256 
ªgi°îs
[
A1
] = 0;

1257 
ªgi°îs
[
A2
] = (
uöt32_t
)
th
->
Regi°îs
.
a2
;

1258 
ªgi°îs
[
A3
] = (
uöt32_t
)
th
->
Regi°îs
.
a3
;

1259 
ªgi°îs
[
A4
] = (
uöt32_t
)
th
->
Regi°îs
.
a4
;

1260 
ªgi°îs
[
A5
] = (
uöt32_t
)
th
->
Regi°îs
.
a5
;

1261 
ªgi°îs
[
A6
] = (
uöt32_t
)
th
->
Regi°îs
.
a6
;

1262 
ªgi°îs
[
A7
] = (
uöt32_t
)
th
->
Regi°îs
.
a7_m•
;

1264 
ªgi°îs
[
PS
] = (
uöt32_t
)
th
->
Regi°îs
.
§
;

1266 
ªgi°îs
[
PC
] = *(
uöt32_t
*)
th
->
Regi°îs
.
a7_m•
;

1268 
ªgi°îs
[
PC
] = (
uöt32_t
)
_CPU_C⁄ãxt_swôch
;

1270 
	}
}

1272 
	$πems_gdb_°ub_gë_off£ts
(

1273 **
ãxt_addr
,

1274 **
d©a_addr
,

1275 **
bss_addr


1287 *
ãxt_addr
 = 0;

1288 *
d©a_addr
 = 0;

1289 *
bss_addr
 = 0;

1291 
	}
}

1293 #ñi‡
deföed
(
__lm32__
)

1295 
	$πems_gdb_°ub_gë_ªgi°îs_‰om_c⁄ãxt
(

1296 *
ªgi°îs
,

1297 
Thªad_C⁄åﬁ
 *
th


1300 
ªgi°îs
[
LM32_REG_R11
] = (
uöt32_t
)
th
->
Regi°îs
.
r11
;

1301 
ªgi°îs
[
LM32_REG_R12
] = (
uöt32_t
)
th
->
Regi°îs
.
r12
;

1302 
ªgi°îs
[
LM32_REG_R13
] = (
uöt32_t
)
th
->
Regi°îs
.
r13
;

1303 
ªgi°îs
[
LM32_REG_R14
] = (
uöt32_t
)
th
->
Regi°îs
.
r14
;

1304 
ªgi°îs
[
LM32_REG_R15
] = (
uöt32_t
)
th
->
Regi°îs
.
r15
;

1305 
ªgi°îs
[
LM32_REG_R16
] = (
uöt32_t
)
th
->
Regi°îs
.
r16
;

1306 
ªgi°îs
[
LM32_REG_R17
] = (
uöt32_t
)
th
->
Regi°îs
.
r17
;

1307 
ªgi°îs
[
LM32_REG_R18
] = (
uöt32_t
)
th
->
Regi°îs
.
r18
;

1308 
ªgi°îs
[
LM32_REG_R19
] = (
uöt32_t
)
th
->
Regi°îs
.
r19
;

1309 
ªgi°îs
[
LM32_REG_R20
] = (
uöt32_t
)
th
->
Regi°îs
.
r20
;

1310 
ªgi°îs
[
LM32_REG_R21
] = (
uöt32_t
)
th
->
Regi°îs
.
r21
;

1311 
ªgi°îs
[
LM32_REG_R22
] = (
uöt32_t
)
th
->
Regi°îs
.
r22
;

1312 
ªgi°îs
[
LM32_REG_R23
] = (
uöt32_t
)
th
->
Regi°îs
.
r23
;

1313 
ªgi°îs
[
LM32_REG_R24
] = (
uöt32_t
)
th
->
Regi°îs
.
r24
;

1314 
ªgi°îs
[
LM32_REG_R25
] = (
uöt32_t
)
th
->
Regi°îs
.
r25
;

1315 
ªgi°îs
[
LM32_REG_GP
] = (
uöt32_t
)
th
->
Regi°îs
.
gp
;

1316 
ªgi°îs
[
LM32_REG_FP
] = (
uöt32_t
)
th
->
Regi°îs
.
Â
;

1317 
ªgi°îs
[
LM32_REG_SP
] = (
uöt32_t
)
th
->
Regi°îs
.
•
;

1318 
ªgi°îs
[
LM32_REG_RA
] = (
uöt32_t
)
th
->
Regi°îs
.
ø
;

1319 
ªgi°îs
[
LM32_REG_IE
] = (
uöt32_t
)
th
->
Regi°îs
.
õ
;

1321 
ªgi°îs
[
LM32_REG_PC
] = (
uöt32_t
)
th
->
Regi°îs
.
ïc
;

1323 
ªgi°îs
[
LM32_REG_PC
] = (
uöt32_t
)
_CPU_C⁄ãxt_swôch
;

1325 
	}
}

1327 
	$πems_gdb_°ub_gë_off£ts
(

1328 **
ãxt_addr
,

1329 **
d©a_addr
,

1330 **
bss_addr


1333 *
ãxt_addr
 = 0;

1334 *
d©a_addr
 = 0;

1335 *
bss_addr
 = 0;

1337 
	}
}

	@src/lib/libbsp/shared/get-serial-mouse-ps2.c

15 
	~<πems/£rül_mou£.h
>

17 
boﬁ
 
	$b•_gë_£rül_mou£_devi˚
(

18 c⁄° **
«me
,

19 c⁄° **
ty≥


22 *
«me
 = 
SERIAL_MOUSE_DEVICE_PS2
;

23 *
ty≥
 = "ps2";

25  
åue
;

26 
	}
}

	@src/lib/libbsp/shared/gnatinstallhandler.c

	@src/lib/libbsp/shared/include/bootcard.h

23 #i‚de‡
LIBBSP_SHARED_BOOTCARD_H


24 
	#LIBBSP_SHARED_BOOTCARD_H


	)

26 
	~<°rög.h
>

28 
	~<πems/c⁄fig.h
>

29 
	~<πems/b•Io.h
>

30 
	~<πems/mÆloc.h
>

31 
	~<πems/sc‹e/wk•a˚.h
>

33 
	~<b•›ts.h
>

35 #ifde‡
__˝lu•lus


52 c⁄° *
b•_boŸ_cmdlöe
;

54 
b•_show_öfo
();

56 
b•_°¨t
();

58 
b•_¥ëaskög_hook
();

60 
b•_¥edrivî_hook
();

62 
b•_drivî_Àvñ_hook
–
Àvñ
 );

64 
b•_po°drivî_hook
();

66 
b•_ª£t
();

105 
boŸ_ˇrd
(c⁄° *
cmdlöe
Ë
	gRTEMS_COMPILER_NO_RETURN_ATTRIBUTE
;

107 #ifde‡
CONFIGURE_MALLOC_BSP_SUPPORTS_SBRK


119 
±rdiff_t
 
b•_sbrk_öô
(
Hóp_Aªa
 *
¨ó
, 
uöçå_t
 
mö_size
);

122 
ölöe
 
b•_w‹k_¨ó_öôülize_deÁu…
(

123 *
¨ó_begö
,

124 
uöçå_t
 
¨ó_size


127 
Hóp_Aªa
 
	g¨ó
 = {

128 .
begö
 = 
¨ó_begö
,

129 .
	gsize
 = 
¨ó_size


132 #i‡
BSP_DIRTY_MEMORY
 == 1

133 
mem£t
(
¨ó
.
begö
, 0xCF,áªa.
size
);

136 #ifde‡
CONFIGURE_MALLOC_BSP_SUPPORTS_SBRK


138 
uöçå_t
 
	govîhód
 = 
_Hóp_Aªa_ovîhód
(
CPU_HEAP_ALIGNMENT
);

139 
uöçå_t
 
	gw‹k_•a˚_size
 = 
πems_c⁄figuøti⁄_gë_w‹k_•a˚_size
();

140 
±rdiff_t
 
	gsbrk_amou¡
 = 
b•_sbrk_öô
(

141 &
¨ó
,

142 
w‹k_•a˚_size


143 + 
ovîhód


144 + (
πems_c⁄figuøti⁄_gë_unifõd_w‹k_¨ó
(Ë? 0 : 
ovîhód
)

147 
πems_hóp_£t_sbrk_amou¡
(
sbrk_amou¡
);

155 #ifde‡
BSP_GET_WORK_AREA_DEBUG


157 *
	g•
 = 
__buûtö_‰ame_addªss
(0);

158 *
	gíd
 = (*Ë
¨ó
.
begö
 +áªa.
size
;

159 
¥ötk
(

164 
¨ó
.
begö
,

165 (Ë
¨ó
.
size
,

166 (Ë
¨ó
.
size
,

167 
íd
,

168 
•
,

169 (
uöçå_t
Ë
•
 >(uöçå_tË
¨ó
.
begö


170 && (
uöçå_t
Ë
•
 <(uöçå_tË
íd
 ?

176 
_W‹k•a˚_H™dÀr_öôüliz©i⁄
(&
¨ó
, 1, 
NULL
);

178 #ifde‡
BSP_GET_WORK_AREA_DEBUG


179 
¥ötk
(

182 
¨ó
.
begö
,

183 (Ë
¨ó
.
size


187 
RTEMS_MÆloc_Inôülize
(&
¨ó
, 1, 
NULL
);

190 
ölöe
 
b•_w‹k_¨ó_öôülize_wôh_èbÀ
(

191 
Hóp_Aªa
 *
¨ós
,

192 
size_t
 
¨ó_cou¡


195 
_W‹k•a˚_H™dÀr_öôüliz©i⁄
(
¨ós
, 
¨ó_cou¡
, 
_Hóp_Exãnd
);

196 
RTEMS_MÆloc_Inôülize
(
¨ós
, 
¨ó_cou¡
, 
_Hóp_Exãnd
);

199 
b•_w‹k_¨ó_öôülize
();

201 
b•_libc_öô
();

211 
b•_°¨t_⁄_£c⁄d¨y_¥o˚ss‹
();

215 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/cache_.h

	@src/lib/libbsp/shared/include/console-polled.h

16 #i‚de‡
__BSP_CONSOLE_POLLED_h


17 
	#__BSP_CONSOLE_POLLED_h


	)

26 
c⁄sﬁe_outbyã_pﬁÀd
(
p‹t
, 
ch
);

36 
c⁄sﬁe_öbyã_n⁄blockög
(
p‹t
);

41 
c⁄sﬁe_öôülize_h¨dw¨e
();

	@src/lib/libbsp/shared/include/console-termios.h

15 #i‚de‡
BSP_CONSOLE_TERMIOS_H


16 
	#BSP_CONSOLE_TERMIOS_H


	)

18 
	~<πems/ãrmio°y≥s.h
>

20 #ifde‡
__˝lu•lus


54 
boﬁ
 (*
	tc⁄sﬁe_devi˚_¥obe
)(
	tπems_ãrmios_devi˚_c⁄ãxt
 *
	tc⁄ãxt
);

66 c⁄° *
devi˚_fûe
;

71 
c⁄sﬁe_devi˚_¥obe
 
¥obe
;

76 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 *
h™dÀr
;

81 c⁄° 
πems_ãrmios_devi˚_Êow
 *
Êow
;

86 
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
;

87 } 
	tc⁄sﬁe_devi˚
;

101 
πems_°©us_code
 
c⁄sﬁe_devi˚_ö°Æl
(

102 c⁄° *
devi˚_fûe
,

103 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 *
h™dÀr
,

104 c⁄° 
πems_ãrmios_devi˚_Êow
 *
Êow
,

105 
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt


111 
boﬁ
 
c⁄sﬁe_devi˚_¥obe_deÁu…
(
πems_ãrmios_devi˚_c⁄ãxt
 *
c⁄ãxt
);

121 c⁄° 
c⁄sﬁe_devi˚
 
c⁄sﬁe_devi˚_èbÀ
[];

128 c⁄° 
size_t
 
c⁄sﬁe_devi˚_cou¡
;

132 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/coverhd.h

20 #i‚de‡
__COVERHD_h


21 
	#__COVERHD_h


	)

23 #ifde‡
__˝lu•lus


27 
	#CALLING_OVERHEAD_INITIALIZE_EXECUTIVE
 0

	)

28 
	#CALLING_OVERHEAD_SHUTDOWN_EXECUTIVE
 0

	)

29 
	#CALLING_OVERHEAD_TASK_CREATE
 0

	)

30 
	#CALLING_OVERHEAD_TASK_IDENT
 0

	)

31 
	#CALLING_OVERHEAD_TASK_START
 0

	)

32 
	#CALLING_OVERHEAD_TASK_RESTART
 0

	)

33 
	#CALLING_OVERHEAD_TASK_DELETE
 0

	)

34 
	#CALLING_OVERHEAD_TASK_SUSPEND
 0

	)

35 
	#CALLING_OVERHEAD_TASK_RESUME
 0

	)

36 
	#CALLING_OVERHEAD_TASK_SET_PRIORITY
 0

	)

37 
	#CALLING_OVERHEAD_TASK_MODE
 0

	)

38 
	#CALLING_OVERHEAD_TASK_GET_NOTE
 0

	)

39 
	#CALLING_OVERHEAD_TASK_SET_NOTE
 0

	)

40 
	#CALLING_OVERHEAD_TASK_WAKE_WHEN
 0

	)

41 
	#CALLING_OVERHEAD_TASK_WAKE_AFTER
 0

	)

42 
	#CALLING_OVERHEAD_INTERRUPT_CATCH
 0

	)

43 
	#CALLING_OVERHEAD_CLOCK_GET
 0

	)

44 
	#CALLING_OVERHEAD_CLOCK_SET
 0

	)

45 
	#CALLING_OVERHEAD_CLOCK_TICK
 0

	)

47 
	#CALLING_OVERHEAD_TIMER_CREATE
 0

	)

48 
	#CALLING_OVERHEAD_TIMER_IDENT
 0

	)

49 
	#CALLING_OVERHEAD_TIMER_DELETE
 0

	)

50 
	#CALLING_OVERHEAD_TIMER_FIRE_AFTER
 0

	)

51 
	#CALLING_OVERHEAD_TIMER_FIRE_WHEN
 0

	)

52 
	#CALLING_OVERHEAD_TIMER_RESET
 0

	)

53 
	#CALLING_OVERHEAD_TIMER_CANCEL
 0

	)

54 
	#CALLING_OVERHEAD_SEMAPHORE_CREATE
 0

	)

55 
	#CALLING_OVERHEAD_SEMAPHORE_DELETE
 0

	)

56 
	#CALLING_OVERHEAD_SEMAPHORE_IDENT
 0

	)

57 
	#CALLING_OVERHEAD_SEMAPHORE_OBTAIN
 0

	)

58 
	#CALLING_OVERHEAD_SEMAPHORE_RELEASE
 0

	)

59 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_CREATE
 0

	)

60 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_IDENT
 0

	)

61 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_DELETE
 0

	)

62 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_SEND
 0

	)

63 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_URGENT
 0

	)

64 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_BROADCAST
 0

	)

65 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_RECEIVE
 0

	)

66 
	#CALLING_OVERHEAD_MESSAGE_QUEUE_FLUSH
 0

	)

68 
	#CALLING_OVERHEAD_EVENT_SEND
 0

	)

69 
	#CALLING_OVERHEAD_EVENT_RECEIVE
 0

	)

70 
	#CALLING_OVERHEAD_SIGNAL_CATCH
 0

	)

71 
	#CALLING_OVERHEAD_SIGNAL_SEND
 0

	)

72 
	#CALLING_OVERHEAD_PARTITION_CREATE
 0

	)

73 
	#CALLING_OVERHEAD_PARTITION_IDENT
 0

	)

74 
	#CALLING_OVERHEAD_PARTITION_DELETE
 0

	)

75 
	#CALLING_OVERHEAD_PARTITION_GET_BUFFER
 0

	)

76 
	#CALLING_OVERHEAD_PARTITION_RETURN_BUFFER
 0

	)

77 
	#CALLING_OVERHEAD_REGION_CREATE
 0

	)

78 
	#CALLING_OVERHEAD_REGION_IDENT
 0

	)

79 
	#CALLING_OVERHEAD_REGION_DELETE
 0

	)

80 
	#CALLING_OVERHEAD_REGION_GET_SEGMENT
 0

	)

81 
	#CALLING_OVERHEAD_REGION_RETURN_SEGMENT
 0

	)

82 
	#CALLING_OVERHEAD_PORT_CREATE
 0

	)

83 
	#CALLING_OVERHEAD_PORT_IDENT
 0

	)

84 
	#CALLING_OVERHEAD_PORT_DELETE
 0

	)

85 
	#CALLING_OVERHEAD_PORT_EXTERNAL_TO_INTERNAL
 0

	)

86 
	#CALLING_OVERHEAD_PORT_INTERNAL_TO_EXTERNAL
 0

	)

88 
	#CALLING_OVERHEAD_IO_INITIALIZE
 0

	)

89 
	#CALLING_OVERHEAD_IO_OPEN
 0

	)

90 
	#CALLING_OVERHEAD_IO_CLOSE
 0

	)

91 
	#CALLING_OVERHEAD_IO_READ
 0

	)

92 
	#CALLING_OVERHEAD_IO_WRITE
 0

	)

93 
	#CALLING_OVERHEAD_IO_CONTROL
 0

	)

94 
	#CALLING_OVERHEAD_FATAL_ERROR_OCCURRED
 0

	)

95 
	#CALLING_OVERHEAD_RATE_MONOTONIC_CREATE
 0

	)

96 
	#CALLING_OVERHEAD_RATE_MONOTONIC_IDENT
 0

	)

97 
	#CALLING_OVERHEAD_RATE_MONOTONIC_DELETE
 0

	)

98 
	#CALLING_OVERHEAD_RATE_MONOTONIC_CANCEL
 0

	)

99 
	#CALLING_OVERHEAD_RATE_MONOTONIC_PERIOD
 0

	)

100 
	#CALLING_OVERHEAD_MULTIPROCESSING_ANNOUNCE
 0

	)

102 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/default-initial-extension.h

23 #i‚de‡
LIBBSP_SHARED_DEFAULT_INITIAL_EXTENSION_H


24 
	#LIBBSP_SHARED_DEFAULT_INITIAL_EXTENSION_H


	)

26 
	~<πems.h
>

28 #ifde‡
__˝lu•lus


40 
b•_Áèl_exãnsi⁄
(

41 
πems_Áèl_sour˚
 
sour˚
,

42 
boﬁ
 
is_öã∫Æ
,

43 
πems_Áèl_code
 
îr‹


46 
	#BSP_INITIAL_EXTENSION
 \

47 { 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, 
b•_Áèl_exãnsi⁄
, NULL }

	)

49 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/doxygen.h

	@src/lib/libbsp/shared/include/fatal.h

15 #i‚de‡
LIBBSP_SHARED_BSP_FATAL_H


16 
	#LIBBSP_SHARED_BSP_FATAL_H


	)

18 
	~<πems.h
>

20 #ifde‡
__˝lu•lus


24 
	#BSP_FATAL_CODE_BLOCK
(
idx
Ë((Ë(idxË* 256UL)

	)

31 
BSP_FATAL_INTERRUPT_INITIALIZATION
 = 
BSP_FATAL_CODE_BLOCK
(0),

32 
BSP_FATAL_SPURIOUS_INTERRUPT
,

33 
BSP_FATAL_CONSOLE_MULTI_INIT
,

34 
BSP_FATAL_CONSOLE_NO_MEMORY_0
,

35 
BSP_FATAL_CONSOLE_NO_MEMORY_1
,

36 
BSP_FATAL_CONSOLE_NO_MEMORY_2
,

37 
BSP_FATAL_CONSOLE_NO_MEMORY_3
,

38 
BSP_FATAL_CONSOLE_REGISTER_DEV_0
,

39 
BSP_FATAL_CONSOLE_REGISTER_DEV_1
,

40 
BSP_FATAL_CONSOLE_NO_DEV
,

41 
BSP_FATAL_CONSOLE_INSTALL_0
,

42 
BSP_FATAL_CONSOLE_INSTALL_1
,

45 
BSP_ARM_A9MPCORE_FATAL_CLOCK_IRQ_INSTALL
 = 
BSP_FATAL_CODE_BLOCK
(1),

46 
BSP_ARM_A9MPCORE_FATAL_CLOCK_IRQ_REMOVE
,

47 
BSP_ARM_PL111_FATAL_REGISTER_DEV
,

48 
BSP_ARM_PL111_FATAL_SEM_CREATE
,

49 
BSP_ARM_PL111_FATAL_SEM_RELEASE
,

52 
LEON3_FATAL_NO_IRQMP_CONTROLLER
 = 
BSP_FATAL_CODE_BLOCK
(2),

53 
LEON3_FATAL_CONSOLE_REGISTER_DEV
,

54 
LEON3_FATAL_CLOCK_INITIALIZATION
,

55 
LEON3_FATAL_INVALID_CACHE_CONFIG_MAIN_PROCESSOR
,

56 
LEON3_FATAL_INVALID_CACHE_CONFIG_SECONDARY_PROCESSOR
,

59 
LPC24XX_FATAL_PL111_SET_UP
 = 
BSP_FATAL_CODE_BLOCK
(3),

60 
LPC24XX_FATAL_PL111_PINS_SET_UP
,

61 
LPC24XX_FATAL_PL111_PINS_TEAR_DOWN
,

62 
LPC24XX_FATAL_PL111_TEAR_DOWN
,

65 
MPC5200_FATAL_PCF8563_INVALID_YEAR
 = 
BSP_FATAL_CODE_BLOCK
(4),

66 
MPC5200_FATAL_SLICETIMER_0_IRQ_INSTALL
,

67 
MPC5200_FATAL_SLICETIMER_1_IRQ_INSTALL
,

68 
MPC5200_FATAL_TM27_IRQ_INSTALL
,

69 
MPC5200_FATAL_MSCAN_A_INIT
,

70 
MPC5200_FATAL_MSCAN_B_INIT
,

71 
MPC5200_FATAL_MSCAN_A_SET_MODE
,

72 
MPC5200_FATAL_MSCAN_B_SET_MODE
,

73 
MPC5200_FATAL_ATA_DISK_IO_INIT
,

74 
MPC5200_FATAL_ATA_DISK_CREATE
,

75 
MPC5200_FATAL_ATA_DMA_SINGLE_IRQ_INSTALL
,

76 
MPC5200_FATAL_ATA_LOCK_CREATE
,

77 
MPC5200_FATAL_ATA_LOCK_DESTROY
,

80 
MPC55XX_FATAL_FMPLL_LOCK
 = 
BSP_FATAL_CODE_BLOCK
(5),

81 
MPC55XX_FATAL_CLOCK_EMIOS_IRQ_INSTALL
,

82 
MPC55XX_FATAL_CLOCK_EMIOS_PRESCALER
,

83 
MPC55XX_FATAL_CLOCK_EMIOS_INTERVAL
,

84 
MPC55XX_FATAL_CLOCK_PIT_IRQ_INSTALL
,

85 
MPC55XX_FATAL_CONSOLE_GENERIC_COUNT
,

86 
MPC55XX_FATAL_CONSOLE_GENERIC_REGISTER
,

87 
MPC55XX_FATAL_CONSOLE_GENERIC_REGISTER_CONSOLE
,

88 
MPC55XX_FATAL_CONSOLE_ESCI_BAUD
,

89 
MPC55XX_FATAL_CONSOLE_ESCI_ATTRIBUTES
,

90 
MPC55XX_FATAL_CONSOLE_ESCI_IRQ_INSTALL
,

91 
MPC55XX_FATAL_CONSOLE_LINFLEX_BAUD
,

92 
MPC55XX_FATAL_CONSOLE_LINFLEX_ATTRIBUTES
,

93 
MPC55XX_FATAL_CONSOLE_LINFLEX_RX_IRQ_INSTALL
,

94 
MPC55XX_FATAL_CONSOLE_LINFLEX_TX_IRQ_INSTALL
,

95 
MPC55XX_FATAL_CONSOLE_LINFLEX_ERR_IRQ_INSTALL
,

96 
MPC55XX_FATAL_CONSOLE_LINFLEX_RX_IRQ_REMOVE
,

97 
MPC55XX_FATAL_CONSOLE_LINFLEX_TX_IRQ_REMOVE
,

98 
MPC55XX_FATAL_CONSOLE_LINFLEX_ERR_IRQ_REMOVE
,

99 
MPC55XX_FATAL_EDMA_IRQ_INSTALL
,

100 
MPC55XX_FATAL_EDMA_IRQ_REMOVE
,

103 
MRM332_FATAL_SPURIOUS_INTERRUPT
 = 
BSP_FATAL_CODE_BLOCK
(6),

106 
PPC_FATAL_EXCEPTION_INITIALIZATION
 = 
BSP_FATAL_CODE_BLOCK
(7),

109 
DWMAC_FATAL_TOO_MANY_RBUFS_CONFIGURED
 = 
BSP_FATAL_CODE_BLOCK
(8),

112 
ARM_FATAL_L2C_310_UNEXPECTED_ID
 = 
BSP_FATAL_CODE_BLOCK
(9),

113 
ARM_FATAL_L2C_310_UNEXPECTED_NUM_WAYS
,

114 
ARM_FATAL_L2C_310_EXCLUSIVE_CONFIG
,

117 
QORIQ_FATAL_SMP_IPI_HANDLER_INSTALL
 = 
BSP_FATAL_CODE_BLOCK
(10)

118 } 
	tb•_Áèl_code
;

120 
RTEMS_COMPILER_NO_RETURN_ATTRIBUTE
 
ölöe
 

121 
b•_Áèl
–
b•_Áèl_code
 
code
 )

123 
πems_Áèl
–
RTEMS_FATAL_SOURCE_BSP
, (
πems_Áèl_code
Ë
code
 );

126 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/irq-generic.h

25 #i‚de‡
LIBBSP_SHARED_IRQ_GENERIC_H


26 
	#LIBBSP_SHARED_IRQ_GENERIC_H


	)

28 
	~<°dboﬁ.h
>

30 
	~<πems/úq-exãnsi⁄.h
>

32 #ifde‡
RTEMS_SMP


33 
	~<πems/sc‹e/©omic.h
>

36 
	~<b•/úq.h
>

38 #ifde‡
__˝lu•lus


42 #i‡!
deföed
(
BSP_INTERRUPT_VECTOR_MIN
Ë|| !deföed(
BSP_INTERRUPT_VECTOR_MAX
) || (BSP_INTERRUPT_VECTOR_MAX + 1) < BSP_INTERRUPT_VECTOR_MIN

46 #i‡
deföed
(
BSP_INTERRUPT_USE_INDEX_TABLE
Ë&& !deföed(
BSP_INTERRUPT_HANDLER_TABLE_SIZE
)

50 #i‡
deföed
(
BSP_INTERRUPT_NO_HEAP_USAGE
Ë&& !deföed(
BSP_INTERRUPT_USE_INDEX_TABLE
)

54 
	#BSP_INTERRUPT_VECTOR_NUMBER
 \

55 (
BSP_INTERRUPT_VECTOR_MAX
 - 
BSP_INTERRUPT_VECTOR_MIN
 + 1)

	)

57 #i‚de‡
BSP_INTERRUPT_HANDLER_TABLE_SIZE


58 
	#BSP_INTERRUPT_HANDLER_TABLE_SIZE
 
BSP_INTERRUPT_VECTOR_NUMBER


	)

62 #ifde‡
RTEMS_SMP


63 
	#b•_öãºu±_dißbÀ
(
Àvñ
Ëdÿ{ (ËÀvñ; } 0)

	)

64 
	#b•_öãºu±_íabÀ
(
Àvñ
Ëdÿ{ } 0)

	)

65 
	#b•_öãºu±_„n˚
(
‹dî
Ë
	`_Atomic_Fí˚
(‹dî)

	)

67 
	#b•_öãºu±_dißbÀ
(
Àvñ
Ë
	`πems_öãºu±_dißbÀ
÷evñ)

	)

68 
	#b•_öãºu±_íabÀ
(
Àvñ
Ë
	`πems_öãºu±_íabÀ
÷evñ)

	)

69 
	#b•_öãºu±_„n˚
(
‹dî
Ëdÿ{ } 0)

	)

72 
	sb•_öãºu±_h™dÀr_íåy
 {

73 
πems_öãºu±_h™dÀr
 
h™dÀr
;

74 *
¨g
;

75 c⁄° *
öfo
;

76 
b•_öãºu±_h™dÀr_íåy
 *
√xt
;

79 
b•_öãºu±_h™dÀr_íåy
 
	tb•_öãºu±_h™dÀr_íåy
;

81 
b•_öãºu±_h™dÀr_íåy
 
b•_öãºu±_h™dÀr_èbÀ
 [];

83 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


84 #i‡
BSP_INTERRUPT_HANDLER_TABLE_SIZE
 < 0x100

85 
uöt8_t
 
	tb•_öãºu±_h™dÀr_ödex_ty≥
;

86 #ñi‡
BSP_INTERRUPT_HANDLER_TABLE_SIZE
 < 0x10000

87 
uöt16_t
 
	tb•_öãºu±_h™dÀr_ödex_ty≥
;

89 
uöt32_t
 
	tb•_öãºu±_h™dÀr_ödex_ty≥
;

91 
b•_öãºu±_h™dÀr_ödex_ty≥
 
b•_öãºu±_h™dÀr_ödex_èbÀ
 [];

94 
ölöe
 
πems_ve˘‹_numbî
 
b•_öãºu±_h™dÀr_ödex
(

95 
πems_ve˘‹_numbî
 
ve˘‹


98 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


99  
	gb•_öãºu±_h™dÀr_ödex_èbÀ
 [
ve˘‹
 - 
BSP_INTERRUPT_VECTOR_MIN
];

101  
	gve˘‹
 - 
	gBSP_INTERRUPT_VECTOR_MIN
;

155 #ifde‡
BSP_INTERRUPT_CUSTOM_VALID_VECTOR


156 
boﬁ
 
b•_öãºu±_is_vÆid_ve˘‹
(
πems_ve˘‹_numbî
 
ve˘‹
);

162 
ölöe
 
boﬁ
 
b•_öãºu±_is_vÆid_ve˘‹
(
πems_ve˘‹_numbî
 
ve˘‹
)

164  (
	gπems_ve˘‹_numbî
Ë
	gBSP_INTERRUPT_VECTOR_MIN
 <
ve˘‹


165 && 
ve˘‹
 <(
πems_ve˘‹_numbî
Ë
BSP_INTERRUPT_VECTOR_MAX
;

178 
b•_öãºu±_h™dÀr_deÁu…
(
πems_ve˘‹_numbî
 
ve˘‹
);

192 
b•_öãºu±_öôülize
();

209 
πems_°©us_code
 
b•_öãºu±_Ácûôy_öôülize
();

225 
πems_°©us_code
 
b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
);

241 
πems_°©us_code
 
b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
);

253 
ölöe
 
b•_öãºu±_h™dÀr_di•©ch
(
πems_ve˘‹_numbî
 
ve˘‹
)

255 i‡(
b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

256 c⁄° 
b•_öãºu±_h™dÀr_íåy
 *
	ge
 =

257 &
b•_öãºu±_h™dÀr_èbÀ
 [
b•_öãºu±_h™dÀr_ödex
(
ve˘‹
)];

260 
πems_öãºu±_h™dÀr
 
	gh™dÀr
;

261 *
	g¨g
;

263 
	g¨g
 = 
e
->
¨g
;

264 
b•_öãºu±_„n˚
(
ATOMIC_ORDER_ACQUIRE
);

265 
	gh™dÀr
 = 
e
->
h™dÀr
;

266 (*
	gh™dÀr
)(
	g¨g
);

268 
	ge
 = 
e
->
√xt
;

269 } 
	ge
 !
NULL
);

277 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/irq-info.h

22 #i‚de‡
LIBBSP_SHARED_IRQ_INFO_H


23 
	#LIBBSP_SHARED_IRQ_INFO_H


	)

25 
	~<πems/shñl.h
>

26 
	~<πems/b•Io.h
>

28 #ifde‡
__˝lu•lus


36 
b•_öãºu±_ªp‹t_wôh_∂ugö
(

37 *
c⁄ãxt
,

38 
πems_¥ötk_∂ugö_t
 
¥öt


44 
b•_öãºu±_ªp‹t
();

49 
πems_shñl_cmd_â
 
b•_öãºu±_shñl_comm™d
;

53 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/irq.h

24 #i‚de‡
LIBBSP_SHARED_IRQ_CONFIG_H


25 
	#LIBBSP_SHARED_IRQ_CONFIG_H


	)

27 
	~<°döt.h
>

32 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

37 
	#BSP_INTERRUPT_VECTOR_MAX
 0

	)

47 #unde‡
BSP_INTERRUPT_USE_INDEX_TABLE


55 #unde‡
BSP_INTERRUPT_NO_HEAP_USAGE


57 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


61 
	#BSP_INTERRUPT_HANDLER_TABLE_SIZE
 0

	)

66 
uöt8_t
 
	tb•_öãºu±_h™dÀr_ödex_ty≥
;

75 #unde‡
BSP_INTERRUPT_CUSTOM_VALID_VECTOR


	@src/lib/libbsp/shared/include/mm.h

18 #i‚de‡
__LIBBSP_MM_H


19 
	#__LIBBSP_MM_H


	)

21 
	~<°döt.h
>

22 
	~<°dlib.h
>

24 #ifde‡
__˝lu•lus


36 
b•_mem‹y_m™agemít_öôülize
();

38 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/stackalloc.h

23 #i‚de‡
LIBBSP_SHARED_STACK_ALLOC_H


24 
	#LIBBSP_SHARED_STACK_ALLOC_H


	)

26 
	~<°ddef.h
>

27 
	~<°döt.h
>

29 #ifde‡
__˝lu•lus


58 
b•_°ack_Æloˇã_öô
(
size_t
 
°ack_•a˚_size
);

66 *
b•_°ack_Æloˇã
(
size_t
 
size
);

71 
b•_°ack_‰ì
(*
°ack
);

76 
	#CONFIGURE_TASK_STACK_ALLOCATOR_INIT
 
b•_°ack_Æloˇã_öô


	)

81 
	#CONFIGURE_TASK_STACK_ALLOCATOR
 
b•_°ack_Æloˇã


	)

86 
	#CONFIGURE_TASK_STACK_DEALLOCATOR
 
b•_°ack_‰ì


	)

90 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/tm27.h

15 #i‚de‡
_RTEMS_TMTEST27


19 #i‚de‡
__tm27_h


20 
	#__tm27_h


	)

30 
	#MUST_WAIT_FOR_INTERRUPT
 0

	)

32 
In°Æl_tm27_ve˘‹
((*
_h™dÀr
)())

34 
	}
}

36 
	#Cau£_tm27_öå
() \

39 } 0)

	)

42 
	#CÀ¨_tm27_öå
() \

45 } 0)

	)

47 
	#Lowî_tm27_öå
() \

50 } 0)

	)

	@src/lib/libbsp/shared/include/u-boot.h

23 #i‚de‡
LIBBSP_SHARED_U_BOOT_H


24 
	#LIBBSP_SHARED_U_BOOT_H


	)

26 
	~<b•/u-boŸ-c⁄fig.h
>

28 
	~<sys/ty≥s.h
>

29 
	~<°döt.h
>

31 #ifde‡
U_BOOT_64_BIT_PHYS_SIZE


32 
uöt64_t
 
	tphys_size_t
;

34 
	tphys_size_t
;

37 #ifde‡
U_BOOT_GENERIC_BOARD_INFO


38 
	~<b•/u-boŸ-gíîic-bﬂrd-öfo.h
>

40 
	~<b•/u-boŸ-bﬂrd-öfo.h
>

43 #ifde‡
__˝lu•lus


47 
bd_t
 
b•_uboŸ_bﬂrd_öfo
;

57 
b•_uboŸ_c›y_bﬂrd_öfo
(c⁄° 
bd_t
 *
§c
);

60 
dumpUBoŸBDInfo
(
bd_t
 *
u
);

62 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/uart-output-char.h

22 #i‚de‡
LIBBSP_SHARED_UART_OUTPUT_CHAR_H


23 
	#LIBBSP_SHARED_UART_OUTPUT_CHAR_H


	)

25 
	~<°döt.h
>

27 
	~<b•.h
>

29 
	#CONSOLE_RBR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x00))

	)

30 
	#CONSOLE_THR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x00))

	)

31 
	#CONSOLE_DLL
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x00))

	)

32 
	#CONSOLE_DLM
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x04))

	)

33 
	#CONSOLE_IER
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x04))

	)

34 
	#CONSOLE_IIR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x08))

	)

35 
	#CONSOLE_FCR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x08))

	)

36 
	#CONSOLE_LCR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x0C))

	)

37 
	#CONSOLE_MCR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x10))

	)

38 
	#CONSOLE_LSR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x14))

	)

39 
	#CONSOLE_SCR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x1C))

	)

40 
	#CONSOLE_ACR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x20))

	)

41 
	#CONSOLE_ICR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x24))

	)

42 
	#CONSOLE_FDR
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x28))

	)

43 
	#CONSOLE_TER
 (*(vﬁ©ûê
uöt32_t
 *Ë(
BSP_CONSOLE_UART_BASE
 + 0x30))

	)

45 
	#CONSOLE_LSR_RDR
 0x1

	)

46 
	#CONSOLE_LSR_THRE
 0x20

	)

47 
	#CONSOLE_LSR_TEMT
 0x40

	)

49 
	#BSP_CONSOLE_UART_INIT
(
dŒ
) \

51 
CONSOLE_LCR
 = 0x00; \

52 
CONSOLE_IER
 = 0x00; \

53 
CONSOLE_LCR
 = 0x80; \

54 
CONSOLE_DLL
 = (
dŒ
 & 0xFF); \

55 
CONSOLE_DLM
 = (
dŒ
 >> 8); \

56 
CONSOLE_LCR
 = 0x03; \

57 
CONSOLE_FCR
 = 0x07; \

58 } 0)

	)

	@src/lib/libbsp/shared/include/utility.h

23 #i‚de‡
LIBCPU_SHARED_UTILITY_H


24 
	#LIBCPU_SHARED_UTILITY_H


	)

26 
	~<°döt.h
>

28 
	#BSP_BIT8
(
bô
) \

29 ((
uöt8_t
Ë(((Ë1Ë<< (
bô
)))

	)

31 
	#BSP_MSK8
(
fú°_bô
, 
œ°_bô
) \

32 ((
uöt8_t
Ë((
	`BSP_BIT8
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

34 
	#BSP_FLD8
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

35 ((
uöt8_t
) \

36 ((((Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`BSP_MSK8
(fú°_bô, 
œ°_bô
)))

	)

38 
	#BSP_FLD8GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

39 ((
uöt8_t
Ë(((
ªg
Ë& 
	`BSP_MSK8
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

41 
	#BSP_FLD8SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

42 ((
uöt8_t
Ë(((
ªg
Ë& ~
	`BSP_MSK8
(
fú°_bô
, 
œ°_bô
)) \

43 | 
	`BSP_FLD8
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

45 
	#BSP_BIT16
(
bô
) \

46 ((
uöt16_t
Ë(((Ë1Ë<< (
bô
)))

	)

48 
	#BSP_MSK16
(
fú°_bô
, 
œ°_bô
) \

49 ((
uöt16_t
Ë((
	`BSP_BIT16
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

51 
	#BSP_FLD16
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

52 ((
uöt16_t
) \

53 ((((Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`BSP_MSK16
(fú°_bô, 
œ°_bô
)))

	)

55 
	#BSP_FLD16GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

56 ((
uöt16_t
Ë(((
ªg
Ë& 
	`BSP_MSK16
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

58 
	#BSP_FLD16SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

59 ((
uöt16_t
Ë(((
ªg
Ë& ~
	`BSP_MSK16
(
fú°_bô
, 
œ°_bô
)) \

60 | 
	`BSP_FLD16
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

62 
	#BSP_BIT32
(
bô
) \

63 ((
uöt32_t
Ë(((uöt32_tË1Ë<< (
bô
)))

	)

65 
	#BSP_MSK32
(
fú°_bô
, 
œ°_bô
) \

66 ((
uöt32_t
Ë((
	`BSP_BIT32
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

68 
	#BSP_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

69 ((
uöt32_t
) \

70 ((((
uöt32_t
Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`BSP_MSK32
(fú°_bô, 
œ°_bô
)))

	)

72 
	#BSP_FLD32GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

73 ((
uöt32_t
Ë(((
ªg
Ë& 
	`BSP_MSK32
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

75 
	#BSP_FLD32SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

76 ((
uöt32_t
Ë(((
ªg
Ë& ~
	`BSP_MSK32
(
fú°_bô
, 
œ°_bô
)) \

77 | 
	`BSP_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

79 
	#BSP_BIT64
(
bô
) \

80 ((
uöt64_t
Ë(((uöt64_tË1Ë<< (
bô
)))

	)

82 
	#BSP_MSK64
(
fú°_bô
, 
œ°_bô
) \

83 ((
uöt64_t
Ë((
	`BSP_BIT64
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

85 
	#BSP_FLD64
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

86 ((
uöt64_t
) \

87 ((((
uöt64_t
Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`BSP_MSK64
(fú°_bô, 
œ°_bô
)))

	)

89 
	#BSP_FLD64GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

90 ((
uöt64_t
Ë(((
ªg
Ë& 
	`BSP_MSK64
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

92 
	#BSP_FLD64SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

93 ((
uöt64_t
Ë(((
ªg
Ë& ~
	`BSP_MSK64
(
fú°_bô
, 
œ°_bô
)) \

94 | 
	`BSP_FLD64
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

96 
	#BSP_BBIT8
(
bô
) \

97 
	`BSP_BIT8
(7 - (
bô
))

	)

99 
	#BSP_BMSK8
(
fú°_bô
, 
œ°_bô
) \

100 
	`BSP_MSK8
(7 - (
œ°_bô
), 7 - (
fú°_bô
))

	)

102 
	#BSP_BFLD8
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

103 
	`BSP_FLD8
(
vÆ
, 7 - (
œ°_bô
), 7 - (
fú°_bô
))

	)

105 
	#BSP_BFLD8GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

106 
	`BSP_FLD8GET
(
ªg
, 7 - (
œ°_bô
), 7 - (
fú°_bô
))

	)

108 
	#BSP_BFLD8SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

109 
	`BSP_FLD8SET
(
ªg
, 
vÆ
, 7 - (
œ°_bô
), 7 - (
fú°_bô
))

	)

111 
	#BSP_BBIT16
(
bô
) \

112 
	`BSP_BIT16
(15 - (
bô
))

	)

114 
	#BSP_BMSK16
(
fú°_bô
, 
œ°_bô
) \

115 
	`BSP_MSK16
(15 - (
œ°_bô
), 15 - (
fú°_bô
))

	)

117 
	#BSP_BFLD16
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

118 
	`BSP_FLD16
(
vÆ
, 15 - (
œ°_bô
), 15 - (
fú°_bô
))

	)

120 
	#BSP_BFLD16GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

121 
	`BSP_FLD16GET
(
ªg
, 15 - (
œ°_bô
), 15 - (
fú°_bô
))

	)

123 
	#BSP_BFLD16SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

124 
	`BSP_FLD16SET
(
ªg
, 
vÆ
, 15 - (
œ°_bô
), 15 - (
fú°_bô
))

	)

126 
	#BSP_BBIT32
(
bô
) \

127 
	`BSP_BIT32
(31 - (
bô
))

	)

129 
	#BSP_BMSK32
(
fú°_bô
, 
œ°_bô
) \

130 
	`BSP_MSK32
(31 - (
œ°_bô
), 31 - (
fú°_bô
))

	)

132 
	#BSP_BFLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

133 
	`BSP_FLD32
(
vÆ
, 31 - (
œ°_bô
), 31 - (
fú°_bô
))

	)

135 
	#BSP_BFLD32GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

136 
	`BSP_FLD32GET
(
ªg
, 31 - (
œ°_bô
), 31 - (
fú°_bô
))

	)

138 
	#BSP_BFLD32SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

139 
	`BSP_FLD32SET
(
ªg
, 
vÆ
, 31 - (
œ°_bô
), 31 - (
fú°_bô
))

	)

141 
	#BSP_BBIT64
(
bô
) \

142 
	`BSP_BIT64
(63 - (
bô
))

	)

144 
	#BSP_BMSK64
(
fú°_bô
, 
œ°_bô
) \

145 
	`BSP_MSK64
(63 - (
œ°_bô
), 63 - (
fú°_bô
))

	)

147 
	#BSP_BFLD64
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

148 
	`BSP_FLD64
(
vÆ
, 63 - (
œ°_bô
), 63 - (
fú°_bô
))

	)

150 
	#BSP_BFLD64GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

151 
	`BSP_FLD64GET
(
ªg
, 63 - (
œ°_bô
), 63 - (
fú°_bô
))

	)

153 
	#BSP_BFLD64SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

154 
	`BSP_FLD64SET
(
ªg
, 
vÆ
, 63 - (
œ°_bô
), 63 - (
fú°_bô
))

	)

	@src/lib/libbsp/shared/include/zilog/z8036.h

22 #i‚de‡
_RTEMS_ZILOG_Z8036_H


23 
	#_RTEMS_ZILOG_Z8036_H


	)

25 #ifde‡
__˝lu•lus


31 
	#Z8036
–
±r
 ) ((vﬁ©ûê
z8036_m≠
 *)’å))

	)

33 
	#Z8x36_STATE0
 ( 
z8036
 ) \

34 { }

	)

37 
	#Z8x36_WRITE
–
z8036
, 
ªg
, 
d©a
 ) \

38 (
	`Z8036
(
z8036
))->
ªg
 = (
d©a
)

	)

41 
	#Z8x36_READ
–
z8036
, 
ªg
, 
d©a
 ) \

42 (
	`Z8036
(
z8036
))->
ªg
 = (
d©a
)

	)

46 
	sz8036_m≠
 {

48 
uöt8_t
 
MASTER_INTR
;

49 
uöt8_t
 
MASTER_CFG
;

50 
uöt8_t
 
PORTA_VECTOR
;

51 
uöt8_t
 
PORTB_VECTOR
;

52 
uöt8_t
 
CNT_TMR_VECTOR
;

53 
uöt8_t
 
PORTC_DATA_POLARITY
;

54 
uöt8_t
 
PORTC_DIRECTION
;

55 
uöt8_t
 
PORTC_SPECIAL_IO_CTL
;

57 
uöt8_t
 
PORTA_CMD_STATUS
;

58 
uöt8_t
 
PORTB_CMD_STATUS
;

59 
uöt8_t
 
CT1_CMD_STATUS
;

60 
uöt8_t
 
CT2_CMD_STATUS
;

61 
uöt8_t
 
CT3_CMD_STATUS
;

62 
uöt8_t
 
PORTA_DATA
;

63 
uöt8_t
 
PORTB_DATA
;

64 
uöt8_t
 
PORTC_DATA
;

66 
uöt8_t
 
CT1_CUR_CNT_MSB
;

67 
uöt8_t
 
CT1_CUR_CNT_LSB
;

68 
uöt8_t
 
CT2_CUR_CNT_MSB
;

69 
uöt8_t
 
CT2_CUR_CNT_LSB
;

70 
uöt8_t
 
CT3_CUR_CNT_MSB
;

71 
uöt8_t
 
CT3_CUR_CNT_LSB
;

72 
uöt8_t
 
CT1_TIME_CONST_MSB
;

73 
uöt8_t
 
CT1_TIME_CONST_LSB
;

74 
uöt8_t
 
CT2_TIME_CONST_MSB
;

75 
uöt8_t
 
CT2_TIME_CONST_LSB
;

76 
uöt8_t
 
CT3_TIME_CONST_MSB
;

77 
uöt8_t
 
CT3_TIME_CONST_LSB
;

78 
uöt8_t
 
CT1_MODE_SPEC
;

79 
uöt8_t
 
CT2_MODE_SPEC
;

80 
uöt8_t
 
CT3_MODE_SPEC
;

81 
uöt8_t
 
CURRENT_VECTOR
;

83 
uöt8_t
 
PORTA_MODE
;

84 
uöt8_t
 
PORTA_HANDSHAKE
;

85 
uöt8_t
 
PORTA_DATA_POLARITY
;

86 
uöt8_t
 
PORTA_DIRECTION
;

87 
uöt8_t
 
PORTA_SPECIAL_IO_CTL
;

88 
uöt8_t
 
PORTA_PATT_POLARITY
;

89 
uöt8_t
 
PORTA_PATT_TRANS
;

90 
uöt8_t
 
PORTA_PATT_MASK
;

92 
uöt8_t
 
PORTB_MODE
;

93 
uöt8_t
 
PORTB_HANDSHAKE
;

94 
uöt8_t
 
PORTB_DATA_POLARITY
;

95 
uöt8_t
 
PORTB_DIRECTION
;

96 
uöt8_t
 
PORTB_SPECIAL_IO_CTL
;

97 
uöt8_t
 
PORTB_PATT_POLARITY
;

98 
uöt8_t
 
PORTB_PATT_TRANS
;

99 
uöt8_t
 
PORTB_PATT_MASK
;

102 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/include/zilog/z8530.h

19 #i‚de‡
_RTEMS_ZILOG_Z8530_H


20 
	#_RTEMS_ZILOG_Z8530_H


	)

22 #ifde‡
__˝lu•lus


28 
	#VOL8
–
±r
 ) ((vﬁ©ûê
uöt8_t
 *)’å))

	)

30 
	#Z8x30_STATE0
 ( 
z8530
 ) \

31 { *
g¨bage
; \

32 (
g¨bage
Ë*(
	`VOL8
(
z8530
)) \

33 }

	)

35 
	#Z8x30_WRITE_CONTROL
–
z8530
, 
ªg
, 
d©a
 ) \

36 *(
	`VOL8
(
z8530
)Ë(
ªg
); \

37 *(
	`VOL8
(
z8530
)Ë(
d©a
)

	)

39 
	#Z8x30_READ_CONTROL
–
z8530
, 
ªg
, 
d©a
 ) \

40 *(
	`VOL8
(
z8530
)Ë(
ªg
); \

41 (
d©a
Ë*(
	`VOL8
(
z8530
))

	)

43 
	#Z8x30_WRITE_DATA
–
z8530
, 
d©a
 ) \

44 *(
	`VOL8
(
z8530
)Ë(
d©a
);

	)

46 
	#Z8x30_READ_DATA
–
z8530
, 
d©a
 ) \

47 (
d©a
Ë*(
	`VOL8
(
z8530
));

	)

52 
	#RR_0_TX_BUFFER_EMPTY
 0x04

	)

53 
	#RR_0_RX_DATA_AVAILABLE
 0x01

	)

57 
	#RR_0
 0x00

	)

58 
	#RR_1
 0x01

	)

59 
	#RR_2
 0x02

	)

60 
	#RR_3
 0x03

	)

61 
	#RR_4
 0x04

	)

62 
	#RR_5
 0x05

	)

63 
	#RR_6
 0x06

	)

64 
	#RR_7
 0x07

	)

65 
	#RR_8
 0x08

	)

66 
	#RR_9
 0x09

	)

67 
	#RR_10
 0x0A

	)

68 
	#RR_11
 0x0B

	)

69 
	#RR_12
 0x0C

	)

70 
	#RR_13
 0x0D

	)

71 
	#RR_14
 0x0E

	)

72 
	#RR_15
 0x0F

	)

76 
	#WR_0
 0x00

	)

77 
	#WR_1
 0x01

	)

78 
	#WR_2
 0x02

	)

79 
	#WR_3
 0x03

	)

80 
	#WR_4
 0x04

	)

81 
	#WR_5
 0x05

	)

82 
	#WR_6
 0x06

	)

83 
	#WR_7
 0x07

	)

84 
	#WR_8
 0x08

	)

85 
	#WR_9
 0x09

	)

86 
	#WR_10
 0x0A

	)

87 
	#WR_11
 0x0B

	)

88 
	#WR_12
 0x0C

	)

89 
	#WR_13
 0x0D

	)

90 
	#WR_14
 0x0E

	)

91 
	#WR_15
 0x0F

	)

93 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/sbrk.c

17 
	~<πems.h
>

19 
	~<sig«l.h
>

20 
	~<î∫o.h
>

21 
	~<sys/ty≥s.h
>

22 
	~<uni°d.h
>

24 * 
	$sbrk
(
±rdiff_t
 
ö¸
)

26 
î∫o
 = 
ENOMEM
;

28 
	}
}

	@src/lib/libbsp/shared/setvec.c

27 
	~<b•.h
>

29 
πems_i§_íåy
 
	$£t_ve˘‹
(

30 
πems_i§_íåy
 
h™dÀr
,

31 
πems_ve˘‹_numbî
 
ve˘‹
,

32 
ty≥


35 
πems_i§_íåy
 
¥evious_i§
;

37 i‡–
ty≥
 )

38 
	`πems_öãºu±_ˇtch
–
h™dÀr
, 
ve˘‹
, &
¥evious_i§
 );

40 
	`_CPU_ISR_ö°Æl_øw_h™dÀr
–
ve˘‹
, 
h™dÀr
, (*)&
¥evious_i§
 );

42  
¥evious_i§
;

43 
	}
}

	@src/lib/libbsp/shared/src/bsp-uboot-board-info.c

15 
	~<b•/u-boŸ.h
>

17 #i‚de‡
U_BOOT_BOARD_INFO_TEXT_SECTION


18 
	#U_BOOT_BOARD_INFO_TEXT_SECTION


	)

21 #i‚de‡
U_BOOT_BOARD_INFO_DATA_SECTION


22 
	#U_BOOT_BOARD_INFO_DATA_SECTION


	)

25 
U_BOOT_BOARD_INFO_DATA_SECTION
 
bd_t
 
	gb•_uboŸ_bﬂrd_öfo
;

27 
U_BOOT_BOARD_INFO_TEXT_SECTION
 
	$b•_uboŸ_c›y_bﬂrd_öfo
(c⁄° 
bd_t
 *
§c
)

29 c⁄° *
s
 = (c⁄° *Ë
§c
;

30 *
d
 = (*Ë&
b•_uboŸ_bﬂrd_öfo
;

31 
i
 = 0;

32 
n
 = (*
§c
) / ();

34 
i
 = 0; i < 
n
; ++i) {

35 
d
 [
i
] = 
s
 [i];

37 
	}
}

	@src/lib/libbsp/shared/src/irq-default-handler.c

15 
	~<πems/b•Io.h
>

17 
	~<b•/úq-gíîic.h
>

19 
	$b•_öãºu±_h™dÀr_deÁu…
(
πems_ve˘‹_numbî
 
ve˘‹
)

21 
	`¥ötk
("•uriou†öãºu±: %u\n", 
ve˘‹
);

22 
	}
}

	@src/lib/libbsp/shared/src/irq-generic.c

25 
	~<b•/úq-gíîic.h
>

26 
	~<b•/Áèl.h
>

28 
	~<°dlib.h
>

30 
	~<πems/sc‹e/≠imuãx.h
>

31 
	~<πems/sc‹e/sys°©e.h
>

33 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


34 
b•_öãºu±_h™dÀr_ödex_ty≥
 
	gb•_öãºu±_h™dÀr_ödex_èbÀ


35 [
BSP_INTERRUPT_VECTOR_NUMBER
];

38 
b•_öãºu±_h™dÀr_íåy
 
	gb•_öãºu±_h™dÀr_èbÀ


39 [
BSP_INTERRUPT_HANDLER_TABLE_SIZE
];

42 
uöt8_t
 
	gb•_öãºu±_h™dÀr_unique_èbÀ


43 [(
BSP_INTERRUPT_HANDLER_TABLE_SIZE
 + 7 + 1) / 8];

45 
	$b•_öãºu±_h™dÀr_em±y
(*
¨g
)

47 
πems_ve˘‹_numbî
 
ve˘‹
 = (πems_ve˘‹_numbîË
¨g
;

49 
	`b•_öãºu±_h™dÀr_deÁu…
(
ve˘‹
);

50 
	}
}

52 #ifde‡
RTEMS_SMP


53 
	$b•_öãºu±_h™dÀr_do_nŸhög
(*
¨g
)

55 (Ë
¨g
;

56 
	}
}

59 
ölöe
 
boﬁ
 
	$b•_öãºu±_is_h™dÀr_unique
(
πems_ve˘‹_numbî
 
ödex
)

61 
πems_ve˘‹_numbî
 
i
 = 
ödex
 / 8;

62 
πems_ve˘‹_numbî
 
s
 = 
ödex
 % 8;

63  (
b•_öãºu±_h™dÀr_unique_èbÀ
 [
i
] >> 
s
) & 0x1;

64 
	}
}

66 
ölöe
 
	$b•_öãºu±_£t_h™dÀr_unique
(

67 
πems_ve˘‹_numbî
 
ödex
,

68 
boﬁ
 
unique


71 
πems_ve˘‹_numbî
 
i
 = 
ödex
 / 8;

72 
πems_ve˘‹_numbî
 
s
 = 
ödex
 % 8;

73 i‡(
unique
) {

74 
b•_öãºu±_h™dÀr_unique_èbÀ
 [
i
] |(
uöt8_t
Ë(0x1U << 
s
);

76 
b•_öãºu±_h™dÀr_unique_èbÀ
 [
i
] &(
uöt8_t
Ë~(0x1U << 
s
);

78 
	}
}

80 
ölöe
 
boﬁ
 
	$b•_öãºu±_is_öôülized
()

82  
	`b•_öãºu±_is_h™dÀr_unique
(
BSP_INTERRUPT_HANDLER_TABLE_SIZE
);

83 
	}
}

85 
ölöe
 
	$b•_öãºu±_£t_öôülized
()

87 
	`b•_öãºu±_£t_h™dÀr_unique
(
BSP_INTERRUPT_HANDLER_TABLE_SIZE
, 
åue
);

88 
	}
}

90 
ölöe
 
boﬁ
 
	$b•_öãºu±_is_em±y_h™dÀr_íåy
(

91 c⁄° 
b•_öãºu±_h™dÀr_íåy
 *
e


94  
e
->
h™dÀr
 =
b•_öãºu±_h™dÀr_em±y
;

95 
	}
}

97 
ölöe
 
	$b•_öãºu±_˛ór_h™dÀr_íåy
(

98 
b•_öãºu±_h™dÀr_íåy
 *
e
,

99 
πems_ve˘‹_numbî
 
ve˘‹


102 
e
->
h™dÀr
 = 
b•_öãºu±_h™dÀr_em±y
;

103 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

104 
e
->
¨g
 = (*Ë
ve˘‹
;

105 
e
->
öfo
 = 
NULL
;

106 
e
->
√xt
 = 
NULL
;

107 
	}
}

109 
ölöe
 
boﬁ
 
	$b•_öãºu±_Æloˇã_h™dÀr_ödex
(

110 
πems_ve˘‹_numbî
 
ve˘‹
,

111 
πems_ve˘‹_numbî
 *
ödex


114 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


115 
πems_ve˘‹_numbî
 
i
 = 0;

118 
i
 = 1; i < 
BSP_INTERRUPT_HANDLER_TABLE_SIZE
; ++i) {

119 c⁄° 
b•_öãºu±_h™dÀr_íåy
 *
e
 = &
b•_öãºu±_h™dÀr_èbÀ
 [
i
];

120 i‡(
	`b•_öãºu±_is_em±y_h™dÀr_íåy
(
e
)) {

121 *
ödex
 = 
i
;

122  
åue
;

126  
Ál£
;

128 *
ödex
 = 
ve˘‹
;

129  
åue
;

131 
	}
}

133 
b•_öãºu±_h™dÀr_íåy
 *
	$b•_öãºu±_Æloˇã_h™dÀr_íåy
()

135 #ifde‡
BSP_INTERRUPT_NO_HEAP_USAGE


136 
πems_ve˘‹_numbî
 
ödex
 = 0;

137 i‡(
	`b•_öãºu±_Æloˇã_h™dÀr_ödex
(0, &
ödex
)) {

138  &
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
];

140  
NULL
;

143  
	`mÆloc
((
b•_öãºu±_h™dÀr_íåy
));

145 
	}
}

147 
	$b•_öãºu±_‰ì_h™dÀr_íåy
(
b•_öãºu±_h™dÀr_íåy
 *
e
)

149 #ifde‡
BSP_INTERRUPT_NO_HEAP_USAGE


150 
	`b•_öãºu±_˛ór_h™dÀr_íåy
(
e
, 0);

152 
	`‰ì
(
e
);

154 
	}
}

156 
	$b•_öãºu±_lock
()

158 i‡(
	`_Sy°em_°©e_Is_up
(
	`_Sy°em_°©e_Gë
())) {

159 
	`_RTEMS_Lock_Æloˇt‹
();

161 
	}
}

163 
	$b•_öãºu±_u∆ock
()

165 i‡(
	`_Sy°em_°©e_Is_up
(
	`_Sy°em_°©e_Gë
())) {

166 
	`_RTEMS_U∆ock_Æloˇt‹
();

168 
	}
}

170 
	$b•_öãºu±_öôülize
()

172 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

173 
size_t
 
i
 = 0;

176 
i
 = 0; i < 
BSP_INTERRUPT_HANDLER_TABLE_SIZE
; ++i) {

177 
b•_öãºu±_h™dÀr_èbÀ
 [
i
].
h™dÀr
 = 
b•_öãºu±_h™dÀr_em±y
;

178 
b•_öãºu±_h™dÀr_èbÀ
 [
i
].
¨g
 = (*) i;

181 
sc
 = 
	`b•_öãºu±_Ácûôy_öôülize
();

182 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

183 
	`b•_Áèl
(
BSP_FATAL_INTERRUPT_INITIALIZATION
);

186 
	`b•_öãºu±_£t_öôülized
();

187 
	}
}

202 
πems_°©us_code
 
	$b•_öãºu±_h™dÀr_ö°Æl
(

203 
πems_ve˘‹_numbî
 
ve˘‹
,

204 c⁄° *
öfo
,

205 
πems_›ti⁄
 
›ti⁄s
,

206 
πems_öãºu±_h™dÀr
 
h™dÀr
,

207 *
¨g


210 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

211 
πems_öãºu±_Àvñ
 
Àvñ
;

212 
πems_ve˘‹_numbî
 
ödex
 = 0;

213 
b•_öãºu±_h™dÀr_íåy
 *
hód
 = 
NULL
;

214 
boﬁ
 
íabÀ_ve˘‹
 = 
Ál£
;

215 
boﬁ
 
ª∂a˚
 = 
	`RTEMS_INTERRUPT_IS_REPLACE
(
›ti⁄s
);

218 i‡(!
	`b•_öãºu±_is_öôülized
()) {

219  
RTEMS_INTERNAL_ERROR
;

220 } i‡(!
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

221  
RTEMS_INVALID_ID
;

222 } i‡(
h™dÀr
 =
NULL
) {

223  
RTEMS_INVALID_ADDRESS
;

224 } i‡(
	`πems_öãºu±_is_ö_¥ogªss
()) {

225  
RTEMS_CALLED_FROM_ISR
;

229 
	`b•_öãºu±_lock
();

232 
ödex
 = 
	`b•_öãºu±_h™dÀr_ödex
(
ve˘‹
);

235 
hód
 = &
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
];

237 i‡(
	`b•_öãºu±_is_em±y_h™dÀr_íåy
(
hód
)) {

238 i‡(
ª∂a˚
) {

240 
	`b•_öãºu±_u∆ock
();

241  
RTEMS_UNSATISFIED
;

248 i‡(
	`b•_öãºu±_Æloˇã_h™dÀr_ödex
(
ve˘‹
, &
ödex
)) {

249 
	`b•_öãºu±_dißbÀ
(
Àvñ
);

250 
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
].
¨g
 =árg;

251 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

252 
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
].
h™dÀr
 = handler;

253 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


254 
b•_öãºu±_h™dÀr_ödex_èbÀ
 [
ve˘‹
] = 
ödex
;

256 
	`b•_öãºu±_íabÀ
(
Àvñ
);

257 
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
].
öfo
 = info;

260 
	`b•_öãºu±_u∆ock
();

261  
RTEMS_NO_MEMORY
;

265 
íabÀ_ve˘‹
 = 
åue
;

267 
b•_öãºu±_h™dÀr_íåy
 *
cuºít
 = 
hód
;

268 
b•_öãºu±_h™dÀr_íåy
 *
èû
 = 
NULL
;

269 
b•_öãºu±_h™dÀr_íåy
 *
m©ch
 = 
NULL
;

273 !
ª∂a˚


274 && (
	`RTEMS_INTERRUPT_IS_UNIQUE
(
›ti⁄s
)

275 || 
	`b•_öãºu±_is_h™dÀr_unique
(
ödex
))

281 
	`b•_öãºu±_u∆ock
();

282  
RTEMS_RESOURCE_IN_USE
;

291 
m©ch
 =
NULL


292 && (
cuºít
->
h™dÀr
 =h™dÀ∏|| 
ª∂a˚
)

293 && 
cuºít
->
¨g
 ==árg

295 
m©ch
 = 
cuºít
;

297 
èû
 = 
cuºít
;

298 
cuºít
 = cuºít->
√xt
;

299 } 
cuºít
 !
NULL
);

301 i‡(
ª∂a˚
) {

303 i‡(
m©ch
 =
NULL
) {

304 
	`b•_öãºu±_u∆ock
();

305  
RTEMS_UNSATISFIED
;

309 
cuºít
 = 
m©ch
;

312 i‡(
m©ch
 !
NULL
) {

314 
	`b•_öãºu±_u∆ock
();

315  
RTEMS_TOO_MANY
;

319 
cuºít
 = 
	`b•_öãºu±_Æloˇã_h™dÀr_íåy
();

320 i‡(
cuºít
 =
NULL
) {

322 
	`b•_öãºu±_u∆ock
();

323  
RTEMS_NO_MEMORY
;

328 
cuºít
->
h™dÀr
 = handler;

329 
cuºít
->
öfo
 = info;

331 i‡(!
ª∂a˚
) {

333 
cuºít
->
¨g
 =árg;

334 
cuºít
->
√xt
 = 
NULL
;

337 
	`b•_öãºu±_dißbÀ
(
Àvñ
);

338 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

339 
èû
->
√xt
 = 
cuºít
;

340 
	`b•_öãºu±_íabÀ
(
Àvñ
);

345 
	`b•_öãºu±_£t_h™dÀr_unique
(
ödex
, 
	`RTEMS_INTERRUPT_IS_UNIQUE
(
›ti⁄s
));

348 i‡(
íabÀ_ve˘‹
) {

349 
sc
 = 
	`b•_öãºu±_ve˘‹_íabÀ
(
ve˘‹
);

350 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

351 
	`b•_öãºu±_u∆ock
();

352  
sc
;

357 
	`b•_öãºu±_u∆ock
();

359  
RTEMS_SUCCESSFUL
;

360 
	}
}

372 
πems_°©us_code
 
	$b•_öãºu±_h™dÀr_ªmove
(

373 
πems_ve˘‹_numbî
 
ve˘‹
,

374 
πems_öãºu±_h™dÀr
 
h™dÀr
,

375 *
¨g


378 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

379 
πems_öãºu±_Àvñ
 
Àvñ
;

380 
πems_ve˘‹_numbî
 
ödex
 = 0;

381 
b•_öãºu±_h™dÀr_íåy
 *
hód
 = 
NULL
;

382 
b•_öãºu±_h™dÀr_íåy
 *
cuºít
 = 
NULL
;

383 
b•_öãºu±_h™dÀr_íåy
 *
¥evious
 = 
NULL
;

384 
b•_öãºu±_h™dÀr_íåy
 *
m©ch
 = 
NULL
;

387 i‡(!
	`b•_öãºu±_is_öôülized
()) {

388  
RTEMS_INTERNAL_ERROR
;

389 } i‡(!
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

390  
RTEMS_INVALID_ID
;

391 } i‡(
h™dÀr
 =
NULL
) {

392  
RTEMS_INVALID_ADDRESS
;

393 } i‡(
	`πems_öãºu±_is_ö_¥ogªss
()) {

394  
RTEMS_CALLED_FROM_ISR
;

398 
	`b•_öãºu±_lock
();

401 
ödex
 = 
	`b•_öãºu±_h™dÀr_ödex
(
ve˘‹
);

404 
hód
 = &
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
];

407 
cuºít
 = 
hód
;

409 i‡(
cuºít
->
h™dÀr
 =h™dÀ∏&& cuºít->
¨g
 ==árg) {

410 
m©ch
 = 
cuºít
;

413 
¥evious
 = 
cuºít
;

414 
cuºít
 = cuºít->
√xt
;

415 } 
cuºít
 !
NULL
);

418 i‡(
m©ch
 !
NULL
) {

419 i‡(
m©ch
->
√xt
 !
NULL
) {

425 
cuºít
 = 
m©ch
->
√xt
;

427 
	`b•_öãºu±_dißbÀ
(
Àvñ
);

428 #ifde‡
RTEMS_SMP


429 
m©ch
->
h™dÀr
 = 
b•_öãºu±_h™dÀr_do_nŸhög
;

430 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

432 
m©ch
->
¨g
 = 
cuºít
->arg;

433 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

434 
m©ch
->
h™dÀr
 = 
cuºít
->handler;

435 
m©ch
->
öfo
 = 
cuºít
->info;

436 
m©ch
->
√xt
 = 
cuºít
->next;

437 
	`b•_öãºu±_íabÀ
(
Àvñ
);

439 
	`b•_öãºu±_‰ì_h™dÀr_íåy
(
cuºít
);

440 } i‡(
m©ch
 =
hód
) {

449 
sc
 = 
	`b•_öãºu±_ve˘‹_dißbÀ
(
ve˘‹
);

452 
	`b•_öãºu±_dißbÀ
(
Àvñ
);

453 
	`b•_öãºu±_˛ór_h™dÀr_íåy
(
hód
, 
ve˘‹
);

454 #ifde‡
BSP_INTERRUPT_USE_INDEX_TABLE


455 
b•_öãºu±_h™dÀr_ödex_èbÀ
 [
ve˘‹
] = 0;

457 
	`b•_öãºu±_íabÀ
(
Àvñ
);

460 
	`b•_öãºu±_£t_h™dÀr_unique
(
ödex
, 
Ál£
);

463 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

464 
	`b•_öãºu±_u∆ock
();

465  
sc
;

472 
	`b•_öãºu±_dißbÀ
(
Àvñ
);

473 
¥evious
->
√xt
 = 
NULL
;

474 
	`b•_öãºu±_„n˚
(
ATOMIC_ORDER_RELEASE
);

475 
	`b•_öãºu±_íabÀ
(
Àvñ
);

477 
	`b•_öãºu±_‰ì_h™dÀr_íåy
(
m©ch
);

481 
	`b•_öãºu±_u∆ock
();

482  
RTEMS_UNSATISFIED
;

486 
	`b•_öãºu±_u∆ock
();

488  
RTEMS_SUCCESSFUL
;

489 
	}
}

501 
πems_°©us_code
 
	$b•_öãºu±_h™dÀr_ôî©e
(

502 
πems_ve˘‹_numbî
 
ve˘‹
,

503 
πems_öãºu±_≥r_h™dÀr_routöe
 
routöe
,

504 *
¨g


507 
b•_öãºu±_h™dÀr_íåy
 *
cuºít
 = 
NULL
;

508 
πems_›ti⁄
 
›ti⁄s
 = 0;

509 
πems_ve˘‹_numbî
 
ödex
 = 0;

512 i‡(!
	`b•_öãºu±_is_öôülized
()) {

513  
RTEMS_INTERNAL_ERROR
;

514 } i‡(!
	`b•_öãºu±_is_vÆid_ve˘‹
(
ve˘‹
)) {

515  
RTEMS_INVALID_ID
;

516 } i‡(
	`πems_öãºu±_is_ö_¥ogªss
()) {

517  
RTEMS_CALLED_FROM_ISR
;

521 
	`b•_öãºu±_lock
();

524 
ödex
 = 
	`b•_öãºu±_h™dÀr_ödex
(
ve˘‹
);

525 
cuºít
 = &
b•_öãºu±_h™dÀr_èbÀ
 [
ödex
];

526 i‡(!
	`b•_öãºu±_is_em±y_h™dÀr_íåy
(
cuºít
)) {

528 
›ti⁄s
 = 
	`b•_öãºu±_is_h™dÀr_unique
(
ödex
) ?

529 
RTEMS_INTERRUPT_UNIQUE
 : 
RTEMS_INTERRUPT_SHARED
;

530 
	`routöe
(
¨g
, 
cuºít
->
öfo
, 
›ti⁄s
, cuºít->
h™dÀr
, current->arg);

531 
cuºít
 = cuºít->
√xt
;

532 } 
cuºít
 !
NULL
);

536 
	`b•_öãºu±_u∆ock
();

538  
RTEMS_SUCCESSFUL
;

539 
	}
}

541 
πems_°©us_code
 
	$πems_öãºu±_h™dÀr_ö°Æl
(

542 
πems_ve˘‹_numbî
 
ve˘‹
,

543 c⁄° *
öfo
,

544 
πems_›ti⁄
 
›ti⁄s
,

545 
πems_öãºu±_h™dÀr
 
h™dÀr
,

546 *
¨g


549  
	`b•_öãºu±_h™dÀr_ö°Æl
(
ve˘‹
, 
öfo
, 
›ti⁄s
, 
h™dÀr
, 
¨g
);

550 
	}
}

552 
πems_°©us_code
 
	$πems_öãºu±_h™dÀr_ªmove
(

553 
πems_ve˘‹_numbî
 
ve˘‹
,

554 
πems_öãºu±_h™dÀr
 
h™dÀr
,

555 *
¨g


558  
	`b•_öãºu±_h™dÀr_ªmove
(
ve˘‹
, 
h™dÀr
, 
¨g
);

559 
	}
}

561 
πems_°©us_code
 
	$πems_öãºu±_h™dÀr_ôî©e
(

562 
πems_ve˘‹_numbî
 
ve˘‹
,

563 
πems_öãºu±_≥r_h™dÀr_routöe
 
routöe
,

564 *
¨g


567  
	`b•_öãºu±_h™dÀr_ôî©e
(
ve˘‹
, 
routöe
, 
¨g
);

568 
	}
}

	@src/lib/libbsp/shared/src/irq-info.c

22 
	~<öây≥s.h
>

24 
	~<b•/úq-gíîic.h
>

25 
	~<b•/úq-öfo.h
>

28 *
	mc⁄ãxt
;

29 
πems_¥ötk_∂ugö_t
 
	m¥öt
;

30 
πems_ve˘‹_numbî
 
	mve˘‹
;

31 } 
	tb•_öãºu±_ªp‹t_íåy
;

33 
	$b•_öãºu±_ªp‹t_≥r_h™dÀr_routöe
(

34 *
¨g
,

35 c⁄° *
öfo
,

36 
πems_›ti⁄
 
›ti⁄s
,

37 
πems_öãºu±_h™dÀr
 
h™dÀr
,

38 *
h™dÀr_¨g


41 
b•_öãºu±_ªp‹t_íåy
 *
e
 = (b•_öãºu±_ªp‹t_íåy *Ë
¨g
;

42 c⁄° *
›t
 = 
›ti⁄s
 =
RTEMS_INTERRUPT_UNIQUE
 ? "UNIQUE" : "SHARED";

44 
e
->
	`¥öt
(

45 
e
->
c⁄ãxt
,

46 "%7" 
PRIu32
 " | %-32s | %7s | %010p | %010p\n",

47 
e
->
ve˘‹
,

48 
öfo
,

49 
›t
,

50 
h™dÀr
,

51 
h™dÀr_¨g


53 
	}
}

55 
	$b•_öãºu±_ªp‹t_wôh_∂ugö
(

56 *
c⁄ãxt
,

57 
πems_¥ötk_∂ugö_t
 
¥öt


60 
πems_ve˘‹_numbî
 
v
 = 0;

61 
b•_öãºu±_ªp‹t_íåy
 
e
 = {

62 .
c⁄ãxt
 = context,

63 .
¥öt
 =Örint,

64 .
ve˘‹
 = 0

67 
	`¥öt
(

68 
c⁄ãxt
,

76 
v
 = 
BSP_INTERRUPT_VECTOR_MIN
; v <
BSP_INTERRUPT_VECTOR_MAX
; ++v) {

77 
e
.
ve˘‹
 = 
v
;

78 
	`πems_öãºu±_h™dÀr_ôî©e
(

79 
v
,

80 
b•_öãºu±_ªp‹t_≥r_h™dÀr_routöe
,

81 &
e


85 
	`¥öt
(

86 
c⁄ãxt
,

89 
	}
}

91 
	$b•_öãºu±_ªp‹t
()

93 
	`b•_öãºu±_ªp‹t_wôh_∂ugö
(
NULL
, 
¥ötk_∂ugö
);

94 
	}
}

	@src/lib/libbsp/shared/src/irq-legacy.c

22 
	~<°rög.h
>

24 
	#BSP_SHARED_HANDLER_SUPPORT


	)

26 
	~<πems.h
>

27 
	~<πems/úq.h
>

29 
	~<b•/úq-gíîic.h
>

34 
	$BSP_gë_cuºít_πems_úq_h™dÀr
(
πems_úq_c⁄√˘_d©a
 *
cd
)

36 
	`mem£t
(
cd
, 0, (*cd));

39 
	}
}

44 
	$BSP_ö°Æl_πems_úq_h™dÀr
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
cd
)

46 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

48 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

49 
cd
->
«me
,

51 
RTEMS_INTERRUPT_UNIQUE
,

52 
cd
->
hdl
,

53 
cd
->
h™dÀ


55 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

59 i‡(
cd
->
⁄
 !
NULL
) {

60 
cd
->
	`⁄
(cd);

64 
	}
}

69 
	$BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
cd
)

71 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

73 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

74 
cd
->
«me
,

76 
RTEMS_INTERRUPT_SHARED
,

77 
cd
->
hdl
,

78 
cd
->
h™dÀ


80 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

84 i‡(
cd
->
⁄
 !
NULL
) {

85 (*
cd
->
⁄
)(cd);

89 
	}
}

94 
	$BSP_ªmove_πems_úq_h™dÀr
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
cd
)

96 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

98 i‡(
cd
->
off
 !
NULL
) {

99 (*
cd
->
off
)(cd);

102 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(
cd
->
«me
, cd->
hdl
, cd->
h™dÀ
);

103 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

108 
	}
}

113 
	$BSP_πems_úq_mngt_£t
(
πems_úq_globÆ_£âögs
 *
c⁄fig
)

116 
	}
}

121 
	$BSP_πems_úq_mngt_gë
(
πems_úq_globÆ_£âögs
 **
c⁄fig
)

123 *
c⁄fig
 = 
NULL
;

125 
	}
}

	@src/lib/libbsp/shared/src/irq-server.c

23 
	~<°dlib.h
>

25 
	~<πems.h
>

26 
	~<πems/chaö.h
>

28 
	~<b•/úq-gíîic.h
>

30 
	#BSP_INTERRUPT_EVENT
 
RTEMS_EVENT_13


	)

32 
RTEMS_INTERRUPT_LOCK_DEFINE
(

34 
b•_öãºu±_£rvî_lock
,

38 
	sb•_öãºu±_£rvî_íåy
 {

39 
πems_chaö_node
 
	mnode
;

40 
πems_ve˘‹_numbî
 
	mve˘‹
;

41 
πems_öãºu±_h™dÀr
 
	mh™dÀr
;

42 *
	m¨g
;

43 } 
	tb•_öãºu±_£rvî_íåy
;

45 
πems_id
 
	gb•_öãºu±_£rvî_id
 = 
RTEMS_ID_NONE
;

47 
RTEMS_CHAIN_DEFINE_EMPTY
(
b•_öãºu±_£rvî_chaö
);

49 
πems_°©us_code
 
	$b•_öãºu±_£rvî_is_öôülized
()

51 i‡(
b•_öãºu±_£rvî_id
 !
RTEMS_ID_NONE
) {

52  
RTEMS_SUCCESSFUL
;

54  
RTEMS_INCORRECT_STATE
;

56 
	}
}

58 
	gb•_öãºu±_£rvî_îr‹s
;

60 
	$b•_öãºu±_£rvî_åiggî
(*
¨g
)

62 
b•_öãºu±_£rvî_íåy
 *
e
 = 
¨g
;

64 
	`b•_öãºu±_ve˘‹_dißbÀ
(
e
->
ve˘‹
);

66 i‡(
e
->
node
.
√xt
 =
NULL
) {

67 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

69 
	`πems_öãºu±_lock_acquúe
(&
b•_öãºu±_£rvî_lock
, &
lock_c⁄ãxt
);

70 
	`πems_chaö_≠≥nd_u≈rŸe˘ed
(&
b•_öãºu±_£rvî_chaö
, &
e
->
node
);

71 
	`πems_öãºu±_lock_ªÀa£
(&
b•_öãºu±_£rvî_lock
, &
lock_c⁄ãxt
);

73 ++
b•_öãºu±_£rvî_îr‹s
;

76 
	`πems_evít_£nd
(
b•_öãºu±_£rvî_id
, 
BSP_INTERRUPT_EVENT
);

77 
	}
}

79 
b•_öãºu±_£rvî_íåy
 *
	$b•_öãºu±_£rvî_gë_íåy
()

81 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

82 
b•_öãºu±_£rvî_íåy
 *
e
;

84 
	`πems_öãºu±_lock_acquúe
(&
b•_öãºu±_£rvî_lock
, &
lock_c⁄ãxt
);

86 
e
 = (
b•_öãºu±_£rvî_íåy
 *)

87 
	`πems_chaö_gë_u≈rŸe˘ed
(&
b•_öãºu±_£rvî_chaö
);

88 i‡(
e
 !
NULL
) {

89 
e
->
node
.
√xt
 = 
NULL
;

92 
	`πems_öãºu±_lock_ªÀa£
(&
b•_öãºu±_£rvî_lock
, &
lock_c⁄ãxt
);

94  
e
;

95 
	}
}

97 
	$b•_öãºu±_£rvî_èsk
(
πems_èsk_¨gumít
 
¨g
)

99 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

101 
åue
) {

102 
πems_evít_£t
 
evíts
 = 0;

103 
b•_öãºu±_£rvî_íåy
 *
e
 = 
NULL
;

105 
sc
 = 
	`πems_evít_ª˚ive
(

106 
BSP_INTERRUPT_EVENT
,

107 
RTEMS_EVENT_ALL
 | 
RTEMS_WAIT
,

108 
RTEMS_NO_TIMEOUT
,

109 &
evíts


111 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

115 (
e
 = 
	`b•_öãºu±_£rvî_gë_íåy
()Ë!
NULL
) {

116 (*
e
->
h™dÀr
)”->
¨g
);

118 
	`b•_öãºu±_ve˘‹_íabÀ
(
e
->
ve˘‹
);

122 
	`πems_èsk_dñëe
(
RTEMS_SELF
);

123 
	}
}

126 
πems_öãºu±_h™dÀr
 
	mh™dÀr
;

127 *
	m¨g
;

128 
b•_öãºu±_£rvî_íåy
 *
	míåy
;

129 } 
	tb•_öãºu±_£rvî_ôî©e_íåy
;

131 
	$b•_öãºu±_£rvî_≥r_h™dÀr_routöe
(

132 *
ôî©e_¨g
,

133 c⁄° *
öfo
,

134 
πems_›ti⁄
 
›ti⁄s
,

135 
πems_öãºu±_h™dÀr
 
h™dÀr
,

136 *
h™dÀr_¨g


139 
b•_öãºu±_£rvî_ôî©e_íåy
 *
õ
 = 
ôî©e_¨g
;

140 
b•_öãºu±_£rvî_íåy
 *
e
 = 
h™dÀr_¨g
;

142 i‡(
h™dÀr
 =
b•_öãºu±_£rvî_åiggî
) {

143 i‡(
e
->
h™dÀr
 =
õ
->h™dÀ∏&&É->
¨g
 == ie->arg) {

144 
õ
->
íåy
 = 
e
;

147 
	}
}

149 
πems_°©us_code
 
	$πems_öãºu±_£rvî_h™dÀr_ö°Æl
(

150 
πems_id
 
£rvî
,

151 
πems_ve˘‹_numbî
 
ve˘‹
,

152 c⁄° *
öfo
,

153 
πems_›ti⁄
 
›ti⁄s
,

154 
πems_öãºu±_h™dÀr
 
h™dÀr
,

155 *
¨g


158 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

159 
b•_öãºu±_£rvî_íåy
 *
e
 = 
NULL
;

161 
sc
 = 
	`b•_öãºu±_£rvî_is_öôülized
();

162 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

163  
sc
;

166 i‡(
£rvî
 !
RTEMS_ID_NONE
) {

167  
RTEMS_NOT_IMPLEMENTED
;

170 i‡(
	`RTEMS_INTERRUPT_IS_SHARED
(
›ti⁄s
)) {

171  
RTEMS_NOT_IMPLEMENTED
;

174 
e
 = 
	`ˇŒoc
(1, (*e));

175 i‡(
e
 =
NULL
) {

176  
RTEMS_NO_MEMORY
;

179 
e
->
ve˘‹
 = vector;

180 
e
->
h™dÀr
 = handler;

181 
e
->
¨g
 =árg;

183 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

184 
ve˘‹
,

185 
öfo
,

186 
›ti⁄s
,

187 
b•_öãºu±_£rvî_åiggî
,

188 
e


190 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

191 
	`‰ì
(
e
);

193  
sc
;

196  
RTEMS_SUCCESSFUL
;

197 
	}
}

199 
πems_°©us_code
 
	$πems_öãºu±_£rvî_h™dÀr_ªmove
(

200 
πems_id
 
£rvî
,

201 
πems_ve˘‹_numbî
 
ve˘‹
,

202 
πems_öãºu±_h™dÀr
 
h™dÀr
,

203 *
¨g


206 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

207 
b•_öãºu±_£rvî_ôî©e_íåy
 
õ
 = {

208 .
h™dÀr
 = handler,

209 .
¨g
 =árg,

210 .
íåy
 = 
NULL


213 
sc
 = 
	`b•_öãºu±_£rvî_is_öôülized
();

214 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

215  
sc
;

218 i‡(
£rvî
 !
RTEMS_ID_NONE
) {

219  
RTEMS_NOT_IMPLEMENTED
;

223 
sc
 = 
	`πems_öãºu±_h™dÀr_ôî©e
(

224 
ve˘‹
,

225 
b•_öãºu±_£rvî_≥r_h™dÀr_routöe
,

226 &
õ


228 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

229  
sc
;

230 } i‡(
õ
.
íåy
 =
NULL
) {

231  
RTEMS_INVALID_ID
;

234 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

235 
ve˘‹
,

236 
b•_öãºu±_£rvî_åiggî
,

237 
õ
.
íåy


239 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

240  
sc
;

243 
	`‰ì
(
õ
.
íåy
);

245  
RTEMS_SUCCESSFUL
;

246 
	}
}

248 
πems_°©us_code
 
	$πems_öãºu±_£rvî_öôülize
(

249 
πems_èsk_¥i‹ôy
 
¥i‹ôy
,

250 
size_t
 
°ack_size
,

251 
πems_mode
 
modes
,

252 
πems_©åibuã
 
©åibuãs
,

253 
πems_id
 *
£rvî


256 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

258 i‡(
£rvî
 !
NULL
) {

259  
RTEMS_NOT_IMPLEMENTED
;

262 
sc
 = 
	`πems_èsk_¸óã
(

263 
	`πems_buûd_«me
('I', 'R', 'Q', 'S'),

264 
¥i‹ôy
,

265 
°ack_size
,

266 
modes
,

267 
©åibuãs
,

268 &
b•_öãºu±_£rvî_id


270 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

271  
RTEMS_TOO_MANY
;

274 
sc
 = 
	`πems_èsk_°¨t
(

275 
b•_öãºu±_£rvî_id
,

276 
b•_öãºu±_£rvî_èsk
,

279 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

281 
	`πems_èsk_dñëe
(
b•_öãºu±_£rvî_id
);

282 
b•_öãºu±_£rvî_id
 = 
RTEMS_ID_NONE
;

284  
RTEMS_TOO_MANY
;

287  
RTEMS_SUCCESSFUL
;

288 
	}
}

	@src/lib/libbsp/shared/src/irq-shell.c

22 
	~<°dio.h
>

24 
	~<πems/shñl.h
>

26 
	~<b•/úq-öfo.h
>

28 
	$b•_öãºu±_shñl_maö
(
¨gc
, **
¨gv
)

30 
	`b•_öãºu±_ªp‹t_wôh_∂ugö
(
°dout
, (
πems_¥ötk_∂ugö_t
Ë
Ârötf
);

33 
	}
}

35 
πems_shñl_cmd_â
 
	gb•_öãºu±_shñl_comm™d
 = {

36 .
«me
 = "irq",

37 .
	gußge
 = "Prints interrupt information",

38 .
	gt›ic
 = "rtems",

39 .
	gcomm™d
 = 
b•_öãºu±_shñl_maö
,

40 .
	gÆüs
 = 
NULL
,

41 .
	g√xt
 = 
NULL


	@src/lib/libbsp/shared/src/stackalloc.c

23 
	~<b•/°ackÆloc.h
>

25 
	~<πems.h
>

26 
	~<πems/sc‹e/hópim∂.h
>

27 
	~<πems/sc‹e/wk•a˚.h
>

29 
	~<b•/lökî-symbﬁs.h
>

31 
Hóp_C⁄åﬁ
 
	gb•_°ack_hóp
;

33 
	$b•_°ack_Æloˇã_öô
(
size_t
 
°ack_•a˚_size
)

35 
	`_Hóp_Inôülize
(

36 &
b•_°ack_hóp
,

37 
b•_£˘i⁄_°ack_begö
,

38 (
uöçå_t
Ë
b•_£˘i⁄_°ack_size
,

39 
CPU_STACK_ALIGNMENT


41 
	}
}

43 *
	$b•_°ack_Æloˇã
(
size_t
 
size
)

45 *
°ack
 = 
NULL
;

47 i‡(
b•_°ack_hóp
.
¨ó_begö
 != 0) {

48 
°ack
 = 
	`_Hóp_AŒoˇã
(&
b•_°ack_hóp
, 
size
);

51 i‡(
°ack
 =
NULL
) {

52 
°ack
 = 
	`_W‹k•a˚_AŒoˇã
(
size
);

55  
°ack
;

56 
	}
}

58 
	$b•_°ack_‰ì
(*
°ack
)

60 
boﬁ
 
ok
 = 
	`_Hóp_Fªe
(&
b•_°ack_hóp
, 
°ack
);

62 i‡(!
ok
) {

63 
	`_W‹k•a˚_Fªe
(
°ack
);

65 
	}
}

	@src/lib/libbsp/shared/src/uart-output-char.c

23 
	~<πems/b•Io.h
>

25 
	~<b•/u¨t-ouçut-ch¨.h
>

27 
	$u¨t_ouçut_øw
(
c
)

29 (
CONSOLE_LSR
 & 
CONSOLE_LSR_THRE
) == 0) {

33 
CONSOLE_THR
 = 
c
;

34 
	}
}

36 
	$u¨t_ouçut
(
c
)

38 i‡(
c
 == '\n') {

39 
	`u¨t_ouçut_øw
('\r');

42 
	`u¨t_ouçut_øw
(
c
);

43 
	}
}

45 
	$u¨t_öput
()

47 i‡((
CONSOLE_LSR
 & 
CONSOLE_LSR_RDR
) != 0) {

48  
CONSOLE_RBR
;

52 
	}
}

54 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
u¨t_ouçut
;

56 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
u¨t_öput
;

	@src/lib/libbsp/shared/timerstub.c

9 
	~<b•.h
>

10 
	~<πems/btimî.h
>

12 
boﬁ
 
	gbíchm¨k_timî_föd_avîage_ovîhód
;

14 
	$bíchm¨k_timî_öôülize
()

16 
	}
}

18 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
()

20 i‡(
bíchm¨k_timî_föd_avîage_ovîhód
)

23 
	}
}

25 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(

26 
boﬁ
 
föd_Êag


29 
bíchm¨k_timî_föd_avîage_ovîhód
 = 
föd_Êag
;

30 
	}
}

	@src/lib/libbsp/shared/tod.c

11 
	~<πems.h
>

12 
	~<πems/πc.h
>

13 
	~<πems/tod.h
>

14 
	~<πems/libio.h
>

16 
	~<libchù/πc.h
>

21 
size_t
 
RTC_Cou¡
;

22 
πems_devi˚_mö‹_numbî
 
RTC_Mö‹
;

24 
	gRTC_Pª£¡
;

26 
£tRólTimeToRTEMS
();

33 
πems_devi˚_drivî
 
	$πc_öôülize
(

34 
πems_devi˚_maj‹_numbî
 
maj‹
,

35 
πems_devi˚_mö‹_numbî
 
mö‹_¨g
,

36 *
¨g


39 
πems_devi˚_mö‹_numbî
 
mö‹
;

40 
πems_°©us_code
 
°©us
;

42 
mö‹
=0; mö‹ < 
RTC_Cou¡
 ; minor++) {

48 i‡(
RTC_TabÀ
[
mö‹
].
devi˚Probe
 && RTC_TabÀ[mö‹].
	`devi˚Probe
(minor)) {

52 
RTC_Mö‹
 = 
mö‹
;

53 
RTC_Pª£¡
 = 1;

58 i‡–!
RTC_Pª£¡
 ) {

63  
RTEMS_INVALID_NUMBER
;

69 
°©us
 = 
	`πems_io_ªgi°î_«me
–
RTC_DEVICE_NAME
, 
maj‹
, 
RTC_Mö‹
 );

70 i‡(
°©us
 !
RTEMS_SUCCESSFUL
) {

71 
	`πems_Áèl_îr‹_occuºed
(
°©us
);

74 
RTC_TabÀ
[
mö‹
].
pDevi˚Fns
->
	`devi˚Inôülize
–
RTC_Mö‹
 );

79  
mö‹
++ ; mö‹<
RTC_Cou¡
 ; minor++) {

85 i‡(
RTC_TabÀ
[
mö‹
].
devi˚Probe
 && RTC_TabÀ[mö‹].
	`devi˚Probe
(minor)) {

86 
°©us
 = 
	`πems_io_ªgi°î_«me
(

87 
RTC_TabÀ
[
mö‹
].
sDevi˚Name
,

88 
maj‹
,

89 
mö‹
 );

90 i‡(
°©us
 !
RTEMS_SUCCESSFUL
) {

91 
	`πems_Áèl_îr‹_occuºed
(
°©us
);

97 
RTC_TabÀ
[
mö‹
].
pDevi˚Fns
->
	`devi˚Inôülize
(minor);

102 
	`£tRólTimeToRTEMS
();

103  
RTEMS_SUCCESSFUL
;

104 
	}
}

106 
πems_devi˚_drivî
 
	$πc_ªad
(

107 
πems_devi˚_maj‹_numbî
 
maj‹
,

108 
πems_devi˚_mö‹_numbî
 
mö‹
,

109 *
¨g


112 
rv
 = 0;

113 
πems_libio_rw_¨gs_t
 *
rw
 = 
¨g
;

114 
πems_time_of_day
 *
tod
 = (πems_time_of_day *Ë
rw
->
buf„r
;

116 
rw
->
off£t
 = 0;

117 
rw
->
byãs_moved
 = 0;

119 i‡(!
RTC_Pª£¡
) {

120  
RTEMS_NOT_CONFIGURED
;

123 i‡(
rw
->
cou¡
 !–
πems_time_of_day
)) {

124  
RTEMS_INVALID_SIZE
;

127 
rv
 = 
RTC_TabÀ
 [
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚GëTime
(

128 
RTC_Mö‹
,

129 
tod


131 i‡(
rv
 != 0) {

132  
RTEMS_IO_ERROR
;

135 
rw
->
byãs_moved
 =Ñw->
cou¡
;

137  
RTEMS_SUCCESSFUL
;

138 
	}
}

140 
πems_devi˚_drivî
 
	$πc_wrôe
(

141 
πems_devi˚_maj‹_numbî
 
maj‹
,

142 
πems_devi˚_mö‹_numbî
 
mö‹
,

143 *
¨g


146 
rv
 = 0;

147 
πems_libio_rw_¨gs_t
 *
rw
 = 
¨g
;

148 c⁄° 
πems_time_of_day
 *
tod
 = (c⁄°Ñãms_time_of_day *Ë
rw
->
buf„r
;

150 
rw
->
off£t
 = 0;

151 
rw
->
byãs_moved
 = 0;

153 i‡(!
RTC_Pª£¡
) {

154  
RTEMS_NOT_CONFIGURED
;

157 i‡(
rw
->
cou¡
 !–
πems_time_of_day
)) {

158  
RTEMS_INVALID_SIZE
;

161 
rv
 = 
RTC_TabÀ
 [
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚SëTime
(

162 
RTC_Mö‹
,

163 
tod


165 i‡(
rv
 != 0) {

166  
RTEMS_IO_ERROR
;

169 
rw
->
byãs_moved
 =Ñw->
cou¡
;

171  
RTEMS_SUCCESSFUL
;

172 
	}
}

174 
πems_devi˚_drivî
 
	$πc_›í
(

175 
πems_devi˚_maj‹_numbî
 
maj‹
,

176 
πems_devi˚_mö‹_numbî
 
mö‹
,

177 *
¨g


180  
RTEMS_SUCCESSFUL
;

181 
	}
}

183 
πems_devi˚_drivî
 
	$πc_˛o£
(

184 
πems_devi˚_maj‹_numbî
 
maj‹
,

185 
πems_devi˚_mö‹_numbî
 
mö‹
,

186 *
¨g


189  
RTEMS_SUCCESSFUL
;

190 
	}
}

192 
πems_devi˚_drivî
 
	$πc_c⁄åﬁ
(

193 
πems_devi˚_maj‹_numbî
 
maj‹
,

194 
πems_devi˚_mö‹_numbî
 
mö‹
,

195 *
¨g


198  
RTEMS_NOT_IMPLEMENTED
;

199 
	}
}

204 
	$£tRólTimeToRTEMS
()

206 
πems_time_of_day
 
πc_tod
;

208 i‡(!
RTC_Pª£¡
)

211 
RTC_TabÀ
[
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚GëTime
(RTC_Mö‹, &
πc_tod
);

212 
	`πems_˛ock_£t
–&
πc_tod
 );

213 
	}
}

220 
	$£tRólTimeFromRTEMS
()

222 
πems_time_of_day
 
πems_tod
;

224 i‡(!
RTC_Pª£¡
)

227 
	`πems_˛ock_gë_tod
–&
πems_tod
 );

228 
RTC_TabÀ
[
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚SëTime
(RTC_Mö‹, &
πems_tod
);

229 
	}
}

236 
	$gëRólTime
(

237 
πems_time_of_day
 *
tod


240 i‡(!
RTC_Pª£¡
)

243 
RTC_TabÀ
[
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚GëTime
(RTC_Mö‹, 
tod
);

244 
	}
}

251 
	$£tRólTime
(

252 c⁄° 
πems_time_of_day
 *
tod


255 i‡(!
RTC_Pª£¡
)

258 i‡–!
	`_TOD_VÆid©e
(
tod
) )

261 
RTC_TabÀ
[
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚SëTime
(RTC_Mö‹, 
tod
);

263 
	}
}

271 
	$checkRólTime
()

273 
πems_time_of_day
 
πems_tod
;

274 
πems_time_of_day
 
πc_tod
;

275 
uöt32_t
 
πems_time
;

276 
uöt32_t
 
πc_time
;

278 i‡(!
RTC_Pª£¡
)

281 
	`πems_˛ock_gë_tod
–&
πems_tod
 );

282 
RTC_TabÀ
[
RTC_Mö‹
].
pDevi˚Fns
->
	`devi˚GëTime
(RTC_Mö‹, &
πc_tod
);

284 
πems_time
 = 
	`_TOD_To_£c⁄ds
–&
πems_tod
 );

285 
πc_time
 = 
	`_TOD_To_£c⁄ds
–&
πc_tod
 );

287  
πems_time
 - 
πc_time
;

288 
	}
}

	@src/lib/libbsp/shared/umon/cli.h

39 #i‚de‡
_˛i_h


40 
	#_˛i_h


	)

42 #ifde‡
__˝lu•lus


54 
	sm⁄Comm™d
 {

55 *
«me
;

56 (*
func
)(,**);

57 **
hñ±xt
;

58 
Êags
;

62 #ifde‡
__˝lu•lus


69 
	#CMDFLAG_NOMONRC
 1

	)

73 #i‚de‡
CMDLINESIZE


74 
	#CMDLINESIZE
 128

	)

79 
	#ARGCNT
 24

	)

114 
	#CMD_SUCCESS
 0

	)

115 
	#CMD_FAILURE
 -1

	)

116 
	#CMD_PARAM_ERROR
 -2

	)

117 
	#CMD_LINE_ERROR
 -3

	)

118 
	#CMD_ULVL_DENIED
 -4

	)

119 
	#CMD_NOT_FOUND
 -5

	)

120 
	#CMD_MONRC_DENIED
 -6

	)

	@src/lib/libbsp/shared/umon/doxygen.h

	@src/lib/libbsp/shared/umon/monlib.c

46 
	~<um⁄/m⁄lib.h
>

48 (*
_tfs£ek
)(,,);

49 (*
_tfsgëlöe
)(,*,);

50 (*
_tfsùmod
)(*,*,,);

51 (*
_tfsöô
)();

52 (*
_tfßdd
)(*,*,*,*,);

53 (*
_tfsu∆ök
)(*);

54 (*
_tf§un
)(**,);

55 (*
_tf§ód
)(,*,);

56 (*
_tfswrôe
)(,*,);

57 (*
_tfs›í
)(*,,*);

58 (*
_tfs˛o£
)(,*);

59 (*
_¥ötf
)(

61 (*
_˝rötf
)(

63 (*
_•rötf
)(

65 (*
_m⁄ª°¨t
)();

66 (*
_Ωutch¨
)(
c
);

67 (*
_gëch¨
)();

68 (*
_gŸach¨
)();

69 (*
_gëbyãs
)(*,,);

70 (*
_addcomm™d
)(
m⁄Comm™d
 *,*);

71 (*
_docomm™d
)(*,);

72 (*
_gëlöe
)(*,,);

73 (*
_tfsf°©
)(*,
tfshdr
 *);

74 (*
_tf£of
)();

75 (*
_decom¥ess
)(*,,*);

76 (*
_tf°runˇã
)(,);

77 (*
_hó≥xãnd
)(*,);

78 (*
_tf¶ök
)(*,*);

79 (*
_pcicfgwrôe
)(,,,,,);

80 (*
_i2cwrôe
)(,,*,);

81 (*
_i2¸ód
)(,,*,);

82 (*
_Êashwrôe
)(*,*,);

83 (*
_Êashîa£
)();

84 (*
_Êashöfo
)(,*,**);

85 (*
_Êashovîride
)(*,,);

86 (*
_£ndíë
)(*,);

87 (*
_ªcvíë
)(*,);

88 (*
_¥öçkt
)(*,,);

89 (*
_£ãnv
)(*,*);

90 (*
_w©chdog
)();

91 (*
_timeofday
)(,*);

92 (*
_m⁄timî
)(
cmd
, *
¨g
);

94 *(*
_gëív
)(*);

95 *(*
_vîsi⁄
)();

96 *(*
_gëívp
)();

97 #ifde‡
MALLOC_DEBUG


98 *(*
_mÆloc
)(,*,);

99 *(*
_ªÆloc
)(*
buf
,,*,);

101 *(*
_mÆloc
)();

102 *(*
_ªÆloc
)(*,);

104 *(*
_gësym
)(*,*,);

106 (*
_öt§e°‹e
)();

107 (*
_≠≥xô
)();

108 (*
_‰ì
)(*);

109 (*
_gë¨gv
)(*,***);

110 (*
_¥ofûî
)(*);

111 (*
_bbc
)(*,);

112 (*
_memåa˚
)(

114 (*
_≠pw¨m°¨t
)();

115 (*
_m⁄dñay
)();

116 (*
_¥ötmem
)(*,,);

118 (*
_tfs˘æ
)(,,);

119 (*
_tf°ñl
)();

120 (*
_p‹tcmd
)(,*);

122 
tfshdr
 *(*
_tf¢ext
)(tfshdr *);

123 
tfshdr
 *(*
_tfs°©
)(*);

125 (*
_i2c˘æ
)(,,,);

126 (*
_pcicfgªad
)(,,,,);

127 (*
_pci˘æ
)(,,,);

128 (*
_¸c32
)(*,);

129 (*
_ötsoff
)();

130 (*
_assign_h™dÀr
)(,,);

132 (*
_x¸c16
)(*,);

135 (*
_m⁄lock
)();

136 (*
_m⁄u∆ock
)();

137 (*
_m⁄com
)(,*,*, *);

150 
	#TFS_MONLOCK
 
m⁄Lock


	)

151 
	#TFS_MONUNLOCK
 
m⁄U∆ock


	)

156 
	#ENV_MONLOCK
 
m⁄Lock


	)

157 
	#ENV_MONUNLOCK
 
m⁄U∆ock


	)

162 
	#CONSOLE_MONLOCK
 
m⁄Lock


	)

163 
	#CONSOLE_MONUNLOCK
 
m⁄U∆ock


	)

168 
	#HEAP_MONLOCK
 
m⁄Lock


	)

169 
	#HEAP_MONUNLOCK
 
m⁄U∆ock


	)

175 
	#BLOCKING_MONLOCK
 
m⁄Lock


	)

176 
	#BLOCKING_MONUNLOCK
 
m⁄U∆ock


	)

181 
	#GENERIC_MONLOCK
 
m⁄Lock


	)

182 
	#GENERIC_MONUNLOCK
 
m⁄U∆ock


	)

187 
	`m⁄_memåa˚
(

188 *
fmt
,

189 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

190 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


192 
	`m⁄_¥ötf
(

193 *
fmt
,

194 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

195 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


197 
	`m⁄_˝rötf
(

198 *
fmt
,

199 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

200 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


202 
	`m⁄_•rötf
(

203 *
buf
,

204 *
fmt
,

205 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

206 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


227 
	`m⁄C⁄√˘
((*
m⁄
)(,*,*,*),

228 (*
lock
)(), (*
u∆ock
)())

230 
rc
 = 0;

233 
_m⁄lock
 = 
lock
;

234 
_m⁄u∆ock
 = 
u∆ock
;

237 i‡(
m⁄
) {

239 
_m⁄com
 = 
m⁄
;

244 
rc
 +
	`_m⁄com
(
GETMONFUNC_PUTCHAR
,&
_Ωutch¨
,0,0);

245 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETCHAR
,&
_gëch¨
,0,0);

246 
rc
 +
	`_m⁄com
(
GETMONFUNC_GOTACHAR
,&
_gŸach¨
,0,0);

247 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETBYTES
,&
_gëbyãs
,0,0);

248 
rc
 +
	`_m⁄com
(
GETMONFUNC_PRINTF
,&
_¥ötf
,0,0);

249 
rc
 +
	`_m⁄com
(
GETMONFUNC_CPRINTF
,&
_˝rötf
,0,0);

250 
rc
 +
	`_m⁄com
(
GETMONFUNC_SPRINTF
,&
_•rötf
,0,0);

251 
rc
 +
	`_m⁄com
(
GETMONFUNC_RESTART
,&
_m⁄ª°¨t
,0,0);

252 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETENV
,&
_gëív
,0,0);

253 
rc
 +
	`_m⁄com
(
GETMONFUNC_SETENV
,&
_£ãnv
,0,0);

254 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSINIT
,&
_tfsöô
,0,0);

255 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSADD
,&
_tfßdd
,0,0);

256 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSUNLINK
,&
_tfsu∆ök
,0,0);

257 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSRUN
,&
_tf§un
,0,0);

258 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSNEXT
,&
_tf¢ext
,0,0);

259 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSSTAT
,&
_tfs°©
,0,0);

260 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSREAD
,&
_tf§ód
,0,0);

261 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSWRITE
,&
_tfswrôe
,0,0);

262 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSOPEN
,&
_tfs›í
,0,0);

263 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSCLOSE
,&
_tfs˛o£
,0,0);

264 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSSEEK
,&
_tfs£ek
,0,0);

265 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSGETLINE
,&
_tfsgëlöe
,0,0);

266 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSIPMOD
,&
_tfsùmod
,0,0);

267 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSCTRL
,&
_tfs˘æ
,0,0);

268 
rc
 +
	`_m⁄com
(
GETMONFUNC_ADDCOMMAND
,&
_addcomm™d
,0,0);

269 
rc
 +
	`_m⁄com
(
GETMONFUNC_DOCOMMAND
,&
_docomm™d
,0,0);

270 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETARGV
,&
_gë¨gv
,0,0);

271 
rc
 +
	`_m⁄com
(
GETMONFUNC_CRC16
,&
_x¸c16
,0,0);

272 
rc
 +
	`_m⁄com
(
GETMONFUNC_CRC32
,&
_¸c32
,0,0);

273 
rc
 +
	`_m⁄com
(
GETMONFUNC_INTSOFF
,&
_ötsoff
,0,0);

274 
rc
 +
	`_m⁄com
(
GETMONFUNC_INTSRESTORE
,&
_öt§e°‹e
,0,0);

275 
rc
 +
	`_m⁄com
(
GETMONFUNC_APPEXIT
,&
_≠≥xô
,0,0);

276 
rc
 +
	`_m⁄com
(
GETMONFUNC_MALLOC
,&
_mÆloc
,0,0);

277 
rc
 +
	`_m⁄com
(
GETMONFUNC_FREE
,&
_‰ì
,0,0);

278 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETLINE
,&
_gëlöe
,0,0);

279 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSFSTAT
,&
_tfsf°©
,0,0);

280 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSEOF
,&
_tf£of
,0,0);

281 
rc
 +
	`_m⁄com
(
GETMONFUNC_DECOMPRESS
,&
_decom¥ess
,0,0);

282 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSTRUNCATE
,&
_tf°runˇã
,0,0);

283 
rc
 +
	`_m⁄com
(
GETMONFUNC_HEAPXTEND
,&
_hó≥xãnd
,0,0);

284 
rc
 +
	`_m⁄com
(
GETMONFUNC_PROFILER
,&
_¥ofûî
,0,0);

285 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSLINK
,&
_tf¶ök
,0,0);

286 
rc
 +
	`_m⁄com
(
GETMONFUNC_BBC
,&
_bbc
,0,0);

287 
rc
 +
	`_m⁄com
(
GETMONFUNC_MEMTRACE
,&
_memåa˚
,0,0);

288 
rc
 +
	`_m⁄com
(
GETMONFUNC_TFSTELL
,&
_tf°ñl
,0,0);

289 
rc
 +
	`_m⁄com
(
GETMONFUNC_VERSION
,&
_vîsi⁄
,0,0);

290 
rc
 +
	`_m⁄com
(
GETMONFUNC_WARMSTART
,&
_≠pw¨m°¨t
,0,0);

291 
rc
 +
	`_m⁄com
(
GETMONFUNC_PCICFGREAD
,&
_pcicfgªad
,0,0);

292 
rc
 +
	`_m⁄com
(
GETMONFUNC_PCICFGWRITE
,&
_pcicfgwrôe
,0,0);

293 
rc
 +
	`_m⁄com
(
GETMONFUNC_PCICONTROL
,&
_pci˘æ
,0,0);

294 
rc
 +
	`_m⁄com
(
GETMONFUNC_I2CREAD
,&
_i2¸ód
,0,0);

295 
rc
 +
	`_m⁄com
(
GETMONFUNC_I2CWRITE
,&
_i2cwrôe
,0,0);

296 
rc
 +
	`_m⁄com
(
GETMONFUNC_I2CCONTROL
,&
_i2c˘æ
,0,0);

297 
rc
 +
	`_m⁄com
(
GETMONFUNC_MONDELAY
,&
_m⁄dñay
,0,0);

298 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETENVP
,&
_gëívp
,0,0);

299 
rc
 +
	`_m⁄com
(
GETMONFUNC_REALLOC
,&
_ªÆloc
,0,0);

300 
rc
 +
	`_m⁄com
(
GETMONFUNC_SENDENETPKT
,&
_£ndíë
,0,0);

301 
rc
 +
	`_m⁄com
(
GETMONFUNC_RECVENETPKT
,&
_ªcvíë
,0,0);

302 
rc
 +
	`_m⁄com
(
GETMONFUNC_GETSYM
,&
_gësym
,0,0);

303 
rc
 +
	`_m⁄com
(
GETMONFUNC_PRINTPKT
,&
_¥öçkt
,0,0);

304 
rc
 +
	`_m⁄com
(
GETMONFUNC_FLASHWRITE
,&
_Êashwrôe
,0,0);

305 
rc
 +
	`_m⁄com
(
GETMONFUNC_FLASHERASE
,&
_Êashîa£
,0,0);

306 
rc
 +
	`_m⁄com
(
GETMONFUNC_FLASHINFO
,&
_Êashöfo
,0,0);

307 
rc
 +
	`_m⁄com
(
GETMONFUNC_ASSIGNHDLR
,&
_assign_h™dÀr
,0,0);

308 
rc
 +
	`_m⁄com
(
GETMONFUNC_WATCHDOG
,&
_w©chdog
,0,0);

309 
rc
 +
	`_m⁄com
(
GETMONFUNC_PRINTMEM
,&
_¥ötmem
,0,0);

310 
rc
 +
	`_m⁄com
(
GETMONFUNC_PORTCMD
,&
_p‹tcmd
,0,0);

311 
rc
 +
	`_m⁄com
(
GETMONFUNC_TIMEOFDAY
,&
_timeofday
,0,0);

312 
rc
 +
	`_m⁄com
(
GETMONFUNC_TIMER
,&
_m⁄timî
,0,0);

313 
rc
 +
	`_m⁄com
(
GETMONFUNC_FLASHOVRRD
,&
_Êashovîride
,0,0);

315 (
rc
);

316 
	}
}

337 
	gign‹ñock
 = 0;

339 #i‡
KEEP_TO_STAY_IN_SYNC_WITH_UPSTREAM_BUT_UNUSED


341 
	$DißbÀM⁄Lock
()

343 
ign‹ñock
 = 2;

344 
	}
}

347 
	$E«bÀM⁄Lock
()

349 
ign‹ñock
 = 0;

350 
	}
}

363 
	$m⁄Lock
()

365 i‡(
_m⁄lock
) {

366 
ign‹ñock
) {

370 
ign‹ñock
--;

373 
	`_m⁄lock
();

377 
	}
}

380 
	$m⁄U∆ock
()

382 i‡(
_m⁄u∆ock
) {

383 
ign‹ñock
) {

387 
ign‹ñock
--;

389 
	`_m⁄u∆ock
();

393 
	}
}

396 
	$m⁄_com
(
cmd
, *
¨g1
, *
¨g2
, *
¨g3
)

398 
ªt
;

400 
	`GENERIC_MONLOCK
();

401 
ªt
 = 
	`_m⁄com
(
cmd
,
¨g1
,
¨g2
,
¨g3
);

402 
	`GENERIC_MONUNLOCK
();

403 (
ªt
);

404 
	}
}

407 
	$m⁄_putch¨
(
c
)

409 
ªt
;

411 
	`CONSOLE_MONLOCK
();

412 
ªt
 = 
	`_Ωutch¨
(
c
);

413 
	`CONSOLE_MONUNLOCK
();

414 (
ªt
);

415 
	}
}

418 
	$m⁄_gëch¨
()

420 
ªt
;

422 
	`BLOCKING_MONLOCK
();

423 
ªt
 = 
	`_gëch¨
();

424 
	`BLOCKING_MONUNLOCK
();

425 (
ªt
);

426 
	}
}

429 
	$m⁄_gŸach¨
()

431 
ªt
;

433 
	`GENERIC_MONLOCK
();

434 
ªt
 = 
	`_gŸach¨
();

435 
	`GENERIC_MONUNLOCK
();

436 (
ªt
);

437 
	}
}

440 
	$m⁄_gëbyãs
(*
buf
,
˙t
,
block
)

442 
ªt
;

444 
	`BLOCKING_MONLOCK
();

445 
ªt
 = 
	`_gëbyãs
(
buf
,
˙t
,
block
);

446 
	`BLOCKING_MONUNLOCK
();

447 (
ªt
);

448 
	}
}

451 
	$m⁄_¥ötf
(

452 *
fmt
,

453 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

454 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


457 
ªt
;

459 
	`CONSOLE_MONLOCK
();

460 
ªt
 = 
	`_¥ötf
(
fmt
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
,
a9
,
a10
,
a11
,
a12
);

461 
	`CONSOLE_MONUNLOCK
();

462 (
ªt
);

463 
	}
}

466 
	$m⁄_˝rötf
(

467 *
fmt
,

468 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

469 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


472 
ªt
;

474 
	`CONSOLE_MONLOCK
();

475 
ªt
 = 
	`_˝rötf
(
fmt
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
,
a9
,
a10
,
a11
,
a12
);

476 
	`CONSOLE_MONUNLOCK
();

477 (
ªt
);

478 
	}
}

481 
	$m⁄_•rötf
(

482 *
buf
,

483 *
fmt
,

484 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

485 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


488 
ªt
;

490 
	`GENERIC_MONLOCK
();

491 
ªt
 = 
	`_•rötf
(
buf
,
fmt
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
,
a9
,
a10
,
a11
,
a12
);

492 
	`GENERIC_MONUNLOCK
();

493 (
ªt
);

494 
	}
}

497 
	$m⁄_ª°¨t
(
vÆ
)

499 
ªt
;

501 
	`GENERIC_MONLOCK
();

502 
ªt
 = 
	`_m⁄ª°¨t
(
vÆ
);

503 
	`GENERIC_MONUNLOCK
();

504 (
ªt
);

505 
	}
}

508 
	$m⁄_gëívp
()

510 *
ªt
;

512 
	`ENV_MONLOCK
();

513 
ªt
 = 
	`_gëívp
();

514 
	`ENV_MONUNLOCK
();

515 (
ªt
);

516 
	}
}

519 
	$m⁄_gëív
(*
«me
)

521 *
ªt
;

523 
	`ENV_MONLOCK
();

524 
ªt
 = 
	`_gëív
(
«me
);

525 
	`ENV_MONUNLOCK
();

526 (
ªt
);

527 
	}
}

530 
	$m⁄_£ãnv
(*
«me
,*
vÆ
)

532 
ªt
;

534 
	`ENV_MONLOCK
();

535 
ªt
 = 
	`_£ãnv
(
«me
,
vÆ
);

536 
	`ENV_MONUNLOCK
();

537 (
ªt
);

538 
	}
}

541 
	$m⁄_gësym
(*
«me
,*
buf
, 
bufsize
)

543 *
ªt
;

545 
	`ENV_MONLOCK
();

546 
ªt
 = 
	`_gësym
(
«me
,
buf
,
bufsize
);

547 
	`ENV_MONUNLOCK
();

548 (
ªt
);

549 
	}
}

552 
	$m⁄_tfsöô
()

554 
ªt
;

556 
	`TFS_MONLOCK
();

557 
ªt
 = 
	`_tfsöô
();

558 
	`TFS_MONUNLOCK
();

559 (
ªt
);

560 
	}
}

563 
	$m⁄_tfßdd
(*
«me
, *
öfo
, *
Êags
, *
§c
, 
size
)

565 
ªt
;

567 
	`TFS_MONLOCK
();

568 
ªt
 = 
	`_tfßdd
(
«me
,
öfo
,
Êags
,
§c
,
size
);

569 
	`TFS_MONUNLOCK
();

570 (
ªt
);

571 
	}
}

574 
	$m⁄_tf¶ök
(*
§c
, *
èrgë
)

576 
ªt
;

578 
	`TFS_MONLOCK
();

579 
ªt
 = 
	`_tf¶ök
(
§c
,
èrgë
);

580 
	`TFS_MONUNLOCK
();

581 (
ªt
);

582 
	}
}

585 
	$m⁄_tfsu∆ök
(*
«me
)

587 
ªt
;

589 
	`TFS_MONLOCK
();

590 
ªt
 = 
	`_tfsu∆ök
(
«me
);

591 
	`TFS_MONUNLOCK
();

592 (
ªt
);

593 
	}
}

596 
	$m⁄_tf§un
(**
«me
,
vîbo£
)

598 
ªt
;

600 
	`TFS_MONLOCK
();

601 
ªt
 = 
	`_tf§un
(
«me
,
vîbo£
);

602 
	`TFS_MONUNLOCK
();

603 (
ªt
);

604 
	}
}

606 
tfshdr
 *

607 
	$m⁄_tf¢ext
(
tfshdr
 *
Â
)

609 
tfshdr
 *
ªt
;

611 
	`TFS_MONLOCK
();

612 
ªt
 = 
	`_tf¢ext
(
Â
);

613 
	`TFS_MONUNLOCK
();

614 (
ªt
);

615 
	}
}

618 
	$m⁄_tf°runˇã
(
tfd
, 
Àn
)

620 
ªt
;

622 
	`TFS_MONLOCK
();

623 
ªt
 = 
	`_tf°runˇã
(
tfd
,
Àn
);

624 
	`TFS_MONUNLOCK
();

625 (
ªt
);

626 
	}
}

629 
	$m⁄_tf£of
(
tfd
)

631 
ªt
;

633 
	`TFS_MONLOCK
();

634 
ªt
 = 
	`_tf£of
(
tfd
);

635 
	`TFS_MONUNLOCK
();

636 (
ªt
);

637 
	}
}

640 
	$m⁄_tfsf°©
(*
«me
, 
tfshdr
 *
Â
)

642 
ªt
;

644 
	`TFS_MONLOCK
();

645 
ªt
 = 
	`_tfsf°©
(
«me
,
Â
);

646 
	`TFS_MONUNLOCK
();

647 (
ªt
);

648 
	}
}

650 
tfshdr
 *

651 
	$m⁄_tfs°©
(*
«me
)

653 
tfshdr
 *
ªt
;

655 
	`TFS_MONLOCK
();

656 
ªt
 = 
	`_tfs°©
(
«me
);

657 
	`TFS_MONUNLOCK
();

658 (
ªt
);

659 
	}
}

662 
	$m⁄_tf§ód
(
fd
, *
buf
, 
˙t
)

664 
ªt
;

666 
	`TFS_MONLOCK
();

667 
ªt
 = 
	`_tf§ód
(
fd
,
buf
,
˙t
);

668 
	`TFS_MONUNLOCK
();

669 (
ªt
);

670 
	}
}

673 
	$m⁄_tfswrôe
(
fd
, *
buf
, 
˙t
)

675 
ªt
;

677 
	`TFS_MONLOCK
();

678 
ªt
 = 
	`_tfswrôe
(
fd
,
buf
,
˙t
);

679 
	`TFS_MONUNLOCK
();

680 (
ªt
);

681 
	}
}

684 
	$m⁄_tfs›í
(*
fûe
,
Êagmode
,*
buf
)

686 
ªt
;

688 
	`TFS_MONLOCK
();

689 
ªt
 = 
	`_tfs›í
(
fûe
,
Êagmode
,
buf
);

690 
	`TFS_MONUNLOCK
();

691 (
ªt
);

692 
	}
}

695 
	$m⁄_tfs˛o£
(
fd
,*
öfo
)

697 
ªt
;

699 
	`TFS_MONLOCK
();

700 
ªt
 = 
	`_tfs˛o£
(
fd
,
öfo
);

701 
	`TFS_MONUNLOCK
();

702 (
ªt
);

703 
	}
}

706 
	$m⁄_tfs£ek
(
fd
, 
off£t
, 
whí˚
)

708 
ªt
;

710 
	`TFS_MONLOCK
();

711 
ªt
 = 
	`_tfs£ek
(
fd
,
off£t
,
whí˚
);

712 
	`TFS_MONUNLOCK
();

713 (
ªt
);

714 
	}
}

717 
	$m⁄_tfsgëlöe
(
fd
,*
bp
,
max
)

719 
ªt
;

721 
	`TFS_MONLOCK
();

722 
ªt
 = 
	`_tfsgëlöe
(
fd
,
bp
,
max
);

723 
	`TFS_MONUNLOCK
();

724 (
ªt
);

725 
	}
}

728 
	$m⁄_tfsùmod
(*
«me
,*
buf
,
off£t
,
size
)

730 
ªt
;

732 
	`TFS_MONLOCK
();

733 
ªt
 = 
	`_tfsùmod
(
«me
,
buf
,
off£t
,
size
);

734 
	`TFS_MONUNLOCK
();

735 (
ªt
);

736 
	}
}

739 
	$m⁄_tfs˘æ
(
rq°
,
¨g1
,
¨g2
)

741 
ªt
;

743 
	`TFS_MONLOCK
();

744 
ªt
 = 
	`_tfs˘æ
(
rq°
,
¨g1
,
¨g2
);

745 
	`TFS_MONUNLOCK
();

746 (
ªt
);

747 
	}
}

750 
	$m⁄_tf°ñl
(
fd
)

752 
ªt
;

754 
	`TFS_MONLOCK
();

755 
ªt
 = 
	`_tf°ñl
(
fd
);

756 
	`TFS_MONUNLOCK
();

757 (
ªt
);

758 
	}
}

761 
	$m⁄_addcomm™d
(
m⁄Comm™d
 *
cmdli°
, *
cmdlvl
)

763 
ªt
;

765 
	`GENERIC_MONLOCK
();

766 
ªt
 = 
	`_addcomm™d
(
cmdli°
,
cmdlvl
);

767 
	`GENERIC_MONUNLOCK
();

768 (
ªt
);

769 
	}
}

772 
	$m⁄_docomm™d
(*
cmdlöe
,
vîbo£
)

774 
ªt
;

776 
	`GENERIC_MONLOCK
();

777 
ªt
 = 
	`_docomm™d
(
cmdlöe
,
vîbo£
);

778 
	`GENERIC_MONUNLOCK
();

779 (
ªt
);

780 
	}
}

783 
	$m⁄_gë¨gv
(*
¨gc
,***
¨gv
)

785 
	`GENERIC_MONLOCK
();

786 
	`_gë¨gv
(
¨gc
,
¨gv
);

787 
	`GENERIC_MONUNLOCK
();

788 
	}
}

791 
	$m⁄_x¸c16
(*
buf
,
nbyãs
)

793 
ªt
;

795 
	`GENERIC_MONLOCK
();

796 
ªt
 = 
	`_x¸c16
((*)
buf
,
nbyãs
);

797 
	`GENERIC_MONUNLOCK
();

798 (
ªt
);

799 
	}
}

802 
	$m⁄_ötsoff
()

804 
ªt
;

806 
	`GENERIC_MONLOCK
();

807 
ªt
 = 
	`_ötsoff
();

808 
	`GENERIC_MONUNLOCK
();

809 (
ªt
);

810 
	}
}

813 
	$m⁄_öt§e°‹e
(
m§
)

815 
	`GENERIC_MONLOCK
();

816 
	`_öt§e°‹e
(
m§
);

817 
	`GENERIC_MONUNLOCK
();

818 
	}
}

821 
	$m⁄_≠≥xô
(
vÆ
)

823 
	`GENERIC_MONLOCK
();

824 
	`_≠≥xô
(
vÆ
);

825 
	`GENERIC_MONUNLOCK
();

826 
	}
}

828 #ifde‡
MALLOC_DEBUG


830 
	$m⁄_mÆloc
(
size
,*
‚ame
,
Êöe
)

832 *
ªt
;

834 
	`HEAP_MONLOCK
();

835 
ªt
 = 
	`_mÆloc
(
size
,
‚ame
,
Êöe
);

836 
	`HEAP_MONUNLOCK
();

837 (
ªt
);

838 
	}
}

841 
	$m⁄_ªÆloc
(*
buf
, 
size
, *
‚ame
, 
Êöe
)

843 *
ªt
;

845 
	`HEAP_MONLOCK
();

846 
ªt
 = 
	`_ªÆloc
(
buf
,
size
, 
‚ame
, 
Êöe
);

847 
	`HEAP_MONUNLOCK
();

848 (
ªt
);

849 
	}
}

852 
	$m⁄_mÆloc
(
size
)

854 *
ªt
;

856 
	`HEAP_MONLOCK
();

857 
ªt
 = 
	`_mÆloc
(
size
);

858 
	`HEAP_MONUNLOCK
();

859 (
ªt
);

860 
	}
}

863 
	$m⁄_ªÆloc
(*
buf
, 
size
)

865 *
ªt
;

867 
	`HEAP_MONLOCK
();

868 
ªt
 = 
	`_ªÆloc
(
buf
,
size
);

869 
	`HEAP_MONUNLOCK
();

870 (
ªt
);

871 
	}
}

875 
	$m⁄_‰ì
(*
˝
)

877 
	`HEAP_MONLOCK
();

878 
	`_‰ì
(
˝
);

879 
	`HEAP_MONUNLOCK
();

880 
	}
}

883 
	$m⁄_gëlöe
(*
buf
,
max
,
Àdô
)

885 
ªt
;

887 
	`BLOCKING_MONLOCK
();

888 
ªt
 = 
	`_gëlöe
(
buf
,
max
,
Àdô
);

889 
	`BLOCKING_MONUNLOCK
();

890 (
ªt
);

891 
	}
}

894 
	$m⁄_decom¥ess
(*
§c
,
§csize
,*
de°
)

896 
ªt
;

898 
	`GENERIC_MONLOCK
();

899 
ªt
 = 
	`_decom¥ess
(
§c
,
§csize
,
de°
);

900 
	`GENERIC_MONUNLOCK
();

901 (
ªt
);

902 
	}
}

905 
	$m⁄_hó≥xãnd
(*
ba£
,
size
)

907 
ªt
;

909 
	`GENERIC_MONLOCK
();

910 
ªt
 = 
	`_hó≥xãnd
(
ba£
,
size
);

911 
	`GENERIC_MONUNLOCK
();

912 (
ªt
);

913 
	}
}

916 
	$m⁄_bbc
(*
fûíame
, 
löío
)

918 
	`_bbc
(
fûíame
, 
löío
);

919 
	}
}

922 
	$m⁄_¥ofûî
(*
pd©a
)

924 
	`_¥ofûî
(
pd©a
);

925 
	}
}

928 
	$m⁄_memåa˚
(

929 *
fmt
,

930 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

931 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12


934 
	`_memåa˚
(
fmt
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
,
a9
,
a10
,
a11
,
a12
);

935 
	}
}

938 
	$m⁄_vîsi⁄
()

940 *
ªt
;

942 
	`GENERIC_MONLOCK
();

943 
ªt
 = 
	`_vîsi⁄
();

944 
	`GENERIC_MONUNLOCK
();

945 (
ªt
);

946 
	}
}

949 
	$m⁄_w¨m°¨t
(
mask
)

951 
	`GENERIC_MONLOCK
();

952 
	`_≠pw¨m°¨t
(
mask
);

953 
	`GENERIC_MONUNLOCK
();

954 
	}
}

957 
	$m⁄_pcicfgwrôe
(
öãrÁ˚
,
bus
,
dev
,
func
,
ªg
,

958 
vÆ
)

960 
ªtvÆ
;

962 
	`GENERIC_MONLOCK
();

963 
ªtvÆ
 = 
	`_pcicfgwrôe
(
öãrÁ˚
,
bus
,
dev
,
func
,
ªg
,
vÆ
);

964 
	`GENERIC_MONUNLOCK
();

965 (
ªtvÆ
);

966 
	}
}

969 
	$m⁄_pcicfgªad
(
öãrÁ˚
,
bus
,
dev
, 
func
,
ªg
)

971 
ªtvÆ
;

973 
	`GENERIC_MONLOCK
();

974 
ªtvÆ
 = 
	`_pcicfgªad
(
öãrÁ˚
,
bus
,
dev
,
func
,
ªg
);

975 
	`GENERIC_MONUNLOCK
();

976 (
ªtvÆ
);

977 
	}
}

980 
	$m⁄_pci˘æ
(
öãrÁ˚
, 
cmd
, 
¨g1
, 
¨g2
)

982 
vÆ
;

984 
	`GENERIC_MONLOCK
();

985 
vÆ
 = 
	`_pci˘æ
(
öãrÁ˚
,
cmd
,
¨g1
,
¨g2
);

986 
	`GENERIC_MONUNLOCK
();

987 (
vÆ
);

988 
	}
}

991 
	$m⁄_i2c˘æ
(
öãrÁ˚
, 
cmd
, 
¨g1
, 
¨g2
)

993 
vÆ
;

995 
	`GENERIC_MONLOCK
();

996 
vÆ
 = 
	`_i2c˘æ
(
öãrÁ˚
,
cmd
,
¨g1
,
¨g2
);

997 
	`GENERIC_MONUNLOCK
();

998 (
vÆ
);

999 
	}
}

1002 
	$m⁄_i2cwrôe
(
öãrÁ˚
, 
bigaddr
, *
d©a
, 
Àn
)

1004 
vÆ
;

1006 
	`GENERIC_MONLOCK
();

1007 
vÆ
 = 
	`_i2cwrôe
(
öãrÁ˚
,
bigaddr
,
d©a
,
Àn
);

1008 
	`GENERIC_MONUNLOCK
();

1009 (
vÆ
);

1010 
	}
}

1013 
	$m⁄_i2¸ód
(
öãrÁ˚
, 
bigaddr
, *
d©a
, 
Àn
)

1015 
vÆ
;

1017 
	`GENERIC_MONLOCK
();

1018 
vÆ
 = 
	`_i2¸ód
(
öãrÁ˚
,
bigaddr
,
d©a
,
Àn
);

1019 
	`GENERIC_MONUNLOCK
();

1020 (
vÆ
);

1021 
	}
}

1024 
	$m⁄_dñay
(
m£c
)

1026 
	`GENERIC_MONLOCK
();

1027 
	`_m⁄dñay
(
m£c
);

1028 
	`GENERIC_MONUNLOCK
();

1029 
	}
}

1032 
	$m⁄_timî
(
cmd
, *
¨g
)

1034 
ªt
;

1036 
	`GENERIC_MONLOCK
();

1037 
ªt
 = 
	`_m⁄timî
(
cmd
, 
¨g
);

1038 
	`GENERIC_MONUNLOCK
();

1039 (
ªt
);

1040 
	}
}

1043 
	$m⁄_£ndíëpkt
(*
pkt
,
size
)

1045 
ªt
;

1047 
	`GENERIC_MONLOCK
();

1048 
ªt
 = 
	`_£ndíë
(
pkt
,
size
);

1049 
	`GENERIC_MONUNLOCK
();

1050 (
ªt
);

1051 
	}
}

1054 
	$m⁄_ªcvíëpkt
(*
pkt
,
size
)

1056 
ªt
;

1058 
	`GENERIC_MONLOCK
();

1059 
ªt
 = 
	`_ªcvíë
(
pkt
,
size
);

1060 
	`GENERIC_MONUNLOCK
();

1061 (
ªt
);

1062 
	}
}

1065 
	$m⁄_¥öçkt
(*
buf
,
size
, 
öcomög
)

1067 
	`GENERIC_MONLOCK
();

1068 
	`_¥öçkt
(
buf
,
size
,
öcomög
);

1069 
	`GENERIC_MONUNLOCK
();

1070 
	}
}

1073 
	$m⁄_Êashovîride
(*
Êashöfo
,
gë
,
b™k
)

1075 
ªt
;

1077 
	`TFS_MONLOCK
();

1078 
ªt
 = 
	`_Êashovîride
(
Êashöfo
,
gë
,
b™k
);

1079 
	`TFS_MONUNLOCK
();

1080 (
ªt
);

1081 
	}
}

1084 
	$m⁄_Êashwrôe
(*
de°
,*
§c
,
byã˙t
)

1086 
ªt
;

1088 
	`TFS_MONLOCK
();

1089 
ªt
 = 
	`_Êashwrôe
(
de°
,
§c
,
byã˙t
);

1090 
	`TFS_MONUNLOCK
();

1091 (
ªt
);

1092 
	}
}

1095 
	$m⁄_Êashîa£
(
¢um
)

1097 
ªt
;

1099 
	`TFS_MONLOCK
();

1100 
ªt
 = 
	`_Êashîa£
(
¢um
);

1101 
	`TFS_MONUNLOCK
();

1102 (
ªt
);

1103 
	}
}

1106 
	$m⁄_Êashöfo
(
¢um
, *
size
, **
ba£
)

1108 
ªt
;

1110 
	`TFS_MONLOCK
();

1111 
ªt
 = 
	`_Êashöfo
(
¢um
,
size
,
ba£
);

1112 
	`TFS_MONUNLOCK
();

1113 (
ªt
);

1114 
	}
}

1117 
	$m⁄_assignh™dÀr
(
hnum
, 
¨g1
, 
¨g2
)

1119 
ªt
;

1121 
	`GENERIC_MONLOCK
();

1122 
ªt
 = 
	`_assign_h™dÀr
(
hnum
,
¨g1
,
¨g2
);

1123 
	`GENERIC_MONUNLOCK
();

1124 (
ªt
);

1125 
	}
}

1128 
	$m⁄_w©chdog
()

1130 
ªt
;

1132 
	`GENERIC_MONLOCK
();

1133 
ªt
 = 
	`_w©chdog
();

1134 
	`GENERIC_MONUNLOCK
();

1135 (
ªt
);

1136 
	}
}

1139 
	$m⁄_¥ötmem
(*
mem
, 
size
, 
ascii
)

1141 
	`GENERIC_MONLOCK
();

1142 
	`_¥ötmem
(
mem
,
size
,
ascii
);

1143 
	`GENERIC_MONUNLOCK
();

1144 
	}
}

1147 
	$m⁄_p‹tcmd
(
cmd
, *
¨g
)

1149 
ªt
;

1151 
	`GENERIC_MONLOCK
();

1152 
ªt
 = 
	`_p‹tcmd
(
cmd
,
¨g
);

1153 
	`GENERIC_MONUNLOCK
();

1154 (
ªt
);

1155 
	}
}

1158 
	$m⁄_timeofday
(
cmd
, *
¨g
)

1160 
ªt
;

1162 
	`GENERIC_MONLOCK
();

1163 
ªt
 = 
	`_timeofday
(
cmd
,
¨g
);

1164 
	`GENERIC_MONUNLOCK
();

1165 (
ªt
);

1166 
	}
}

	@src/lib/libbsp/shared/umon/monlib.h

40 #i‚de‡
_MONLIB_H_


41 
	#_MONLIB_H_


	)

43 
	~<um⁄/tfs.h
>

44 
	~<um⁄/˛i.h
>

46 #ifde‡
__˝lu•lus


58 
m⁄C⁄√˘
((*
m⁄±r
)(,*,*,*),

59 (*
lock
)(),(*
u∆ock
)());

60 
m⁄_gë¨gv
(*
¨gc
,***
¨gv
);

61 
m⁄_öt§e°‹e
(
ﬁdvÆ
);

62 
m⁄_≠≥xô
(
exô_vÆue
);

63 
m⁄_‰ì
(*
buf„r
);

64 
m⁄_¥ofûî
(*
pd©a
);

65 
m⁄_bbc
(*
fûíame
, 
löíum
);

66 
m⁄_w¨m°¨t
(
mask
);

67 
m⁄_dñay
(
m£c
);

68 
m⁄_¥öçkt
(*
buf
, 
size
, 
öcomög
);

69 
m⁄_¥ötmem
(*
mem
, 
size
, 
ascii
);

72 
m⁄_com
(
cmd
,*
¨g1
,*
¨g2
,*
¨g3
);

73 
m⁄_timî
(
cmd
, * 
¨g
);

74 
m⁄_£ãnv
(*
v¨«me
,*
vÆue
);

75 
m⁄_putch¨
(
c
);

76 
m⁄_gëch¨
();

77 
m⁄_gŸach¨
();

78 
m⁄_gëbyãs
(*
buf
,
cou¡
,
block
);

79 
m⁄_ª°¨t
(
ª°¨t_vÆue
);

80 
m⁄_tfsöô
();

81 
m⁄_tfsu∆ök
(*
fûíame
);

82 
m⁄_tf¶ök
(*
sour˚
, *
èrgë
);

83 
m⁄_tf§un
(**
¨gli°
,
vîbosôy
);

84 
m⁄_tfsf°©
(*
fûíame
,
tfshdr
 *
tÂ
);

85 
m⁄_tf£of
(
fûe_des¸ùt‹
);

86 
m⁄_tf°runˇã
(
fûe_des¸ùt‹
,
Àngth
);

87 
m⁄_tf§ód
(
fûe_des¸ùt‹
,*
buf„r
,
size
);

88 
m⁄_tfswrôe
(
fûe_des¸ùt‹
,*
buf„r
,
size
);

89 
m⁄_tfs›í
(*
fûíame
,
mode
,*
buf„r
);

90 
m⁄_tfs˛o£
(
fûe_des¸ùt‹
,*
öfo
);

91 
m⁄_tfs£ek
(
fûe_des¸ùt‹
,
off£t
,
whí˚
);

92 
m⁄_tfsgëlöe
(
fûe_des¸ùt‹
,*
buf„r
,
bufsize
);

93 
m⁄_tfsùmod
(*
«me
,*
buf„r
,
off£t
,
size
);

94 
m⁄_addcomm™d
(
m⁄Comm™d
 *
comm™d_li°
,*);

95 
m⁄_docomm™d
(*
cmdlöe
,
vîbosôy
);

96 
m⁄_gëlöe
(*
buf„r
,
max
,
Àdô
);

97 
m⁄_decom¥ess
(*
§c
,
§csize
,*
de°
);

98 
m⁄_hó≥xãnd
(*
ba£
,
size
);

99 
m⁄_pcicfgwrôe
(
öãrÁ˚
,
bus
,
dev
,
func
,
ªg
,

100 
vÆ
);

101 
m⁄_tfßdd
(*
fûíame
, *
öfo
, *
Êags
,

102 *
§c
, 
size
);

103 
m⁄_i2cwrôe
(
öãrÁ˚
, 
bigaddr
, *
d©a
,

104 
Àn
);

105 
m⁄_i2¸ód
(
öãrÁ˚
, 
bigaddr
, *
d©a
,

106 
Àn
);

107 
m⁄_£ndíëpkt
(*
pkt
, 
Àn
);

108 
m⁄_ªcvíëpkt
(*
pkt
, 
Àn
);

109 
m⁄_Êashovîride
(*
Êashöfo
, 
gë
, 
b™k
);

110 
m⁄_Êashîa£
(
¢um
);

111 
m⁄_Êashwrôe
(*
de°
,*
§c
, 
byã˙t
);

112 
m⁄_Êashöfo
(
¢um
,*
size
, **
ba£
);

113 
m⁄_w©chdog
();

114 
m⁄_timeofday
(
cmd
, *
¨g
);

116 *
m⁄_gësym
(*
sym«me
, *
buf
, 
bufsize
);

117 *
m⁄_gëív
(*
v¨«me
);

118 *
m⁄_gëívp
();

119 *
m⁄_vîsi⁄
();

120 #ifde‡
MALLOC_DEBUG


121 *
m⁄_mÆloc
(
size
,*
fûe
, 
löe
);

122 *
m⁄_ªÆloc
(*
buf
,
size
,*
fûe
, 
löe
);

124 *
m⁄_mÆloc
(
size
);

125 *
m⁄_ªÆloc
(*
buf
,
size
);

128 
m⁄_tfs˘æ
(
comm™d
,
¨g1
,
¨g2
);

129 
m⁄_tf°ñl
(
fûe_des¸ùt‹
);

130 
m⁄_p‹tcmd
(
cmd
, *
¨g
);

132 
m⁄_x¸c16
(*
buf„r
,
Àngth
);

134 
m⁄_ötsoff
();

136 
m⁄_pcicfgªad
(
öãrÁ˚
,
bus
,
dev
,

137 
func
,
ªg
);

139 
m⁄_pci˘æ
(
öãrÁ˚
, 
cmd
,

140 
¨g1
, 
¨g2
);

142 
m⁄_i2c˘æ
(
öãrÁ˚
, 
cmd
,

143 
¨g1
, 
¨g2
);

145 
m⁄_assignh™dÀr
(
hnum
,

146 
¨g1
,
¨g2
);

148 
tfshdr
 *
m⁄_tf¢ext
(tfshd∏*
tÂ
);

149 
tfshdr
 *
m⁄_tfs°©
(*
fûíame
);

151 #i‡
SHOWVARARGS


152 
m⁄_memåa˚
(*
fmt
, ...);

153 
m⁄_¥ötf
(*
fmt
, ...);

154 
m⁄_˝rötf
(*
fmt
, ...);

155 
m⁄_•rötf
(*,*
fmt
, ...);

157 
m⁄_memåa˚
();

158 
m⁄_¥ötf
();

159 
m⁄_˝rötf
();

160 
m⁄_•rötf
();

163 #ifde‡
__˝lu•lus


170 
	#GETMONFUNC_PUTCHAR
 1

	)

171 
	#GETMONFUNC_GETCHAR
 2

	)

172 
	#GETMONFUNC_GOTACHAR
 3

	)

173 
	#GETMONFUNC_GETBYTES
 4

	)

174 
	#GETMONFUNC_PRINTF
 5

	)

175 
	#GETMONFUNC_CPRINTF
 6

	)

176 
	#GETMONFUNC_SPRINTF
 7

	)

177 
	#GETMONFUNC_RESTART
 8

	)

178 
	#GETMONFUNC_GETENV
 9

	)

179 
	#GETMONFUNC_SETENV
 10

	)

180 
	#GETMONFUNC_TFSINIT
 11

	)

181 
	#GETMONFUNC_TFSADD
 12

	)

182 
	#GETMONFUNC_TFSUNLINK
 13

	)

183 
	#GETMONFUNC_TFSRUN
 14

	)

184 
	#GETMONFUNC_TFSNEXT
 15

	)

185 
	#GETMONFUNC_TFSSTAT
 16

	)

186 
	#GETMONFUNC_TFSREAD
 17

	)

187 
	#GETMONFUNC_TFSWRITE
 18

	)

188 
	#GETMONFUNC_TFSOPEN
 19

	)

189 
	#GETMONFUNC_TFSCLOSE
 20

	)

190 
	#GETMONFUNC_TFSSEEK
 21

	)

191 
	#GETMONFUNC_TFSGETLINE
 22

	)

192 
	#GETMONFUNC_TFSIPMOD
 23

	)

193 
	#GETMONFUNC_TFSCTRL
 24

	)

194 
	#GETMONFUNC_ADDCOMMAND
 25

	)

195 
	#GETMONFUNC_DOCOMMAND
 26

	)

196 
	#GETMONFUNC_GETARGV
 27

	)

197 
	#GETMONFUNC_CRC16
 28

	)

198 
	#GETMONFUNC_CRC32
 29

	)

199 
	#GETMONFUNC_PIOGET
 30

	)

200 
	#GETMONFUNC_PIOSET
 31

	)

201 
	#GETMONFUNC_PIOCLR
 32

	)

202 
	#GETMONFUNC_INTSOFF
 33

	)

203 
	#GETMONFUNC_INTSRESTORE
 34

	)

204 
	#GETMONFUNC_APPEXIT
 35

	)

205 
	#GETMONFUNC_MALLOC
 36

	)

206 
	#GETMONFUNC_FREE
 37

	)

207 
	#GETMONFUNC_GETLINE
 38

	)

208 
	#GETMONFUNC_TFSFSTAT
 39

	)

209 
	#GETMONFUNC_TFSEOF
 40

	)

210 
	#GETMONFUNC_DECOMPRESS
 41

	)

211 
	#GETMONFUNC_TFSTRUNCATE
 42

	)

212 
	#GETMONFUNC_HEAPXTEND
 43

	)

213 
	#GETMONFUNC_PROFILER
 44

	)

214 
	#GETMONFUNC_TFSLINK
 45

	)

215 
	#GETMONFUNC_BBC
 46

	)

216 
	#GETMONFUNC_MEMTRACE
 47

	)

217 
	#GETMONFUNC_TFSTELL
 48

	)

218 
	#GETMONFUNC_VERSION
 49

	)

219 
	#GETMONFUNC_WARMSTART
 50

	)

220 
	#GETMONFUNC_PCICFGREAD
 51

	)

221 
	#GETMONFUNC_PCICFGWRITE
 52

	)

222 
	#GETMONFUNC_PCICONTROL
 53

	)

223 
	#GETMONFUNC_I2CREAD
 54

	)

224 
	#GETMONFUNC_I2CWRITE
 55

	)

225 
	#GETMONFUNC_I2CCONTROL
 56

	)

226 
	#GETMONFUNC_MONDELAY
 57

	)

227 
	#GETMONFUNC_GETENVP
 58

	)

228 
	#GETMONFUNC_REALLOC
 59

	)

229 
	#GETMONFUNC_SENDENETPKT
 60

	)

230 
	#GETMONFUNC_RECVENETPKT
 61

	)

231 
	#GETMONFUNC_GETSYM
 62

	)

232 
	#GETMONFUNC_PRINTPKT
 63

	)

233 
	#GETMONFUNC_FLASHWRITE
 64

	)

234 
	#GETMONFUNC_FLASHERASE
 65

	)

235 
	#GETMONFUNC_FLASHINFO
 66

	)

236 
	#GETMONFUNC_ASSIGNHDLR
 67

	)

237 
	#GETMONFUNC_WATCHDOG
 68

	)

238 
	#GETMONFUNC_PRINTMEM
 69

	)

239 
	#GETMONFUNC_PORTCMD
 70

	)

240 
	#GETMONFUNC_TIMEOFDAY
 71

	)

241 
	#GETMONFUNC_TIMER
 72

	)

242 
	#GETMONFUNC_FLASHOVRRD
 73

	)

244 
	#CACHEFTYPE_DFLUSH
 200

	)

245 
	#CACHEFTYPE_IINVALIDATE
 201

	)

247 
	#CHARFUNC_PUTCHAR
 300

	)

248 
	#CHARFUNC_GETCHAR
 301

	)

249 
	#CHARFUNC_GOTACHAR
 302

	)

250 
	#CHARFUNC_RAWMODEON
 303

	)

251 
	#CHARFUNC_RAWMODEOFF
 304

	)

253 
	#ASSIGNFUNC_GETUSERLEVEL
 400

	)

258 
	#WARMSTART_IOINIT
 0x00000001

	)

259 
	#WARMSTART_BSSINIT
 0x00000002

	)

260 
	#WARMSTART_RUNMONRC
 0x00000004

	)

261 
	#WARMSTART_MONHEADER
 0x00000008

	)

262 
	#WARMSTART_TFSAUTOBOOT
 0x00000010

	)

263 
	#WARMSTART_BOARDINFO
 0x00000020

	)

264 
	#WARMSTART_ALL
 0xffffffff

	)

	@src/lib/libbsp/shared/umon/tfs.h

40 #i‚de‡
_tfs_h


41 
	#_tfs_h


	)

51 
	#TFSINFOSIZE
 23

	)

53 #i‚de‡
TFSNAMESIZE


54 
	#TFSNAMESIZE
 23

	)

57 #i‚de‡
TFS_CHANGELOG_FILE


58 
	#TFS_CHANGELOG_SIZE
 0

	)

59 
	#TFS_CHANGELOG_FILE
 ".tfschlog"

	)

62 #i‚de‡
SYMFILE


63 
	#SYMFILE
 "symtbl"

	)

66 
	#MINUSRLEVEL
 0

	)

67 
	#MAXUSRLEVEL
 3

	)

69 #i‚de‡
TFS_RESERVED


70 
	#TFS_RESERVED
 4

	)

75 
	#TFS_EXEC
 0x00000001

	)

76 
	#TFS_BRUN
 0x00000002

	)

77 
	#TFS_QRYBRUN
 0x00000004

	)

79 
	#TFS_SYMLINK
 0x00000008

	)

80 
	#TFS_EBIN
 0x00000010

	)

81 
	#TFS_CPRS
 0x00000040

	)

82 
	#TFS_IPMOD
 0x00000080

	)

83 
	#TFS_UNREAD
 0x00000100

	)

86 
	#TFS_ULVLMSK
 0x00000600

	)

87 
	#TFS_ULVL0
 0x00000000

	)

88 
	#TFS_ULVL1
 0x00000200

	)

89 
	#TFS_ULVL2
 0x00000400

	)

90 
	#TFS_ULVL3
 0x00000600

	)

91 
	#TFS_NSTALE
 0x00000800

	)

96 
	#TFS_ACTIVE
 0x00008000

	)

98 
	#TFS_ULVLMAX
 
TFS_ULVL3


	)

99 
	#TFS_USRLVL
(
f
Ë((f->
Êags
 & 
TFS_ULVLMSK
Ë>> 9)

	)

102 
	#TFS_RDONLY
 0x00010000

	)

103 
	#TFS_CREATE
 0x00020000

	)

105 
	#TFS_APPEND
 0x00040000

	)

108 
	#TFS_ALLFFS
 0x00080000

	)

109 
	#TFS_CREATERM
 0x00100000

	)

116 
	#TFS_RCFILE
 "m⁄rc"

	)

119 
	#TFS_ERRMSG
 1

	)

120 
	#TFS_MEMUSE
 2

	)

121 
	#TFS_MEMDEAD
 3

	)

122 
	#TFS_DEFRAG
 4

	)

123 
	#TFS_TELL
 5

	)

124 
	#TFS_UNOPEN
 7

	)

125 
	#TFS_FATOB
 8

	)

126 
	#TFS_FBTOA
 9

	)

127 
	#TFS_MEMAVAIL
 10

	)

128 
	#TFS_TIMEFUNCS
 11

	)

129 
	#TFS_DOCOMMAND
 12

	)

130 
	#TFS_INITDEV
 13

	)

131 
	#TFS_CHECKDEV
 14

	)

132 
	#TFS_DEFRAGDEV
 15

	)

133 
	#TFS_DEFRAGOFF
 16

	)

134 
	#TFS_DEFRAGON
 17

	)

135 
	#TFS_HEADROOM
 18

	)

136 
	#TFS_FCOUNT
 19

	)

142 
	stfshdr
 {

143 
	mhdrsize
;

144 
	mhdrvr¢
;

145 
	mfûsize
;

146 
	mÊags
;

147 
	mfû¸c
;

148 
	mhdr¸c
;

149 
	mmodtime
;

150 
tfshdr
 *
	m√xt
;

151 
	m«me
[
TFSNAMESIZE
+1];

152 
	möfo
[
TFSINFOSIZE
+1];

153 #i‡
TFS_RESERVED


154 
	mrsvd
[
TFS_RESERVED
];

158 
	#TFSHDRSIZ
 (
tfshdr
)

	)

161 
	#TFS_OKAY
 0

	)

162 
	#TFSERR_NOFILE
 -1

	)

163 
	#TFSERR_NOSLOT
 -2

	)

164 
	#TFSERR_EOF
 -3

	)

165 
	#TFSERR_BADARG
 -4

	)

166 
	#TFSERR_NOTEXEC
 -5

	)

167 
	#TFSERR_BADCRC
 -6

	)

168 
	#TFSERR_FILEEXISTS
 -7

	)

169 
	#TFSERR_FLASHFAILURE
 -8

	)

170 
	#TFSERR_WRITEMAX
 -9

	)

171 
	#TFSERR_RDONLY
 -10

	)

172 
	#TFSERR_BADFD
 -11

	)

173 
	#TFSERR_BADHDR
 -12

	)

174 
	#TFSERR_CORRUPT
 -13

	)

175 
	#TFSERR_MEMFAIL
 -14

	)

176 
	#TFSERR_NOTIPMOD
 -16

	)

177 
	#TFSERR_MUTEXFAILURE
 -17

	)

178 
	#TFSERR_FLASHFULL
 -18

	)

179 
	#TFSERR_USERDENIED
 -19

	)

180 
	#TFSERR_NAMETOOBIG
 -20

	)

181 
	#TFSERR_FILEINUSE
 -21

	)

182 
	#TFSERR_NOTCPRS
 -22

	)

183 
	#TFSERR_NOTAVAILABLE
 -23

	)

184 
	#TFSERR_BADFLAG
 -24

	)

185 
	#TFSERR_CLEANOFF
 -25

	)

186 
	#TFSERR_FLAKEYSOURCE
 -26

	)

187 
	#TFSERR_BADEXTENSION
 -27

	)

188 
	#TFSERR_MIN
 -100

	)

191 
	#TFS_BEGIN
 1

	)

192 
	#TFS_CURRENT
 2

	)

193 
	#TFS_END
 3

	)

196 
	#TFS_DELETED
(
Â
Ë(!((Â)->
Êags
 & 
TFS_ACTIVE
))

	)

197 
	#TFS_FILEEXISTS
(
Â
Ë((Â)->
Êags
 & 
TFS_ACTIVE
)

	)

198 
	#TFS_ISCPRS
(
Â
Ë((Â)->
Êags
 & 
TFS_CPRS
)

	)

199 
	#TFS_ISEXEC
(
Â
Ë((Â)->
Êags
 & 
TFS_EXEC
)

	)

200 
	#TFS_ISBOOT
(
Â
Ë((Â)->
Êags
 & 
TFS_BRUN
)

	)

201 
	#TFS_ISLINK
(
Â
Ë((Â)->
Êags
 & 
TFS_SYMLINK
)

	)

202 
	#TFS_STALE
(
Â
Ë(!((Â)->
Êags
 & 
TFS_NSTALE
))

	)

203 
	#TFS_FLAGS
(
Â
Ë((Â)->
Êags
)

	)

204 
	#TFS_NAME
(
Â
Ë((Â)->
«me
)

	)

205 
	#TFS_SIZE
(
Â
Ë((Â)->
fûsize
)

	)

206 
	#TFS_TIME
(
Â
Ë((Â)->
modtime
)

	)

207 
	#TFS_INFO
(
Â
Ë((Â)->
öfo
)

	)

208 
	#TFS_NEXT
(
Â
Ë((Â)->
√xt
)

	)

209 
	#TFS_CRC
(
Â
Ë((Â)->
fû¸c
)

	)

210 
	#TFS_ENTRY
(
Â
Ë((Â)->
íåy
)

	)

211 
	#TFS_BASE
(
Â
Ë((*)(Â)+(Â)->
hdrsize
)

	)

213 
tfshdr
 
	tTFILE
;

	@src/lib/libbsp/shared/umon/tfsDriver.c

22 
	~<°dio.h
>

23 
	~<°dlib.h
>

24 
	~<°rög.h
>

25 
	~<uni°d.h
>

26 
	~<î∫o.h
>

27 
	~<f˙é.h
>

28 
	~<öây≥s.h
>

29 
	~<πems.h
>

30 
	~<πems/libio.h
>

31 
	~<πems/libio_.h
>

32 
	~<πems/£ãº.h
>

33 
	~<πems/b•Io.h
>

34 
	~<πems/um⁄.h
>

36 
	~<um⁄/tfs.h
>

37 
	~<um⁄/m⁄lib.h
>

39 #ifde‡
RTEMS_TFS_DRIVER_DEBUG


40 
	#RTEMS_TFS_DEBUG
 1

	)

42 
	#RTEMS_TFS_DEBUG
 0

	)

45 
	#MAXFILESIZE
 0x4000

	)

46 
	#MAXTFDS
 15

	)

50 #i‚de‡
√wlib_tfdlock


51 
	#√wlib_tfdlock
()

	)

54 #i‚de‡
√wlib_tfdu∆ock


55 
	#√wlib_tfdu∆ock
()

	)

60 
	stfdöfo
 {

61 
	möu£
;

62 
	mtfd
;

63 *
	mbuf
;

64 
	m«me
[
TFSNAMESIZE
+1];

65 
	möfo
[
TFSNAMESIZE
+1];

66 } 
	gtfdèbÀ
[
MAXTFDS
];

71 
	gTFS_PATHNAME_PREFIX
[128];

73 c⁄° 
πems_fûesy°em_›î©i⁄s_èbÀ
 
	gπems_tfs_›s
;

74 c⁄° 
πems_fûesy°em_fûe_h™dÀrs_r
 
	gπems_tfs_h™dÀrs
;

76 
boﬁ
 
	$πems_tfs_is_dúe˘‹y
(

77 c⁄° *
∑th
,

78 
size_t
 
∑thÀn


81  
∑th
 [
∑thÀn
 - 1] == '/';

82 
	}
}

84 
	$πems_tfs_mou¡_me
(

85 
πems_fûesy°em_mou¡_èbÀ_íåy_t
 *
mt_íåy
,

86 c⁄° *
d©a


89 *
roŸ_∑th
 = 
	`°rdup
("/");

91 i‡(
roŸ_∑th
 =
NULL
) {

92 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
(
ENOMEM
);

95 
mt_íåy
->
›s
 = &
πems_tfs_›s
;

96 
mt_íåy
->
mt_fs_roŸ
->
loˇti⁄
.
h™dÀrs
 = &
πems_tfs_h™dÀrs
;

97 
mt_íåy
->
mt_fs_roŸ
->
loˇti⁄
.
node_ac˚ss
 = 
roŸ_∑th
;

100 
	}
}

104 
	$πems_öôülize_tfs_fûesy°em
(

105 c⁄° *
∑th


108 
°©us
;

110 i‡(!
∑th
) {

111 
	`¥ötk
( "TFS: No mountÖoint specified\n" );

115 
	`°∫˝y
–
TFS_PATHNAME_PREFIX
, 
∑th
, (TFS_PATHNAME_PREFIX) );

117 
°©us
 = 
	`mkdú
–
TFS_PATHNAME_PREFIX
, 
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO
 );

118 i‡–
°©us
 == -1 ) {

119 
	`¥ötk
–"TFS: U«bÀÅÿmkdú %s\n", 
TFS_PATHNAME_PREFIX
 );

120  
°©us
;

123 i‡(
	`πems_fûesy°em_ªgi°î
–"tfs", 
πems_tfs_mou¡_me
 ) < 0)

126 
°©us
 = 
	`mou¡
–"um⁄", 
TFS_PATHNAME_PREFIX
, "tfs", 
RTEMS_FILESYSTEM_READ_WRITE
, 
NULL
);

128 i‡(
°©us
 < 0) {

129 
	`¥ötk
–"TFS: U«bÀÅÿmou¡ o¿%s\n", 
TFS_PATHNAME_PREFIX
 );

130 
	`≥º‹
("TFS mount failed");

133 (
°©us
);

134 
	}
}

139 
	$fixP©h
(*
∑th
)

141 *
öp
, *
ouç
, *
ba£
;

143 
ouç
 = 
öp
 = 
∑th
;

144 
ba£
 = 
NULL
;

146 i‡(
öp
[0] == '.') {

147 i‡(
öp
[1] == '\0')

149 i‡(
öp
[1] == '/') {

150 
öp
 += 2;

153 i‡(
öp
[1] == '.') {

154 i‡(
öp
[2] == '\0') {

155 i‡((
ba£
 !
NULL
Ë&& (
ouç
 > base)) {

156 
ouç
--;

157 (
ouç
 > 
ba£
) && (outp[-1] != '/'))

158 
ouç
--;

162 i‡(
öp
[2] == '/') {

163 
öp
 += 3;

164 i‡(
ba£
 =
NULL
)

166 i‡(
ouç
 > 
ba£
) {

167 
ouç
--;

168 (
ouç
 > 
ba£
) && (outp[-1] != '/'))

169 
ouç
--;

175 i‡(
ba£
 =
NULL
)

176 
ba£
 = 
öp
;

177 
öp
[0] != '/') {

178 i‡((*
ouç
++ = *
öp
++) == '\0')

181 *
ouç
++ = '/';

182 
öp
[0] == '/')

183 
öp
++;

185 *
ouç
 = '\0';

186 
	}
}

188 
	$πems_tfs_evÆ_∑th
(
πems_fûesy°em_evÆ_∑th_c⁄ãxt_t
 *
£lf
)

190 
evÆ_Êags
 = 
	`πems_fûesy°em_evÆ_∑th_gë_Êags
(
£lf
);

192 i‡((
evÆ_Êags
 & 
RTEMS_FS_MAKE
) == 0) {

193 
rw
 = 
RTEMS_FS_PERMS_READ
 | 
RTEMS_FS_PERMS_WRITE
;

195 i‡((
evÆ_Êags
 & 
rw
) !=Ñw) {

196 
πems_fûesy°em_loˇti⁄_öfo_t
 *
cuºíéoc
 =

197 
	`πems_fûesy°em_evÆ_∑th_gë_cuºíéoc
(
£lf
);

198 *
cuºít
 = 
cuºíéoc
->
node_ac˚ss
;

199 
size_t
 
cuºíéí
 = 
	`°æí
(
cuºít
);

200 c⁄° *
∑th
 = 
	`πems_fûesy°em_evÆ_∑th_gë_∑th
(
£lf
);

201 
size_t
 
∑thÀn
 = 
	`πems_fûesy°em_evÆ_∑th_gë_∑thÀn
(
£lf
);

202 
size_t
 
Àn
 = 
cuºíéí
 + 
∑thÀn
;

204 
	`πems_fûesy°em_evÆ_∑th_˛ór_∑th
(
£lf
);

206 
cuºít
 = 
	`ªÆloc
(cuºít, 
Àn
 + 1);

207 i‡(
cuºít
 !
NULL
) {

208 
	`mem˝y
(
cuºít
 + 
cuºíéí
, 
∑th
, 
∑thÀn
);

209 
cuºít
 [
Àn
] = '\0';

210 i‡(!
	`πems_tfs_is_dúe˘‹y
(
cuºít
, 
Àn
)) {

211 
	`fixP©h
 (
cuºít
);

213 
cuºíéoc
->
node_ac˚ss
 = 
cuºít
;

215 
	`πems_fûesy°em_evÆ_∑th_îr‹
(
£lf
, 
ENOMEM
);

218 
	`πems_fûesy°em_evÆ_∑th_îr‹
(
£lf
, 
EINVAL
);

221 
	`πems_fûesy°em_evÆ_∑th_îr‹
(
£lf
, 
EIO
);

223 
	}
}

241 
	$πems_tfs_›í_w‹kî
(

242 
πems_libio_t
 *
i›
,

243 *
∑th
,

244 
oÊag
,

245 
mode_t
 
mode


248 
bìnhîe
 = 0;

249 
Êagmode
;

250 
tfdidx
, 
tfd
;

251 
tfdöfo
 *
tù
;

252 *
buf
, *
f°r
, *
i°r
, *
b°r
, 
∑thc›y
[
TFSNAMESIZE
*3+1];

254 i‡(
RTEMS_TFS_DEBUG
)

255 
	`¥ötk
("_›í_r(%s,0x%" 
PRIx32
 ",0x%" PRIx32 ")\n",
∑th
,
oÊag
,
mode
);

257 i‡(!
bìnhîe
) {

258 
	`√wlib_tfdlock
();

259 
tfdidx
=0;tfdidx<
MAXTFDS
;tfdidx++)

260 
tfdèbÀ
[
tfdidx
].
öu£
 = 0;

262 
tfdèbÀ
[0].
öu£
 = 1;

263 
tfdèbÀ
[1].
öu£
 = 1;

264 
tfdèbÀ
[2].
öu£
 = 1;

265 
	`√wlib_tfdu∆ock
();

266 
bìnhîe
 = 1;

269 
i°r
 = 
f°r
 = 
b°r
 = 
buf
 = (*)0;

274 i‡(
	`°æí
(
∑th
Ë> 
TFSNAMESIZE
*3) {

275 (
ENAMETOOLONG
);

277 
	`°r˝y
(
∑thc›y
,
∑th
);

283 
f°r
 = 
	`°rchr
(
∑thc›y
,',');

284 i‡(
f°r
) {

285 *
f°r
++ = 0;

286 
i°r
 = 
	`°rchr
(
f°r
,',');

287 i‡(
i°r
) {

288 *
i°r
++ = 0;

289 
b°r
 = 
	`°rchr
(
i°r
,',');

290 i‡(
b°r
)

291 *
b°r
++ = 0;

294 i‡(
	`°æí
(
∑thc›y
Ë> 
TFSNAMESIZE
) {

295 (
ENAMETOOLONG
);

297 i‡(
i°r
) {

298 i‡(
	`°æí
(
i°r
Ë> 
TFSNAMESIZE
) {

299 (
ENAMETOOLONG
);

305 i‡((
oÊag
 & (
O_CREAT
 | 
O_EXCL
)) == (O_CREAT | O_EXCL)) {

306 i‡(
	`m⁄_tfs°©
((*)
∑thc›y
)) {

307 (
EEXIST
);

318 
oÊag
 & 
O_ACCMODE
) {

319 
O_RDONLY
:

320 
Êagmode
 = 
TFS_RDONLY
;

322 
O_WRONLY
|
O_APPEND
:

323 
Êagmode
 = 
TFS_APPEND
;

325 
O_WRONLY
|
O_TRUNC
:

326 
O_WRONLY
|
O_CREAT
|
O_TRUNC
:

327 
	`m⁄_tfsu∆ök
((*)
∑thc›y
);

328 
Êagmode
 = 
TFS_CREATE
|
TFS_APPEND
;

330 
O_WRONLY
|
O_CREAT
:

331 
O_WRONLY
|
O_CREAT
|
O_APPEND
:

332 
Êagmode
 = 
TFS_CREATE
|
TFS_APPEND
;

334 
O_RDWR
:

335 
O_WRONLY
|
O_CREAT
|
O_EXCL
:

336 
Êagmode
 = 
TFS_CREATE
|
TFS_APPEND
;

339 
	`¥ötk
("_›í_r(): fœg 0x%ònŸ suµ‹ãd\n",
oÊag
);

340 (
ENOTSUP
);

345 
	`√wlib_tfdlock
();

346 
tfdidx
=0;tfdidx<
MAXTFDS
;tfdidx++) {

347 i‡(
tfdèbÀ
[
tfdidx
].
öu£
 == 0)

350 i‡(
tfdidx
 =
MAXTFDS
) {

351 
	`√wlib_tfdu∆ock
();

352 (
EMFILE
);

354 
tù
 = &
tfdèbÀ
[
tfdidx
];

355 
tù
->
öu£
 = 1;

356 
	`√wlib_tfdu∆ock
();

364 i‡(
Êagmode
 =
TFS_RDONLY
) {

365 
buf
 = (*)0;

367 i‡(
b°r
)

368 
buf
 = (*)
	`°πﬁ
(
b°r
,0,0);

370 
buf
 = 
	`mÆloc
(
MAXFILESIZE
);

371 i‡(!
buf
) {

372 
	`√wlib_tfdlock
();

373 
tù
->
öu£
 = 0;

374 
	`√wlib_tfdu∆ock
();

375 (
ENOMEM
);

381 i‡(
f°r
) {

382 
bÊag
;

384 
bÊag
 = 
	`m⁄_tfs˘æ
(
TFS_FATOB
,()
f°r
,0);

385 i‡(
bÊag
 == -1) {

386 (
EINVAL
);

388 
Êagmode
 |
bÊag
;

391 i‡(
i°r
)

392 
	`°r˝y
(
tù
->
öfo
,
i°r
);

394 
tù
->
öfo
[0] = 0;

396 
tfd
 = 
	`m⁄_tfs›í
((*)
∑thc›y
,
Êagmode
,
buf
);

397 i‡(
tfd
 >= 0) {

398 
tù
->
tfd
 =Åfd;

399 
tù
->
buf
 = buf;

400 
	`°r˝y
(
tù
->
«me
,
∑thc›y
);

401 
i›
->
d©a0
 = (
uöt32_t
)
tfdidx
;

404 
	`¥ötk
("%s: %s\n",
∑thc›y
,

405 (*)
	`m⁄_tfs˘æ
(
TFS_ERRMSG
,
tfd
,0));

408 i‡(
buf
)

409 
	`‰ì
(
buf
);

411 
	`√wlib_tfdlock
();

412 
tù
->
öu£
 = 0;

413 
	`√wlib_tfdu∆ock
();

414 (
EINVAL
);

415 
	}
}

420 
	$πems_tfs_›í
(

421 
πems_libio_t
 *
i›
,

422 c⁄° *
√w_«me
,

423 
oÊag
,

424 
mode_t
 
mode


427 *
fuŒ_∑th_«me
;

428 
îr
;

430 
fuŒ_∑th_«me
 = 
i›
->
∑thöfo
.
node_ac˚ss
;

432 i‡(
RTEMS_TFS_DEBUG
)

433 
	`¥ötk
("πems_tfs_›í(%s)\n",
fuŒ_∑th_«me
);

435 i‡(
	`πems_tfs_is_dúe˘‹y
(
fuŒ_∑th_«me
, 
	`°æí
(full_path_name))) {

436 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
 (
ENOTSUP
);

439 
îr
 = 
	`πems_tfs_›í_w‹kî
 (
i›
, 
fuŒ_∑th_«me
, 
oÊag
, 
mode
);

440 i‡(
îr
 != 0) {

441 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
 (
îr
);

444  
îr
;

445 
	}
}

450 
ssize_t
 
	$πems_tfs_ªad
(

451 
πems_libio_t
 *
i›
,

452 *
buf„r
,

453 
size_t
 
cou¡


456 
ªt
, 
fd
;

458 
fd
 = (Ë
i›
->
d©a0
;

460 i‡(
RTEMS_TFS_DEBUG
)

461 
	`¥ötk
("_ªad_r(%d,%" 
PRId32
 ")\n",
fd
,
cou¡
);

463 i‡((
fd
 < 3Ë|| (fd >
MAXTFDS
))

464 (
EBADF
);

466 
ªt
 = 
	`m⁄_tf§ód
(
tfdèbÀ
[
fd
].
tfd
,
buf„r
,
cou¡
);

467 i‡(
ªt
 =
TFSERR_EOF
)

468 
ªt
 = 0;

470 (
ªt
);

471 
	}
}

476 
	$πems_tfs_˛o£
(

477 
πems_libio_t
 *
i›


480 
fd
;

481 *
öfo
;

482 
tfdöfo
 *
tù
;

484 
fd
 = ()
i›
->
d©a0
;

486 i‡(
RTEMS_TFS_DEBUG
)

487 
	`¥ötk
("πems_tfs_˛o£(%d)\n",
fd
);

489 i‡((
fd
 < 3Ë|| (fd >
MAXTFDS
)) {

490 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
 (
EBADF
);

493 
tù
 = &
tfdèbÀ
[
fd
];

495 i‡(
tù
->
öfo
[0])

496 
öfo
 = 
tù
->info;

498 
öfo
 = (*)0;

500 
	`m⁄_tfs˛o£
(
tù
->
tfd
,
öfo
);

502 i‡(
tù
->
buf
)

503 
	`‰ì
(
tù
->
buf
);

505 
	`√wlib_tfdlock
();

506 
tù
->
öu£
 = 0;

507 
	`√wlib_tfdu∆ock
();

508  
RTEMS_SUCCESSFUL
;

509 
	}
}

511 
ssize_t
 
	$πems_tfs_wrôe
(

512 
πems_libio_t
 *
i›
,

513 c⁄° *
buf„r
,

514 
size_t
 
cou¡


517 
ªt
, 
fd
;

519 
fd
 = (Ë
i›
->
d©a0
;

521 i‡(
RTEMS_TFS_DEBUG
)

522 
	`¥ötk
("πems_tfs_wrôe(%d,%" 
PRId32
" )\n",
fd
,
cou¡
);

524 i‡((
fd
 <0Ë|| (fd >
MAXTFDS
)) {

525 
	`πems_£t_î∫o_™d_ªtu∫_möus_⁄e
 (
EBADF
);

528 
ªt
 = 
	`m⁄_tfswrôe
(
tfdèbÀ
[
fd
].
tfd
,(*)
buf„r
,
cou¡
);

529 i‡(
ªt
 < 0)

532 (
ªt
);

533 
	}
}

535 
off_t
 
	$πems_tfs_l£ek
(

536 
πems_libio_t
 *
i›
,

537 
off_t
 
off£t
,

538 
whí˚


541 
ªt
, 
fd
;

543 
fd
 = (Ë
i›
->
d©a0
;

545 i‡(
RTEMS_TFS_DEBUG
)

546 
	`¥ötk
("πems_tfs_l£ek(%d,%ld,%d)\n",
fd
,()
off£t
,
whí˚
);

548 
whí˚
) {

549 
SEEK_END
:

550 
	`¥ötk
("rtems_tfs_lseek doesn't support SEEK_END\n");

552 
SEEK_CUR
:

553 
whí˚
 = 
TFS_CURRENT
;

555 
SEEK_SET
:

556 
whí˚
 = 
TFS_BEGIN
;

559 
ªt
 = 
	`m⁄_tfs£ek
(
tfdèbÀ
[
fd
].
tfd
,
off£t
,
whí˚
);

561 i‡(
ªt
 < 0)

564  (
off_t
)
ªt
;

565 
	}
}

570 
	$πems_tfs_·runˇã
(

571 
πems_libio_t
 *
i›
,

572 
off_t
 
cou¡


575 
ªt
, 
fd
;

577 
fd
 = (Ë
i›
->
d©a0
;

578 
ªt
 = 
	`m⁄_tf°runˇã
(
tfdèbÀ
[
fd
].
tfd
,
cou¡
);

579 i‡(
ªt
 !
TFS_OKAY
)

583 
	}
}

585 
	$πems_tfs_io˘l
(

586 
πems_libio_t
 *
i›
,

587 
uöt32_t
 
cmd
,

588 *
buf


591 
ªt
;

593 
ªt
 = 
	`m⁄_tfs˘æ
(
cmd
,()
buf
,0);

594 i‡(
ªt
 !
TFS_OKAY
)

598 
	}
}

600 
	$πems_tfs_f°©
(

601 c⁄° 
πems_fûesy°em_loˇti⁄_öfo_t
 *
loc
,

602 
°©
 *
buf


605 c⁄° *
∑th
 = 
loc
->
node_ac˚ss
;

606 
size_t
 
∑thÀn
 = 
	`°æí
(
∑th
);

608 
buf
->
°_mode
 = 
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO


609 | (
	`πems_tfs_is_dúe˘‹y
(
∑th
, 
∑thÀn
Ë? 
S_IFDIR
 : 
S_IFREG
);

612 
	}
}

614 
	$πems_tfs_˛⁄e_node_öfo
(

615 
πems_fûesy°em_loˇti⁄_öfo_t
 *
loc


618 
rv
 = 0;

620 
loc
->
node_ac˚ss
 = 
	`°rdup
(loc->node_access);

622 i‡(
loc
->
node_ac˚ss
 =
NULL
) {

623 
î∫o
 = 
ENOMEM
;

624 
rv
 = -1;

627  
rv
;

628 
	}
}

630 
	$πems_tfs_‰ì_node_öfo
(

631 c⁄° 
πems_fûesy°em_loˇti⁄_öfo_t
 *
loc


634 
	`‰ì
(
loc
->
node_ac˚ss
);

635 
	}
}

637 
boﬁ
 
	$πems_tfs_¨e_nodes_equÆ
(

638 c⁄° 
πems_fûesy°em_loˇti⁄_öfo_t
 *
a
,

639 c⁄° 
πems_fûesy°em_loˇti⁄_öfo_t
 *
b


642  
	`°rcmp
(
a
->
node_ac˚ss
, 
b
->node_access) == 0;

643 
	}
}

645 c⁄° 
πems_fûesy°em_›î©i⁄s_èbÀ
 
	gπems_tfs_›s
 = {

646 .
lock_h
 = 
πems_fûesy°em_deÁu…_lock
,

647 .
	gu∆ock_h
 = 
πems_fûesy°em_deÁu…_u∆ock
,

648 .
	gevÆ_∑th_h
 = 
πems_tfs_evÆ_∑th
,

649 .
	glök_h
 = 
πems_fûesy°em_deÁu…_lök
,

650 .
	g¨e_nodes_equÆ_h
 = 
πems_tfs_¨e_nodes_equÆ
,

651 .
	gmknod_h
 = 
πems_fûesy°em_deÁu…_mknod
,

652 .
	grmnod_h
 = 
πems_fûesy°em_deÁu…_rmnod
,

653 .
	gfchmod_h
 = 
πems_fûesy°em_deÁu…_fchmod
,

654 .
	gchown_h
 = 
πems_fûesy°em_deÁu…_chown
,

655 .
	g˛⁄íod_h
 = 
πems_tfs_˛⁄e_node_öfo
,

656 .
	g‰ìnod_h
 = 
πems_tfs_‰ì_node_öfo
,

657 .
	gmou¡_h
 = 
πems_fûesy°em_deÁu…_mou¡
,

658 .
	gunmou¡_h
 = 
πems_fûesy°em_deÁu…_unmou¡
,

659 .
	gfsunmou¡_me_h
 = 
πems_fûesy°em_deÁu…_fsunmou¡
,

660 .
	gutime_h
 = 
πems_fûesy°em_deÁu…_utime
,

661 .
	gsymlök_h
 = 
πems_fûesy°em_deÁu…_symlök
,

662 .
	gªadlök_h
 = 
πems_fûesy°em_deÁu…_ªadlök
,

663 .
	gª«me_h
 = 
πems_fûesy°em_deÁu…_ª«me
,

664 .
	g°©vfs_h
 = 
πems_fûesy°em_deÁu…_°©vfs


667 c⁄° 
πems_fûesy°em_fûe_h™dÀrs_r
 
	gπems_tfs_h™dÀrs
 = {

668 .
›í_h
 = 
πems_tfs_›í
,

669 .
	g˛o£_h
 = 
πems_tfs_˛o£
,

670 .
	gªad_h
 = 
πems_tfs_ªad
,

671 .
	gwrôe_h
 = 
πems_tfs_wrôe
,

672 .
	gio˘l_h
 = 
πems_tfs_io˘l
,

673 .
	gl£ek_h
 = 
πems_tfs_l£ek
,

674 .
	gf°©_h
 = 
πems_tfs_f°©
,

675 .
	g·runˇã_h
 = 
πems_tfs_·runˇã
,

676 .
	gfsync_h
 = 
πems_fûesy°em_deÁu…_fsync_‹_fd©async
,

677 .
	gfd©async_h
 = 
πems_fûesy°em_deÁu…_fsync_‹_fd©async
,

678 .
	gf˙é_h
 = 
πems_fûesy°em_deÁu…_f˙é
,

679 .
	gkqfûãr_h
 = 
πems_fûesy°em_deÁu…_kqfûãr
,

680 .
	gpﬁl_h
 = 
πems_fûesy°em_deÁu…_pﬁl
,

681 .
	gªadv_h
 = 
πems_fûesy°em_deÁu…_ªadv
,

682 .
	gwrôev_h
 = 
πems_fûesy°em_deÁu…_wrôev


	@src/lib/libbsp/shared/umon/umon.h

15 #i‚de‡
__πems_um⁄_h


16 
	#__πems_um⁄_h


	)

18 
	~<um⁄/m⁄lib.h
>

20 #ifde‡
__˝lu•lus


30 
πems_um⁄_c⁄√˘
();

40 *
πems_b•_gë_um⁄_m⁄±r
();

51 
πems_öôülize_tfs_fûesy°em
(

52 c⁄° *
∑th


62 
um⁄c⁄s_pﬁl_ªad
(
mö‹
);

64 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/umon/umoncons.c

15 
	~<πems/um⁄.h
>

16 
	~<libchù/£rül.h
>

17 
	~<libchù/£rsuµ.h
>

20 
um⁄c⁄s_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

21 
um⁄c⁄s_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

22 
um⁄c⁄s_ªad
(
mö‹
);

23 
ssize_t
 
um⁄c⁄s_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

24 
um⁄c⁄s_öô
(
mö‹
);

25 
um⁄c⁄s_wrôe_pﬁÀd
(
mö‹
, 
c
);

26 
um⁄c⁄s_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

29 c⁄° 
c⁄sﬁe_‚s
 
	gum⁄c⁄s_‚s
 =

31 
libchù_£rül_deÁu…_¥obe
,

32 
um⁄c⁄s_fú°_›í
,

33 
um⁄c⁄s_œ°_˛o£
,

34 
um⁄c⁄s_ªad
,

35 
um⁄c⁄s_wrôe
,

36 
um⁄c⁄s_öô
,

37 
um⁄c⁄s_wrôe_pﬁÀd
,

38 
um⁄c⁄s_£t_©åibuãs
,

39 
Ál£


51 
	$um⁄c⁄s_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

54 
	}
}

62 
	$um⁄c⁄s_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

65 
	}
}

74 
	$um⁄c⁄s_ªad
(
mö‹
)

76 i‡–!
	`m⁄_gŸach¨
() )

78  
	`m⁄_gëch¨
();

79 
	}
}

87 
ssize_t
 
	$um⁄c⁄s_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
)

89 
size_t
 
i
;

91  
i
=0 ; i<
Àn
 ; i++ )

92 
	`m⁄_putch¨
–
buf
[
i
] );

94  
Àn
;

95 
	}
}

99 
	$um⁄c⁄s_öô
(
mö‹
)

101 
	`πems_um⁄_c⁄√˘
();

102 
	}
}

105 
	$um⁄c⁄s_wrôe_pﬁÀd
(
mö‹
, 
c
)

107 
	`m⁄_putch¨
–
c
 );

108 
	}
}

111 
	$um⁄c⁄s_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

114 
	}
}

126 
	$um⁄c⁄s_pﬁl_ªad
(
mö‹
)

128 i‡(!
	`m⁄_gŸach¨
())

130  
	`m⁄_gëch¨
();

131 
	}
}

	@src/lib/libbsp/shared/umon/umonrtemsglue.c

13 
	~<πems/um⁄.h
>

17 
	gπems_um⁄_c⁄√˘ed
 = 0;

19 
	$πems_um⁄_c⁄√˘
()

21 (*
m⁄com±r
)(,*,*,*);

23 i‡–
πems_um⁄_c⁄√˘ed
 )

26 
πems_um⁄_c⁄√˘ed
 = 1;

28 
m⁄com±r
 = 
	`πems_b•_gë_um⁄_m⁄±r
();

29 
	`m⁄C⁄√˘
(

30 
m⁄com±r
,

34 
	}
}

	@src/lib/libbsp/shared/vmeUniverse/VME.h

9 #i‚de‡
RTEMS_BSP_VME_API_H


10 
	#RTEMS_BSP_VME_API_H


	)

57 
	~<°dio.h
>

60 
	~<b•/vme_am_defs.h
>

62 #ifde‡
__˝lu•lus


75 
BSP_vme_c⁄fig
();

79 
BSP_vme2loˇl_adrs
(
am
, 
vmóddr
, *
∂oˇœddr
);

83 
BSP_loˇl2vme_adrs
(
am
, 
loˇœddr
, *
pvmóddr
);

86 (*
BSP_VME_ISR_t
)(*
	tu§Arg
, 
	tve˘‹
);

89 
BSP_ö°ÆlVME_i§
(
ve˘‹
, 
BSP_VME_ISR_t
 
h™dÀr
, *
¨g
);

91 
BSP_ªmoveVME_i§
(
ve˘‹
, 
BSP_VME_ISR_t
 
h™dÀr
, *
¨g
);

94 
BSP_VME_ISR_t


95 
BSP_gëVME_i§
(
ve˘‹
, **
∑rg
);

98 
BSP_íabÀVME_öt_lvl
(
Àvñ
);

101 
BSP_dißbÀVME_öt_lvl
(
Àvñ
);

104 
BSP_VMEOutboundP‹tCfg
(

105 
p‹t
,

106 
addªss_•a˚
,

107 
vme_addªss
,

108 
pci_addªss
,

109 
size
);

112 
BSP_VMEInboundP‹tCfg
(

113 
p‹t
,

114 
addªss_•a˚
,

115 
vme_addªss
,

116 
pci_addªss
,

117 
size
);

120 
BSP_VMEOutboundP‹tsShow
(
FILE
 *
f
);

123 
BSP_VMEInboundP‹tsShow
(
FILE
 *
f
);

127 
BSP_VMERe£tBus
();

129 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/VMEDMA.h

9 #i‚de‡
BSP_VME_DMA_H


10 
	#BSP_VME_DMA_H


	)

57 
	~<°döt.h
>

59 #ifde‡
__˝lu•lus


88 
	#BSP_VMEDMA_OPT_THROUGHPUT
 1

	)

93 
	#BSP_VMEDMA_OPT_LOWLATENCY
 2

	)

99 
	#BSP_VMEDMA_OPT_SHAREDBUS
 3

	)

104 
	#BSP_VMEDMA_OPT_DEFAULT
 4

	)

110 
	#BSP_VMEDMA_OPT_CUSTOM
 5

	)

122 
	#BSP_VMEDMA_MODE_NOINC_VME
 (1<<20)

	)

124 
	#BSP_VMEDMA_MODE_NOINC_PCI
 (1<<21)

	)

127 
	#BSP_VMEDMA_MODE_PCI2VME
 (1<<31)

	)

129 *
	tBSP_VMEDmaLi°Des¸ùt‹
;

157 
BSP_VMEDmaSëup
(
ch™√l
, 
uöt32_t
 
bus_mode
, uöt32_à
x„r_mode
, *
cu°om_£tup
);

164 
BSP_VMEDmaSèπ
(
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
);

167 
	#BSP_VMEDMA_STATUS_OK
 0

	)

169 
	#BSP_VMEDMA_STATUS_UNSUP
 (-1)

	)

171 
	#BSP_VMEDMA_STATUS_BERR_VME
 1

	)

173 
	#BSP_VMEDMA_STATUS_BERR_PCI
 2

	)

175 
	#BSP_VMEDMA_STATUS_BUSY
 3

	)

177 
	#BSP_VMEDMA_STATUS_PERR
 4

	)

179 
	#BSP_VMEDMA_STATUS_OERR
 5

	)

191 
uöt32_t


192 
BSP_VMEDmaSètus
(
ch™√l
);

203 (*
BSP_VMEDmaIRQCÆlback
)(*
	tu§_¨g
);

206 
BSP_VMEDmaIn°ÆlISR
(
ch™√l
, 
BSP_VMEDmaIRQCÆlback
 
cb
, *
u§_¨g
);

227 
	#BSP_VMEDMA_MSK_ATTR
 (1<<0)

	)

228 
	#BSP_VMEDMA_MSK_PCIA
 (1<<1)

	)

229 
	#BSP_VMEDMA_MSK_VMEA
 (1<<2)

	)

230 
	#BSP_VMEDMA_MSK_BCNT
 (1<<3)

	)

231 
	#BSP_VMEDMA_MSK_ALL
 (0xf)

	)

232 
BSP_VMEDmaLi°Des¸ùt‹


233 
BSP_VMEDmaLi°Des¸ùt‹Sëup
(

234 
BSP_VMEDmaLi°Des¸ùt‹
 
d
,

235 
uöt32_t
 
©å_mask
,

236 
uöt32_t
 
x„r_mode
,

237 
uöt32_t
 
pci_addr
,

238 
uöt32_t
 
vme_addr
,

239 
uöt32_t
 
n_byãs
);

247 
BSP_VMEDmaLi°Des¸ùt‹De°roy
(
BSP_VMEDmaLi°Des¸ùt‹
 
d
);

251 
BSP_VMEDmaLi°De°roy
(
BSP_VMEDmaLi°Des¸ùt‹
 
™ch‹
);

267 
BSP_VMEDmaLi°Des¸ùt‹Enq
(

268 
BSP_VMEDmaLi°Des¸ùt‹
 
èû
,

269 
BSP_VMEDmaLi°Des¸ùt‹
 
d
);

272 
BSP_VMEDmaLi°Des¸ùt‹


273 
BSP_VMEDmaLi°Des¸ùt‹Next
(
BSP_VMEDmaLi°Des¸ùt‹
 
d
);

275 
BSP_VMEDmaLi°Des¸ùt‹


276 
BSP_VMEDmaLi°Des¸ùt‹Pªv
(
BSP_VMEDmaLi°Des¸ùt‹
 
d
);

280 
BSP_VMEDmaLi°Des¸ùt‹SëU§
(
BSP_VMEDmaLi°Des¸ùt‹
 
d
, *
u§D©a
);

283 
BSP_VMEDmaLi°Des¸ùt‹GëU§
(
BSP_VMEDmaLi°Des¸ùt‹
 
d
);

291 
BSP_VMEDmaLi°Re‰esh
(
BSP_VMEDmaLi°Des¸ùt‹
 
™ch‹
);

298 
BSP_VMEDmaLi°Sèπ
(
ch™√l
, 
BSP_VMEDmaLi°Des¸ùt‹
 
li°
);

300 #ifde‡
DEBUG


302 
BSP_VMEDmaLi°Dump
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
);

305 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/bspVmeDmaList.c

50 
	~<°döt.h
>

51 
	~<°dlib.h
>

52 
	~<°dio.h
>

53 
	~<°rög.h
>

55 
	#DEBUG


	)

56 
	~<b•/VMEDMA.h
>

57 
	~<b•/b•VmeDmaLi°.h
>

58 
	~"b•VmeDmaLi°P.h
"

61 
	sVMEDmaLi°NodeRec_
 {

62 
VMEDmaLi°Node
 
	mp
, 
	mn
;

63 
DmaDes¸ùt‹
 
	md
;

64 *
	mu§D©a
;

65 
VMEDmaLi°Cœss
 
	m˛ass
;

66 } 
	tVMEDmaLi°NodeRec
;

68 
	#LCHUNK
 10

	)

70 #ifde‡
DEBUG


72 
	$Õröt
(
VMEDmaLi°Node
 
d
)

74 
	`¥ötf
("n 0x%08lx,Ö: 0x%08lx,Ç: 0x%08lx d: 0x%08lx\n",

75 (
uöt32_t
)
d
, (uöt32_t)d->
p
, (uöt32_t)d->
n
, (uint32_t)d->d);

76 
	}
}

79 
VMEDmaLi°Node


80 
	$œŒoc
(
VMEDmaLi°Cœss
 
pc
)

82 
VMEDmaLi°Node
 
rvÆ
;

83 
i
;

85 i‡–!
pc
->
‰ìLi°
 ) {

87 
pc
->
‰ìLi°
 = 
	`ˇŒoc
–(
LCHUNK
), (*pc->freeList));

89 i‡–! (
pc
->
‰ìLi°
) ) {

94 
i
=0; i<(
LCHUNK
)-1; i++) {

95 
pc
->
‰ìLi°
[
i
].
n
 = &pc->freeList[i+1];

96 
pc
->
‰ìLi°
[
i
].
˛ass
 =Öc;

98 
pc
->
‰ìLi°
[
i
].
n
 = 0;

99 
pc
->
‰ìLi°
[
i
].
˛ass
 =Öc;

102 i‡–
pc
->
desc_Æloc
 ) {

103 
i
=0; i<(
LCHUNK
); i++) {

104 i‡–! (
pc
->
‰ìLi°
[
i
].
d
 =Öc->
	`desc_Æloc
()) ) {

105 
j
;

106 i‡–
pc
->
desc_‰ì
 ) {

107 
j
=0; j<
i
; j++)

108 
pc
->
	`desc_‰ì
’c->
‰ìLi°
[
i
].
d
);

110 
	`‰ì
(
pc
->
‰ìLi°
);

111 
pc
->
‰ìLi°
 = 0;

116 
blksize
;

117 
uöt32_t
 
Ægnmsk
 = 
pc
->
desc_Æign
 - 1;

118 *
mem±r
;

121 
pc
->
desc_‰ì
 = 0;

123 
blksize
 = (
pc
->
desc_size
 + 
Ægnmsk
) & ~algnmsk;

125 i‡–! (
mem±r
 = 
	`mÆloc
(
blksize
*(
LCHUNK
Ë+ 
pc
->
desc_Æign
 - 1)) ) {

126 
	`‰ì
(
pc
->
‰ìLi°
);

127 
pc
->
‰ìLi°
 = 0;

132 
mem±r
 = (*)–((
uöt32_t
)mem±∏+ 
Ægnmsk
) & ~álgnmsk );

134  
i
 = 0; i<(
LCHUNK
); i++, 
mem±r
+=
blksize
 ) {

135 
	`mem£t
(
mem±r
, 0, 
blksize
);

136 
pc
->
‰ìLi°
[
i
].
d
 = (
DmaDes¸ùt‹
)
mem±r
;

140 
rvÆ
 = 
pc
->
‰ìLi°
;

141 
pc
->
‰ìLi°
 =Öc->‰ìLi°->
n
;

142 
rvÆ
->
n
 =ÑvÆ->
p
 = 0;

143  
rvÆ
;

144 
	}
}

147 
	$l‰ì
(
VMEDmaLi°Node
 
d
)

149 i‡–
d
->
p
 || d->
n
 )

151 
d
->
n
 = d->
˛ass
->
‰ìLi°
;

152 
d
->
˛ass
->
‰ìLi°
 = d;

154 
	}
}

157 
	$Ànq
(
VMEDmaLi°Node
 
a
, VMEDmaLi°Nodê
d
)

159 i‡–
a
 ) {

161 i‡–
d
->
n
 || d->
p
 )

163 i‡–(
d
->
n
 = 
a
->n) )

164 
a
->
n
->
p
 = 
d
;

165 
d
->
p
 = 
a
;

166 
a
->
n
 = 
d
;

169 i‡–
d
->
n
 )

170 
d
->
n
->
p
 = d->p;

171 i‡–
d
->
p
 )

172 
d
->
p
->
n
 = d->n;

173 
d
->
n
 = d->
p
 = 0;

176 
	}
}

180 
	$BSP_VMEDmaLi°Des¸ùt‹SèπToﬁ
(vﬁ©ûê*
c⁄åﬁÀr
, 
ch™√l
, 
VMEDmaLi°Node
 
n
)

182 i‡–!
n
 )

184  
n
->
˛ass
->
	`desc_°¨t
(
c⁄åﬁÀr
, 
ch™√l
,Ç->
d
);

185 
	}
}

187 
VMEDmaLi°Node


188 
	$BSP_VMEDmaLi°Des¸ùt‹SëupToﬁ
(

189 
VMEDmaLi°Node
 
n
,

190 
uöt32_t
 
©å_mask
,

191 
uöt32_t
 
x„r_mode
,

192 
uöt32_t
 
pci_addr
,

193 
uöt32_t
 
vme_addr
,

194 
uöt32_t
 
n_byãs
)

196 i‡–!
n
 )

199 i‡–
n
->
˛ass
->
	`desc_£tup
“->
d
, 
©å_mask
, 
x„r_mode
, 
pci_addr
, 
vme_addr
, 
n_byãs
) ) {

203  
n
;

204 
	}
}

206 
VMEDmaLi°Node


207 
	$BSP_VMEDmaLi°Des¸ùt‹NewToﬁ
(

208 
VMEDmaLi°Cœss
 
pc
,

209 
uöt32_t
 
©å_mask
,

210 
uöt32_t
 
x„r_mode
,

211 
uöt32_t
 
pci_addr
,

212 
uöt32_t
 
vme_addr
,

213 
uöt32_t
 
n_byãs
)

215 
VMEDmaLi°Node
 
n
;

217 i‡–!(
n
=
	`œŒoc
(
pc
)) )

220 i‡–
n
->
˛ass
->
desc_öô
 )

221 
n
->
˛ass
->
	`desc_öô
“->
d
);

223 i‡–
n
->
˛ass
->
	`desc_£tup
“->
d
, 
©å_mask
, 
x„r_mode
, 
pci_addr
, 
vme_addr
, 
n_byãs
) ) {

224 
	`BSP_VMEDmaLi°Des¸ùt‹De°roy
(
n
);

227  
n
;

228 
	}
}

231 
	$BSP_VMEDmaLi°Des¸ùt‹De°roy
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

233 
VMEDmaLi°Node
 
d
 = 
p
;

234  
	`l‰ì
(
d
);

235 
	}
}

238 
	$BSP_VMEDmaLi°De°roy
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

240 
VMEDmaLi°Node
 
d
 = 
p
;

241 
VMEDmaLi°Node
 
n
;

242 
d
) {

243 
n
 = 
d
->n;

244 i‡–
	`BSP_VMEDmaLi°Des¸ùt‹Enq
(0, 
d
) ||

245 
	`BSP_VMEDmaLi°Des¸ùt‹De°roy
(
d
) )

247 
d
 = 
n
;

250 
	}
}

253 
	$BSP_VMEDmaLi°Des¸ùt‹Enq
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
, BSP_VMEDmaLi°Des¸ùt‹ 
q
)

255 
VMEDmaLi°Node
 
™ch‹
 = 
p
;

256 
VMEDmaLi°Node
 
d
 = 
q
;

257 
DmaDes¸ùt‹SëNxt
 
£äxt
 = 
d
->
˛ass
->
desc_£äxt
;

259 i‡–!
™ch‹
 ) {

261 i‡–
d
->
p
 )

262 
	`£äxt
(
d
->
p
->d, d->
n
 ? d->n->d : 0);

264 
	`£äxt
(
d
->d, 0);

266 i‡–
d
->
˛ass
 !
™ch‹
->class )

269 i‡–
	`Ànq
(
™ch‹
, 
d
) )

272 i‡–
™ch‹
 ) {

273 
	`£äxt
(
d
->d, d->
n
 ? d->n->d : 0);

274 
	`£äxt
(
™ch‹
->
d
, d->d);

277 
	}
}

279 
BSP_VMEDmaLi°Des¸ùt‹


280 
	$BSP_VMEDmaLi°Des¸ùt‹Next
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

282 
VMEDmaLi°Node
 
d
 = 
p
;

283  
d
->
n
;

284 
	}
}

286 
BSP_VMEDmaLi°Des¸ùt‹


287 
	$BSP_VMEDmaLi°Des¸ùt‹Pªv
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

289 
VMEDmaLi°Node
 
d
 = 
p
;

290  
d
->
p
;

291 
	}
}

294 
	$BSP_VMEDmaLi°Des¸ùt‹SëU§
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
, *
u§D©a
)

296 
VMEDmaLi°Node
 
d
 = 
p
;

297 
d
->
u§D©a
 = usrData;

298 
	}
}

301 
	$BSP_VMEDmaLi°Des¸ùt‹GëU§
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

303 
VMEDmaLi°Node
 
d
 = 
p
;

304  
d
->
u§D©a
;

305 
	}
}

308 
	$BSP_VMEDmaLi°Re‰esh
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

310 
VMEDmaLi°Node
 
™ch‹
 = 
p
;

311 
DmaDes¸ùt‹Re‰
 
desc_ª‰
;

312 
VMEDmaLi°Node
 
n
;

313 i‡–(
desc_ª‰
 = 
™ch‹
->
˛ass
->desc_refr) ) {

314  
n
 = 
™ch‹
;Ç;Ç =Ç->n ) {

315 
	`desc_ª‰
(
n
->
d
);

319 
	}
}

321 #ifde‡
DEBUG


323 
	$BSP_VMEDmaLi°Dump
(
BSP_VMEDmaLi°Des¸ùt‹
 
p
)

325 
VMEDmaLi°Node
 
d
 = 
p
;

326 
d
) {

327 
	`¥ötf
("----------\n");

328 
	`Õröt
(
d
);

329 i‡(
d
->
˛ass
->
desc_dump
)

330 
d
->
˛ass
->
	`desc_dump
(d->d);

331 
d
 = d->
n
;

333 
	}
}

	@src/lib/libbsp/shared/vmeUniverse/bspVmeDmaList.h

10 #i‚de‡
BSP_VME_DMA_LIST_H


11 
	#BSP_VME_DMA_LIST_H


	)

90 
	~<°döt.h
>

92 
	~<b•/VMEDMA.h
>

94 #ifde‡
__˝lu•lus


98 
VMEDmaLi°NodeRec_
 *
	tVMEDmaLi°Node
;

100 
VMEDmaLi°CœssRec_
 *
	tVMEDmaLi°Cœss
;

110 
VMEDmaLi°Node


111 
BSP_VMEDmaLi°Des¸ùt‹NewToﬁ
(

112 
VMEDmaLi°Cœss
 
pc
,

113 
uöt32_t
 
©å_mask
,

114 
uöt32_t
 
x„r_mode
,

115 
uöt32_t
 
pci_addr
,

116 
uöt32_t
 
vme_addr
,

117 
uöt32_t
 
n_byãs
);

120 
VMEDmaLi°Node


121 
BSP_VMEDmaLi°Des¸ùt‹SëupToﬁ
(

122 
VMEDmaLi°Node
 
n
,

123 
uöt32_t
 
©å_mask
,

124 
uöt32_t
 
x„r_mode
,

125 
uöt32_t
 
pci_addr
,

126 
uöt32_t
 
vme_addr
,

127 
uöt32_t
 
n_byãs
);

134 
BSP_VMEDmaLi°Des¸ùt‹SèπToﬁ
(vﬁ©ûê*
c⁄åﬁÀr
, 
ch™√l
, 
VMEDmaLi°Node
 
n
);

136 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/bspVmeDmaListP.h

9 #i‚de‡
BSP_VME_DMA_LIST_P_H


10 
	#BSP_VME_DMA_LIST_P_H


	)

12 
	~<b•/b•VmeDmaLi°.h
>

64 #ifde‡
__˝lu•lus


68 *
	tDmaDes¸ùt‹
;

78 
DmaDes¸ùt‹
 (*
	tDmaDes¸ùt‹AŒoc
)();

79 (*
DmaDes¸ùt‹Fªe
Ë(
	tDmaDes¸ùt‹
 
	td
);

80 (*
DmaDes¸ùt‹Inô
Ë(
	tDmaDes¸ùt‹
 
	td
);

82 (*
DmaDes¸ùt‹Sëup
)(
	tDmaDes¸ùt‹
 
	td
, 
	tuöt32_t
, uint32_t, uint32_t, uint32_t, uint32_t);

83 (*
DmaDes¸ùt‹SëNxt
)(
	tDmaDes¸ùt‹
 
	td
, DmaDes¸ùt‹ 
	t√xt
);

84 (*
DmaDes¸ùt‹Sèπ
)(vﬁ©ûê*
	tc⁄åﬁÀr_addr
, 
	tch™√l
, 
	tDmaDes¸ùt‹
);

85 (*
DmaDes¸ùt‹Re‰
Ë(
	tDmaDes¸ùt‹
);

86 (*
DmaDes¸ùt‹Dump
Ë(
	tDmaDes¸ùt‹
);

89 
	sVMEDmaLi°CœssRec_
 {

90 
desc_size
;

91 
desc_Æign
;

92 
VMEDmaLi°Node
 
‰ìLi°
;

93 
DmaDes¸ùt‹AŒoc
 
desc_Æloc
;

94 
DmaDes¸ùt‹Fªe
 
desc_‰ì
;

95 
DmaDes¸ùt‹Inô
 
desc_öô
;

96 
DmaDes¸ùt‹SëNxt
 
desc_£äxt
;

97 
DmaDes¸ùt‹Sëup
 
desc_£tup
;

98 
DmaDes¸ùt‹Sèπ
 
desc_°¨t
;

99 
DmaDes¸ùt‹Re‰
 
desc_ª‰
;

100 
DmaDes¸ùt‹Dump
 
desc_dump
;

101 } 
	tVMEDmaLi°CœssRec
;

103 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/doxygen.h

	@src/lib/libbsp/shared/vmeUniverse/vmeTsi148.c

48 
	~<πems.h
>

49 
	~<°dio.h
>

50 
	~<°d¨g.h
>

51 
	~<b•/úq.h
>

52 
	~<°dlib.h
>

53 
	~<πems/b•Io.h
>

54 
	~<πems/îr‹.h
>

55 
	~<πems/pci.h
>

56 
	~<b•.h
>

57 
	~<lib˝u/byã‹dî.h
>

59 
	#__INSIDE_RTEMS_BSP__


	)

60 
	#_VME_TSI148_DECLARE_SHOW_ROUTINES


	)

62 
	~"vmeTsi148.h
"

63 
	~<b•/VMEDMA.h
>

64 
	~"vmeTsi148DMA.h
"

65 
	~"b•VmeDmaLi°P.h
"

68 
	#DEBUG


	)

70 #ifde‡
DEBUG


71 
	#STATIC


	)

73 
	#STATIC
 

	)

78 
	#TSI_NUM_WIRES
 4

	)

80 
	#TSI148_NUM_OPORTS
 8

	)

81 
	#TSI148_NUM_IPORTS
 8

	)

83 
	#NUM_TSI_DEVS
 2

	)

85 
	#PCI_VENDOR_TUNDRA
 0x10e3

	)

86 
	#PCI_DEVICE_TSI148
 0x0148

	)

88 
	#TSI_OTSAU_SPACING
 0x020

	)

90 
	#TSI_OTSAU0_REG
 0x100

	)

91 
	#TSI_OTSAL0_REG
 0x104

	)

92 
	#TSI_OTEAU0_REG
 0x108

	)

93 
	#TSI_OTEAL0_REG
 0x10c

	)

94 
	#TSI_OTOFU0_REG
 0x110

	)

95 
	#TSI_OTOFL0_REG
 0x114

	)

96 
	#TSI_OTBS0_REG
 0x118

	)

97 
	#TSI_OTAT0_REG
 0x11c

	)

98 
	#TSI_OTSAU_REG
(
p‹t
Ë(
TSI_OTSAU0_REG
 + (’‹t)<<5))

	)

99 
	#TSI_OTSAL_REG
(
p‹t
Ë(
TSI_OTSAL0_REG
 + (’‹t)<<5))

	)

100 
	#TSI_OTEAU_REG
(
p‹t
Ë(
TSI_OTEAU0_REG
 + (’‹t)<<5))

	)

101 
	#TSI_OTEAL_REG
(
p‹t
Ë(
TSI_OTEAL0_REG
 + (’‹t)<<5))

	)

102 
	#TSI_OTOFU_REG
(
p‹t
Ë(
TSI_OTOFU0_REG
 + (’‹t)<<5))

	)

103 
	#TSI_OTOFL_REG
(
p‹t
Ë(
TSI_OTOFL0_REG
 + (’‹t)<<5))

	)

104 
	#TSI_OTBS_REG
(
p‹t
Ë(
TSI_OTBS0_REG
 + (’‹t)<<5))

	)

105 
	#TSI_OTAT_REG
(
p‹t
Ë(
TSI_OTAT0_REG
 + (’‹t)<<5))

	)

106 
	#TSI_OTAT_EN
 (1<<31)

	)

107 
	#TSI_OTAT_MRPFD
 (1<<18)

	)

108 
	#TSI_OTAT_PFS
(
x
Ë(((x)&3)<<16)

	)

109 
	#TSI_OTAT_2eSSTM
(
x
Ë(((x)&7)<<11)

	)

110 
	#TSI_OTAT_2eSSTM_160
 
	`TSI_OTAT_2eSSTM
(0)

	)

111 
	#TSI_OTAT_2eSSTM_267
 
	`TSI_OTAT_2eSSTM
(1)

	)

112 
	#TSI_OTAT_2eSSTM_320
 
	`TSI_OTAT_2eSSTM
(2)

	)

113 
	#TSI_OTAT_TM
(
x
Ë(((x)&7)<<8)

	)

114 
	#TSI_TM_SCT_IDX
 0

	)

115 
	#TSI_TM_BLT_IDX
 1

	)

116 
	#TSI_TM_MBLT_IDX
 2

	)

117 
	#TSI_TM_2eVME_IDX
 3

	)

118 
	#TSI_TM_2eSST_IDX
 4

	)

119 
	#TSI_TM_2eSSTB_IDX
 5

	)

120 
	#TSI_OTAT_DBW
(
x
Ë(((x)&3)<<6)

	)

121 
	#TSI_OTAT_SUP
 (1<<5)

	)

122 
	#TSI_OTAT_PGM
 (1<<4)

	)

123 
	#TSI_OTAT_ADMODE
(
x
Ë(((x)&0xf))

	)

124 
	#TSI_OTAT_ADMODE_A16
 0

	)

125 
	#TSI_OTAT_ADMODE_A24
 1

	)

126 
	#TSI_OTAT_ADMODE_A32
 2

	)

127 
	#TSI_OTAT_ADMODE_A64
 4

	)

128 
	#TSI_OTAT_ADMODE_CSR
 5

	)

129 
	#TSI_OTAT_ADMODE_USR1
 8

	)

130 
	#TSI_OTAT_ADMODE_USR2
 9

	)

131 
	#TSI_OTAT_ADMODE_USR3
 0xa

	)

132 
	#TSI_OTAT_ADMODE_USR4
 0xb

	)

134 
	#TSI_VIACK_1_REG
 0x204

	)

136 
	#TSI_VMCTRL_REG
 0x234

	)

137 
	#TSI_VMCTRL_VSA
 (1<<27)

	)

138 
	#TSI_VMCTRL_VS
 (1<<26)

	)

139 
	#TSI_VMCTRL_DHB
 (1<<25)

	)

140 
	#TSI_VMCTRL_DWB
 (1<<24)

	)

141 
	#TSI_VMCTRL_RMWEN
 (1<<20)

	)

142 
	#TSI_VMCTRL_A64DS
 (1<<16)

	)

143 
	#TSI_VMCTRL_VTOFF_MSK
 (7<<12)

	)

144 
	#TSI_VMCTRL_VTOFF_0us
 (0<<12)

	)

145 
	#TSI_VMCTRL_VTOFF_1us
 (1<<12)

	)

146 
	#TSI_VMCTRL_VTOFF_2us
 (2<<12)

	)

147 
	#TSI_VMCTRL_VTOFF_4us
 (3<<12)

	)

148 
	#TSI_VMCTRL_VTOFF_8us
 (4<<12)

	)

149 
	#TSI_VMCTRL_VTOFF_16us
 (5<<12)

	)

150 
	#TSI_VMCTRL_VTOFF_32us
 (6<<12)

	)

151 
	#TSI_VMCTRL_VTOFF_64us
 (7<<12)

	)

152 
	#TSI_VMCTRL_VTON_MSK
 (7<< 8)

	)

153 
	#TSI_VMCTRL_VTON_4us
 (0<< 8)

	)

154 
	#TSI_VMCTRL_VTON_8us
 (1<< 8)

	)

155 
	#TSI_VMCTRL_VTON_16us
 (2<< 8)

	)

156 
	#TSI_VMCTRL_VTON_32us
 (3<< 8)

	)

157 
	#TSI_VMCTRL_VTON_64us
 (4<< 8)

	)

158 
	#TSI_VMCTRL_VTON_128us
 (5<< 8)

	)

159 
	#TSI_VMCTRL_VTON_256us
 (6<< 8)

	)

160 
	#TSI_VMCTRL_VTON_512us
 (7<< 8)

	)

161 
	#TSI_VMCTRL_VREL_MSK
 (3<< 3)

	)

162 
	#TSI_VMCTRL_VREL_TON_‹_DONE
 (0<< 3)

	)

163 
	#TSI_VMCTRL_VREL_TON™dREQ_‹_DONE
 (1<< 3)

	)

164 
	#TSI_VMCTRL_VREL_TON™dBCLR_‹_DONE
 (2<< 3)

	)

165 
	#TSI_VMCTRL_VREL_TON‹DONE_™d_REQ
 (3<< 3)

	)

166 
	#TSI_VMCTRL_VFAIR
 (1<< 2)

	)

167 
	#TSI_VMCTRL_VREQL_MSK
 (3<< 0)

	)

168 
	#TSI_VMCTRL_VREQL
(
x
Ë((x)&3)

	)

170 
	#TSI_VCTRL_REG
 0x238

	)

171 
	#TSI_VCTRL_DLT_MSK
 (0xf<<24)

	)

172 
	#TSI_VCTRL_NELBB
 (1<<20)

	)

173 
	#TSI_VCTRL_SRESET
 (1<<17)

	)

174 
	#TSI_VCTRL_LRESET
 (1<<16)

	)

175 
	#TSI_VCTRL_SFAILAI
 (1<<15)

	)

176 
	#TSI_VCTRL_BID_MSK
 (0x1f<<8)

	)

177 
	#TSI_VCTRL_ATOEN
 (1<< 7)

	)

178 
	#TSI_VCTRL_ROBIN
 (1<< 6)

	)

179 
	#TSI_VCTRL_GTO_MSK
 (7<< 0)

	)

182 
	#TSI_VSTAT_REG
 0x23c

	)

183 
	#TSI_VSTAT_CPURST
 (1<<15Ë

	)

184 
	#TSI_VSTAT_BDFAIL
 (1<<14)

	)

185 
	#TSI_VSTAT_PURSTS
 (1<<12)

	)

186 
	#TSI_VSTAT_BDFAILS
 (1<<11)

	)

187 
	#TSI_VSTAT_SYSFLS
 (1<<10)

	)

188 
	#TSI_VSTAT_ACFAILS
 (1<< 9)

	)

189 
	#TSI_VSTAT_SCONS
 (1<< 8)

	)

190 
	#TSI_VSTAT_GAP
 (1<< 5)

	)

191 
	#TSI_VSTAT_GA_MSK
 (0x1f)

	)

193 
	#TSI_VEAU_REG
 0x260

	)

194 
	#TSI_VEAL_REG
 0x264

	)

195 
	#TSI_VEAT_REG
 0x268

	)

197 
	#TSI_ITSAU_SPACING
 0x020

	)

199 
	#TSI_ITSAU0_REG
 0x300

	)

200 
	#TSI_ITSAL0_REG
 0x304

	)

201 
	#TSI_ITEAU0_REG
 0x308

	)

202 
	#TSI_ITEAL0_REG
 0x30c

	)

203 
	#TSI_ITOFU0_REG
 0x310

	)

204 
	#TSI_ITOFL0_REG
 0x314

	)

205 
	#TSI_ITAT0_REG
 0x318

	)

206 
	#TSI_ITSAU_REG
(
p‹t
Ë(
TSI_ITSAU0_REG
 + (’‹t)<<5))

	)

207 
	#TSI_ITSAL_REG
(
p‹t
Ë(
TSI_ITSAL0_REG
 + (’‹t)<<5))

	)

208 
	#TSI_ITEAU_REG
(
p‹t
Ë(
TSI_ITEAU0_REG
 + (’‹t)<<5))

	)

209 
	#TSI_ITEAL_REG
(
p‹t
Ë(
TSI_ITEAL0_REG
 + (’‹t)<<5))

	)

210 
	#TSI_ITOFU_REG
(
p‹t
Ë(
TSI_ITOFU0_REG
 + (’‹t)<<5))

	)

211 
	#TSI_ITOFL_REG
(
p‹t
Ë(
TSI_ITOFL0_REG
 + (’‹t)<<5))

	)

212 
	#TSI_ITAT_REG
(
p‹t
Ë(
TSI_ITAT0_REG
 + (’‹t)<<5))

	)

214 
	#TSI_ITAT_EN
 (1<<31)

	)

215 
	#TSI_ITAT_TH
 (1<<18)

	)

216 
	#TSI_ITAT_VFS
(
x
Ë(((x)&3)<<16)

	)

217 
	#TSI_ITAT_2eSSTM
(
x
Ë(((x)&7)<<12)

	)

218 
	#TSI_ITAT_2eSSTM_160
 
	`TSI_ITAT_2eSSTM
(0)

	)

219 
	#TSI_ITAT_2eSSTM_267
 
	`TSI_ITAT_2eSSTM
(1)

	)

220 
	#TSI_ITAT_2eSSTM_320
 
	`TSI_ITAT_2eSSTM
(2)

	)

221 
	#TSI_ITAT_2eSSTB
 (1<<11)

	)

222 
	#TSI_ITAT_2eSST
 (1<<10)

	)

223 
	#TSI_ITAT_2eVME
 (1<<9)

	)

224 
	#TSI_ITAT_MBLT
 (1<<8)

	)

225 
	#TSI_ITAT_BLT
 (1<<7)

	)

226 
	#TSI_ITAT_AS
(
x
Ë(((x)&7)<<4)

	)

227 
	#TSI_ITAT_ADMODE_A16
 (0<<4)

	)

228 
	#TSI_ITAT_ADMODE_A24
 (1<<4)

	)

229 
	#TSI_ITAT_ADMODE_A32
 (2<<4)

	)

230 
	#TSI_ITAT_ADMODE_A64
 (4<<4)

	)

231 
	#TSI_ITAT_SUP
 (1<<3)

	)

232 
	#TSI_ITAT_USR
 (1<<2)

	)

233 
	#TSI_ITAT_PGM
 (1<<1)

	)

234 
	#TSI_ITAT_DATA
 (1<<0)

	)

236 
	#TSI_CBAU_REG
 0x40c

	)

237 
	#TSI_CBAL_REG
 0x410

	)

238 
	#TSI_CRGAT_REG
 0x414

	)

239 
	#TSI_CRGAT_EN
 (1<<7)

	)

240 
	#TSI_CRGAT_AS_MSK
 (7<<4)

	)

241 
	#TSI_CRGAT_A16
 (0<<4)

	)

242 
	#TSI_CRGAT_A24
 (1<<4)

	)

243 
	#TSI_CRGAT_A32
 (2<<4)

	)

244 
	#TSI_CRGAT_A64
 (4<<4)

	)

245 
	#TSI_CRGAT_SUP
 (1<<3)

	)

246 
	#TSI_CRGAT_USR
 (1<<2)

	)

247 
	#TSI_CRGAT_PGM
 (1<<1)

	)

248 
	#TSI_CRGAT_DATA
 (1<<0)

	)

250 
	#TSI_VICR_REG
 0x440

	)

251 
	#TSI_VICR_CNTS
(
v
Ë(((v)&3)<<30)

	)

252 
	#TSI_VICR_CNTS_DIS
 (0<<30)

	)

253 
	#TSI_VICR_CNTS_IRQ1
 (1<<30)

	)

254 
	#TSI_VICR_CNTS_IRQ2
 (2<<30)

	)

255 
	#TSI_VICR_EDGIS
(
v
Ë(((v)&3)<<28)

	)

256 
	#TSI_VICR_EDGIS_DIS
 (0<<28)

	)

257 
	#TSI_VICR_EDGIS_IRQ1
 (1<<28)

	)

258 
	#TSI_VICR_EDGIS_IRQ2
 (2<<28)

	)

259 
	#TSI_VICR_IRQ1F
(
v
Ë(((v)&3)<<26)

	)

260 
	#TSI_VICR_IRQ1F_NORML
 (0<<26)

	)

261 
	#TSI_VICR_IRQ1F_PULSE
 (1<<26)

	)

262 
	#TSI_VICR_IRQ1F_CLOCK
 (2<<26)

	)

263 
	#TSI_VICR_IRQ1F_1MHZ
 (3<<26)

	)

264 
	#TSI_VICR_IRQ2F
(
v
Ë(((v)&3)<<24)

	)

265 
	#TSI_VICR_IRQ2F_NORML
 (0<<24)

	)

266 
	#TSI_VICR_IRQ2F_PULSE
 (1<<24)

	)

267 
	#TSI_VICR_IRQ2F_CLOCK
 (2<<24)

	)

268 
	#TSI_VICR_IRQ2F_1MHZ
 (3<<24)

	)

269 
	#TSI_VICR_BIP
 (1<<23)

	)

270 
	#TSI_VICR_BIPS
 (1<<22)

	)

271 
	#TSI_VICR_IRQC
 (1<<15)

	)

272 
	#TSI_VICR_IRQLS
(
v
Ë(((v)&7)<<12)

	)

273 
	#TSI_VICR_IRQS
 (1<<11)

	)

274 
	#TSI_VICR_IRQL
(
v
Ë(((v)&7)<<8)

	)

275 
	#TSI_VICR_STID
(
v
Ë((v)&0xff)

	)

276 
	#TSI_INTEN_REG
 0x448

	)

277 
	#TSI_INTEO_REG
 0x44c

	)

278 
	#TSI_INTS_REG
 0x450

	)

279 
	#TSI_INTS_IRQ1S
 (1<<1)

	)

280 
	#TSI_INTS_IRQ2S
 (1<<2)

	)

281 
	#TSI_INTS_IRQ3S
 (1<<3)

	)

282 
	#TSI_INTS_IRQ4S
 (1<<4)

	)

283 
	#TSI_INTS_IRQ5S
 (1<<5)

	)

284 
	#TSI_INTS_IRQ6S
 (1<<6)

	)

285 
	#TSI_INTS_IRQ7S
 (1<<7)

	)

286 
	#TSI_INTS_ACFLS
 (1<<8)

	)

287 
	#TSI_INTS_SYSFLS
 (1<<9)

	)

288 
	#TSI_INTS_IACKS
 (1<<10)

	)

289 
	#TSI_INTS_VIES
 (1<<11)

	)

290 
	#TSI_INTS_VERRS
 (1<<12)

	)

291 
	#TSI_INTS_PERRS
 (1<<13)

	)

292 
	#TSI_INTS_MB0S
 (1<<16)

	)

293 
	#TSI_INTS_MB1S
 (1<<17)

	)

294 
	#TSI_INTS_MB2S
 (1<<18)

	)

295 
	#TSI_INTS_MB3S
 (1<<19)

	)

296 
	#TSI_INTS_LM0S
 (1<<20)

	)

297 
	#TSI_INTS_LM1S
 (1<<21)

	)

298 
	#TSI_INTS_LM2S
 (1<<22)

	)

299 
	#TSI_INTS_LM3S
 (1<<23)

	)

300 
	#TSI_INTS_DMA0S
 (1<<24)

	)

301 
	#TSI_INTS_DMA1S
 (1<<25)

	)

302 
	#TSI_INTC_REG
 0x454

	)

303 
	#TSI_INTC_ACFLC
 (1<<8)

	)

304 
	#TSI_INTC_SYSFLC
 (1<<9)

	)

305 
	#TSI_INTC_IACKC
 (1<<10)

	)

306 
	#TSI_INTC_VIEC
 (1<<11)

	)

307 
	#TSI_INTC_VERRC
 (1<<12)

	)

308 
	#TSI_INTC_PERRC
 (1<<13)

	)

309 
	#TSI_INTC_MB0C
 (1<<16)

	)

310 
	#TSI_INTC_MB1C
 (1<<17)

	)

311 
	#TSI_INTC_MB2C
 (1<<18)

	)

312 
	#TSI_INTC_MB3C
 (1<<19)

	)

313 
	#TSI_INTC_LM0C
 (1<<20)

	)

314 
	#TSI_INTC_LM1C
 (1<<21)

	)

315 
	#TSI_INTC_LM2C
 (1<<22)

	)

316 
	#TSI_INTC_LM3C
 (1<<23)

	)

317 
	#TSI_INTC_DMA0C
 (1<<24)

	)

318 
	#TSI_INTC_DMA1C
 (1<<25)

	)

319 
	#TSI_INTM1_REG
 0x458

	)

320 
	#TSI_INTM2_REG
 0x45c

	)

322 
	#TSI_CBAR_REG
 0xffc

	)

324 
	#TSI_CSR_OFFSET
 0x7f000

	)

326 
	#TSI_CRG_SIZE
 (1<<12Ë

	)

329 
	#TSI_RD
(
ba£
, 
ªg
Ë
	`ö_be32
((vﬁ©ûê
uöt32_t
 *)((ba£Ë+ (ªg)/(*ba£)))

	)

330 
	#TSI_RD16
(
ba£
, 
ªg
Ë
	`ö_be16
((vﬁ©ûê
uöt16_t
 *)(ba£Ë+ (ªg)/(uöt16_t))

	)

331 
	#TSI_LE_RD16
(
ba£
, 
ªg
Ë
	`ö_À16
((vﬁ©ûê
uöt16_t
 *)(ba£Ë+ (ªg)/(uöt16_t))

	)

332 
	#TSI_LE_RD32
(
ba£
, 
ªg
Ë
	`ö_À32
((vﬁ©ûê
uöt32_t
 *)(ba£Ë+ (ªg)/(*ba£))

	)

333 
	#TSI_RD8
(
ba£
, 
ªg
Ë
	`ö_8
((vﬁ©ûê
uöt8_t
 *)(ba£Ë+ (ªg))

	)

334 
	#TSI_WR
(
ba£
, 
ªg
, 
vÆ
Ë
	`out_be32
((vﬁ©ûê
uöt32_t
 *)((ba£Ë+ (ªg)/(*ba£)), vÆ)

	)

336 
	#UNIV_SCTL_AM_MASK
 (
UNIV_CTL_VAS
 | 
UNIV_SCTL_PGM
 | 
UNIV_SCTL_DAT
 | 
UNIV_SCTL_USER
 | 
UNIV_SCTL_SUPER
)

	)

340 #i‚de‡
BSP_PCI_FIND_DEVICE


341 
	#BSP_PCI_FIND_DEVICE
 
pci_föd_devi˚


	)

343 #i‚de‡
BSP_PCI_CONFIG_IN_LONG


344 
	#BSP_PCI_CONFIG_IN_LONG
 
pci_ªad_c⁄fig_dw‹d


	)

346 #i‚de‡
BSP_PCI_CONFIG_IN_SHORT


347 
	#BSP_PCI_CONFIG_IN_SHORT
 
pci_ªad_c⁄fig_w‹d


	)

349 #i‚de‡
BSP_PCI_CONFIG_OUT_SHORT


350 
	#BSP_PCI_CONFIG_OUT_SHORT
 
pci_wrôe_c⁄fig_w‹d


	)

352 #i‚de‡
BSP_PCI_CONFIG_IN_BYTE


353 
	#BSP_PCI_CONFIG_IN_BYTE
 
pci_ªad_c⁄fig_byã


	)

356 
uöt32_t
 
	tpci_ul⁄g
;

358 #ifde‡
__BIG_ENDIAN__


359 
ölöe
 
	$°_be32
–
uöt32_t
 *
a
, uöt32_à
v
)

361 *
a
 = 
v
;

362 
	}
}

363 
ölöe
 
uöt32_t
 
	$ld_be32
–
uöt32_t
 *
a
 )

365  *
a
;

366 
	}
}

367 #ñi‡
deföed
(
__LITTLE_ENDIAN__
)

373 #i‚de‡
BSP_LOCAL2PCI_ADDR


375 #i‚de‡
PCI_DRAM_OFFSET


376 
	#PCI_DRAM_OFFSET
 0

	)

378 
	#BSP_LOCAL2PCI_ADDR
(
l
Ë(((
uöt32_t
Ó)+
PCI_DRAM_OFFSET
)

	)

384 #i‚de‡
BSP_PCI2LOCAL_ADDR


385 #i‚de‡
PCI_MEM_BASE


386 
	#PCI_MEM_BASE
 0

	)

388 
	#BSP_PCI2LOCAL_ADDR
(
memaddr
Ë(()(memaddrË+ 
PCI_MEM_BASE
)

	)

391 
uöt32_t
 
	tBEVÆue
;

394 
BERegi°î
 *
	mba£
;

395 
	múqLöe
;

396 
	mpic_pö
[
TSI_NUM_WIRES
];

397 } 
	tTsi148Dev
;

399 
Tsi148Dev
 
	gdevs
[
NUM_TSI_DEVS
] = {{0}};

401 
	#THEBASE
 (
devs
[0].
ba£
)

	)

404 
vmeTsi148RegP‹t
;

405 
vmeTsi148RegCSR
;

414 
	$u¥ötf
(
FILE
 *
f
, *
fmt
, ...)

416 
va_li°
 
≠
;

417 
	`va_°¨t
(
≠
, 
fmt
);

418 i‡(!
f
 || !
_impuª_±r
->
__sdidöô
) {

422 
	`v¥ötk
(
fmt
,
≠
);

425 
	`vÂrötf
(
f
,
fmt
,
≠
);

427 
	`va_íd
(
≠
);

428 
	}
}

430 
	#CHECK_BASE
(
ba£
,
quõt
,
rvÆ
) \

432 i‡–!
ba£
 ) { \

433 i‡–!
quõt
 ) { \

434 
	`u¥ötf
(
°dîr
,"Tsi148: DriverÇot initialized\n"); \

436  
rvÆ
; \

438 } 0)

	)

441 
	$vmeTsi148FödPciBa£
(

442 
ö°™˚
,

443 
BERegi°î
 **
pba£


446 
bus
,
dev
,
fun
;

447 
pci_ul⁄g
 
bußddr
;

448 
úqlöe
;

449 
wrd
;

451 i‡(
	`BSP_PCI_FIND_DEVICE
(

452 
PCI_VENDOR_TUNDRA
,

453 
PCI_DEVICE_TSI148
,

454 
ö°™˚
,

455 &
bus
,

456 &
dev
,

457 &
fun
))

459 i‡(
	`BSP_PCI_CONFIG_IN_LONG
(
bus
,
dev
,
fun
,
PCI_BASE_ADDRESS_0
,&
bußddr
))

463 *
pba£
=(
BERegi°î
*)(((
pci_ul⁄g
)
	`BSP_PCI2LOCAL_ADDR
(
bußddr
)) & ~0xff);

465 i‡(
	`BSP_PCI_CONFIG_IN_BYTE
(
bus
,
dev
,
fun
,
PCI_INTERRUPT_LINE
,&
úqlöe
))

469 
	`BSP_PCI_CONFIG_IN_SHORT
(
bus
, 
dev
, 
fun
, 
PCI_COMMAND
, &
wrd
);

470 
	`BSP_PCI_CONFIG_OUT_SHORT
(
bus
, 
dev
, 
fun
, 
PCI_COMMAND
, 
wrd
 | 
PCI_COMMAND_MEMORY
 | 
PCI_COMMAND_MASTER
);

472  
úqlöe
;

473 
	}
}

476 
	$vmeTsi148InôIn°™˚
(
ö°™˚
)

478 
úq
;

479 
BERegi°î
 *
ba£
;

481 i‡–
ö°™˚
 >
NUM_TSI_DEVS
 )

483 i‡–
devs
[
ö°™˚
].
ba£
 )

486 i‡((
úq
=
	`vmeTsi148FödPciBa£
(
ö°™˚
,&
ba£
)) < 0) {

487 
	`u¥ötf
(
°dîr
,"unableÅo findá Tsi148 inÖci config space\n");

489 
	`u¥ötf
(
°dîr
,"Tundra Tsi148 PCI-VME bridge detectedát 0x%08x, IRQ %d\n",

490 ()
ba£
, 
úq
);

492 
devs
[0].
ba£
 = base;

493 
devs
[0].
úqLöe
 = 
úq
;

495  
úq
 < 0 ? -1 : 0;

496 
	}
}

499 
	$vmeTsi148Inô
()

501  
	`vmeTsi148InôIn°™˚
(0);

502 
	}
}

506 
	$vmeTsi148Re£tXX
(
BERegi°î
 *
ba£
)

508 
p‹t
;

509 
uöt32_t
 
v
;

511 
	`CHECK_BASE
(
ba£
,0, );

513 
	`vmeTsi148DißbÀAŒOutboundP‹tsXX
(
ba£
);

514  
p‹t
=0;Ö‹à< 
TSI148_NUM_OPORTS
;Öort++ )

515 
	`TSI_WR
(
ba£
, 
	`TSI_OTBS_REG
(
p‹t
), 0);

516 
	`TSI_WR
(
ba£
, 
TSI_INTEO_REG
, 0);

517 
	`TSI_WR
(
ba£
, 
TSI_INTEN_REG
, 0);

518 
	`TSI_WR
(
ba£
, 
TSI_INTC_REG
, 0xffffffff);

519 
	`TSI_WR
(
ba£
, 
TSI_INTM1_REG
, 0);

520 
	`TSI_WR
(
ba£
, 
TSI_INTM2_REG
, 0);

521 
	`TSI_WR
(
ba£
, 
TSI_VICR_REG
, 0);

522 
	`TSI_WR
(
ba£
, 
TSI_VEAT_REG
, 
TSI_VEAT_VESCL
);

524 
	#TSI_VSTAT_BDFAIL
 (1<<14)

	)

525 
	`TSI_WR
(
ba£
, 
TSI_VSTAT_REG
, 
	`TSI_RD
(ba£, TSI_VSTAT_REGË& ~
TSI_VSTAT_BDFAIL
);

532 
v
 = 
	`TSI_RD
(
ba£
, 
TSI_VMCTRL_REG
);

533 
v
 &~–
TSI_VMCTRL_VTON_MSK
 | 
TSI_VMCTRL_VREL_MSK
 );

534 
v
 |(
TSI_VMCTRL_VTON_512us
 | 
TSI_VMCTRL_VREL_TON‹DONE_™d_REQ
 );

535 
	`TSI_WR
(
ba£
, 
TSI_VMCTRL_REG
, 
v
);

536 
	}
}

539 
	$vmeTsi148Re£t
()

541 
	`vmeTsi148Re£tXX
(
THEBASE
);

542 
	}
}

545 
	$vmeTsi148Re£tBusXX
(
BERegi°î
 *
ba£
)

547 
Êags
;

548 
uöt32_t
 
v
;

550 
	`πems_öãºu±_dißbÀ
(
Êags
);

551 
v
 = 
	`TSI_RD
(
ba£
, 
TSI_VCTRL_REG
);

552 
	`TSI_WR
(
ba£
, 
TSI_VCTRL_REG
, 
v
 | 
TSI_VCTRL_SRESET
);

553 
	`πems_öãºu±_íabÀ
(
Êags
);

554 
	}
}

557 
	$vmeTsi148Re£tBus
()

559 
	`vmeTsi148Re£tBusXX
(
THEBASE
);

560 
	}
}

567 
	$ck2es°
(
am
)

569 i‡–
	`VME_AM_IS_2eSST
(
am
) ) {

571 
am
 &~
VME_AM_MASK
;

572 
am
 |
VME_AM_2eVME_6U
;

574  
am
;

575 
	}
}

578 
	$am2omode
(
addªss_•a˚
, *
pmode
)

580 
mode
 = 0;

581 
tm
 = 
TSI_TM_SCT_IDX
;

583  
VME_MODE_DBW_MSK
 & 
addªss_•a˚
 ) {

584 
VME_MODE_DBW8
:

587 
VME_MODE_DBW16
:

591 
VME_MODE_DBW32
:

592 
mode
 |
	`TSI_OTAT_DBW
(1);

596 i‡–! (
VME_MODE_PREFETCH_ENABLE
 & 
addªss_•a˚
) )

597 
mode
 |
TSI_OTAT_MRPFD
;

599 
mode
 |
	`TSI_OTAT_PFS
(
addªss_•a˚
>>
_LD_VME_MODE_PREFETCHSZ
);

602 
addªss_•a˚
 = 
	`ck2es°
(address_space);

604 
addªss_•a˚
 & 
VME_AM_MASK
) {

605 
VME_AM_STD_SUP_PGM
:

606 
VME_AM_STD_USR_PGM
:

608 
mode
 |
TSI_OTAT_PGM
;

611 
VME_AM_STD_SUP_BLT
:

612 
VME_AM_STD_SUP_MBLT
:

614 
VME_AM_STD_USR_BLT
:

615 
VME_AM_STD_USR_MBLT
:

616  
addªss_•a˚
 & 3 ) {

617 0: 
tm
 = 
TSI_TM_MBLT_IDX
; ;

618 3: 
tm
 = 
TSI_TM_BLT_IDX
; ;

622 
VME_AM_STD_SUP_DATA
:

623 
VME_AM_STD_USR_DATA
:

625 
mode
 |
TSI_OTAT_ADMODE_A24
;

628 
VME_AM_EXT_SUP_PGM
:

629 
VME_AM_EXT_USR_PGM
:

630 
mode
 |
TSI_OTAT_PGM
;

633 
VME_AM_EXT_SUP_BLT
:

634 
VME_AM_EXT_SUP_MBLT
:

636 
VME_AM_EXT_USR_BLT
:

637 
VME_AM_EXT_USR_MBLT
:

638  
addªss_•a˚
 & 3 ) {

639 0: 
tm
 = 
TSI_TM_MBLT_IDX
; ;

640 3: 
tm
 = 
TSI_TM_BLT_IDX
; ;

644 
VME_AM_EXT_SUP_DATA
:

645 
VME_AM_EXT_USR_DATA
:

647 
mode
 |
TSI_OTAT_ADMODE_A32
;

650 
VME_AM_SUP_SHORT_IO
:

651 
VME_AM_USR_SHORT_IO
:

652 
mode
 |
TSI_OTAT_ADMODE_A16
;

655 
VME_AM_CSR
:

656 
mode
 |
TSI_OTAT_ADMODE_CSR
;

659 
VME_AM_2eVME_6U
:

660 
VME_AM_2eVME_3U
:

661 
mode
 |
TSI_OTAT_ADMODE_A32
;

662 i‡–
	`VME_AM_IS_2eSST
(
addªss_•a˚
) ) {

663 
tm
 = ( 
VME_AM_2eSST_BCST
 & 
addªss_•a˚
 ) ?

664 
TSI_TM_2eSSTB_IDX
 : 
TSI_TM_2eSST_IDX
;

665  
	`VME_AM_IS_2eSST
(
addªss_•a˚
) ) {

667 
VME_AM_2eSST_LO
: 
mode
 |
TSI_OTAT_2eSSTM_160
; ;

668 
VME_AM_2eSST_MID
: 
mode
 |
TSI_OTAT_2eSSTM_267
; ;

669 
VME_AM_2eSST_HI
: 
mode
 |
TSI_OTAT_2eSSTM_320
; ;

672 
tm
 = 
TSI_TM_2eVME_IDX
;

683 
mode
 |
	`TSI_OTAT_TM
(
tm
);

685 i‡–
	`VME_AM_IS_SUP
(
addªss_•a˚
) )

686 
mode
 |
TSI_OTAT_SUP
;

687 *
pmode
 = 
mode
;

689 
	}
}

692 
	$am2imode
(
addªss_•a˚
, *
pmode
)

694 
mode
=0;

695 
pgm
 = 0;

697 
mode
 |
	`TSI_ITAT_VFS
(
addªss_•a˚
>>
_LD_VME_MODE_PREFETCHSZ
);

699 i‡–
	`VME_AM_IS_2eSST
(
addªss_•a˚
) ) {

700 
mode
 |
TSI_ITAT_2eSST
;

701 i‡–
VME_AM_2eSST_BCST
 & 
addªss_•a˚
 )

702 
mode
 |
TSI_ITAT_2eSSTB
;

703  
	`VME_AM_IS_2eSST
(
addªss_•a˚
) ) {

705 
VME_AM_2eSST_LO
: 
mode
 |
TSI_ITAT_2eSSTM_160
; ;

706 
VME_AM_2eSST_MID
: 
mode
 |
TSI_ITAT_2eSSTM_267
; ;

707 
VME_AM_2eSST_HI
: 
mode
 |
TSI_ITAT_2eSSTM_320
; ;

709 
addªss_•a˚
 = 
	`ck2es°
(address_space);

712 
mode
 |
TSI_ITAT_BLT
;

713 
mode
 |
TSI_ITAT_MBLT
;

715 
mode
 |
TSI_ITAT_PGM
;

716 
mode
 |
TSI_ITAT_USR
;

718 
addªss_•a˚
 & 
VME_AM_MASK
) {

719 
VME_AM_STD_SUP_PGM
:

720 
VME_AM_STD_USR_PGM
:

722 
pgm
 = 1;

725 
VME_AM_STD_SUP_BLT
:

726 
VME_AM_STD_SUP_MBLT
:

727 
VME_AM_STD_USR_BLT
:

728 
VME_AM_STD_USR_MBLT
:

729 
VME_AM_STD_SUP_DATA
:

730 
VME_AM_STD_USR_DATA
:

732 
mode
 |
TSI_ITAT_ADMODE_A24
;

735 
VME_AM_EXT_SUP_PGM
:

736 
VME_AM_EXT_USR_PGM
:

737 
pgm
 = 1;

740 
VME_AM_2eVME_6U
:

741 
VME_AM_2eVME_3U
:

742 
VME_AM_EXT_SUP_BLT
:

743 
VME_AM_EXT_SUP_MBLT
:

744 
VME_AM_EXT_USR_BLT
:

745 
VME_AM_EXT_USR_MBLT
:

746 
VME_AM_EXT_SUP_DATA
:

747 
VME_AM_EXT_USR_DATA
:

748 
mode
 |
TSI_ITAT_ADMODE_A32
;

751 
VME_AM_SUP_SHORT_IO
:

752 
VME_AM_USR_SHORT_IO
:

753 
mode
 |
TSI_ITAT_ADMODE_A16
;

757 *
pmode
 = 0;

764 i‡–
	`VME_AM_IS_SUP
(
addªss_•a˚
) )

765 
mode
 |
TSI_ITAT_SUP
;

767 i‡–!
pgm
 )

768 
mode
 |
TSI_ITAT_DATA
;

770 *
pmode
 = 
mode
;

772 
	}
}

775 
	$ªadTrùÀ
(

776 
BERegi°î
 *
ba£
,

777 
ªg
,

778 *
ps
,

779 *
∂
,

780 *
po
)

782 *
ps
 = 
	`TSI_RD
(
ba£
, 
ªg
);

783 *
ps
 = (*ps<<32Ë| (
	`TSI_RD
(
ba£
, (
ªg
+4)) & 0xffff0000);

784 *
∂
 = 
	`TSI_RD
(
ba£
, (
ªg
+8));

785 *
∂
 = (*∂<<32Ë| (
	`TSI_RD
(
ba£
, (
ªg
+0xc)) & 0xffff0000);

786 *
po
 = 
	`TSI_RD
(
ba£
, (
ªg
+0x10));

787 *
po
 = (*po<<32Ë| (
	`TSI_RD
(
ba£
, (
ªg
+0x14)) & 0xffff0000);

788 
	}
}

792 
	$öboundGønuœrôy
(
ô©
)

794  
ô©
 & 
	`TSI_ITAT_AS
(-1) ) {

795 
TSI_ITAT_ADMODE_A16
:  0xf;

796 
TSI_ITAT_ADMODE_A24
:  0xfff;

801 
	}
}

804 
	$c⁄figTsiP‹t
(

805 
BERegi°î
 *
ba£
,

806 
isout
,

807 
p‹t
,

808 
addªss_•a˚
,

809 
vme_addªss
,

810 
pci_addªss
,

811 
Àngth
)

813 
°¨t
, 
limô
, 
off°
;

814 
mode
, 
mask
, 
èt_ªg
, 
tßu_ªg
;

815 *
«me
 = (
isout
 ? "Outbound" : "Inbound");

816 
i
,
s
,
l
;

818 
	`CHECK_BASE
(
ba£
,0,-1);

820 
mode
 = 0;

822 i‡–
p‹t
 >(
isout
 ? 
TSI148_NUM_OPORTS
 : 
TSI148_NUM_IPORTS
) ) {

823 
	`u¥ötf
(
°dîr
,"Tsi148 %†P‹àCfg: invÆidÖ‹t\n", 
«me
);

827 i‡–
ba£
 =
THEBASE
 && 
isout
 && 
vmeTsi148RegP‹t
 =
p‹t
 ) {

828 
	`u¥ötf
(
°dîr
,"Tsi148 %†P‹àCfg: invÆidÖ‹t;Ñe£rved byÅhêöãºu± m™agî f‹ CRG\n", 
«me
);

832 i‡–
Àngth
 && (
isout
 ? 
	`am2omode
(
addªss_•a˚
, &
mode
Ë: 
	`am2imode
(address_space, &mode)) ) {

833 
	`u¥ötf
(
°dîr
,"Tsi148 %†P‹àCfg: invÆidáddªs†•a˚ / modêÊags\n",
«me
);

838 i‡–
isout
 ) {

839 
°¨t
 = 
pci_addªss
;

840 
off°
 = ()
vme_addªss
 - 
°¨t
;

841 
mask
 = 0xffff;

842 
èt_ªg
 = 
	`TSI_OTAT_REG
(
p‹t
);

843 
tßu_ªg
 = 
	`TSI_OTSAU_REG
(
p‹t
);

844 
mode
 |
TSI_OTAT_EN
;

847  
i
 = 0; i < 
TSI148_NUM_OPORTS
; i++ ) {

849 i‡–
i
 =
p‹t
 || ! (
TSI_OTAT_EN
 & 
	`TSI_RD
(
ba£
, 
	`TSI_OTAT_REG
(i))) )

853 
s
 = 
	`TSI_RD
(
ba£
, 
	`TSI_OTSAU_REG
(
i
) + 0x04);

854 
l
 = 
	`TSI_RD
(
ba£
, 
	`TSI_OTSAU_REG
(
i
) + 0x0c);

855 i‡–! ( 
°¨t
 + 
Àngth
 <
s
 || sèπ > s + 
l
 ) ) {

856 
	`u¥ötf
(
°dîr
,"Tsi148 Outbound P‹àCfg: PCIáddªs†øngêovîœp†wôhÖ‹à%ò(0x%08x..0x%08x)\n", 
i
, 
s
, 
l
);

861 
°¨t
 = 
vme_addªss
;

862 
off°
 = ()
pci_addªss
 - 
°¨t
;

863 
mask
 = 
	`öboundGønuœrôy
(
mode
);

864 
èt_ªg
 = 
	`TSI_ITAT_REG
(
p‹t
);

865 
tßu_ªg
 = 
	`TSI_ITSAU_REG
(
p‹t
);

866 
mode
 |
TSI_ITAT_EN
;

869  
i
 = 0; i < 
TSI148_NUM_IPORTS
; i++ ) {

871 i‡–
i
 =
p‹t
 || ! (
TSI_ITAT_EN
 & (
s
=
	`TSI_RD
(
ba£
, 
	`TSI_ITAT_REG
(i)))) )

874 i‡–(
	`TSI_ITAT_AS
(-1Ë& 
s
Ë!(TSI_ITAT_AS(-1Ë& 
mode
) ) {

879 i‡–! (
mode
 & 
s
 & (
TSI_ITAT_SUP
 | 
TSI_ITAT_USR
 | 
TSI_ITAT_PGM
 | 
TSI_ITAT_DATA
)) ) {

885 
s
 = 
	`TSI_RD
(
ba£
, 
	`TSI_ITSAU_REG
(
i
) + 0x04);

886 
l
 = 
	`TSI_RD
(
ba£
, 
	`TSI_ITSAU_REG
(
i
) + 0x0c);

887 i‡–! ( 
°¨t
 + 
Àngth
 <
s
 || sèπ > s + 
l
 ) ) {

888 
	`u¥ötf
(
°dîr
,"Tsi148 Inbound P‹àCfg: VMEáddªs†øngêovîœp†wôhÖ‹à%ò(0x%08x..0x%08x)\n", 
i
, 
s
, 
l
);

895 i‡–0 =
Àngth
 ) {

896 
	`TSI_WR
(
ba£
, 
èt_ªg
, 
	`TSI_RD
(ba£,Å©_ªgË& ~(
isout
 ? 
TSI_OTAT_EN
 : 
TSI_ITAT_EN
));

901 i‡–(
vme_addªss
 & 
mask
)

902 || (
pci_addªss
 & 
mask
)

903 || (
Àngth
 & 
mask
) ) {

904 
	`u¥ötf
(
°dîr
,"Tsi148 %s Port Cfg: invalidáddress/length; must be multiple of 0x%x\n",

905 
«me
,

906 
mask
+1);

910 
limô
 = 
°¨t
 + 
Àngth
 - 1;

912 i‡–
limô
 >= ()1<<32 ) {

913 
	`u¥ötf
(
°dîr
,"Tsi148 %†P‹àCfg: invÆidáddªss/Àngth; mu° bê< 1<<32\n", 
«me
);

918 
	`TSI_WR
(
ba£
, 
èt_ªg
, 0);

921 
	`TSI_WR
(
ba£
, 
tßu_ªg
 , 0);

922 
	`TSI_WR
(
ba£
, 
tßu_ªg
 + 0x04, (
uöt32_t
)
°¨t
);

923 
	`TSI_WR
(
ba£
, 
tßu_ªg
 + 0x08, 0);

924 
	`TSI_WR
(
ba£
, 
tßu_ªg
 + 0x0c, (
uöt32_t
)
limô
);

925 
	`TSI_WR
(
ba£
, 
tßu_ªg
 + 0x10, (
uöt32_t
)(
off°
>>32));

926 
	`TSI_WR
(
ba£
, 
tßu_ªg
 + 0x14, (
uöt32_t
)
off°
);

931 
	`TSI_WR
(
ba£
, 
èt_ªg
, 
mode
);

933 
	}
}

936 
	$dißbÀTsiP‹t
(

937 
BERegi°î
 *
ba£
,

938 
isout
,

939 
p‹t
)

941  
	`c⁄figTsiP‹t
(
ba£
, 
isout
, 
p‹t
, 0, 0, 0, 0);

942 
	}
}

945 
	$vmeTsi148InboundP‹tCfgXX
(

946 
BERegi°î
 *
ba£
,

947 
p‹t
,

948 
addªss_•a˚
,

949 
vme_addªss
,

950 
pci_addªss
,

951 
Àngth
)

953  
	`c⁄figTsiP‹t
(
ba£
, 0, 
p‹t
, 
addªss_•a˚
, 
vme_addªss
, 
pci_addªss
, 
Àngth
);

954 
	}
}

957 
	$vmeTsi148InboundP‹tCfg
(

958 
p‹t
,

959 
addªss_•a˚
,

960 
vme_addªss
,

961 
pci_addªss
,

962 
Àngth
)

964  
	`c⁄figTsiP‹t
(
THEBASE
, 0, 
p‹t
, 
addªss_•a˚
, 
vme_addªss
, 
pci_addªss
, 
Àngth
);

965 
	}
}

969 
	$vmeTsi148OutboundP‹tCfgXX
(

970 
BERegi°î
 *
ba£
,

971 
p‹t
,

972 
addªss_•a˚
,

973 
vme_addªss
,

974 
pci_addªss
,

975 
Àngth
)

977  
	`c⁄figTsiP‹t
(
ba£
, 1, 
p‹t
, 
addªss_•a˚
, 
vme_addªss
, 
pci_addªss
, 
Àngth
);

978 
	}
}

981 
	$vmeTsi148OutboundP‹tCfg
(

982 
p‹t
,

983 
addªss_•a˚
,

984 
vme_addªss
,

985 
pci_addªss
,

986 
Àngth
)

988  
	`c⁄figTsiP‹t
(
THEBASE
, 1, 
p‹t
, 
addªss_•a˚
, 
vme_addªss
, 
pci_addªss
, 
Àngth
);

989 
	}
}

993 
	$xœãFödP‹t
(

994 
BERegi°î
 *
ba£
,

995 
outbound
,

996 
ªvî£
,

997 
as
,

998 
aIn
,

999 *
∑Out


1002 
mode
, 
mode_msk
;

1003 
p‹t
;

1004 
°¨t
, 
limô
, 
off°
, 
a
;

1005 
tßu_ªg
, 
èt_ªg
, 
gøn
, 
skù
;

1007 
	`CHECK_BASE
(
ba£
,0,-1);

1009 
mode
 = 0;

1011  
as
 & 
VME_MODE_MATCH_MASK
 ) {

1012 
VME_MODE_EXACT_MATCH
:

1013 
mode_msk
 = ~0;

1016 
VME_MODE_AS_MATCH
:

1017 i‡–
outbound
 )

1018 
mode_msk
 = 
	`TSI_OTAT_ADMODE
(-1Ë| 
TSI_OTAT_EN
;

1020 
mode_msk
 = 
	`TSI_ITAT_AS
(-1Ë| 
TSI_ITAT_EN
;

1024 i‡–
outbound
 )

1025 
mode_msk
 = 
TSI_OTAT_PGM
 | 
TSI_OTAT_SUP
 | 
	`TSI_OTAT_ADMODE
(-1Ë| 
TSI_OTAT_EN
;

1027 
mode_msk
 = 
TSI_ITAT_PGM
 | 
TSI_ITAT_DATA
 | 
TSI_ITAT_SUP
 | 
TSI_ITAT_USR
 | 
	`TSI_ITAT_AS
(-1Ë| 
TSI_ITAT_EN
;

1031 
as
 &~
VME_MODE_MATCH_MASK
;

1033 i‡–
outbound
 ? 
	`am2omode
(
as
,&
mode
Ë: 
	`am2imode
(as,&mode) ) {

1034 
	`u¥ötf
(
°dîr
, "vmeTsi148XlateAddr: invalidáddress space/modeárgument");

1038 i‡(
outbound
 ) {

1039 
tßu_ªg
 = 
	`TSI_OTSAU_REG
(0);

1040 
èt_ªg
 = 
	`TSI_OTAT_REG
(0);

1041 
skù
 = 
TSI_OTSAU_SPACING
;

1042 
mode
 |
TSI_OTAT_EN
;

1043 
gøn
 = 0x10000;

1045 
tßu_ªg
 = 
	`TSI_ITSAU_REG
(0);

1046 
èt_ªg
 = 
	`TSI_ITAT_REG
(0);

1047 
skù
 = 
TSI_ITSAU_SPACING
;

1048 
mode
 |
TSI_ITAT_EN
;

1049 
gøn
 = 
	`öboundGønuœrôy
(
mode
) + 1;

1052  
p‹t
 = 0;Ö‹à< 
TSI148_NUM_OPORTS
;Ö‹t++, 
tßu_ªg
 +
skù
, 
èt_ªg
 += skip ) {

1054 i‡–(
mode
 & 
mode_msk
Ë=(
	`TSI_RD
(
ba£
, 
èt_ªg
) & mode_msk) ) {

1057 
	`ªadTrùÀ
(
ba£
, 
tßu_ªg
, &
°¨t
, &
limô
, &
off°
);

1058 
limô
 +
gøn
;

1060 i‡–!
ªvî£
 ) {

1061 
°¨t
 +
off°
;

1062 
limô
 +
off°
;

1063 
off°
 = -offst;

1065 
a
 = 
aIn
;

1066 i‡–
aIn
 >
°¨t
 &&áI¿<
limô
 ) {

1068 *
∑Out
 = ()(
a
 + 
off°
);

1069  
p‹t
;

1074 
	`u¥ötf
(
°dîr
, "vmeTsi148XlateAddr:Ço matching mapping found\n");

1076 
	}
}

1079 
	$vmeTsi148XœãAddrXX
(

1080 
BERegi°î
 *
ba£
,

1081 
outbound
,

1082 
ªvî£
,

1083 
as
,

1084 
aIn
,

1085 *
∑Out


1088 
p‹t
 = 
	`xœãFödP‹t
–
ba£
, 
outbound
, 
ªvî£
, 
as
, 
aIn
, 
∑Out
 );

1089  
p‹t
 < 0 ? -1 : 0;

1090 
	}
}

1093 
	$vmeTsi148XœãAddr
(

1094 
outbound
,

1095 
ªvî£
,

1096 
as
,

1097 
aIn
,

1098 *
∑Out


1101  
	`vmeTsi148XœãAddrXX
(
THEBASE
, 
outbound
, 
ªvî£
, 
as
, 
aIn
, 
∑Out
);

1102 
	}
}

1106 
	$u¥ötÊlx
(
FILE
 *
f
, 
v
)

1108 i‡–
v
 >= (()1)<<32 )

1109 
	`u¥ötf
(
f
,"0x%lx%08lx ", ()(
v
>>32), ()(v & 0xffffffff));

1111 
	`u¥ötf
(
f
,"0x%08lx ", ()(
v
 & 0xffffffff));

1112 
	}
}

1115 
	$vmeTsi148OutboundP‹tsShowXX
(
BERegi°î
 *
ba£
, 
FILE
 *
f
)

1117 
p‹t
;

1118 
mode
;

1119 
tô
 = 0;

1121 
°¨t
, 
limô
, 
off°
;

1123 
	`CHECK_BASE
(
ba£
,0, );

1125 i‡(!
f
Ëf=
°dout
;

1126 
	`u¥ötf
(
f
,"Tsi148 Outbound Ports:\n");

1128  
p‹t
 = 0;Ö‹à< 
TSI148_NUM_OPORTS
;Öort++ ) {

1129 
mode
 = 
	`TSI_RD
(
ba£
, 
	`TSI_OTAT_REG
(
p‹t
));

1130 i‡–! (
TSI_OTAT_EN
 & 
mode
) )

1133 
	`ªadTrùÀ
(
ba£
, 
	`TSI_OTSAU_REG
(
p‹t
), &
°¨t
, &
limô
, &
off°
);

1136 
limô
 =Üimô-
°¨t
+0x10000;

1137 i‡–!
tô
 ) {

1138 
	`u¥ötf
(
f
,"Port VME-Addr Size PCI-Adrs Mode:\n");

1139 
tô
 = 1;

1141 
	`u¥ötf
(
f
,"%d: ", 
p‹t
);

1142 
	`u¥ötÊlx
(
f
,
°¨t
+
off°
);

1143 
	`u¥ötÊlx
(
f
,
limô
);

1144 
	`u¥ötÊlx
(
f
,
°¨t
);

1145  
mode
 & 
	`TSI_OTAT_ADMODE
(-1) ) {

1146 
TSI_OTAT_ADMODE_A16
: 
	`u¥ötf
(
f
,"A16"); ;

1147 
TSI_OTAT_ADMODE_A24
: 
	`u¥ötf
(
f
,"A24"); ;

1148 
TSI_OTAT_ADMODE_A32
: 
	`u¥ötf
(
f
,"A32"); ;

1149 
TSI_OTAT_ADMODE_A64
: 
	`u¥ötf
(
f
,"A64"); ;

1150 
TSI_OTAT_ADMODE_CSR
: 
	`u¥ötf
(
f
,"CSR"); ;

1151 : 
	`u¥ötf
(
f
,"A??"); ;

1154 i‡–
mode
 & 
TSI_OTAT_PGM
 ) 
	`u¥ötf
(
f
,", PGM");

1155 i‡–
mode
 & 
TSI_OTAT_SUP
 ) 
	`u¥ötf
(
f
,", SUP");

1156 i‡–! (
TSI_OTAT_MRPFD
 & 
mode
ËË
	`u¥ötf
(
f
,", PREFETCH");

1158  
mode
 & 
	`TSI_OTAT_DBW
(-1) ) {

1159 
	`TSI_OTAT_DBW
(0): 
	`u¥ötf
(
f
,", D16"); ;

1160 
	`TSI_OTAT_DBW
(1): 
	`u¥ötf
(
f
,", D32"); ;

1161 : 
	`u¥ötf
(
f
,", D??"); ;

1164  
mode
 & 
	`TSI_OTAT_TM
(-1) ) {

1165 
	`TSI_OTAT_TM
(0): 
	`u¥ötf
(
f
,", SCT"); ;

1166 
	`TSI_OTAT_TM
(1): 
	`u¥ötf
(
f
,", BLT"); ;

1167 
	`TSI_OTAT_TM
(2): 
	`u¥ötf
(
f
,", MBLT"); ;

1168 
	`TSI_OTAT_TM
(3): 
	`u¥ötf
(
f
,", 2eVME"); ;

1169 
	`TSI_OTAT_TM
(4): 
	`u¥ötf
(
f
,", 2eSST"); ;

1170 
	`TSI_OTAT_TM
(5): 
	`u¥ötf
(
f
,", 2eSST_BCST"); ;

1171 : 
	`u¥ötf
(
f
," TM??"); ;

1174 
	`u¥ötf
(
f
,"\n");

1176 
	}
}

1179 
	$vmeTsi148OutboundP‹tsShow
(
FILE
 *
f
)

1181 
	`vmeTsi148OutboundP‹tsShowXX
(
THEBASE
, 
f
);

1182 
	}
}

1185 
	$vmeTsi148InboundP‹tsShowXX
(
BERegi°î
 *
ba£
, 
FILE
 *
f
)

1187 
p‹t
;

1188 
mode
;

1189 
tô
 = 0;

1191 
°¨t
, 
limô
, 
off°
;

1193 
	`CHECK_BASE
(
ba£
,0, );

1195 i‡(!
f
Ëf=
°dout
;

1196 
	`u¥ötf
(
f
,"Tsi148 Inbound Ports:\n");

1198  
p‹t
 = 0;Ö‹à< 
TSI148_NUM_IPORTS
;Öort++ ) {

1199 
mode
 = 
	`TSI_RD
(
ba£
, 
	`TSI_ITAT_REG
(
p‹t
));

1200 i‡–! (
TSI_ITAT_EN
 & 
mode
) )

1203 
	`ªadTrùÀ
(
ba£
, 
	`TSI_ITSAU_REG
(
p‹t
), &
°¨t
, &
limô
, &
off°
);

1206 
limô
 =Üimô - 
°¨t
 + 
	`öboundGønuœrôy
(
mode
) + 1;

1207 i‡–!
tô
 ) {

1208 
	`u¥ötf
(
f
,"Port VME-Addr Size PCI-Adrs Mode:\n");

1209 
tô
 = 1;

1211 
	`u¥ötf
(
f
,"%d: ", 
p‹t
);

1212 
	`u¥ötÊlx
(
f
,
°¨t
);

1213 
	`u¥ötÊlx
(
f
,
limô
);

1214 
	`u¥ötÊlx
(
f
,
°¨t
+
off°
);

1215  
mode
 & 
	`TSI_ITAT_AS
(-1) ) {

1216 
TSI_ITAT_ADMODE_A16
: 
	`u¥ötf
(
f
,"A16"); ;

1217 
TSI_ITAT_ADMODE_A24
: 
	`u¥ötf
(
f
,"A24"); ;

1218 
TSI_ITAT_ADMODE_A32
: 
	`u¥ötf
(
f
,"A32"); ;

1219 
TSI_ITAT_ADMODE_A64
: 
	`u¥ötf
(
f
,"A64"); ;

1220 : 
	`u¥ötf
(
f
,"A??"); ;

1223 i‡–
mode
 & 
TSI_ITAT_PGM
 ) 
	`u¥ötf
(
f
,", PGM");

1224 i‡–
mode
 & 
TSI_ITAT_DATA
 ) 
	`u¥ötf
(
f
,", DAT");

1225 i‡–
mode
 & 
TSI_ITAT_SUP
 ) 
	`u¥ötf
(
f
,", SUP");

1226 i‡–
mode
 & 
TSI_ITAT_USR
 ) 
	`u¥ötf
(
f
,", USR");

1228 i‡–
mode
 & 
TSI_ITAT_2eSSTB
 ) 
	`u¥ötf
(
f
,", 2eSSTB");

1229 i‡–
mode
 & 
TSI_ITAT_2eSST
 ) 
	`u¥ötf
(
f
,", 2eSST");

1230 i‡–
mode
 & 
TSI_ITAT_2eVME
 ) 
	`u¥ötf
(
f
,", 2eVME");

1231 i‡–
mode
 & 
TSI_ITAT_MBLT
 ) 
	`u¥ötf
(
f
,", MBLT");

1232 i‡–
mode
 & 
TSI_ITAT_BLT
 ) 
	`u¥ötf
(
f
,", BLT");

1234 
	`u¥ötf
(
f
,"\n");

1236 
	}
}

1239 
	$vmeTsi148InboundP‹tsShow
(
FILE
 *
f
)

1241 
	`vmeTsi148InboundP‹tsShowXX
(
THEBASE
, 
f
);

1242 
	}
}

1246 
	$vmeTsi148DißbÀAŒInboundP‹tsXX
(
BERegi°î
 *
ba£
)

1248 
p‹t
;

1250  
p‹t
 = 0;Ö‹à< 
TSI148_NUM_IPORTS
;Öort++ )

1251 i‡–
	`dißbÀTsiP‹t
(
ba£
, 0, 
p‹t
) )

1253 
	}
}

1256 
	$vmeTsi148DißbÀAŒInboundP‹ts
()

1258 
	`vmeTsi148DißbÀAŒInboundP‹tsXX
(
THEBASE
);

1259 
	}
}

1262 
	$vmeTsi148DißbÀAŒOutboundP‹tsXX
(
BERegi°î
 *
ba£
)

1264 
p‹t
;

1266  
p‹t
 = 0;Ö‹à< 
TSI148_NUM_IPORTS
;Öort++ )

1267 i‡–
	`dißbÀTsiP‹t
(
ba£
, 1, 
p‹t
) )

1269 
	}
}

1272 
	$vmeTsi148DißbÀAŒOutboundP‹ts
()

1274 
	`vmeTsi148DißbÀAŒOutboundP‹tsXX
(
THEBASE
);

1275 
	}
}

1281 
	$vmeTsi148M≠CRGXX
(
BERegi°î
 *
b
, 
uöt32_t
 
vme_ba£
, uöt32_à
as
 )

1283 
uöt32_t
 
mode
;

1285 
	`CHECK_BASE
–
b
, 0, -1 );

1287 i‡–
vmeTsi148RegP‹t
 > -1 && ! 
vmeTsi148RegCSR
 ) {

1288 
	`u¥ötf
(
°dîr
,"vmeTsi148: CRGálready mappedánd in use by interrupt manager\n");

1293 
mode
 = 
TSI_CRGAT_EN
 | 
TSI_CRGAT_SUP
 | 
TSI_CRGAT_USR
 | 
TSI_CRGAT_PGM
 | 
TSI_CRGAT_DATA
;

1295 i‡–
	`VME_AM_IS_SHORT
(
as
) ) {

1296 
mode
 |
TSI_CRGAT_A16
;

1298 i‡–
	`VME_AM_IS_STD
(
as
) ) {

1299 
mode
 |
TSI_CRGAT_A24
;

1301 i‡–
	`VME_AM_IS_EXT
(
as
) ) {

1302 
mode
 |
TSI_CRGAT_A32
;

1308 
	`TSI_WR
–
b
, 
TSI_CBAL_REG
, (
vme_ba£
 & ~(
TSI_CRG_SIZE
-1)));

1309 
	`TSI_WR
–
b
, 
TSI_CRGAT_REG
, 
mode
 );

1312 
	}
}

1315 
	$vmeTsi148M≠CRG
(
uöt32_t
 
vme_ba£
, uöt32_à
as
 )

1317  
	`vmeTsi148M≠CRGXX
–
THEBASE
, 
vme_ba£
, 
as
 );

1318 
	}
}

1323 
	sIRQE¡ryRec_
 {

1324 
VmeTsi148ISR
 
	mi§
;

1325 *
	mu§D©a
;

1326 } 
	tIRQE¡ryRec
, *
	tIRQE¡ry
;

1328 
IRQE¡ry
 
	gúqHdlTbl
[
TSI_NUM_INT_VECS
]={0};

1330 
	gvmeTsi148IrqMgrIn°ÆÀd
 = 0;

1331 
	gvmeTsi148RegP‹t
 = -1;

1332 
	gvmeTsi148RegCSR
 = 0;

1333 
BERegi°î
 *
	gvmeTsi148RegBa£
 = 0;

1335 vﬁ©ûê
	gwúe_mask
[
TSI_NUM_WIRES
] = {0};

1337 
	gtsi_wúe
[
TSI_NUM_WIRES
] = {0};

1340 
	gtsi_ück_width
[7] = {

1345 
	guni2tsi_vec_m≠
[
TSI_NUM_INT_VECS
-256] = {

1369 
	gtsi2uni_vec_m≠
[
TSI_NUM_INT_VECS
 - 256] = {

1370 
TSI_ACFAIL_INT_VEC
,

1371 
TSI_SYSFAIL_INT_VEC
,

1372 
TSI_VME_SW_IACK_INT_VEC
,

1373 
TSI_VIES_INT_VEC
,

1374 
TSI_VERR_INT_VEC
,

1375 
TSI_LERR_INT_VEC
,

1378 
TSI_MBOX0_INT_VEC
,

1379 
TSI_MBOX1_INT_VEC
,

1380 
TSI_MBOX2_INT_VEC
,

1381 
TSI_MBOX3_INT_VEC
,

1382 
TSI_LM0_INT_VEC
,

1383 
TSI_LM1_INT_VEC
,

1384 
TSI_LM2_INT_VEC
,

1385 
TSI_LM3_INT_VEC
,

1386 
TSI_DMA_INT_VEC
,

1387 
TSI_DMA1_INT_VEC
,

1391 
ölöe
 

1392 
	$uni2tsivec
(
v
)

1394 i‡–
v
 < 0 || v >
TSI_NUM_INT_VECS
 )

1396  
v
 < 256 ? v : 
uni2tsi_vec_m≠
[v-256];

1397 
	}
}

1400 
	$lvl2bôno
(
Àvñ
)

1402 i‡–
Àvñ
 >= 256 )

1403  
	`uni2tsivec
(
Àvñ
) + 8 - 256;

1404 i‡–
Àvñ
 < 8 &&Üevel > 0 )

1405  
Àvñ
;

1407 
	}
}

1410 
	$vmeTsi148I¡Rouã
(
Àvñ
, 
pö
)

1412 
i
;

1413 
mask
, 
shi·
, 
m≠ªg
, 
Êags
, 
wúe
;

1415 i‡–
pö
 >
TSI_NUM_WIRES
 || ! 
tsi_wúe
[pö] || !
vmeTsi148IrqMgrIn°ÆÀd
 )

1418 i‡–
Àvñ
 >= 256 ) {

1419 i‡–(
i
 = 
	`uni2tsivec
(
Àvñ
)) < 0 )

1421 
shi·
 = 8 + (
i
-256);

1422 } i‡–1 <
Àvñ
 &&Üevel <=7 ) {

1423 
shi·
 = 
Àvñ
;

1428 
mask
 = 1<<
shi·
;

1431 i‡–
shi·
 < 16 ) {

1432 
m≠ªg
 = 
TSI_INTM2_REG
;

1433 } i‡–
shi·
 < 32 ) {

1434 
shi·
 -= 16;

1435 
m≠ªg
 = 
TSI_INTM1_REG
;

1440 
shi·
 <<=1;

1443 
wúe
 = (
tsi_wúe
[
pö
]-1Ë<< 
shi·
;

1445 
	`πems_öãºu±_dißbÀ
(
Êags
);

1447  
i
 = 0; i<
TSI_NUM_WIRES
; i++ ) {

1448 
wúe_mask
[
i
] &~
mask
;

1450 
wúe_mask
[
pö
] |
mask
;

1452 
mask
 = 
	`TSI_RD
(
THEBASE
, 
m≠ªg
Ë& ~ (0x3<<
shi·
);

1453 
mask
 |
wúe
;

1454 
	`TSI_WR
–
THEBASE
, 
m≠ªg
, 
mask
 );

1456 
	`πems_öãºu±_íabÀ
(
Êags
);

1458 
	}
}

1460 
VmeTsi148ISR


1461 
	$vmeTsi148ISRGë
(
ve˘‹
, **
∑rg
)

1463 
VmeTsi148ISR
 
rvÆ
 = 0;

1464 
Êags
;

1465 vﬁ©ûê
IRQE¡ry
 *
p
;

1466 
v
 = 
	`uni2tsivec
(
ve˘‹
);

1469 i‡–
v
 < 0 )

1470  
rvÆ
;

1472 
p
 = 
úqHdlTbl
 + 
v
;

1474 
	`πems_öãºu±_dißbÀ
(
Êags
);

1475 i‡–*
p
 ) {

1476 i‡–
∑rg
 )

1477 *
∑rg
 = (*
p
)->
u§D©a
;

1478 
rvÆ
 = (*
p
)->
i§
;

1480 
	`πems_öãºu±_íabÀ
(
Êags
);

1482  
rvÆ
;

1483 
	}
}

1486 
	$tsiVMEISR
(
πems_úq_hdl_∑øm
 
¨g
)

1488 
pö
 = ()
¨g
;

1489 
BERegi°î
 *
b
 = 
THEBASE
;

1490 
IRQE¡ry
 
ù
;

1491 
msk
,
löt°©
,
ve˘‹
, 
veˇrg
;

1492 
lvl
;

1504  (
löt°©
 = (
	`TSI_RD
(
vmeTsi148RegBa£
, 
TSI_INTS_REG
Ë& 
wúe_mask
[
pö
])) ) {

1510 #ifde‡
__PPC__


1511 
asm
 vﬁ©ûe("˙ézw %0, %1":"Ù"(
lvl
):"r"(
löt°©
));

1512 
lvl
 = 31-lvl;

1513 
msk
 = 1<<
lvl
;

1515 { 
m
[] = {

1518 
i
;

1519 
tmp
;

1526  
i
=0, 
lvl
=0, 
msk
 = 
löt°©
; i<5; i++ ) {

1527 
lvl
 <<= 1;

1528 i‡–(
tmp
 = 
msk
 & 
m
[
i
]) ) {

1529 
lvl
++;

1530 
msk
 = 
tmp
;

1532 
msk
 = msk & ~
m
[
i
];

1537 i‡–
lvl
 > 7 ) {

1539 
	`TSI_WR
(
b
, 
TSI_INTC_REG
, 
msk
);

1540 
ve˘‹
 = 256 + 
lvl
 - 8;

1541 
veˇrg
 = 
tsi2uni_vec_m≠
[
lvl
-8];

1544  
tsi_ück_width
[
lvl
-1] ) {

1547 
ve˘‹
 = 
	`TSI_RD8
(
b
, 
TSI_VIACK_1_REG
 - 4 + (
lvl
<<2) + 3);

1551 
ve˘‹
 = 
	`TSI_RD16
(
b
, 
TSI_VIACK_1_REG
 - 4 + (
lvl
<<2) + 2);

1555 
ve˘‹
 = 
	`TSI_RD
(
b
, 
TSI_VIACK_1_REG
 - 4 + (
lvl
<<2));

1558 
veˇrg
 = 
ve˘‹
;

1561 i‡–!(
ù
=
úqHdlTbl
[
ve˘‹
])) {

1563 
	`vmeTsi148I¡DißbÀ
(
lvl
);

1564 
	`¥ötk
("vmeTsi148 ISR: ERROR:Ço handlerÑegistered (level %i) IACK 0x%08x -- DISABLINGÜevel %i\n",

1565 
lvl
, 
ve˘‹
,Üvl);

1568 
ù
->
	`i§
(ù->
u§D©a
, 
veˇrg
);

1573 
	`iob¨rõr_rw
();

1575 }  (
löt°©
 &~
msk
) );

1578 
	}
}

1582 
	$my_no_›
(c⁄° 
πems_úq_c⁄√˘_d©a
 * 
¨g
)

1583 {
	}
}

1586 
	$my_isOn
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
¨g
)

1588  ()(
	`TSI_RD
(
THEBASE
, 
TSI_INTEO_REG
Ë& TSI_RD(THEBASE, 
TSI_INTEN_REG
));

1589 
	}
}

1592 
	$c⁄√˘I§
(
sh¨ed
, 
πems_úq_hdl
 
i§
, 
pic_löe
, 
¶Ÿ
)

1594 
πems_úq_c⁄√˘_d©a
 
xx
;

1595 
xx
.
⁄
 = 
my_no_›
;

1596 
xx
.
off
 = 
my_no_›
;

1597 
xx
.
isOn
 = 
my_isOn
;

1598 
xx
.
hdl
 = 
i§
;

1599 
xx
.
h™dÀ
 = (
πems_úq_hdl_∑øm
)
¶Ÿ
;

1600 
xx
.
«me
 = 
pic_löe
;

1602 i‡–
sh¨ed
 ) {

1603 #i‡
BSP_SHARED_HANDLER_SUPPORT
 > 0

1604 i‡(!
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
(&
xx
))

1605 
	`BSP_∑nic
("unableÅo install vmeTsi148 shared irq handler");

1607 
	`u¥ötf
(
°dîr
,"vmeTsi148: WARNING: your BSP doesn't support sharing interrupts\n");

1608 i‡(!
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
xx
))

1609 
	`BSP_∑nic
("unableÅo install vmeTsi148 irq handler");

1612 i‡(!
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
xx
))

1613 
	`BSP_∑nic
("unableÅo install vmeTsi148 irq handler");

1615 
	}
}

1618 
	$vmeTsi148In°ÆlIrqMgrA…
(
sh¨ed
, 
tsi_pö0
, 
pic_pö0
, ...)

1620 
rvÆ
;

1621 
va_li°
 
≠
;

1622 
	`va_°¨t
(
≠
, 
pic_pö0
);

1623 
rvÆ
 = 
	`vmeTsi148In°ÆlIrqMgrVa
(
sh¨ed
, 
tsi_pö0
, 
pic_pö0
, 
≠
);

1624 
	`va_íd
(
≠
);

1625  
rvÆ
;

1626 
	}
}

1628 #i‚de‡
BSP_EARLY_PROBE_VME


1629 
	#BSP_EARLY_PROBE_VME
(
addr
) \

1631 
	`vmeTsi148CÀ¨VMEBusEº‹sXX
–
THEBASE
, 0 ), \

1632 –((
PCI_DEVICE_TSI148
 << 16Ë| 
PCI_VENDOR_TUNDRA
 ) =
	`TSI_LE_RD32
–((
BERegi°î
*)(
addr
)), 0 ) \

1633 && 0 =
	`vmeTsi148CÀ¨VMEBusEº‹sXX
–
THEBASE
, 0 ) ) \

1634 )

	)

1643 
	$m≠≥dAndProbed
(
vme_addr
, 
as
, *
p˝u_addr
)

1645 
j
;

1646 *
ªgty≥
 = (
as
 & 
VME_AM_MASK
Ë=
VME_AM_CSR
 ? "CSR" : "CRG";

1649 i‡–0 > (
j
 = 
	`xœãFödP‹t
(

1650 
THEBASE
,

1652 
as
 | 
VME_MODE_AS_MATCH
,

1653 
vme_addr
,

1654 
p˝u_addr
 ) ) ) {

1655 
	`u¥ötf
(
°dîr
,"vmeTsi148 - U«bÀÅÿföd m≠pög f‹ %†VME ba£ (0x%08x)\n", 
ªgty≥
, 
vme_addr
);

1656 
	`u¥ötf
(
°dîr
," in outbound windows.\n");

1660 *
p˝u_addr
 = 
	`BSP_PCI2LOCAL_ADDR
( *pcpu_addr );

1661 i‡–
	`BSP_EARLY_PROBE_VME
(*
p˝u_addr
) ) {

1662 
	`u¥ötf
(
°dîr
,"vmeTsi148 - IRQ m™agî usög VME %†tÿÊush FIFO\n", 
ªgty≥
);

1663  
j
;

1665 
	`u¥ötf
(
°dîr
,"vmeTsi148 - Found slŸ infÿbuàdëe˘i⁄ o‡tsi148 i¿VME %†•a˚ faûed\n", 
ªgty≥
);

1669 
	}
}

1672 
	$vmeTsi148In°ÆlIrqMgrVa
(
sh¨ed
, 
tsi_pö0
, 
pic_pö0
, 
va_li°
 
≠
)

1674 
i
,
j
, 
•ecülPö
, 
tsi_pö
[
TSI_NUM_WIRES
+1], 
pic_pö
[TSI_NUM_WIRES];

1675 
˝u_ba£
, 
vme_ªg_ba£
;

1677 i‡(
vmeTsi148IrqMgrIn°ÆÀd
)  -4;

1681 i‡–
tsi_pö0
 < 0 ||Åsi_pin0 > 3 )  -1;

1683 
tsi_pö
[0] = 
tsi_pö0
;

1684 
pic_pö
[0] = 
pic_pö0
 < 0 ? 
devs
[0].
úqLöe
 :Öic_pin0;

1685 
i
 = 1;

1686  (
tsi_pö
[
i
] = 
	`va_¨g
(
≠
, )) >= 0 ) {

1688 i‡–
i
 >
TSI_NUM_WIRES
 ) {

1692 
pic_pö
[
i
] = 
	`va_¨g
(
≠
,);

1694 i‡–
tsi_pö
[
i
] > 3 )  -2;

1695 i‡–
pic_pö
[
i
] < 0 )  -3;

1696 
i
++;

1700  
i
=0; 
tsi_pö
[i] >= 0; i++ ) {

1701  
j
=
i
+1; 
tsi_pö
[j] >= 0; j++ ) {

1702 i‡–
tsi_pö
[
j
] =tsi_pö[
i
] )  -6;

1703 i‡–
pic_pö
[
j
] =pic_pö[
i
] )  -7;

1707 
i
 = -1;

1711 
	`u¥ötf
(
°dîr
,"vmeTsi148 IRQ manager:Üooking forÑegisters on VME...\n");

1713 i‡––
i
 = ((
	`TSI_RD
–
THEBASE
, 
TSI_CBAR_REG
 ) & 0xff) >> 3) ) > 0 ) {

1714 
	`u¥ötf
(
°dîr
,"TryingÅo find CSR on VME...\n");

1715 
vme_ªg_ba£
 = 
i
*0x80000 + 
TSI_CSR_OFFSET
;

1716 
i
 = 
	`m≠≥dAndProbed
–
vme_ªg_ba£
, 
VME_AM_CSR
 , &
˝u_ba£
);

1717 i‡–
i
 >= 0 )

1718 
vmeTsi148RegCSR
 = 1;

1720 
i
 = -1;

1723 i‡–-1 =
i
 ) {

1725 
	`u¥ötf
(
°dîr
,"TryingÅo find CRG on VME...\n");

1729 i‡–(
TSI_CRGAT_EN
 & (
j
 = 
	`TSI_RD
–
THEBASE
, 
TSI_CRGAT_REG
 ))) ) {

1730  
j
 & 
TSI_CRGAT_AS_MSK
 ) {

1731 
TSI_CRGAT_A16
 : 
i
 = 
VME_AM_SUP_SHORT_IO
; ;

1732 
TSI_CRGAT_A24
 : 
i
 = 
VME_AM_STD_SUP_DATA
; ;

1733 
TSI_CRGAT_A32
 : 
i
 = 
VME_AM_EXT_SUP_DATA
; ;

1737 
vme_ªg_ba£
 = 
	`TSI_RD
–
THEBASE
, 
TSI_CBAL_REG
 ) & ~ (
TSI_CRG_SIZE
 - 1);

1740 i‡–-1 =
i
 ) {

1742 
i
 = 
	`m≠≥dAndProbed
–
vme_ªg_ba£
, (ò& 
VME_AM_MASK
), &
˝u_ba£
 );

1746 i‡–
i
 < 0 ) {

1747 
	`u¥ötf
(
°dîr
,"vmeTsi148 IRQ manager - BSP configurationÉrror:ÑegistersÇot found on VME\n");

1748 
	`u¥ötf
(
°dîr
,"(should open outbound windowÅo CSR space or map CRG [vmeTsi148MapCRG()])\n");

1749 
	`u¥ötf
(
°dîr
,"Falling backÅo PCI but you mightÉxperience spurious VME interrupts;ÑeadáÑegister\n");

1750 
	`u¥ötf
(
°dîr
,"back from user ISRÅo flushÖosted-write FIFOásá work-around\n");

1751 
˝u_ba£
 = ()
THEBASE
;

1752 
i
 = -1;

1755 
vmeTsi148RegBa£
 = (
BERegi°î
*)
˝u_ba£
;

1756 
vmeTsi148RegP‹t
 = 
i
;

1759 i‡–
pic_pö
[0] >0 && 
devs
[0].
úqLöe
 !=Öic_pin[0] ) {

1760 
	`u¥ötf
(
°dîr
,"Overriding main IRQÜine PCI info with %d\n",

1761 
pic_pö
[0]);

1762 
devs
[0].
úqLöe
 = 
pic_pö
[0];

1765  
i
 = 0; 
tsi_pö
[i] >= 0; i++ ) {

1767 
tsi_wúe
[
i
] = 
tsi_pö
[i] + 1;

1768 
	`c⁄√˘I§
(
sh¨ed
, 
tsiVMEISR
, 
pic_pö
[
i
], i);

1771 
•ecülPö
 = 
tsi_pö
[1] >= 0 ? 1 : 0;

1776 
vmeTsi148IrqMgrIn°ÆÀd
=1;

1779  
i
=1; i<8; i++ )

1780 
	`vmeTsi148I¡Rouã
–
i
, 0 );

1781  
i
=
TSI_DMA_INT_VEC
; i<
TSI_NUM_INT_VECS
; i++ )

1782 
	`vmeTsi148I¡Rouã
–
i
, 
•ecülPö
 );

1784  
i
 = 0; i<
TSI_NUM_WIRES
; i++ ) {

1786 
devs
[0].
pic_pö
[
i
] = ( ( 
tsi_pö
[i] >=0 ) ?Öic_pin[i] : -1 );

1790 
	}
}

1793 
	$vmeTsi148In°ÆlISR
(
ve˘‹
, 
VmeTsi148ISR
 
hdl
, *
¨g
)

1795 
IRQE¡ry
 
ù
;

1796 
v
;

1797 
Êags
;

1798 vﬁ©ûê
IRQE¡ry
 *
p
;

1800 i‡–!
vmeTsi148IrqMgrIn°ÆÀd
 || (
v
 = 
	`uni2tsivec
(
ve˘‹
)) < 0 )

1803 
p
 = 
úqHdlTbl
 + 
v
;

1805 i‡(*
p
 || !(
ù
=(
IRQE¡ry
)
	`mÆloc
((
IRQE¡ryRec
))))

1808 
ù
->
i§
=
hdl
;

1809 
ù
->
u§D©a
=
¨g
;

1811 
	`πems_öãºu±_dißbÀ
(
Êags
);

1812 i‡(*
p
) {

1813 
	`πems_öãºu±_íabÀ
(
Êags
);

1814 
	`‰ì
(
ù
);

1817 *
p
 = 
ù
;

1818 
	`πems_öãºu±_íabÀ
(
Êags
);

1820 
	}
}

1823 
	$vmeTsi148RemoveISR
(
ve˘‹
, 
VmeTsi148ISR
 
hdl
, *
¨g
)

1825 
v
;

1826 
IRQE¡ry
 
ù
;

1827 
Êags
;

1828 vﬁ©ûê
IRQE¡ry
 *
p
;

1830 i‡–!
vmeTsi148IrqMgrIn°ÆÀd
 || (
v
 = 
	`uni2tsivec
(
ve˘‹
)) < 0 )

1833 
p
 = 
úqHdlTbl
 + 
v
;

1835 
	`πems_öãºu±_dißbÀ
(
Êags
);

1836 
ù
 = *
p
;

1837 i‡–!
ù
 || ip->
i§
!=
hdl
 || ip->
u§D©a
!=
¨g
 ) {

1838 
	`πems_öãºu±_íabÀ
(
Êags
);

1841 *
p
 = 0;

1842 
	`πems_öãºu±_íabÀ
(
Êags
);

1844 
	`‰ì
(
ù
);

1846 
	}
}

1849 
	$ötDoEnDis
(
Àvñ
, 
dis
)

1851 
BERegi°î
 *
b
 = 
THEBASE
;

1852 
Êags
, 
v
;

1853 
shi·
;

1855 i‡–! 
vmeTsi148IrqMgrIn°ÆÀd
 || (
shi·
 = 
	`lvl2bôno
(
Àvñ
)) < 0 )

1858 
v
 = 1<<
shi·
;

1860 i‡–!
dis
 )

1861  ()(
v
 & 
	`TSI_RD
(
b
, 
TSI_INTEO_REG
Ë& TSI_RD(b, 
TSI_INTEN_REG
)) ? 1 : 0;

1863 
	`πems_öãºu±_dißbÀ
(
Êags
);

1864 i‡–
dis
<0 ) {

1865 
	`TSI_WR
(
b
, 
TSI_INTEN_REG
, 
	`TSI_RD
(b, TSI_INTEN_REGË& ~
v
);

1866 
	`TSI_WR
(
b
, 
TSI_INTEO_REG
, 
	`TSI_RD
(b, TSI_INTEO_REGË& ~
v
);

1868 
	`TSI_WR
(
b
, 
TSI_INTEN_REG
, 
	`TSI_RD
(b, TSI_INTEN_REGË| 
v
);

1869 
	`TSI_WR
(
b
, 
TSI_INTEO_REG
, 
	`TSI_RD
(b, TSI_INTEO_REGË| 
v
);

1871 
	`πems_öãºu±_íabÀ
(
Êags
);

1873 
	}
}

1876 
	$vmeTsi148I¡E«bÀ
(
Àvñ
)

1878  
	`ötDoEnDis
(
Àvñ
, 1);

1879 
	}
}

1882 
	$vmeTsi148I¡DißbÀ
(
Àvñ
)

1884  
	`ötDoEnDis
(
Àvñ
, -1);

1885 
	}
}

1888 
	$vmeTsi148I¡IsE«bÀd
(
Àvñ
)

1890  
	`ötDoEnDis
(
Àvñ
, 0);

1891 
	}
}

1902 
	$vmeTsi148SëIackWidth
(
Àvñ
, 
width
)

1904 
rvÆ
;

1905 i‡–
Àvñ
 < 1 ||Üevñ > 7 || !
vmeTsi148IrqMgrIn°ÆÀd
 )

1908  
width
 ) {

1917 
rvÆ
 = 
tsi_ück_width
[
Àvñ
-1];

1918 i‡–
width
 )

1919 
tsi_ück_width
[
Àvñ
-1] = 
width
;

1920  
rvÆ
;

1921 
	}
}

1924 
	$vmeTsi148I¡Rai£XX
(
BERegi°î
 *
ba£
, 
Àvñ
, 
ve˘‹
)

1926 
v
;

1928 
	`CHECK_BASE
(
ba£
,0,-1);

1930 i‡–
Àvñ
 < 1 ||Üevñ > 7 || 
ve˘‹
 > 255 )

1934 i‡–(
v
 = 
	`TSI_RD
(
ba£
, 
TSI_VICR_REG
)Ë& 
TSI_VICR_IRQS
 ) {

1938 
v
 &= ~255;

1940 
v
 |
	`TSI_VICR_IRQL
(
Àvñ
Ë| 
	`TSI_VICR_STID
(
ve˘‹
);

1943 
	`TSI_WR
(
ba£
, 
TSI_VICR_REG
, 
v
);

1947 
	}
}

1950 
	$vmeTsi148I¡Rai£
(
Àvñ
, 
ve˘‹
)

1952  
	`vmeTsi148I¡Rai£XX
(
THEBASE
, 
Àvñ
, 
ve˘‹
);

1953 
	}
}

1958 
πems_id
 
	mq
;

1959 
	ml
;

1960 } 
	tLo›backT°Args
;

1963 
	$lo›backT°I§
(*
¨g
, 
ve˘‹
)

1965 
Lo›backT°Args
 *
∑
 = 
¨g
;

1966 i‡–
RTEMS_SUCCESSFUL
 !
	`πems_mesßge_queue_£nd
(
∑
->
q
, (*)&
ve˘‹
, (vector)) ) {

1968 
	`¥ötk
("vmeTsi148I¡Lo›backT°: (ISRËmesßgêqueuêfuŒ / ovîru¿? dißblög IRQÜevñ %i\n", 
∑
->
l
);

1969 
	`vmeTsi148I¡DißbÀ
(
∑
->
l
);

1971 
	}
}

1974 
	$vmeTsi148I¡Lo›backT°
(
Àvñ
, 
ve˘‹
)

1976 
BERegi°î
 *
b
 = 
THEBASE
;

1977 
πems_°©us_code
 
sc
;

1978 
πems_id
 
q
 = 0;

1979 
ö°ÆÀd
 = 0;

1980 
i
, 
îr
 = 0;

1981 
doDißbÀ
 = 0;

1982 
size_t
 
size
;

1983 
msg
;

1984 * 
úqfmt
 = "VME IRQ @vector %3i %s";

1985 * 
ückfmt
 = "VME IACK %s";

1986 
Lo›backT°Args
 
a
;

1988 
	`CHECK_BASE
(
b
,0,-1);

1991 i‡–
Àvñ
 < 1 ||Üevñ > 7 || 
ve˘‹
 > 255 )

1995 i‡–
RTEMS_SUCCESSFUL
 !(
sc
=
	`πems_mesßge_queue_¸óã
(

1996 
	`πems_buûd_«me
('t' ,'U','I','I'),

2000 &
q
)) ) {

2001 
	`πems_îr‹
(
sc
, "vmeTsi148IntLoopbackTst: UnableÅo create message queue");

2002 
baû
;

2005 
a
.
q
 = q;

2006 
a
.
l
 = 
Àvñ
;

2009 i‡–
	`vmeTsi148In°ÆlISR
(
ve˘‹
, 
lo›backT°I§
, (*)&
a
) ) {

2010 
	`u¥ötf
(
°dîr
,"U«bÀÅÿö°Æ»VME ISRÅÿve˘‹ %i\n",
ve˘‹
);

2011 
baû
;

2013 
ö°ÆÀd
++;

2014 i‡–
	`vmeTsi148In°ÆlISR
(
TSI_VME_SW_IACK_INT_VEC
, 
lo›backT°I§
, (*)&
a
) ) {

2015 
	`u¥ötf
(
°dîr
,"U«bÀÅÿö°Æ»VME ISRÅÿIACK s≥cü»ve˘‹ %i\n",
TSI_VME_SW_IACK_INT_VEC
);

2016 
baû
;

2018 
ö°ÆÀd
++;

2020 i‡–!
	`vmeTsi148I¡IsE«bÀd
(
Àvñ
Ë&& 0==
	`vmeTsi148I¡E«bÀ
(level) )

2021 
doDißbÀ
 = 1;

2024 
	`TSI_WR
(
b
, 
TSI_INTC_REG
, 
TSI_INTC_IACKC
);

2026 i‡–
	`vmeTsi148I¡E«bÀ
–
TSI_VME_SW_IACK_INT_VEC
 ) ) {

2027 
	`u¥ötf
(
°dîr
,"UnableÅoÉnable IACK interrupt\n");

2028 
baû
;

2031 
	`¥ötf
("vmeTsi148 VME interruptÜoopbackÅest; STARTING...\n");

2032 
	`¥ötf
(" -->ás£πög VME IRQÜevñ %i\n", 
Àvñ
);

2033 
	`vmeTsi148I¡Rai£
(
Àvñ
, 
ve˘‹
);

2035  
i
 = 0; i< 3; i++ ) {

2036 
sc
 = 
	`πems_mesßge_queue_ª˚ive
(

2037 
q
,

2038 &
msg
,

2039 &
size
,

2040 
RTEMS_WAIT
,

2042 i‡–
sc
 ) {

2043 i‡–
RTEMS_TIMEOUT
 =
sc
 && 
i
>1 ) {

2045 
sc
 = 0;

2047 
	`πems_îr‹
(
sc
,"Error waiting for interrupts");

2051 i‡–
msg
 =
ve˘‹
 ) {

2052 i‡–!
úqfmt
 ) {

2053 
	`¥ötf
("Excess VME IRQÑeceived ?? -- BAD\n");

2054 
îr
 = 1;

2056 
	`¥ötf
(
úqfmt
, 
ve˘‹
, "received -- PASSED\n");

2057 
úqfmt
 = 0;

2059 } i‡–
msg
 =
TSI_VME_SW_IACK_INT_VEC
 ) {

2060 i‡–!
ückfmt
 ) {

2061 
	`¥ötf
("Excess VME IACKÑeceived ?? -- BAD\n");

2062 
îr
 = 1;

2064 
	`¥ötf
(
ückfmt
, "received -- PASSED\n");

2065 
ückfmt
 = 0;

2068 
	`¥ötf
("Unknow¿IRQ (ve˘‹ %luËª˚ived -- BAD\n", 
msg
);

2069 
îr
 = 1;

2075 i‡–
úqfmt
 ) {

2076 
	`¥ötf
(
úqfmt
,
ve˘‹
, "MISSED -- BAD\n");

2077 
îr
 = 1;

2079 i‡–
ückfmt
 ) {

2080 
	`¥ötf
(
ückfmt
, "MISSED -- BAD\n");

2081 
îr
 = 1;

2084 
	`¥ötf
("FINISHED.\n");

2086 
baû
:

2087 i‡–
doDißbÀ
 )

2088 
	`vmeTsi148I¡DißbÀ
(
Àvñ
);

2089 
	`vmeTsi148I¡DißbÀ
–
TSI_VME_SW_IACK_INT_VEC
 );

2090 i‡–
ö°ÆÀd
 > 0 )

2091 
	`vmeTsi148RemoveISR
(
ve˘‹
, 
lo›backT°I§
, (*)&
a
);

2092 i‡–
ö°ÆÀd
 > 1 )

2093 
	`vmeTsi148RemoveISR
(
TSI_VME_SW_IACK_INT_VEC
, 
lo›backT°I§
, (*)&
a
);

2094 i‡–
q
 )

2095 
	`πems_mesßge_queue_dñëe
(
q
);

2097  
sc
 ? s¯: 
îr
;

2098 
	}
}

2101 
	$vmeTsi148CÀ¨VMEBusEº‹sXX
(
BERegi°î
 *
ba£
, 
uöt32_t
 *
∑ddr
)

2103 
rvÆ
;

2105 
	`CHECK_BASE
(
ba£
,1,-1);

2107 
rvÆ
 = 
	`TSI_RD
(
ba£
, 
TSI_VEAT_REG
);

2108 i‡–
rvÆ
 & 
TSI_VEAT_VES
 ) {

2109 i‡–
∑ddr
 ) {

2111 *
∑ddr
 = (()
	`TSI_RD
(
ba£
, 
TSI_VEAU_REG
))<<32;

2112 *
∑ddr
 |
	`TSI_RD
(
ba£
, 
TSI_VEAL_REG
);

2114 *
∑ddr
 = 
	`TSI_RD
(
ba£
, 
TSI_VEAL_REG
);

2118 
	`TSI_WR
(
ba£
, 
TSI_VEAT_REG
, 
TSI_VEAT_VESCL
);

2120 
rvÆ
 = 0;

2122  
rvÆ
;

2123 
	}
}

2126 
	$vmeTsi148CÀ¨VMEBusEº‹s
(
uöt32_t
 *
∑ddr
)

2128  
	`vmeTsi148CÀ¨VMEBusEº‹sXX
(
THEBASE
, 
∑ddr
);

2129 
	}
}

2134 
	sVmeTsi148DmaLi°Des¸ùt‹Rec_
 {

2135 
BEVÆue
 
	mdßu
, 
	mdßl
;

2136 
BEVÆue
 
	mddau
, 
	mddÆ
;

2137 
BEVÆue
 
	mdßt
, 
	mdd©
;

2138 
BEVÆue
 
	md∆au
, 
	md∆Æ
;

2139 
BEVÆue
 
	md˙t
, 
	mddbs
;

2140 } 
	tVmeTsi148DmaLi°Des¸ùt‹Rec
;

2142 
tsi_desc_öô
 (
DmaDes¸ùt‹
);

2143 
tsi_desc_£tup
 (
DmaDes¸ùt‹
, 
uöt32_t
, uint32_t, uint32_t, uint32_t, uint32_t);

2144 
tsi_desc_£äxt
(
DmaDes¸ùt‹
, DmaDescriptor);

2145 
tsi_desc_dump
 (
DmaDes¸ùt‹
);

2146 
tsi_desc_°¨t
 (vﬁ©ûê*
c⁄åﬁÀr_addr
, 
ch™√l
, 
DmaDes¸ùt‹
 
p
);

2148 
VMEDmaLi°CœssRec
 
	gvmeTsi148DmaLi°Cœss
 = {

2149 
desc_size
: (
VmeTsi148DmaLi°Des¸ùt‹Rec
),

2150 
desc_Æign
: 8,

2151 
‰ìLi°
: 0,

2152 
desc_Æloc
: 0,

2153 
desc_‰ì
: 0,

2154 
desc_öô
: 
tsi_desc_öô
,

2155 
desc_£äxt
:
tsi_desc_£äxt
,

2156 
desc_£tup
: 
tsi_desc_£tup
,

2157 
desc_°¨t
: 
tsi_desc_°¨t
,

2158 
desc_ª‰
: 0,

2159 
desc_dump
: 
tsi_desc_dump
,

2163 
	#TSI_DMA_REG
(
off
,
i
Ë((off)+(((i)&1)<<7))

	)

2165 
	#TSI_DCTL_REG
(
i
Ë
	`TSI_DMA_REG
(0x500,i)

	)

2166 
	#TSI_DCTL0_REG
 0x500

	)

2167 
	#TSI_DCTL1_REG
 0x580

	)

2168 
	#TSI_DCTL_ABT
 (1<<27Ë

	)

2169 
	#TSI_DCTL_PAU
 (1<<26Ë

	)

2170 
	#TSI_DCTL_DGO
 (1<<25Ë

	)

2171 
	#TSI_DCTL_MOD
 (1<<23Ë

	)

2172 
	#TSI_DCTL_VFAR
 (1<<17Ë

	)

2173 
	#TSI_DCTL_PFAR
 (1<<16Ë

	)

2175 
	#TSI_DCTL_VBKS
(
i
Ë(((i)&7)<<12Ë

	)

2176 
	#TSI_DCTL_VBKS_32
 
	`TSI_DCTL_VBKS
(0)

	)

2177 
	#TSI_DCTL_VBKS_64
 
	`TSI_DCTL_VBKS
(1)

	)

2178 
	#TSI_DCTL_VBKS_128
 
	`TSI_DCTL_VBKS
(2)

	)

2179 
	#TSI_DCTL_VBKS_256
 
	`TSI_DCTL_VBKS
(3)

	)

2180 
	#TSI_DCTL_VBKS_512
 
	`TSI_DCTL_VBKS
(4)

	)

2181 
	#TSI_DCTL_VBKS_1024
 
	`TSI_DCTL_VBKS
(5)

	)

2182 
	#TSI_DCTL_VBKS_2048
 
	`TSI_DCTL_VBKS
(6)

	)

2183 
	#TSI_DCTL_VBKS_4096
 
	`TSI_DCTL_VBKS
(7)

	)

2185 
	#TSI_DCTL_VBOT
(
i
Ë(((i)&7)<< 8Ë

	)

2186 
	#TSI_DCTL_VBOT_0us
 
	`TSI_DCTL_VBOT
(0)

	)

2187 
	#TSI_DCTL_VBOT_1us
 
	`TSI_DCTL_VBOT
(1)

	)

2188 
	#TSI_DCTL_VBOT_2us
 
	`TSI_DCTL_VBOT
(2)

	)

2189 
	#TSI_DCTL_VBOT_4us
 
	`TSI_DCTL_VBOT
(3)

	)

2190 
	#TSI_DCTL_VBOT_8us
 
	`TSI_DCTL_VBOT
(4)

	)

2191 
	#TSI_DCTL_VBOT_16us
 
	`TSI_DCTL_VBOT
(5)

	)

2192 
	#TSI_DCTL_VBOT_32us
 
	`TSI_DCTL_VBOT
(6)

	)

2193 
	#TSI_DCTL_VBOT_64us
 
	`TSI_DCTL_VBOT
(7)

	)

2195 
	#TSI_DCTL_PBKS
(
i
Ë(((i)&7)<< 4Ë

	)

2196 
	#TSI_DCTL_PBKS_32
 
	`TSI_DCTL_PBKS
(0)

	)

2197 
	#TSI_DCTL_PBKS_64
 
	`TSI_DCTL_PBKS
(1)

	)

2198 
	#TSI_DCTL_PBKS_128
 
	`TSI_DCTL_PBKS
(2)

	)

2199 
	#TSI_DCTL_PBKS_256
 
	`TSI_DCTL_PBKS
(3)

	)

2200 
	#TSI_DCTL_PBKS_512
 
	`TSI_DCTL_PBKS
(4)

	)

2201 
	#TSI_DCTL_PBKS_1024
 
	`TSI_DCTL_PBKS
(5)

	)

2202 
	#TSI_DCTL_PBKS_2048
 
	`TSI_DCTL_PBKS
(6)

	)

2203 
	#TSI_DCTL_PBKS_4096
 
	`TSI_DCTL_PBKS
(7)

	)

2205 
	#TSI_DCTL_PBOT
(
i
Ë(((i)&7)<< 0Ë

	)

2206 
	#TSI_DCTL_PBOT_0us
 
	`TSI_DCTL_PBOT
(0)

	)

2207 
	#TSI_DCTL_PBOT_1us
 
	`TSI_DCTL_PBOT
(1)

	)

2208 
	#TSI_DCTL_PBOT_2us
 
	`TSI_DCTL_PBOT
(2)

	)

2209 
	#TSI_DCTL_PBOT_4us
 
	`TSI_DCTL_PBOT
(3)

	)

2210 
	#TSI_DCTL_PBOT_8us
 
	`TSI_DCTL_PBOT
(4)

	)

2211 
	#TSI_DCTL_PBOT_16us
 
	`TSI_DCTL_PBOT
(5)

	)

2212 
	#TSI_DCTL_PBOT_32us
 
	`TSI_DCTL_PBOT
(6)

	)

2213 
	#TSI_DCTL_PBOT_64us
 
	`TSI_DCTL_PBOT
(7)

	)

2216 
	#TSI_DSTA_REG
(
i
Ë
	`TSI_DMA_REG
(0x504,i)

	)

2217 
	#TSI_DSTA0_REG
 0x504

	)

2218 
	#TSI_DSTA1_REG
 0x584

	)

2219 
	#TSI_DSTA_ERR
 (1<<28)

	)

2220 
	#TSI_DSTA_ABT
 (1<<27)

	)

2221 
	#TSI_DSTA_PAU
 (1<<26)

	)

2222 
	#TSI_DSTA_DON
 (1<<25)

	)

2223 
	#TSI_DSTA_BSY
 (1<<24)

	)

2224 
	#TSI_DSTA_ERRS
 (1<<20Ë

	)

2225 
	#TSI_DSTA_ERT_MSK
 (3<<16Ë

	)

2226 
	#TSI_DSTA_ERT_BERR_E
 (0<<16Ë

	)

2227 
	#TSI_DSTA_ERT_BERR_O
 (1<<16Ë

	)

2228 
	#TSI_DSTA_ERT_SLVE_E
 (2<<16Ë

	)

2229 
	#TSI_DSTA_ERT_SLVE_O
 (3<<16Ë

	)

2232 
	#TSI_DCSAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x508,i)

	)

2233 
	#TSI_DCSAU0_REG
 0x508

	)

2234 
	#TSI_DCSAU1_REG
 0x588

	)

2237 
	#TSI_DCSAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x50c,i)

	)

2238 
	#TSI_DCSAL0_REG
 0x50c

	)

2239 
	#TSI_DCSAL1_REG
 0x58c

	)

2242 
	#TSI_DCDAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x510,i)

	)

2243 
	#TSI_DCDAU0_REG
 0x510

	)

2244 
	#TSI_DCDAU1_REG
 0x590

	)

2247 
	#TSI_DCDAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x514,i)

	)

2248 
	#TSI_DCDAL0_REG
 0x514

	)

2249 
	#TSI_DCDAL1_REG
 0x594

	)

2252 
	#TSI_DCLAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x518,i)

	)

2253 
	#TSI_DCLAU0_REG
 0x518

	)

2254 
	#TSI_DCLAU1_REG
 0x598

	)

2257 
	#TSI_DCLAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x51c,i)

	)

2258 
	#TSI_DCLAL0_REG
 0x51c

	)

2259 
	#TSI_DCLAL1_REG
 0x59c

	)

2262 
	#TSI_DSAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x520,i)

	)

2263 
	#TSI_DSAU0_REG
 0x520

	)

2264 
	#TSI_DSAU1_REG
 0x5a0

	)

2267 
	#TSI_DSAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x524,i)

	)

2268 
	#TSI_DSAL0_REG
 0x524

	)

2269 
	#TSI_DSAL1_REG
 0x5a4

	)

2272 
	#TSI_DDAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x528,i)

	)

2273 
	#TSI_DDAU0_REG
 0x528

	)

2274 
	#TSI_DDAU1_REG
 0x5a8

	)

2277 
	#TSI_DDAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x52c,i)

	)

2278 
	#TSI_DDAL0_REG
 0x52c

	)

2279 
	#TSI_DDAL1_REG
 0x5ac

	)

2282 
	#TSI_DSAT_REG
(
i
Ë
	`TSI_DMA_REG
(0x530,i)

	)

2283 
	#TSI_DSAT0_REG
 0x530

	)

2284 
	#TSI_DSAT1_REG
 0x5b0

	)

2287 
	#TSI_DDAT_REG
(
i
Ë
	`TSI_DMA_REG
(0x534,i)

	)

2288 
	#TSI_DDAT0_REG
 0x534

	)

2289 
	#TSI_DDAT1_REG
 0x5b4

	)

2291 
	#TSI_DXAT_TYP
(
i
Ë(((i)&3)<<28Ë

	)

2292 
	#TSI_DXAT_TYP_PCI
 
	`TSI_DXAT_TYP
(0)

	)

2293 
	#TSI_DXAT_TYP_VME
 
	`TSI_DXAT_TYP
(1)

	)

2294 
	#TSI_DSAT_TYP_PAT
 
	`TSI_DXAT_TYP
(2Ë

	)

2296 
	#TSI_DSAT_PSZ
 (1<<25Ë

	)

2297 
	#TSI_DSAT_NIN
 (1<<24Ë

	)

2299 
	#TSI_DXAT_OTAT_MSK
 ((1<<13)-1Ë

	)

2301 
	#TSI_DXAT_SSTM
(
i
Ë(((i)&3)<<11Ë

	)

2302 
	#TSI_DXAT_SSTM_116
 
	`TSI_DXAT_SSTM
(0)

	)

2303 
	#TSI_DXAT_SSTM_267
 
	`TSI_DXAT_SSTM
(1)

	)

2304 
	#TSI_DXAT_SSTM_320
 
	`TSI_DXAT_SSTM
(2)

	)

2306 
	#TSI_DXAT_TM
(
i
Ë(((i)&7)<< 8Ë

	)

2307 
	#TSI_DXAT_TM_SCT
 
	`TSI_DXAT_TM
(0)

	)

2308 
	#TSI_DXAT_TM_BLT
 
	`TSI_DXAT_TM
(1)

	)

2309 
	#TSI_DXAT_TM_MBLT
 
	`TSI_DXAT_TM
(2)

	)

2310 
	#TSI_DXAT_TM_2eVME
 
	`TSI_DXAT_TM
(3)

	)

2311 
	#TSI_DXAT_TM_2eSST
 
	`TSI_DXAT_TM
(4)

	)

2312 
	#TSI_DSAT_TM_2eSST_B
 
	`TSI_DXAT_TM
(5Ë

	)

2314 
	#TSI_DXAT_DBW
(
i
Ë(((i)&3)<< 6Ë

	)

2315 
	#TSI_DXAT_DBW_16
 
	`TSI_DXAT_DBW
(0)

	)

2316 
	#TSI_DXAT_DBW_32
 
	`TSI_DXAT_DBW
(1)

	)

2318 
	#TSI_DXAT_SUP
 (1<<5Ë

	)

2319 
	#TSI_DXAT_PGM
 (1<<4Ë

	)

2321 
	#TSI_DXAT_AM
(
i
Ë(((i)&15)<<0Ë

	)

2322 
	#TSI_DXAT_AM_A16
 
	`TSI_DXAT_AM
(0)

	)

2323 
	#TSI_DXAT_AM_A24
 
	`TSI_DXAT_AM
(1)

	)

2324 
	#TSI_DXAT_AM_A32
 
	`TSI_DXAT_AM
(2)

	)

2325 
	#TSI_DXAT_AM_A64
 
	`TSI_DXAT_AM
(4)

	)

2326 
	#TSI_DXAT_AM_CSR
 
	`TSI_DXAT_AM
(5)

	)

2329 
	#TSI_DNLAU_REG
(
i
Ë
	`TSI_DMA_REG
(0x538,i)

	)

2330 
	#TSI_DNLAU0_REG
 0x538

	)

2331 
	#TSI_DNLAU1_REG
 0x5b8

	)

2334 
	#TSI_DNLAL_REG
(
i
Ë
	`TSI_DMA_REG
(0x53c,i)

	)

2335 
	#TSI_DNLAL0_REG
 0x53c

	)

2336 
	#TSI_DNLAL1_REG
 0x5bc

	)

2338 
	#TSI_DNLAL_LLA
 1

	)

2341 
	#TSI_DCNT_REG
(
i
Ë
	`TSI_DMA_REG
(0x540,i)

	)

2342 
	#TSI_DCNT0_REG
 0x540

	)

2343 
	#TSI_DCNT1_REG
 0x54c

	)

2346 
	#TSI_DDBS_REG
(
i
Ë
	`TSI_DMA_REG
(0x544,i)

	)

2347 
	#TSI_DDBS0_REG
 0x544

	)

2348 
	#TSI_DDBS1_REG
 0x5c4

	)

2351 
uöt32_t


2352 
	$vme_©å
(
uöt32_t
 
x„r_mode
)

2354 
uöt32_t
 
vme_mode
;

2355 i‡–
	`am2omode
(
x„r_mode
, &
vme_mode
) )

2356  
BSP_VMEDMA_STATUS_UNSUP
;

2359 
vme_mode
 &
TSI_DXAT_OTAT_MSK
;

2360 
vme_mode
 |
TSI_DXAT_TYP_VME
;

2362 i‡–
BSP_VMEDMA_MODE_NOINC_VME
 & 
x„r_mode
 ) {

2364 i‡–(
BSP_VMEDMA_MODE_PCI2VME
 & 
x„r_mode
) )

2365  
BSP_VMEDMA_STATUS_UNSUP
;

2366 
vme_mode
 |
TSI_DSAT_NIN
;

2369  
vme_mode
;

2370 
	}
}

2372 
uöt32_t


2373 
	$pci_©å
(
uöt32_t
 
x„r_mode
)

2375 
uöt32_t
 
pci_mode
 = 0;

2376 i‡–
BSP_VMEDMA_MODE_NOINC_PCI
 & 
x„r_mode
 ) {

2378 i‡–! (
BSP_VMEDMA_MODE_PCI2VME
 & 
x„r_mode
) )

2379  
BSP_VMEDMA_STATUS_UNSUP
;

2380 
pci_mode
 |
TSI_DSAT_NIN
;

2382  
pci_mode
;

2383 
	}
}

2385 
	$tsi_desc_öô
(
DmaDes¸ùt‹
 
p
)

2387 
VmeTsi148DmaLi°Des¸ùt‹
 
d
 = 
p
;

2388 
	`°_be32
–&
d
->
d∆au
, 0 );

2389 
	`°_be32
–&
d
->
d∆Æ
, 
TSI_DNLAL_LLA
 );

2390 
	`°_be32
–&
d
->
ddbs
, (1<<22)-1 );

2391 
	}
}

2394 
	$tsi_desc_£äxt
(
DmaDes¸ùt‹
 
p
, DmaDes¸ùt‹ 
n
)

2396 
VmeTsi148DmaLi°Des¸ùt‹
 
d
 = 
p
;

2397 i‡–0 =
n
 ) {

2398 
	`°_be32
–&
d
->
d∆Æ
, 
TSI_DNLAL_LLA
 );

2400 
	`°_be32
–&
d
->
d∆Æ
, 
	`BSP_LOCAL2PCI_ADDR
((
uöt32_t
)
n
) );

2402 
	}
}

2405 
	$tsi_desc_dump
(
DmaDes¸ùt‹
 
p
)

2407 
VmeTsi148DmaLi°Des¸ùt‹
 
d
 = 
p
;

2408 
	`¥ötf
(" DSA: 0x%08lx%08lx\n", 
	`ld_be32
(&
d
->
dßu
),Üd_be32(&d->
dßl
));

2409 
	`¥ötf
(" DDA: 0x%08lx%08lx\n", 
	`ld_be32
(&
d
->
ddau
),Üd_be32(&d->
ddÆ
));

2410 
	`¥ötf
(" NLA: 0x%08lx%08lx\n", 
	`ld_be32
(&
d
->
d∆au
),Üd_be32(&d->
d∆Æ
));

2411 
	`¥ötf
(" SAT: 0x%08lx DAT: 0x%08lx\n", 
	`ld_be32
(&
d
->
dßt
),Üd_be32(&d->
dd©
));

2412 
	`¥ötf
(" CNT: 0x%08lx\n", 
	`ld_be32
(&
d
->
d˙t
));

2413 
	}
}

2417 
	$vmeTsi148DmaSëupXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
)

2419 
uöt32_t
 
˘l
 = 0;

2420 
uöt32_t
 
vmóâ
, 
pcüâ
, 
ßt
, 
d©
;

2422 i‡–
ch™√l
 < 0 || channel > 1 )

2423  
BSP_VMEDMA_STATUS_UNSUP
;

2426 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =(
vmóâ
 = 
	`vme_©å
(
x„r_mode
)) )

2430 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =(
pcüâ
 = 
	`pci_©å
(
x„r_mode
)) )

2434 
˘l
 |
TSI_DCTL_PBKS_32
;

2435 
˘l
 |(
BSP_VMEDMA_OPT_THROUGHPUT
 =
mode
 ? 
TSI_DCTL_PBOT_0us
 : 
TSI_DCTL_PBOT_1us
);

2437  
mode
 ) {

2438 
BSP_VMEDMA_OPT_THROUGHPUT
:

2439 
˘l
 |
TSI_DCTL_VBKS_1024
;

2440 
˘l
 |
TSI_DCTL_VBOT_0us
;

2443 
BSP_VMEDMA_OPT_LOWLATENCY
:

2444 
˘l
 |
TSI_DCTL_VBKS_32
;

2445 
˘l
 |
TSI_DCTL_VBOT_0us
;

2448 
BSP_VMEDMA_OPT_SHAREDBUS
:

2449 
˘l
 |
TSI_DCTL_VBKS_128
;

2450 
˘l
 |
TSI_DCTL_VBOT_64us
;

2453 
BSP_VMEDMA_OPT_CUSTOM
:

2454 
˘l
 = *(
uöt32_t
*)
cu°om
;

2458 
BSP_VMEDMA_OPT_DEFAULT
:

2459 
˘l
 = 0;

2462 
	`TSI_WR
(
ba£
, 
	`TSI_DCTL_REG
(
ch™√l
), 
˘l
);

2463 i‡–
BSP_VMEDMA_MODE_PCI2VME
 & 
x„r_mode
 ) {

2464 
d©
 = 
vmóâ
; 
ßt
 = 
pcüâ
;

2466 
ßt
 = 
vmóâ
; 
d©
 = 
pcüâ
;

2468 
	`TSI_WR
(
ba£
, 
	`TSI_DSAT_REG
(
ch™√l
), 
ßt
);

2469 
	`TSI_WR
(
ba£
, 
	`TSI_DDAT_REG
(
ch™√l
), 
d©
);

2471 
	}
}

2474 
	$vmeTsi148DmaSëup
(
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
)

2476 
BERegi°î
 *
ba£
 = 
THEBASE
;

2477  
	`vmeTsi148DmaSëupXX
(
ba£
, 
ch™√l
, 
mode
, 
x„r_mode
, 
cu°om
);

2478 
	}
}

2482 
	$vmeTsi148DmaLi°SèπXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
VmeTsi148DmaLi°Des¸ùt‹
 
d
)

2484 
uöt32_t
 
˘l
;

2486 i‡–
d
 ) {

2488 i‡–
ch™√l
 < 0 || channel > 1 )

2489  
BSP_VMEDMA_STATUS_UNSUP
;

2491 i‡–
TSI_DSTA_BSY
 & 
	`TSI_RD
(
ba£
, 
	`TSI_DSTA_REG
(
ch™√l
)) )

2492  
BSP_VMEDMA_STATUS_BUSY
;

2494 
	`TSI_WR
(
ba£
, 
	`TSI_DNLAL_REG
(
ch™√l
), (
uöt32_t
)
	`BSP_LOCAL2PCI_ADDR
(
d
));

2496 
asm
 volatile("":::"memory");

2499 
˘l
 = 
	`TSI_RD
(
ba£
, 
	`TSI_DCTL_REG
(
ch™√l
)Ë| 
TSI_DCTL_DGO
;

2500 
˘l
 &~
TSI_DCTL_MOD
;

2501 
	`TSI_WR
(
ba£
, 
	`TSI_DCTL_REG
(
ch™√l
), 
˘l
);

2505 
	}
}

2508 
	$vmeTsi148DmaLi°Sèπ
(
ch™√l
, 
VmeTsi148DmaLi°Des¸ùt‹
 
d
)

2510 
BERegi°î
 *
ba£
 = 
THEBASE
;

2511  
	`vmeTsi148DmaLi°SèπXX
(
ba£
, 
ch™√l
, 
d
);

2512 
	}
}

2515 
	$vmeTsi148DmaSèπXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
)

2517 
uöt32_t
 
§c
, 
d°
, 
˘l
;

2519 i‡–
ch™√l
 < 0 || channel > 1 )

2520  
BSP_VMEDMA_STATUS_UNSUP
;

2522 i‡–
TSI_DSTA_BSY
 & 
	`TSI_RD
(
ba£
, 
	`TSI_DSTA_REG
(
ch™√l
)) )

2523  
BSP_VMEDMA_STATUS_BUSY
;

2526 i‡–
TSI_DXAT_TYP_VME
 & 
	`TSI_RD
(
ba£
, 
	`TSI_DDAT_REG
(
ch™√l
)) ) {

2527 
d°
 = 
vme_addr
;

2528 
§c
 = 
pci_addr
;

2530 
§c
 = 
vme_addr
;

2531 
d°
 = 
pci_addr
;

2536 
	`TSI_WR
(
ba£
, 
	`TSI_DSAL_REG
(
ch™√l
), 
§c
);

2537 
	`TSI_WR
(
ba£
, 
	`TSI_DDAL_REG
(
ch™√l
), 
d°
);

2538 
	`TSI_WR
(
ba£
, 
	`TSI_DCNT_REG
(
ch™√l
), 
n_byãs
);

2540 
asm
 volatile("":::"memory");

2543 
˘l
 = 
	`TSI_RD
(
ba£
, 
	`TSI_DCTL_REG
(
ch™√l
)Ë| 
TSI_DCTL_DGO
 | 
TSI_DCTL_MOD
;

2544 
	`TSI_WR
(
ba£
, 
	`TSI_DCTL_REG
(
ch™√l
), 
˘l
);

2547 
	}
}

2550 
	$vmeTsi148DmaSèπ
(
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
)

2552 
BERegi°î
 *
ba£
 = 
THEBASE
;

2553  
	`vmeTsi148DmaSèπXX
(
ba£
, 
ch™√l
, 
pci_addr
, 
vme_addr
, 
n_byãs
);

2554 
	}
}

2556 
uöt32_t


2557 
	$vmeTsi148DmaSètusXX
(
BERegi°î
 *
ba£
, 
ch™√l
)

2559 
uöt32_t
 
°
 = 
	`TSI_RD
(
ba£
, 
	`TSI_DSTA_REG
(
ch™√l
));

2561 i‡–
ch™√l
 < 0 || channel > 1 )

2562  
BSP_VMEDMA_STATUS_UNSUP
;

2564 
°
 = 
	`TSI_RD
(
ba£
, 
	`TSI_DSTA_REG
(
ch™√l
));

2567 i‡–(
TSI_DSTA_DON
 & 
°
) || 0 == st )

2568  
BSP_VMEDMA_STATUS_OK
;

2570 i‡–
TSI_DSTA_BSY
 & 
°
 )

2571  
BSP_VMEDMA_STATUS_BUSY
;

2573 i‡–
TSI_DSTA_ERR
 & 
°
 ) {

2574 i‡–
TSI_DSTA_ERRS
 & 
°
 )

2575  
BSP_VMEDMA_STATUS_BERR_PCI
;

2576 i‡–! (
TSI_DSTA_ERT_SLVE_E
 & 
°
) )

2577  
BSP_VMEDMA_STATUS_BERR_VME
;

2580  
BSP_VMEDMA_STATUS_OERR
;

2581 
	}
}

2583 
uöt32_t


2584 
	$vmeTsi148DmaSètus
(
ch™√l
)

2586 
BERegi°î
 *
ba£
 = 
THEBASE
;

2587  
	`vmeTsi148DmaSètusXX
(
ba£
, 
ch™√l
);

2588 
	}
}

2590 
	#ALL_BITS_NEEDED
 (
BSP_VMEDMA_MSK_ATTR
 | 
BSP_VMEDMA_MSK_PCIA
 | 
BSP_VMEDMA_MSK_VMEA
)

	)

2593 
	$tsi_desc_£tup
 (

2594 
DmaDes¸ùt‹
 
p
,

2595 
uöt32_t
 
©å_mask
,

2596 
uöt32_t
 
x„r_mode
,

2597 
uöt32_t
 
pci_addr
,

2598 
uöt32_t
 
vme_addr
,

2599 
uöt32_t
 
n_byãs
)

2601 
VmeTsi148DmaLi°Des¸ùt‹
 
d
 = 
p
;

2602 
uöt32_t
 
vmóâ
 = 0, 
pcüâ
 = 0, 
tmp
, 
§c
, 
d°
, 
d©
, 
ßt
;

2611 
tmp
 = 
©å_mask
 & 
ALL_BITS_NEEDED
;

2612 i‡–
tmp
 !0 &&Åm∞!
ALL_BITS_NEEDED
 )

2615 i‡–
BSP_VMEDMA_MSK_ATTR
 & 
©å_mask
 ) {

2617 
vmóâ
 = 
	`vme_©å
(
x„r_mode
);

2618 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =
vmóâ
 )

2622 
pcüâ
 = 
	`pci_©å
(
x„r_mode
);

2623 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =
pcüâ
 )

2627 i‡–
BSP_VMEDMA_MSK_ATTR
 & 
©å_mask
 ) {

2628 i‡–
BSP_VMEDMA_MODE_PCI2VME
 & 
x„r_mode
 ) {

2629 
d©
 = 
vmóâ
; 
ßt
 = 
pcüâ
;

2630 
d°
 = 
vme_addr
; 
§c
 = 
pci_addr
;

2632 
ßt
 = 
vmóâ
; 
d©
 = 
pcüâ
;

2633 
§c
 = 
vme_addr
; 
d°
 = 
pci_addr
;

2635 
	`°_be32
–&
d
->
dßu
, 0 ); st_be32–&d->
dßl
, 
§c
 );

2636 
	`°_be32
–&
d
->
ddau
, 0 ); st_be32–&d->
ddÆ
, 
d°
 );

2637 
	`°_be32
–&
d
->
dßt
, 
ßt
 ); st_be32–&d->
dd©
, 
d©
 );

2640 i‡–
BSP_VMEDMA_MSK_BCNT
 & 
©å_mask
 )

2641 
	`°_be32
–&
d
->
d˙t
, 
n_byãs
);

2644 
	}
}

2647 
	$tsi_desc_°¨t
 (vﬁ©ûê*
c⁄åﬁÀr_addr
, 
ch™√l
, 
DmaDes¸ùt‹
 
p
)

2649 
VmeTsi148DmaLi°Des¸ùt‹
 
d
 = 
p
;

2650 i‡–!
c⁄åﬁÀr_addr
 )

2651 
c⁄åﬁÀr_addr
 = 
THEBASE
;

2652  
	`vmeTsi148DmaLi°SèπXX
((
BERegi°î
*)
c⁄åﬁÀr_addr
, 
ch™√l
, 
d
);

2653 
	}
}

2655 #ifde‡
DEBUG_MODULAR


2657 
	$_˚xpModuÀInôülize
(* 
unu£d
)

2659 
	`vmeTsi148Inô
();

2660 
	`vmeTsi148Re£t
();

2661 
	}
}

2664 
	$_˚xpModuÀFöÆize
(*
unu£d
)

2666 
i
;

2667 
rvÆ
 = 1;

2668 (*
i§s
[
TSI_NUM_WIRES
])() = {

2669 
i§_pö0
,

2670 
i§_pö1
,

2671 
i§_pö2
,

2672 
i§_pö3
,

2675 
πems_úq_c⁄√˘_d©a
 
xx
;

2676 
xx
.
⁄
 = 
my_no_›
;

2677 
xx
.
off
 = 
my_no_›
;

2678 
xx
.
isOn
 = 
my_isOn
;

2680 
	`TSI_WR
(
THEBASE
, 
TSI_INTEO_REG
, 0);

2682  
i
=0; i<
TSI_NUM_INT_VECS
; i++) {

2685 i‡–
vmeTsi148IrqMgrIn°ÆÀd
 ) {

2686  
i
=0; i<
TSI_NUM_WIRES
; i++ ) {

2687 i‡–()(
xx
.
«me
 = 
devs
[0].
pic_pö
[
i
]) >=0 ) {

2688 
xx
.
hdl
 = 
i§s
[
i
];

2689 
rvÆ
 =ÑvÆ && 
	`BSP_ªmove_πems_úq_h™dÀr
(&
xx
);

2693  !
rvÆ
;

2694 
	}
}

	@src/lib/libbsp/shared/vmeUniverse/vmeTsi148.h

9 #i‚de‡
VME_TSI148_DRIVER_H


10 
	#VME_TSI148_DRIVER_H


	)

57 
	~<°döt.h
>

58 
	~<b•/vme_am_defs.h
>

75 
	#VME_MODE_PREFETCH_ENABLE
 
VME_AM_IS_MEMORY


	)

76 
	#_LD_VME_MODE_PREFETCHSZ
 24

	)

77 
	#VME_MODE_PREFETCH_SIZE
(
x
Ë(((x)&3)<<
_LD_VME_MODE_PREFETCHSZ
)

	)

83 
	#VME_MODE_MATCH_MASK
 (3<<30)

	)

84 
	#VME_MODE_EXACT_MATCH
 (2<<30Ë

	)

85 
	#VME_MODE_AS_MATCH
 (1<<30Ë

	)

87 #ifde‡
__˝lu•lus


91 vﬁ©ûê
	tuöt32_t
 
	tBERegi°î
;

105 
vmeTsi148FödPciBa£
(
ö°™˚
, 
BERegi°î
 **
pba£
);

116 
vmeTsi148InôIn°™˚
(
ö°™˚
);

122 
vmeTsi148Inô
();

128 
vmeTsi148Re£tXX
(
BERegi°î
 *
ba£
);

132 
vmeTsi148Re£t
();

136 
vmeTsi148Re£tBusXX
(
BERegi°î
 *
ba£
);

140 
vmeTsi148Re£tBus
();

169 
vmeTsi148OutboundP‹tCfgXX
(

170 
BERegi°î
 *
ba£
,

171 
p‹t
,

172 
addªss_•a˚
,

173 
vme_addªss
,

174 
pci_addªss
,

175 
Àngth
);

178 
vmeTsi148OutboundP‹tCfg
(

179 
p‹t
,

180 
addªss_•a˚
,

181 
vme_addªss
,

182 
pci_addªss
,

183 
Àngth
);

188 
vmeTsi148InboundP‹tCfgXX
(

189 
BERegi°î
 *
ba£
,

190 
p‹t
,

191 
addªss_•a˚
,

192 
vme_addªss
,

193 
pci_addªss
,

194 
Àngth
);

197 
vmeTsi148InboundP‹tCfg
(

198 
p‹t
,

199 
addªss_•a˚
,

200 
vme_addªss
,

201 
pci_addªss
,

202 
Àngth
);

233 
vmeTsi148XœãAddrXX
(

234 
BERegi°î
 *
ba£
,

235 
outbound
,

236 
ªvî£
,

237 
as
,

238 
aIn
,

239 *
∑Out


243 
vmeTsi148XœãAddr
(

244 
outbound
,

245 
ªvî£
,

246 
as
,

247 
aIn
,

248 *
∑Out


259 #ifde‡
_VME_TSI148_DECLARE_SHOW_ROUTINES


266 
vmeTsi148OutboundP‹tsShowXX
(
BERegi°î
 *
ba£
, 
FILE
 *
f
);

269 
vmeTsi148OutboundP‹tsShow
(
FILE
 *
f
);

276 
vmeTsi148InboundP‹tsShowXX
(
BERegi°î
 *
ba£
, 
FILE
 *
f
);

279 
vmeTsi148InboundP‹tsShow
(
FILE
 *
f
);

286 
vmeTsi148DißbÀAŒInboundP‹tsXX
(
BERegi°î
 *
ba£
);

289 
vmeTsi148DißbÀAŒInboundP‹ts
();

292 
vmeTsi148DißbÀAŒOutboundP‹tsXX
(
BERegi°î
 *
ba£
);

295 
vmeTsi148DißbÀAŒOutboundP‹ts
();

297 
	#TSI_VEAT_VES
 (1<<31)

	)

298 
	#TSI_VEAT_VEOF
 (1<<30)

	)

299 
	#TSI_VEAT_VESCL
 (1<<29)

	)

300 
	#TSI_VEAT_2eOT
 (1<<21)

	)

301 
	#TSI_VEAT_2eST
 (1<<20)

	)

302 
	#TSI_VEAT_BERR
 (1<<19)

	)

303 
	#TSI_VEAT_LWORD
 (1<<18)

	)

304 
	#TSI_VEAT_WRITE
 (1<<17)

	)

305 
	#TSI_VEAT_IACK
 (1<<16)

	)

306 
	#TSI_VEAT_DS1
 (1<<15)

	)

307 
	#TSI_VEAT_DS0
 (1<<14)

	)

308 
	#TSI_VEAT_AM
(
v
Ë(((v)>>8)&63)

	)

309 
	#TSI_VEAT_XAM
(
v
Ë((v)&255)

	)

328 
vmeTsi148CÀ¨VMEBusEº‹sXX
(
BERegi°î
 *
ba£
, 
uöt32_t
 *
∑ddr
);

331 
vmeTsi148CÀ¨VMEBusEº‹s
(
uöt32_t
 *
∑ddr
);

352 
vmeTsi148M≠CRGXX
(
BERegi°î
 *
ba£
, 
uöt32_t
 
vme_ba£
, uöt32_à
addªss_•a˚
);

355 
vmeTsi148M≠CRG
(
uöt32_t
 
vme_ba£
, uöt32_à
addªss_•a˚
);

378 (*
VmeTsi148ISR
Ë(*
	tu§Arg
, 
	tve˘‹
);

384 
vmeTsi148In°ÆlISR
(
ve˘‹
, 
VmeTsi148ISR
 
h™dÀr
, *
u§Arg
);

391 
vmeTsi148RemoveISR
(
ve˘‹
, 
VmeTsi148ISR
 
h™dÀr
, *
u§Arg
);

396 
VmeTsi148ISR


397 
vmeTsi148ISRGë
(
ve˘‹
, **
∑rg
);

407 
vmeTsi148I¡E«bÀ
(
Àvñ
);

410 
vmeTsi148I¡DißbÀ
(
Àvñ
);

422 
vmeTsi148I¡IsE«bÀd
(
Àvñ
);

433 
vmeTsi148SëIackWidth
(
Àvñ
, 
width
);

471 
vmeTsi148I¡Rouã
(
Àvñ
, 
pö
);

502 
vmeTsi148I¡Rai£XX
(
BERegi°î
 *
ba£
, 
Àvñ
, 
ve˘‹
);

505 
vmeTsi148I¡Rai£
(
Àvñ
, 
ve˘‹
);

531 
vmeTsi148I¡Lo›backT°
(
Àvñ
, 
ve˘‹
);

549 
	#TSI_DMA_INT_VEC
 257

	)

550 
	#TSI_LERR_INT_VEC
 258

	)

551 
	#TSI_VERR_INT_VEC
 259

	)

553 
	#TSI_VME_SW_IACK_INT_VEC
 261

	)

555 
	#TSI_SYSFAIL_INT_VEC
 263

	)

556 
	#TSI_ACFAIL_INT_VEC
 264

	)

557 
	#TSI_MBOX0_INT_VEC
 265

	)

558 
	#TSI_MBOX1_INT_VEC
 266

	)

559 
	#TSI_MBOX2_INT_VEC
 267

	)

560 
	#TSI_MBOX3_INT_VEC
 268

	)

561 
	#TSI_LM0_INT_VEC
 269

	)

562 
	#TSI_LM1_INT_VEC
 270

	)

563 
	#TSI_LM2_INT_VEC
 271

	)

564 
	#TSI_LM3_INT_VEC
 272

	)

567 
	#TSI_VIES_INT_VEC
 273

	)

568 
	#TSI_DMA1_INT_VEC
 274

	)

570 
	#TSI_NUM_INT_VECS
 275

	)

572 #ifde‡
__INSIDE_RTEMS_BSP__


574 
	~<°d¨g.h
>

650 
	#VMETSI148_IRQ_MGR_FLAG_SHARED
 1

	)

652 
vmeTsi148In°ÆlIrqMgrA…
(
sh¨ed
, 
tsi_pö0
, 
pic_pö0
, ...);

655 
vmeTsi148In°ÆlIrqMgrVa
(
sh¨ed
, 
tsi_pö0
, 
pic_pö0
, 
va_li°
 
≠
);

658 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/vmeTsi148DMA.h

9 #i‚de‡
VME_TSI148_DMA_H


10 
	#VME_TSI148_DMA_H


	)

12 
	~<b•/vmeTsi148.h
>

58 #ifde‡
__˝lu•lus


70 
VMEDmaLi°CœssRec_
 
vmeTsi148DmaLi°Cœss
;

72 
VmeTsi148DmaLi°Des¸ùt‹Rec_
 *
	tVmeTsi148DmaLi°Des¸ùt‹
;

75 
vmeTsi148DmaSëupXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
);

78 
vmeTsi148DmaSëup
(
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
);

81 
vmeTsi148DmaLi°SèπXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
VmeTsi148DmaLi°Des¸ùt‹
 
d
);

84 
vmeTsi148DmaLi°Sèπ
(
ch™√l
, 
VmeTsi148DmaLi°Des¸ùt‹
 
d
);

87 
vmeTsi148DmaSèπXX
(
BERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
);

90 
vmeTsi148DmaSèπ
(
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
);

92 
uöt32_t


93 
vmeTsi148DmaSètusXX
(
BERegi°î
 *
ba£
, 
ch™√l
);

95 
uöt32_t


96 
vmeTsi148DmaSètus
(
ch™√l
);

98 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/vmeUniverse.c

48 
	~<°dio.h
>

49 
	~<öây≥s.h
>

51 #i‡
deföed
(
__πems__
)

52 #i‚de‡
__INSIDE_RTEMS_BSP__


53 
	#__INSIDE_RTEMS_BSP__


	)

57 
	~"vmeUnivî£.h
"

58 
	~"vmeUnivî£DMA.h
"

60 
	#UNIV_NUM_MPORTS
 8

	)

61 
	#UNIV_NUM_SPORTS
 8

	)

63 
	#PCI_VENDOR_TUNDRA
 0x10e3

	)

64 
	#PCI_DEVICE_UNIVERSEII
 0

	)

65 
	#PCI_UNIVERSE_BASE0
 0x10

	)

66 
	#PCI_UNIVERSE_BASE1
 0x14

	)

68 
	#UNIV_REGOFF_PCITGT0_CTRL
 0x100

	)

69 
	#UNIV_REGOFF_PCITGT4_CTRL
 0x1a0

	)

70 
	#UNIV_REGOFF_VMESLV0_CTRL
 0xf00

	)

71 
	#UNIV_REGOFF_VMESLV4_CTRL
 0xf90

	)

73 
	#UNIV_CTL_VAS16
 (0x00000000)

	)

74 
	#UNIV_CTL_VAS24
 (0x00010000)

	)

75 
	#UNIV_CTL_VAS32
 (0x00020000)

	)

76 
	#UNIV_MCTL_VASCSR
 (0x00050000)

	)

77 
	#UNIV_CTL_VAS
 (0x00070000)

	)

79 
	#UNIV_MCTL_EN
 (0x80000000)

	)

80 
	#UNIV_MCTL_PWEN
 (0x40000000)

	)

81 
	#UNIV_MCTL_PGM
 (0x00004000)

	)

82 
	#UNIV_MCTL_VCT
 (0x00000100)

	)

83 
	#UNIV_MCTL_SUPER
 (0x00001000)

	)

84 
	#UNIV_MCTL_VDW16
 (0x00400000)

	)

85 
	#UNIV_MCTL_VDW32
 (0x00800000)

	)

86 
	#UNIV_MCTL_VDW64
 (0x00c00000)

	)

88 
	#UNIV_MCTL_AM_MASK
 (
UNIV_CTL_VAS
 | 
UNIV_MCTL_PGM
 | 
UNIV_MCTL_SUPER
)

	)

90 
	#UNIV_SCTL_EN
 (0x80000000)

	)

91 
	#UNIV_SCTL_PWEN
 (0x40000000)

	)

92 
	#UNIV_SCTL_PREN
 (0x20000000)

	)

93 
	#UNIV_SCTL_PGM
 (0x00800000)

	)

94 
	#UNIV_SCTL_DAT
 (0x00400000)

	)

95 
	#UNIV_SCTL_SUPER
 (0x00200000)

	)

96 
	#UNIV_SCTL_USER
 (0x00100000)

	)

98 
	#UNIV_SCTL_AM_MASK
 (
UNIV_CTL_VAS
 | 
UNIV_SCTL_PGM
 | 
UNIV_SCTL_DAT
 | 
UNIV_SCTL_USER
 | 
UNIV_SCTL_SUPER
)

	)

100 #ifde‡
__πems__


102 
	~<°dlib.h
>

103 
	~<πems/b•Io.h
>

104 
	~<πems/îr‹.h
>

105 
	~<πems/pci.h
>

106 
	~<b•.h
>

107 
	~<lib˝u/byã‹dî.h
>

110 #i‚de‡
BSP_PCI_FIND_DEVICE


111 
	#BSP_PCI_FIND_DEVICE
 
pci_föd_devi˚


	)

113 #i‚de‡
BSP_PCI_CONFIG_IN_LONG


114 
	#BSP_PCI_CONFIG_IN_LONG
 
pci_ªad_c⁄fig_dw‹d


	)

116 #i‚de‡
BSP_PCI_CONFIG_IN_BYTE


117 
	#BSP_PCI_CONFIG_IN_BYTE
 
pci_ªad_c⁄fig_byã


	)

119 #i‚de‡
BSP_PCI_CONFIG_IN_SHORT


120 
	#BSP_PCI_CONFIG_IN_SHORT
 
pci_ªad_c⁄fig_w‹d


	)

122 #i‚de‡
BSP_PCI_CONFIG_OUT_SHORT


123 
	#BSP_PCI_CONFIG_OUT_SHORT
 
pci_wrôe_c⁄fig_w‹d


	)

129 
uöt32_t
 
	tpci_ul⁄g
;

131 #i‚de‡
BSP_PCI2LOCAL_ADDR


132 #i‚de‡
PCI_MEM_BASE


133 
	#PCI_MEM_BASE
 0

	)

135 
	#BSP_PCI2LOCAL_ADDR
(
memaddr
Ë((
pci_ul⁄g
)(memaddrË+ 
PCI_MEM_BASE
)

	)

138 #i‚de‡
BSP_LOCAL2PCI_ADDR


139 #i‚de‡
PCI_DRAM_OFFSET


140 
	#PCI_DRAM_OFFSET
 0

	)

142 
	#BSP_LOCAL2PCI_ADDR
(
pcüddr
Ë((
uöt32_t
)’cüddrË+ 
PCI_DRAM_OFFSET
)

	)

146 #ñi‡
deföed
(
__vxw‹ks
)

147 
	tpci_ul⁄g
;

148 
	#BSP_PCI2LOCAL_ADDR
(
memaddr
Ë(memaddr)

	)

149 
	#BSP_PCI_FIND_DEVICE
 
pciFödDevi˚


	)

150 
	#BSP_PCI_CONFIG_IN_LONG
 
pciC⁄figInL⁄g


	)

151 
	#BSP_PCI_CONFIG_IN_BYTE
 
pciC⁄figInByã


	)

156 #i‚de‡
PCI_INTERRUPT_LINE


157 
	#PCI_INTERRUPT_LINE
 0x3c

	)

160 vﬁ©ûê
LERegi°î
 *
	gvmeUnivî£0Ba£Addr
=0;

161 
	gvmeUnivî£0PciIrqLöe
=-1;

163 #ifde‡
__πems__


164 
	gvmeUnivî£RegP‹t
 = -1;

165 
	gvmeUnivî£RegCSR
 = 0;

168 
	#DFLT_BASE
 vﬁ©ûê
LERegi°î
 *
ba£
 = 
vmeUnivî£0Ba£Addr


	)

170 
	#CHECK_DFLT_BASE
(
ba£
) \

173 i‡(!
ba£
) { \

174 i‡(
	`vmeUnivî£Inô
()) { \

175 
	`u¥ötf
(
°dîr
,"unableÅo findÅhe universe inÖci config space\n"); \

178 
ba£
 = 
vmeUnivî£0Ba£Addr
; \

181 } 0)

	)

185 vﬁ©ûê
LERegi°î
 *

186 
	$vmeUnivî£Ba£Addr
()

188 i‡(!
vmeUnivî£0Ba£Addr
Ë
	`vmeUnivî£Inô
();

189  
vmeUnivî£0Ba£Addr
;

190 
	}
}

193 
	$vmeUnivî£PciIrqLöe
()

195 i‡(
vmeUnivî£0PciIrqLöe
<0Ë
	`vmeUnivî£Inô
();

196  
vmeUnivî£0PciIrqLöe
;

197 
	}
}

200 
ölöe
 

201 
	$WRITE_LE
(

202 
vÆ
,

203 vﬁ©ûê
LERegi°î
 *
adrs
,

204 
off
)

206 #i‡(
__LITTLE_ENDIAN__
 == 1)

207 *(vﬁ©ûê*)((()
adrs
)+
off
)=
vÆ
;

208 #ñi‡(
	`deföed
(
_ARCH_PPC
Ë|| deföed(
__PPC__
Ë|| deföed(
__PPC
)Ë&& (
__BIG_ENDIAN__
 == 1)

210 
__asm__
 
	`__vﬁ©ûe__
("°wbrx %1, %0, %2" :: "b"(
off
),"r"(
vÆ
),"r"(
adrs
));

211 #ñi‡
	`deföed
(
__πems__
)

212 
	`°_À32
((vﬁ©ûê
uöt32_t
 *)(((uöt32_t)
adrs
)+
off
), 
vÆ
);

216 
	}
}

218 #i‡
deföed
(
_ARCH_PPC
Ë|| deföed(
__PPC__
Ë|| deföed(
__PPC
)

219 
	#SYNC
 
__asm__
 
	`__vﬁ©ûe__
("sync")

	)

221 
	#SYNC


	)

229 
	#EIEIO_REG


	)

231 
ölöe
 

232 
	$READ_LE0
(vﬁ©ûê
LERegi°î
 *
adrs
)

234 #i‡(
__LITTLE_ENDIAN__
 == 1)

235  *(vﬁ©ûê*)
adrs
;

236 #ñi‡(
	`deföed
(
_ARCH_PPC
Ë|| deföed(
__PPC__
Ë|| deföed(
__PPC
)Ë&& (
__BIG_ENDIAN__
 == 1)

237 
rvÆ
;

238 
__asm__
 
	`__vﬁ©ûe__
("lwbrx %0, 0, %1":"Ù"(
rvÆ
):"r"(
adrs
));

239  
rvÆ
;

240 #ñi‡
	`deföed
(
__πems__
)

241  
	`ld_À32
((vﬁ©ûê
uöt32_t
*)
adrs
);

245 
	}
}

247 
ölöe
 

248 
	$READ_LE
(vﬁ©ûê
LERegi°î
 *
adrs
, 
off
)

250 #i‡(
__LITTLE_ENDIAN__
 == 1)

251  *((vﬁ©ûê
LERegi°î
 *)((()
adrs
)+
off
));

252 #ñi‡(
	`deföed
(
_ARCH_PPC
Ë|| deföed(
__PPC__
Ë|| deföed(
__PPC
)Ë&& (
__BIG_ENDIAN__
 == 1)

253 
rvÆ
;

255 
__asm__
 
	`__vﬁ©ûe__
("lwbrx %0, %2, %1"

256 : "Ù"(
rvÆ
)

257 : "r"(
adrs
), "b"(
off
));

259 
__asm__
 
	`__vﬁ©ûe__
("eieio");

261  
rvÆ
;

263  
	`READ_LE0
((vﬁ©ûê
LERegi°î
 *)((()
adrs
)+
off
));

265 
	}
}

267 
	#PORT_UNALIGNED
(
addr
,
p‹t
) \

268 –(
p‹t
)%4 ? ((
addr
Ë& 0xffffË: (◊ddrË& 4095Ë)

	)

271 
	#UNIV_REV
(
ba£
Ë(
	`READ_LE
(ba£,2*(
LERegi°î
)Ë& 0xff)

	)

273 #i‡
deföed
(
__πems__
) && 0

275 
	$u¥ötk
(*
fmt
, 
va_li°
 
≠
)

277 
rvÆ
;

278 
	`k_v•rötf
(*, *, 
va_li°
);

283 
buf
[200];

284 
rvÆ
 = 
	`k_v•rötf
(
buf
,
fmt
,
≠
);

285 i‡(
rvÆ
 > (
buf
))

286 
	`BSP_∑nic
("vmeUniverse/uprintk: buffer overrun");

287 
	`¥ötk
(
buf
);

288  
rvÆ
;

289 
	}
}

295 
	$u¥ötf
(
FILE
 *
f
, *
fmt
, ...)

297 
va_li°
 
≠
;

298 
	`va_°¨t
(
≠
, 
fmt
);

299 #ifde‡
__πems__


300 i‡(!
f
 || !
_impuª_±r
->
__sdidöô
) {

306 
	`v¥ötk
(
fmt
,
≠
);

310 
	`vÂrötf
(
f
,
fmt
,
≠
);

312 
	`va_íd
(
≠
);

313 
	}
}

316 
	$vmeUnivî£FödPciBa£
(

317 
ö°™˚
,

318 vﬁ©ûê
LERegi°î
 **
pba£


321 
bus
,
dev
,
fun
;

322 
wrd
;

323 
pci_ul⁄g
 
bußddr
;

324 
úqlöe
;

326 i‡(
	`BSP_PCI_FIND_DEVICE
(

327 
PCI_VENDOR_TUNDRA
,

328 
PCI_DEVICE_UNIVERSEII
,

329 
ö°™˚
,

330 &
bus
,

331 &
dev
,

332 &
fun
))

334 i‡(
	`BSP_PCI_CONFIG_IN_LONG
(
bus
,
dev
,
fun
,
PCI_UNIVERSE_BASE0
,&
bußddr
))

336 i‡(()(
bußddr
) & 1) {

338 i‡(
	`BSP_PCI_CONFIG_IN_LONG
(
bus
,
dev
,
fun
,
PCI_UNIVERSE_BASE1
,&
bußddr
)

339 || (()(
bußddr
) & 1))

342 *
pba£
=(vﬁ©ûê
LERegi°î
*)
	`BSP_PCI2LOCAL_ADDR
(
bußddr
);

344 i‡(
	`BSP_PCI_CONFIG_IN_BYTE
(
bus
,
dev
,
fun
,
PCI_INTERRUPT_LINE
,&
úqlöe
))

348 
	`BSP_PCI_CONFIG_IN_SHORT
(
bus
, 
dev
, 
fun
, 
PCI_COMMAND
, &
wrd
);

349 
	`BSP_PCI_CONFIG_OUT_SHORT
(
bus
, 
dev
, 
fun
, 
PCI_COMMAND
, 
wrd
 | 
PCI_COMMAND_MEMORY
 | 
PCI_COMMAND_MASTER
);

351  
úqlöe
;

352 
	}
}

359 
	$am2mode
(
isma°î
, 
addªss_•a˚
, *
pmode
)

361 
mode
=0;

362 
vdw
 =0;

373 
addªss_•a˚
 &~
VME_MODE_MATCH_MASK
;

375 i‡(!
isma°î
) {

376 
mode
 |
UNIV_SCTL_DAT
 | 
UNIV_SCTL_PGM
;

377 
mode
 |
UNIV_SCTL_USER
;

378 i‡–
VME_AM_IS_MEMORY
 & 
addªss_•a˚
 )

379 
mode
 |
UNIV_SCTL_PWEN
 | 
UNIV_SCTL_PREN
;

380 
mode
 |
UNIV_SCTL_EN
;

382  
VME_MODE_DBW_MSK
 & 
addªss_•a˚
 ) {

384 
vdw
 = 
UNIV_MCTL_VDW64
;

387 
VME_MODE_DBW8
:

390 
VME_MODE_DBW16
:

391 
vdw
 = 
UNIV_MCTL_VDW16
;

394 
VME_MODE_DBW32
:

395 
vdw
 = 
UNIV_MCTL_VDW32
;

398 i‡–
VME_AM_IS_MEMORY
 & 
addªss_•a˚
 )

399 
mode
 |
UNIV_MCTL_PWEN
;

400 
mode
 |
UNIV_MCTL_EN
;

403 
addªss_•a˚
 &~
VME_AM_IS_MEMORY
;

405 
addªss_•a˚
 & 
VME_AM_MASK
) {

406 
VME_AM_STD_SUP_PGM
:

407 
VME_AM_STD_USR_PGM
:

408 i‡(
isma°î
)

409 
mode
 |
UNIV_MCTL_PGM
 ;

411 
mode
 &~
UNIV_SCTL_DAT
;

416 
VME_AM_STD_SUP_DATA
:

417 
VME_AM_STD_USR_DATA
:

418 
VME_AM_STD_SUP_BLT
:

419 
VME_AM_STD_SUP_MBLT
:

420 
VME_AM_STD_USR_BLT
:

421 
VME_AM_STD_USR_MBLT
:

423 i‡–
isma°î
 ) {

424  
addªss_•a˚
 & 3 ) {

426 i‡–
UNIV_MCTL_VDW64
 !
vdw
 )

431 
mode
 |
UNIV_MCTL_VCT
;

435 
vdw
 = 
UNIV_MCTL_VDW32
;

439 
mode
 |
UNIV_CTL_VAS24
;

443 
VME_AM_EXT_SUP_PGM
:

444 
VME_AM_EXT_USR_PGM
:

445 i‡(
isma°î
)

446 
mode
 |
UNIV_MCTL_PGM
 ;

448 
mode
 &~
UNIV_SCTL_DAT
;

452 
VME_AM_EXT_SUP_DATA
:

453 
VME_AM_EXT_USR_DATA
:

454 
VME_AM_EXT_SUP_BLT
:

455 
VME_AM_EXT_SUP_MBLT
:

456 
VME_AM_EXT_USR_BLT
:

457 
VME_AM_EXT_USR_MBLT
:

459 i‡–
isma°î
 ) {

460  
addªss_•a˚
 & 3 ) {

462 i‡–
UNIV_MCTL_VDW64
 !
vdw
 )

467 
mode
 |
UNIV_MCTL_VCT
;

471 
vdw
 = 
UNIV_MCTL_VDW32
;

475 
mode
 |
UNIV_CTL_VAS32
;

479 
VME_AM_SUP_SHORT_IO
:

480 
VME_AM_USR_SHORT_IO
:

481 
mode
 |
UNIV_CTL_VAS16
;

484 
VME_AM_CSR
:

485 i‡–!
isma°î
 )

487 
mode
 |
UNIV_MCTL_VASCSR
;

496 i‡–
	`VME_AM_IS_SUP
(
addªss_•a˚
) )

497 
mode
 |(
isma°î
 ? 
UNIV_MCTL_SUPER
 : 
UNIV_SCTL_SUPER
);

499 
mode
 |
vdw
;

500 *
pmode
 = 
mode
;

502 
	}
}

505 
	$dißbÀUnivî£P‹t
(
isma°î
, 
p‹äo
, vﬁ©ûê*
¥eg
, *
∑øm
)

507 
˙ål
;

508 
˙ål
=
	`READ_LE0
(
¥eg
);

509 
˙ål
 &~(
isma°î
 ? 
UNIV_MCTL_EN
 : 
UNIV_SCTL_EN
);

510 
	`WRITE_LE
(
˙ål
,
¥eg
,0);

511 
SYNC
;

513 
	}
}

516 
	$cfgUnivî£P‹t
(

517 vﬁ©ûê
LERegi°î
 *
ba£
,

518 
isma°î
,

519 
p‹t
,

520 
addªss_•a˚
,

521 
vme_addªss
,

522 
loˇl_addªss
,

523 
Àngth
)

525 vﬁ©ûê
LERegi°î
 *
¥eg
;

526 
p
=
p‹t
;

527 
mode
=0;

529 
	`CHECK_DFLT_BASE
(
ba£
);

532 i‡(
p‹t
 >(
isma°î
 ? 
UNIV_NUM_MPORTS
 : 
UNIV_NUM_SPORTS
)) {

533 
	`u¥ötf
(
°dîr
,"invalidÖort\n");

539 i‡–
	`PORT_UNALIGNED
(
loˇl_addªss
,
p‹t
) ) {

540 
	`u¥ötf
(
°dîr
,"localáddress misaligned\n");

543 i‡–
	`PORT_UNALIGNED
(
vme_addªss
,
p‹t
) ) {

544 
	`u¥ötf
(
°dîr
,"vmeáddress misaligned\n");

547 i‡–
	`PORT_UNALIGNED
(
Àngth
,
p‹t
) ) {

548 
	`u¥ötf
(
°dîr
,"length misaligned\n");

553 i‡(
	`am2mode
(
isma°î
,
addªss_•a˚
,&
mode
)) {

554 
	`u¥ötf
(
°dîr
,"invalidáddress space\n");

559 i‡(!
ba£
 && 
	`vmeUnivî£Inô
()) {

563 
¥eg
=
ba£
;

566 i‡–
	`UNIV_REV
(
ba£
) < 2 ) {

567 i‡(
p‹t
>3) {

568 
	`u¥ötf
(
°dîr
,"UniverseÑev. < 2 has only 4Öorts\n");

576 i‡(
p‹t
<4) {

577 
¥eg
 +(
isma°î
 ? 
UNIV_REGOFF_PCITGT0_CTRL
 : 
UNIV_REGOFF_VMESLV0_CTRL
)/(
LERegi°î
);

579 
¥eg
 +(
isma°î
 ? 
UNIV_REGOFF_PCITGT4_CTRL
 : 
UNIV_REGOFF_VMESLV4_CTRL
)/(
LERegi°î
);

580 
p
-=4;

582 
¥eg
 +5 * 
p
;

585 
	`dißbÀUnivî£P‹t
(
isma°î
,
p‹t
,
¥eg
,0);

588 i‡(
addªss_•a˚
 != 0) {

589 
°¨t
,
off°
;

594 i‡(
isma°î
) {

595 
°¨t
=
loˇl_addªss
;

597 
off°
=
vme_addªss
-
loˇl_addªss
;

599 
°¨t
=
vme_addªss
;

601 
off°
=
loˇl_addªss
-
vme_addªss
;

603 #unde‡
TSILL


604 #ifde‡
TSILL


605 
	`u¥ötf
(
°dîr
,"wrôög 0x%08xÅÿ0x%08x + 4\n",
°¨t
,
¥eg
);

607 
	`WRITE_LE
(
°¨t
,
¥eg
,4);

610 
Àngth
+=
°¨t
;

611 #ifde‡
TSILL


612 
	`u¥ötf
(
°dîr
,"wrôög 0x%08xÅÿ0x%08x + 8\n",
Àngth
,
¥eg
);

614 
	`WRITE_LE
(
Àngth
,
¥eg
,8);

617 #ifde‡
TSILL


618 
	`u¥ötf
(
°dîr
,"wrôög 0x%08xÅÿ0x%08x + 12\n",
off°
,
¥eg
);

620 
	`WRITE_LE
(
off°
,
¥eg
,12);

623 #ifde‡
TSILL


624 
	`u¥ötf
(
°dîr
,"wrôög 0x%08xÅÿ0x%08x + 0\n",
mode
,
¥eg
);

626 
EIEIO_REG
;

627 
	`WRITE_LE
(
mode
,
¥eg
,0);

628 
SYNC
;

631 #ifde‡
TSILL


632 
	`u¥ötf
(
°dîr
,

634 
isma°î
 ? "master" : "slave",

635 
p‹t
);

638 #ifde‡
__vxw‹ks


639 i‡(
isma°î
)

640 
	`u¥ötf
(
°dîr
,

645 
	}
}

648 
	$showUnivî£P‹t
(

649 
isma°î
,

650 
p‹äo
,

651 vﬁ©ûê
LERegi°î
 *
¥eg
,

652 *
∑rm
)

654 
FILE
 *
f
=
∑rm
 ? (FILE *Ì¨m : 
°dout
;

655 
˙ål
, 
°¨t
, 
bound
, 
off°
, 
mask
;

657 
˙ål
 = 
	`READ_LE0
(
¥eg
++);

658 #unde‡
TSILL


659 #ifde‡
TSILL


660 
	`u¥ötf
(
°dîr
,"showUnivî£P‹t: *(0x%08x): 0x%08x\n",
¥eg
-1,
˙ål
);

662 #unde‡
TSILL


665 i‡(!(
˙ål
 & (
isma°î
 ? 
UNIV_MCTL_EN
 : 
UNIV_SCTL_EN
)))

671 
mask
 = ~
	`PORT_UNALIGNED
(0xffffffff,
p‹äo
);

673 
°¨t
 = 
	`READ_LE0
(
¥eg
++)&
mask
;

674 
bound
 = 
	`READ_LE0
(
¥eg
++)&
mask
;

675 
off°
 = 
	`READ_LE0
(
¥eg
++)&
mask
;

677 
off°
+=
°¨t
;

679 i‡(
isma°î
) {

680 
	`u¥ötf
(
f
,"%d: 0x%08lx 0x%08lx 0x%08lx ",

681 
p‹äo
,
off°
,
bound
-
°¨t
,start);

683 
	`u¥ötf
(
f
,"%d: 0x%08lx 0x%08lx 0x%08lx ",

684 
p‹äo
,
°¨t
,
bound
-°¨t,
off°
);

687 
˙ål
 & 
UNIV_CTL_VAS
) {

688 
UNIV_CTL_VAS16
: 
	`u¥ötf
(
f
,"A16, "); ;

689 
UNIV_CTL_VAS24
: 
	`u¥ötf
(
f
,"A24, "); ;

690 
UNIV_CTL_VAS32
: 
	`u¥ötf
(
f
,"A32, "); ;

691 
UNIV_MCTL_VASCSR
: i‡–
isma°î
 ) { 
	`u¥ötf
(
f
,"CSR, "); ; }

693 : 
	`u¥ötf
(
f
,"A??, "); ;

696 i‡(
isma°î
) {

697 
vdw
;

698  
˙ål
 & 
UNIV_MCTL_VDW64
 ) {

699 
UNIV_MCTL_VDW64
:

700 
vdw
 = 64;

703 
UNIV_MCTL_VDW32
:

704 
vdw
 = 32;

707 
UNIV_MCTL_VDW16
:

708 
vdw
 = 16;

712 
vdw
 = 8;

716 i‡–64 =
vdw
 ) {

717  
UNIV_CTL_VAS
 & 
˙ål
 ) {

718 
UNIV_CTL_VAS24
:

719 
UNIV_CTL_VAS32
:

720 
	`u¥ötf
(
f
,"D64 [MBLT], ");

724 
	`u¥ötf
(
f
,"D64, ");

728 
	`u¥ötf
(
f
, "D%u%s, ", 
vdw
, (
˙ål
 & 
UNIV_MCTL_VCT
) ? " [BLT]" : "");

731 
	`u¥ötf
(
f
,"%s, %s",

732 
˙ål
&
UNIV_MCTL_PGM
 ? "Pgm" : "Dat",

733 
˙ål
&
UNIV_MCTL_SUPER
 ? "Sup" : "Usr");

734 i‡–
˙ål
 & 
UNIV_MCTL_PWEN
 )

735 
	`u¥ötf
(
f
,", PWEN");

737 
	`u¥ötf
(
f
,"%s %s %s %s",

738 
˙ål
&
UNIV_SCTL_PGM
 ? "Pgm," : " ",

739 
˙ål
&
UNIV_SCTL_DAT
 ? "Dat," : " ",

740 
˙ål
&
UNIV_SCTL_SUPER
 ? "Sup," : " ",

741 
˙ål
&
UNIV_SCTL_USER
 ? "Usr" : "");

742 i‡–
˙ål
 & 
UNIV_SCTL_PWEN
 )

743 
	`u¥ötf
(
f
,", PWEN");

744 i‡–
˙ål
 & 
UNIV_SCTL_PREN
 )

745 
	`u¥ötf
(
f
,", PREN");

747 
	`u¥ötf
(
f
,"\n");

749 
	}
}

751 
	sXœtRec_
 {

752 
	maddªss
;

753 
	ma•a˚
;

754 
	mªvî£
;

755 } 
	tXœtRec
, *
	tXœt
;

768 
	$xœãP‹t
(
isma°î
, 
p‹t
, vﬁ©ûê
LERegi°î
 *
¥eg
, *
∑rm
)

770 
Xœt
 
l
=(Xœt)
∑rm
;

771 
˙ål
, 
°¨t
, 
bound
, 
off°
, 
mask
, 
x
;

773 
˙ål
 = 
	`READ_LE0
(
¥eg
++);

776 i‡(!(
˙ål
 & (
isma°î
 ? 
UNIV_MCTL_EN
 : 
UNIV_SCTL_EN
)))

780 i‡–
	`am2mode
(
isma°î
,
l
->
a•a˚
,&
off°
) ) {

781 
	`u¥ötf
(
°dîr
,"vmeUniverse WARNING: invalidádressing mode 0x%x\n",

782 
l
->
a•a˚
);

787 
VME_MODE_MATCH_MASK
 & 
l
->
a•a˚
) {

788 
VME_MODE_EXACT_MATCH
:

789 
mask
 = -1 & ~
VME_MODE_MATCH_MASK
;

792 
VME_MODE_AS_MATCH
:

793 
mask
 = 
UNIV_CTL_VAS
;

797 
mask
 = (
isma°î
 ? 
UNIV_MCTL_AM_MASK
 : 
UNIV_SCTL_AM_MASK
);

801 
˙ål
 &
mask
;

802 
off°
 &
mask
;

804 i‡–
˙ål
 !
off°
 )

808 
mask
 = ~
	`PORT_UNALIGNED
(0xffffffff,
p‹t
);

813 
°¨t
 = 
	`READ_LE0
(
¥eg
++Ë& 
mask
;

814 
bound
 = 
	`READ_LE0
(
¥eg
++Ë& 
mask
;

815 
off°
 = 
	`READ_LE0
(
¥eg
++Ë& 
mask
;

818 i‡(
l
->
ªvî£
) {

822 i‡(
l
->
addªss
 >
°¨t
 &&Ü->addªs†< 
bound
) {

823 
l
->
addªss
+=
off°
;

824  1 + 
p‹t
;

827 
x
 = 
l
->
addªss
 - 
off°
;

829 i‡(
x
 >
°¨t
 && x < 
bound
) {

831 
l
->
addªss
 = 
x
;

832  1 + 
p‹t
;

836 
	}
}

840 
	$hasPWENWödow
(

841 
isma°î
,

842 
p‹äo
,

843 vﬁ©ûê
LERegi°î
 *
¥eg
,

844 *
∑rm
)

846 
˙ål
 = 
	`READ_LE0
(
¥eg
);

847 
mask
 = 
isma°î
 ? (
UNIV_MCTL_EN
|
UNIV_MCTL_PWEN
Ë: (
UNIV_SCTL_EN
|
UNIV_SCTL_PWEN
);

848  (
˙ål
 & 
mask
) == mask ? -1 : 0;

849 
	}
}

852 
m≠OvîAŒ
(vﬁ©ûê
LERegi°î
 *
ba£
, 
isma°î
, (*
func
)(,,vﬁ©ûêLERegi°î *,*), *
¨g
)

854 vﬁ©ûê
LERegi°î
 *
Ωå
;

855 
p‹t
;

856 
rvÆ
;

858 
	`CHECK_DFLT_BASE
(
ba£
);

860 
Ωå
 = (
ba£
 +

861 (
isma°î
 ? 
UNIV_REGOFF_PCITGT0_CTRL
 : 
UNIV_REGOFF_VMESLV0_CTRL
)/(
LERegi°î
));

862 #unde‡
TSILL


863 #ifde‡
TSILL


864 
	`u¥ötf
(
°dîr
,"m≠ovîÆl: ba£ i†0x%08x,Ñ±∏0x%08x\n",
ba£
,
Ωå
);

866 #unde‡
TSILL


867 
p‹t
=0;Öort<4;Öort++) {

868 i‡((
rvÆ
=
	`func
(
isma°î
,
p‹t
,
Ωå
,
¨g
))) Ñval;

869 
Ωå
+=5;

873 i‡(
	`UNIV_REV
(
ba£
)<2)  -1;

875 
Ωå
 = (
ba£
 +

876 (
isma°î
 ? 
UNIV_REGOFF_PCITGT4_CTRL
 : 
UNIV_REGOFF_VMESLV4_CTRL
)/(
LERegi°î
));

877 
p‹t
=4;Ö‹t<
UNIV_NUM_MPORTS
;Öort++) {

878 i‡((
rvÆ
=
	`func
(
isma°î
,
p‹t
,
Ωå
,
¨g
))) Ñval;

879 
Ωå
+=5;

882 
	}
}

885 
	$showUnivî£P‹ts
(vﬁ©ûê
LERegi°î
 *
ba£
, 
isma°î
, 
FILE
 *
f
)

887 i‡(!
f
Ëf=
°dout
;

888 
	`u¥ötf
(
f
,"Univî£ %†P‹ts:\n",
isma°î
 ? "Master" : "Slave");

889 
	`u¥ötf
(
f
,"Port VME-Addr Size PCI-Adrs Mode:\n");

890 
	`m≠OvîAŒ
(
ba£
,
isma°î
,
showUnivî£P‹t
,
f
);

891 
	}
}

894 
	$xœãFödP‹t
(

895 vﬁ©ûê
LERegi°î
 *
ba£
,

896 
ma°î
,

897 
ªvî£
,

898 
as
,

899 
aIn
,

900 *
∑Out


903 
rvÆ
;

904 
XœtRec
 
l
;

905 
l
.
a•a˚
 = 
as
;

906 
l
.
addªss
 = 
aIn
;

907 
l
.
ªvî£
 =Ñeverse;

909 
rvÆ
 = 
	`m≠OvîAŒ
(
ba£
,
ma°î
,
xœãP‹t
,(*)&
l
) - 1;

910 *
∑Out
 = 
l
.
addªss
;

911  
rvÆ
;

912 
	}
}

915 
	$vmeUnivî£XœãAddrXX
(

916 vﬁ©ûê
LERegi°î
 *
ba£
,

917 
ma°î
,

918 
ªvî£
,

919 
as
,

920 
aIn
,

921 *
∑Out


924  
	`xœãFödP‹t
(
ba£
, 
ma°î
, 
ªvî£
, 
as
, 
aIn
, 
∑Out
) >= 0 ? 0 : -1;

925 
	}
}

928 
	$vmeUnivî£XœãAddr
(

929 
ma°î
,

930 
ªvî£
,

931 
as
,

932 
aIn
,

933 *
∑Out


936 
DFLT_BASE
;

937  
	`vmeUnivî£XœãAddrXX
(
ba£
, 
ma°î
, 
ªvî£
, 
as
, 
aIn
, 
∑Out
);

938 
	}
}

942 
	$vmeUnivî£Re£t
()

945 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_SCYC_CTL
);

946 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_SCYC_ADDR
);

947 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_SCYC_EN
);

952 
	`vmeUnivî£WrôeReg
(
UNIV_LMISC_CRT_128_US
, 
UNIV_REGOFF_LMISC
);

955 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_DCTL
);

956 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_DTBC
);

957 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_DLA
);

958 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_DVA
);

959 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_DCPP
);

962 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_LM_CTL
);

965 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_VRAI_CTL
);

969 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_VCSR_CTL
);

979 i‡(2==
	`UNIV_REV
(
vmeUnivî£0Ba£Addr
))

980 
	`vmeUnivî£WrôeReg
(
UNIV_U2SPEC_DTKFLTR
 |

981 
UNIV_U2SPEC_MASt11
 |

982 
UNIV_U2SPEC_READt27_NODELAY
 |

983 
UNIV_U2SPEC_POSt28_FAST
 |

984 
UNIV_U2SPEC_PREt28_FAST
,

985 
UNIV_REGOFF_U2SPEC
);

988 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_LINT_EN
);

989 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_LINT_MAP0
);

990 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_LINT_MAP1
);

992 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_VINT_EN
);

993 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_VINT_MAP0
);

994 
	`vmeUnivî£WrôeReg
(0, 
UNIV_REGOFF_VINT_MAP1
);

996 
	`vmeUnivî£DißbÀAŒSœves
();

998 
	`vmeUnivî£DißbÀAŒMa°îs
();

1000 
	`vmeUnivî£WrôeReg
(
UNIV_VCSR_CLR_SYSFAIL
, 
UNIV_REGOFF_VCSR_CLR
);

1003 
	`vmeUnivî£WrôeReg
(
UNIV_LINT_STAT_CLR
, 
UNIV_REGOFF_LINT_STAT
);

1004 
	`vmeUnivî£WrôeReg
(
UNIV_VINT_STAT_CLR
, 
UNIV_REGOFF_VINT_STAT
);

1006 
	`vmeUnivî£WrôeReg
(
UNIV_V_AMERR_V_STAT
, 
UNIV_REGOFF_V_AMERR
);

1008 
	`vmeUnivî£WrôeReg
(

1009 
	`vmeUnivî£RódReg
(
UNIV_REGOFF_PCI_CSR
) |

1010 
UNIV_PCI_CSR_D_PE
 | 
UNIV_PCI_CSR_S_SERR
 | 
UNIV_PCI_CSR_R_MA
 |

1011 
UNIV_PCI_CSR_R_TA
 | 
UNIV_PCI_CSR_S_TA
,

1012 
UNIV_REGOFF_PCI_CSR
);

1014 
	`vmeUnivî£WrôeReg
(
UNIV_L_CMDERR_L_STAT
, 
UNIV_REGOFF_L_CMDERR
);

1016 
	`vmeUnivî£WrôeReg
(

1017 
UNIV_DGCS_STOP
 | 
UNIV_DGCS_HALT
 | 
UNIV_DGCS_DONE
 |

1018 
UNIV_DGCS_LERR
 | 
UNIV_DGCS_VERR
 | 
UNIV_DGCS_P_ERR
,

1019 
UNIV_REGOFF_DGCS
);

1020 
	}
}

1023 
	$vmeUnivî£Inô
()

1025 
rvÆ
;

1026 i‡–(
rvÆ
=
	`vmeUnivî£FödPciBa£
(0,&
vmeUnivî£0Ba£Addr
)) < 0 ) {

1027 
	`u¥ötf
(
°dîr
,"unableÅo findÅhe universe inÖci config space\n");

1029 
vmeUnivî£0PciIrqLöe
 = 
rvÆ
;

1030 
rvÆ
 = 0;

1031 
	`u¥ötf
(
°dîr
,"Universe II PCI-VME bridge detectedát 0x%08x, IRQ %d\n",

1032 ()
vmeUnivî£0Ba£Addr
, 
vmeUnivî£0PciIrqLöe
);

1034  
rvÆ
;

1035 
	}
}

1038 
	$vmeUnivî£Ma°îP‹tsShowXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
FILE
 *
f
)

1040 
	`showUnivî£P‹ts
(
ba£
,1,
f
);

1041 
	}
}

1044 
	$vmeUnivî£Ma°îP‹tsShow
(
FILE
 *
f
)

1046 
DFLT_BASE
;

1047 
	`showUnivî£P‹ts
(
ba£
,1,
f
);

1048 
	}
}

1051 
	$vmeUnivî£SœveP‹tsShowXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
FILE
 *
f
)

1053 
	`showUnivî£P‹ts
(
ba£
,0,
f
);

1054 
	}
}

1057 
	$vmeUnivî£SœveP‹tsShow
(
FILE
 *
f
)

1059 
DFLT_BASE
;

1060 
	`showUnivî£P‹ts
(
ba£
,0,
f
);

1061 
	}
}

1064 
	$vmeUnivî£Ma°îP‹tCfgXX
(

1065 vﬁ©ûê
LERegi°î
 *
ba£
,

1066 
p‹t
,

1067 
addªss_•a˚
,

1068 
vme_addªss
,

1069 
loˇl_addªss
,

1070 
Àngth
)

1072  
	`cfgUnivî£P‹t
(
ba£
,1,
p‹t
,
addªss_•a˚
,
vme_addªss
,
loˇl_addªss
,
Àngth
);

1073 
	}
}

1076 
	$vmeUnivî£Ma°îP‹tCfg
(

1077 
p‹t
,

1078 
addªss_•a˚
,

1079 
vme_addªss
,

1080 
loˇl_addªss
,

1081 
Àngth
)

1083 
DFLT_BASE
;

1084  
	`cfgUnivî£P‹t
(
ba£
,1,
p‹t
,
addªss_•a˚
,
vme_addªss
,
loˇl_addªss
,
Àngth
);

1085 
	}
}

1088 
	$vmeUnivî£SœveP‹tCfgXX
(

1089 vﬁ©ûê
LERegi°î
 *
ba£
,

1090 
p‹t
,

1091 
addªss_•a˚
,

1092 
vme_addªss
,

1093 
loˇl_addªss
,

1094 
Àngth
)

1096  
	`cfgUnivî£P‹t
(
ba£
,0,
p‹t
,
addªss_•a˚
,
vme_addªss
,
loˇl_addªss
,
Àngth
);

1097 
	}
}

1100 
	$vmeUnivî£SœveP‹tCfg
(

1101 
p‹t
,

1102 
addªss_•a˚
,

1103 
vme_addªss
,

1104 
loˇl_addªss
,

1105 
Àngth
)

1107 
DFLT_BASE
;

1108  
	`cfgUnivî£P‹t
(
ba£
,0,
p‹t
,
addªss_•a˚
,
vme_addªss
,
loˇl_addªss
,
Àngth
);

1109 
	}
}

1113 
	$vmeUnivî£DißbÀAŒSœvesXX
(vﬁ©ûê
LERegi°î
 *
ba£
)

1115 
	`m≠OvîAŒ
(
ba£
,0,
dißbÀUnivî£P‹t
,0);

1116 
	}
}

1119 
	$vmeUnivî£DißbÀAŒSœves
()

1121 
DFLT_BASE
;

1122 
	`m≠OvîAŒ
(
ba£
,0,
dißbÀUnivî£P‹t
,0);

1123 
	}
}

1126 
	$vmeUnivî£DißbÀAŒMa°îsXX
(vﬁ©ûê
LERegi°î
 *
ba£
)

1128 
	`m≠OvîAŒ
(
ba£
,1,
dißbÀUnivî£P‹t
,0);

1129 
	}
}

1132 
	$vmeUnivî£DißbÀAŒMa°îs
()

1134 
DFLT_BASE
;

1135 
	`m≠OvîAŒ
(
ba£
,1,
dißbÀUnivî£P‹t
,0);

1136 
	}
}

1139 
	$vmeUnivî£RódRegXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
off£t
)

1141 
rvÆ
;

1142 
rvÆ
 = 
	`READ_LE
(
ba£
,
off£t
);

1143  
rvÆ
;

1144 
	}
}

1148 
	$vmeUnivî£RódReg
(
off£t
)

1150 
rvÆ
;

1151 
rvÆ
 = 
	`READ_LE
(
vmeUnivî£0Ba£Addr
,
off£t
);

1152  
rvÆ
;

1153 
	}
}

1156 
	$vmeUnivî£WrôeRegXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
vÆue
, 
off£t
)

1158 
	`WRITE_LE
(
vÆue
, 
ba£
, 
off£t
);

1159 
	}
}

1162 
	$vmeUnivî£WrôeReg
(
vÆue
, 
off£t
)

1164 
	`WRITE_LE
(
vÆue
, 
vmeUnivî£0Ba£Addr
, 
off£t
);

1165 
	}
}

1168 
	$vmeUnivî£Re£tBus
()

1170 
	`vmeUnivî£WrôeReg
(

1171 
	`vmeUnivî£RódReg
(
UNIV_REGOFF_MISC_CTL
Ë| 
UNIV_MISC_CTL_SW_SYSRST
,

1172 
UNIV_REGOFF_MISC_CTL
);

1173 
	}
}

1176 
	$vmeUnivî£CvtToLE
(*
±r
, 
num
)

1178 #i‡!
	`deföed
(
__LITTLE_ENDIAN__
) || (__LITTLE_ENDIAN__ != 1)

1179 *
p
=
±r
+
num
;

1180 
p
 > 
±r
) {

1181 #i‡(
	`deföed
(
_ARCH_PPC
Ë|| deföed(
__PPC__
Ë|| deföed(
__PPC
)Ë&& (
__BIG_ENDIAN__
 == 1)

1182 
__asm__
 
	`__vﬁ©ûe__
(

1185 : "Ù"(
p
) : "0"(p) : "r0"

1187 #ñi‡
	`deföed
(
__πems__
)

1188 
p
--; 
	`°_À32
(p, *p);

1194 
	}
}

1197 
	$vmeUnivî£I¡Rai£XX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
Àvñ
, 
ve˘‹
)

1199 
v
;

1200 
b
;

1202 
	`CHECK_DFLT_BASE
(
ba£
);

1204 i‡–
Àvñ
 < 1 ||Üevñ > 7 || 
ve˘‹
 > 255 )

1207 i‡–
ve˘‹
 & 1 )

1212 i‡–
	`vmeUnivî£RódRegXX
(
ba£
, 
UNIV_REGOFF_VINT_STAT
 ) & 
	`UNIV_VINT_STAT_SWINT
(
Àvñ
) ) {

1217 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
	`UNIV_VINT_STATID
(
ve˘‹
), 
UNIV_REGOFF_VINT_STATID
 );

1219 i‡–
	`UNIV_REV
(
ba£
) >= 2 ) {

1221 
b
 = 
	`UNIV_VINT_STAT_SWINT
(
Àvñ
);

1224 
v
 = 
	`vmeUnivî£RódRegXX
(
ba£
, 
UNIV_REGOFF_VINT_MAP1
);

1225 
v
 &~
	`UNIV_VINT_MAP1_SWINT
(0x7);

1226 
v
 |
	`UNIV_VINT_MAP1_SWINT
(
Àvñ
);

1227 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
v
, 
UNIV_REGOFF_VINT_MAP1
);

1228 
b
 = 
UNIV_VINT_EN_SWINT
;

1230 
v
 = 
	`vmeUnivî£RódRegXX
(
ba£
, 
UNIV_REGOFF_VINT_EN
);

1232 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
v
 & ~
b
, 
UNIV_REGOFF_VINT_EN
 );

1233 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
v
 | 
b
, 
UNIV_REGOFF_VINT_EN
 );

1237 
	}
}

1240 
	$vmeUnivî£I¡Rai£
(
Àvñ
, 
ve˘‹
)

1242  
	`vmeUnivî£I¡Rai£XX
(
vmeUnivî£0Ba£Addr
, 
Àvñ
, 
ve˘‹
);

1243 
	}
}

1247 
	#UNIV_CRG_SIZE
 (1<<12)

	)

1250 
	$vmeUnivî£M≠CRGXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
vme_ba£
, 
as
 )

1252 
uöt32_t
 
mode
;

1254 
	`CHECK_DFLT_BASE
(
ba£
);

1256 #ifde‡
__πems__


1257 i‡–
vmeUnivî£RegP‹t
 > -1 && ! 
vmeUnivî£RegCSR
 ) {

1258 
	`u¥ötf
(
°dîr
,"vmeUniverse: CRGálready mappedánd in use by interrupt manager\n");

1264 
mode
 = 
UNIV_VRAI_CTL_EN
 | 
UNIV_VRAI_CTL_PGM
 | 
UNIV_VRAI_CTL_DATA
 | 
UNIV_VRAI_CTL_SUPER
 | 
UNIV_VRAI_CTL_USER
;

1266 i‡–
	`VME_AM_IS_SHORT
(
as
) ) {

1267 
mode
 |
UNIV_VRAI_CTL_VAS_A16
;

1269 i‡–
	`VME_AM_IS_STD
(
as
) ) {

1270 
mode
 |
UNIV_VRAI_CTL_VAS_A24
;

1272 i‡–
	`VME_AM_IS_EXT
(
as
) ) {

1273 
mode
 |
UNIV_VRAI_CTL_VAS_A32
;

1279 
	`WRITE_LE
–(
vme_ba£
 & ~(
UNIV_CRG_SIZE
-1)), 
ba£
, 
UNIV_REGOFF_VRAI_BS
 );

1280 
	`WRITE_LE
–
mode
, 
ba£
, 
UNIV_REGOFF_VRAI_CTL
 );

1283 
	}
}

1286 
	$vmeUnivî£M≠CRG
(
vme_ba£
, 
as
 )

1288  
	`vmeUnivî£M≠CRGXX
–
vmeUnivî£0Ba£Addr
, 
vme_ba£
, 
as
 );

1289 
	}
}

1291 #ifde‡
__πems__


1293 
	~"b•VmeDmaLi°P.h
"

1294 
	~<b•/vmeUnivî£DMA.h
>

1297 
	#DCTL_MODE_MASK
 \

1298 –
UNIV_DCTL_VDW_MSK
 | 
UNIV_DCTL_VAS_MSK
 | 
UNIV_DCTL_PGM
 | 
UNIV_DCTL_SUPER
 | 
UNIV_DCTL_VCT
 )

	)

1300 
uöt32_t


1301 
	$x„r_mode2d˘l
(
uöt32_t
 
x„r_mode
)

1303 
uöt32_t
 
d˘l
;

1313 i‡–
x„r_mode
 & 
BSP_VMEDMA_MODE_NOINC_PCI
 )

1314  
BSP_VMEDMA_STATUS_UNSUP
;

1317 
x„r_mode
 &~
VME_AM_IS_MEMORY
;

1319 i‡–
	`VME_AM_IS_2eSST
(
x„r_mode
) )

1320  
BSP_VMEDMA_STATUS_UNSUP
;

1322 i‡–! 
	`VME_AM_IS_SHORT
(
x„r_mode
Ë&& ! 
	`VME_AM_IS_STD
(x„r_modeË&& ! 
	`VME_AM_IS_EXT
(xfer_mode) )

1323  
BSP_VMEDMA_STATUS_UNSUP
;

1326 i‡–
	`am2mode
–1, 
x„r_mode
, &
d˘l
 ) )

1327  
BSP_VMEDMA_STATUS_UNSUP
;

1336  
UNIV_DCTL_VAS_MSK
 & 
d˘l
 ) {

1337 
UNIV_DCTL_VAS_A24
:

1338 
UNIV_DCTL_VAS_A32
:

1343 i‡–(
x„r_mode
 & 0xb) != 8

1344 && ( 
UNIV_DCTL_VDW_64
 =(
d˘l
 & 
UNIV_DCTL_VDW_MSK
) ) ) {

1345 
d˘l
 &~
UNIV_DCTL_VDW_MSK
;

1346 
d˘l
 |
UNIV_DCTL_VDW_32
;

1350 
UNIV_DCTL_VAS_A16
:

1354  
BSP_VMEDMA_STATUS_UNSUP
;

1358 
d˘l
 &
DCTL_MODE_MASK
;

1360 i‡–
x„r_mode
 & 
BSP_VMEDMA_MODE_NOINC_VME
 ) {

1364 
d˘l
 &~
UNIV_DCTL_VCT
;

1365 
d˘l
 |
UNIV_DCTL_NO_VINC
;

1367 i‡–
UNIV_DCTL_VDW_64
 =(
d˘l
 & 
UNIV_DCTL_VDW_MSK
) ) {

1368 
d˘l
 &~
UNIV_DCTL_VDW_MSK
;

1369 
d˘l
 |
UNIV_DCTL_VDW_32
;

1375 i‡–
BSP_VMEDMA_MODE_PCI2VME
 & 
x„r_mode
 )

1376 
d˘l
 |
UNIV_DCTL_L2V
;

1378  
d˘l
;

1379 
	}
}

1385 
	$vmeUnivî£DmaSëupXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
)

1387 
uöt32_t
 
d˘l
, 
dgcs
;

1389 i‡–
ch™√l
 != 0 )

1390  
BSP_VMEDMA_STATUS_UNSUP
;

1392 
d˘l
 = 
	`x„r_mode2d˘l
(
x„r_mode
);

1394 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =
d˘l
 )

1395  
BSP_VMEDMA_STATUS_UNSUP
;

1398 
dgcs
 = 
UNIV_DGCS_INT_MSK
;

1400  
mode
 ) {

1401 
BSP_VMEDMA_OPT_THROUGHPUT
:

1402 
dgcs
 |
UNIV_DGCS_VON_1024
 | 
UNIV_DGCS_VOFF_0_US
;

1404 
dgcs
 |–
x„r_mode
 & 
BSP_VMEDMA_MODE_NOINC_VME
 ) ?

1405 
UNIV_DGCS_VON_2048
 : 
UNIV_DGCS_VON_1024
;

1408 
BSP_VMEDMA_OPT_LOWLATENCY
:

1409 
dgcs
 |
UNIV_DGCS_VOFF_0_US
;

1411 
dgcs
 |–
x„r_mode
 & 
BSP_VMEDMA_MODE_NOINC_VME
 ) ?

1412 
UNIV_DGCS_VON_512
 : 
UNIV_DGCS_VON_256
;

1415 
BSP_VMEDMA_OPT_SHAREDBUS
:

1416 
dgcs
 |
UNIV_DGCS_VOFF_512_US
;

1418 
dgcs
 |–
x„r_mode
 & 
BSP_VMEDMA_MODE_NOINC_VME
 ) ?

1419 
UNIV_DGCS_VON_512
 : 
UNIV_DGCS_VON_256
;

1422 
BSP_VMEDMA_OPT_CUSTOM
:

1423 
d˘l
 = ((
uöt32_t
*)
cu°om
)[0];

1424 
dgcs
 = ((
uöt32_t
*)
cu°om
)[1];

1428 
BSP_VMEDMA_OPT_DEFAULT
:

1433 
dgcs
 |
UNIV_DGCS_STATUS_CLEAR
;

1435 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
d˘l
, 
UNIV_REGOFF_DCTL
);

1436 
	`vmeUnivî£WrôeRegXX
(
ba£
, 
dgcs
, 
UNIV_REGOFF_DGCS
);

1438  
BSP_VMEDMA_STATUS_OK
;

1439 
	}
}

1442 
	$vmeUnivî£DmaSëup
(
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
)

1444 
DFLT_BASE
;

1445  
	`vmeUnivî£DmaSëupXX
(
ba£
, 
ch™√l
, 
mode
, 
x„r_mode
, 
cu°om
);

1446 
	}
}

1449 
	$vmeUnivî£DmaSèπXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
)

1451 i‡–
ch™√l
 != 0 )

1452  
BSP_VMEDMA_STATUS_UNSUP
;

1454 i‡((
pci_addr
 & 7Ë!(
vme_addr
 & 7)) {

1455 
	`u¥ötf
(
°dîr
,"vmeUniverseDmaStartXX: misalignedáddresses\n");

1461 vﬁ©ûê
LERegi°î
 *
b
=
ba£
;

1462 
dgcsoff
=
UNIV_REGOFF_DGCS
,
dgcs
;

1464 
dgcs
=
	`READ_LE
(
b
, 
dgcsoff
);

1467 
dgcs
 &~
UNIV_DGCS_CHAIN
;

1468 
	`WRITE_LE
(
dgcs
,

1469 
b
, 
dgcsoff
);

1470 
	`WRITE_LE
(
pci_addr
,

1471 
b
, 
UNIV_REGOFF_DLA
);

1472 
	`WRITE_LE
(
vme_addr
,

1473 
b
, 
UNIV_REGOFF_DVA
);

1474 
	`WRITE_LE
(
n_byãs
,

1475 
b
, 
UNIV_REGOFF_DTBC
);

1476 
dgcs
 |
UNIV_DGCS_GO
;

1477 
EIEIO_REG
;

1478 
	`WRITE_LE
(
dgcs
,

1479 
b
, 
dgcsoff
);

1481 
SYNC
;

1483 
	}
}

1487 
	$vmeUnivî£SèπDMAXX
(

1488 vﬁ©ûê
LERegi°î
 *
ba£
,

1489 
loˇl_addr
,

1490 
vme_addr
,

1491 
cou¡
)

1493  
	`vmeUnivî£DmaSèπXX
(
ba£
, 0, 
loˇl_addr
, 
vme_addr
, 
cou¡
);

1494 
	}
}

1497 
	$vmeUnivî£DmaSèπ
(
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
)

1499 
DFLT_BASE
;

1500  
	`vmeUnivî£DmaSèπXX
(
ba£
, 
ch™√l
, 
pci_addr
, 
vme_addr
, 
n_byãs
);

1501 
	}
}

1505 
	$vmeUnivî£SèπDMA
(

1506 
loˇl_addr
,

1507 
vme_addr
,

1508 
cou¡
)

1510 
DFLT_BASE
;

1511  
	`vmeUnivî£DmaSèπXX
(
ba£
, 0, 
loˇl_addr
, 
vme_addr
, 
cou¡
);

1512 
	}
}

1514 
uöt32_t


1515 
	$vmeUnivî£DmaSètusXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
)

1517 
uöt32_t
 
dgcs
;

1518 i‡–
ch™√l
 != 0 )

1519  
BSP_VMEDMA_STATUS_UNSUP
;

1521 
dgcs
 = 
	`vmeUnivî£RódRegXX
(
ba£
, 
UNIV_REGOFF_DGCS
);

1523 
dgcs
 &
UNIV_DGCS_STATUS_CLEAR
;

1525 i‡–0 =
dgcs
 || 
UNIV_DGCS_DONE
 == dgcs )

1526  
BSP_VMEDMA_STATUS_OK
;

1528 i‡–
UNIV_DGCS_ACT
 & 
dgcs
 )

1529  
BSP_VMEDMA_STATUS_BUSY
;

1531 i‡–
UNIV_DGCS_LERR
 & 
dgcs
 )

1532  
BSP_VMEDMA_STATUS_BERR_PCI
;

1534 i‡–
UNIV_DGCS_VERR
 & 
dgcs
 )

1535  
BSP_VMEDMA_STATUS_BERR_VME
;

1537  
BSP_VMEDMA_STATUS_OERR
;

1538 
	}
}

1540 
uöt32_t


1541 
	$vmeUnivî£DmaSètus
(
ch™√l
)

1543 
DFLT_BASE
;

1544  
	`vmeUnivî£DmaSètusXX
(
ba£
, 
ch™√l
);

1545 
	}
}

1553 vﬁ©ûê
	tuöt32_t
 
	tLERegi°î1
;

1555 
	sVmeUnivî£DmaLi°DescRec_
 {

1556 
LERegi°î1
 
	md˘l
;

1557 
LERegi°î1
 
	mdtbc
;

1558 
LERegi°î1
 
	mdœ
;

1559 
LERegi°î1
 
	mdummy1
;

1560 
LERegi°î1
 
	mdva
;

1561 
LERegi°î1
 
	mdummy2
;

1562 
LERegi°î1
 
	md˝p
;

1563 
LERegi°î1
 
	mdummy3
;

1564 } 
	t__©åibuã__
((
	tÆig√d
(32), 
	t__may_Æüs__
))

1565 
	tVmeUnivî£DmaLi°DescRec
;

1567 
VmeUnivî£DmaLi°DescRec
 *
	tVmeUnivî£DmaLi°Desc
;

1569 
uni_desc_öô
 (
DmaDes¸ùt‹
);

1570 
uni_desc_£tup
 (
DmaDes¸ùt‹
, 
uöt32_t
, uint32_t, uint32_t, uint32_t, uint32_t);

1571 
uni_desc_£äxt
(
DmaDes¸ùt‹
, DmaDescriptor);

1572 
uni_desc_dump
 (
DmaDes¸ùt‹
);

1573 
uni_desc_°¨t
 (vﬁ©ûê*
c⁄åﬁÀr_addr
, 
ch™√l
, 
DmaDes¸ùt‹
 
p
);

1575 
VMEDmaLi°CœssRec
 
	gvmeUnivî£DmaLi°Cœss
 = {

1576 
desc_size
: (
VmeUnivî£DMAPackëRec
),

1577 
desc_Æign
: 32,

1578 
‰ìLi°
: 0,

1579 
desc_Æloc
: 0,

1580 
desc_‰ì
: 0,

1581 
desc_öô
: 
uni_desc_öô
,

1582 
desc_£äxt
:
uni_desc_£äxt
,

1583 
desc_£tup
: 
uni_desc_£tup
,

1584 
desc_°¨t
: 
uni_desc_°¨t
,

1585 
desc_ª‰
: 0,

1586 
desc_dump
: 
uni_desc_dump
,

1589 
	$uni_desc_öô
 (
DmaDes¸ùt‹
 
p
)

1591 
VmeUnivî£DmaLi°Desc
 
d
 = 
p
;

1592 
	`°_À32
–&
d
->
d˝p
, 
UNIV_DCPP_IMG_NULL
 );

1593 
	}
}

1595 
	$uni_desc_£äxt
(
DmaDes¸ùt‹
 
p
, DmaDes¸ùt‹ 
n
)

1597 
VmeUnivî£DmaLi°Desc
 
d
 = 
p
;

1598 i‡–0 =
n
 ) {

1599 
	`°_À32
–&
d
->
d˝p
, 
UNIV_DCPP_IMG_NULL
 );

1601 
	`°_À32
–&
d
->
d˝p
, 
	`BSP_LOCAL2PCI_ADDR
–(
uöt32_t
)
n
));

1603 
	}
}

1606 
	$uni_desc_£tup
 (

1607 
DmaDes¸ùt‹
 
p
,

1608 
uöt32_t
 
©å_mask
,

1609 
uöt32_t
 
x„r_mode
,

1610 
uöt32_t
 
pci_addr
,

1611 
uöt32_t
 
vme_addr
,

1612 
uöt32_t
 
n_byãs
)

1614 
VmeUnivî£DmaLi°Desc
 
d
 = 
p
;

1615 
LERegi°î1
 
d˘l
;

1617 i‡–
BSP_VMEDMA_MSK_ATTR
 & 
©å_mask
 ) {

1618 
d˘l
 = 
	`x„r_mode2d˘l
(
x„r_mode
);

1620 i‡–(
uöt32_t
)
BSP_VMEDMA_STATUS_UNSUP
 =
d˘l
 )

1623 
	`°_À32
–&
d
->
d˘l
, dctl );

1630 i‡–
BSP_VMEDMA_MSK_PCIA
 & 
©å_mask
 ) {

1631 i‡–
pci_addr
 & 0x7 )

1634 
	`°_À32
–&
d
->
dœ
, 
pci_addr
 );

1637 i‡–
BSP_VMEDMA_MSK_VMEA
 & 
©å_mask
 ) {

1638 i‡–
vme_addr
 & 0x7 )

1641 
	`°_À32
–&
d
->
dva
, 
vme_addr
 );

1644 i‡–
BSP_VMEDMA_MSK_BCNT
 & 
©å_mask
 ) {

1645 
	`°_À32
–&
d
->
dtbc
, 
n_byãs
 );

1649 
	}
}

1651 
	guni_desc_°¨t


1652 (vﬁ©ûê*
	gc⁄åﬁÀr_addr
, 
	gch™√l
, 
DmaDes¸ùt‹
 
	gp
)

1654 vﬁ©ûê
LERegi°î
 *
	gba£
 = 
c⁄åﬁÀr_addr
;

1655 
uöt32_t
 
	gdgcs
;

1657 i‡–!
	gba£
 )

1658 
	gba£
 = 
vmeUnivî£0Ba£Addr
;

1660 
	gdgcs
 = 
vmeUnivî£RódRegXX
–
ba£
, 
UNIV_REGOFF_DGCS
 );

1662 i‡–
	gUNIV_DGCS_ACT
 & 
	gdgcs
 )

1663  
	gBSP_VMEDMA_STATUS_BUSY
;

1665 i‡–!
	gp
 ) {

1669 
	gdgcs
 &~
UNIV_DGCS_CHAIN
;

1670 
vmeUnivî£WrôeRegXX
–
ba£
, 
UNIV_REGOFF_DGCS
, 
dgcs
);

1675 
	gdgcs
 |
UNIV_DGCS_CHAIN
;

1677 
vmeUnivî£WrôeRegXX
–
ba£
, 
UNIV_REGOFF_DGCS
, 
dgcs
);

1680 
vmeUnivî£WrôeRegXX
–
ba£
, 0x0, 
UNIV_REGOFF_DTBC
);

1683 
vmeUnivî£WrôeRegXX
–
ba£
, 
BSP_LOCAL2PCI_ADDR
((
uöt32_t
)
p
), 
UNIV_REGOFF_DCPP
);

1686 
	gdgcs
 |
UNIV_DGCS_GO
;

1687 
vmeUnivî£WrôeReg
(
dgcs
, 
UNIV_REGOFF_DGCS
);

1693 
	$uni_desc_dump
(
DmaDes¸ùt‹
 
p
)

1695 
VmeUnivî£DmaLi°Desc
 
d
 = 
p
;

1696 
LERegi°î1
 
d˝p
 = 
	`ld_À32
(&
d
->dcpp);

1698 
	`¥ötf
(" DLA: 0x%08x\n", 
	`ld_À32
(&
d
->
dœ
));

1699 
	`¥ötf
(" DVA: 0x%08x\n", 
	`ld_À32
(&
d
->
dva
));

1700 
	`¥ötf
(" DCPP: 0x%08"
PRIx32
"%s\n", 
d˝p
, (d˝∞& 
UNIV_DCPP_IMG_NULL
) ? " (LAST)" : "");

1701 
	`¥ötf
(" CTL: 0x%08x\n", 
	`ld_À32
(&
d
->
d˘l
));

1702 
	`¥ötf
(" TBC: 0x%08x\n", 
	`ld_À32
(&
d
->
dtbc
));

1703 
	}
}

1707 
	~<b•/úq.h
>

1710 
	sUnivî£IRQE¡ryRec_
 {

1711 
VmeUnivî£ISR
 
	mi§
;

1712 *
	mu§D©a
;

1713 } 
	tUnivî£IRQE¡ryRec
, *
	tUnivî£IRQE¡ry
;

1715 
Univî£IRQE¡ry
 
	gunivî£HdlTbl
[
UNIV_NUM_INT_VECS
]={0};

1717 
	gvmeUnivî£IrqMgrIn°ÆÀd
 = 0;

1719 vﬁ©ûê
LERegi°î
 *
	gvmeUnivî£RegBa£
 = 0;

1723 
	#UNIV_NUM_WIRES
 4

	)

1725 vﬁ©ûê
	gwúe_mask
[
UNIV_NUM_WIRES
] = {0};

1727 
	gunivî£_wúe
[
UNIV_NUM_WIRES
] = {0};

1730 
	$lvl2bô
(
Àvñ
)

1732 
shi·
 = -1;

1733 i‡–
Àvñ
 >
UNIV_DMA_INT_VEC
 &&Üevñ <
UNIV_LM3_INT_VEC
 ) {

1734 
shi·
 = 8 + (
Àvñ
-
UNIV_DMA_INT_VEC
);

1735 } i‡–
UNIV_VOWN_INT_VEC
 =
Àvñ
 ) {

1736 
shi·
 = 0;

1737 } i‡–1 <
Àvñ
 &&Üevel <=7 ) {

1738 
shi·
 = 
Àvñ
;

1742  
shi·
;

1743 
	}
}

1746 
	$vmeUnivî£I¡Rouã
(
Àvñ
, 
pö
)

1748 
i
, 
shi·
;

1749 
mask
, 
m≠ªg
, 
Êags
, 
wúe
;

1751 i‡–
pö
 >
UNIV_NUM_WIRES
 || ! 
univî£_wúe
[pö] || !
vmeUnivî£IrqMgrIn°ÆÀd
 )

1754 i‡–(
shi·
 = 
	`lvl2bô
(
Àvñ
)) < 0 ) {

1758 
mask
 = 1<<
shi·
;

1761 i‡–
shi·
 < 8 ) {

1762 
m≠ªg
 = 
UNIV_REGOFF_LINT_MAP0
;

1763 } i‡–
shi·
 < 16 ) {

1764 
shi·
 -= 8;

1765 
m≠ªg
 = 
UNIV_REGOFF_LINT_MAP1
;

1766 } i‡–
shi·
 < 24 ) {

1767 
shi·
 -= 16;

1768 
m≠ªg
 = 
UNIV_REGOFF_LINT_MAP2
;

1773 
shi·
 <<=2;

1776 
wúe
 = (
univî£_wúe
[
pö
]-1Ë<< 
shi·
;

1778 
	`πems_öãºu±_dißbÀ
(
Êags
);

1780  
i
 = 0; i<
UNIV_NUM_WIRES
; i++ ) {

1781 
wúe_mask
[
i
] &~
mask
;

1783 
wúe_mask
[
pö
] |
mask
;

1785 
mask
 = 
	`vmeUnivî£RódReg
(
m≠ªg
Ë& ~ (0xf<<
shi·
);

1786 
mask
 |
wúe
;

1787 
	`vmeUnivî£WrôeReg
–
mask
, 
m≠ªg
 );

1789 
	`πems_öãºu±_íabÀ
(
Êags
);

1791 
	}
}

1793 
VmeUnivî£ISR


1794 
	$vmeUnivî£ISRGë
(
ve˘‹
, **
∑rg
)

1796 
Êags
;

1797 
VmeUnivî£ISR
 
rvÆ
 = 0;

1798 vﬁ©ûê
Univî£IRQE¡ry
 *
≥
 = 
univî£HdlTbl
 + 
ve˘‹
;

1800 i‡–
ve˘‹
>=
UNIV_NUM_INT_VECS
 || ! *
≥
 )

1803 
	`πems_öãºu±_dißbÀ
(
Êags
);

1804 i‡–*
≥
 ) {

1805 i‡(
∑rg
)

1806 *
∑rg
=(*
≥
)->
u§D©a
;

1807 
rvÆ
 = (*
≥
)->
i§
;

1809 
	`πems_öãºu±_íabÀ
(
Êags
);

1810  
rvÆ
;

1811 
	}
}

1813 
	#SPECIAL_IRQ_MSK
 ( ~((
UNIV_LINT_STAT_VIRQ7
<<1)-
UNIV_LINT_STAT_VIRQ1
Ë)

	)

1816 
	$univî£S≥cülISR
(
°©us
)

1818 
Univî£IRQE¡ry
 
ù
;

1819 
vec
;

1820 
s
;

1825 
	`vmeUnivî£WrôeReg
–(
°©us
 & 
SPECIAL_IRQ_MSK
), 
UNIV_REGOFF_LINT_STAT
 );

1828 
vec
=
UNIV_VOWN_INT_VEC
;

1829 i‡–(
°©us
 & 
UNIV_LINT_STAT_VOWN
Ë&& (
ù
=
univî£HdlTbl
[
vec
]))

1830 
ù
->
	`i§
(ù->
u§D©a
,
vec
);

1838  
s
 = 
°©us
>>8; s; s >>= 1) {

1839 
vec
++;

1840 i‡–(
s
&1Ë&& (
ù
=
univî£HdlTbl
[
vec
]) )

1841 
ù
->
	`i§
(ù->
u§D©a
,
vec
);

1851 
	}
}

1886 
	$univî£VMEISR
(
πems_úq_hdl_∑øm
 
¨g
)

1888 
pö
 = ()
¨g
;

1889 
Univî£IRQE¡ry
 
ù
;

1890 
msk
,
löt°©
,
°©us
;

1891 
lvl
;

1892 #i‡
	`deföed
(
BSP_PIC_DO_EOI
)

1893 
löãn
;

1897 
löt°©
 = 
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_STAT
);

1900 
löt°©
 &
wúe_mask
[
pö
];

1902 #ifde‡
__PPC__


1903 
asm
 vﬁ©ûe("˙ézw %0, %1":"Ù"(
lvl
):"r"(
löt°©
 & ~
SPECIAL_IRQ_MSK
));

1904 
lvl
 = 31-lvl;

1905 
msk
 = 1<<
lvl
;

1907 
msk
=
UNIV_LINT_STAT_VIRQ7
, 
lvl
=7;

1908 
lvl
>0;

1909 
lvl
--, 
msk
>>=1) {

1910 i‡(
löt°©
 & 
msk
) ;

1914 #i‚de‡
BSP_PIC_DO_EOI


1916 i‡–(
°©us
 = (
löt°©
 & 
SPECIAL_IRQ_MSK
)) )

1917 
	`univî£S≥cülISR
–
°©us
 );

1919 i‡–
lvl
 <= 0)

1923 i‡–
lvl
 <= 0 ) {

1925 
	`univî£S≥cülISR
–
löt°©
 & 
SPECIAL_IRQ_MSK
 );

1930 i‡–0 =
pö
 )

1931 
BSP_PIC_DO_EOI
;

1935 
löãn
 = 
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_EN
);

1938 
	`vmeUnivî£WrôeReg
(

1939 
löãn
 & ~–((
msk
<<1)-
UNIV_LINT_STAT_VIRQ1
Ë& 
wúe_mask
[
pö
]),

1940 
UNIV_REGOFF_LINT_EN


1947 i‡–0 =
pö
 )

1948 
BSP_PIC_DO_EOI
;

1952 
°©us
 = 
	`vmeUnivî£RódReg
(
UNIV_REGOFF_VIRQ1_STATID
 - 4 + (
lvl
<<2));

1955 i‡(
°©us
 & 
UNIV_VIRQ_ERR
) {

1957 #ifde‡
BSP_PIC_DO_EOI


1958 
löãn
 &~
msk
;

1960 
	`vmeUnivî£I¡DißbÀ
(
lvl
);

1962 
	`¥ötk
("vmeUnivî£ ISR:Éº‹Ñód from STATIDÑegi°î; (Àvñ: %iËSTATID: 0x%08x -- DISABLING\n", 
lvl
, 
°©us
);

1963 } i‡(!(
ù
=
univî£HdlTbl
[
°©us
 & 
UNIV_VIRQ_STATID_MASK
])) {

1964 #ifde‡
BSP_PIC_DO_EOI


1965 
löãn
 &~
msk
;

1967 
	`vmeUnivî£I¡DißbÀ
(
lvl
);

1970 
	`¥ötk
("vmeUnivî£ ISR:Çÿh™dÀ∏ö°ÆÀd f‹Åhi†ve˘‹; (Àvñ: %iËSTATID: 0x%08x -- DISABLING\n", 
lvl
, 
°©us
);

1973 
ù
->
	`i§
(ù->
u§D©a
, 
°©us
&
UNIV_VIRQ_STATID_MASK
);

1976 #ifde‡
__PPC__


1978 
asm
 volatile("eieio");

1980 
	`READ_LE0
(
vmeUnivî£RegBa£
);

1981 #ifde‡
__PPC__


1983 
asm
 volatile("eieio");

1988 
	`vmeUnivî£WrôeReg
(
msk
, 
UNIV_REGOFF_LINT_STAT
);

1998 #ifde‡
BSP_PIC_DO_EOI


2001 
	`vmeUnivî£WrôeReg
(
löãn
, 
UNIV_REGOFF_LINT_EN
);

2003 
	}
}

2008 
	$my_no_›
(c⁄° 
πems_úq_c⁄√˘_d©a
 * 
¨g
)

2009 {
	}
}

2012 
	$my_isOn
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
¨g
)

2014  ()
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_EN
);

2015 
	}
}

2018 
	muni_pö
, 
	mpic_pö
;

2019 } 
	tI¡Rouã
;

2022 
	$c⁄√˘I§
(
sh¨ed
, 
πems_úq_hdl
 
i§
, 
pic_löe
, 
pic_pö
)

2024 
πems_úq_c⁄√˘_d©a
 
Øºggh
;

2025 
Øºggh
.
⁄
 = 
my_no_›
;

2026 
Øºggh
.
off
 = 
my_no_›
;

2027 
Øºggh
.
isOn
 = 
my_isOn
;

2028 
Øºggh
.
hdl
 = 
i§
;

2029 
Øºggh
.
h™dÀ
 = (
πems_úq_hdl_∑øm
)
pic_pö
;

2030 
Øºggh
.
«me
 = 
pic_löe
;

2032 i‡–
sh¨ed
 ) {

2033 #i‡
BSP_SHARED_HANDLER_SUPPORT
 > 0

2034 i‡(!
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
(&
Øºggh
))

2035 
	`BSP_∑nic
("unableÅo install vmeUniverse shared irq handler");

2037 
	`u¥ötf
(
°dîr
,"vmeUniverse: WARNING: your BSP doesn't support sharing interrupts\n");

2038 i‡(!
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
Øºggh
))

2039 
	`BSP_∑nic
("unableÅo install vmeUniverse irq handler");

2042 i‡(!
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
Øºggh
))

2043 
	`BSP_∑nic
("unableÅo install vmeUniverse irq handler");

2045 
	}
}

2047 #i‚de‡
BSP_EARLY_PROBE_VME


2048 
	#BSP_EARLY_PROBE_VME
(
addr
) \

2050 ((
PCI_DEVICE_UNIVERSEII
 << 16Ë| 
PCI_VENDOR_TUNDRA
 ) =
	`READ_LE
–((vﬁ©ûê
LERegi°î
*)(
addr
)), 0 ) \

2051 )

	)

2060 
	$m≠≥dAndProbed
(
vme_addr
, 
as
, *
p˝u_addr
)

2062 
j
;

2063 *
ªgty≥
 = (
as
 & 
VME_AM_MASK
Ë=
VME_AM_CSR
 ? "CSR" : "CRG";

2066 i‡–0 > (
j
 = 
	`xœãFödP‹t
(

2067 
vmeUnivî£0Ba£Addr
,

2069 
as
 | 
VME_MODE_AS_MATCH
,

2070 
vme_addr
,

2071 
p˝u_addr
 ) ) ) {

2072 
	`u¥ötf
(
°dîr
,"vmeUnivî£ - U«bÀÅÿföd m≠pög f‹ %†VME ba£ (0x%08x)\n", 
ªgty≥
, 
vme_addr
);

2073 
	`u¥ötf
(
°dîr
," in outbound windows.\n");

2076 *
p˝u_addr
 = 
	`BSP_PCI2LOCAL_ADDR
( *pcpu_addr );

2077 i‡–
	`BSP_EARLY_PROBE_VME
(*
p˝u_addr
) ) {

2078 
	`u¥ötf
(
°dîr
,"vmeUnivî£ - IRQ m™agî usög VME %†tÿÊush FIFO\n", 
ªgty≥
);

2079  
j
;

2081 
	`u¥ötf
(
°dîr
,"vmeUnivî£ - Found slŸ infÿbuàdëe˘i⁄ o‡univî£ i¿VME %†•a˚ faûed\n", 
ªgty≥
);

2085 
	}
}

2089 
	$vmeUnivî£In°ÆlIrqMgrA…
(
Êags
, 
uni_pö0
, 
pic_pö0
, ...)

2091 
rvÆ
;

2092 
va_li°
 
≠
;

2093 
	`va_°¨t
(
≠
, 
pic_pö0
);

2094 
rvÆ
 = 
	`vmeUnivî£In°ÆlIrqMgrVa
(
Êags
, 
uni_pö0
, 
pic_pö0
, 
≠
);

2095 
	`va_íd
(
≠
);

2096  
rvÆ
;

2097 
	}
}

2100 
	$vmeUnivî£In°ÆlIrqMgrVa
(
Êags
, 
uni_pö0
, 
pic_pö0
, 
va_li°
 
≠
)

2102 
i
,
j
, 
•ecülPö
, 
uni_pö
[
UNIV_NUM_WIRES
+1], 
pic_pö
[UNIV_NUM_WIRES];

2103 
˝u_ba£
, 
vme_ªg_ba£
;

2105 i‡(
vmeUnivî£IrqMgrIn°ÆÀd
)  -4;

2109 i‡–
uni_pö0
 < 0 || uni_pin0 > 7 )  -1;

2111 
uni_pö
[0] = 
uni_pö0
;

2112 
pic_pö
[0] = 
pic_pö0
 < 0 ? 
vmeUnivî£0PciIrqLöe
 :Öic_pin0;

2113 
i
 = 1;

2114  (
uni_pö
[
i
] = 
	`va_¨g
(
≠
, )) >= 0 ) {

2116 i‡–
i
 >
UNIV_NUM_WIRES
 ) {

2120 
pic_pö
[
i
] = 
	`va_¨g
(
≠
,);

2122 i‡–
uni_pö
[
i
] > 7 ) {

2125 i‡–
pic_pö
[
i
] < 0 ) {

2128 
i
++;

2132  
i
=0; 
uni_pö
[i] >= 0; i++ ) {

2133  
j
=
i
+1; 
uni_pö
[j] >= 0; j++ ) {

2134 i‡–
uni_pö
[
j
] =uni_pö[
i
] )  -6;

2135 i‡–
pic_pö
[
j
] =pic_pö[
i
] )  -7;

2139 i‡–
Êags
 & 
VMEUNIVERSE_IRQ_MGR_FLAG_PW_WORKAROUND
 ) {

2142 
	`u¥ötf
(
°dîr
,"vmeUniverse IRQ manager:Üooking forÑegisters on VME...\n");

2148 i‡––
i
 = ((
	`READ_LE
–
vmeUnivî£0Ba£Addr
, 
UNIV_REGOFF_VCSR_BS
 ) >> 27) & 0x1f ) ) > 0 ) {

2149 
	`u¥ötf
(
°dîr
,"TryingÅo find CSR on VME...\n");

2150 
vme_ªg_ba£
 = 
i
*0x80000 + 
UNIV_CSR_OFFSET
;

2151 
i
 = 
	`m≠≥dAndProbed
–
vme_ªg_ba£
, 
VME_AM_CSR
 , &
˝u_ba£
);

2152 i‡–
i
 >= 0 )

2153 
vmeUnivî£RegCSR
 = 1;

2155 
i
 = -1;

2158 i‡–-1 =
i
 ) {

2160 
	`u¥ötf
(
°dîr
,"TryingÅo find CRG on VME...\n");

2164 i‡–
UNIV_VRAI_CTL_EN
 & (
j
 = 
	`READ_LE
–
vmeUnivî£0Ba£Addr
, 
UNIV_REGOFF_VRAI_CTL
 )) ) {

2165  
j
 & 
UNIV_VRAI_CTL_VAS_MSK
 ) {

2166 
UNIV_VRAI_CTL_VAS_A16
 : 
i
 = 
VME_AM_SUP_SHORT_IO
; ;

2167 
UNIV_VRAI_CTL_VAS_A24
 : 
i
 = 
VME_AM_STD_SUP_DATA
; ;

2168 
UNIV_VRAI_CTL_VAS_A32
 : 
i
 = 
VME_AM_EXT_SUP_DATA
; ;

2172 
vme_ªg_ba£
 = 
	`READ_LE
–
vmeUnivî£0Ba£Addr
, 
UNIV_REGOFF_VRAI_BS
 ) & ~(
UNIV_CRG_SIZE
 - 1);

2175 i‡–-1 =
i
 ) {

2177 
i
 = 
	`m≠≥dAndProbed
–
vme_ªg_ba£
, (ò& 
VME_AM_MASK
), &
˝u_ba£
 );

2181 i‡–
i
 < 0 ) {

2182 i‡–
	`m≠OvîAŒ
–
vmeUnivî£0Ba£Addr
, 1, 
hasPWENWödow
, 0 ) ) {

2183 
	`u¥ötf
(
°dîr
,"vmeUniverse IRQ manager - BSP configurationÉrror:ÑegistersÇot found on VME\n");

2184 
	`u¥ötf
(
°dîr
,"(should open outbound windowÅo CSR space or map CRG [vmeUniverseMapCRG()])\n");

2185 
	`u¥ötf
(
°dîr
,"Falling backÅo PCI but you mightÉxperience spurious VME interrupts;ÑeadáÑegister\n");

2186 
	`u¥ötf
(
°dîr
,"back from user ISRÅo flush universe FIFOásá work-around or\n");

2187 
	`u¥ötf
(
°dîr
,"make sure ISRáccesses device usingá window withÖosted-writes disabled\n");

2189 
	`u¥ötf
(
°dîr
,"vmeUniverse IRQ manager -ÑegistersÇot found on VME; falling backÅo PCI\n");

2191 
vmeUnivî£RegBa£
 = 
vmeUnivî£0Ba£Addr
;

2192 
vmeUnivî£RegP‹t
 = -1;

2194 
vmeUnivî£RegBa£
 = (vﬁ©ûê
LERegi°î
*)
˝u_ba£
;

2195 
vmeUnivî£RegP‹t
 = 
i
;

2198 
vmeUnivî£RegBa£
 = 
vmeUnivî£0Ba£Addr
;

2199 
vmeUnivî£RegP‹t
 = -1;

2203 i‡–
pic_pö
[0] >0 && 
vmeUnivî£0PciIrqLöe
 !=Öic_pin[0] ) {

2204 
	`u¥ötf
(
°dîr
,"Overriding main IRQÜine PCI info with %d\n",

2205 
pic_pö
[0]);

2206 
vmeUnivî£0PciIrqLöe
=
pic_pö
[0];

2209  
i
 = 0; 
uni_pö
[i] >= 0; i++ ) {

2211 
univî£_wúe
[
i
] = 
uni_pö
[i] + 1;

2212 
	`c⁄√˘I§
((
Êags
 & 
VMEUNIVERSE_IRQ_MGR_FLAG_SHARED
), 
univî£VMEISR
, 
pic_pö
[
i
], i);

2215 
•ecülPö
 = 
uni_pö
[1] >= 0 ? 1 : 0;

2220 
vmeUnivî£IrqMgrIn°ÆÀd
=1;

2223  
i
=1; i<8; i++ )

2224 
	`vmeUnivî£I¡Rouã
–
i
, 0 );

2225  
i
=
UNIV_VOWN_INT_VEC
; i<=
UNIV_LM3_INT_VEC
; i++ ) {

2226 i‡–
	`vmeUnivî£I¡Rouã
–
i
, 
•ecülPö
 ) )

2227 
	`¥ötk
("RoutögÜv»%ò-> wúê# %òÁûed\n", 
i
, 
•ecülPö
);

2231 
	}
}

2234 
	$vmeUnivî£In°ÆlIrqMgr
(
vmeIrqUnivOut
,

2235 
vmeIrqPicLöe
,

2236 
•ecülIrqUnivOut
,

2237 
•ecülIrqPicLöe
)

2239  
	`vmeUnivî£In°ÆlIrqMgrA…
(

2241 
vmeIrqUnivOut
, 
vmeIrqPicLöe
,

2242 
•ecülIrqUnivOut
, 
•ecülIrqPicLöe
,

2244 
	}
}

2247 
	$vmeUnivî£In°ÆlISR
(
ve˘‹
, 
VmeUnivî£ISR
 
hdl
, *
¨g
)

2249 
Univî£IRQE¡ry
 
ù
;

2250 
Êags
;

2251 vﬁ©ûê
Univî£IRQE¡ry
 *
≥
;

2253 i‡(
ve˘‹
>(
univî£HdlTbl
)/(univî£HdlTbl[0]Ë|| !
vmeUnivî£IrqMgrIn°ÆÀd
)

2256 
≥
 = 
univî£HdlTbl
 + 
ve˘‹
;

2258 i‡(*
≥
 || !(
ù
=(
Univî£IRQE¡ry
)
	`mÆloc
((
Univî£IRQE¡ryRec
))))

2261 
ù
->
i§
=
hdl
;

2262 
ù
->
u§D©a
=
¨g
;

2264 
	`πems_öãºu±_dißbÀ
(
Êags
);

2265 i‡–*
≥
 ) {

2267 
	`πems_öãºu±_íabÀ
(
Êags
);

2268 
	`‰ì
(
ù
);

2271 *
≥
 = 
ù
;

2272 
	`πems_öãºu±_íabÀ
(
Êags
);

2274 
	}
}

2277 
	$vmeUnivî£RemoveISR
(
ve˘‹
, 
VmeUnivî£ISR
 
hdl
, *
¨g
)

2279 
Univî£IRQE¡ry
 
ù
;

2280 
Êags
;

2281 vﬁ©ûê
Univî£IRQE¡ry
 *
≥
;

2283 i‡(
ve˘‹
>(
univî£HdlTbl
)/(univî£HdlTbl[0]Ë|| !
vmeUnivî£IrqMgrIn°ÆÀd
)

2286 
≥
 = 
univî£HdlTbl
 + 
ve˘‹
;

2288 
	`πems_öãºu±_dißbÀ
(
Êags
);

2289 
ù
 = *
≥
;

2290 i‡(!
ù
 || ip->
i§
!=
hdl
 || ip->
u§D©a
!=
¨g
) {

2291 
	`πems_öãºu±_íabÀ
(
Êags
);

2294 *
≥
 = 0;

2295 
	`πems_öãºu±_íabÀ
(
Êags
);

2296 
	`‰ì
(
ù
);

2298 
	}
}

2301 
	$ötDoEnDis
(
Àvñ
, 
dis
)

2303 
Êags
, 
v
;

2304 
shi·
;

2306 i‡–! 
vmeUnivî£IrqMgrIn°ÆÀd
 || (
shi·
 = 
	`lvl2bô
(
Àvñ
)) < 0 )

2309 
v
 = 1<<
shi·
;

2311 i‡–!
dis
 )

2312  
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_EN
Ë& 
v
 ? 1 : 0;

2314 
	`πems_öãºu±_dißbÀ
(
Êags
);

2315 i‡–
dis
<0 )

2316 
	`vmeUnivî£WrôeReg
–
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_EN
Ë& ~
v
, UNIV_REGOFF_LINT_EN );

2318 
	`vmeUnivî£WrôeReg
–
	`vmeUnivî£RódReg
(
UNIV_REGOFF_LINT_EN
Ë| 
v
, UNIV_REGOFF_LINT_EN );

2320 
	`πems_öãºu±_íabÀ
(
Êags
);

2322 
	}
}

2325 
	$vmeUnivî£I¡E«bÀ
(
Àvñ
)

2327  
	`ötDoEnDis
(
Àvñ
, 1);

2328 
	}
}

2331 
	$vmeUnivî£I¡DißbÀ
(
Àvñ
)

2333  
	`ötDoEnDis
(
Àvñ
, -1);

2334 
	}
}

2337 
	$vmeUnivî£I¡IsE«bÀd
(
Àvñ
)

2339  
	`ötDoEnDis
(
Àvñ
, 0);

2340 
	}
}

2345 
πems_id
 
	mq
;

2346 
	ml
;

2347 } 
	tLo›backT°Args
;

2350 
	$lo›backT°I§
(*
¨g
, 
ve˘‹
)

2352 
Lo›backT°Args
 *
∑
 = 
¨g
;

2353 i‡–
RTEMS_SUCCESSFUL
 !
	`πems_mesßge_queue_£nd
(
∑
->
q
, (*)&
ve˘‹
, (vector)) ) {

2355 
	`¥ötk
("vmeUnivî£I¡Lo›backT°: (ISRËmesßgêqueuêfuŒ / ovîru¿? dißblög IRQÜevñ %i\n", 
∑
->
l
);

2356 
	`vmeUnivî£I¡DißbÀ
(
∑
->
l
);

2358 
	}
}

2361 
	$vmeUnivî£I¡Lo›backT°
(
Àvñ
, 
ve˘‹
)

2363 
DFLT_BASE
;

2364 
πems_°©us_code
 
sc
;

2365 
πems_id
 
q
 = 0;

2366 
ö°ÆÀd
 = 0;

2367 
i
, 
îr
 = 0;

2368 
doDißbÀ
 = 0;

2369 
size_t
 
size
;

2370 
msg
;

2371 * 
úqfmt
 = "VME IRQ @vector %3i %s";

2372 * 
ückfmt
 = "VME IACK %s";

2373 
Lo›backT°Args
 
a
;

2375 
	`CHECK_DFLT_BASE
(
ba£
);

2378 i‡–
Àvñ
 < 1 ||Üevñ > 7 || 
ve˘‹
 > 255 ) {

2379 
	`Ârötf
(
°dîr
,"InvalidÜevel or vectorárgument\n");

2383 i‡–(
ve˘‹
 & 1) ) {

2384 
	`Ârötf
(
°dîr
,"Software interrupts can only useÉven-numbered vectors, sorry.\n");

2388 i‡–
	`UNIV_REV
(
ba£
Ë< 2 && 
ve˘‹
 != 0 ) {

2389 
	`Ârötf
(
°dîr
,

2391 
	`Ârötf
(
°dîr
,

2393 
	`Ârötf
(
°dîr
,

2399 i‡–
RTEMS_SUCCESSFUL
 !(
sc
=
	`πems_mesßge_queue_¸óã
(

2400 
	`πems_buûd_«me
('t' ,'U','I','I'),

2404 &
q
)) ) {

2405 
	`πems_îr‹
(
sc
, "vmeUniverseIntLoopbackTst: UnableÅo create message queue");

2406 
baû
;

2409 
a
.
q
 = q;

2410 
a
.
l
 = 
Àvñ
;

2413 i‡–
	`vmeUnivî£In°ÆlISR
(
ve˘‹
, 
lo›backT°I§
, (*)&
a
) ) {

2414 
	`Ârötf
(
°dîr
,"U«bÀÅÿö°Æ»VME ISRÅÿve˘‹ %i\n",
ve˘‹
);

2415 
baû
;

2417 
ö°ÆÀd
++;

2418 i‡–
	`vmeUnivî£In°ÆlISR
(
UNIV_VME_SW_IACK_INT_VEC
, 
lo›backT°I§
, (*)&
a
) ) {

2419 
	`Ârötf
(
°dîr
,"U«bÀÅÿö°Æ»VME ISRÅÿIACK s≥cü»ve˘‹ %i\n",
UNIV_VME_SW_IACK_INT_VEC
);

2420 
baû
;

2422 
ö°ÆÀd
++;

2424 i‡–!
	`vmeUnivî£I¡IsE«bÀd
(
Àvñ
Ë&& 0==
	`vmeUnivî£I¡E«bÀ
(level) )

2425 
doDißbÀ
 = 1;

2428 
	`vmeUnivî£WrôeReg
–
UNIV_LINT_STAT_SW_IACK
, 
UNIV_REGOFF_LINT_STAT
 );

2430 i‡–
	`vmeUnivî£I¡E«bÀ
–
UNIV_VME_SW_IACK_INT_VEC
 ) ) {

2431 
	`Ârötf
(
°dîr
,"UnableÅoÉnable IACK interrupt\n");

2432 
baû
;

2435 
	`¥ötf
("vmeUniverse VME interruptÜoopbackÅest; STARTING...\n");

2436 
	`¥ötf
(" -->ás£πög VME IRQÜevñ %i\n", 
Àvñ
);

2437 
	`vmeUnivî£I¡Rai£
(
Àvñ
, 
ve˘‹
);

2439  
i
 = 0; i< 3; i++ ) {

2440 
sc
 = 
	`πems_mesßge_queue_ª˚ive
(

2441 
q
,

2442 &
msg
,

2443 &
size
,

2444 
RTEMS_WAIT
,

2446 i‡–
sc
 ) {

2447 i‡–
RTEMS_TIMEOUT
 =
sc
 && 
i
>1 ) {

2449 
sc
 = 0;

2451 
	`πems_îr‹
(
sc
,"Error waiting for interrupts");

2455 i‡–
msg
 =
ve˘‹
 ) {

2456 i‡–!
úqfmt
 ) {

2457 
	`¥ötf
("Excess VME IRQÑeceived ?? -- BAD\n");

2458 
îr
 = 1;

2460 
	`¥ötf
(
úqfmt
, 
ve˘‹
, "received -- PASSED\n");

2461 
úqfmt
 = 0;

2463 } i‡–
msg
 =
UNIV_VME_SW_IACK_INT_VEC
 ) {

2464 i‡–!
ückfmt
 ) {

2465 
	`¥ötf
("Excess VME IACKÑeceived ?? -- BAD\n");

2466 
îr
 = 1;

2468 
	`¥ötf
(
ückfmt
, "received -- PASSED\n");

2469 
ückfmt
 = 0;

2472 
	`¥ötf
("Unknow¿IRQ (ve˘‹ %luËª˚ived -- BAD\n", 
msg
);

2473 
îr
 = 1;

2479 i‡–
úqfmt
 ) {

2480 
	`¥ötf
(
úqfmt
,
ve˘‹
, "MISSED -- BAD\n");

2481 
îr
 = 1;

2483 i‡–
ückfmt
 ) {

2484 
	`¥ötf
(
ückfmt
, "MISSED -- BAD\n");

2485 
îr
 = 1;

2488 
	`¥ötf
("FINISHED.\n");

2490 
baû
:

2491 i‡–
doDißbÀ
 )

2492 
	`vmeUnivî£I¡DißbÀ
(
Àvñ
);

2493 
	`vmeUnivî£I¡DißbÀ
–
UNIV_VME_SW_IACK_INT_VEC
 );

2494 i‡–
ö°ÆÀd
 > 0 )

2495 
	`vmeUnivî£RemoveISR
(
ve˘‹
, 
lo›backT°I§
, (*)&
a
);

2496 i‡–
ö°ÆÀd
 > 1 )

2497 
	`vmeUnivî£RemoveISR
(
UNIV_VME_SW_IACK_INT_VEC
, 
lo›backT°I§
, (*)&
a
);

2498 i‡–
q
 )

2499 
	`πems_mesßge_queue_dñëe
(
q
);

2501  
sc
 ? s¯: 
îr
;

2502 
	}
}

	@src/lib/libbsp/shared/vmeUniverse/vmeUniverse.h

9 #i‚de‡
VME_UNIVERSE_UTIL_H


10 
	#VME_UNIVERSE_UTIL_H


	)

65 #ifde‡
__vxw‹ks


66 
	~<vme.h
>

69 
	~<b•/vme_am_defs.h
>

77 
	#VME_MODE_MATCH_MASK
 (3<<30)

	)

78 
	#VME_MODE_EXACT_MATCH
 (2<<30Ë

	)

79 
	#VME_MODE_AS_MATCH
 (1<<30Ë

	)

82 
	tLERegi°î
;

88 
	sVmeUnivî£DMAPackëRec_
 {

89 
LERegi°î
 
d˘l
 
__©åibuã__
((
Æig√d
(32)));

90 
LERegi°î
 
dtbc
 
__©åibuã__
((
∑cked
));

91 
LERegi°î
 
dœ
 
__©åibuã__
((
∑cked
));

92 
LERegi°î
 
dummy1
 
__©åibuã__
((
∑cked
));

93 
LERegi°î
 
dva
 
__©åibuã__
((
∑cked
));

94 
LERegi°î
 
dummy2
 
__©åibuã__
((
∑cked
));

95 
LERegi°î
 
d˝p
 
__©åibuã__
((
∑cked
));

96 
LERegi°î
 
dummy3
 
__©åibuã__
((
∑cked
));

97 } 
	tVmeUnivî£DMAPackëRec
, *
	tVmeUnivî£DMAPackë
;

100 
	#UNIV_REGOFF_PCI_CSR
 0x4

	)

101 
	#UNIV_PCI_CSR_D_PE
 (1<<31Ë

	)

102 
	#UNIV_PCI_CSR_S_SERR
 (1<<30Ë

	)

103 
	#UNIV_PCI_CSR_R_MA
 (1<<29Ë

	)

104 
	#UNIV_PCI_CSR_R_TA
 (1<<28Ë

	)

105 
	#UNIV_PCI_CSR_S_TA
 (1<<27Ë

	)

106 
	#UNIV_PCI_CSR_DEVSEL_MASK
 (3<<25Ë

	)

107 
	#UNIV_PCI_CSR_DP_D
 (1<<24Ë

	)

108 
	#UNIV_PCI_CSR_TFBBC
 (1<<23Ë

	)

109 
	#UNIV_PCI_CSR_MFBBC
 (1<<9Ë

	)

110 
	#UNIV_PCI_CSR_SERR_EN
 (1<<8Ë

	)

111 
	#UNIV_PCI_CSR_WAIT
 (1<<7Ë

	)

112 
	#UNIV_PCI_CSR_PERESP
 (1<<6Ë

	)

113 
	#UNIV_PCI_CSR_VGAPS
 (1<<5Ë

	)

114 
	#UNIV_PCI_CSR_MWI_EN
 (1<<4Ë

	)

115 
	#UNIV_PCI_CSR_SC
 (1<<3Ë

	)

116 
	#UNIV_PCI_CSR_BM
 (1<<2Ë

	)

117 
	#UNIV_PCI_CSR_MS
 (1<<1Ë

	)

118 
	#UNIV_PCI_CSR_IOS
 (1<<0Ë

	)

121 
	#UNIV_REGOFF_SCYC_CTL
 0x170

	)

122 
	#UNIV_SCYC_CTL_LAS_IO
 (1<<2Ë

	)

123 
	#UNIV_SCYC_CTL_SCYC_RMW
 (1<<0Ë

	)

124 
	#UNIV_SCYC_CTL_SCYC_ADOH
 (2<<0Ë

	)

127 
	#UNIV_REGOFF_SCYC_ADDR
 0x174

	)

130 
	#UNIV_REGOFF_SCYC_EN
 0x178

	)

133 
	#UNIV_REGOFF_SCYC_CMP
 0x17¯

	)

136 
	#UNIV_REGOFF_SCYC_SWP
 0x180

	)

139 
	#UNIV_REGOFF_LMISC
 0x184

	)

140 
	#UNIV_LMISC_CRT_MASK
 (7<<28Ë

	)

141 
	#UNIV_LMISC_CRT_INF
 (0<<28Ë

	)

142 
	#UNIV_LMISC_CRT_128_US
 (1<<28Ë

	)

143 
	#UNIV_LMISC_CRT_256_US
 (2<<28Ë

	)

144 
	#UNIV_LMISC_CRT_512_US
 (3<<28Ë

	)

145 
	#UNIV_LMISC_CRT_1024_US
 (4<<28Ë

	)

146 
	#UNIV_LMISC_CRT_2048_US
 (5<<28Ë

	)

147 
	#UNIV_LMISC_CRT_4096_US
 (6<<28Ë

	)

149 
	#UNIV_LMISC_CWT_MASK
 (7<<24Ë

	)

150 
	#UNIV_LMISC_CWT_DISABLE
 0

	)

151 
	#UNIV_LMISC_CWT_16
 (1<<24Ë

	)

152 
	#UNIV_LMISC_CWT_32
 (2<<24Ë

	)

153 
	#UNIV_LMISC_CWT_64
 (3<<24Ë

	)

154 
	#UNIV_LMISC_CWT_128
 (4<<24Ë

	)

155 
	#UNIV_LMISC_CWT_256
 (5<<24Ë

	)

156 
	#UNIV_LMISC_CWT_512
 (6<<24Ë

	)

159 
	#UNIV_REGOFF_L_CMDERR
 0x18c

	)

160 
	#UNIV_L_CMDERR_CMDERR
(
ªg
Ë((‘eg)>>28)&0xfË

	)

161 
	#UNIV_L_CMDERR_M_ERR
 (1<<27Ë

	)

162 
	#UNIV_L_CMDERR_L_STAT
 (1<<23Ë

	)

165 
	#UNIV_REGOFF_LAERR
 0x190

	)

167 
	#UNIV_REGOFF_DCTL
 0x200

	)

168 
	#UNIV_DCTL_L2V
 (1<<31Ë

	)

169 
	#UNIV_DCTL_VDW_MSK
 (3<<22Ë

	)

170 
	#UNIV_DCTL_VDW_8
 (0<<22Ë

	)

171 
	#UNIV_DCTL_VDW_16
 (1<<22Ë

	)

172 
	#UNIV_DCTL_VDW_32
 (2<<22Ë

	)

173 
	#UNIV_DCTL_VDW_64
 (3<<22Ë

	)

174 
	#UNIV_DCTL_VAS_MSK
 (7<<16Ë

	)

175 
	#UNIV_DCTL_VAS_A16
 (0<<16Ë

	)

176 
	#UNIV_DCTL_VAS_A24
 (1<<16Ë

	)

177 
	#UNIV_DCTL_VAS_A32
 (2<<16Ë

	)

178 
	#UNIV_DCTL_PGM_MSK
 (3<<14Ë

	)

179 
	#UNIV_DCTL_PGM
 (1<<14Ë

	)

180 
	#UNIV_DCTL_SUPER_MSK
 (3<<12Ë

	)

181 
	#UNIV_DCTL_SUPER
 (1<<12Ë

	)

182 
	#UNIV_DCTL_NO_VINC
 (1<<9Ë

	)

183 
	#UNIV_DCTL_VCT
 (1<<8Ë

	)

184 
	#UNIV_DCTL_LD64EN
 (1<<7Ë

	)

187 
	#UNIV_REGOFF_DTBC
 0x204

	)

189 
	#UNIV_REGOFF_DLA
 0x208

	)

193 
	#UNIV_REGOFF_DVA
 0x210

	)

198 
	#UNIV_REGOFF_DCPP
 0x218

	)

200 
	#UNIV_DCPP_IMG_NULL
 (1<<0Ë

	)

201 
	#UNIV_DCPP_IMG_PROCESSED
 (1<<1Ë

	)

204 
	#UNIV_REGOFF_DGCS
 0x220

	)

205 
	#UNIV_DGCS_GO
 (1<<31Ë

	)

206 
	#UNIV_DGCS_STOP_REQ
 (1<<30Ë

	)

207 
	#UNIV_DGCS_HALT_REQ
 (1<<29Ë

	)

208 
	#UNIV_DGCS_CHAIN
 (1<<27Ë

	)

209 
	#UNIV_DGCS_VON_MSK
 (7<<20Ë

	)

210 
	#UNIV_DGCS_VON_DONE
 (0<<20Ë

	)

211 
	#UNIV_DGCS_VON_256
 (1<<20Ë

	)

212 
	#UNIV_DGCS_VON_512
 (2<<20Ë

	)

213 
	#UNIV_DGCS_VON_1024
 (3<<20Ë

	)

214 
	#UNIV_DGCS_VON_2048
 (4<<20Ë

	)

215 
	#UNIV_DGCS_VON_4096
 (5<<20Ë

	)

216 
	#UNIV_DGCS_VON_8192
 (6<<20Ë

	)

217 
	#UNIV_DGCS_VON_16384
 (7<<20Ë

	)

218 
	#UNIV_DGCS_VOFF_MSK
 (15<<16Ë

	)

219 
	#UNIV_DGCS_VOFF_0_US
 (0<<16Ë

	)

220 
	#UNIV_DGCS_VOFF_2_US
 (8<<16Ë

	)

221 
	#UNIV_DGCS_VOFF_4_US
 (9<<16Ë

	)

222 
	#UNIV_DGCS_VOFF_8_US
 (10<<16)

	)

223 
	#UNIV_DGCS_VOFF_16_US
 (1<<16Ë

	)

224 
	#UNIV_DGCS_VOFF_32_US
 (2<<16Ë

	)

225 
	#UNIV_DGCS_VOFF_64_US
 (3<<16Ë

	)

226 
	#UNIV_DGCS_VOFF_128_US
 (4<<16Ë

	)

227 
	#UNIV_DGCS_VOFF_256_US
 (5<<16Ë

	)

228 
	#UNIV_DGCS_VOFF_512_US
 (6<<16Ë

	)

229 
	#UNIV_DGCS_VOFF_1024_US
 (7<<16Ë

	)

231 
	#UNIV_DGCS_ACT
 (1<<15Ë

	)

232 
	#UNIV_DGCS_STOP
 (1<<14Ë

	)

233 
	#UNIV_DGCS_HALT
 (1<<13Ë

	)

234 
	#UNIV_DGCS_DONE
 (1<<11Ë

	)

235 
	#UNIV_DGCS_LERR
 (1<<10Ë

	)

236 
	#UNIV_DGCS_VERR
 (1<<9Ë

	)

237 
	#UNIV_DGCS_P_ERR
 (1<<8Ë

	)

238 
	#UNIV_DGCS_STATUS_CLEAR
\

239 (
UNIV_DGCS_ACT
|
UNIV_DGCS_STOP
|
UNIV_DGCS_HALT
|\

240 
UNIV_DGCS_DONE
|
UNIV_DGCS_LERR
|
UNIV_DGCS_VERR
|
UNIV_DGCS_P_ERR
)

	)

241 
	#UNIV_DGCS_P_ERR
 (1<<8Ë

	)

243 
	#UNIV_DGCS_INT_STOP
 (1<<6Ë

	)

244 
	#UNIV_DGCS_INT_HALT
 (1<<5Ë

	)

245 
	#UNIV_DGCS_INT_DONE
 (1<<3Ë

	)

246 
	#UNIV_DGCS_INT_LERR
 (1<<2Ë

	)

247 
	#UNIV_DGCS_INT_VERR
 (1<<1Ë

	)

248 
	#UNIV_DGCS_INT_P_ERR
 (1<<0Ë

	)

249 
	#UNIV_DGCS_INT_MSK
 (0x0000006fË

	)

252 
	#UNIV_REGOFF_D_LLUE
 0x224

	)

253 
	#UNIV_D_LLUE_UPDATE
 (1<<31)

	)

257 
	#UNIV_REGOFF_LINT_EN
 0x300

	)

258 
	#UNIV_LINT_EN_LM3
 (1<<23Ë

	)

259 
	#UNIV_LINT_EN_LM2
 (1<<22Ë

	)

260 
	#UNIV_LINT_EN_LM1
 (1<<21Ë

	)

261 
	#UNIV_LINT_EN_LM0
 (1<<20Ë

	)

262 
	#UNIV_LINT_EN_MBOX3
 (1<<19Ë

	)

263 
	#UNIV_LINT_EN_MBOX2
 (1<<18Ë

	)

264 
	#UNIV_LINT_EN_MBOX1
 (1<<17Ë

	)

265 
	#UNIV_LINT_EN_MBOX0
 (1<<16Ë

	)

266 
	#UNIV_LINT_EN_ACFAIL
 (1<<15Ë

	)

267 
	#UNIV_LINT_EN_SYSFAIL
 (1<<14Ë

	)

268 
	#UNIV_LINT_EN_SW_INT
 (1<<13Ë

	)

269 
	#UNIV_LINT_EN_SW_IACK
 (1<<12Ë

	)

270 
	#UNIV_LINT_EN_VERR
 (1<<10Ë

	)

271 
	#UNIV_LINT_EN_LERR
 (1<<9Ë

	)

272 
	#UNIV_LINT_EN_DMA
 (1<<8Ë

	)

273 
	#UNIV_LINT_EN_VIRQ7
 (1<<7Ë

	)

274 
	#UNIV_LINT_EN_VIRQ6
 (1<<6Ë

	)

275 
	#UNIV_LINT_EN_VIRQ5
 (1<<5Ë

	)

276 
	#UNIV_LINT_EN_VIRQ4
 (1<<4Ë

	)

277 
	#UNIV_LINT_EN_VIRQ3
 (1<<3Ë

	)

278 
	#UNIV_LINT_EN_VIRQ2
 (1<<2Ë

	)

279 
	#UNIV_LINT_EN_VIRQ1
 (1<<1Ë

	)

280 
	#UNIV_LINT_EN_VOWN
 (1<<0Ë

	)

283 
	#UNIV_REGOFF_LINT_STAT
 0x304

	)

284 
	#UNIV_LINT_STAT_LM3
 (1<<23Ë

	)

285 
	#UNIV_LINT_STAT_LM2
 (1<<22Ë

	)

286 
	#UNIV_LINT_STAT_LM1
 (1<<21Ë

	)

287 
	#UNIV_LINT_STAT_LM0
 (1<<20Ë

	)

288 
	#UNIV_LINT_STAT_MBOX3
 (1<<19Ë

	)

289 
	#UNIV_LINT_STAT_MBOX2
 (1<<18Ë

	)

290 
	#UNIV_LINT_STAT_MBOX1
 (1<<17Ë

	)

291 
	#UNIV_LINT_STAT_MBOX0
 (1<<16Ë

	)

292 
	#UNIV_LINT_STAT_ACFAIL
 (1<<15Ë

	)

293 
	#UNIV_LINT_STAT_SYSFAIL
 (1<<14Ë

	)

294 
	#UNIV_LINT_STAT_SW_INT
 (1<<13Ë

	)

295 
	#UNIV_LINT_STAT_SW_IACK
 (1<<12Ë

	)

296 
	#UNIV_LINT_STAT_VERR
 (1<<10Ë

	)

297 
	#UNIV_LINT_STAT_LERR
 (1<<9Ë

	)

298 
	#UNIV_LINT_STAT_DMA
 (1<<8Ë

	)

299 
	#UNIV_LINT_STAT_VIRQ7
 (1<<7Ë

	)

300 
	#UNIV_LINT_STAT_VIRQ6
 (1<<6Ë

	)

301 
	#UNIV_LINT_STAT_VIRQ5
 (1<<5Ë

	)

302 
	#UNIV_LINT_STAT_VIRQ4
 (1<<4Ë

	)

303 
	#UNIV_LINT_STAT_VIRQ3
 (1<<3Ë

	)

304 
	#UNIV_LINT_STAT_VIRQ2
 (1<<2Ë

	)

305 
	#UNIV_LINT_STAT_VIRQ1
 (1<<1Ë

	)

306 
	#UNIV_LINT_STAT_VOWN
 (1<<0Ë

	)

307 
	#UNIV_LINT_STAT_CLR
 (0xfff7ff)

	)

310 
	#UNIV_REGOFF_LINT_MAP0
 0x308

	)

311 
	#UNIV_LINT_MAP0_VIRQ7
(
löt
Ë((÷öt)&0x7)<<(7*4))

	)

312 
	#UNIV_LINT_MAP0_VIRQ6
(
löt
Ë((÷öt)&0x7)<<(6*4))

	)

313 
	#UNIV_LINT_MAP0_VIRQ5
(
löt
Ë((÷öt)&0x7)<<(5*4))

	)

314 
	#UNIV_LINT_MAP0_VIRQ4
(
löt
Ë((÷öt)&0x7)<<(4*4))

	)

315 
	#UNIV_LINT_MAP0_VIRQ3
(
löt
Ë((÷öt)&0x7)<<(3*4))

	)

316 
	#UNIV_LINT_MAP0_VIRQ2
(
löt
Ë((÷öt)&0x7)<<(2*4))

	)

317 
	#UNIV_LINT_MAP0_VIRQ1
(
löt
Ë((÷öt)&0x7)<<(1*4))

	)

318 
	#UNIV_LINT_MAP0_VOWN
(
löt
Ë((÷öt)&0x7)<<(0*4))

	)

320 
	#UNIV_REGOFF_LINT_MAP1
 0x30¯

	)

321 
	#UNIV_LINT_MAP1_ACFAIL
(
löt
Ë((÷öt)&0x7)<<(7*4))

	)

322 
	#UNIV_LINT_MAP1_SYSFAIL
(
löt
Ë((÷öt)&0x7)<<(6*4))

	)

323 
	#UNIV_LINT_MAP1_SW_INT
(
löt
Ë((÷öt)&0x7)<<(5*4))

	)

324 
	#UNIV_LINT_MAP1_SW_IACK
(
löt
Ë((÷öt)&0x7)<<(4*4))

	)

325 
	#UNIV_LINT_MAP1_VERR
(
löt
Ë((÷öt)&0x7)<<(2*4))

	)

326 
	#UNIV_LINT_MAP1_LERR
(
löt
Ë((÷öt)&0x7)<<(1*4))

	)

327 
	#UNIV_LINT_MAP1_DMA
(
löt
Ë((÷öt)&0x7)<<(0*4))

	)

330 
	#UNIV_REGOFF_VINT_EN
 0x310

	)

331 
	#UNIV_VINT_EN_DISABLE_ALL
 0

	)

332 
	#UNIV_VINT_EN_SWINT
 (1<<12)

	)

333 
	#UNIV_VINT_EN_SWINT_LVL
(
l
Ë(1<<((÷)&7)+24)Ë

	)

337 
	#UNIV_REGOFF_VINT_STAT
 0x314

	)

338 
	#UNIV_VINT_STAT_LINT
(
löt
Ë(1<<(÷öt)&7))

	)

339 
	#UNIV_VINT_STAT_LINT_MASK
 (0xff)

	)

340 
	#UNIV_VINT_STAT_CLR
 (0x„0f17ff)

	)

341 
	#UNIV_VINT_STAT_SWINT
(
l
Ë(1<<((÷)&7)+24))

	)

343 
	#UNIV_REGOFF_VINT_MAP0
 0x318

	)

345 
	#UNIV_REGOFF_VINT_MAP1
 0x31¯

	)

346 
	#UNIV_VINT_MAP1_SWINT
(
Àvñ
Ë((÷evñ)&0x7)<<16)

	)

352 
	#UNIV_REGOFF_VINT_STATID
 0x320

	)

353 
	#UNIV_VINT_STATID
(
id
Ë((id)<<24)

	)

355 
	#UNIV_REGOFF_VIRQ1_STATID
 0x324

	)

356 
	#UNIV_REGOFF_VIRQ2_STATID
 0x328

	)

357 
	#UNIV_REGOFF_VIRQ3_STATID
 0x32¯

	)

358 
	#UNIV_REGOFF_VIRQ4_STATID
 0x330

	)

359 
	#UNIV_REGOFF_VIRQ5_STATID
 0x334

	)

360 
	#UNIV_REGOFF_VIRQ6_STATID
 0x338

	)

361 
	#UNIV_REGOFF_VIRQ7_STATID
 0x33¯

	)

362 
	#UNIV_VIRQ_ERR
 (1<<8Ë

	)

363 
	#UNIV_VIRQ_STATID_MASK
 (0xff)

	)

365 
	#UNIV_REGOFF_LINT_MAP2
 0x340

	)

366 
	#UNIV_LINT_MAP2_LM3
(
löt
Ë((÷öt)&0x7)<<7*4Ë

	)

367 
	#UNIV_LINT_MAP2_LM2
(
löt
Ë((÷öt)&0x7)<<6*4Ë

	)

368 
	#UNIV_LINT_MAP2_LM1
(
löt
Ë((÷öt)&0x7)<<5*4Ë

	)

369 
	#UNIV_LINT_MAP2_LM0
(
löt
Ë((÷öt)&0x7)<<4*4Ë

	)

370 
	#UNIV_LINT_MAP2_MBOX3
(
löt
Ë((÷öt)&0x7)<<3*4Ë

	)

371 
	#UNIV_LINT_MAP2_MBOX2
(
löt
Ë((÷öt)&0x7)<<2*4Ë

	)

372 
	#UNIV_LINT_MAP2_MBOX1
(
löt
Ë((÷öt)&0x7)<<1*4Ë

	)

373 
	#UNIV_LINT_MAP2_MBOX0
(
löt
Ë((÷öt)&0x7)<<0*4Ë

	)

375 
	#UNIV_REGOFF_VINT_MAP2
 0x344

	)

376 
	#UNIV_VINT_MAP2_MBOX3
(
vöt
Ë(((vöt)&0x7)<<3*4Ë

	)

377 
	#UNIV_VINT_MAP2_MBOX2
(
vöt
Ë(((vöt)&0x7)<<2*4Ë

	)

378 
	#UNIV_VINT_MAP2_MBOX1
(
vöt
Ë(((vöt)&0x7)<<1*4Ë

	)

379 
	#UNIV_VINT_MAP2_MBOX0
(
vöt
Ë(((vöt)&0x7)<<0*4Ë

	)

381 
	#UNIV_REGOFF_MBOX0
 0x348

	)

382 
	#UNIV_REGOFF_MBOX1
 0x34¯

	)

383 
	#UNIV_REGOFF_MBOX2
 0x350

	)

384 
	#UNIV_REGOFF_MBOX3
 0x354

	)

386 
	#UNIV_REGOFF_SEMA0
 0x358

	)

387 
	#UNIV_REGOFF_SEMA1
 0x35¯

	)

390 
	#UNIV_REGOFF_MAST_CTL
 0x400

	)

391 
	#UNIV_MAST_CTL_MAXRTRY
(
vÆ
Ë(((vÆ)&0xf)<<7*4Ë

	)

392 
	#UNIV_MAST_CTL_PWON
(
vÆ
Ë(((vÆ)&0xf)<<6*4Ë

	)

393 
	#UNIV_MAST_CTL_VRL
(
vÆ
Ë(((vÆ)&0x3)<<22Ë

	)

394 
	#UNIV_MAST_CTL_VRM
 (1<<21Ë

	)

395 
	#UNIV_MAST_CTL_VREL
 (1<<20Ë

	)

396 
	#UNIV_MAST_CTL_VOWN
 (1<<19Ë

	)

397 
	#UNIV_MAST_CTL_VOWN_ACK
 (1<<18Ë

	)

398 
	#UNIV_MAST_CTL_PABS
(
vÆ
Ë(((vÆ)&0x3)<<3*4Ë

	)

399 
	#UNIV_MAST_CTL_BUS_NO
(
vÆ
Ë(((vÆ)&0xff)<<0*4Ë

	)

401 
	#UNIV_REGOFF_MISC_CTL
 0x404

	)

402 
	#UNIV_MISC_CTL_VBTO
(
vÆ
Ë(((vÆ)&0x7)<<7*4Ë

	)

403 
	#UNIV_MISC_CTL_VARB
 (1<<26Ë

	)

404 
	#UNIV_MISC_CTL_VARBTO
(
vÆ
Ë(((vÆ)&0x3)<<6*4Ë

	)

405 
	#UNIV_MISC_CTL_SW_LRST
 (1<<23Ë

	)

406 
	#UNIV_MISC_CTL_SW_SYSRST
 (1<<22Ë

	)

407 
	#UNIV_MISC_CTL_BI
 (1<<20Ë

	)

408 
	#UNIV_MISC_CTL_ENGBI
 (1<<19Ë

	)

409 
	#UNIV_MISC_CTL_SYSCON
 (1<<17Ë

	)

410 
	#UNIV_MISC_CTL_V64AUTO
 (1<<16Ë

	)

415 
	#UNIV_REGOFF_U2SPEC
 0x4fc

	)

416 
	#UNIV_U2SPEC_DTKFLTR
 (1<<12Ë

	)

417 
	#UNIV_U2SPEC_MASt11
 (1<<10Ë

	)

418 
	#UNIV_U2SPEC_READt27_DEFAULT
 (0<<8Ë

	)

419 
	#UNIV_U2SPEC_READt27_FAST
 (1<<8Ë

	)

420 
	#UNIV_U2SPEC_READt27_NODELAY
 (2<<8Ë

	)

421 
	#UNIV_U2SPEC_POSt28_FAST
 (1<<2Ë

	)

422 
	#UNIV_U2SPEC_PREt28_FAST
 (1<<0Ë

	)

425 
	#UNIV_REGOFF_LM_CTL
 0xf64

	)

426 
	#UNIV_LM_CTL_EN
 (1<<31Ë

	)

427 
	#UNIV_LM_CTL_PGM
 (1<<23Ë

	)

428 
	#UNIV_LM_CTL_DATA
 (1<<22Ë

	)

429 
	#UNIV_LM_CTL_SUPER
 (1<<21Ë

	)

430 
	#UNIV_LM_CTL_USER
 (1<<20Ë

	)

431 
	#UNIV_LM_CTL_VAS_A16
 (0<<16Ë

	)

432 
	#UNIV_LM_CTL_VAS_A24
 (1<<16Ë

	)

433 
	#UNIV_LM_CTL_VAS_A32
 (2<<16Ë

	)

436 
	#UNIV_REGOFF_LM_BS
 0xf68

	)

439 
	#UNIV_REGOFF_VRAI_CTL
 0xf70

	)

440 
	#UNIV_VRAI_CTL_EN
 (1<<31Ë

	)

441 
	#UNIV_VRAI_CTL_PGM
 (1<<23Ë

	)

442 
	#UNIV_VRAI_CTL_DATA
 (1<<22Ë

	)

443 
	#UNIV_VRAI_CTL_SUPER
 (1<<21Ë

	)

444 
	#UNIV_VRAI_CTL_USER
 (1<<20Ë

	)

445 
	#UNIV_VRAI_CTL_VAS_A16
 (0<<16Ë

	)

446 
	#UNIV_VRAI_CTL_VAS_A24
 (1<<16Ë

	)

447 
	#UNIV_VRAI_CTL_VAS_A32
 (2<<16Ë

	)

448 
	#UNIV_VRAI_CTL_VAS_MSK
 (3<<16)

	)

451 
	#UNIV_REGOFF_VRAI_BS
 0xf74

	)

454 
	#UNIV_REGOFF_VCSR_CTL
 0xf80

	)

455 
	#UNIV_VCSR_CTL_EN
 (1<<31Ë

	)

456 
	#UNIV_VCSR_CTL_LAS_PCI_MEM
 (0<<0Ë

	)

457 
	#UNIV_VCSR_CTL_LAS_PCI_IO
 (1<<0Ë

	)

458 
	#UNIV_VCSR_CTL_LAS_PCI_CFG
 (2<<0Ë

	)

461 
	#UNIV_REGOFF_VCSR_TO
 0xf84

	)

464 
	#UNIV_REGOFF_V_AMERR
 0xf88

	)

465 
	#UNIV_V_AMERR_AMERR
(
ªg
Ë((‘eg)>>26)&0x3fË

	)

466 
	#UNIV_V_AMERR_IACK
 (1<<25Ë

	)

467 
	#UNIV_V_AMERR_M_ERR
 (1<<24Ë

	)

468 
	#UNIV_V_AMERR_V_STAT
 (1<<23Ë

	)

471 
	#UNIV_REGOFF_VAERR
 0xf8¯

	)

474 
	#UNIV_REGOFF_VCSR_CLR
 0xff4

	)

475 
	#UNIV_VCSR_CLR_RESET
 (1<<31Ë

	)

476 
	#UNIV_VCSR_CLR_SYSFAIL
 (1<<30Ë

	)

477 
	#UNIV_VCSR_CLR_FAIL
 (1<<29Ë

	)

480 
	#UNIV_REGOFF_VCSR_SET
 (0xff8)

	)

481 
	#UNIV_VCSR_SET_RESET
 (1<<31Ë

	)

482 
	#UNIV_VCSR_SET_SYSFAIL
 (1<<30Ë

	)

483 
	#UNIV_VCSR_SET_FAIL
 (1<<29Ë

	)

486 
	#UNIV_REGOFF_VCSR_BS
 0xffc

	)

487 
	#UNIV_VCSR_BS_MASK
 (0xf8000000)

	)

490 
	#UNIV_CSR_OFFSET
 0x7f000

	)

492 #ifde‡
__˝lu•lus


500 vﬁ©ûê
LERegi°î
 *
vmeUnivî£0Ba£Addr
;

501 
vmeUnivî£0PciIrqLöe
;

506 
vmeUnivî£Inô
();

512 
vmeUnivî£Re£t
();

525 
vmeUnivî£Ma°îP‹tsShow
(
FILE
 *
f
);

531 
vmeUnivî£SœveP‹tsShow
(
FILE
 *
f
);

535 
vmeUnivî£DißbÀAŒMa°îs
();

538 
vmeUnivî£DißbÀAŒSœves
();

563 
vmeUnivî£Ma°îP‹tCfg
(

564 
p‹t
,

565 
addªss_•a˚
,

566 
vme_addªss
,

567 
loˇl_addªss
,

568 
Àngth
);

594 
vmeUnivî£XœãAddr
(

595 
ma°î
,

596 
ªvî£
,

597 
as
,

598 
addr
,

599 *
∑Out


604 
vmeUnivî£SœveP‹tCfg
(

605 
p‹t
,

606 
addªss_•a˚
,

607 
vme_addªss
,

608 
loˇl_addªss
,

609 
Àngth
);

620 
vmeUnivî£SèπDMA
(

621 
loˇl_addr
,

622 
vme_addr
,

623 
cou¡
);

626 
vmeUnivî£SèπDMAXX
(

627 vﬁ©ûê
LERegi°î
 *
uba£
,

628 
loˇl_addr
,

629 
vme_addr
,

630 
cou¡
);

637 
vmeUnivî£RódReg
(
off£t
);

641 
vmeUnivî£WrôeReg
(
vÆue
, 
off£t
);

647 
vmeUnivî£CvtToLE
(*
±r
, 
num
);

651 
vmeUnivî£Re£tBus
();

658 
vmeUnivî£RódRegXX
(vﬁ©ûê
LERegi°î
 *
uba£
, 
off£t
);

661 
vmeUnivî£WrôeRegXX
(vﬁ©ûê
LERegi°î
 *
uba£
, 
vÆue
, 
off£t
);

664 
vmeUnivî£XœãAddrXX
(

665 vﬁ©ûê
LERegi°î
 *
uba£
,

666 
ma°î
,

667 
ªvî£
,

668 
as
,

669 
addr
,

670 *
∑Out


674 
vmeUnivî£Ma°îP‹tCfgXX
(

675 vﬁ©ûê
LERegi°î
 *
uba£
,

676 
p‹t
,

677 
addªss_•a˚
,

678 
vme_addªss
,

679 
loˇl_addªss
,

680 
Àngth
);

683 
vmeUnivî£SœveP‹tCfgXX
(

684 vﬁ©ûê
LERegi°î
 *
uba£
,

685 
p‹t
,

686 
addªss_•a˚
,

687 
vme_addªss
,

688 
loˇl_addªss
,

689 
Àngth
);

692 
vmeUnivî£DißbÀAŒMa°îsXX
(vﬁ©ûê
LERegi°î
 *
uba£
);

695 
vmeUnivî£DißbÀAŒSœvesXX
(vﬁ©ûê
LERegi°î
 *
uba£
);

701 
vmeUnivî£Ma°îP‹tsShowXX
(

702 vﬁ©ûê
LERegi°î
 *
uba£
,
FILE
 *
f
);

708 
vmeUnivî£SœveP‹tsShowXX
(

709 vﬁ©ûê
LERegi°î
 *
uba£
,
FILE
 *
f
);

745 
vmeUnivî£I¡Rai£XX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
Àvñ
, 
ve˘‹
);

748 
vmeUnivî£I¡Rai£
(
Àvñ
, 
ve˘‹
);

772 
vmeUnivî£M≠CRGXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
vme_ba£
, 
addªss_•a˚
);

775 
vmeUnivî£M≠CRG
(
vme_ba£
, 
addªss_•a˚
);

778 #ifde‡
__πems__


800 (*
	gVmeUnivî£ISR
Ë(*
	tu§Arg
, 
	tve˘‹
);

816 
	#UNIV_VOWN_INT_VEC
 256

	)

817 
	#UNIV_DMA_INT_VEC
 257

	)

818 
	#UNIV_LERR_INT_VEC
 258

	)

819 
	#UNIV_VERR_INT_VEC
 259

	)

821 
	#UNIV_VME_SW_IACK_INT_VEC
 261

	)

822 
	#UNIV_PCI_SW_INT_VEC
 262

	)

823 
	#UNIV_SYSFAIL_INT_VEC
 263

	)

824 
	#UNIV_ACFAIL_INT_VEC
 264

	)

825 
	#UNIV_MBOX0_INT_VEC
 265

	)

826 
	#UNIV_MBOX1_INT_VEC
 266

	)

827 
	#UNIV_MBOX2_INT_VEC
 267

	)

828 
	#UNIV_MBOX3_INT_VEC
 268

	)

829 
	#UNIV_LM0_INT_VEC
 269

	)

830 
	#UNIV_LM1_INT_VEC
 270

	)

831 
	#UNIV_LM2_INT_VEC
 271

	)

832 
	#UNIV_LM3_INT_VEC
 272

	)

834 
	#UNIV_NUM_INT_VECS
 273

	)

841 
vmeUnivî£In°ÆlISR
(
ve˘‹
, 
VmeUnivî£ISR
 
h™dÀr
, *
u§Arg
);

848 
vmeUnivî£RemoveISR
(
ve˘‹
, 
VmeUnivî£ISR
 
h™dÀr
, *
u§Arg
);

853 
VmeUnivî£ISR


854 
vmeUnivî£ISRGë
(
ve˘‹
, **
∑rg
);

864 
vmeUnivî£I¡E«bÀ
(
Àvñ
);

866 
vmeUnivî£I¡DißbÀ
(
Àvñ
);

877 
vmeUnivî£I¡IsE«bÀd
(
Àvñ
);

915 
vmeUnivî£I¡Rouã
(
Àvñ
, 
pö
);

943 
vmeUnivî£I¡Lo›backT°
(
Àvñ
, 
ve˘‹
);

990 
vmeUnivî£In°ÆlIrqMgr
(
vmeIrqUnivOut
,

991 
vmeIrqPicLöe
,

992 
•ecülIrqUnivOut
,

993 
•ecülIrqPicLöe
);

996 #i‡
deföed
(
__INSIDE_RTEMS_BSP__
)

997 
	~<°d¨g.h
>

1029 
	#VMEUNIVERSE_IRQ_MGR_FLAG_SHARED
 1

	)

1030 
	#VMEUNIVERSE_IRQ_MGR_FLAG_PW_WORKAROUND
 2

	)

1033 
vmeUnivî£In°ÆlIrqMgrA…
(
Êags
, 
uni_pö0
, 
pic_pö0
, ...);

1036 
vmeUnivî£In°ÆlIrqMgrVa
(
Êags
, 
uni_pö0
, 
pic_pö0
, 
va_li°
 
≠
);

1041 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/vmeUniverseDMA.h

9 #i‚de‡
VME_UNIVERSE_DMA_H


10 
	#VME_UNIVERSE_DMA_H


	)

56 
	~<b•/vmeUnivî£.h
>

57 
	~<°döt.h
>

59 #ifde‡
__˝lu•lus


71 
VMEDmaLi°CœssRec_
 
vmeUnivî£DmaLi°Cœss
;

74 
vmeUnivî£DmaSëupXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
);

77 
vmeUnivî£DmaSëup
(
ch™√l
, 
uöt32_t
 
mode
, uöt32_à
x„r_mode
, *
cu°om
);

80 
vmeUnivî£DmaSèπXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
);

83 
vmeUnivî£DmaSèπ
(
ch™√l
, 
uöt32_t
 
pci_addr
, uöt32_à
vme_addr
, uöt32_à
n_byãs
);

85 
uöt32_t


86 
vmeUnivî£DmaSètusXX
(vﬁ©ûê
LERegi°î
 *
ba£
, 
ch™√l
);

88 
uöt32_t


89 
vmeUnivî£DmaSètus
(
ch™√l
);

91 #ifde‡
__˝lu•lus


	@src/lib/libbsp/shared/vmeUniverse/vme_am_defs.h

9 #i‚de‡
VME_AM_DEFINITIONS_H


10 
	#VME_AM_DEFINITIONS_H


	)

65 #i‚de‡
VME_AM_STD_SUP_BLT


66 
	#VME_AM_STD_SUP_BLT
 0x3f

	)

68 #i‚de‡
VME_AM_STD_SUP_ASCENDING


69 
	#VME_AM_STD_SUP_ASCENDING
 0x3f

	)

71 #i‚de‡
VME_AM_STD_SUP_PGM


72 
	#VME_AM_STD_SUP_PGM
 0x3e

	)

74 #i‚de‡
VME_AM_STD_SUP_MBLT


75 
	#VME_AM_STD_SUP_MBLT
 0x3c

	)

77 #i‚de‡
VME_AM_STD_USR_BLT


78 
	#VME_AM_STD_USR_BLT
 0x3b

	)

80 #i‚de‡
VME_AM_STD_USR_ASCENDING


81 
	#VME_AM_STD_USR_ASCENDING
 0x3b

	)

83 #i‚de‡
VME_AM_STD_USR_PGM


84 
	#VME_AM_STD_USR_PGM
 0x3a

	)

86 #i‚de‡
VME_AM_STD_SUP_DATA


87 
	#VME_AM_STD_SUP_DATA
 0x3d

	)

89 #i‚de‡
VME_AM_STD_USR_DATA


90 
	#VME_AM_STD_USR_DATA
 0x39

	)

92 #i‚de‡
VME_AM_STD_USR_MBLT


93 
	#VME_AM_STD_USR_MBLT
 0x38

	)

95 #i‚de‡
VME_AM_EXT_SUP_BLT


96 
	#VME_AM_EXT_SUP_BLT
 0x0f

	)

98 #i‚de‡
VME_AM_EXT_SUP_ASCENDING


99 
	#VME_AM_EXT_SUP_ASCENDING
 0x0f

	)

101 #i‚de‡
VME_AM_EXT_SUP_PGM


102 
	#VME_AM_EXT_SUP_PGM
 0x0e

	)

104 #i‚de‡
VME_AM_EXT_SUP_DATA


105 
	#VME_AM_EXT_SUP_DATA
 0x0d

	)

107 #i‚de‡
VME_AM_EXT_SUP_MBLT


108 
	#VME_AM_EXT_SUP_MBLT
 0x0c

	)

110 #i‚de‡
VME_AM_EXT_USR_BLT


111 
	#VME_AM_EXT_USR_BLT
 0x0b

	)

113 #i‚de‡
VME_AM_EXT_USR_ASCENDING


114 
	#VME_AM_EXT_USR_ASCENDING
 0x0b

	)

116 #i‚de‡
VME_AM_EXT_USR_PGM


117 
	#VME_AM_EXT_USR_PGM
 0x0a

	)

119 #i‚de‡
VME_AM_EXT_USR_DATA


120 
	#VME_AM_EXT_USR_DATA
 0x09

	)

122 #i‚de‡
VME_AM_EXT_USR_MBLT


123 
	#VME_AM_EXT_USR_MBLT
 0x08

	)

125 #i‚de‡
VME_AM_2eVME_6U


126 
	#VME_AM_2eVME_6U
 0x20

	)

128 #i‚de‡
VME_AM_2eVME_3U


129 
	#VME_AM_2eVME_3U
 0x21

	)

131 #i‚de‡
VME_AM_CSR


132 
	#VME_AM_CSR
 0x2f

	)

134 #i‚de‡
VME_AM_SUP_SHORT_IO


135 
	#VME_AM_SUP_SHORT_IO
 0x2d

	)

137 #i‚de‡
VME_AM_USR_SHORT_IO


138 
	#VME_AM_USR_SHORT_IO
 0x29

	)

140 #i‚de‡
VME_AM_IS_SHORT


141 
	#VME_AM_IS_SHORT
(
a
Ë((◊Ë& 0x30Ë=0x20)

	)

143 #i‚de‡
VME_AM_IS_STD


144 
	#VME_AM_IS_STD
(
a
Ë((◊Ë& 0x30Ë=0x30)

	)

146 #i‚de‡
VME_AM_IS_EXT


147 
	#VME_AM_IS_EXT
(
a
Ë((◊Ë& 0x30Ë=0x00)

	)

149 #i‚de‡
VME_AM_IS_SUP


150 
	#VME_AM_IS_SUP
(
a
Ë(◊Ë& 4)

	)

155 #i‚de‡
VME_AM_MASK


156 
	#VME_AM_MASK
 0x3f

	)

163 #i‚de‡
VME_AM_IS_MEMORY


164 
	#VME_AM_IS_MEMORY
 (1<<8)

	)

173 
	#VME_AM_2eSST_BCST
 (1<<9)

	)

175 
	#VME_AM_2eSST_LO
 (1<<10)

	)

177 
	#VME_AM_2eSST_MID
 (2<<10)

	)

179 
	#VME_AM_2eSST_HI
 (3<<10)

	)

181 
	#VME_AM_IS_2eSST
(
am
Ë(◊mË& (3<<10))

	)

186 
	#VME_MODE_DBW_MSK
 (3<<12)

	)

187 
	#VME_MODE_DBW8
 (1<<12)

	)

188 
	#VME_MODE_DBW16
 (2<<12)

	)

189 
	#VME_MODE_DBW32
 (3<<12)

	)

	@src/lib/libcpu/arm/at91rm9200/clock/clock.c

15 
	~<πems.h
>

16 
	~<πems/˛ockdrv.h
>

17 
	~<πems/libio.h
>

19 
	~<°dlib.h
>

20 
	~<b•.h
>

21 
	~<b•/úq.h
>

22 
	~<©91rm9200.h
>

23 
	~<©91rm9200_pmc.h
>

30 
	$˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

33 
	`ST_REG
(
ST_IER
Ë
ST_SR_PITS
;

34 
	}
}

41 
	$˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

44 
	`ST_REG
(
ST_IDR
Ë
ST_SR_PITS
;

45 
	}
}

53 
	$˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
)

56  
	`ST_REG
(
ST_IMR
Ë& 
ST_SR_PITS
;

57 
	}
}

59 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

62 
πems_úq_c⁄√˘_d©a
 
	g˛ock_i§_d©a
 = {

63 .
«me
 = 
AT91RM9200_INT_SYSIRQ
,

64 .
	ghdl
 = 
Clock_i§
,

65 .
	gh™dÀ
 = 
NULL
,

66 .
	g⁄
 = 
˛ock_i§_⁄
,

67 .
	goff
 = 
˛ock_i§_off
,

68 .
	gisOn
 = 
˛ock_i§_is_⁄
,

72 
	#Clock_drivî_suµ‹t_ö°Æl_i§
–
_√w
, 
_ﬁd
 ) \

74 (
_ﬁd
Ë
NULL
; \

75 
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

76 } 0)

	)

78 
	$Clock_drivî_suµ‹t_öôülize_h¨dw¨e
()

80 
uöt32_t
 
°_°r
;

81 
¶ck
;

82 
vÆue
;

85 
¶ck
 = 
	`©91rm9200_gë_¶ck
();

86 
vÆue
 = (((
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë* 
¶ck
) +

90 
°_°r
 = 
	`ST_REG
(
ST_SR
);

91 (Ë
°_°r
; \

94 
	`AIC_SMR_REG
(
AIC_SMR_SYSIRQ
Ë
	`AIC_SMR_PRIOR
(0x7);

97 
	`ST_REG
(
ST_PIMR
Ë
vÆue
;

98 
	}
}

100 
	#Clock_drivî_suµ‹t_©_tick
() \

102 
uöt32_t
 
°_°r
; \

105 
°_°r
 = 
	`ST_REG
(
ST_SR
); \

106 (Ë
°_°r
; \

107 } 0)

	)

109 
	$Clock_drivî_suµ‹t_shutdown_h¨dw¨e
( )

111 
	`BSP_ªmove_πems_úq_h™dÀr
(&
˛ock_i§_d©a
);

112 
	}
}

114 
	#CLOCK_DRIVER_USE_DUMMY_TIMECOUNTER


	)

116 
	~"../../../../libb•/sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libcpu/arm/at91rm9200/dbgu/dbgu.c

15 
	~<b•.h
>

16 
	~<πems/libio.h
>

17 
	~<ãrmios.h
>

19 
	~<©91rm9200.h
>

20 
	~<©91rm9200_dbgu.h
>

21 
	~<©91rm9200_pmc.h
>

22 
	~<πems/b•Io.h
>

23 
	~<libchù/£rül.h
>

24 
	~<libchù/£rsuµ.h
>

26 vﬁ©ûê
	gdbg_dly
;

29 
dbgu_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

30 
dbgu_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

31 
dbgu_ªad
(
mö‹
);

32 
ssize_t
 
dbgu_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

33 
dbgu_öô
(
mö‹
);

34 
dbgu_wrôe_pﬁÀd
(
mö‹
, 
c
);

35 
dbgu_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

38 c⁄° 
c⁄sﬁe_‚s
 
	gdbgu_‚s
 =

40 
libchù_£rül_deÁu…_¥obe
,

41 
dbgu_fú°_›í
,

42 
dbgu_œ°_˛o£
,

43 
dbgu_ªad
,

44 
dbgu_wrôe
,

45 
dbgu_öô
,

46 
dbgu_wrôe_pﬁÀd
,

47 
dbgu_£t_©åibuãs
,

48 
FALSE


59 
	$dbgu_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

62 
	}
}

70 
	$dbgu_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

73 
	}
}

82 
	$dbgu_ªad
(
mö‹
)

84 
c
;

85 
c⁄sﬁe_tbl
 *
c⁄sﬁe_íåy
;

86 
©91rm9200_dbgu_ªgs_t
 *
dbgu
;

88 
c⁄sﬁe_íåy
 = 
	`BSP_gë_u¨t_‰om_mö‹
(
mö‹
);

90 i‡(
c⁄sﬁe_íåy
 =
NULL
) {

94 
dbgu
 = (
©91rm9200_dbgu_ªgs_t
 *)
c⁄sﬁe_íåy
->
ulCålP‹t1
;

96 i‡(!(
dbgu
->
§
 & 
DBGU_INT_RXRDY
)) {

100 
c
 = 
dbgu
->
rhr
 & 0xff;

102  
c
;

103 
	}
}

111 
ssize_t
 
	$dbgu_wrôe
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
)

113 
i
, 
x
;

114 
c
;

115 
c⁄sﬁe_tbl
 *
c⁄sﬁe_íåy
;

116 
©91rm9200_dbgu_ªgs_t
 *
dbgu
;

118 
c⁄sﬁe_íåy
 = 
	`BSP_gë_u¨t_‰om_mö‹
(
mö‹
);

120 i‡(
c⁄sﬁe_íåy
 =
NULL
) {

124 
dbgu
 = (
©91rm9200_dbgu_ªgs_t
 *)
c⁄sﬁe_íåy
->
ulCålP‹t1
;

126 
i
 = 0; i < 
Àn
; i++) {

129 i‡(
dbgu
->
§
 & 
DBGU_INT_TXRDY
) {

134 
c
 = (Ë
buf
[
i
];

135 
dbgu
->
thr
 = 
c
;

139 
x
 = 0; x < 100; x++) {

140 
dbg_dly
++;

145 
	}
}

149 
	$dbgu_öô
(
mö‹
)

151 
c⁄sﬁe_tbl
 *
c⁄sﬁe_íåy
;

152 
©91rm9200_dbgu_ªgs_t
 *
dbgu
;

154 
c⁄sﬁe_íåy
 = 
	`BSP_gë_u¨t_‰om_mö‹
(
mö‹
);

156 i‡(
c⁄sﬁe_íåy
 =
NULL
) {

160 
dbgu
 = (
©91rm9200_dbgu_ªgs_t
 *)
c⁄sﬁe_íåy
->
ulCålP‹t1
;

163 
dbgu
->
¸
 = (
DBGU_CR_RSTSTA
 | 
DBGU_CR_RSTTX
 | 
DBGU_CR_RSTRX
);

166 
dbgu
->
idr
 = 
DBGU_INT_ALL
;

167 
dbgu
->
imr
 = 0;

170 
dbgu
->
mr
 = 
DBGU_MR_PAR_NONE
 | 
DBGU_MR_CHMODE_NORM
;

173 
dbgu
->
brgr
 = (
	`©91rm9200_gë_mck
(Ë/ 16Ë/ 
	`BSP_gë_baud
();

176 
dbgu
->
¸
 = (
DBGU_CR_TXEN
 | 
DBGU_CR_RXEN
);

177 
	}
}

180 
	$dbgu_wrôe_pﬁÀd
(
mö‹
, 
c
)

182 
	`dbgu_wrôe
(
mö‹
, &
c
, 1);

183 
	}
}

186 
	$dbgu_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

189 
	}
}

201 
	$dbgu_pﬁl_ªad
(
mö‹
)

203  
	`dbgu_ªad
(
mö‹
);

204 
	}
}

212 
	$_BSP_put_ch¨
–
c
 ) {

213 
	`dbgu_wrôe_pﬁÀd
(0, 
c
);

214 i‡–
c
 == '\n' )

215 
	`dbgu_wrôe_pﬁÀd
(0, '\r');

216 
	}
}

218 
BSP_ouçut_ch¨_fun˘i⁄_ty≥
 
	gBSP_ouçut_ch¨
 = 
_BSP_put_ch¨
;

220 
	$_BSP_pﬁl_ch¨
()

222  
	`dbgu_pﬁl_ªad
(0);

223 
	}
}

225 
BSP_pﬁlög_gëch¨_fun˘i⁄_ty≥
 
	gBSP_pﬁl_ch¨
 = 
_BSP_pﬁl_ch¨
;

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200.h

16 #i‚de‡
__AT91RM9200_H__


17 
	#__AT91RM9200_H__


	)

19 
	~"bôs.h
"

21 vﬁ©ûê
	tvul⁄g
;

24 
	#AIC_SMR_BASE
 0xFFFFF000

	)

25 
	#AIC_SMR_REG
(
_x_
Ë*(
vul⁄g
 *)(
AIC_SMR_BASE
 + (_x_ & 0x7c))

	)

28 
	#AIC_SVR_BASE
 0xFFFFF080

	)

29 
	#AIC_SVR_REG
(
_x_
Ë*(
vul⁄g
 *)(
AIC_SVR_BASE
 + (_x_ & 0x7c))

	)

32 
	#AIC_CTL_BASE
 0xFFFFF100

	)

33 
	#AIC_CTL_REG
(
_x_
Ë*(
vul⁄g
 *)(
AIC_CTL_BASE
 + (_x_ & 0x7f))

	)

37 
	#AIC_SMR_FIQ
 0x00

	)

38 
	#AIC_SMR_SYSIRQ
 0x04

	)

39 
	#AIC_SMR_PIOA
 0x08

	)

40 
	#AIC_SMR_PIOB
 0x0¯

	)

41 
	#AIC_SMR_PIOC
 0x10

	)

42 
	#AIC_SMR_PIOD
 0x14

	)

43 
	#AIC_SMR_US0
 0x18

	)

44 
	#AIC_SMR_US1
 0x1¯

	)

45 
	#AIC_SMR_US2
 0x20

	)

46 
	#AIC_SMR_US3
 0x24

	)

47 
	#AIC_SMR_MCI
 0x28

	)

48 
	#AIC_SMR_UDP
 0x2¯

	)

49 
	#AIC_SMR_TWI
 0x30

	)

50 
	#AIC_SMR_SPI
 0x34

	)

51 
	#AIC_SMR_SSC0
 0x38

	)

52 
	#AIC_SMR_SSC1
 0x3¯

	)

53 
	#AIC_SMR_SSC2
 0x40

	)

54 
	#AIC_SMR_TC0
 0x44

	)

55 
	#AIC_SMR_TC1
 0x48

	)

56 
	#AIC_SMR_TC2
 0x4¯

	)

57 
	#AIC_SMR_TC3
 0x50

	)

58 
	#AIC_SMR_TC4
 0x54

	)

59 
	#AIC_SMR_TC5
 0x58

	)

60 
	#AIC_SMR_UHP
 0x5¯

	)

61 
	#AIC_SMR_EMAC
 0x60

	)

62 
	#AIC_SMR_IRQ0
 0x64

	)

63 
	#AIC_SMR_IRQ1
 0x68

	)

64 
	#AIC_SMR_IRQ2
 0x6¯

	)

65 
	#AIC_SMR_IRQ3
 0x70

	)

66 
	#AIC_SMR_IRQ4
 0x74

	)

67 
	#AIC_SMR_IRQ5
 0x78

	)

68 
	#AIC_SMR_IRQ6
 0x7¯

	)

71 
	#AIC_IVR
 0x00

	)

72 
	#AIC_FVR
 0x04

	)

73 
	#AIC_ISR
 0x08

	)

74 
	#AIC_IPR
 0x0C

	)

75 
	#AIC_IMR
 0x10

	)

76 
	#AIC_CISR
 0x14

	)

77 
	#AIC_IECR
 0x20

	)

78 
	#AIC_IDCR
 0x24

	)

79 
	#AIC_ICCR
 0x28

	)

80 
	#AIC_ISCR
 0x2C

	)

81 
	#AIC_EOICR
 0x30

	)

82 
	#AIC_SPU
 0x34

	)

83 
	#AIC_DCR
 0x38

	)

84 
	#AIC_FFER
 0x40

	)

85 
	#AIC_FFDR
 0x44

	)

86 
	#AIC_FFSR
 0x48

	)

90 
	#AIC_ISR_IRQID_MASK
 0x1‡

	)

93 
	#AIC_CISR_IRQ
 
BIT1


	)

94 
	#AIC_CISR_FIQ
 
BIT0


	)

97 
	#AIC_DCR_GMSK
 
BIT1


	)

98 
	#AIC_DCR_PROT
 
BIT0


	)

101 
	#AIC_SMR_PRIOR
(
_x_
Ë((_x_ & 0x07Ë<< 0)

	)

102 
	#AIC_SMR_SRC_LVL_LOW
 (0 << 5Ë

	)

103 
	#AIC_SMR_SRC_EDGE_LOW
 (1 << 5)

	)

104 
	#AIC_SMR_SRC_LVL_HI
 (2 << 5)

	)

105 
	#AIC_SMR_SRC_EDGE_HI
 (3 << 5)

	)

110 
	#DBGU_BASE
 0xFFFFF200

	)

111 
	#DBGU_REG
(
_x_
Ë*(
vul⁄g
 *)(
DBGU_BASE
 + _x_)

	)

114 
	#DBGU_CR
 0x00

	)

115 
	#DBGU_MR
 0x04

	)

116 
	#DBGU_IER
 0x08

	)

117 
	#DBGU_IDR
 0x0C

	)

118 
	#DBGU_IMR
 0x10

	)

119 
	#DBGU_CSR
 0x14

	)

120 
	#DBGU_RHR
 0x18

	)

121 
	#DBGU_THR
 0x1C

	)

122 
	#DBGU_BRGR
 0x20

	)

123 
	#DBGU_C1R
 0x40

	)

124 
	#DBGU_C2R
 0x44

	)

125 
	#DBGU_FNTR
 0x48

	)

130 
	#USART0_BASE
 0xFFFC0000

	)

131 
	#USART1_BASE
 0xFFFC4000

	)

132 
	#USART2_BASE
 0xFFFC8000

	)

133 
	#USART3_BASE
 0xFFFCC000

	)

143 
	#ST_BASE
 0xFFFFFD00

	)

144 
	#ST_REG
(
_x_
Ë*(
vul⁄g
 *)(
ST_BASE
 + _x_)

	)

147 
	#ST_CR
 0x00

	)

148 
	#ST_PIMR
 0x04

	)

149 
	#ST_WDMR
 0x08

	)

150 
	#ST_RTMR
 0x0C

	)

151 
	#ST_SR
 0x10

	)

152 
	#ST_IER
 0x14

	)

153 
	#ST_IDR
 0x18

	)

154 
	#ST_IMR
 0x1C

	)

155 
	#ST_RTAR
 0x20

	)

156 
	#ST_CRTR
 0x24

	)

160 
	#ST_CR_WDRST
 
BIT0


	)

163 
	#ST_PIMR_PIV_MASK
 0x0000ffff

	)

166 
	#ST_WDMR_EXTEN
 
BIT17


	)

167 
	#ST_WDMR_RSTEN
 
BIT16


	)

168 
	#ST_WDMR_WDV_MASK
 0x0000fff‡

	)

171 
	#ST_RTMR_RTPRES_MASK
 0x0000fff‡

	)

177 
	#ST_SR_ALMS
 
BIT3


	)

178 
	#ST_SR_RTTINC
 
BIT2


	)

179 
	#ST_SR_WDOVF
 
BIT1


	)

180 
	#ST_SR_PITS
 
BIT0


	)

183 
	#ST_RTAR_ALMV_MASK
 0x000fffff

	)

186 
	#ST_CRTR_CRTV_MASK
 0x000fffff

	)

198 
	#PDC_RPR
 0x100

	)

199 
	#PDC_RCR
 0x104

	)

200 
	#PDC_TPR
 0x108

	)

201 
	#PDC_TCR
 0x10¯

	)

202 
	#PDC_RNPR
 0x110

	)

203 
	#PDC_RNCR
 0x114

	)

204 
	#PDC_TNPR
 0x118

	)

205 
	#PDC_TNCR
 0x11¯

	)

206 
	#PDC_PTCR
 0x120

	)

207 
	#PDC_PTSR
 0x124

	)

215 
	#PIOA_BASE
 0xFFFFF400

	)

216 
	#PIOA_REG
(
_x_
Ë*(
vul⁄g
 *)(
PIOA_BASE
 + _x_)

	)

219 
	#PIOB_BASE
 0xFFFFF600

	)

220 
	#PIOB_REG
(
_x_
Ë*(
vul⁄g
 *)(
PIOB_BASE
 + _x_)

	)

223 
	#PIOC_BASE
 0xFFFFF800

	)

224 
	#PIOC_REG
(
_x_
Ë*(
vul⁄g
 *)(
PIOC_BASE
 + _x_)

	)

227 
	#PIOD_BASE
 0xFFFFFA00

	)

228 
	#PIOD_REG
(
_x_
Ë*(
vul⁄g
 *)(
PIOD_BASE
 + _x_)

	)

233 
	#PMC_BASE
 0xFFFFFC00

	)

234 
	#PMC_REG
(
_x_
Ë*(
vul⁄g
 *)(
PMC_BASE
 + _x_)

	)

239 
	#EMAC_BASE
 0xFFFBC000

	)

240 
	#EMAC_REG
(
_x_
Ë*(
vul⁄g
 *)(
EMAC_BASE
 + _x_)

	)

245 
	#TC_BASE
 0xFFFA0000

	)

246 
	#TC_REG
(
_x_
Ë*(
vul⁄g
 *)(
TC_BASE
 + 0x00 + _x_)

	)

247 
	#TC_TC0_REG
(
_x_
Ë*(
vul⁄g
 *)(
TC_BASE
 + 0x00 + _x_)

	)

248 
	#TC_TC1_REG
(
_x_
Ë*(
vul⁄g
 *)(
TC_BASE
 + 0x40 + _x_)

	)

249 
	#TC_TC2_REG
(
_x_
Ë*(
vul⁄g
 *)(
TC_BASE
 + 0x80 + _x_)

	)

252 
	#TC_CCR
 0x00

	)

253 
	#TC_CMR
 0x04

	)

254 
	#TC_CV
 0x10

	)

255 
	#TC_RA
 0x14

	)

256 
	#TC_RB
 0x18

	)

257 
	#TC_RC
 0x1C

	)

258 
	#TC_SR
 0x20

	)

259 
	#TC_IER
 0x24

	)

260 
	#TC_IDR
 0x28

	)

261 
	#TC_IMR
 0x2C

	)

264 
	#TC_BCR
 0xc0

	)

265 
	#TC_BMR
 0xc4

	)

268 
	#TC_BCR_SYNC
 
BIT1


	)

271 
	#TC_BMR_TC0
(
_x_
Ë((_x_ & 0x3Ë<< 0Ë

	)

272 
	#TC_BMR_TC1
(
_x_
Ë((_x_ & 0x3Ë<< 2Ë

	)

273 
	#TC_BMR_TC2
(
_x_
Ë((_x_ & 0x3Ë<< 4Ë

	)

276 
	#TC_CCR_CLKEN
 
BIT0


	)

277 
	#TC_CCR_CLKDIS
 
BIT1


	)

278 
	#TC_CCR_SWTRG
 
BIT2


	)

281 
	#TC_CMR_TCCLKS
(
_x_
Ë((_x_ & 0x7Ë<< 0Ë

	)

282 
	#TC_CMR_CLKI
 
BIT3


	)

283 
	#TC_BURST
(
_x_
Ë((_x_ & 0x3 << 4Ë

	)

284 
	#TC_WAVE
 
BIT15


	)

287 
	#TC_CMR_LDBSTOP
 
BIT6


	)

288 
	#TC_CMR_LDBDIS
 
BIT7


	)

289 
	#TC_CMR_ETRGEDG
(
_x_
Ë((_x_ & 0x3Ë<< 8Ë

	)

290 
	#TC_CMR_ABETRG
 
BIT10


	)

291 
	#TC_CMR_CPCTRG
 
BIT14


	)

292 
	#TC_CMR_LDRA
(
_x_
Ë((_x_ & 0x3Ë<< 16Ë

	)

293 
	#TC_CMR_LDRB
(
_x_
Ë((_x_ & 0x3Ë<< 18Ë

	)

296 
	#TC_CMR_CPCSTOP
 
BIT6


	)

297 
	#TC_CMR_CPCDIS
 
BIT7


	)

298 
	#TC_CMR_EEVTEDG
(
_x_
Ë((_x_ & 0x3Ë<< 8Ë

	)

299 
	#TC_CMR_EEVT
(
_x_
Ë((_x_ & 0x3Ë<< 10Ë

	)

300 
	#TC_CMR_ENETRG
 
BIT12


	)

301 
	#TC_CMR_WAVESEL
(
_x_
Ë((_x_ & 0x3Ë<< 13Ë

	)

302 
	#TC_CMR_ACPA
(
_x_
Ë((_x_ & 0x3Ë<< 16Ë

	)

303 
	#TC_CMR_ACPC
(
_x_
Ë((_x_ & 0x3Ë<< 18Ë

	)

304 
	#TC_CMR_AEEVT
(
_x_
Ë((_x_ & 0x3Ë<< 20Ë

	)

305 
	#TC_CMR_ASWTRG
(
_x_
Ë((_x_ & 0x3Ë<< 22Ë

	)

306 
	#TC_CMR_BCPB
(
_x_
Ë((_x_ & 0x3Ë<< 24Ë

	)

307 
	#TC_CMR_BCPC
(
_x_
Ë((_x_ & 0x3Ë<< 26Ë

	)

308 
	#TC_CMR_BEEVT
(
_x_
Ë((_x_ & 0x3Ë<< 28Ë

	)

309 
	#TC_CMR_BSWTRG
(
_x_
Ë((_x_ & 0x3Ë<< 30Ë

	)

312 
	#TC_CV_MASK
 0xfff‡

	)

315 
	#TC_SR_COVFS
 
BIT0


	)

316 
	#TC_SR_LOVRS
 
BIT1


	)

317 
	#TC_SR_CPAS
 
BIT2


	)

318 
	#TC_SR_CPBS
 
BIT3


	)

319 
	#TC_SR_CPCS
 
BIT4


	)

320 
	#TC_SR_LDRAS
 
BIT5


	)

321 
	#TC_SR_LDRBS
 
BIT6


	)

322 
	#TC_SR_ETRGS
 
BIT7


	)

323 
	#TC_SR_CLKSTA
 
BIT16


	)

324 
	#TC_SR_MTIOA
 
BIT17


	)

325 
	#TC_SR_MTIOB
 
BIT18


	)

330 
	#EBI_BASE
 0xFFFFFF60

	)

331 
	#EBI_REG
(
_x_
Ë*(
vul⁄g
 *)(
EBI_BASE
 + _x_)

	)

336 
	#SMC_REG
(
_x_
Ë*(
vul⁄g
 *)(
EBI_BASE
 + 0x10 + _x_)

	)

341 
	#SDRC_REG
(
_x_
Ë*(
vul⁄g
 *)(
EBI_BASE
 + 0x30 + _x_)

	)

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_dbgu.h

11 #i‚de‡
__AT91RM9200_DBGU_H__


12 
	#__AT91RM9200_DBGU_H__


	)

14 
	~"bôs.h
"

17 
	#DBGU_CR
 0x00

	)

18 
	#DBGU_MR
 0x04

	)

19 
	#DBGU_IER
 0x08

	)

20 
	#DBGU_IDR
 0x0C

	)

21 
	#DBGU_IMR
 0x10

	)

22 
	#DBGU_SR
 0x14

	)

23 
	#DBGU_RHR
 0x18

	)

24 
	#DBGU_THR
 0x1C

	)

25 
	#DBGU_BRGR
 0x20

	)

26 
	#DBGU_C1R
 0x40

	)

27 
	#DBGU_C2R
 0x44

	)

28 
	#DBGU_FNTR
 0x48

	)

32 
	#DBGU_CR_RSTRX
 
BIT2


	)

33 
	#DBGU_CR_RSTTX
 
BIT3


	)

34 
	#DBGU_CR_RXEN
 
BIT4


	)

35 
	#DBGU_CR_RXDIS
 
BIT5


	)

36 
	#DBGU_CR_TXEN
 
BIT6


	)

37 
	#DBGU_CR_TXDIS
 
BIT7


	)

38 
	#DBGU_CR_RSTSTA
 
BIT8


	)

41 
	#DBGU_MR_PAR_EVEN
 (0x0 << 9Ë

	)

42 
	#DBGU_MR_PAR_ODD
 (0x1 << 9Ë

	)

43 
	#DBGU_MR_PAR_SPACE
 (0x2 << 9Ë

	)

44 
	#DBGU_MR_PAR_MARK
 (0x3 << 9Ë

	)

45 
	#DBGU_MR_PAR_NONE
 (0x4 << 9Ë

	)

46 
	#DBGU_MR_PAR_MDROP
 (0x6 << 9Ë

	)

47 
	#DBGU_MR_CHMODE_NORM
 (0x0 << 14Ë

	)

48 
	#DBGU_MR_CHMODE_AUTO
 (0x1 << 14Ë

	)

49 
	#DBGU_MR_CHMODE_LOC
 (0x2 << 14Ë

	)

50 
	#DBGU_MR_CHMODE_REM
 (0x3 << 14Ë

	)

56 
	#DBGU_INT_RXRDY
 
BIT0


	)

57 
	#DBGU_INT_TXRDY
 
BIT1


	)

58 
	#DBGU_INT_ENDRX
 
BIT3


	)

60 
	#DBGU_INT_OVRE
 
BIT5


	)

61 
	#DBGU_INT_FRAME
 
BIT6


	)

62 
	#DBGU_INT_PARE
 
BIT7


	)

63 
	#DBGU_INT_TXEMPTY
 
BIT9


	)

64 
	#DBGU_INT_TXBUFE
 
BIT11


	)

65 
	#DBGU_INT_RXBUFF
 
BIT12


	)

66 
	#DBGU_INT_COMM_TX
 
BIT30


	)

67 
	#DBGU_INT_COMM_RX
 
BIT31


	)

68 
	#DBGU_INT_ALL
 0xC0001AFB

	)

71 
	#DBGU_FNTR_NTRST
 
BIT0


	)

74 vﬁ©ûê
uöt32_t
 
	m¸
;

75 vﬁ©ûê
uöt32_t
 
	mmr
;

76 vﬁ©ûê
uöt32_t
 
	mõr
;

77 vﬁ©ûê
uöt32_t
 
	midr
;

78 vﬁ©ûê
uöt32_t
 
	mimr
;

79 vﬁ©ûê
uöt32_t
 
	m§
;

80 vﬁ©ûê
uöt32_t
 
	mrhr
;

81 vﬁ©ûê
uöt32_t
 
	mthr
;

82 vﬁ©ûê
uöt32_t
 
	mbrgr
;

83 vﬁ©ûê
uöt32_t
 
	m_ªs0
[7];

84 vﬁ©ûê
uöt32_t
 
	mcidr
;

85 vﬁ©ûê
uöt32_t
 
	mexid
;

86 vﬁ©ûê
uöt32_t
 
	m‚r
;

87 } 
	t©91rm9200_dbgu_ªgs_t
;

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_emac.h

11 #i‚de‡
__AT91RM9200_EMAC_H__


12 
	#__AT91RM9200_EMAC_H__


	)

14 
	~<bôs.h
>

17 
	#EMAC_CTL
 0x00

	)

18 
	#EMAC_CFG
 0x04

	)

19 
	#EMAC_SR
 0x08

	)

20 
	#EMAC_TAR
 0x0C

	)

21 
	#EMAC_TCR
 0x10

	)

22 
	#EMAC_TSR
 0x14

	)

23 
	#EMAC_RBQP
 0x18

	)

24 
	#EMAC_RSR
 0x20

	)

25 
	#EMAC_ISR
 0x24

	)

26 
	#EMAC_IER
 0x28

	)

27 
	#EMAC_IDR
 0x2C

	)

28 
	#EMAC_IMR
 0x30

	)

29 
	#EMAC_MAN
 0x34

	)

30 
	#EMAC_FRA
 0x40

	)

31 
	#EMAC_SCOL
 0x44

	)

32 
	#EMAC_MCOL
 0x48

	)

33 
	#EMAC_OK
 0x4C

	)

34 
	#EMAC_SEQE
 0x50

	)

35 
	#EMAC_ALE
 0x54

	)

36 
	#EMAC_DTE
 0x58

	)

37 
	#EMAC_LCOL
 0x5C

	)

38 
	#EMAC_ECOL
 0x60

	)

39 
	#EMAC_CSE
 0x64

	)

40 
	#EMAC_TUE
 0x68

	)

41 
	#EMAC_CDE
 0x6C

	)

42 
	#EMAC_ELR
 0x70

	)

43 
	#EMAC_RJB
 0x74

	)

44 
	#EMAC_USF
 0x78

	)

45 
	#EMAC_SQEE
 0x7C

	)

46 
	#EMAC_DRFC
 0x80

	)

47 
	#EMAC_HSH
 0x90

	)

48 
	#EMAC_HSL
 0x94

	)

49 
	#EMAC_SA1L
 0x98

	)

50 
	#EMAC_SA1H
 0x9C

	)

51 
	#EMAC_SA2L
 0xA0

	)

52 
	#EMAC_SA2H
 0xA4

	)

53 
	#EMAC_SA3L
 0xA8

	)

54 
	#EMAC_SA3H
 0xAC

	)

55 
	#EMAC_SA4L
 0xB0

	)

56 
	#EMAC_SA4H
 0xB4

	)

59 
	#EMAC_CTL_LB
 
BIT0


	)

60 
	#EMAC_CTL_LBL
 
BIT1


	)

61 
	#EMAC_CTL_RE
 
BIT2


	)

62 
	#EMAC_CTL_TE
 
BIT3


	)

63 
	#EMAC_CTL_MPE
 
BIT4


	)

64 
	#EMAC_CTL_CSR
 
BIT5


	)

65 
	#EMAC_CTL_ISR
 
BIT6


	)

66 
	#EMAC_CTL_WES
 
BIT7


	)

67 
	#EMAC_CTL_BP
 
BIT8


	)

70 
	#EMAC_CFG_SPD
 
BIT0


	)

71 
	#EMAC_CFG_FD
 
BIT1


	)

72 
	#EMAC_CFG_BR
 
BIT2


	)

73 
	#EMAC_CFG_CAF
 
BIT4


	)

74 
	#EMAC_CFG_NBC
 
BIT5


	)

75 
	#EMAC_CFG_MTI
 
BIT6


	)

76 
	#EMAC_CFG_UNI
 
BIT7


	)

77 
	#EMAC_CFG_BIG
 
BIT8


	)

78 
	#EMAC_CFG_EAE
 
BIT9


	)

79 
	#EMAC_CFG_CLK_8
 (0 << 10Ë

	)

80 
	#EMAC_CFG_CLK_16
 (1 << 10Ë

	)

81 
	#EMAC_CFG_CLK_32
 (2 << 10Ë

	)

82 
	#EMAC_CFG_CLK_64
 (3 << 10Ë

	)

83 
	#EMAC_CFG_CLK_MASK
 (3 << 10Ë

	)

84 
	#EMAC_CFG_RTY
 
BIT12


	)

85 
	#EMAC_CFG_RMII
 
BIT13


	)

88 
	#EMAC_LINK
 
BIT0


	)

89 
	#EMAC_MDIO
 
BIT1


	)

90 
	#EMAC_IDLE
 
BIT2


	)

93 
	#EMAC_TCR_LEN
(
_x_
Ë((_x_ & 0x7FFË<< 0Ë

	)

94 
	#EMAC_TCR_NCRC
 
BIT15


	)

97 
	#EMAC_TSR_OVR
 
BIT0


	)

98 
	#EMAC_TSR_COL
 
BIT1


	)

99 
	#EMAC_TSR_RLE
 
BIT2


	)

100 
	#EMAC_TSR_TXIDLE
 
BIT3


	)

101 
	#EMAC_TSR_BNQ
 
BIT4


	)

102 
	#EMAC_TSR_COMP
 
BIT5


	)

103 
	#EMAC_TSR_UND
 
BIT6


	)

106 
	#EMAC_RSR_BNA
 
BIT0


	)

107 
	#EMAC_RSR_REC
 
BIT1


	)

108 
	#EMAC_RSR_OVR
 
BIT2


	)

116 
	#EMAC_INT_DONE
 
BIT0


	)

117 
	#EMAC_INT_RCOM
 
BIT1


	)

118 
	#EMAC_INT_RBNA
 
BIT2


	)

119 
	#EMAC_INT_TOVR
 
BIT3


	)

120 
	#EMAC_INT_TUND
 
BIT4


	)

121 
	#EMAC_INT_RTRY
 
BIT5


	)

122 
	#EMAC_INT_TBRE
 
BIT6


	)

123 
	#EMAC_INT_TCOM
 
BIT7


	)

124 
	#EMAC_INT_TIDLE
 
BIT8


	)

125 
	#EMAC_INT_LINK
 
BIT9


	)

126 
	#EMAC_INT_ROVR
 
BIT10


	)

127 
	#EMAC_INT_ABT
 
BIT11


	)

130 
	#EMAC_MAN_DATA
(
_x_
Ë((_x_ & 0xFFFFË<< 0)

	)

131 
	#EMAC_MAN_CODE
 (0x2 << 16Ë

	)

132 
	#EMAC_MAN_REGA
(
_x_
Ë((_x_ & 0x1FË<< 18Ë

	)

133 
	#EMAC_MAN_PHYA
(
_x_
Ë((_x_ & 0x1FË<< 23Ë

	)

134 
	#EMAC_MAN_WRITE
 (0x1 << 28Ë

	)

135 
	#EMAC_MAN_READ
 (0x2 << 28Ë

	)

136 
	#EMAC_MAN_HIGH
 
BIT30


	)

137 
	#EMAC_MAN_LOW
 
BIT31


	)

143 
	#RXBUF_ADD_BASE_MASK
 0xfffffff¯

	)

144 
	#RXBUF_ADD_WRAP
 
BIT1


	)

145 
	#RXBUF_ADD_OWNED
 
BIT0


	)

148 
	#RXBUF_STAT_BCAST
 
BIT31


	)

149 
	#RXBUF_STAT_MULTI
 
BIT30


	)

150 
	#RXBUF_STAT_UNI
 
BIT29


	)

151 
	#RXBUF_STAT_EXT
 
BIT28


	)

152 
	#RXBUF_STAT_UNK
 
BIT27


	)

153 
	#RXBUF_STAT_LOC1
 
BIT26


	)

154 
	#RXBUF_STAT_LOC2
 
BIT25


	)

155 
	#RXBUF_STAT_LOC3
 
BIT24


	)

156 
	#RXBUF_STAT_LOC4
 
BIT23


	)

157 
	#RXBUF_STAT_LEN_MASK
 0x7f‡

	)

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_gpio.h

11 #i‚de‡
AT91RM9200_GPIO_H


12 
	#AT91RM9200_GPIO_H


	)

14 
	~<bôs.h
>

17 
	#PIO_PER
 0x00

	)

18 
	#PIO_PDR
 0x04

	)

19 
	#PIO_PSR
 0x08

	)

20 
	#PIO_OER
 0x10

	)

21 
	#PIO_ODR
 0x14

	)

22 
	#PIO_OSR
 0x18

	)

23 
	#PIO_IFER
 0x20

	)

24 
	#PIO_IFDR
 0x24

	)

25 
	#PIO_IFSR
 0x28

	)

26 
	#PIO_SODR
 0x30

	)

27 
	#PIO_CODR
 0x34

	)

28 
	#PIO_ODSR
 0x38

	)

29 
	#PIO_PDSR
 0x3¯

	)

30 
	#PIO_IER
 0x40

	)

31 
	#PIO_IDR
 0x44

	)

32 
	#PIO_IMR
 0x48

	)

33 
	#PIO_ISR
 0x4¯

	)

34 
	#PIO_MDER
 0x50

	)

35 
	#PIO_MDDR
 0x54

	)

36 
	#PIO_MDSR
 0x58

	)

37 
	#PIO_PUDR
 0x60

	)

38 
	#PIO_PUER
 0x64

	)

39 
	#PIO_PUSR
 0x68

	)

40 
	#PIO_ASR
 0x70

	)

41 
	#PIO_BSR
 0x74

	)

42 
	#PIO_ABSR
 0x78

	)

43 
	#PIO_OWER
 0xA0

	)

44 
	#PIO_OWDR
 0xA4

	)

45 
	#PIO_OWSR
 0xA8

	)

59 
	#GPIO_0
 
BIT0


	)

60 
	#GPIO_1
 
BIT1


	)

61 
	#GPIO_2
 
BIT2


	)

62 
	#GPIO_3
 
BIT3


	)

63 
	#GPIO_4
 
BIT4


	)

64 
	#GPIO_5
 
BIT5


	)

65 
	#GPIO_6
 
BIT6


	)

66 
	#GPIO_7
 
BIT7


	)

67 
	#GPIO_8
 
BIT8


	)

68 
	#GPIO_9
 
BIT9


	)

69 
	#GPIO_10
 
BIT10


	)

70 
	#GPIO_11
 
BIT11


	)

71 
	#GPIO_12
 
BIT12


	)

72 
	#GPIO_13
 
BIT13


	)

73 
	#GPIO_14
 
BIT14


	)

74 
	#GPIO_15
 
BIT15


	)

75 
	#GPIO_16
 
BIT16


	)

76 
	#GPIO_17
 
BIT17


	)

77 
	#GPIO_18
 
BIT18


	)

78 
	#GPIO_19
 
BIT19


	)

79 
	#GPIO_20
 
BIT20


	)

80 
	#GPIO_21
 
BIT21


	)

81 
	#GPIO_22
 
BIT22


	)

82 
	#GPIO_23
 
BIT23


	)

83 
	#GPIO_24
 
BIT24


	)

84 
	#GPIO_25
 
BIT25


	)

85 
	#GPIO_26
 
BIT26


	)

86 
	#GPIO_27
 
BIT27


	)

87 
	#GPIO_28
 
BIT28


	)

88 
	#GPIO_29
 
BIT29


	)

89 
	#GPIO_30
 
BIT30


	)

90 
	#GPIO_31
 
BIT31


	)

92 
	#GPIO_32
 
BIT0


	)

93 
	#GPIO_33
 
BIT1


	)

94 
	#GPIO_34
 
BIT2


	)

95 
	#GPIO_35
 
BIT3


	)

96 
	#GPIO_36
 
BIT4


	)

97 
	#GPIO_37
 
BIT5


	)

98 
	#GPIO_38
 
BIT6


	)

99 
	#GPIO_39
 
BIT7


	)

100 
	#GPIO_40
 
BIT8


	)

101 
	#GPIO_41
 
BIT9


	)

102 
	#GPIO_42
 
BIT10


	)

103 
	#GPIO_43
 
BIT11


	)

104 
	#GPIO_44
 
BIT12


	)

105 
	#GPIO_45
 
BIT13


	)

106 
	#GPIO_46
 
BIT14


	)

107 
	#GPIO_47
 
BIT15


	)

108 
	#GPIO_48
 
BIT16


	)

109 
	#GPIO_49
 
BIT17


	)

110 
	#GPIO_50
 
BIT18


	)

111 
	#GPIO_51
 
BIT19


	)

112 
	#GPIO_52
 
BIT20


	)

113 
	#GPIO_53
 
BIT21


	)

114 
	#GPIO_54
 
BIT22


	)

115 
	#GPIO_55
 
BIT23


	)

116 
	#GPIO_56
 
BIT24


	)

117 
	#GPIO_57
 
BIT25


	)

118 
	#GPIO_58
 
BIT26


	)

119 
	#GPIO_59
 
BIT27


	)

120 
	#GPIO_60
 
BIT28


	)

121 
	#GPIO_61
 
BIT29


	)

122 
	#GPIO_62
 
BIT30


	)

123 
	#GPIO_63
 
BIT31


	)

125 
	#GPIO_64
 
BIT0


	)

126 
	#GPIO_65
 
BIT1


	)

127 
	#GPIO_66
 
BIT2


	)

128 
	#GPIO_67
 
BIT3


	)

129 
	#GPIO_68
 
BIT4


	)

130 
	#GPIO_69
 
BIT5


	)

131 
	#GPIO_70
 
BIT6


	)

132 
	#GPIO_71
 
BIT7


	)

133 
	#GPIO_72
 
BIT8


	)

134 
	#GPIO_73
 
BIT9


	)

135 
	#GPIO_74
 
BIT10


	)

136 
	#GPIO_75
 
BIT11


	)

137 
	#GPIO_76
 
BIT12


	)

138 
	#GPIO_77
 
BIT13


	)

139 
	#GPIO_78
 
BIT14


	)

140 
	#GPIO_79
 
BIT15


	)

141 
	#GPIO_80
 
BIT16


	)

142 
	#GPIO_81
 
BIT17


	)

143 
	#GPIO_82
 
BIT18


	)

144 
	#GPIO_83
 
BIT19


	)

145 
	#GPIO_84
 
BIT20


	)

146 
	#GPIO_85
 
BIT21


	)

147 
	#GPIO_86
 
BIT22


	)

148 
	#GPIO_87
 
BIT23


	)

149 
	#GPIO_88
 
BIT24


	)

150 
	#GPIO_89
 
BIT25


	)

151 
	#GPIO_90
 
BIT26


	)

152 
	#GPIO_91
 
BIT27


	)

153 
	#GPIO_92
 
BIT28


	)

154 
	#GPIO_93
 
BIT29


	)

155 
	#GPIO_94
 
BIT30


	)

156 
	#GPIO_95
 
BIT31


	)

158 
	#GPIO_96
 
BIT0


	)

159 
	#GPIO_97
 
BIT1


	)

160 
	#GPIO_98
 
BIT2


	)

161 
	#GPIO_99
 
BIT3


	)

162 
	#GPIO_100
 
BIT4


	)

163 
	#GPIO_101
 
BIT5


	)

164 
	#GPIO_102
 
BIT6


	)

165 
	#GPIO_103
 
BIT7


	)

166 
	#GPIO_104
 
BIT8


	)

167 
	#GPIO_105
 
BIT9


	)

168 
	#GPIO_106
 
BIT10


	)

169 
	#GPIO_107
 
BIT11


	)

170 
	#GPIO_108
 
BIT12


	)

171 
	#GPIO_109
 
BIT13


	)

172 
	#GPIO_110
 
BIT14


	)

173 
	#GPIO_111
 
BIT15


	)

174 
	#GPIO_112
 
BIT16


	)

175 
	#GPIO_113
 
BIT17


	)

176 
	#GPIO_114
 
BIT18


	)

177 
	#GPIO_115
 
BIT19


	)

178 
	#GPIO_116
 
BIT20


	)

179 
	#GPIO_117
 
BIT21


	)

180 
	#GPIO_118
 
BIT22


	)

181 
	#GPIO_119
 
BIT23


	)

182 
	#GPIO_120
 
BIT24


	)

183 
	#GPIO_121
 
BIT25


	)

184 
	#GPIO_122
 
BIT26


	)

185 
	#GPIO_123
 
BIT27


	)

186 
	#GPIO_124
 
BIT28


	)

187 
	#GPIO_125
 
BIT29


	)

188 
	#GPIO_126
 
BIT30


	)

189 
	#GPIO_127
 
BIT31


	)

197 
	#PIOA_ASR_MISO
 
BIT0


	)

198 
	#PIOA_ASR_MOSI
 
BIT1


	)

199 
	#PIOA_ASR_SPCK
 
BIT2


	)

200 
	#PIOA_ASR_NPCS0
 
BIT3


	)

201 
	#PIOA_ASR_NPCS1
 
BIT4


	)

202 
	#PIOA_ASR_NPCS2
 
BIT5


	)

203 
	#PIOA_ASR_NPCS3
 
BIT6


	)

204 
	#PIOA_ASR_ETXCK
 
BIT7


	)

205 
	#PIOA_ASR_ETXEN
 
BIT8


	)

206 
	#PIOA_ASR_ETX0
 
BIT9


	)

207 
	#PIOA_ASR_ETX1
 
BIT10


	)

208 
	#PIOA_ASR_ECRS
 
BIT11


	)

209 
	#PIOA_ASR_ERX0
 
BIT12


	)

210 
	#PIOA_ASR_ERX1
 
BIT13


	)

211 
	#PIOA_ASR_ERXER
 
BIT14


	)

212 
	#PIOA_ASR_EMDC
 
BIT15


	)

213 
	#PIOA_ASR_EMDIO
 
BIT16


	)

214 
	#PIOA_ASR_TXD0
 
BIT17


	)

215 
	#PIOA_ASR_RXD0
 
BIT18


	)

216 
	#PIOA_ASR_SCK0
 
BIT19


	)

217 
	#PIOA_ASR_CTS0
 
BIT20


	)

218 
	#PIOA_ASR_RTS0
 
BIT21


	)

219 
	#PIOA_ASR_RXD2
 
BIT22


	)

220 
	#PIOA_ASR_TXD2
 
BIT23


	)

221 
	#PIOA_ASR_SCK2
 
BIT24


	)

222 
	#PIOA_ASR_TWD
 
BIT25


	)

223 
	#PIOA_ASR_TWCK
 
BIT26


	)

224 
	#PIOA_ASR_MCCK
 
BIT27


	)

225 
	#PIOA_ASR_MCCDA
 
BIT28


	)

226 
	#PIOA_ASR_MCDA0
 
BIT29


	)

227 
	#PIOA_ASR_DRXD
 
BIT30


	)

228 
	#PIOA_ASR_DTXD
 
BIT31


	)

231 
	#PIOA_BSR_PCK3
 
BIT0


	)

232 
	#PIOA_BSR_PCK0
 
BIT1


	)

233 
	#PIOA_BSR_IRQ4
 
BIT2


	)

234 
	#PIOA_BSR_IRQ5
 
BIT3


	)

236 
	#PIOA_BSR_TXD3
 
BIT5


	)

237 
	#PIOA_BSR_RXD3
 
BIT6


	)

238 
	#PIOA_BSR_PCK2
 
BIT7


	)

239 
	#PIOA_BSR_MCCDB
 
BIT8


	)

240 
	#PIOA_BSR_MCDB0
 
BIT9


	)

241 
	#PIOA_BSR_MCDB1
 
BIT10


	)

242 
	#PIOA_BSR_MCDB2
 
BIT11


	)

243 
	#PIOA_BSR_MCDB3
 
BIT12


	)

244 
	#PIOA_BSR_TCLK0
 
BIT13


	)

245 
	#PIOA_BSR_TCLK1
 
BIT14


	)

246 
	#PIOA_BSR_TCLK2
 
BIT15


	)

247 
	#PIOA_BSR_IRQ6
 
BIT16


	)

248 
	#PIOA_BSR_TIOA0
 
BIT17


	)

249 
	#PIOA_BSR_TIOB0
 
BIT18


	)

250 
	#PIOA_BSR_TIOA1
 
BIT19


	)

251 
	#PIOA_BSR_TIOB1
 
BIT20


	)

252 
	#PIOA_BSR_TIOA2
 
BIT21


	)

253 
	#PIOA_BSR_TIOB2
 
BIT22


	)

254 
	#PIOA_BSR_IRQ3
 
BIT23


	)

255 
	#PIOA_BSR_PCK1
 
BIT24


	)

256 
	#PIOA_BSR_IRQ2
 
BIT25


	)

257 
	#PIOA_BSR_IRQ1
 
BIT26


	)

258 
	#PIOA_BSR_TCLK3
 
BIT27


	)

259 
	#PIOA_BSR_TCLK4
 
BIT28


	)

260 
	#PIOA_BSR_TCLK5
 
BIT29


	)

261 
	#PIOA_BSR_CTS2
 
BIT30


	)

262 
	#PIOA_BSR_RTS2
 
BIT31


	)

265 
	#PIOB_ASR_TF0
 
BIT0


	)

266 
	#PIOB_ASR_TK0
 
BIT1


	)

267 
	#PIOB_ASR_TD0
 
BIT2


	)

268 
	#PIOB_ASR_RD0
 
BIT3


	)

269 
	#PIOB_ASR_RK0
 
BIT4


	)

270 
	#PIOB_ASR_RF0
 
BIT5


	)

271 
	#PIOB_ASR_TF1
 
BIT6


	)

272 
	#PIOB_ASR_TK1
 
BIT7


	)

273 
	#PIOB_ASR_TD1
 
BIT8


	)

274 
	#PIOB_ASR_RD1
 
BIT9


	)

275 
	#PIOB_ASR_RK1
 
BIT10


	)

276 
	#PIOB_ASR_RF1
 
BIT11


	)

277 
	#PIOB_ASR_TF2
 
BIT12


	)

278 
	#PIOB_ASR_TK2
 
BIT13


	)

279 
	#PIOB_ASR_TD2
 
BIT14


	)

280 
	#PIOB_ASR_RD2
 
BIT15


	)

281 
	#PIOB_ASR_RK2
 
BIT16


	)

282 
	#PIOB_ASR_RF2
 
BIT17


	)

283 
	#PIOB_ASR_RI1
 
BIT18


	)

284 
	#PIOB_ASR_DTR1
 
BIT19


	)

285 
	#PIOB_ASR_TXD1
 
BIT20


	)

286 
	#PIOB_ASR_RXD1
 
BIT21


	)

287 
	#PIOB_ASR_SCK1
 
BIT22


	)

288 
	#PIOB_ASR_DCD1
 
BIT23


	)

289 
	#PIOB_ASR_CTS1
 
BIT24


	)

290 
	#PIOB_ASR_DSR1
 
BIT25


	)

291 
	#PIOB_ASR_RTS1
 
BIT26


	)

292 
	#PIOB_ASR_PCK0
 
BIT27


	)

293 
	#PIOB_ASR_FIQ
 
BIT28


	)

294 
	#PIOB_ASR_IRQ0
 
BIT29


	)

297 
	#PIOB_BSR_RTS3
 
BIT0


	)

298 
	#PIOB_BSR_CTS3
 
BIT1


	)

299 
	#PIOB_BSR_SCK3
 
BIT2


	)

300 
	#PIOB_BSR_MCDA1
 
BIT3


	)

301 
	#PIOB_BSR_MCDA2
 
BIT4


	)

302 
	#PIOB_BSR_MCDA3
 
BIT5


	)

303 
	#PIOB_BSR_TIOA3
 
BIT6


	)

304 
	#PIOB_BSR_TIOB3
 
BIT7


	)

305 
	#PIOB_BSR_TIOA4
 
BIT8


	)

306 
	#PIOB_BSR_TIOB4
 
BIT9


	)

307 
	#PIOB_BSR_TIOA5
 
BIT10


	)

308 
	#PIOB_BSR_TIOB5
 
BIT11


	)

309 
	#PIOB_BSR_ETX2
 
BIT12


	)

310 
	#PIOB_BSR_ETX3
 
BIT13


	)

311 
	#PIOB_BSR_ETXER
 
BIT14


	)

312 
	#PIOB_BSR_ERX2
 
BIT15


	)

313 
	#PIOB_BSR_ERX3
 
BIT16


	)

314 
	#PIOB_BSR_ERXDV
 
BIT17


	)

315 
	#PIOB_BSR_ECOL
 
BIT18


	)

316 
	#PIOB_BSR_ERXCK
 
BIT19


	)

317 
	#PIOB_BSR_EF100
 
BIT25


	)

320 
	#PIOC_ASR_BFCK
 
BIT0


	)

321 
	#PIOC_ASR_BFRDY
 
BIT1


	)

322 
	#PIOC_ASR_BFAVD
 
BIT2


	)

323 
	#PIOC_ASR_BFBAA
 
BIT3


	)

324 
	#PIOC_ASR_BFOE
 
BIT4


	)

325 
	#PIOC_ASR_BFWE
 
BIT5


	)

326 
	#PIOC_ASR_NWAIT
 
BIT6


	)

327 
	#PIOC_ASR_A23
 
BIT7


	)

328 
	#PIOC_ASR_A24
 
BIT8


	)

329 
	#PIOC_ASR_A25
 
BIT9


	)

330 
	#PIOC_ASR_NCS4
 
BIT10


	)

331 
	#PIOC_ASR_NCS5
 
BIT11


	)

332 
	#PIOC_ASR_NCS6
 
BIT12


	)

333 
	#PIOC_ASR_NCS7
 
BIT13


	)

334 
	#PIOC_ASR_D16
 
BIT16


	)

335 
	#PIOC_ASR_D17
 
BIT17


	)

336 
	#PIOC_ASR_D18
 
BIT18


	)

337 
	#PIOC_ASR_D19
 
BIT19


	)

338 
	#PIOC_ASR_D20
 
BIT20


	)

339 
	#PIOC_ASR_D21
 
BIT21


	)

340 
	#PIOC_ASR_D22
 
BIT22


	)

341 
	#PIOC_ASR_D23
 
BIT23


	)

342 
	#PIOC_ASR_D24
 
BIT24


	)

343 
	#PIOC_ASR_D25
 
BIT25


	)

344 
	#PIOC_ASR_D26
 
BIT26


	)

345 
	#PIOC_ASR_D27
 
BIT27


	)

346 
	#PIOC_ASR_D28
 
BIT28


	)

347 
	#PIOC_ASR_D29
 
BIT29


	)

348 
	#PIOC_ASR_D30
 
BIT30


	)

349 
	#PIOC_ASR_D31
 
BIT31


	)

354 
	#PIOD_ASR_ETX0
 
BIT0


	)

355 
	#PIOD_ASR_ETX1
 
BIT1


	)

356 
	#PIOD_ASR_ETX2
 
BIT2


	)

357 
	#PIOD_ASR_ETX3
 
BIT3


	)

358 
	#PIOD_ASR_ETXEN
 
BIT4


	)

359 
	#PIOD_ASR_ETXER
 
BIT5


	)

360 
	#PIOD_ASR_DTXD
 
BIT6


	)

361 
	#PIOD_ASR_PCK0
 
BIT7


	)

362 
	#PIOD_ASR_PCK1
 
BIT8


	)

363 
	#PIOD_ASR_PCK2
 
BIT9


	)

364 
	#PIOD_ASR_PCK3
 
BIT10


	)

365 
	#PIOD_ASR_TD0
 
BIT15


	)

366 
	#PIOD_ASR_TD1
 
BIT16


	)

367 
	#PIOD_ASR_TD2
 
BIT17


	)

368 
	#PIOD_ASR_NPCS1
 
BIT18


	)

369 
	#PIOD_ASR_NPCS2
 
BIT19


	)

370 
	#PIOD_ASR_NPCS3
 
BIT20


	)

371 
	#PIOD_ASR_RTS0
 
BIT21


	)

372 
	#PIOD_ASR_RTS1
 
BIT22


	)

373 
	#PIOD_ASR_RTS2
 
BIT23


	)

374 
	#PIOD_ASR_RTS3
 
BIT24


	)

375 
	#PIOD_ASR_DTR1
 
BIT25


	)

379 
	#PIOC_ASR_TSYNC
 
BIT7


	)

380 
	#PIOC_ASR_TCLK
 
BIT8


	)

381 
	#PIOC_ASR_TPS0
 
BIT9


	)

382 
	#PIOC_ASR_TPS1
 
BIT10


	)

383 
	#PIOC_ASR_TPS2
 
BIT11


	)

384 
	#PIOC_ASR_TPK0
 
BIT12


	)

385 
	#PIOC_ASR_TPK1
 
BIT13


	)

386 
	#PIOC_ASR_TPK2
 
BIT14


	)

387 
	#PIOC_ASR_TPK3
 
BIT15


	)

388 
	#PIOC_ASR_TPK4
 
BIT16


	)

389 
	#PIOC_ASR_TPK5
 
BIT17


	)

390 
	#PIOC_ASR_TPK6
 
BIT18


	)

391 
	#PIOC_ASR_TPK7
 
BIT19


	)

392 
	#PIOC_ASR_TPK8
 
BIT20


	)

393 
	#PIOC_ASR_TPK9
 
BIT21


	)

394 
	#PIOC_ASR_TPK10
 
BIT22


	)

395 
	#PIOC_ASR_TPK11
 
BIT23


	)

396 
	#PIOC_ASR_TPK12
 
BIT24


	)

397 
	#PIOC_ASR_TPK13
 
BIT25


	)

398 
	#PIOC_ASR_TPK14
 
BIT26


	)

399 
	#PIOC_ASR_TPK15
 
BIT27


	)

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_mem.h

11 #i‚de‡
AT91RM9200_MEM_H


12 
	#AT91RM9200_MEM_H


	)

17 
	#EBI_CSA
 0x00

	)

18 
	#EBI_CFGR
 0x04

	)

22 
	#EBI_CSA_CS4_CF
 
BIT4


	)

23 
	#EBI_CSA_CS3_SMM
 
BIT3


	)

24 
	#EBI_CSA_CS1_SDRAM
 
BIT1


	)

25 
	#EBI_CSA_CS0_BF
 
BIT0


	)

28 
	#EBI_CFGR_DBPU
 
BIT0


	)

33 
	#SMC_CSR0
 0x00

	)

34 
	#SMC_CSR1
 0x04

	)

35 
	#SMC_CSR2
 0x08

	)

36 
	#SMC_CSR3
 0x0C

	)

37 
	#SMC_CSR4
 0x10

	)

38 
	#SMC_CSR5
 0x14

	)

39 
	#SMC_CSR6
 0x18

	)

40 
	#SMC_CSR7
 0x1C

	)

44 
	#SMC_CSR_RWHOLD
(
_x_
Ë((_x_ & 0x3Ë<< 28Ë

	)

45 
	#SMC_CSR_RWSETUP
(
_x_
Ë((_x_ & 0x3Ë<< 24Ë

	)

46 
	#SMC_CSR_ACSS_0
 (0 << 16Ë

	)

47 
	#SMC_CSR_ACSS_1
 (1 << 16Ë

	)

48 
	#SMC_CSR_ACSS_2
 (2 << 16Ë

	)

49 
	#SMC_CSR_ACSS_3
 (3 << 16Ë

	)

50 
	#SMC_CSR_DRP_NORMAL
 0

	)

51 
	#SMC_CSR_DRP_EARLY
 
BIT15


	)

52 
	#SMC_CSR_DBW_16
 (1 << 13Ë

	)

53 
	#SMC_CSR_DBW_8
 (2 << 13Ë

	)

54 
	#SMC_CSR_BAT_16_1
 0

	)

55 
	#SMC_CSR_BAT_16_2
 
BIT12


	)

56 
	#SMC_CSR_TDF
(
_x_
Ë((_x_ & 0xfË<< 8Ë

	)

57 
	#SMC_CSR_WSEN
 
BIT7


	)

58 
	#SMC_CSR_NWS
(
_x_
Ë((_x_ & 0x7fË<< 0Ë

	)

63 
	#SDRC_MR
 0x00

	)

64 
	#SDRC_TR
 0x04

	)

65 
	#SDRC_CR
 0x08

	)

66 
	#SDRC_SRR
 0x0C

	)

67 
	#SDRC_LPR
 0x10

	)

68 
	#SDRC_IER
 0x14

	)

69 
	#SDRC_IDR
 0x18

	)

70 
	#SDRC_IMR
 0x1C

	)

71 
	#SDRC_ISR
 0x20

	)

75 
	#SDRC_MR_DBW_16
 
BIT4


	)

76 
	#SDRC_MR_NORM
 (0 << 0Ë

	)

77 
	#SDRC_MR_NOP
 (1 << 0Ë

	)

78 
	#SDRC_MR_PRE
 (2 << 0Ë

	)

79 
	#SDRC_MR_MRS
 (3 << 0Ë

	)

80 
	#SDRC_MR_REF
 (4 << 0Ë

	)

83 
	#SDRC_TR_COUNT
(
_x_
Ë((_x_ & 0xfffË<< 0)

	)

86 
	#SDRC_CR_TXSR
(
_x_
Ë((_x_ & 0xfË<< 27Ë

	)

87 
	#SDRC_CR_TRAS
(
_x_
Ë((_x_ & 0xfË<< 23Ë

	)

88 
	#SDRC_CR_TRCD
(
_x_
Ë((_x_ & 0xfË<< 19Ë

	)

89 
	#SDRC_CR_TRP
(
_x_
Ë((_x_ & 0xfË<< 15Ë

	)

90 
	#SDRC_CR_TRC
(
_x_
Ë((_x_ & 0xfË<< 11Ë

	)

91 
	#SDRC_CR_TWR
(
_x_
Ë((_x_ & 0xfË<< 7Ë

	)

92 
	#SDRC_CR_CAS_2
 (2 << 5Ë

	)

93 
	#SDRC_CR_NB_2
 0

	)

94 
	#SDRC_CR_NB_4
 
BIT4


	)

95 
	#SDRC_CR_NR_11
 (0 << 2Ë

	)

96 
	#SDRC_CR_NR_12
 (1 << 2Ë

	)

97 
	#SDRC_CR_NR_13
 (2 << 2Ë

	)

98 
	#SDRC_CR_NC_8
 (0 << 0Ë

	)

99 
	#SDRC_CR_NC_9
 (1 << 0Ë

	)

100 
	#SDRC_CR_NC_10
 (2 << 0Ë

	)

101 
	#SDRC_CR_NC_11
 (3 << 0Ë

	)

104 
	#SDRC_SRR_SRCB
 
BIT0


	)

107 
	#SDRC_LPR_LPCB
 
BIT0


	)

113 
	#SDRC_INT_RES
 
BIT0


	)

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_pmc.h

11 #i‚de‡
__AT91RM9200_PMC_H__


12 
	#__AT91RM9200_PMC_H__


	)

14 
	~<bôs.h
>

19 
©91rm9200_gë_maö˛k
();

20 
©91rm9200_gë_¶ck
();

21 
©91rm9200_gë_mck
();

24 
	#PMC_SCER
 0x00

	)

25 
	#PMC_SCDR
 0x04

	)

26 
	#PMC_SCSR
 0x08

	)

27 
	#PMC_PCER
 0x10

	)

28 
	#PMC_PCDR
 0x14

	)

29 
	#PMC_PCSR
 0x18

	)

30 
	#PMC_MOR
 0x20

	)

31 
	#PMC_MCFR
 0x24

	)

32 
	#PMC_PLLAR
 0x28

	)

33 
	#PMC_PLLBR
 0x2C

	)

34 
	#PMC_MCKR
 0x30

	)

35 
	#PMC_PCKR0
 0x40

	)

36 
	#PMC_PCKR1
 0x44

	)

37 
	#PMC_PCKR2
 0x48

	)

38 
	#PMC_PCKR3
 0x4C

	)

39 
	#PMC_PCKR4
 0x50

	)

40 
	#PMC_PCKR5
 0x54

	)

41 
	#PMC_PCKR6
 0x58

	)

42 
	#PMC_PCKR7
 0x5C

	)

43 
	#PMC_IER
 0x60

	)

44 
	#PMC_IDR
 0x64

	)

45 
	#PMC_SR
 0x68

	)

46 
	#PMC_IMR
 0x6C

	)

53 
	#PMC_SCR_PCK7
 
BIT15


	)

54 
	#PMC_SCR_PCK6
 
BIT14


	)

55 
	#PMC_SCR_PCK5
 
BIT13


	)

56 
	#PMC_SCR_PCK4
 
BIT12


	)

57 
	#PMC_SCR_PCK3
 
BIT11


	)

58 
	#PMC_SCR_PCK2
 
BIT10


	)

59 
	#PMC_SCR_PCK1
 
BIT9


	)

60 
	#PMC_SCR_PCK0
 
BIT8


	)

61 
	#PMC_SCR_UHP
 
BIT4


	)

62 
	#PMC_SCR_MCKUDP
 
BIT2


	)

63 
	#PMC_SCR_UDP
 
BIT1


	)

64 
	#PMC_SCR_PCK
 
BIT0


	)

69 
	#PMC_PCR_PID_EMAC
 
BIT24


	)

70 
	#PMC_PCR_PID_UHP
 
BIT23


	)

71 
	#PMC_PCR_PID_TC5
 
BIT22


	)

72 
	#PMC_PCR_PID_TC4
 
BIT21


	)

73 
	#PMC_PCR_PID_TC3
 
BIT20


	)

74 
	#PMC_PCR_PID_TC2
 
BIT19


	)

75 
	#PMC_PCR_PID_TC1
 
BIT18


	)

76 
	#PMC_PCR_PID_TC0
 
BIT17


	)

77 
	#PMC_PCR_PID_SSC2
 
BIT16


	)

78 
	#PMC_PCR_PID_SSC1
 
BIT15


	)

79 
	#PMC_PCR_PID_SSC0
 
BIT14


	)

80 
	#PMC_PCR_PID_SPI
 
BIT13


	)

81 
	#PMC_PCR_PID_TWI
 
BIT12


	)

82 
	#PMC_PCR_PID_UDP
 
BIT11


	)

83 
	#PMC_PCR_PID_MCI
 
BIT10


	)

84 
	#PMC_PCR_PID_US3
 
BIT9


	)

85 
	#PMC_PCR_PID_US2
 
BIT8


	)

86 
	#PMC_PCR_PID_US1
 
BIT7


	)

87 
	#PMC_PCR_PID_US0
 
BIT6


	)

88 
	#PMC_PCR_PID_PIOD
 
BIT5


	)

89 
	#PMC_PCR_PID_PIOC
 
BIT4


	)

90 
	#PMC_PCR_PID_PIOB
 
BIT3


	)

91 
	#PMC_PCR_PID_PIOA
 
BIT2


	)

94 
	#PMC_MOR_MOSCEN
 
BIT0


	)

97 
	#PMC_MCFR_MAINRDY
 
BIT16


	)

100 
	#PMC_PLLAR_MUST_SET
 
BIT29


	)

101 
	#PMC_PLLAR_MUL
(
_x_
Ë((_x_ & 0x7ffË<< 16Ë

	)

102 
	#PMC_PLLAR_MUL_MASK
 (0x7f‡<< 16Ë

	)

104 
	#PMC_PLLAR_OUT_80_160
 (0 << 14Ë

	)

105 
	#PMC_PLLAR_OUT_150_240
 (2 << 14Ë

	)

106 
	#PMC_PLLAR_DIV
(
_x_
Ë((_x_ & 0xffË<< 0Ë

	)

107 
	#PMC_PLLAR_DIV_MASK
 (0xffË

	)

110 
	#PMC_PLLBR_USB_96M
 
BIT28


	)

111 
	#PMC_PLLBR_MUL
(
_x_
Ë((_x_ & 0x7ffË<< 16Ë

	)

112 
	#PMC_PLLBR_MUL_MASK
 (0x7f‡<< 16Ë

	)

113 
	#PMC_PLLBR_OUT_80_160
 (0 << 14Ë

	)

114 
	#PMC_PLLBR_OUT_150_240
 (2 << 14Ë

	)

115 
	#PMC_PLLBR_DIV
(
_x_
Ë((_x_ & 0xffË<< 0Ë

	)

116 
	#PMC_PLLBR_DIV_MASK
 (0xffË

	)

119 
	#PMC_MCKR_MDIV_MASK
 (3 << 8Ë

	)

120 
	#PMC_MCKR_MDIV_1
 (0 << 8Ë

	)

121 
	#PMC_MCKR_MDIV_2
 (1 << 8Ë

	)

122 
	#PMC_MCKR_MDIV_3
 (2 << 8Ë

	)

123 
	#PMC_MCKR_MDIV_4
 (3 << 8Ë

	)

124 
	#PMC_MCKR_PRES_MASK
 (7 << 2Ë

	)

125 
	#PMC_MCKR_PRES_1
 (0 << 2Ë

	)

126 
	#PMC_MCKR_PRES_2
 (1 << 2Ë

	)

127 
	#PMC_MCKR_PRES_4
 (2 << 2Ë

	)

128 
	#PMC_MCKR_PRES_8
 (3 << 2Ë

	)

129 
	#PMC_MCKR_PRES_16
 (4 << 2Ë

	)

130 
	#PMC_MCKR_PRES_32
 (5 << 2Ë

	)

131 
	#PMC_MCKR_PRES_64
 (6 << 2Ë

	)

132 
	#PMC_MCKR_CSS_MASK
 (3 << 0Ë

	)

133 
	#PMC_MCKR_CSS_SLOW
 (0 << 0Ë

	)

134 
	#PMC_MCKR_CSS_MAIN
 (1 << 0Ë

	)

135 
	#PMC_MCKR_CSS_PLLA
 (2 << 0Ë

	)

136 
	#PMC_MCKR_CSS_PLLB
 (3 << 0Ë

	)

139 
	#PMC_PCKR_PRES_1
 (0 << 2Ë

	)

140 
	#PMC_PCKR_PRES_2
 (1 << 2Ë

	)

141 
	#PMC_PCKR_PRES_4
 (2 << 2Ë

	)

142 
	#PMC_PCKR_PRES_8
 (3 << 2Ë

	)

143 
	#PMC_PCKR_PRES_16
 (4 << 2Ë

	)

144 
	#PMC_PCKR_PRES_32
 (5 << 2Ë

	)

145 
	#PMC_PCKR_PRES_64
 (6 << 2Ë

	)

146 
	#PMC_PCKR_CSS_SLOW
 (0 << 0Ë

	)

147 
	#PMC_PCKR_CSS_MAIN
 (1 << 0Ë

	)

148 
	#PMC_PCKR_CSS_PLLA
 (2 << 0Ë

	)

149 
	#PMC_PCKR_CSS_PLLB
 (3 << 0Ë

	)

155 
	#PMC_INT_PCK7_RDY
 
BIT15


	)

156 
	#PMC_INT_PCK6_RDY
 
BIT14


	)

157 
	#PMC_INT_PCK5_RDY
 
BIT13


	)

158 
	#PMC_INT_PCK4_RDY
 
BIT12


	)

159 
	#PMC_INT_PCK3_RDY
 
BIT11


	)

160 
	#PMC_INT_PCK2_RDY
 
BIT10


	)

161 
	#PMC_INT_PCK1_RDY
 
BIT9


	)

162 
	#PMC_INT_PCK0_RDY
 
BIT8


	)

163 
	#PMC_INT_MCK_RDY
 
BIT3


	)

164 
	#PMC_INT_LOCKB
 
BIT2


	)

165 
	#PMC_INT_LCKA
 
BIT1


	)

166 
	#PMC_INT_MOSCS
 
BIT0


	)

	@src/lib/libcpu/arm/at91rm9200/include/at91rm9200_usart.h

15 #i‚de‡
__AT91RM9200_USART_H__


16 
	#__AT91RM9200_USART_H__


	)

18 
	~<bôs.h
>

21 
	#US_CR
 0x00

	)

22 
	#US_MR
 0x04

	)

23 
	#US_IER
 0x08

	)

24 
	#US_IDR
 0x0C

	)

25 
	#US_IMR
 0x10

	)

26 
	#US_SR
 0x14

	)

27 
	#US_RHR
 0x18

	)

28 
	#US_THR
 0x1C

	)

29 
	#US_BRGR
 0x20

	)

30 
	#US_RTOR
 0x24

	)

31 
	#US_TTGR
 0x28

	)

32 
	#US_C1R
 0x40

	)

33 
	#US_C2R
 0x44

	)

34 
	#US_FNTR
 0x48

	)

35 
	#US_IF
 0x4C

	)

39 
	#US_CR_RSTRX
 
BIT2


	)

40 
	#US_CR_RSTTX
 
BIT3


	)

41 
	#US_CR_RXEN
 
BIT4


	)

42 
	#US_CR_RXDIS
 
BIT5


	)

43 
	#US_CR_TXEN
 
BIT6


	)

44 
	#US_CR_TXDIS
 
BIT7


	)

45 
	#US_CR_RSTSTA
 
BIT8


	)

46 
	#US_CR_STTBRK
 
BIT9


	)

47 
	#US_CR_STPBRK
 
BIT10


	)

48 
	#US_CR_STTTO
 
BIT11


	)

49 
	#US_CR_SENDA
 
BIT12


	)

50 
	#US_CR_RSTIT
 
BIT13


	)

51 
	#US_CR_RSTNACK
 
BIT14


	)

52 
	#US_CR_RETTO
 
BIT15


	)

53 
	#US_CR_DTREN
 
BIT16


	)

54 
	#US_CR_DTRDIS
 
BIT17


	)

55 
	#US_CR_RTSEN
 
BIT18


	)

56 
	#US_CR_RTSDIS
 
BIT19


	)

60 
	#US_MR_USMODE
 (0xF << 0Ë

	)

61 
	#US_MR_USMODE_NORMAL
 0

	)

62 
	#US_MR_USMODE_RS485
 1

	)

63 
	#US_MR_USMODE_HWHS
 2

	)

64 
	#US_MR_USMODE_MODEM
 3

	)

65 
	#US_MR_USMODE_ISO7816_T0
 4

	)

66 
	#US_MR_USMODE_ISO7816_T1
 6

	)

67 
	#US_MR_USMODE_IRDA
 8

	)

68 
	#US_MR_USCLKS
 (3 << 4Ë

	)

69 
	#US_MR_USCLKS_MCK
 (0 << 4)

	)

70 
	#US_MR_USCLKS_MCK_DIV8
 (1 << 4)

	)

71 
	#US_MR_USCLKS_SCK
 (3 << 4)

	)

72 
	#US_MR_CHRL
 (3 << 6Ë

	)

73 
	#US_MR_CHRL_5
 (0 << 6)

	)

74 
	#US_MR_CHRL_6
 (1 << 6)

	)

75 
	#US_MR_CHRL_7
 (2 << 6)

	)

76 
	#US_MR_CHRL_8
 (3 << 6)

	)

77 
	#US_MR_SYNC
 (1 << 8Ë

	)

78 
	#US_MR_PAR
 (7 << 9Ë

	)

79 
	#US_MR_PAR_EVEN
 (0 << 9Ë

	)

80 
	#US_MR_PAR_ODD
 (1 << 9Ë

	)

81 
	#US_MR_PAR_SPACE
 (2 << 9Ë

	)

82 
	#US_MR_PAR_MARK
 (3 << 9Ë

	)

83 
	#US_MR_PAR_NONE
 (4 << 9Ë

	)

84 
	#US_MR_PAR_MDROP
 (6 << 9Ë

	)

85 
	#US_MR_NBSTOP
 (3 << 12Ë

	)

86 
	#US_MR_NBSTOP_1
 (0 << 12)

	)

87 
	#US_MR_NBSTOP_1_5
 (1 << 12)

	)

88 
	#US_MR_NBSTOP_2
 (2 << 12)

	)

89 
	#US_MR_CHMODE
 (3 << 14Ë

	)

90 
	#US_MR_CHMODE_NORM
 (0 << 14Ë

	)

91 
	#US_MR_CHMODE_AUTO
 (1 << 14Ë

	)

92 
	#US_MR_CHMODE_LOC
 (2 << 14Ë

	)

93 
	#US_MR_CHMODE_REM
 (3 << 14Ë

	)

94 
	#US_MR_MSBF
 (1 << 16Ë

	)

95 
	#US_MR_MODE9
 (1 << 17Ë

	)

96 
	#US_MR_CLKO
 (1 << 18Ë

	)

97 
	#US_MR_OVER
 (1 << 19Ë

	)

98 
	#US_MR_INACK
 (1 << 20Ë

	)

99 
	#US_MR_DSNACK
 (1 << 21Ë

	)

100 
	#US_MR_MAX_ITER
 (7 << 24Ë

	)

101 
	#US_MR_FILTER
 (1 << 28Ë

	)

107 
	#US_IER_RXRDY
 
BIT0


	)

108 
	#US_IER_TXRDY
 
BIT1


	)

109 
	#US_IER_RXBRK
 
BIT2


	)

110 
	#US_IER_ENDRX
 
BIT3


	)

112 
	#US_IER_OVRE
 
BIT5


	)

113 
	#US_IER_FRAME
 
BIT6


	)

114 
	#US_IER_PARE
 
BIT7


	)

115 
	#US_IER_TIMEOUT
 
BIT8


	)

116 
	#US_IER_TXEMPTY
 
BIT9


	)

117 
	#US_IER_ITERATION
 
BIT10


	)

118 
	#US_IER_TXBUFE
 
BIT11


	)

119 
	#US_IER_RXBUFF
 
BIT12


	)

120 
	#US_IER_NACK
 
BIT13


	)

121 
	#US_IER_RIIC
 
BIT16


	)

122 
	#US_IER_DSRIC
 
BIT17


	)

123 
	#US_IER_DCDIC
 
BIT18


	)

124 
	#US_IER_CTSIC
 
BIT19


	)

125 
	#US_IER_ALL
 0xC0001AFB

	)

128 
	#US_FNTR_NTRST
 
BIT0


	)

131 vﬁ©ûê
uöt32_t
 
	m¸
;

132 vﬁ©ûê
uöt32_t
 
	mmr
;

133 vﬁ©ûê
uöt32_t
 
	mõr
;

134 vﬁ©ûê
uöt32_t
 
	midr
;

135 vﬁ©ûê
uöt32_t
 
	mimr
;

136 vﬁ©ûê
uöt32_t
 
	m§
;

137 vﬁ©ûê
uöt32_t
 
	mrhr
;

138 vﬁ©ûê
uöt32_t
 
	mthr
;

139 vﬁ©ûê
uöt32_t
 
	mbrgr
;

140 vﬁ©ûê
uöt32_t
 
	m_ªs0
[7];

141 vﬁ©ûê
uöt32_t
 
	mcidr
;

142 vﬁ©ûê
uöt32_t
 
	mexid
;

143 vﬁ©ûê
uöt32_t
 
	m‚r
;

144 } 
	t©91rm9200_ußπ_ªgs_t
;

	@src/lib/libcpu/arm/at91rm9200/include/bits.h

11 #i‚de‡
__BITS_H__


12 
	#__BITS_H__


	)

14 
	#BIT0
 0x00000001

	)

15 
	#BIT1
 0x00000002

	)

16 
	#BIT2
 0x00000004

	)

17 
	#BIT3
 0x00000008

	)

18 
	#BIT4
 0x00000010

	)

19 
	#BIT5
 0x00000020

	)

20 
	#BIT6
 0x00000040

	)

21 
	#BIT7
 0x00000080

	)

22 
	#BIT8
 0x00000100

	)

23 
	#BIT9
 0x00000200

	)

24 
	#BIT10
 0x00000400

	)

25 
	#BIT11
 0x00000800

	)

26 
	#BIT12
 0x00001000

	)

27 
	#BIT13
 0x00002000

	)

28 
	#BIT14
 0x00004000

	)

29 
	#BIT15
 0x00008000

	)

30 
	#BIT16
 0x00010000

	)

31 
	#BIT17
 0x00020000

	)

32 
	#BIT18
 0x00040000

	)

33 
	#BIT19
 0x00080000

	)

34 
	#BIT20
 0x00100000

	)

35 
	#BIT21
 0x00200000

	)

36 
	#BIT22
 0x00400000

	)

37 
	#BIT23
 0x00800000

	)

38 
	#BIT24
 0x01000000

	)

39 
	#BIT25
 0x02000000

	)

40 
	#BIT26
 0x04000000

	)

41 
	#BIT27
 0x08000000

	)

42 
	#BIT28
 0x10000000

	)

43 
	#BIT29
 0x20000000

	)

44 
	#BIT30
 0x40000000

	)

45 
	#BIT31
 0x80000000

	)

	@src/lib/libcpu/arm/at91rm9200/irq/irq.c

13 
	~<πems/sc‹e/¨mv4.h
>

15 
	~<b•.h
>

16 
	~<b•/úq.h
>

17 
	~<b•/úq-gíîic.h
>

19 
	~<©91rm9200.h
>

21 
	$b•_öãºu±_di•©ch
()

23 
πems_ve˘‹_numbî
 
ve˘‹
 = 
	`AIC_CTL_REG
(
AIC_IVR
);

25 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

27 
	`AIC_CTL_REG
(
AIC_EOICR
) = 0;

28 
	}
}

30 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

32 
	`AIC_CTL_REG
(
AIC_IECR
Ë1 << 
ve˘‹
;

34  
RTEMS_SUCCESSFUL
;

35 
	}
}

37 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

39 
	`AIC_CTL_REG
(
AIC_IDCR
Ë1 << 
ve˘‹
;

41  
RTEMS_SUCCESSFUL
;

42 
	}
}

44 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

46 
i
 = 0;

48 
i
 = 0; i < 32; ++i) {

49 
	`AIC_SVR_REG
(
i
<<2) = i;

53 
	`AIC_CTL_REG
(
AIC_IDCR
) = 0xffffffff;

55 
	`_CPU_ISR_ö°Æl_ve˘‹
(
ARM_EXCEPTION_IRQ
, 
_ARMV4_Ex˚±i⁄_öãºu±
, 
NULL
);

57  
RTEMS_SUCCESSFUL
;

58 
	}
}

	@src/lib/libcpu/arm/at91rm9200/irq/irq.h

13 #i‚de‡
__IRQ_H__


14 
	#__IRQ_H__


	)

16 #i‚de‡
__asm__


18 
	~<πems.h
>

19 
	~<πems/úq.h
>

20 
	~<πems/úq-exãnsi⁄.h
>

25 
	#AT91RM9200_INT_FIQ
 0

	)

26 
	#AT91RM9200_INT_SYSIRQ
 1

	)

27 
	#AT91RM9200_INT_PIOA
 2

	)

28 
	#AT91RM9200_INT_PIOB
 3

	)

29 
	#AT91RM9200_INT_PIOC
 4

	)

30 
	#AT91RM9200_INT_PIOD
 5

	)

31 
	#AT91RM9200_INT_US0
 6

	)

32 
	#AT91RM9200_INT_US1
 7

	)

33 
	#AT91RM9200_INT_US2
 8

	)

34 
	#AT91RM9200_INT_US3
 9

	)

35 
	#AT91RM9200_INT_MCI
 10

	)

36 
	#AT91RM9200_INT_UDP
 11

	)

37 
	#AT91RM9200_INT_TWI
 12

	)

38 
	#AT91RM9200_INT_SPI
 13

	)

39 
	#AT91RM9200_INT_SSC0
 14

	)

40 
	#AT91RM9200_INT_SSC1
 15

	)

41 
	#AT91RM9200_INT_SSC2
 16

	)

42 
	#AT91RM9200_INT_TC0
 17

	)

43 
	#AT91RM9200_INT_TC1
 18

	)

44 
	#AT91RM9200_INT_TC2
 19

	)

45 
	#AT91RM9200_INT_TC3
 20

	)

46 
	#AT91RM9200_INT_TC4
 21

	)

47 
	#AT91RM9200_INT_TC5
 22

	)

48 
	#AT91RM9200_INT_UHP
 23

	)

49 
	#AT91RM9200_INT_EMAC
 24

	)

50 
	#AT91RM9200_INT_IRQ0
 25

	)

51 
	#AT91RM9200_INT_IRQ1
 26

	)

52 
	#AT91RM9200_INT_IRQ2
 27

	)

53 
	#AT91RM9200_INT_IRQ3
 28

	)

54 
	#AT91RM9200_INT_IRQ4
 28

	)

55 
	#AT91RM9200_INT_IRQ5
 30

	)

56 
	#AT91RM9200_INT_IRQ6
 31

	)

57 
	#AT91RM9200_MAX_INT
 32

	)

59 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

61 
	#BSP_INTERRUPT_VECTOR_MAX
 (
AT91RM9200_MAX_INT
 - 1)

	)

	@src/lib/libcpu/arm/at91rm9200/pmc/pmc.c

11 
	~<πems.h
>

12 
	~<b•.h
>

13 
	~<©91rm9200.h
>

14 
	~<©91rm9200_pmc.h
>

16 
	$©91rm9200_gë_maö˛k
()

18  
BSP_MAIN_FREQ
;

19 
	}
}

21 
	$©91rm9200_gë_¶ck
()

23  
BSP_SLCK_FREQ
;

24 
	}
}

26 
	$©91rm9200_gë_mck
()

28 
uöt32_t
 
mck_ªg
;

29 
uöt32_t
 
mck_‰eq
 = 0;

30 
uöt32_t
 
∂l_ªg
;

31 
¥esˇÀr
 = 0;

33 
mck_ªg
 = 
	`PMC_REG
(
PMC_MCKR
);

35 
mck_ªg
 & 
PMC_MCKR_PRES_MASK
) {

36 
PMC_MCKR_PRES_1
:

37 
¥esˇÀr
 = 1;

39 
PMC_MCKR_PRES_2
:

40 
¥esˇÀr
 = 2;

42 
PMC_MCKR_PRES_4
:

43 
¥esˇÀr
 = 4;

45 
PMC_MCKR_PRES_8
:

46 
¥esˇÀr
 = 8;

48 
PMC_MCKR_PRES_16
:

49 
¥esˇÀr
 = 16;

51 
PMC_MCKR_PRES_32
:

52 
¥esˇÀr
 = 32;

54 
PMC_MCKR_PRES_64
:

55 
¥esˇÀr
 = 64;

60 
mck_ªg
 & 
PMC_MCKR_CSS_MASK
) {

61 
PMC_MCKR_CSS_SLOW
:

63 
mck_‰eq
 = 
	`©91rm9200_gë_¶ck
(Ë/ 
¥esˇÀr
;

66 
PMC_MCKR_CSS_MAIN
:

67 
mck_‰eq
 = 
	`©91rm9200_gë_maö˛k
(Ë/ 
¥esˇÀr
;

70 
PMC_MCKR_CSS_PLLA
:

71 
∂l_ªg
 = 
	`PMC_REG
(
PMC_PLLAR
);

72 
mck_‰eq
 = 
	`©91rm9200_gë_maö˛k
(Ë/ 
¥esˇÀr
;

73 
mck_‰eq
 = mck_‰eq / (
∂l_ªg
 & 
PMC_PLLAR_DIV_MASK
);

74 
mck_‰eq
 = mck_‰eq * (((
∂l_ªg
 & 
PMC_PLLAR_MUL_MASK
) >> 16) + 1);

77 
PMC_MCKR_CSS_PLLB
:

78 
∂l_ªg
 = 
	`PMC_REG
(
PMC_PLLBR
);

79 
mck_‰eq
 = 
	`©91rm9200_gë_maö˛k
(Ë/ 
¥esˇÀr
;

80 
mck_‰eq
 = mck_‰eq / (
∂l_ªg
 & 
PMC_PLLBR_DIV_MASK
);

81 
mck_‰eq
 = mck_‰eq * (((
∂l_ªg
 & 
PMC_PLLBR_MUL_MASK
) >> 16) + 1);

85 i‡((
mck_ªg
 & 
PMC_MCKR_MDIV_MASK
Ë=
PMC_MCKR_MDIV_2
) {

86 
mck_‰eq
 = mck_freq / 2;

87 } i‡((
mck_ªg
 & 
PMC_MCKR_MDIV_MASK
Ë=
PMC_MCKR_MDIV_3
) {

88 
mck_‰eq
 = mck_freq / 3;

89 } i‡((
mck_ªg
 & 
PMC_MCKR_MDIV_MASK
Ë=
PMC_MCKR_MDIV_4
) {

90 
mck_‰eq
 = mck_freq / 4;

94  
mck_‰eq
;

95 
	}
}

	@src/lib/libcpu/arm/at91rm9200/timer/timer.c

16 
	~<b•.h
>

17 
	~<πems.h
>

18 
	~<πems/btimî.h
>

19 
	~<©91rm9200.h
>

20 
	~<©91rm9200_pmc.h
>

22 
uöt16_t
 
	gt°¨t
;

23 
boﬁ
 
	gbíchm¨k_timî_föd_avîage_ovîhód
;

24 
uöt32_t
 
	gtick_time
;

30 
	$bíchm¨k_timî_öôülize
( )

32 
uöt32_t
 
tmr_‰eq
;

35 
tmr_‰eq
 = 
	`©91rm9200_gë_mck
() / 8;

37 
	`TC_TC0_REG
(
TC_CMR
Ë
	`TC_CMR_TCCLKS
(1);

38 
	`TC_TC0_REG
(
TC_CCR
Ë(
TC_CCR_CLKEN


39 | 
TC_CCR_SWTRG
);

42 
tick_time
 = 1000000000/
tmr_‰eq
;

44 
	}
}

56 
	#AVG_OVERHEAD
 0

	)

59 
	#LEAST_VALID
 1

	)

61 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
( )

63 
uöt16_t
 
t
;

64 
uöt32_t
 
tŸÆ
;

65 
t
 = 
	`TC_TC0_REG
(
TC_CV
);

73 
tŸÆ
 = 
t
 * 
tick_time
;

75 i‡–
bíchm¨k_timî_föd_avîage_ovîhód
 == 1 )

76  
tŸÆ
;

78 i‡–
tŸÆ
 < 
LEAST_VALID
 )

83  (
tŸÆ
 - 
AVG_OVERHEAD
);

85 
	}
}

87 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(
boﬁ
 
föd_Êag
)

89 
bíchm¨k_timî_föd_avîage_ovîhód
 = 
föd_Êag
;

90 
	}
}

	@src/lib/libcpu/arm/at91rm9200/usart/usart.c

20 
	~<b•.h
>

21 
	~<πems/libio.h
>

22 
	~<ãrmios.h
>

24 
	~<©91rm9200.h
>

25 
	~<©91rm9200_ußπ.h
>

26 
	~<©91rm9200_pmc.h
>

27 
	~<πems/b•Io.h
>

28 
	~<libchù/£rül.h
>

29 
	~<libchù/£rsuµ.h
>

32 
ußπ_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
);

33 
ußπ_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
);

34 
ußπ_ªad_pﬁÀd
(
mö‹
);

35 
ssize_t
 
ußπ_wrôe_pﬁÀd_suµ‹t
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

36 
ußπ_öô
(
mö‹
);

37 
ußπ_wrôe_pﬁÀd
(
mö‹
, 
c
);

38 
ußπ_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
);

39 
©91rm9200_ußπ_ªgs_t
 *
ußπ_gë_ba£
(
mö‹
);

42 c⁄° 
c⁄sﬁe_‚s
 
	gußπ_pﬁlög_‚s
 = {

43 
libchù_£rül_deÁu…_¥obe
,

44 
ußπ_fú°_›í
,

45 
ußπ_œ°_˛o£
,

46 
ußπ_ªad_pﬁÀd
,

47 
ußπ_wrôe_pﬁÀd_suµ‹t
,

48 
ußπ_öô
,

49 
ußπ_wrôe_pﬁÀd
,

50 
ußπ_£t_©åibuãs
,

51 
FALSE


54 
©91rm9200_ußπ_ªgs_t
 *
	$ußπ_gë_ba£
(
mö‹
)

56 
c⁄sﬁe_tbl
 *
c⁄sﬁe_íåy
;

57 
©91rm9200_ußπ_ªgs_t
 *
p‹t
;

59 
c⁄sﬁe_íåy
 = 
	`BSP_gë_u¨t_‰om_mö‹
(
mö‹
);

61 i‡(
c⁄sﬁe_íåy
 =
NULL
)

64 
p‹t
 = (
©91rm9200_ußπ_ªgs_t
 *Ë
c⁄sﬁe_íåy
->
ulCålP‹t1
;

67  
p‹t
;

68 
	}
}

79 
	$ußπ_fú°_›í
(
maj‹
, 
mö‹
, *
¨g
)

81 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

83 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

84 i‡–!
ußπ
 )

90 
ußπ
->
¸
 = (
US_CR_RXEN
 | 
US_CR_TXEN
);

92 
	}
}

99 
	$ußπ_œ°_˛o£
(
maj‹
, 
mö‹
, *
¨g
)

101 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

103 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

104 i‡–!
ußπ
 )

108 
	}
}

116 
	$ußπ_ªad_pﬁÀd
(
mö‹
)

118 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

120 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

121 i‡–!
ußπ
 )

125 i‡–(
ußπ
->
§
 & 
US_IER_RXRDY
) == 0 )

128  
ußπ
->
rhr
;

129 
	}
}

135 
	$ußπ_wrôe_pﬁÀd
(
mö‹
, 
c
)

137 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

139 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

140 i‡–!
ußπ
 )

144  (
ußπ
->
§
 & 
US_IER_TXEMPTY
) == 0 )

147 
ußπ
->
thr
 = 
c
;

148 
	}
}

155 
ssize_t
 
	$ußπ_wrôe_pﬁÀd_suµ‹t
(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
)

157 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

158 
nwrôe
=0;

163 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

164 i‡–!
ußπ
 )

170 
nwrôe
 < 
Àn
) {

171 
	`ußπ_wrôe_pﬁÀd
(
mö‹
, *
buf
++);

172 
nwrôe
++;

178  
nwrôe
;

181 
	}
}

185 
	$ußπ_öô
(
mö‹
)

187 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

189 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

190 i‡–!
ußπ
 )

193 
	}
}

197 
	$ußπ_£t_©åibuãs
(
mö‹
, c⁄° 
ãrmios
 *
t
)

199 
uöt32_t
 
brgr
;

200 
uöt32_t
 
mode
, 
baud
, 
baud_ªque°ed
;

201 
©91rm9200_ußπ_ªgs_t
 *
ußπ
;

203 
ußπ
 = 
	`ußπ_gë_ba£
(
mö‹
);

204 i‡–!
ußπ
 )

208 
mode
 = 
ußπ
->
mr
 & ~(
US_MR_USMODE
 | 
US_MR_USCLKS
 | 
US_MR_CHRL


209 | 
US_MR_PAR
 | 
US_MR_NBSTOP
);

212 
t
->
c_cÊag
 & 
CSIZE
){

213 
CS5
:

214 
mode
 |
US_MR_CHRL_5
;

216 
CS6
:

217 
mode
 |
US_MR_CHRL_6
;

219 
CS7
:

220 
mode
 |
US_MR_CHRL_7
;

223 
mode
 |
US_MR_CHRL_8
;

228 i‡(
t
->
c_cÊag
 & 
CSTOPB
){

229 
mode
 |
US_MR_NBSTOP_2
;

231 
mode
 |
US_MR_NBSTOP_1
;

234 i‡(
t
->
c_cÊag
 & 
PARENB
){

236 i‡(
t
->
c_cÊag
 & 
PARODD
){

237 
mode
 |
US_MR_PAR_ODD
;

239 
mode
 |
US_MR_PAR_EVEN
;

241 
mode
 |
US_MR_PAR_NONE
;

243 
baud_ªque°ed
 = 
t
->
c_cÊag
 & 
CBAUD
;

246 i‡(!
baud_ªque°ed
)

247 
baud_ªque°ed
 = 
	`BSP_gë_baud
();

249 
baud
 = 
	`πems_ãrmios_baud_to_numbî
(
baud_ªque°ed
);

251 
brgr
 = (
	`©91rm9200_gë_mck
(Ë/ 16Ë/ 
baud
;

253 i‡(
brgr
 > 65535){

254 
brgr
 /= 8;

255 
mode
 |
US_MR_USCLKS_MCK_DIV8
;

258 
ußπ
->
mr
 = 
mode
;

259 
ußπ
->
brgr
 = brgr;

261 
	}
}

	@src/lib/libcpu/arm/hi3518e/clock/clockdrv.c

18 
	~<πems.h
>

19 
	~<b•/úq.h
>

20 
	~<b•.h
>

21 
	~<∂©f‹m.h
>

23 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

24 
˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

25 
˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

26 
˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
);

28 
πems_úq_c⁄√˘_d©a
 
	g˛ock_i§_d©a
 = {

29 .
«me
 = 
BSP_INT_TIMER0_1
,

30 .
	ghdl
 = 
Clock_i§
,

31 .
	gh™dÀ
 = 
NULL
,

32 .
	g⁄
 = 
˛ock_i§_⁄
,

33 .
	goff
 = 
˛ock_i§_off
,

34 .
	gisOn
 = 
˛ock_i§_is_⁄
,

42 
	#Clock_drivî_suµ‹t_©_tick
() \

44 
	`TIMER0_WR_REG
(
REG_TIMER0_INTCLR
, 0);\

45 } 0)

	)

51 
	#Clock_drivî_suµ‹t_ö°Æl_i§
–
_√w
, 
_ﬁd
 ) \

53 
_ﬁd
 = 
NULL
; \

54 
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

55 } 0)

	)

69 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

72 
	`HI_REG_WR
(
REG_BASE_SCTL
+
REG_SC_CTRL
, 
	`HI_REG_RD
(REG_BASE_SCTL+REG_SC_CTRL) \

74 
	`TIMER0_WR_REG
(
REG_TIMER_CONTROL
, 0);\

75 
	`TIMER0_WR_REG
(
REG_TIMER_RELOAD
, 
	`BUSCLK_TO_TIMER_RELOAD
(
CFG_CLK_BUS
));\

76 
	`TIMER0_WR_REG
(
REG_TIMER_CONTROL
, 
CFG_TIMER_CONTROL
);\

77 
	`INT_WR_REG
(
REG_INTC_INTENABLE
, \

78 
	`INT_RD_REG
(
REG_INTC_INTENABLE
)|
CFG_TIMER_IRQEN
);\

79 } 0)

	)

87 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

90 
	`BSP_ªmove_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

91 } 0)

	)

98 
	$˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

100 
	}
}

107 
	$˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

109 
	}
}

117 
	$˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
)

120 
	}
}

122 
	#CLOCK_DRIVER_USE_DUMMY_TIMECOUNTER


	)

125 
	~"../../../../libb•/sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libcpu/arm/hi3518e/include/platform.h

1 #i‚def 
__HI_CHIP_REGS_H__


2 
	#__HI_CHIP_REGS_H__


	)

4 
	#HI_REG_WR
(
a
, 
v
Ë(*(vﬁ©ûê*)◊Ë(v))

	)

5 
	#HI_REG_RD
(
a
Ë(*(vﬁ©ûê*)◊))

	)

14 
	#HW_REG
(
a
Ë(*(*)◊))

	)

15 
	#gë_bus_˛k
()({\

16 
fbdiv
, 
ªfdiv
, 
p°div1
, 
p°div2
; \

17 
tmp_ªg
, 
foutvco
, 
bus˛k
;\

18 
tmp_ªg
 = 
	`HW_REG
(
REG_CRG4_OFFSET
);\

19 
p°div1
 = (
tmp_ªg
 >> 24) & 0x7;\

20 
p°div2
 = (
tmp_ªg
 >> 27) & 0x7;\

21 
tmp_ªg
 = 
	`HW_REG
(
REG_CRG5_OFFSET
);\

22 
ªfdiv
 = (
tmp_ªg
 >> 12) & 0x3f;\

23 
fbdiv
 = 
tmp_ªg
 & 0xfff;\

24 
foutvco
 = 24000000/
ªfdiv
;\

25 
foutvco
 *
fbdiv
;\

26 
bus˛k
 = 
foutvco
/(2 * 
p°div1
 * 
p°div2
);\

27 
bus˛k
;\

28 })

	)

30 
	#CFG_CLK_BUS
 
	`gë_bus_˛k
()

	)

33 
	#SYSID_RGE_BASE
 0x20050EE0

	)

36 
	#REG_BASE_INTC
 0x10140000

	)

37 
	#REG_INTC_IRQSTATUS
 0x000

	)

38 
	#REG_INTC_FIQSTATUS
 0x004

	)

39 
	#REG_INTC_RAWSTATUS
 0x008

	)

40 
	#REG_INTC_INTSELECT
 0x00C

	)

41 
	#REG_INTC_INTENABLE
 0x010

	)

42 
	#REG_INTC_INTENCLEAR
 0x014

	)

43 
	#REG_INTC_SOFTINT
 0x018

	)

44 
	#REG_INTC_SOFTINTCLEAR
 0x01C

	)

45 
	#REG_INTC_PROTECTION
 0x020

	)

46 
	#INT_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
REG_BASE_INTC
+off£t))

	)

47 
	#INT_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
REG_BASE_INTC
+off£t, vÆ))

	)

49 
	#DDR_MEM_BASE
 0x80000000

	)

50 
	#SFC_MEM_BASE
 0x58000000

	)

51 
	#ARM_REG_BASE
 0x20300000

	)

52 
	#GPIO11_REG_BASE
 0x201F0000

	)

53 
	#GPIO10_REG_BASE
 0x201E0000

	)

54 
	#GPIO9_REG_BASE
 0x201D0000

	)

55 
	#GPIO8_REG_BASE
 0x201C0000

	)

56 
	#GPIO7_REG_BASE
 0x201B0000

	)

57 
	#GPIO6_REG_BASE
 0x201A0000

	)

58 
	#GPIO5_REG_BASE
 0x20190000

	)

59 
	#GPIO4_REG_BASE
 0x20180000

	)

60 
	#GPIO3_REG_BASE
 0x20170000

	)

61 
	#GPIO2_REG_BASE
 0x20160000

	)

62 
	#GPIO1_REG_BASE
 0x20150000

	)

63 
	#GPIO0_REG_BASE
 0x20140000

	)

64 
	#PWM_REG_BASE
 0x20130000

	)

65 
	#DDR_PHY_BASE
 0x20120000

	)

66 
	#DDRC_REG_BASE
 0x20110000

	)

67 
	#IO_CONFIG_REG_BASE
 0x200F0000

	)

68 
	#UART0_REG_BASE
 0x20080000

	)

69 
	#RTC_REG_BASE
 0x20060000

	)

70 
	#REG_BASE_SCTL
 0x20050000

	)

71 
	#REG_SC_CTRL
 0

	)

72 
	#REG_SC_SYSRES
 0x4

	)

74 
	#WDG_REG_BASE
 0x20040000

	)

75 
	#CRG_REG_BASE
 0x20030000

	)

76 
	#REG_ETH_CRG
 0xCC

	)

79 
	#TIMER1_REG_BASE
 0x20010000

	)

80 
	#TIMER0_REG_BASE
 0x20000000

	)

81 
	#REG_TIMER_RELOAD
 0x0

	)

82 
	#REG_TIMER_VALUE
 0x4

	)

83 
	#REG_TIMER_CONTROL
 0x8

	)

84 
	#REG_TIMER0_INTCLR
 0xC

	)

86 
	#CFG_TIMER_ENABLE
 (1 << 7)

	)

87 
	#CFG_TIMER_PERIODIC
 (1 << 6)

	)

88 
	#CFG_TIMER_INTMASK
 (1 << 5)

	)

89 
	#CFG_TIMER_32BIT
 (1 << 1)

	)

91 
	#CFG_TIMER_IRQEN
 (1<<3)

	)

93 
	#CFG_TIMER_CONTROL
 (
CFG_TIMER_ENABLE
 | 
CFG_TIMER_PERIODIC
\

94 | 
CFG_TIMER_INTMASK
 | 
CFG_TIMER_32BIT
)

	)

96 
	#CFG_TIMER_PRESCALE
 2

	)

97 
	#HZ
 100

	)

98 
	#BUSCLK_TO_TIMER_RELOAD
(
bus˛k
Ë(((bus˛k)/
CFG_TIMER_PRESCALE
)/
HZ
)

	)

100 
	#TIMER0_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
TIMER0_REG_BASE
+off£t))

	)

101 
	#TIMER0_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
TIMER0_REG_BASE
+off£t, vÆ))

	)

102 
	#TIMER1_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
TIMER1_REG_BASE
+off£t))

	)

103 
	#TIMER1_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
TIMER1_REG_BASE
+off£t, vÆ))

	)

106 
	#REG_BASE_SF
 0x10090000

	)

107 
	#SFC_REG_BASE
 0x10010000

	)

109 
	#MEM_BASE_ITCM
 0x00000000

	)

110 
	#MEM_SIZE_ITCM
 0x00000800

	)

111 
	#MEM_CONF_ITCM_SIZE
 3

	)

114 
	#REG_SYSSTAT
 0x8C

	)

116 
	#BOOT_FROM_SPI
 0

	)

120 
	#REG_CRG0_OFFSET
 (
CRG_REG_BASE
 + 0)

	)

121 
	#REG_CRG0_VALUE
 0x09000000

	)

122 
	#REG_CRG1_OFFSET
 (
CRG_REG_BASE
 + 0x4)

	)

123 
	#REG_CRG1_VALUE
 0x006c309B

	)

126 
	#REG_CRG4_OFFSET
 (
CRG_REG_BASE
 + 0x10)

	)

127 
	#REG_CRG5_OFFSET
 (
CRG_REG_BASE
 + 0x14)

	)

130 
	#REG_CRG6_OFFSET
 (
CRG_REG_BASE
 + 0x18)

	)

131 
	#REG_CRG7_OFFSET
 (
CRG_REG_BASE
 + 0x1c)

	)

132 
	#REG_CRG8_OFFSET
 (
CRG_REG_BASE
 + 0x20)

	)

135 
	#REG_CRG10_OFFSET
 (
CRG_REG_BASE
 + 0x28)

	)

138 
	#REG_CRG58_OFFSET
 (
CRG_REG_BASE
 + 0xE8)

	)

141 
	#REG_PLLCTL_OFFSET
 (
REG_BASE_SCTL
 + 0x14)

	)

144 
	#BITOFFSET_PLLCTL_PLLTIME
 3

	)

145 
	#BITMASK_PLLCTL_PLLTIME
 0xf0000007

	)

146 
	#BITVALUE_PLLCTL_PLLTIME
 0x1fff000

	)

149 
	#BITOFFSET_PLLCTL_PLLOVER
 0

	)

150 
	#BITMASK_PLLCTL_PLLOVER
 0xffffff„

	)

151 
	#BITVALUE_PLLCTL_PLLOVER
 0x0

	)

153 
	#SC_LOCKEN_OFFSET
 (
REG_BASE_SCTL
 + 0x44)

	)

154 
	#SC_LOCKEN_VALUE
 0x1ac˚551

	)

157 
	#NANDC_REG_BASE
 0x10000000

	)

158 
	#NAND_MEM_BASE
 0x50000000

	)

162 
	#PWM_FREQ_OFFSET
 0x200

	)

163 
	#SPACE_RARIO_DEFAULT
 0x204

	)

165 
	#MAX_CORNER_AA
 0x208

	)

166 
	#MAX_CORNER_BB
 0x20c

	)

168 
	#SPACE_RATIO_AA
 0x210

	)

169 
	#SPACE_RATIO_BB
 0x214

	)

170 
	#SPACE_RATIO_CC
 0x218

	)

173 
	#UART_PL01x_DR
 0x00

	)

174 
	#UART_PL01x_RSR
 0x04

	)

175 
	#UART_PL01x_ECR
 0x04

	)

176 
	#UART_PL01x_FR
 0x18

	)

178 
	#UART_PL01x_RSR_OE
 0x08

	)

179 
	#UART_PL01x_RSR_BE
 0x04

	)

180 
	#UART_PL01x_RSR_PE
 0x02

	)

181 
	#UART_PL01x_RSR_FE
 0x01

	)

183 
	#UART_PL01x_FR_TXFE
 0x80

	)

184 
	#UART_PL01x_FR_RXFF
 0x40

	)

185 
	#UART_PL01x_FR_TXFF
 0x20

	)

186 
	#UART_PL01x_FR_RXFE
 0x10

	)

187 
	#UART_PL01x_FR_BUSY
 0x08

	)

188 
	#UART_PL01x_FR_TMSK
 (
UART_PL01x_FR_TXFF
 + 
UART_PL01x_FR_BUSY
)

	)

190 
	#UART_BAUDRATE
 115200

	)

191 
	#UART_PL011_CLOCK
 3000000

	)

193 
	#UART_PL011_IBRD
 0x24

	)

194 
	#UART_PL011_FBRD
 0x28

	)

195 
	#UART_PL011_LCRH
 0x2C

	)

196 
	#UART_PL011_CR
 0x30

	)

197 
	#UART_PL011_IMSC
 0x38

	)

198 
	#UART_PL011_PERIPH_ID0
 0xFE0

	)

200 
	#UART_PL011_LCRH_SPS
 (1 << 7)

	)

201 
	#UART_PL011_LCRH_WLEN_8
 (3 << 5)

	)

202 
	#UART_PL011_LCRH_WLEN_7
 (2 << 5)

	)

203 
	#UART_PL011_LCRH_WLEN_6
 (1 << 5)

	)

204 
	#UART_PL011_LCRH_WLEN_5
 (0 << 5)

	)

205 
	#UART_PL011_LCRH_FEN
 (1 << 4)

	)

206 
	#UART_PL011_LCRH_STP2
 (1 << 3)

	)

207 
	#UART_PL011_LCRH_EPS
 (1 << 2)

	)

208 
	#UART_PL011_LCRH_PEN
 (1 << 1)

	)

209 
	#UART_PL011_LCRH_BRK
 (1 << 0)

	)

211 
	#UART_PL011_CR_CTSEN
 (1 << 15)

	)

212 
	#UART_PL011_CR_RTSEN
 (1 << 14)

	)

213 
	#UART_PL011_CR_OUT2
 (1 << 13)

	)

214 
	#UART_PL011_CR_OUT1
 (1 << 12)

	)

215 
	#UART_PL011_CR_RTS
 (1 << 11)

	)

216 
	#UART_PL011_CR_DTR
 (1 << 10)

	)

217 
	#UART_PL011_CR_RXE
 (1 << 9)

	)

218 
	#UART_PL011_CR_TXE
 (1 << 8)

	)

219 
	#UART_PL011_CR_LPE
 (1 << 7)

	)

220 
	#UART_PL011_CR_IIRLP
 (1 << 2)

	)

221 
	#UART_PL011_CR_SIREN
 (1 << 1)

	)

222 
	#UART_PL011_CR_UARTEN
 (1 << 0)

	)

224 
	#UART_PL011_IMSC_OEIM
 (1 << 10)

	)

225 
	#UART_PL011_IMSC_BEIM
 (1 << 9)

	)

226 
	#UART_PL011_IMSC_PEIM
 (1 << 8)

	)

227 
	#UART_PL011_IMSC_FEIM
 (1 << 7)

	)

228 
	#UART_PL011_IMSC_RTIM
 (1 << 6)

	)

229 
	#UART_PL011_IMSC_TXIM
 (1 << 5)

	)

230 
	#UART_PL011_IMSC_RXIM
 (1 << 4)

	)

231 
	#UART_PL011_IMSC_DSRMIM
 (1 << 3)

	)

232 
	#UART_PL011_IMSC_DCDMIM
 (1 << 2)

	)

233 
	#UART_PL011_IMSC_CTSMIM
 (1 << 1)

	)

234 
	#UART_PL011_IMSC_RIMIM
 (1 << 0)

	)

235 
	#UART_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
UART0_REG_BASE
+off£t))

	)

236 
	#UART_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
UART0_REG_BASE
+off£t, vÆ))

	)

239 
	#I2C_REG_BASE
 0x200D0000

	)

240 
	#I2C_CTRL_REG
 0x000

	)

241 
	#I2C_COM_REG
 0x004

	)

242 
	#I2C_ICR_REG
 0x008

	)

243 
	#I2C_SR_REG
 0x00C

	)

244 
	#I2C_SCL_H_REG
 0x010

	)

245 
	#I2C_SCL_L_REG
 0x014

	)

246 
	#I2C_TXR_REG
 0x018

	)

247 
	#I2C_RXR_REG
 0x01C

	)

249 
	#I2C_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
I2C_REG_BASE
+off£t))

	)

250 
	#I2C_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
I2C_REG_BASE
+off£t, vÆ))

	)

253 
	#VICAP_REG_BASE
 0x20580000

	)

254 
	#VICAP_WK_MODE
 0x0000

	)

255 
	#VICAP_PT_SEL
 0x0020

	)

256 
	#VICAP_CH_SEL
 0x0030

	)

257 
	#VICAP_INT_STA
 0x00F0

	)

258 
	#VICAP_INT_MASK
 0x00F8

	)

259 
	#VICAP_PT_INTF_MOD
 0x0100

	)

260 
	#VICAP_PT_OFFSET0
 0x0110

	)

261 
	#VICAP_PT_OFFSET1
 0x0114

	)

262 
	#VICAP_PT_OFFSET2
 0x0118

	)

263 
	#VICAP_DATA_CFG
 0x0140

	)

264 
	#VICAP_PT_HFB
 0x0180

	)

265 
	#VICAP_PT_HACT
 0x0184

	)

266 
	#VICAP_PT_HBB
 0x0188

	)

267 
	#VICAP_PT_VFB
 0x018C

	)

268 
	#VICAP_PT_VACT
 0x0190

	)

269 
	#VICAP_PT_VBB
 0x0194

	)

270 
	#VICAP_PT_VBFB
 0x0198

	)

271 
	#VICAP_PT_VBACT
 0x019C

	)

272 
	#VICAP_PT_VBBB
 0x01A0

	)

273 
	#VICAP_PT_STA
 0x01E0

	)

274 
	#VICAP_PT_SIZE
 0x01EC

	)

275 
	#VICAP_PT_INT_STA
 0x01F0

	)

276 
	#VICAP_PT_INT_MASK
 0x01F8

	)

277 
	#VICAP_CH_CTRL
 0x1000

	)

278 
	#VICAP_CH_REG_NEW
 0x1004

	)

279 
	#VICAP_CH_DES_Y_CFG
 0x10B0

	)

280 
	#VICAP_CH_DES_Y_FADDR
 0x10B4

	)

281 
	#VICAP_CH_DES_Y_SIZE
 0x10B8

	)

282 
	#VICAP_CH_DES_Y_STRIDE
 0x10BC

	)

283 
	#VICAP_CH_DES_C_CFG
 0x10B0

	)

284 
	#VICAP_CH_DES_C_FADDR
 0x10B4

	)

285 
	#VICAP_CH_DES_C_SIZE
 0x10B8

	)

286 
	#VICAP_CH_DES_C_STRIDE
 0x10BC

	)

287 
	#VICAP_CH_INT_STA
 0x10F0

	)

288 
	#VICAP_CH_INT_MASK
 0x10F8

	)

289 
	#VICAP_CH_CROP_CFG
 0x1100

	)

290 
	#VICAP_CH_CROP_WIN
 0x1104

	)

291 
	#VICAP_CROP0_START
 0x1110

	)

292 
	#VICAP_CROP0_SIZE
 0x1114

	)

294 
	#VICAP_RD_REG
(
off£t
Ë(
	`HI_REG_RD
(
VICAP_REG_BASE
+off£t))

	)

295 
	#VICAP_WR_REG
(
off£t
, 
vÆ
Ë(
	`HI_REG_WR
(
VICAP_REG_BASE
+off£t, vÆ))

	)

297 
	#PT_EN
 (1<<31)

	)

298 
	#CH_EN
 (1<<31)

	)

299 
	#ISP_INT_EN
 (1<<24)

	)

300 
	#PT0_INT_EN
 (1<<16)

	)

301 
	#CH0_INT_EN
 (1<<0)

	)

	@src/lib/libcpu/arm/hi3518e/irq/irq.c

18 
	~<b•.h
>

19 
	~<b•/úq.h
>

20 
	~<b•/úq-gíîic.h
>

21 
	~<πems/sc‹e/¨mv4.h
>

23 
	~<∂©f‹m.h
>

25 
	$b•_öãºu±_di•©ch
()

27 
uöt32_t
 
ªgvÆ
 = 
	`INT_RD_REG
(
REG_INTC_IRQSTATUS
);

28 
πems_ve˘‹_numbî
 
ve˘‹
 = 
BSP_MAX_INT
;

31 if(
ªgvÆ
 & (1<<
BSP_INT_TIMER0_1
))

32 
ve˘‹
 = 
BSP_INT_TIMER0_1
;

34 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

35 
	}
}

37 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

39  
RTEMS_SUCCESSFUL
;

40 
	}
}

42 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

44  
RTEMS_SUCCESSFUL
;

45 
	}
}

47 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

49 
	`INT_WR_REG
(
REG_INTC_INTENCLEAR
, ~0);

50 
	`INT_WR_REG
(
REG_INTC_INTSELECT
, 0);

51 
	`INT_WR_REG
(
REG_INTC_SOFTINTCLEAR
, ~0);

52 
	`INT_WR_REG
(
REG_INTC_PROTECTION
, 1);

54 
	`_CPU_ISR_ö°Æl_ve˘‹
(
ARM_EXCEPTION_IRQ
, 
_ARMV4_Ex˚±i⁄_öãºu±
, 
NULL
);

56  
RTEMS_SUCCESSFUL
;

57 
	}
}

	@src/lib/libcpu/arm/hi3518e/irq/irq.h

1 #i‚de‡
_IRQ_H_


2 
	#_IRQ_H_


	)

4 
	~<πems.h
>

5 
	~<πems/úq.h
>

6 
	~<πems/úq-exãnsi⁄.h
>

8 
	#BSP_INT_GBL
 0

	)

9 
	#BSP_INT_WDT
 1

	)

10 
	#BSP_INT_RTC
 2

	)

11 
	#BSP_INT_TIMER0_1
 3

	)

12 
	#BSP_INT_TIMER2_3
 4

	)

13 
	#BSP_INT_UART0_1
 5

	)

14 
	#BSP_INT_SSP0
 6

	)

15 
	#BSP_INT_SSP1
 7

	)

16 
	#_ªs0
 8

	)

17 
	#BSP_INT_SIO
 9

	)

18 
	#BSP_INT_TMPCAP
 10

	)

19 
	#BSP_INT_SFC
 11

	)

20 
	#BSP_INT_ETH
 12

	)

21 
	#BSP_INT_CHIPER
 13

	)

22 
	#BSP_INT_DMAC
 14

	)

23 
	#BSP_INT_USB_EHCI
 15

	)

24 
	#BSP_INT_USB_OHCI
 16

	)

25 
	#BSP_INT_VPSS
 17

	)

26 
	#BSP_INT_SDIO
 18

	)

27 
	#BSP_INT_IR_ADC
 19

	)

28 
	#BSP_INT_IIC
 20

	)

29 
	#BSP_INT_IVE
 21

	)

30 
	#BSP_INT_VICAP
 22

	)

31 
	#BSP_INT_VOU
 23

	)

32 
	#BSP_INT_VEDU
 24

	)

33 
	#BSP_INT_UART2
 25

	)

34 
	#BSP_INT_JPGE
 26

	)

35 
	#BSP_INT_TDE
 27

	)

36 
	#BSP_INT_MDU_DDRT
 28

	)

37 
	#BSP_INT_GPIO_0_1_2_11
 29

	)

38 
	#BSP_INT_GPIO_3_4_5_10
 30

	)

39 
	#BSP_INT_GPIO_6_7_8_9
 31

	)

40 
	#BSP_MAX_INT
 32

	)

42 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

44 
	#BSP_INTERRUPT_VECTOR_MAX
 (
BSP_MAX_INT
 - 1)

	)

	@src/lib/libcpu/arm/hi3518e/timer/timer.c

18 
	~<b•.h
>

19 
	~<πems.h
>

20 
	~<πems/btimî.h
>

21 
	~<∂©f‹m.h
>

23 
boﬁ
 
	gbíchm¨k_timî_föd_avîage_ovîhód
;

25 
	#TIMER_LOAD_VAL
 0xffffffff

	)

27 
	gtime°amp
;

28 
	gœ°dec
;

30 
	$ª£t_timî_masked
()

33 
œ°dec
 = 
	`TIMER1_RD_REG
(
REG_TIMER_VALUE
);

34 
time°amp
 = 0;

35 
	}
}

40 
	$bíchm¨k_timî_öôülize
( )

43 
	`HI_REG_WR
(
REG_BASE_SCTL
+
REG_SC_CTRL
, 
	`HI_REG_RD
(REG_BASE_SCTL+REG_SC_CTRL) \

52 
	`TIMER1_WR_REG
(
REG_TIMER_CONTROL
, 0);

53 
	`TIMER1_WR_REG
(
REG_TIMER_RELOAD
, ~0);

56 
	`TIMER1_WR_REG
(
REG_TIMER_CONTROL
, 0xCA);

59 
	`ª£t_timî_masked
();

60 
	}
}

72 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
( )

79 
now
 = 
	`TIMER1_RD_REG
(
REG_TIMER_VALUE
);

81 i‡(
œ°dec
 >
now
) {

83 
time°amp
 +
œ°dec
 - 
now
;

86 
time°amp
 +
œ°dec
 + 
TIMER_LOAD_VAL
 - 
now
;

88 
œ°dec
 = 
now
;

90  
time°amp
;

92 
	}
}

94 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(
boﬁ
 
föd_Êag
)

96 
bíchm¨k_timî_föd_avîage_ovîhód
 = 
föd_Êag
;

97 
	}
}

	@src/lib/libcpu/arm/lpc22xx/clock/clockdrv.c

15 
	~<πems.h
>

16 
	~<b•.h
>

17 
	~<b•/úq.h
>

18 
	~<Õc22xx.h
>

19 
	~<πems/b•Io.h
>

20 
	~<πems/timecou¡î.h
>

22 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

23 
˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

24 
˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

25 
˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
);

27 
πems_timecou¡î_sim∂e
 
	gÕc22xx_tc
;

29 
uöt32_t
 
	$Õc22xx_tc_gë
(
πems_timecou¡î_sim∂e
 *
tc
)

31  
T0TC
;

32 
	}
}

34 
boﬁ
 
	$Õc22xx_tc_is_≥ndög
(
πems_timecou¡î_sim∂e
 *
tc
)

36  (
T0IR
 & 0x1) != 0;

37 
	}
}

39 
uöt32_t
 
	$Õc22xx_tc_gë_timecou¡
(
timecou¡î
 *
tc
)

41  
	`πems_timecou¡î_sim∂e_upcou¡î_gë
(

42 
tc
,

43 
Õc22xx_tc_gë
,

44 
Õc22xx_tc_is_≥ndög


46 
	}
}

53 
	$Õc22xx_tc_©_tick
(
πems_timecou¡î_sim∂e
 *
tc
)

55 i‡(!(
T0IR
 & 0x01))

57 
T0IR
 = 0x01;

58 
VICVe˘Addr
 = 0x00;

59 
	}
}

61 
	$Õc22xx_tc_tick
()

63 
	`πems_timecou¡î_sim∂e_upcou¡î_tick
(

64 &
Õc22xx_tc
,

65 
Õc22xx_tc_gë
,

66 
Õc22xx_tc_©_tick


68 
	}
}

71 
πems_úq_c⁄√˘_d©a
 
	g˛ock_i§_d©a
 = {

72 .
«me
 = 
LPC22xx_INTERRUPT_TIMER0
,

73 .
	ghdl
 = 
Clock_i§
,

74 .
	gh™dÀ
 = 
NULL
,

75 .
	g⁄
 = 
˛ock_i§_⁄
,

76 .
	goff
 = 
˛ock_i§_off
,

77 .
	gisOn
 = 
˛ock_i§_is_⁄
,

85 
	#Clock_drivî_suµ‹t_ö°Æl_i§
–
_√w
, 
_ﬁd
 ) \

87 (
_ﬁd
Ë
NULL
; \

88 
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

89 } 0)

	)

106 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

109 
T0TCR
 &= 0; \

111 
T0PC
 = 0; \

113 
T0MR0
 = ((
LPC22xx_Fp˛k
/1000 * \

114 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) / 1000); \

116 
T0MCR
 |= 0x03; \

118 
T0EMR
 = 0; \

120 
T0TCR
 = 1; \

122 
T0IR
 |= 0x01; \

124 
	`πems_timecou¡î_sim∂e_ö°Æl
( \

125 &
Õc22xx_tc
, \

126 
LPC22xx_Fp˛k
, \

127 
T0MR0
, \

128 
Õc22xx_tc_gë_timecou¡
 \

130 } 0)

	)

138 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

141 
T0TCR
&=~0x02; \

142 
	`BSP_ªmove_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

143 } 0)

	)

150 
	$˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

152 
T0IR
&=0x01;

153 
	}
}

160 
	$˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

162 
T0IR
=0x00;

163 
	}
}

171 
	$˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
)

173  
T0IR
 & 0x01;

174 
	}
}

176 
	#Clock_drivî_timecou¡î_tick
(Ë
	`Õc22xx_tc_tick
()

	)

179 
	~"../../../../libb•/sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libcpu/arm/lpc22xx/include/lpc22xx.h

10 #i‚de‡
__LPC22XX_H__


11 
	#__LPC22XX_H__


	)

13 
	~<°döt.h
>

16 
	#BCFG0
 (*((vﬁ©ûê*Ë0xFFE00000)Ë

	)

17 
	#BCFG1
 (*((vﬁ©ûê*Ë0xFFE00004)Ë

	)

18 
	#BCFG2
 (*((vﬁ©ûê*Ë0xFFE00008)Ë

	)

19 
	#BCFG3
 (*((vﬁ©ûê*Ë0xFFE0000C)Ë

	)

22 
	#EXTINT
 (*((vﬁ©ûê*Ë0xE01FC140))

	)

23 
	#EXTWAKE
 (*((vﬁ©ûê*Ë0xE01FC144))

	)

24 #ifde‡ 
CONFIG_ARCH_LPC22xx


25 
	#EXTMODE
 (*((vﬁ©ûê*Ë0xE01FC148)Ë

	)

26 
	#EXTPOLAR
 (*((vﬁ©ûê*Ë0xE01FC14C)Ë

	)

30 
	#MEMMAP
 (*((vﬁ©ûê*Ë0xE01FC040))

	)

33 
	#PLLCON
 (*((vﬁ©ûê*Ë0xE01FC080))

	)

34 
	#PLLCFG
 (*((vﬁ©ûê*Ë0xE01FC084))

	)

35 
	#PLLSTAT
 (*((vﬁ©ûê*Ë0xE01FC088))

	)

36 
	#PLLFEED
 (*((vﬁ©ûê*Ë0xE01FC08C))

	)

39 
	#PCON
 (*((vﬁ©ûê*Ë0xE01FC0C0))

	)

40 
	#PCONP
 (*((vﬁ©ûê*Ë0xE01FC0C4))

	)

43 
	#VPBDIV
 (*((vﬁ©ûê*Ë0xE01FC100))

	)

46 
	#MAMCR
 (*((vﬁ©ûê*Ë0xE01FC000))

	)

47 
	#MAMTIM
 (*((vﬁ©ûê*Ë0xE01FC004))

	)

50 
	#VICIRQSètus
 (*((vﬁ©ûê*Ë0xFFFFF000))

	)

51 
	#VICFIQSètus
 (*((vﬁ©ûê*Ë0xFFFFF004))

	)

52 
	#VICRawI¡r
 (*((vﬁ©ûê*Ë0xFFFFF008))

	)

53 
	#VICI¡Sñe˘
 (*((vﬁ©ûê*Ë0xFFFFF00C))

	)

54 
	#VICI¡E«bÀ
 (*((vﬁ©ûê*Ë0xFFFFF010))

	)

55 
	#VICI¡EnCÃ
 (*((vﬁ©ûê*Ë0xFFFFF014))

	)

56 
	#VICSo·I¡
 (*((vﬁ©ûê*Ë0xFFFFF018))

	)

57 
	#VICSo·I¡CÀ¨
 (*((vﬁ©ûê*Ë0xFFFFF01C))

	)

58 
	#VICPrŸe˘i⁄
 (*((vﬁ©ûê*Ë0xFFFFF020))

	)

59 
	#VICVe˘Addr
 (*((vﬁ©ûê*Ë0xFFFFF030))

	)

60 
	#VICDefVe˘Addr
 (*((vﬁ©ûê*Ë0xFFFFF034))

	)

62 
	#VICVe˘AddrBa£
 0xFFFFF100

	)

63 
	#VICVe˘Addr0
 (*((vﬁ©ûê*Ë0xFFFFF100))

	)

64 
	#VICVe˘Addr1
 (*((vﬁ©ûê*Ë0xFFFFF104))

	)

65 
	#VICVe˘Addr2
 (*((vﬁ©ûê*Ë0xFFFFF108))

	)

66 
	#VICVe˘Addr3
 (*((vﬁ©ûê*Ë0xFFFFF10C))

	)

67 
	#VICVe˘Addr4
 (*((vﬁ©ûê*Ë0xFFFFF110))

	)

68 
	#VICVe˘Addr5
 (*((vﬁ©ûê*Ë0xFFFFF114))

	)

69 
	#VICVe˘Addr6
 (*((vﬁ©ûê*Ë0xFFFFF118))

	)

70 
	#VICVe˘Addr7
 (*((vﬁ©ûê*Ë0xFFFFF11C))

	)

71 
	#VICVe˘Addr8
 (*((vﬁ©ûê*Ë0xFFFFF120))

	)

72 
	#VICVe˘Addr9
 (*((vﬁ©ûê*Ë0xFFFFF124))

	)

73 
	#VICVe˘Addr10
 (*((vﬁ©ûê*Ë0xFFFFF128))

	)

74 
	#VICVe˘Addr11
 (*((vﬁ©ûê*Ë0xFFFFF12C))

	)

75 
	#VICVe˘Addr12
 (*((vﬁ©ûê*Ë0xFFFFF130))

	)

76 
	#VICVe˘Addr13
 (*((vﬁ©ûê*Ë0xFFFFF134))

	)

77 
	#VICVe˘Addr14
 (*((vﬁ©ûê*Ë0xFFFFF138))

	)

78 
	#VICVe˘Addr15
 (*((vﬁ©ûê*Ë0xFFFFF13C))

	)

80 
	#VICVe˘C¡lBa£
 0xFFFFF200

	)

81 
	#VICVe˘C¡l0
 (*((vﬁ©ûê*Ë0xFFFFF200))

	)

82 
	#VICVe˘C¡l1
 (*((vﬁ©ûê*Ë0xFFFFF204))

	)

83 
	#VICVe˘C¡l2
 (*((vﬁ©ûê*Ë0xFFFFF208))

	)

84 
	#VICVe˘C¡l3
 (*((vﬁ©ûê*Ë0xFFFFF20C))

	)

85 
	#VICVe˘C¡l4
 (*((vﬁ©ûê*Ë0xFFFFF210))

	)

86 
	#VICVe˘C¡l5
 (*((vﬁ©ûê*Ë0xFFFFF214))

	)

87 
	#VICVe˘C¡l6
 (*((vﬁ©ûê*Ë0xFFFFF218))

	)

88 
	#VICVe˘C¡l7
 (*((vﬁ©ûê*Ë0xFFFFF21C))

	)

89 
	#VICVe˘C¡l8
 (*((vﬁ©ûê*Ë0xFFFFF220))

	)

90 
	#VICVe˘C¡l9
 (*((vﬁ©ûê*Ë0xFFFFF224))

	)

91 
	#VICVe˘C¡l10
 (*((vﬁ©ûê*Ë0xFFFFF228))

	)

92 
	#VICVe˘C¡l11
 (*((vﬁ©ûê*Ë0xFFFFF22C))

	)

93 
	#VICVe˘C¡l12
 (*((vﬁ©ûê*Ë0xFFFFF230))

	)

94 
	#VICVe˘C¡l13
 (*((vﬁ©ûê*Ë0xFFFFF234))

	)

95 
	#VICVe˘C¡l14
 (*((vﬁ©ûê*Ë0xFFFFF238))

	)

96 
	#VICVe˘C¡l15
 (*((vﬁ©ûê*Ë0xFFFFF23C))

	)

99 
	#PINSEL0
 (*((vﬁ©ûê*Ë0xE002C000))

	)

100 
	#PINSEL1
 (*((vﬁ©ûê*Ë0xE002C004))

	)

102 
	#PINSEL2
 (*((vﬁ©ûê*Ë0xE002C014)Ë

	)

106 #i‚de‡
CONFIG_ARCH_LPC22xx


108 
	#IOPIN
 (*((vﬁ©ûê*Ë0xE0028000)Ë

	)

109 
	#IOSET
 (*((vﬁ©ûê*Ë0xE0028004)Ë

	)

110 
	#IODIR
 (*((vﬁ©ûê*Ë0xE0028008)Ë

	)

111 
	#IOCLR
 (*((vﬁ©ûê*Ë0xE002800C)Ë

	)

115 #ifde‡
CONFIG_ARCH_LPC22xx


116 
	#IO0PIN
 (*((vﬁ©ûê*Ë0xE0028000)Ë

	)

117 
	#IO0SET
 (*((vﬁ©ûê*Ë0xE0028004)Ë

	)

118 
	#IO0DIR
 (*((vﬁ©ûê*Ë0xE0028008)Ë

	)

119 
	#IO0CLR
 (*((vﬁ©ûê*Ë0xE002800C)Ë

	)

121 
	#IO1PIN
 (*((vﬁ©ûê*Ë0xE0028010)Ë

	)

122 
	#IO1SET
 (*((vﬁ©ûê*Ë0xE0028014)Ë

	)

123 
	#IO1DIR
 (*((vﬁ©ûê*Ë0xE0028018)Ë

	)

124 
	#IO1CLR
 (*((vﬁ©ûê*Ë0xE002801C)Ë

	)

127 #ifde‡
CONFIG_ARCH_LPC22xx


129 
	#IO2PIN
 (*((vﬁ©ûê*Ë0xE0028020)Ë

	)

130 
	#IO2SET
 (*((vﬁ©ûê*Ë0xE0028024)Ë

	)

131 
	#IO2DIR
 (*((vﬁ©ûê*Ë0xE0028028)Ë

	)

132 
	#IO2CLR
 (*((vﬁ©ûê*Ë0xE002802C)Ë

	)

134 
	#IO3PIN
 (*((vﬁ©ûê*Ë0xE0028030)Ë

	)

135 
	#IO3SET
 (*((vﬁ©ûê*Ë0xE0028034)Ë

	)

136 
	#IO3DIR
 (*((vﬁ©ûê*Ë0xE0028038)Ë

	)

137 
	#IO3CLR
 (*((vﬁ©ûê*Ë0xE002803C)Ë

	)

142 
	#U0RBR
 (*((vﬁ©ûê*Ë0xE000C000))

	)

143 
	#U0THR
 (*((vﬁ©ûê*Ë0xE000C000))

	)

144 
	#U0IER
 (*((vﬁ©ûê*Ë0xE000C004))

	)

145 
	#U0IIR
 (*((vﬁ©ûê*Ë0xE000C008))

	)

146 
	#U0FCR
 (*((vﬁ©ûê*Ë0xE000C008))

	)

147 
	#U0LCR
 (*((vﬁ©ûê*Ë0xE000C00C))

	)

148 
	#U0LSR
 (*((vﬁ©ûê*Ë0xE000C014))

	)

149 
	#U0SCR
 (*((vﬁ©ûê*Ë0xE000C01C))

	)

150 
	#U0DLL
 (*((vﬁ©ûê*Ë0xE000C000))

	)

151 
	#U0DLM
 (*((vﬁ©ûê*Ë0xE000C004))

	)

154 
	#U1RBR
 (*((vﬁ©ûê*Ë0xE0010000))

	)

155 
	#U1THR
 (*((vﬁ©ûê*Ë0xE0010000))

	)

156 
	#U1IER
 (*((vﬁ©ûê*Ë0xE0010004))

	)

157 
	#U1IIR
 (*((vﬁ©ûê*Ë0xE0010008))

	)

158 
	#U1FCR
 (*((vﬁ©ûê*Ë0xE0010008))

	)

159 
	#U1LCR
 (*((vﬁ©ûê*Ë0xE001000C))

	)

160 
	#U1MCR
 (*((vﬁ©ûê*Ë0xE0010010))

	)

161 
	#U1LSR
 (*((vﬁ©ûê*Ë0xE0010014))

	)

162 
	#U1MSR
 (*((vﬁ©ûê*Ë0xE0010018))

	)

163 
	#U1SCR
 (*((vﬁ©ûê*Ë0xE001001C))

	)

164 
	#U1DLL
 (*((vﬁ©ûê*Ë0xE0010000))

	)

165 
	#U1DLM
 (*((vﬁ©ûê*Ë0xE0010004))

	)

168 
	#I2CONSET
 (*((vﬁ©ûê*Ë0xE001C000))

	)

169 
	#I2STAT
 (*((vﬁ©ûê*Ë0xE001C004))

	)

170 
	#I2DAT
 (*((vﬁ©ûê*Ë0xE001C008))

	)

171 
	#I2ADR
 (*((vﬁ©ûê*Ë0xE001C00C))

	)

172 
	#I2SCLH
 (*((vﬁ©ûê*Ë0xE001C010))

	)

173 
	#I2SCLL
 (*((vﬁ©ûê*Ë0xE001C014))

	)

174 
	#I2CONCLR
 (*((vﬁ©ûê*Ë0xE001C018))

	)

178 
	#SPI_SPCR
 (*((vﬁ©ûê*Ë0xE0020000))

	)

179 
	#SPI_SPSR
 (*((vﬁ©ûê*Ë0xE0020004))

	)

180 
	#SPI_SPDR
 (*((vﬁ©ûê*Ë0xE0020008))

	)

181 
	#SPI_SPCCR
 (*((vﬁ©ûê*Ë0xE002000C))

	)

182 
	#SPI_SPINT
 (*((vﬁ©ûê*Ë0xE002001C))

	)

184 #ifde‡
CONFIG_ARCH_LPC22xx


185 
	#S0PCR
 (*((vﬁ©ûê*Ë0xE0020000)Ë

	)

186 
	#S0PSR
 (*((vﬁ©ûê*Ë0xE0020004)Ë

	)

187 
	#S0PDR
 (*((vﬁ©ûê*Ë0xE0020008)Ë

	)

188 
	#S0PCCR
 (*((vﬁ©ûê*Ë0xE002000C)Ë

	)

189 
	#S0PINT
 (*((vﬁ©ûê*Ë0xE002001C)Ë

	)

191 
	#S1PCR
 (*((vﬁ©ûê*Ë0xE0030000)Ë

	)

192 
	#S1PSR
 (*((vﬁ©ûê*Ë0xE0030004)Ë

	)

193 
	#S1PDR
 (*((vﬁ©ûê*Ë0xE0030008)Ë

	)

194 
	#S1PCCR
 (*((vﬁ©ûê*Ë0xE003000C)Ë

	)

195 
	#S1PINT
 (*((vﬁ©ûê*Ë0xE003001C)Ë

	)

198 
	#CAN1MOD
 (*((vﬁ©ûê*Ë0xE0044000)Ë

	)

199 
	#CAN1CMR
 (*((vﬁ©ûê*Ë0xE0044004)Ë

	)

200 
	#CAN1GSR
 (*((vﬁ©ûê*Ë0xE0044008)Ë

	)

201 
	#CAN1ICR
 (*((vﬁ©ûê*Ë0xE004400C)Ë

	)

202 
	#CAN1IER
 (*((vﬁ©ûê*Ë0xE0044010)Ë

	)

203 
	#CAN1BTR
 (*((vﬁ©ûê*Ë0xE0044014)Ë

	)

204 
	#CAN1EWL
 (*((vﬁ©ûê*Ë0xE004401C)Ë

	)

205 
	#CAN1SR
 (*((vﬁ©ûê*Ë0xE0044020)Ë

	)

206 
	#CAN1RFS
 (*((vﬁ©ûê*Ë0xE0044024)Ë

	)

207 
	#CAN1RDA
 (*((vﬁ©ûê*Ë0xE0044028)Ë

	)

208 
	#CAN1RDB
 (*((vﬁ©ûê*Ë0xE004402C)Ë

	)

209 
	#CAN1TFI1
 (*((vﬁ©ûê*Ë0xE0044030)Ë

	)

210 
	#CAN1TID1
 (*((vﬁ©ûê*Ë0xE0044034)Ë

	)

211 
	#CAN1TDA1
 (*((vﬁ©ûê*Ë0xE0044038)Ë

	)

212 
	#CAN1TDB1
 (*((vﬁ©ûê*Ë0xE004403C)Ë

	)

213 
	#CAN1TFI2
 (*((vﬁ©ûê*Ë0xE0044040)Ë

	)

214 
	#CAN1TID2
 (*((vﬁ©ûê*Ë0xE0044044)Ë

	)

215 
	#CAN1TDA2
 (*((vﬁ©ûê*Ë0xE0044048)Ë

	)

216 
	#CAN1TDB2
 (*((vﬁ©ûê*Ë0xE004404C)Ë

	)

217 
	#CAN1TFI3
 (*((vﬁ©ûê*Ë0xE0044050)Ë

	)

218 
	#CAN1TID3
 (*((vﬁ©ûê*Ë0xE0044054)Ë

	)

219 
	#CAN1TDA3
 (*((vﬁ©ûê*Ë0xE0044058)Ë

	)

220 
	#CAN1TDB3
 (*((vﬁ©ûê*Ë0xE004405C)Ë

	)

222 
	#CAN2MOD
 (*((vﬁ©ûê*Ë0xE0048000)Ë

	)

223 
	#CAN2CMR
 (*((vﬁ©ûê*Ë0xE0048004)Ë

	)

224 
	#CAN2GSR
 (*((vﬁ©ûê*Ë0xE0048008)Ë

	)

225 
	#CAN2ICR
 (*((vﬁ©ûê*Ë0xE004800C)Ë

	)

226 
	#CAN2IER
 (*((vﬁ©ûê*Ë0xE0048010)Ë

	)

227 
	#CAN2BTR
 (*((vﬁ©ûê*Ë0xE0048014)Ë

	)

228 
	#CAN2EWL
 (*((vﬁ©ûê*Ë0xE004801C)Ë

	)

229 
	#CAN2SR
 (*((vﬁ©ûê*Ë0xE0048020)Ë

	)

230 
	#CAN2RFS
 (*((vﬁ©ûê*Ë0xE0048024)Ë

	)

231 
	#CAN2RDA
 (*((vﬁ©ûê*Ë0xE0048028)Ë

	)

232 
	#CAN2RDB
 (*((vﬁ©ûê*Ë0xE004802C)Ë

	)

233 
	#CAN2TFI1
 (*((vﬁ©ûê*Ë0xE0048030)Ë

	)

234 
	#CAN2TID1
 (*((vﬁ©ûê*Ë0xE0048034)Ë

	)

235 
	#CAN2TDA1
 (*((vﬁ©ûê*Ë0xE0048038)Ë

	)

236 
	#CAN2TDB1
 (*((vﬁ©ûê*Ë0xE004803C)Ë

	)

237 
	#CAN2TFI2
 (*((vﬁ©ûê*Ë0xE0048040)Ë

	)

238 
	#CAN2TID2
 (*((vﬁ©ûê*Ë0xE0048044)Ë

	)

239 
	#CAN2TDA2
 (*((vﬁ©ûê*Ë0xE0048048)Ë

	)

240 
	#CAN2TDB2
 (*((vﬁ©ûê*Ë0xE004804C)Ë

	)

241 
	#CAN2TFI3
 (*((vﬁ©ûê*Ë0xE0048050)Ë

	)

242 
	#CAN2TID3
 (*((vﬁ©ûê*Ë0xE0048054)Ë

	)

243 
	#CAN2TDA3
 (*((vﬁ©ûê*Ë0xE0048058)Ë

	)

244 
	#CAN2TDB3
 (*((vﬁ©ûê*Ë0xE004805C)Ë

	)

246 
	#CAN3MOD
 (*((vﬁ©ûê*Ë0xE004C000)Ë

	)

247 
	#CAN3CMR
 (*((vﬁ©ûê*Ë0xE004C004)Ë

	)

248 
	#CAN3GSR
 (*((vﬁ©ûê*Ë0xE004C008)Ë

	)

249 
	#CAN3ICR
 (*((vﬁ©ûê*Ë0xE004C00C)Ë

	)

250 
	#CAN3IER
 (*((vﬁ©ûê*Ë0xE004C010)Ë

	)

251 
	#CAN3BTR
 (*((vﬁ©ûê*Ë0xE004C014)Ë

	)

252 
	#CAN3EWL
 (*((vﬁ©ûê*Ë0xE004C01C)Ë

	)

253 
	#CAN3SR
 (*((vﬁ©ûê*Ë0xE004C020)Ë

	)

254 
	#CAN3RFS
 (*((vﬁ©ûê*Ë0xE004C024)Ë

	)

255 
	#CAN3RDA
 (*((vﬁ©ûê*Ë0xE004C028)Ë

	)

256 
	#CAN3RDB
 (*((vﬁ©ûê*Ë0xE004C02C)Ë

	)

257 
	#CAN3TFI1
 (*((vﬁ©ûê*Ë0xE004C030)Ë

	)

258 
	#CAN3TID1
 (*((vﬁ©ûê*Ë0xE004C034)Ë

	)

259 
	#CAN3TDA1
 (*((vﬁ©ûê*Ë0xE004C038)Ë

	)

260 
	#CAN3TDB1
 (*((vﬁ©ûê*Ë0xE004C03C)Ë

	)

261 
	#CAN3TFI2
 (*((vﬁ©ûê*Ë0xE004C040)Ë

	)

262 
	#CAN3TID2
 (*((vﬁ©ûê*Ë0xE004C044)Ë

	)

263 
	#CAN3TDA2
 (*((vﬁ©ûê*Ë0xE004C048)Ë

	)

264 
	#CAN3TDB2
 (*((vﬁ©ûê*Ë0xE004C04C)Ë

	)

265 
	#CAN3TFI3
 (*((vﬁ©ûê*Ë0xE004C050)Ë

	)

266 
	#CAN3TID3
 (*((vﬁ©ûê*Ë0xE004C054)Ë

	)

267 
	#CAN3TDA3
 (*((vﬁ©ûê*Ë0xE004C058)Ë

	)

268 
	#CAN3TDB3
 (*((vﬁ©ûê*Ë0xE004C05C)Ë

	)

270 
	#CAN4MOD
 (*((vﬁ©ûê*Ë0xE0050000)Ë

	)

271 
	#CAN4CMR
 (*((vﬁ©ûê*Ë0xE0050004)Ë

	)

272 
	#CAN4GSR
 (*((vﬁ©ûê*Ë0xE0050008)Ë

	)

273 
	#CAN4ICR
 (*((vﬁ©ûê*Ë0xE005000C)Ë

	)

274 
	#CAN4IER
 (*((vﬁ©ûê*Ë0xE0050010)Ë

	)

275 
	#CAN4BTR
 (*((vﬁ©ûê*Ë0xE0050014)Ë

	)

276 
	#CAN4EWL
 (*((vﬁ©ûê*Ë0xE005001C)Ë

	)

277 
	#CAN4SR
 (*((vﬁ©ûê*Ë0xE0050020)Ë

	)

278 
	#CAN4RFS
 (*((vﬁ©ûê*Ë0xE0050024)Ë

	)

279 
	#CAN4RDA
 (*((vﬁ©ûê*Ë0xE0050028)Ë

	)

280 
	#CAN4RDB
 (*((vﬁ©ûê*Ë0xE005002C)Ë

	)

281 
	#CAN4TFI1
 (*((vﬁ©ûê*Ë0xE0050030)Ë

	)

282 
	#CAN4TID1
 (*((vﬁ©ûê*Ë0xE0050034)Ë

	)

283 
	#CAN4TDA1
 (*((vﬁ©ûê*Ë0xE0050038)Ë

	)

284 
	#CAN4TDB1
 (*((vﬁ©ûê*Ë0xE005003C)Ë

	)

285 
	#CAN4TFI2
 (*((vﬁ©ûê*Ë0xE0050040)Ë

	)

286 
	#CAN4TID2
 (*((vﬁ©ûê*Ë0xE0050044)Ë

	)

287 
	#CAN4TDA2
 (*((vﬁ©ûê*Ë0xE0050048)Ë

	)

288 
	#CAN4TDB2
 (*((vﬁ©ûê*Ë0xE005004C)Ë

	)

289 
	#CAN4TFI3
 (*((vﬁ©ûê*Ë0xE0050050)Ë

	)

290 
	#CAN4TID3
 (*((vﬁ©ûê*Ë0xE0050054)Ë

	)

291 
	#CAN4TDA3
 (*((vﬁ©ûê*Ë0xE0050058)Ë

	)

292 
	#CAN4TDB3
 (*((vﬁ©ûê*Ë0xE005005C)Ë

	)

294 
	#CAN5MOD
 (*((vﬁ©ûê*Ë0xE0054000)Ë

	)

295 
	#CAN5CMR
 (*((vﬁ©ûê*Ë0xE0054004)Ë

	)

296 
	#CAN5GSR
 (*((vﬁ©ûê*Ë0xE0054008)Ë

	)

297 
	#CAN5ICR
 (*((vﬁ©ûê*Ë0xE005400C)Ë

	)

298 
	#CAN5IER
 (*((vﬁ©ûê*Ë0xE0054010)Ë

	)

299 
	#CAN5BTR
 (*((vﬁ©ûê*Ë0xE0054014)Ë

	)

300 
	#CAN5EWL
 (*((vﬁ©ûê*Ë0xE005401C)Ë

	)

301 
	#CAN5SR
 (*((vﬁ©ûê*Ë0xE0054020)Ë

	)

302 
	#CAN5RFS
 (*((vﬁ©ûê*Ë0xE0054024)Ë

	)

303 
	#CAN5RDA
 (*((vﬁ©ûê*Ë0xE0054028)Ë

	)

304 
	#CAN5RDB
 (*((vﬁ©ûê*Ë0xE005402C)Ë

	)

305 
	#CAN5TFI1
 (*((vﬁ©ûê*Ë0xE0054030)Ë

	)

306 
	#CAN5TID1
 (*((vﬁ©ûê*Ë0xE0054034)Ë

	)

307 
	#CAN5TDA1
 (*((vﬁ©ûê*Ë0xE0054038)Ë

	)

308 
	#CAN5TDB1
 (*((vﬁ©ûê*Ë0xE005403C)Ë

	)

309 
	#CAN5TFI2
 (*((vﬁ©ûê*Ë0xE0054040)Ë

	)

310 
	#CAN5TID2
 (*((vﬁ©ûê*Ë0xE0054044)Ë

	)

311 
	#CAN5TDA2
 (*((vﬁ©ûê*Ë0xE0054048)Ë

	)

312 
	#CAN5TDB2
 (*((vﬁ©ûê*Ë0xE005404C)Ë

	)

313 
	#CAN5TFI3
 (*((vﬁ©ûê*Ë0xE0054050)Ë

	)

314 
	#CAN5TID3
 (*((vﬁ©ûê*Ë0xE0054054)Ë

	)

315 
	#CAN5TDA3
 (*((vﬁ©ûê*Ë0xE0054058)Ë

	)

316 
	#CAN5TDB3
 (*((vﬁ©ûê*Ë0xE005405C)Ë

	)

318 #ifde‡
CONFIG_ARCH_LPC22xx


319 
	#CAN6MOD
 (*((vﬁ©ûê*Ë0xE0058000)Ë

	)

320 
	#CAN6CMR
 (*((vﬁ©ûê*Ë0xE0058004)Ë

	)

321 
	#CAN6GSR
 (*((vﬁ©ûê*Ë0xE0058008)Ë

	)

322 
	#CAN6ICR
 (*((vﬁ©ûê*Ë0xE005800C)Ë

	)

323 
	#CAN6IER
 (*((vﬁ©ûê*Ë0xE0058010)Ë

	)

324 
	#CAN6BTR
 (*((vﬁ©ûê*Ë0xE0058014)Ë

	)

325 
	#CAN6EWL
 (*((vﬁ©ûê*Ë0xE005801C)Ë

	)

326 
	#CAN6SR
 (*((vﬁ©ûê*Ë0xE0058020)Ë

	)

327 
	#CAN6RFS
 (*((vﬁ©ûê*Ë0xE0058024)Ë

	)

328 
	#CAN6RDA
 (*((vﬁ©ûê*Ë0xE0058028)Ë

	)

329 
	#CAN6RDB
 (*((vﬁ©ûê*Ë0xE005802C)Ë

	)

330 
	#CAN6TFI1
 (*((vﬁ©ûê*Ë0xE0058030)Ë

	)

331 
	#CAN6TID1
 (*((vﬁ©ûê*Ë0xE0058034)Ë

	)

332 
	#CAN6TDA1
 (*((vﬁ©ûê*Ë0xE0058038)Ë

	)

333 
	#CAN6TDB1
 (*((vﬁ©ûê*Ë0xE005803C)Ë

	)

334 
	#CAN6TFI2
 (*((vﬁ©ûê*Ë0xE0058040)Ë

	)

335 
	#CAN6TID2
 (*((vﬁ©ûê*Ë0xE0058044)Ë

	)

336 
	#CAN6TDA2
 (*((vﬁ©ûê*Ë0xE0058048)Ë

	)

337 
	#CAN6TDB2
 (*((vﬁ©ûê*Ë0xE005804C)Ë

	)

338 
	#CAN6TFI3
 (*((vﬁ©ûê*Ë0xE0058050)Ë

	)

339 
	#CAN6TID3
 (*((vﬁ©ûê*Ë0xE0058054)Ë

	)

340 
	#CAN6TDA3
 (*((vﬁ©ûê*Ë0xE0058058)Ë

	)

341 
	#CAN6TDB3
 (*((vﬁ©ûê*Ë0xE005805C)Ë

	)

344 
	#CANTxSR
 (*((vﬁ©ûê*Ë0xE0040000)Ë

	)

345 
	#CANRxSR
 (*((vﬁ©ûê*Ë0xE0040004)Ë

	)

346 
	#CANMSR
 (*((vﬁ©ûê*Ë0xE0040008)Ë

	)

348 
	#CANAFMR
 (*((vﬁ©ûê*Ë0xE003C000)Ë

	)

349 
	#CANSFF_ß
 (*((vﬁ©ûê*Ë0xE003C004)Ë

	)

350 
	#CANSFF_GRP_ß
 (*((vﬁ©ûê*Ë0xE003C008)Ë

	)

351 
	#CANEFF_ß
 (*((vﬁ©ûê*Ë0xE003C00C)Ë

	)

352 
	#CANEFF_GRP_ß
 (*((vﬁ©ûê*Ë0xE003C010)Ë

	)

353 
	#CANENDofTabÀ
 (*((vﬁ©ûê*Ë0xE003C014)Ë

	)

354 
	#CANLUTîrAd
 (*((vﬁ©ûê*Ë0xE003C018)Ë

	)

355 
	#CANLUTîr
 (*((vﬁ©ûê*Ë0xE003C01C)Ë

	)

357 
	#CANAFRAM
 (*((vﬁ©ûê*Ë0xE0038000))

	)

361 
	#T0IR
 (*((vﬁ©ûê*Ë0xE0004000))

	)

362 
	#T0TCR
 (*((vﬁ©ûê*Ë0xE0004004))

	)

363 
	#T0TC
 (*((vﬁ©ûê*Ë0xE0004008))

	)

364 
	#T0PR
 (*((vﬁ©ûê*Ë0xE000400C))

	)

365 
	#T0PC
 (*((vﬁ©ûê*Ë0xE0004010))

	)

366 
	#T0MCR
 (*((vﬁ©ûê*Ë0xE0004014))

	)

367 
	#T0MR0
 (*((vﬁ©ûê*Ë0xE0004018))

	)

368 
	#T0MR1
 (*((vﬁ©ûê*Ë0xE000401C))

	)

369 
	#T0MR2
 (*((vﬁ©ûê*Ë0xE0004020))

	)

370 
	#T0MR3
 (*((vﬁ©ûê*Ë0xE0004024))

	)

371 
	#T0CCR
 (*((vﬁ©ûê*Ë0xE0004028))

	)

372 
	#T0CR0
 (*((vﬁ©ûê*Ë0xE000402C))

	)

373 
	#T0CR1
 (*((vﬁ©ûê*Ë0xE0004030))

	)

374 
	#T0CR2
 (*((vﬁ©ûê*Ë0xE0004034))

	)

375 
	#T0CR3
 (*((vﬁ©ûê*Ë0xE0004038))

	)

376 
	#T0EMR
 (*((vﬁ©ûê*Ë0xE000403C))

	)

379 
	#T1IR
 (*((vﬁ©ûê*Ë0xE0008000))

	)

380 
	#T1TCR
 (*((vﬁ©ûê*Ë0xE0008004))

	)

381 
	#T1TC
 (*((vﬁ©ûê*Ë0xE0008008))

	)

382 
	#T1PR
 (*((vﬁ©ûê*Ë0xE000800C))

	)

383 
	#T1PC
 (*((vﬁ©ûê*Ë0xE0008010))

	)

384 
	#T1MCR
 (*((vﬁ©ûê*Ë0xE0008014))

	)

385 
	#T1MR0
 (*((vﬁ©ûê*Ë0xE0008018))

	)

386 
	#T1MR1
 (*((vﬁ©ûê*Ë0xE000801C))

	)

387 
	#T1MR2
 (*((vﬁ©ûê*Ë0xE0008020))

	)

388 
	#T1MR3
 (*((vﬁ©ûê*Ë0xE0008024))

	)

389 
	#T1CCR
 (*((vﬁ©ûê*Ë0xE0008028))

	)

390 
	#T1CR0
 (*((vﬁ©ûê*Ë0xE000802C))

	)

391 
	#T1CR1
 (*((vﬁ©ûê*Ë0xE0008030))

	)

392 
	#T1CR2
 (*((vﬁ©ûê*Ë0xE0008034))

	)

393 
	#T1CR3
 (*((vﬁ©ûê*Ë0xE0008038))

	)

394 
	#T1EMR
 (*((vﬁ©ûê*Ë0xE000803C))

	)

397 
	#PWMIR
 (*((vﬁ©ûê*Ë0xE0014000))

	)

398 
	#PWMTCR
 (*((vﬁ©ûê*Ë0xE0014004))

	)

399 
	#PWMTC
 (*((vﬁ©ûê*Ë0xE0014008))

	)

400 
	#PWMPR
 (*((vﬁ©ûê*Ë0xE001400C))

	)

401 
	#PWMPC
 (*((vﬁ©ûê*Ë0xE0014010))

	)

402 
	#PWMMCR
 (*((vﬁ©ûê*Ë0xE0014014))

	)

403 
	#PWMMR0
 (*((vﬁ©ûê*Ë0xE0014018))

	)

404 
	#PWMMR1
 (*((vﬁ©ûê*Ë0xE001401C))

	)

405 
	#PWMMR2
 (*((vﬁ©ûê*Ë0xE0014020))

	)

406 
	#PWMMR3
 (*((vﬁ©ûê*Ë0xE0014024))

	)

407 
	#PWMMR4
 (*((vﬁ©ûê*Ë0xE0014040))

	)

408 
	#PWMMR5
 (*((vﬁ©ûê*Ë0xE0014044))

	)

409 
	#PWMMR6
 (*((vﬁ©ûê*Ë0xE0014048))

	)

410 
	#PWMPCR
 (*((vﬁ©ûê*Ë0xE001404C))

	)

411 
	#PWMLER
 (*((vﬁ©ûê*Ë0xE0014050))

	)

414 #i‚de‡
CONFIG_ARCH_LPC2104


415 
	#ADCR
 (*((vﬁ©ûê*Ë0xE0034000)Ë

	)

416 
	#ADDR
 (*((vﬁ©ûê*Ë0xE0034004)Ë

	)

420 
	#ILR
 (*((vﬁ©ûê*Ë0xE0024000))

	)

421 
	#CTC
 (*((vﬁ©ûê*Ë0xE0024004))

	)

422 
	#CCR
 (*((vﬁ©ûê*Ë0xE0024008))

	)

423 
	#CIIR
 (*((vﬁ©ûê*Ë0xE002400C))

	)

424 
	#AMR
 (*((vﬁ©ûê*Ë0xE0024010))

	)

425 
	#CTIME0
 (*((vﬁ©ûê*Ë0xE0024014))

	)

426 
	#CTIME1
 (*((vﬁ©ûê*Ë0xE0024018))

	)

427 
	#CTIME2
 (*((vﬁ©ûê*Ë0xE002401C))

	)

428 
	#SEC
 (*((vﬁ©ûê*Ë0xE0024020))

	)

429 
	#MIN
 (*((vﬁ©ûê*Ë0xE0024024))

	)

430 
	#HOUR
 (*((vﬁ©ûê*Ë0xE0024028))

	)

431 
	#DOM
 (*((vﬁ©ûê*Ë0xE002402C))

	)

432 
	#DOW
 (*((vﬁ©ûê*Ë0xE0024030))

	)

433 
	#DOY
 (*((vﬁ©ûê*Ë0xE0024034))

	)

434 
	#MONTH
 (*((vﬁ©ûê*Ë0xE0024038))

	)

435 
	#YEAR
 (*((vﬁ©ûê*Ë0xE002403C))

	)

436 
	#ALSEC
 (*((vﬁ©ûê*Ë0xE0024060))

	)

437 
	#ALMIN
 (*((vﬁ©ûê*Ë0xE0024064))

	)

438 
	#ALHOUR
 (*((vﬁ©ûê*Ë0xE0024068))

	)

439 
	#ALDOM
 (*((vﬁ©ûê*Ë0xE002406C))

	)

440 
	#ALDOW
 (*((vﬁ©ûê*Ë0xE0024070))

	)

441 
	#ALDOY
 (*((vﬁ©ûê*Ë0xE0024074))

	)

442 
	#ALMON
 (*((vﬁ©ûê*Ë0xE0024078))

	)

443 
	#ALYEAR
 (*((vﬁ©ûê*Ë0xE002407C))

	)

444 
	#PREINT
 (*((vﬁ©ûê*Ë0xE0024080))

	)

445 
	#PREFRAC
 (*((vﬁ©ûê*Ë0xE0024084))

	)

448 
	#WDMOD
 (*((vﬁ©ûê*Ë0xE0000000))

	)

449 
	#WDTC
 (*((vﬁ©ûê*Ë0xE0000004))

	)

450 
	#WDFEED
 (*((vﬁ©ûê*Ë0xE0000008))

	)

451 
	#WDTV
 (*((vﬁ©ûê*Ë0xE000000C))

	)

456 
	#REG_U0RBR
 0xE000C000

	)

457 
	#REG_U1RBR
 0xE0010000

	)

460 
	#REG_PLLCON
 0xE01FC080

	)

461 
	#REG_PLLCFG
 0xE01FC084

	)

462 
	#REG_PLLSTAT
 0xE01FC088

	)

463 
	#REG_PLLFEED
 0xE01FC08C

	)

467 
	#REG_PCON
 0xE01FC0C0

	)

468 
	#REG_PCOMP
 0xE01FC0C4

	)

469 
	#REG_PINSEL0
 0xE002C000

	)

470 
	#REG_MEMMAP
 0xE01FC040

	)

471 
	#REG_PLLSTAT
 0xE01FC088

	)

472 
	#REG_VPBDIV
 0xE01FC100

	)

	@src/lib/libcpu/arm/lpc22xx/irq/bsp_irq_init.c

8 
	~<úq.h
>

9 
	~<b•.h
>

10 
	~<Õc22xx.h
>

17 
	$BSP_πems_úq_mngt_öô
()

19 *
ve˘‹TabÀ
;

20 
i
;

23 
VICI¡EnCÃ
 = 0xFFFFFFFF;

25 
ve˘‹TabÀ
 = (*Ë
VECTOR_TABLE
;

27 
i
=0; i<
BSP_MAX_INT
; i++) {

28 *(
ve˘‹TabÀ
 + 
i
Ë()(
deÁu…_öt_h™dÀr
);

34 
IRQ_VECTOR_ADDR
 = 0xE59FF018;

39 
FIQ_VECTOR_ADDR
 = 0xE59FF018;

45 
UNDEFINED_INSTRUCTION_VECTOR_ADDR
 = 0xEAFFFFFE;

46 
SOFTWARE_INTERRUPT_VECTOR_ADDR
 = 0xEAFFFFFE;

47 
PREFETCH_ABORT_VECTOR_ADDR
 = 0xEAFFFFFE;

55 
DATA_ABORT_VECTOR_ADDR
 = 0xE59FF018;

61 
VICPrŸe˘i⁄
 = 0;

62 
VICI¡Sñe˘
 = 0;

63 
VICVe˘Addr
 = 0;

64 
	}
}

	@src/lib/libcpu/arm/lpc22xx/irq/irq.c

12 
	~<πems/sc‹e/¨mv4.h
>

14 
	~<b•.h
>

15 
	~<b•/úq.h
>

16 
	~<b•/úq-gíîic.h
>

18 
	~<Õc22xx.h
>

20 
	$b•_öãºu±_di•©ch
()

22 
πems_ve˘‹_numbî
 
ve˘‹
 = 31 - 
	`__buûtö_˛z
(
VICIRQSètus
);

24 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

26 
VICVe˘Addr
 = 0;

27 
	}
}

29 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

31 
VICI¡E«bÀ
 |1 << 
ve˘‹
;

33  
RTEMS_SUCCESSFUL
;

34 
	}
}

36 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

38 
VICI¡EnCÃ
 = 1 << 
ve˘‹
;

40  
RTEMS_SUCCESSFUL
;

41 
	}
}

43 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

45 vﬁ©ûê
uöt32_t
 *
˘æ
 = (vﬁ©ûêuöt32_à*Ë
VICVe˘C¡lBa£
;

46 
size_t
 
i
 = 0;

49 
VICI¡EnCÃ
 = 0xffffffff;

52 
VICI¡Sñe˘
 = 0;

55 
VICPrŸe˘i⁄
 = 0;

57 
i
 = 0; i < 16; ++i) {

59 
˘æ
 [
i
] = 0;

62 
VICVe˘Addr
 = 0;

66 
VICVe˘Addr
 = 0;

69 
	`_CPU_ISR_ö°Æl_ve˘‹
(
ARM_EXCEPTION_IRQ
, 
_ARMV4_Ex˚±i⁄_öãºu±
, 
NULL
);

71  
RTEMS_SUCCESSFUL
;

72 
	}
}

	@src/lib/libcpu/arm/lpc22xx/irq/irq.h

13 #i‚de‡
__IRQ_H__


14 
	#__IRQ_H__


	)

16 #i‚de‡
__asm__


18 
	~<πems.h
>

19 
	~<πems/úq.h
>

20 
	~<πems/úq-exãnsi⁄.h
>

25 
	#LPC22xx_INTERRUPT_WDINT
 0

	)

26 
	#LPC22xx_INTERRUPT_RSV0
 1

	)

27 
	#LPC22xx_INTERRUPT_DBGRX
 2

	)

28 
	#LPC22xx_INTERRUPT_DBGTX
 3

	)

29 
	#LPC22xx_INTERRUPT_TIMER0
 4

	)

30 
	#LPC22xx_INTERRUPT_TIMER1
 5

	)

31 
	#LPC22xx_INTERRUPT_UART0
 6

	)

32 
	#LPC22xx_INTERRUPT_UART1
 7

	)

33 
	#LPC22xx_INTERRUPT_PWM0
 8

	)

34 
	#LPC22xx_INTERRUPT_I2C
 9

	)

35 
	#LPC22xx_INTERRUPT_SPI0
 10

	)

36 
	#LPC22xx_INTERRUPT_SPI1
 11

	)

37 
	#LPC22xx_INTERRUPT_PLL
 12

	)

38 
	#LPC22xx_INTERRUPT_RTC
 13

	)

39 
	#LPC22xx_INTERRUPT_EINT0
 14

	)

40 
	#LPC22xx_INTERRUPT_EINT1
 15

	)

41 
	#LPC22xx_INTERRUPT_EINT2
 16

	)

42 
	#LPC22xx_INTERRUPT_EINT3
 17

	)

43 
	#LPC22xx_INTERRUPT_ADC
 18

	)

45 
	#LPC22xx_INTERRUPT_CANERR
 19

	)

46 
	#LPC22xx_INTERRUPT_CAN1TX
 20

	)

47 
	#LPC22xx_INTERRUPT_CAN1RX
 21

	)

48 
	#LPC22xx_INTERRUPT_CAN2TX
 22

	)

49 
	#LPC22xx_INTERRUPT_CAN2RX
 23

	)

50 
	#LPC22xx_INTERRUPT_CAN3TX
 24

	)

51 
	#LPC22xx_INTERRUPT_CAN3RX
 25

	)

52 
	#LPC22xx_INTERRUPT_CAN4TX
 26

	)

53 
	#LPC22xx_INTERRUPT_CAN4RX
 27

	)

54 
	#BSP_MAX_INT
 28

	)

56 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

58 
	#BSP_INTERRUPT_VECTOR_MAX
 (
BSP_MAX_INT
 - 1)

	)

60 
	#UNDEFINED_INSTRUCTION_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x00000004L)

	)

61 
	#SOFTWARE_INTERRUPT_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x00000008L)

	)

62 
	#PREFETCH_ABORT_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x0000000CL)

	)

63 
	#DATA_ABORT_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x00000010L)

	)

64 
	#IRQ_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x00000018L)

	)

65 
	#FIQ_VECTOR_ADDR
 (*(
u_l⁄g
 *)0x0000001CL)

	)

67 
	#DATA_ABORT_ISR_ADDR
 (*(
u_l⁄g
 *)0x00000030L)

	)

68 
	#IRQ_ISR_ADDR
 (*(
u_l⁄g
 *)0x00000038L)

	)

69 
	#FIQ_ISR_ADDR
 (*(
u_l⁄g
 *)0x0000003CL)

	)

	@src/lib/libcpu/arm/lpc22xx/timer/lpc_timer.h

1 #i‚de‡
__LPC_TIMER_H


2 
	#__LPC_TIMER_H


	)

11 
	#TCR_ENABLE_BIT
 0

	)

12 
	#TCR_RESET_BIT
 1

	)

16 
	#CH_MAXNUM
 4

	)

17 
	#CH0
 0

	)

18 
	#CH1
 1

	)

19 
	#CH2
 2

	)

20 
	#CH3
 3

	)

24 
	#CPCH_MAXNUM
 4

	)

25 
	#CPCH0
 0

	)

26 
	#CPCH1
 1

	)

27 
	#CPCH2
 2

	)

28 
	#CPCH3
 3

	)

31 
	#TimîA˘i⁄_I¡îru±
 0x1

	)

32 
	#TimîA˘i⁄_Re£tTimî
 0x2

	)

33 
	#TimîA˘i⁄_St›Timî
 0x4

	)

36 
	#TIMERMR0I¡
 0x01

	)

37 
	#TIMERMR1I¡
 0x02

	)

38 
	#TIMERMR2I¡
 0x04

	)

39 
	#TIMERMR3I¡
 0x08

	)

40 
	#TIMERCR0I¡
 0x10

	)

41 
	#TIMERCR1I¡
 0x20

	)

42 
	#TIMERCR2I¡
 0x40

	)

43 
	#TIMERCR3I¡
 0x80

	)

45 
	#TIMERALLI¡
 0xFF

	)

	@src/lib/libcpu/arm/lpc22xx/timer/timer.c

16 
	~<b•.h
>

17 
	~<πems.h
>

18 
	~<πems/btimî.h
>

19 
	~<Õc22xx.h
>

20 
	~"Õc_timî.h
"

22 
uöt32_t
 
	gg_°¨t
;

23 
uöt32_t
 
	gg_‰eq
;

25 
boﬁ
 
	gbíchm¨k_timî_föd_avîage_ovîhód
;

31 
	$bíchm¨k_timî_öôülize
( )

33 
g_‰eq
 = 
LPC22xx_Fp˛k
 / 1000;

34 
	}
}

46 
	#AVG_OVERHEAD
 0

	)

49 
	#LEAST_VALID
 1

	)

51 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
( )

53  (
T0TC
/(
LPC22xx_Fp˛k
/1000000));

59 
	}
}

61 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(
boﬁ
 
föd_Êag
)

63 
bíchm¨k_timî_föd_avîage_ovîhód
 = 
föd_Êag
;

64 
	}
}

	@src/lib/libcpu/arm/s3c24xx/clock/clockdrv.c

11 
	~<πems.h
>

12 
	~<b•/úq.h
>

13 
	~<b•.h
>

14 
	~<s3c24xx.h
>

16 
Clock_i§
(
πems_úq_hdl_∑øm
 
¨g
);

17 
˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

18 
˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
);

19 
˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
);

21 
πems_úq_c⁄√˘_d©a
 
	g˛ock_i§_d©a
 = {

22 .
«me
 = 
BSP_INT_TIMER4
,

23 .
	ghdl
 = 
Clock_i§
,

24 .
	gh™dÀ
 = 
NULL
,

25 .
	g⁄
 = 
˛ock_i§_⁄
,

26 .
	goff
 = 
˛ock_i§_off
,

27 .
	gisOn
 = 
˛ock_i§_is_⁄
,

35 
	#Clock_drivî_suµ‹t_©_tick
() \

37 
	`CÀ¨Pídög
(
BIT_TIMER4
); \

38 } 0)

	)

44 
	#Clock_drivî_suµ‹t_ö°Æl_i§
–
_√w
, 
_ﬁd
 ) \

46 
_ﬁd
 = 
NULL
; \

47 
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

48 } 0)

	)

62 
	#Clock_drivî_suµ‹t_öôülize_h¨dw¨e
() \

64 
uöt32_t
 
¸
; \

65 
uöt32_t
 
‰eq
; \

67 
¸
=
rTCFG1
 & 0xFFF0FFFF; \

68 
rTCFG1
=(
¸
 | (3<<16)); \

69 
‰eq
 = 
	`gë_PCLK
(); \

71 
‰eq
 = (freq /16)/16; \

72 
rTCNTB4
 = ((
‰eq
 / 1000Ë* 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) / 1000; \

74 
rINTMSK
&=~
BIT_TIMER4
; \

76 
¸
=
rTCON
 & 0xFF8FFFFF; \

77 
rTCON
=(
¸
|(0x6<<20)); \

78 
rTCON
=(
¸
|(0x5<<20)); \

79 } 0)

	)

87 
	#Clock_drivî_suµ‹t_shutdown_h¨dw¨e
() \

90 
	`BSP_ªmove_πems_úq_h™dÀr
(&
˛ock_i§_d©a
); \

91 } 0)

	)

98 
	$˛ock_i§_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

100 
	}
}

107 
	$˛ock_i§_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
unu£d
)

110 
	}
}

118 
	$˛ock_i§_is_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
úq
)

121 
	}
}

123 
	#CLOCK_DRIVER_USE_DUMMY_TIMECOUNTER


	)

126 
	~"../../../../libb•/sh¨ed/˛ockdrv_shñl.h
"

	@src/lib/libcpu/arm/s3c24xx/clock/support.c

1 
	~<πems.h
>

2 
	~<b•.h
>

3 
	~<s3c24xx.h
>

16 
uöt32_t
 
	$gë_FCLK
()

18 
uöt32_t
 
r
, 
m
, 
p
, 
s
;

20 
r
 = 
rMPLLCON
;

21 
m
 = ((
r
 & 0xFF000) >> 12) + 8;

22 
p
 = ((
r
 & 0x003F0) >> 4) + 2;

23 
s
 = 
r
 & 0x3;

25 ((
BSP_OSC_FREQ
 * 
m
Ë/ (
p
 << 
s
));

26 
	}
}

29 
uöt32_t
 
	$gë_UCLK
()

31 
uöt32_t
 
r
, 
m
, 
p
, 
s
;

33 
r
 = 
rUPLLCON
;

34 
m
 = ((
r
 & 0xFF000) >> 12) + 8;

35 
p
 = ((
r
 & 0x003F0) >> 4) + 2;

36 
s
 = 
r
 & 0x3;

38 ((
BSP_OSC_FREQ
 * 
m
Ë/ (
p
 << 
s
));

39 
	}
}

42 
uöt32_t
 
	$gë_HCLK
()

44 i‡(
rCLKDIVN
 & 0x2)

45  
	`gë_FCLK
()/2;

47  
	`gë_FCLK
();

48 
	}
}

51 
uöt32_t
 
	$gë_PCLK
()

53 i‡(
rCLKDIVN
 & 0x1)

54  
	`gë_HCLK
()/2;

56  
	`gë_HCLK
();

57 
	}
}

	@src/lib/libcpu/arm/s3c24xx/include/s3c2400.h

8 #i‚de‡
S3C2400_H_


9 
	#S3C2400_H_


	)

12 
	#rINTOFFSET_ADDR
 0x14400014

	)

14 
	#rBWSCON
 (*(vﬁ©ûê*)0x14000000)

	)

15 
	#rBANKCON0
 (*(vﬁ©ûê*)0x14000004)

	)

16 
	#rBANKCON1
 (*(vﬁ©ûê*)0x14000008)

	)

17 
	#rBANKCON2
 (*(vﬁ©ûê*)0x1400000C)

	)

18 
	#rBANKCON3
 (*(vﬁ©ûê*)0x14000010)

	)

19 
	#rBANKCON4
 (*(vﬁ©ûê*)0x14000014)

	)

20 
	#rBANKCON5
 (*(vﬁ©ûê*)0x14000018)

	)

21 
	#rBANKCON6
 (*(vﬁ©ûê*)0x1400001C)

	)

22 
	#rBANKCON7
 (*(vﬁ©ûê*)0x14000020)

	)

23 
	#rREFRESH
 (*(vﬁ©ûê*)0x14000024)

	)

24 
	#rBANKSIZE
 (*(vﬁ©ûê*)0x14000028)

	)

25 
	#rMRSRB6
 (*(vﬁ©ûê*)0x1400002C)

	)

26 
	#rMRSRB7
 (*(vﬁ©ûê*)0x14000030)

	)

30 
	#rSRCPND
 (*(vﬁ©ûê*)0x14400000)

	)

31 
	#rINTMOD
 (*(vﬁ©ûê*)0x14400004)

	)

32 
	#rINTMSK
 (*(vﬁ©ûê*)0x14400008)

	)

33 
	#rPRIORITY
 (*(vﬁ©ûê*)0x1440000C)

	)

34 
	#rINTPND
 (*(vﬁ©ûê*)0x14400010)

	)

35 
	#rINTOFFSET
 (*(vﬁ©ûê*)0x14400014)

	)

39 
	#rDISRC0
 (*(vﬁ©ûê*)0x14600000)

	)

40 
	#rDIDST0
 (*(vﬁ©ûê*)0x14600004)

	)

41 
	#rDCON0
 (*(vﬁ©ûê*)0x14600008)

	)

42 
	#rDSTAT0
 (*(vﬁ©ûê*)0x1460000C)

	)

43 
	#rDCSRC0
 (*(vﬁ©ûê*)0x14600010)

	)

44 
	#rDCDST0
 (*(vﬁ©ûê*)0x14600014)

	)

45 
	#rDMASKTRIG0
 (*(vﬁ©ûê*)0x14600018)

	)

46 
	#rDISRC1
 (*(vﬁ©ûê*)0x14600020)

	)

47 
	#rDIDST1
 (*(vﬁ©ûê*)0x14600024)

	)

48 
	#rDCON1
 (*(vﬁ©ûê*)0x14600028)

	)

49 
	#rDSTAT1
 (*(vﬁ©ûê*)0x1460002C)

	)

50 
	#rDCSRC1
 (*(vﬁ©ûê*)0x14600030)

	)

51 
	#rDCDST1
 (*(vﬁ©ûê*)0x14600034)

	)

52 
	#rDMASKTRIG1
 (*(vﬁ©ûê*)0x14600038)

	)

53 
	#rDISRC2
 (*(vﬁ©ûê*)0x14600040)

	)

54 
	#rDIDST2
 (*(vﬁ©ûê*)0x14600044)

	)

55 
	#rDCON2
 (*(vﬁ©ûê*)0x14600048)

	)

56 
	#rDSTAT2
 (*(vﬁ©ûê*)0x1460004C)

	)

57 
	#rDCSRC2
 (*(vﬁ©ûê*)0x14600050)

	)

58 
	#rDCDST2
 (*(vﬁ©ûê*)0x14600054)

	)

59 
	#rDMASKTRIG2
 (*(vﬁ©ûê*)0x14600058)

	)

60 
	#rDISRC3
 (*(vﬁ©ûê*)0x14600060)

	)

61 
	#rDIDST3
 (*(vﬁ©ûê*)0x14600064)

	)

62 
	#rDCON3
 (*(vﬁ©ûê*)0x14600068)

	)

63 
	#rDSTAT3
 (*(vﬁ©ûê*)0x1460006C)

	)

64 
	#rDCSRC3
 (*(vﬁ©ûê*)0x14600070)

	)

65 
	#rDCDST3
 (*(vﬁ©ûê*)0x14600074)

	)

66 
	#rDMASKTRIG3
 (*(vﬁ©ûê*)0x14600078)

	)

70 
	#rLOCKTIME
 (*(vﬁ©ûê*)0x14800000)

	)

71 
	#rMPLLCON
 (*(vﬁ©ûê*)0x14800004)

	)

72 
	#rUPLLCON
 (*(vﬁ©ûê*)0x14800008)

	)

73 
	#rCLKCON
 (*(vﬁ©ûê*)0x1480000C)

	)

74 
	#rCLKSLOW
 (*(vﬁ©ûê*)0x14800010)

	)

75 
	#rCLKDIVN
 (*(vﬁ©ûê*)0x14800014)

	)

79 
	#rLCDCON1
 (*(vﬁ©ûê*)0x14A00000)

	)

80 
	#rLCDCON2
 (*(vﬁ©ûê*)0x14A00004)

	)

81 
	#rLCDCON3
 (*(vﬁ©ûê*)0x14A00008)

	)

82 
	#rLCDCON4
 (*(vﬁ©ûê*)0x14A0000C)

	)

83 
	#rLCDCON5
 (*(vﬁ©ûê*)0x14A00010)

	)

84 
	#rLCDSADDR1
 (*(vﬁ©ûê*)0x14A00014)

	)

85 
	#rLCDSADDR2
 (*(vﬁ©ûê*)0x14A00018)

	)

86 
	#rLCDSADDR3
 (*(vﬁ©ûê*)0x14A0001C)

	)

87 
	#rREDLUT
 (*(vﬁ©ûê*)0x14A00020)

	)

88 
	#rGREENLUT
 (*(vﬁ©ûê*)0x14A00024)

	)

89 
	#rBLUELUT
 (*(vﬁ©ûê*)0x14A00028)

	)

90 
	#rDP1_2
 (*(vﬁ©ûê*)0x14A0002C)

	)

91 
	#rDP4_7
 (*(vﬁ©ûê*)0x14A00030)

	)

92 
	#rDP3_5
 (*(vﬁ©ûê*)0x14A00034)

	)

93 
	#rDP2_3
 (*(vﬁ©ûê*)0x14A00038)

	)

94 
	#rDP5_7
 (*(vﬁ©ûê*)0x14A0003c)

	)

95 
	#rDP3_4
 (*(vﬁ©ûê*)0x14A00040)

	)

96 
	#rDP4_5
 (*(vﬁ©ûê*)0x14A00044)

	)

97 
	#rDP6_7
 (*(vﬁ©ûê*)0x14A00048)

	)

98 
	#rDITHMODE
 (*(vﬁ©ûê*)0x14A0004C)

	)

99 
	#rTPAL
 (*(vﬁ©ûê*)0x14A00050)

	)

100 
	#GP32_PALETTE
 (*(vﬁ©ûê*)0x14A00400Ë

	)

104 
	#rULCON0
 (*(vﬁ©ûê*)0x15000000)

	)

105 
	#rUCON0
 (*(vﬁ©ûê*)0x15000004)

	)

106 
	#rUFCON0
 (*(vﬁ©ûê*)0x15000008)

	)

107 
	#rUMCON0
 (*(vﬁ©ûê*)0x1500000C)

	)

108 
	#rUTRSTAT0
 (*(vﬁ©ûê*)0x15000010)

	)

109 
	#rUERSTAT0
 (*(vﬁ©ûê*)0x15000014)

	)

110 
	#rUFSTAT0
 (*(vﬁ©ûê*)0x15000018)

	)

111 
	#rUMSTAT0
 (*(vﬁ©ûê*)0x1500001C)

	)

112 
	#rUBRDIV0
 (*(vﬁ©ûê*)0x15000028)

	)

114 
	#rULCON1
 (*(vﬁ©ûê*)0x15004000)

	)

115 
	#rUCON1
 (*(vﬁ©ûê*)0x15004004)

	)

116 
	#rUFCON1
 (*(vﬁ©ûê*)0x15004008)

	)

117 
	#rUMCON1
 (*(vﬁ©ûê*)0x1500400C)

	)

118 
	#rUTRSTAT1
 (*(vﬁ©ûê*)0x15004010)

	)

119 
	#rUERSTAT1
 (*(vﬁ©ûê*)0x15004014)

	)

120 
	#rUFSTAT1
 (*(vﬁ©ûê*)0x15004018)

	)

121 
	#rUMSTAT1
 (*(vﬁ©ûê*)0x1500401C)

	)

122 
	#rUBRDIV1
 (*(vﬁ©ûê*)0x15004028)

	)

124 #ifde‡
__BIG_ENDIAN


125 
	#rUTXH0
 (*(vﬁ©ûê*)0x15000023)

	)

126 
	#rURXH0
 (*(vﬁ©ûê*)0x15000027)

	)

127 
	#rUTXH1
 (*(vﬁ©ûê*)0x15004023)

	)

128 
	#rURXH1
 (*(vﬁ©ûê*)0x15004027)

	)

130 
	#WrUTXH0
(
ch
Ë(*(vﬁ©ûê*)0x15000023)=()(ch)

	)

131 
	#RdURXH0
(Ë(*(vﬁ©ûê*)0x15000027)

	)

132 
	#WrUTXH1
(
ch
Ë(*(vﬁ©ûê*)0x15004023)=()(ch)

	)

133 
	#RdURXH1
(Ë(*(vﬁ©ûê*)0x15004027)

	)

135 
	#UTXH0
 (0x15000020+3Ë

	)

136 
	#URXH0
 (0x15000024+3)

	)

137 
	#UTXH1
 (0x15004020+3)

	)

138 
	#URXH1
 (0x15004024+3)

	)

141 
	#rUTXH0
 (*(vﬁ©ûê*)0x15000020)

	)

142 
	#rURXH0
 (*(vﬁ©ûê*)0x15000024)

	)

143 
	#rUTXH1
 (*(vﬁ©ûê*)0x15004020)

	)

144 
	#rURXH1
 (*(vﬁ©ûê*)0x15004024)

	)

146 
	#WrUTXH0
(
ch
Ë(*(vﬁ©ûê*)0x15000020)=()(ch)

	)

147 
	#RdURXH0
(Ë(*(vﬁ©ûê*)0x15000024)

	)

148 
	#WrUTXH1
(
ch
Ë(*(vﬁ©ûê*)0x15004020)=()(ch)

	)

149 
	#RdURXH1
(Ë(*(vﬁ©ûê*)0x15004024)

	)

151 
	#UTXH0
 (0x15000020Ë

	)

152 
	#URXH0
 (0x15000024)

	)

153 
	#UTXH1
 (0x15004020)

	)

154 
	#URXH1
 (0x15004024)

	)

159 
	#rTCFG0
 (*(vﬁ©ûê*)0x15100000)

	)

160 
	#rTCFG1
 (*(vﬁ©ûê*)0x15100004)

	)

161 
	#rTCON
 (*(vﬁ©ûê*)0x15100008)

	)

162 
	#rTCNTB0
 (*(vﬁ©ûê*)0x1510000C)

	)

163 
	#rTCMPB0
 (*(vﬁ©ûê*)0x15100010)

	)

164 
	#rTCNTO0
 (*(vﬁ©ûê*)0x15100014)

	)

165 
	#rTCNTB1
 (*(vﬁ©ûê*)0x15100018)

	)

166 
	#rTCMPB1
 (*(vﬁ©ûê*)0x1510001C)

	)

167 
	#rTCNTO1
 (*(vﬁ©ûê*)0x15100020)

	)

168 
	#rTCNTB2
 (*(vﬁ©ûê*)0x15100024)

	)

169 
	#rTCMPB2
 (*(vﬁ©ûê*)0x15100028)

	)

170 
	#rTCNTO2
 (*(vﬁ©ûê*)0x1510002C)

	)

171 
	#rTCNTB3
 (*(vﬁ©ûê*)0x15100030)

	)

172 
	#rTCMPB3
 (*(vﬁ©ûê*)0x15100034)

	)

173 
	#rTCNTO3
 (*(vﬁ©ûê*)0x15100038)

	)

174 
	#rTCNTB4
 (*(vﬁ©ûê*)0x1510003C)

	)

175 
	#rTCNTO4
 (*(vﬁ©ûê*)0x15100040)

	)

179 
	#rFUNC_ADDR_REG
 (*(vﬁ©ûê*)0x15200140)

	)

180 
	#rPWR_REG
 (*(vﬁ©ûê*)0x15200144)

	)

181 
	#rINT_REG
 (*(vﬁ©ûê*)0x15200148)

	)

182 
	#rINT_MASK_REG
 (*(vﬁ©ûê*)0x1520014C)

	)

183 
	#rFRAME_NUM_REG
 (*(vﬁ©ûê*)0x15200150)

	)

184 
	#rRESUME_CON_REG
 (*(vﬁ©ûê*)0x15200154)

	)

185 
	#rEP0_CSR
 (*(vﬁ©ûê*)0x15200160)

	)

186 
	#rEP0_MAXP
 (*(vﬁ©ûê*)0x15200164)

	)

187 
	#rEP0_OUT_CNT
 (*(vﬁ©ûê*)0x15200168)

	)

188 
	#rEP0_FIFO
 (*(vﬁ©ûê*)0x1520016C)

	)

189 
	#rEP1_IN_CSR
 (*(vﬁ©ûê*)0x15200180)

	)

190 
	#rEP1_IN_MAXP
 (*(vﬁ©ûê*)0x15200184)

	)

191 
	#rEP1_FIFO
 (*(vﬁ©ûê*)0x15200188)

	)

192 
	#rEP2_IN_CSR
 (*(vﬁ©ûê*)0x15200190)

	)

193 
	#rEP2_IN_MAXP
 (*(vﬁ©ûê*)0x15200194)

	)

194 
	#rEP2_FIFO
 (*(vﬁ©ûê*)0x15200198)

	)

195 
	#rEP3_OUT_CSR
 (*(vﬁ©ûê*)0x152001A0)

	)

196 
	#rEP3_OUT_MAXP
 (*(vﬁ©ûê*)0x152001A4)

	)

197 
	#rEP3_OUT_CNT
 (*(vﬁ©ûê*)0x152001A8)

	)

198 
	#rEP3_FIFO
 (*(vﬁ©ûê*)0x152001AC)

	)

199 
	#rEP4_OUT_CSR
 (*(vﬁ©ûê*)0x152001B0)

	)

200 
	#rEP4_OUT_MAXP
 (*(vﬁ©ûê*)0x152001B4)

	)

201 
	#rEP4_OUT_CNT
 (*(vﬁ©ûê*)0x152001B8)

	)

202 
	#rEP4_FIFO
 (*(vﬁ©ûê*)0x152001BC)

	)

203 
	#rDMA_CON
 (*(vﬁ©ûê*)0x152001C0)

	)

204 
	#rDMA_UNIT
 (*(vﬁ©ûê*)0x152001C4)

	)

205 
	#rDMA_FIFO
 (*(vﬁ©ûê*)0x152001C8)

	)

206 
	#rDMA_TX
 (*(vﬁ©ûê*)0x152001CC)

	)

207 
	#rTEST_MODE
 (*(vﬁ©ûê*)0x152001F4)

	)

208 
	#rIN_CON_REG
 (*(vﬁ©ûê*)0x152001F8)

	)

212 
	#rWTCON
 (*(vﬁ©ûê*)0x15300000)

	)

213 
	#rWTDAT
 (*(vﬁ©ûê*)0x15300004)

	)

214 
	#rWTCNT
 (*(vﬁ©ûê*)0x15300008)

	)

218 
	#rIICCON
 (*(vﬁ©ûê*)0x15400000)

	)

219 
	#rIICSTAT
 (*(vﬁ©ûê*)0x15400004)

	)

220 
	#rIICADD
 (*(vﬁ©ûê*)0x15400008)

	)

221 
	#rIICDS
 (*(vﬁ©ûê*)0x1540000C)

	)

225 
	#rIISCON
 (*(vﬁ©ûê*)0x15508000)

	)

226 
	#rIISMOD
 (*(vﬁ©ûê*)0x15508004)

	)

227 
	#rIISPSR
 (*(vﬁ©ûê*)0x15508008)

	)

228 
	#rIISFIFCON
 (*(vﬁ©ûê*)0x1550800C)

	)

230 #ifde‡
__BIG_ENDIAN


231 
	#IISFIF
 ((vﬁ©ûê*)0x15508012)

	)

234 
	#IISFIF
 ((vﬁ©ûê*)0x15508010)

	)

239 
	#rPACON
 (*(vﬁ©ûê*)0x15600000)

	)

240 
	#rPADAT
 (*(vﬁ©ûê*)0x15600004)

	)

242 
	#rPBCON
 (*(vﬁ©ûê*)0x15600008)

	)

243 
	#rPBDAT
 (*(vﬁ©ûê*)0x1560000C)

	)

244 
	#rPBUP
 (*(vﬁ©ûê*)0x15600010)

	)

246 
	#rPCCON
 (*(vﬁ©ûê*)0x15600014)

	)

247 
	#rPCDAT
 (*(vﬁ©ûê*)0x15600018)

	)

248 
	#rPCUP
 (*(vﬁ©ûê*)0x1560001C)

	)

250 
	#rPDCON
 (*(vﬁ©ûê*)0x15600020)

	)

251 
	#rPDDAT
 (*(vﬁ©ûê*)0x15600024)

	)

252 
	#rPDUP
 (*(vﬁ©ûê*)0x15600028)

	)

254 
	#rPECON
 (*(vﬁ©ûê*)0x1560002C)

	)

255 
	#rPEDAT
 (*(vﬁ©ûê*)0x15600030)

	)

256 
	#rPEUP
 (*(vﬁ©ûê*)0x15600034)

	)

258 
	#rPFCON
 (*(vﬁ©ûê*)0x15600038)

	)

259 
	#rPFDAT
 (*(vﬁ©ûê*)0x1560003C)

	)

260 
	#rPFUP
 (*(vﬁ©ûê*)0x15600040)

	)

262 
	#rPGCON
 (*(vﬁ©ûê*)0x15600044)

	)

263 
	#rPGDAT
 (*(vﬁ©ûê*)0x15600048)

	)

264 
	#rPGUP
 (*(vﬁ©ûê*)0x1560004C)

	)

266 
	#rOPENCR
 (*(vﬁ©ûê*)0x15600050)

	)

267 
	#rMISCCR
 (*(vﬁ©ûê*)0x15600054)

	)

268 
	#rEXTINT
 (*(vﬁ©ûê*)0x15600058)

	)

272 #ifde‡
__BIG_ENDIAN


273 
	#rRTCCON
 (*(vﬁ©ûê*)0x15700043)

	)

274 
	#rRTCALM
 (*(vﬁ©ûê*)0x15700053)

	)

275 
	#rALMSEC
 (*(vﬁ©ûê*)0x15700057)

	)

276 
	#rALMMIN
 (*(vﬁ©ûê*)0x1570005B)

	)

277 
	#rALMHOUR
 (*(vﬁ©ûê*)0x1570005F)

	)

278 
	#rALMDAY
 (*(vﬁ©ûê*)0x15700063)

	)

279 
	#rALMMON
 (*(vﬁ©ûê*)0x15700067)

	)

280 
	#rALMYEAR
 (*(vﬁ©ûê*)0x1570006B)

	)

281 
	#rRTCRST
 (*(vﬁ©ûê*)0x1570006F)

	)

282 
	#rBCDSEC
 (*(vﬁ©ûê*)0x15700073)

	)

283 
	#rBCDMIN
 (*(vﬁ©ûê*)0x15700077)

	)

284 
	#rBCDHOUR
 (*(vﬁ©ûê*)0x1570007B)

	)

285 
	#rBCDDAY
 (*(vﬁ©ûê*)0x1570007F)

	)

286 
	#rBCDDATE
 (*(vﬁ©ûê*)0x15700083)

	)

287 
	#rBCDMON
 (*(vﬁ©ûê*)0x15700087)

	)

288 
	#rBCDYEAR
 (*(vﬁ©ûê*)0x1570008B)

	)

289 
	#rTICINT
 (*(vﬁ©ûê*)0x15700047)

	)

292 
	#rRTCCON
 (*(vﬁ©ûê*)0x15700040)

	)

293 
	#rRTCALM
 (*(vﬁ©ûê*)0x15700050)

	)

294 
	#rALMSEC
 (*(vﬁ©ûê*)0x15700054)

	)

295 
	#rALMMIN
 (*(vﬁ©ûê*)0x15700058)

	)

296 
	#rALMHOUR
 (*(vﬁ©ûê*)0x1570005C)

	)

297 
	#rALMDAY
 (*(vﬁ©ûê*)0x15700060)

	)

298 
	#rALMMON
 (*(vﬁ©ûê*)0x15700064)

	)

299 
	#rALMYEAR
 (*(vﬁ©ûê*)0x15700068)

	)

300 
	#rRTCRST
 (*(vﬁ©ûê*)0x1570006C)

	)

301 
	#rBCDSEC
 (*(vﬁ©ûê*)0x15700070)

	)

302 
	#rBCDMIN
 (*(vﬁ©ûê*)0x15700074)

	)

303 
	#rBCDHOUR
 (*(vﬁ©ûê*)0x15700078)

	)

304 
	#rBCDDAY
 (*(vﬁ©ûê*)0x1570007C)

	)

305 
	#rBCDDATE
 (*(vﬁ©ûê*)0x15700080)

	)

306 
	#rBCDMON
 (*(vﬁ©ûê*)0x15700084)

	)

307 
	#rBCDYEAR
 (*(vﬁ©ûê*)0x15700088)

	)

308 
	#rTICINT
 (*(vﬁ©ûê*)0x15700044)

	)

313 
	#rADCCON
 (*(vﬁ©ûê*)0x15800000)

	)

314 
	#rADCDAT
 (*(vﬁ©ûê*)0x15800004)

	)

318 
	#rSPCON
 (*(vﬁ©ûê*)0x15900000)

	)

319 
	#rSPSTA
 (*(vﬁ©ûê*)0x15900004)

	)

320 
	#rSPPIN
 (*(vﬁ©ûê*)0x15900008)

	)

321 
	#rSPPRE
 (*(vﬁ©ûê*)0x1590000C)

	)

322 
	#rSPTDAT
 (*(vﬁ©ûê*)0x15900010)

	)

323 
	#rSPRDAT
 (*(vﬁ©ûê*)0x15900014)

	)

327 
	#rMMCON
 (*(vﬁ©ûê*)0x15a00000)

	)

328 
	#rMMCRR
 (*(vﬁ©ûê*)0x15a00004)

	)

329 
	#rMMFCON
 (*(vﬁ©ûê*)0x15a00008)

	)

330 
	#rMMSTA
 (*(vﬁ©ûê*)0x15a0000C)

	)

331 
	#rMMFSTA
 (*(vﬁ©ûê*)0x15a00010)

	)

332 
	#rMMPRE
 (*(vﬁ©ûê*)0x15a00014)

	)

333 
	#rMMLEN
 (*(vﬁ©ûê*)0x15a00018)

	)

334 
	#rMMCR7
 (*(vﬁ©ûê*)0x15a0001C)

	)

335 
	#rMMRSP0
 (*(vﬁ©ûê*)0x15a00020)

	)

336 
	#rMMRSP1
 (*(vﬁ©ûê*)0x15a00024)

	)

337 
	#rMMRSP2
 (*(vﬁ©ûê*)0x15a00028)

	)

338 
	#rMMRSP3
 (*(vﬁ©ûê*)0x15a0002C)

	)

339 
	#rMMCMD0
 (*(vﬁ©ûê*)0x15a00030)

	)

340 
	#rMMCMD1
 (*(vﬁ©ûê*)0x15a00034)

	)

341 
	#rMMCR16
 (*(vﬁ©ûê*)0x15a00038)

	)

342 
	#rMMDAT
 (*(vﬁ©ûê*)0x15a0003C)

	)

345 
	#_ISR_STARTADDRESS
 
πems_ve˘‹_èbÀ


	)

347 
	#pISR_RESET
 (*(*)(
_ISR_STARTADDRESS
+0x0))

	)

348 
	#pISR_UNDEF
 (*(*)(
_ISR_STARTADDRESS
+0x4))

	)

349 
	#pISR_SWI
 (*(*)(
_ISR_STARTADDRESS
+0x8))

	)

350 
	#pISR_PABORT
 (*(*)(
_ISR_STARTADDRESS
+0xC))

	)

351 
	#pISR_DABORT
 (*(*)(
_ISR_STARTADDRESS
+0x10))

	)

352 
	#pISR_RESERVED
 (*(*)(
_ISR_STARTADDRESS
+0x14))

	)

353 
	#pISR_IRQ
 (*(*)(
_ISR_STARTADDRESS
+0x18))

	)

354 
	#pISR_FIQ
 (*(*)(
_ISR_STARTADDRESS
+0x1C))

	)

356 
	#pISR_EINT0
 (*(*)(
_ISR_STARTADDRESS
+0x20))

	)

357 
	#pISR_EINT1
 (*(*)(
_ISR_STARTADDRESS
+0x24))

	)

358 
	#pISR_EINT2
 (*(*)(
_ISR_STARTADDRESS
+0x28))

	)

359 
	#pISR_EINT3
 (*(*)(
_ISR_STARTADDRESS
+0x2C))

	)

360 
	#pISR_EINT4
 (*(*)(
_ISR_STARTADDRESS
+0x30))

	)

361 
	#pISR_EINT5
 (*(*)(
_ISR_STARTADDRESS
+0x34))

	)

362 
	#pISR_EINT6
 (*(*)(
_ISR_STARTADDRESS
+0x38))

	)

363 
	#pISR_EINT7
 (*(*)(
_ISR_STARTADDRESS
+0x3C))

	)

364 
	#pISR_TICK
 (*(*)(
_ISR_STARTADDRESS
+0x40))

	)

365 
	#pISR_WDT
 (*(*)(
_ISR_STARTADDRESS
+0x44))

	)

366 
	#pISR_TIMER0
 (*(*)(
_ISR_STARTADDRESS
+0x48))

	)

367 
	#pISR_TIMER1
 (*(*)(
_ISR_STARTADDRESS
+0x4C))

	)

368 
	#pISR_TIMER2
 (*(*)(
_ISR_STARTADDRESS
+0x50))

	)

369 
	#pISR_TIMER3
 (*(*)(
_ISR_STARTADDRESS
+0x54))

	)

370 
	#pISR_TIMER4
 (*(*)(
_ISR_STARTADDRESS
+0x58))

	)

371 
	#pISR_UERR01
 (*(*)(
_ISR_STARTADDRESS
+0x5C))

	)

372 
	#pISR_NOTUSED
 (*(*)(
_ISR_STARTADDRESS
+0x60))

	)

373 
	#pISR_DMA0
 (*(*)(
_ISR_STARTADDRESS
+0x64))

	)

374 
	#pISR_DMA1
 (*(*)(
_ISR_STARTADDRESS
+0x68))

	)

375 
	#pISR_DMA2
 (*(*)(
_ISR_STARTADDRESS
+0x6C))

	)

376 
	#pISR_DMA3
 (*(*)(
_ISR_STARTADDRESS
+0x70))

	)

377 
	#pISR_MMC
 (*(*)(
_ISR_STARTADDRESS
+0x74))

	)

378 
	#pISR_SPI
 (*(*)(
_ISR_STARTADDRESS
+0x78))

	)

379 
	#pISR_URXD0
 (*(*)(
_ISR_STARTADDRESS
+0x7C))

	)

380 
	#pISR_URXD1
 (*(*)(
_ISR_STARTADDRESS
+0x80))

	)

381 
	#pISR_USBD
 (*(*)(
_ISR_STARTADDRESS
+0x84))

	)

382 
	#pISR_USBH
 (*(*)(
_ISR_STARTADDRESS
+0x88))

	)

383 
	#pISR_IIC
 (*(*)(
_ISR_STARTADDRESS
+0x8C))

	)

384 
	#pISR_UTXD0
 (*(*)(
_ISR_STARTADDRESS
+0x90))

	)

385 
	#pISR_UTXD1
 (*(*)(
_ISR_STARTADDRESS
+0x94))

	)

386 
	#pISR_RTC
 (*(*)(
_ISR_STARTADDRESS
+0x98))

	)

387 
	#pISR_ADC
 (*(*)(
_ISR_STARTADDRESS
+0xA0))

	)

391 
	#BIT_EINT0
 (0x1)

	)

392 
	#BIT_EINT1
 (0x1<<1)

	)

393 
	#BIT_EINT2
 (0x1<<2)

	)

394 
	#BIT_EINT3
 (0x1<<3)

	)

395 
	#BIT_EINT4
 (0x1<<4)

	)

396 
	#BIT_EINT5
 (0x1<<5)

	)

397 
	#BIT_EINT6
 (0x1<<6)

	)

398 
	#BIT_EINT7
 (0x1<<7)

	)

399 
	#BIT_TICK
 (0x1<<8)

	)

400 
	#BIT_WDT
 (0x1<<9)

	)

401 
	#BIT_TIMER0
 (0x1<<10)

	)

402 
	#BIT_TIMER1
 (0x1<<11)

	)

403 
	#BIT_TIMER2
 (0x1<<12)

	)

404 
	#BIT_TIMER3
 (0x1<<13)

	)

405 
	#BIT_TIMER4
 (0x1<<14)

	)

406 
	#BIT_UERR01
 (0x1<<15)

	)

407 
	#BIT_NOTUSED
 (0x1<<16)

	)

408 
	#BIT_DMA0
 (0x1<<17)

	)

409 
	#BIT_DMA1
 (0x1<<18)

	)

410 
	#BIT_DMA2
 (0x1<<19)

	)

411 
	#BIT_DMA3
 (0x1<<20)

	)

412 
	#BIT_MMC
 (0x1<<21)

	)

413 
	#BIT_SPI
 (0x1<<22)

	)

414 
	#BIT_URXD0
 (0x1<<23)

	)

415 
	#BIT_URXD1
 (0x1<<24)

	)

416 
	#BIT_USBD
 (0x1<<25)

	)

417 
	#BIT_USBH
 (0x1<<26)

	)

418 
	#BIT_IIC
 (0x1<<27)

	)

419 
	#BIT_UTXD0
 (0x1<<28)

	)

420 
	#BIT_UTXD1
 (0x1<<29)

	)

421 
	#BIT_RTC
 (0x1<<30)

	)

422 
	#BIT_ADC
 (0x1<<31)

	)

423 
	#BIT_ALLMSK
 (0xFFFFFFFF)

	)

425 
	#CÀ¨Pídög
(
bô
) {\

426 
rSRCPND
 = 
bô
;\

427 
rINTPND
 = 
bô
;\

428 
rINTPND
;\

429 }

	)

432 #i‚de‡
ASM


435 
	s_ªg
 {

436 
	mSTOP_BIT
:1;

438 
	mSL_IDLE
:1;

441 
	mIDLE_BIT
:1;

443 
	mLCDC
:1;

444 
	mUSB_ho°
:1;

445 
	mUSB_devi˚
:1;

446 
	mPWMTIMER
:1;

447 
	mMMC
:1;

448 
	mUART0
:1;

449 
	mUART1
:1;

450 
	mGPIO
:1;

451 
	mRTC
:1;

453 
	mADC
:1;

454 
	mIIC
:1;

455 
	mIIS
:1;

456 
	mSPI
:1;

457 } 
	mªg
;

458 
	mÆl
;

459 } 
	tCLKCON
;

464 
	mENVID
:1;

465 
	mBPPMODE
:4;

467 
	mPNRMODE
:2;

468 
	mMMODE
:1;

470 
	mCLKVAL
:10;

471 
	mLINECNT
:10;

473 } 
	mªg
;

474 
	mÆl
;

475 } 
	tLCDCON1
;

479 
	mVSPW
:6;

482 
	mVFPD
:8;

485 
	mLINEVAL
:10;

487 
	mVBPD
:8;

490 } 
	mªg
;

491 
	mÆl
;

492 } 
	tLCDCON2
;

496 
	mHFPD
:8;

499 
	mHOZVAL
:11;

501 
	mHBPD
:7;

504 } 
	mªg
;

505 
	mÆl
;

506 } 
	tLCDCON3
;

510 
	mHSPW
:8;

513 
	mMVAL
:8;

514 
	mADDVAL
:8;

515 
	mPALADDEN
:1;

517 } 
	mªg
;

518 
	mÆl
;

519 } 
	tLCDCON4
;

523 
	mHWSWP
:1;

525 
	mBSWP
:1;

527 
	mENLEND
:1;

530 
	mRESERVED1
:1;

531 
	mINVENDLINE
:1;

533 
	mRESERVED2
:1;

534 
	mINVVDEN
:1;

537 
	mINVVD
:1;

540 
	mINVVFRAME
:1;

542 
	mINVVLINE
:1;

544 
	mINVVCLK
:1;

548 
	mRESERVED3
:2;

549 
	mSELFREF
:1;

550 
	mSLOWCLKSYNC
:1;

551 
	mRESERVED4
:2;

552 
	mHSTATUS
:2;

557 
	mVSTATUS
:2;

562 } 
	mªg
;

563 
	mÆl
;

564 } 
	tLCDCON5
;

568 
	mLCDBASEU
:21;

571 
	mLCDBANK
:7;

572 } 
	mªg
;

573 
	mÆl
;

574 } 
	tLCDSADDR1
;

578 
	mLCDBASEL
:21;

582 } 
	mªg
;

583 
	mÆl
;

584 } 
	tLCDSADDR2
;

588 
	mPAGEWIDTH
:11;

591 
	mOFFSIZE
:11;

597 } 
	mªg
;

598 
	mÆl
;

599 } 
	tLCDSADDR3
;

607 
	mIISIFENA
:1;

608 
	mIISPSENA
:1;

609 
	mRXCHIDLE
:1;

610 
	mTXCHIDLE
:1;

611 
	mRXDMAENA
:1;

612 
	mTXDMAENA
:1;

613 
	mRXFIFORDY
:1;

614 
	mTXFIFORDY
:1;

615 
	mLRINDEX
:1;

616 } 
	mªg
;

617 
	mÆl
;

618 } 
	tIISCON
;

622 
	mSBCLKFS
:2;

623 
	mMCLKFS
:1;

624 
	mSDBITS
:1;

625 
	mSIFMT
:1;

626 
	mACTLEVCH
:1;

627 
	mTXRXMODE
:2;

628 
	mMODE
:1;

629 } 
	mªg
;

630 
	mÆl
;

631 } 
	tIISMOD
;

635 
	mPSB
:5;

636 
	mPSA
:5;

637 } 
	mªg
;

638 
	mÆl
;

639 } 
	tIISPSR
;

643 
	mRXFIFOCNT
:4;

644 
	mTXFIFOCNT
:4;

646 
	mTXFIFOENA
:1;

647 
	mRXFIFOMODE
:1;

648 
	mTXFIFOMODE
:1;

649 } 
	mªg
;

650 
	mÆl
;

651 } 
	tIISSFIFCON
;

655 
	mFENTRY
:16;

656 } 
	mªg
;

657 
	mÆl
;

658 } 
	tIISSFIF
;

661 
	#LCD_WIDTH
 240

	)

662 
	#LCD_HEIGHT
 320

	)

663 
	#LCD_ASPECT
 (()(
LCD_WIDTH
/
LCD_HEIGHT
))

	)

665 
	#GP32_KEY_SELECT
 512

	)

666 
	#GP32_KEY_START
 256

	)

667 
	#GP32_KEY_A
 64

	)

668 
	#GP32_KEY_B
 32

	)

669 
	#GP32_KEY_L
 16

	)

670 
	#GP32_KEY_R
 128

	)

671 
	#GP32_KEY_UP
 8

	)

672 
	#GP32_KEY_DOWN
 2

	)

673 
	#GP32_KEY_LEFT
 1

	)

674 
	#GP32_KEY_RIGHT
 4

	)

	@src/lib/libcpu/arm/s3c24xx/include/s3c2410.h

8 #i‚de‡
S3C2410_H_


9 
	#S3C2410_H_


	)

12 
	#rINTOFFSET_ADDR
 0x4A000014

	)

14 
	#rBWSCON
 (*(vﬁ©ûê*)0x48000000)

	)

15 
	#rBANKCON0
 (*(vﬁ©ûê*)0x48000004)

	)

16 
	#rBANKCON1
 (*(vﬁ©ûê*)0x48000008)

	)

17 
	#rBANKCON2
 (*(vﬁ©ûê*)0x4800000C)

	)

18 
	#rBANKCON3
 (*(vﬁ©ûê*)0x48000010)

	)

19 
	#rBANKCON4
 (*(vﬁ©ûê*)0x48000014)

	)

20 
	#rBANKCON5
 (*(vﬁ©ûê*)0x48000018)

	)

21 
	#rBANKCON6
 (*(vﬁ©ûê*)0x4800001C)

	)

22 
	#rBANKCON7
 (*(vﬁ©ûê*)0x48000020)

	)

23 
	#rREFRESH
 (*(vﬁ©ûê*)0x48000024)

	)

24 
	#rBANKSIZE
 (*(vﬁ©ûê*)0x48000028)

	)

25 
	#rMRSRB6
 (*(vﬁ©ûê*)0x4800002C)

	)

26 
	#rMRSRB7
 (*(vﬁ©ûê*)0x48000030)

	)

29 
	#rHcRevisi⁄
 (*(vﬁ©ûê*)0x49000000)

	)

30 
	#rHcC⁄åﬁ
 (*(vﬁ©ûê*)0x49000004)

	)

31 
	#rHcComm⁄Sètus
 (*(vﬁ©ûê*)0x49000008)

	)

32 
	#rHcI¡îru±Sètus
 (*(vﬁ©ûê*)0x4900000C)

	)

33 
	#rHcI¡îru±E«bÀ
 (*(vﬁ©ûê*)0x49000010)

	)

34 
	#rHcI¡îru±DißbÀ
 (*(vﬁ©ûê*)0x49000014)

	)

35 
	#rHcHCCA
 (*(vﬁ©ûê*)0x49000018)

	)

36 
	#rHcPîiodCuâídED
 (*(vﬁ©ûê*)0x4900001C)

	)

37 
	#rHcC⁄åﬁHódED
 (*(vﬁ©ûê*)0x49000020)

	)

38 
	#rHcC⁄åﬁCuºítED
 (*(vﬁ©ûê*)0x49000024)

	)

39 
	#rHcBulkHódED
 (*(vﬁ©ûê*)0x49000028)

	)

40 
	#rHcBuldCuºítED
 (*(vﬁ©ûê*)0x4900002C)

	)

41 
	#rHcD⁄eHód
 (*(vﬁ©ûê*)0x49000030)

	)

42 
	#rHcRmI¡îvÆ
 (*(vﬁ©ûê*)0x49000034)

	)

43 
	#rHcFmRemaöög
 (*(vﬁ©ûê*)0x49000038)

	)

44 
	#rHcFmNumbî
 (*(vﬁ©ûê*)0x4900003C)

	)

45 
	#rHcPîiodicSèπ
 (*(vﬁ©ûê*)0x49000040)

	)

46 
	#rHcLSThªshﬁd
 (*(vﬁ©ûê*)0x49000044)

	)

47 
	#rHcRhDes¸ùt‹A
 (*(vﬁ©ûê*)0x49000048)

	)

48 
	#rHcRhDes¸ùt‹B
 (*(vﬁ©ûê*)0x4900004C)

	)

49 
	#rHcRhSètus
 (*(vﬁ©ûê*)0x49000050)

	)

50 
	#rHcRhP‹tSètus1
 (*(vﬁ©ûê*)0x49000054)

	)

51 
	#rHcRhP‹tSètus2
 (*(vﬁ©ûê*)0x49000058)

	)

54 
	#rSRCPND
 (*(vﬁ©ûê*)0x4A000000)

	)

55 
	#rINTMOD
 (*(vﬁ©ûê*)0x4A000004)

	)

56 
	#rINTMSK
 (*(vﬁ©ûê*)0x4A000008)

	)

57 
	#rPRIORITY
 (*(vﬁ©ûê*)0x4A00000C)

	)

58 
	#rINTPND
 (*(vﬁ©ûê*)0x4A000010)

	)

59 
	#rINTOFFSET
 (*(vﬁ©ûê*)0x4A000014)

	)

60 
	#rSUBSRCPND
 (*(vﬁ©ûê*)0x4A000018)

	)

61 
	#rINTSUBMSK
 (*(vﬁ©ûê*)0x4A00001c)

	)

65 
	#rDISRC0
 (*(vﬁ©ûê*)0x4B000000)

	)

66 
	#rDISRCC0
 (*(vﬁ©ûê*)0x4B000004)

	)

67 
	#rDIDST0
 (*(vﬁ©ûê*)0x4B000008)

	)

68 
	#rDIDSTC0
 (*(vﬁ©ûê*)0x4B00000C)

	)

69 
	#rDCON0
 (*(vﬁ©ûê*)0x4B000010)

	)

70 
	#rDSTAT0
 (*(vﬁ©ûê*)0x4B000014)

	)

71 
	#rDCSRC0
 (*(vﬁ©ûê*)0x4B000018)

	)

72 
	#rDCDST0
 (*(vﬁ©ûê*)0x4B00001C)

	)

73 
	#rDMASKTRIG0
 (*(vﬁ©ûê*)0x4B000020)

	)

74 
	#rDISRC1
 (*(vﬁ©ûê*)0x4B000040)

	)

75 
	#rDISRCC1
 (*(vﬁ©ûê*)0x4B000044)

	)

76 
	#rDIDST1
 (*(vﬁ©ûê*)0x4B000048)

	)

77 
	#rDIDSTC1
 (*(vﬁ©ûê*)0x4B00004C)

	)

78 
	#rDCON1
 (*(vﬁ©ûê*)0x4B000050)

	)

79 
	#rDSTAT1
 (*(vﬁ©ûê*)0x4B000054)

	)

80 
	#rDCSRC1
 (*(vﬁ©ûê*)0x4B000058)

	)

81 
	#rDCDST1
 (*(vﬁ©ûê*)0x4B00005C)

	)

82 
	#rDMASKTRIG1
 (*(vﬁ©ûê*)0x4B000060)

	)

83 
	#rDISRC2
 (*(vﬁ©ûê*)0x4B000080)

	)

84 
	#rDISRCC2
 (*(vﬁ©ûê*)0x4B000084)

	)

85 
	#rDIDST2
 (*(vﬁ©ûê*)0x4B000088)

	)

86 
	#rDIDSTC2
 (*(vﬁ©ûê*)0x4B00008C)

	)

87 
	#rDCON2
 (*(vﬁ©ûê*)0x4B000090)

	)

88 
	#rDSTAT2
 (*(vﬁ©ûê*)0x4B000094)

	)

89 
	#rDCSRC2
 (*(vﬁ©ûê*)0x4B000098)

	)

90 
	#rDCDST2
 (*(vﬁ©ûê*)0x4B00009C)

	)

91 
	#rDMASKTRIG2
 (*(vﬁ©ûê*)0x4B0000A0)

	)

92 
	#rDISRC3
 (*(vﬁ©ûê*)0x4B0000C0)

	)

93 
	#rDISRCC3
 (*(vﬁ©ûê*)0x4B0000C4)

	)

94 
	#rDIDST3
 (*(vﬁ©ûê*)0x4B0000C8)

	)

95 
	#rDIDSTC3
 (*(vﬁ©ûê*)0x4B0000CC)

	)

96 
	#rDCON3
 (*(vﬁ©ûê*)0x4B0000D0)

	)

97 
	#rDSTAT3
 (*(vﬁ©ûê*)0x4B0000D4)

	)

98 
	#rDCSRC3
 (*(vﬁ©ûê*)0x4B0000D8)

	)

99 
	#rDCDST3
 (*(vﬁ©ûê*)0x4B0000DC)

	)

100 
	#rDMASKTRIG3
 (*(vﬁ©ûê*)0x4B0000E0)

	)

104 
	#rLOCKTIME
 (*(vﬁ©ûê*)0x4C000000)

	)

105 
	#rMPLLCON
 (*(vﬁ©ûê*)0x4C000004)

	)

106 
	#rUPLLCON
 (*(vﬁ©ûê*)0x4C000008)

	)

107 
	#rCLKCON
 (*(vﬁ©ûê*)0x4C00000C)

	)

108 
	#rCLKSLOW
 (*(vﬁ©ûê*)0x4C000010)

	)

109 
	#rCLKDIVN
 (*(vﬁ©ûê*)0x4C000014)

	)

113 
	#rLCDCON1
 (*(vﬁ©ûê*)0x4D000000)

	)

114 
	#rLCDCON2
 (*(vﬁ©ûê*)0x4D000004)

	)

115 
	#rLCDCON3
 (*(vﬁ©ûê*)0x4D000008)

	)

116 
	#rLCDCON4
 (*(vﬁ©ûê*)0x4D00000C)

	)

117 
	#rLCDCON5
 (*(vﬁ©ûê*)0x4D000010)

	)

118 
	#rLCDSADDR1
 (*(vﬁ©ûê*)0x4D000014)

	)

119 
	#rLCDSADDR2
 (*(vﬁ©ûê*)0x4D000018)

	)

120 
	#rLCDSADDR3
 (*(vﬁ©ûê*)0x4D00001C)

	)

121 
	#rREDLUT
 (*(vﬁ©ûê*)0x4D000020)

	)

122 
	#rGREENLUT
 (*(vﬁ©ûê*)0x4D000024)

	)

123 
	#rBLUELUT
 (*(vﬁ©ûê*)0x4D000028)

	)

124 
	#rREDLUT
 (*(vﬁ©ûê*)0x4D000020)

	)

125 
	#rGREENLUT
 (*(vﬁ©ûê*)0x4D000024)

	)

126 
	#rBLUELUT
 (*(vﬁ©ûê*)0x4D000028)

	)

127 
	#rDITHMODE
 (*(vﬁ©ûê*)0x4D00004C)

	)

128 
	#rTPAL
 (*(vﬁ©ûê*)0x4D000050)

	)

129 
	#rLCDINTPND
 (*(vﬁ©ûê*)0x4D000054)

	)

130 
	#rLCDSRCPND
 (*(vﬁ©ûê*)0x4D000058)

	)

131 
	#rLCDINTMSK
 (*(vﬁ©ûê*)0x4D00005C)

	)

132 
	#rTCONSEL
 (*(vﬁ©ûê*)0x4D000060)

	)

133 
	#PALETTE
 0x4d000400

	)

136 
	#rNFCONF
 (*(vﬁ©ûê*)0x4E000000)

	)

137 
	#rNFCMD
 (*(vﬁ©ûê*)0x4E000004)

	)

138 
	#rNFADDR
 (*(vﬁ©ûê*)0x4E000008)

	)

139 
	#rNFDATA
 (*(vﬁ©ûê*)0x4E00000C)

	)

140 
	#rNFSTAT
 (*(vﬁ©ûê*)0x4E000010)

	)

141 
	#rNFECC
 (*(vﬁ©ûê*)0x4E000014)

	)

144 
	#rULCON0
 (*(vﬁ©ûê*)0x50000000)

	)

145 
	#rUCON0
 (*(vﬁ©ûê*)0x50000004)

	)

146 
	#rUFCON0
 (*(vﬁ©ûê*)0x50000008)

	)

147 
	#rUMCON0
 (*(vﬁ©ûê*)0x5000000C)

	)

148 
	#rUTRSTAT0
 (*(vﬁ©ûê*)0x50000010)

	)

149 
	#rUERSTAT0
 (*(vﬁ©ûê*)0x50000014)

	)

150 
	#rUFSTAT0
 (*(vﬁ©ûê*)0x50000018)

	)

151 
	#rUMSTAT0
 (*(vﬁ©ûê*)0x5000001C)

	)

152 
	#rUBRDIV0
 (*(vﬁ©ûê*)0x50000028)

	)

154 
	#rULCON1
 (*(vﬁ©ûê*)0x50004000)

	)

155 
	#rUCON1
 (*(vﬁ©ûê*)0x50004004)

	)

156 
	#rUFCON1
 (*(vﬁ©ûê*)0x50004008)

	)

157 
	#rUMCON1
 (*(vﬁ©ûê*)0x5000400C)

	)

158 
	#rUTRSTAT1
 (*(vﬁ©ûê*)0x50004010)

	)

159 
	#rUERSTAT1
 (*(vﬁ©ûê*)0x50004014)

	)

160 
	#rUFSTAT1
 (*(vﬁ©ûê*)0x50004018)

	)

161 
	#rUMSTAT1
 (*(vﬁ©ûê*)0x5000401C)

	)

162 
	#rUBRDIV1
 (*(vﬁ©ûê*)0x50004028)

	)

164 
	#rULCON2
 (*(vﬁ©ûê*)0x50008000)

	)

165 
	#rUCON2
 (*(vﬁ©ûê*)0x50008004)

	)

166 
	#rUFCON2
 (*(vﬁ©ûê*)0x50008008)

	)

167 
	#rUTRSTAT2
 (*(vﬁ©ûê*)0x50008010)

	)

168 
	#rUERSTAT2
 (*(vﬁ©ûê*)0x50008014)

	)

169 
	#rUFSTAT2
 (*(vﬁ©ûê*)0x50008018)

	)

170 
	#rUBRDIV2
 (*(vﬁ©ûê*)0x50008028)

	)

172 #ifde‡
__BIG_ENDIAN


173 
	#rUTXH0
 (*(vﬁ©ûê*)0x50000023)

	)

174 
	#rURXH0
 (*(vﬁ©ûê*)0x50000027)

	)

175 
	#rUTXH1
 (*(vﬁ©ûê*)0x50004023)

	)

176 
	#rURXH1
 (*(vﬁ©ûê*)0x50004027)

	)

177 
	#rUTXH2
 (*(vﬁ©ûê*)0x50008023)

	)

178 
	#rURXH2
 (*(vﬁ©ûê*)0x50008027)

	)

180 
	#WrUTXH0
(
ch
Ë(*(vﬁ©ûê*)0x50000023)=()(ch)

	)

181 
	#RdURXH0
(Ë(*(vﬁ©ûê*)0x50000027)

	)

182 
	#WrUTXH1
(
ch
Ë(*(vﬁ©ûê*)0x50004023)=()(ch)

	)

183 
	#RdURXH1
(Ë(*(vﬁ©ûê*)0x50004027)

	)

184 
	#WrUTXH2
(
ch
Ë(*(vﬁ©ûê*)0x50008023)=()(ch)

	)

185 
	#RdURXH2
(Ë(*(vﬁ©ûê*)0x50008027)

	)

187 
	#UTXH0
 (0x50000020+3Ë

	)

188 
	#URXH0
 (0x50000024+3)

	)

189 
	#UTXH1
 (0x50004020+3)

	)

190 
	#URXH1
 (0x50004024+3)

	)

191 
	#UTXH2
 (0x50008020+3)

	)

192 
	#URXH2
 (0x50008024+3)

	)

195 
	#rUTXH0
 (*(vﬁ©ûê*)0x50000020)

	)

196 
	#rURXH0
 (*(vﬁ©ûê*)0x50000024)

	)

197 
	#rUTXH1
 (*(vﬁ©ûê*)0x50004020)

	)

198 
	#rURXH1
 (*(vﬁ©ûê*)0x50004024)

	)

199 
	#rUTXH2
 (*(vﬁ©ûê*)0x50008020)

	)

200 
	#rURXH2
 (*(vﬁ©ûê*)0x50008024)

	)

202 
	#WrUTXH0
(
ch
Ë(*(vﬁ©ûê*)0x50000020)=()(ch)

	)

203 
	#RdURXH0
(Ë(*(vﬁ©ûê*)0x50000024)

	)

204 
	#WrUTXH1
(
ch
Ë(*(vﬁ©ûê*)0x50004020)=()(ch)

	)

205 
	#RdURXH1
(Ë(*(vﬁ©ûê*)0x50004024)

	)

206 
	#WrUTXH2
(
ch
Ë(*(vﬁ©ûê*)0x50008020)=()(ch)

	)

207 
	#RdURXH2
(Ë(*(vﬁ©ûê*)0x50008024)

	)

209 
	#UTXH0
 (0x50000020)

	)

210 
	#URXH0
 (0x50000024)

	)

211 
	#UTXH1
 (0x50004020)

	)

212 
	#URXH1
 (0x50004024)

	)

213 
	#UTXH2
 (0x50008020)

	)

214 
	#URXH2
 (0x50008024)

	)

219 
	#rTCFG0
 (*(vﬁ©ûê*)0x51000000)

	)

220 
	#rTCFG1
 (*(vﬁ©ûê*)0x51000004)

	)

221 
	#rTCON
 (*(vﬁ©ûê*)0x51000008)

	)

222 
	#rTCNTB0
 (*(vﬁ©ûê*)0x5100000C)

	)

223 
	#rTCMPB0
 (*(vﬁ©ûê*)0x51000010)

	)

224 
	#rTCNTO0
 (*(vﬁ©ûê*)0x51000014)

	)

225 
	#rTCNTB1
 (*(vﬁ©ûê*)0x51000018)

	)

226 
	#rTCMPB1
 (*(vﬁ©ûê*)0x5100001C)

	)

227 
	#rTCNTO1
 (*(vﬁ©ûê*)0x51000020)

	)

228 
	#rTCNTB2
 (*(vﬁ©ûê*)0x51000024)

	)

229 
	#rTCMPB2
 (*(vﬁ©ûê*)0x51000028)

	)

230 
	#rTCNTO2
 (*(vﬁ©ûê*)0x5100002C)

	)

231 
	#rTCNTB3
 (*(vﬁ©ûê*)0x51000030)

	)

232 
	#rTCMPB3
 (*(vﬁ©ûê*)0x51000034)

	)

233 
	#rTCNTO3
 (*(vﬁ©ûê*)0x51000038)

	)

234 
	#rTCNTB4
 (*(vﬁ©ûê*)0x5100003C)

	)

235 
	#rTCNTO4
 (*(vﬁ©ûê*)0x51000040)

	)

239 #ifde‡
__BIG_ENDIAN


240 
	#rFUNC_ADDR_REG
 (*(volatile *)0x52000143)

241 
	#rPWR_REG
 (*(volatile *)0x52000147)

242 
	#rEP_INT_REG
 (*(volatile *)0x5200014b)

243 
	#rUSB_INT_REG
 (*(volatile *)0x5200015b)

244 
	#rEP_INT_EN_REG
 (*(volatile *)0x5200015f)

245 
	#rUSB_INT_EN_REG
 (*(vﬁ©ûê*)0x5200016f)

	)

246 
	#rFRAME_NUM1_REG
 (*(volatile *)0x52000173)

247 
	#rFRAME_NUM2_REG
 (*(volatile *)0x52000177)

248 
	#rINDEX_REG
 (*(volatile *)0x5200017b)

249 
	#rMAXP_REG
 (*(volatile *)0x52000183)

250 
	#rEP0_CSR
 (*(volatile *)0x52000187)

251 
	#rIN_CSR1_REG
 (*(volatile *)0x52000187)

252 
	#rIN_CSR2_REG
 (*(vﬁ©ûê*)0x5200018b)

	)

253 
	#rOUT_CSR1_REG
 (*(volatile *)0x52000193)

254 
	#rOUT_CSR2_REG
 (*(vﬁ©ûê*)0x52000197)

	)

255 
	#rOUT_FIFO_CNT1_REG
 (*(volatile *)0x5200019b)

256 
	#rOUT_FIFO_CNT2_REG
 (*(vﬁ©ûê*)0x5200019f)

	)

257 
	#rEP0_FIFO
 (*(volatile *)0x520001c3)

258 
	#rEP1_FIFO
 (*(volatile *)0x520001c7)

259 
	#rEP2_FIFO
 (*(volatile *)0x520001cb)

260 
	#rEP3_FIFO
 (*(volatile *)0x520001cf)

261 
	#rEP4_FIFO
 (*(volatile *)0x520001d3)

262 
	#rEP1_DMA_CON
 (*(volatile *)0x52000203)

263 
	#rEP1_DMA_UNIT
 (*(volatile *)0x52000207)

264 
	#rEP1_DMA_FIFO
 (*(volatile *)0x5200020b)

265 
	#rEP1_DMA_TTC_L
 (*(volatile *)0x5200020f)

266 
	#rEP1_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000213)

	)

267 
	#rEP1_DMA_TTC_H
 (*(vﬁ©ûê*)0x52000217)

	)

268 
	#rEP2_DMA_CON
 (*(volatile *)0x5200021b)

269 
	#rEP2_DMA_UNIT
 (*(volatile *)0x5200021f)

270 
	#rEP2_DMA_FIFO
 (*(volatile *)0x52000223)

271 
	#rEP2_DMA_TTC_L
 (*(volatile *)0x52000227)

272 
	#rEP2_DMA_TTC_M
 (*(vﬁ©ûê*)0x5200022b)

	)

273 
	#rEP2_DMA_TTC_H
 (*(vﬁ©ûê*)0x5200022f)

	)

274 
	#rEP3_DMA_CON
 (*(volatile *)0x52000243)

275 
	#rEP3_DMA_UNIT
 (*(volatile *)0x52000247)

276 
	#rEP3_DMA_FIFO
 (*(volatile *)0x5200024b)

277 
	#rEP3_DMA_TTC_L
 (*(volatile *)0x5200024f)

278 
	#rEP3_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000253)

	)

279 
	#rEP3_DMA_TTC_H
 (*(vﬁ©ûê*)0x52000257)

	)

280 
	#rEP4_DMA_CON
 (*(volatile *)0x5200025b)

281 
	#rEP4_DMA_UNIT
 (*(volatile *)0x5200025f)

282 
	#rEP4_DMA_FIFO
 (*(volatile *)0x52000263)

283 
	#rEP4_DMA_TTC_L
 (*(volatile *)0x52000267)

284 
	#rEP4_DMA_TTC_M
 (*(vﬁ©ûê*)0x5200026b)

	)

285 
	#rEP4_DMA_TTC_H
 (*(vﬁ©ûê*)0x5200026f)

	)

288 
	#rFUNC_ADDR_REG
 (*(volatile *)0x52000140)

289 
	#rPWR_REG
 (*(volatile *)0x52000144)

290 
	#rEP_INT_REG
 (*(volatile *)0x52000148)

291 
	#rUSB_INT_REG
 (*(volatile *)0x52000158)

292 
	#rEP_INT_EN_REG
 (*(volatile *)0x5200015c)

293 
	#rUSB_INT_EN_REG
 (*(vﬁ©ûê*)0x5200016c)

	)

294 
	#rFRAME_NUM1_REG
 (*(volatile *)0x52000170)

295 
	#rFRAME_NUM2_REG
 (*(volatile *)0x52000174)

296 
	#rINDEX_REG
 (*(volatile *)0x52000178)

297 
	#rMAXP_REG
 (*(volatile *)0x52000180)

298 
	#rEP0_CSR
 (*(volatile *)0x52000184)

299 
	#rIN_CSR1_REG
 (*(volatile *)0x52000184)

300 
	#rIN_CSR2_REG
 (*(vﬁ©ûê*)0x52000188)

	)

301 
	#rOUT_CSR1_REG
 (*(volatile *)0x52000190)

302 
	#rOUT_CSR2_REG
 (*(vﬁ©ûê*)0x52000194)

	)

303 
	#rOUT_FIFO_CNT1_REG
 (*(volatile *)0x52000198)

304 
	#rOUT_FIFO_CNT2_REG
 (*(vﬁ©ûê*)0x5200019c)

	)

305 
	#rEP0_FIFO
 (*(volatile *)0x520001c0)

306 
	#rEP1_FIFO
 (*(volatile *)0x520001c4)

307 
	#rEP2_FIFO
 (*(volatile *)0x520001c8)

308 
	#rEP3_FIFO
 (*(volatile *)0x520001cc)

309 
	#rEP4_FIFO
 (*(volatile *)0x520001d0)

310 
	#rEP1_DMA_CON
 (*(volatile *)0x52000200)

311 
	#rEP1_DMA_UNIT
 (*(volatile *)0x52000204)

312 
	#rEP1_DMA_FIFO
 (*(volatile *)0x52000208)

313 
	#rEP1_DMA_TTC_L
 (*(volatile *)0x5200020c)

314 
	#rEP1_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000210)

	)

315 
	#rEP1_DMA_TTC_H
 (*(vﬁ©ûê*)0x52000214)

	)

316 
	#rEP2_DMA_CON
 (*(volatile *)0x52000218)

317 
	#rEP2_DMA_UNIT
 (*(volatile *)0x5200021c)

318 
	#rEP2_DMA_FIFO
 (*(volatile *)0x52000220)

319 
	#rEP2_DMA_TTC_L
 (*(volatile *)0x52000224)

320 
	#rEP2_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000228)

	)

321 
	#rEP2_DMA_TTC_H
 (*(vﬁ©ûê*)0x5200022c)

	)

322 
	#rEP3_DMA_CON
 (*(volatile *)0x52000240)

323 
	#rEP3_DMA_UNIT
 (*(volatile *)0x52000244)

324 
	#rEP3_DMA_FIFO
 (*(volatile *)0x52000248)

325 
	#rEP3_DMA_TTC_L
 (*(volatile *)0x5200024c)

326 
	#rEP3_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000250)

	)

327 
	#rEP3_DMA_TTC_H
 (*(vﬁ©ûê*)0x52000254)

	)

328 
	#rEP4_DMA_CON
 (*(volatile *)0x52000258)

329 
	#rEP4_DMA_UNIT
 (*(volatile *)0x5200025c)

330 
	#rEP4_DMA_FIFO
 (*(volatile *)0x52000260)

331 
	#rEP4_DMA_TTC_L
 (*(volatile *)0x52000264)

332 
	#rEP4_DMA_TTC_M
 (*(vﬁ©ûê*)0x52000268)

	)

333 
	#rEP4_DMA_TTC_H
 (*(vﬁ©ûê*)0x5200026c)

	)

337 
	#rWTCON
 (*(vﬁ©ûê*)0x53000000)

	)

338 
	#rWTDAT
 (*(vﬁ©ûê*)0x53000004)

	)

339 
	#rWTCNT
 (*(vﬁ©ûê*)0x53000008)

	)

343 
	#rIICCON
 (*(vﬁ©ûê*)0x54000000)

	)

344 
	#rIICSTAT
 (*(vﬁ©ûê*)0x54000004)

	)

345 
	#rIICADD
 (*(vﬁ©ûê*)0x54000008)

	)

346 
	#rIICDS
 (*(vﬁ©ûê*)0x5400000C)

	)

350 
	#rIISCON
 (*(vﬁ©ûê*)0x55000000)

	)

351 
	#rIISMOD
 (*(vﬁ©ûê*)0x55000004)

	)

352 
	#rIISPSR
 (*(vﬁ©ûê*)0x55000008)

	)

353 
	#rIISFIFCON
 (*(vﬁ©ûê*)0x5500000C)

	)

355 #ifde‡
__BIG_ENDIAN


356 
	#IISFIFO
 ((vﬁ©ûê*)0x55000012)

	)

359 
	#IISFIFO
 ((vﬁ©ûê*)0x55000010)

	)

364 
	#rGPACON
 (*(volatile *)0x56000000)

365 
	#rGPADAT
 (*(volatile *)0x56000004)

366 

	)

367 
	#rGPBCON
 (*(volatile *)0x56000010)

368 
	#rGPBDAT
 (*(volatile *)0x56000014)

369 
	#rGPBUP
 (*(volatile *)0x56000018)

370 

	)

371 
	#rGPCCON
 (*(volatile *)0x56000020)

372 
	#rGPCDAT
 (*(volatile *)0x56000024)

373 
	#rGPCUP
 (*(volatile *)0x56000028)

374 

	)

375 
	#rGPDCON
 (*(volatile *)0x56000030)

376 
	#rGPDDAT
 (*(volatile *)0x56000034)

377 
	#rGPDUP
 (*(volatile *)0x56000038)

378 

	)

379 
	#rGPECON
 (*(volatile *)0x56000040)

380 
	#rGPEDAT
 (*(volatile *)0x56000044)

381 
	#rGPEUP
 (*(volatile *)0x56000048)

382 

	)

383 
	#rGPFCON
 (*(volatile *)0x56000050)

384 
	#rGPFDAT
 (*(volatile *)0x56000054)

385 
	#rGPFUP
 (*(volatile *)0x56000058)

386 

	)

387 
	#rGPGCON
 (*(volatile *)0x56000060)

388 
	#rGPGDAT
 (*(volatile *)0x56000064)

389 
	#rGPGUP
 (*(volatile *)0x56000068)

390 

	)

391 
	#rGPHCON
 (*(volatile *)0x56000070)

392 
	#rGPHDAT
 (*(volatile *)0x56000074)

393 
	#rGPHUP
 (*(volatile *)0x56000078)

394 

	)

395 
	#rMISCCR
 (*(volatile *)0x56000080)

396 
	#rDCLKCON
 (*(volatile *)0x56000084)

397 
	#rEXTINT0
 (*(volatile *)0x56000088)

398 
	#rEXTINT1
 (*(volatile *)0x5600008c)

399 
	#rEXTINT2
 (*(volatile *)0x56000090)

400 
	#rEINTFLT0
 (*(volatile *)0x56000094)

401 
	#rEINTFLT1
 (*(volatile *)0x56000098)

402 
	#rEINTFLT2
 (*(volatile *)0x5600009c)

403 
	#rEINTFLT3
 (*(volatile *)0x560000a0)

404 
	#rEINTMASK
 (*(volatile *)0x560000a4)

405 
	#rEINTPEND
 (*(volatile *)0x560000a8)

406 
	#rGSTATUS0
 (*(volatile *)0x560000ac)

407 
	#rGSTATUS1
 (*(volatile *)0x560000b0)

408 

	)

410 #ifde‡
__BIG_ENDIAN


411 
	#rRTCCON
 (*(volatile *)0x57000043)

412 
	#rTICNT
 (*(volatile *)0x57000047)

413 
	#rRTCALM
 (*(volatile *)0x57000053)

414 
	#rALMSEC
 (*(volatile *)0x57000057)

415 
	#rALMMIN
 (*(volatile *)0x5700005b)

416 
	#rALMHOUR
 (*(volatile *)0x5700005f)

417 
	#rALMDATE
 (*(volatile *)0x57000063)

418 
	#rALMMON
 (*(volatile *)0x57000067)

419 
	#rALMYEAR
 (*(volatile *)0x5700006b)

420 
	#rRTCRST
 (*(volatile *)0x5700006f)

421 
	#rBCDSEC
 (*(volatile *)0x57000073)

422 
	#rBCDMIN
 (*(volatile *)0x57000077)

423 
	#rBCDHOUR
 (*(volatile *)0x5700007b)

424 
	#rBCDDATE
 (*(volatile *)0x5700007f)

425 
	#rBCDDAY
 (*(volatile *)0x57000083)

426 
	#rBCDMON
 (*(volatile *)0x57000087)

427 
	#rBCDYEAR
 (*(volatile *)0x5700008b)

428 

	)

430 
	#rRTCCON
 (*(volatile *)0x57000040)

431 
	#rTICNT
 (*(volatile *)0x57000044)

432 
	#rRTCALM
 (*(volatile *)0x57000050)

433 
	#rALMSEC
 (*(volatile *)0x57000054)

434 
	#rALMMIN
 (*(volatile *)0x57000058)

435 
	#rALMHOUR
 (*(volatile *)0x5700005c)

436 
	#rALMDATE
 (*(volatile *)0x57000060)

437 
	#rALMMON
 (*(volatile *)0x57000064)

438 
	#rALMYEAR
 (*(volatile *)0x57000068)

439 
	#rRTCRST
 (*(volatile *)0x5700006c)

440 
	#rBCDSEC
 (*(volatile *)0x57000070)

441 
	#rBCDMIN
 (*(volatile *)0x57000074)

442 
	#rBCDHOUR
 (*(volatile *)0x57000078)

443 
	#rBCDDATE
 (*(volatile *)0x5700007c)

444 
	#rBCDDAY
 (*(volatile *)0x57000080)

445 
	#rBCDMON
 (*(volatile *)0x57000084)

446 
	#rBCDYEAR
 (*(volatile *)0x57000088)

448 

	)

451 
	#rADCCON
 (*(vﬁ©ûê*)0x58000000)

	)

452 
	#rADCTSC
 (*(vﬁ©ûê*)0x58000004)

	)

453 
	#rADCDLY
 (*(vﬁ©ûê*)0x58000008)

	)

454 
	#rADCDAT0
 (*(vﬁ©ûê*)0x5800000c)

	)

455 
	#rADCDAT1
 (*(vﬁ©ûê*)0x58000010)

	)

459 
	#rSPCON0
 (*(volatile *)0x59000000)

460 
	#rSPSTA0
 (*(volatile *)0x59000004)

461 
	#rSPPIN0
 (*(volatile *)0x59000008)

462 
	#rSPPRE0
 (*(volatile *)0x5900000c)

463 
	#rSPTDAT0
 (*(volatile *)0x59000010)

464 
	#rSPRDAT0
 (*(volatile *)0x59000014)

465 

	)

466 
	#rSPCON1
 (*(volatile *)0x59000020)

467 
	#rSPSTA1
 (*(volatile *)0x59000024)

468 
	#rSPPIN1
 (*(volatile *)0x59000028)

469 
	#rSPPRE1
 (*(volatile *)0x5900002c)

470 
	#rSPTDAT1
 (*(volatile *)0x59000030)

471 
	#rSPRDAT1
 (*(volatile *)0x59000034)

472 

	)

474 
	#rSDICON
 (*(volatile *)0x5a000000)

475 
	#rSDIPRE
 (*(volatile *)0x5a000004)

476 
	#rSDICARG
 (*(volatile *)0x5a000008)

477 
	#rSDICCON
 (*(volatile *)0x5a00000c)

478 
	#rSDICSTA
 (*(volatile *)0x5a000010)

479 
	#rSDIRSP0
 (*(volatile *)0x5a000014)

480 
	#rSDIRSP1
 (*(volatile *)0x5a000018)

481 
	#rSDIRSP2
 (*(volatile *)0x5a00001c)

482 
	#rSDIRSP3
 (*(volatile *)0x5a000020)

483 
	#rSDIDTIMER
 (*(volatile *)0x5a000024)

484 
	#rSDIBSIZE
 (*(volatile *)0x5a000028)

485 
	#rSDIDATCON
 (*(volatile *)0x5a00002c)

486 
	#rSDIDATCNT
 (*(volatile *)0x5a000030)

487 
	#rSDIDATSTA
 (*(volatile *)0x5a000034)

488 
	#rSDIFSTA
 (*(volatile *)0x5a000038)

489 
	#rSDIIMSK
 (*(volatile *)0x5a000040)

490 

	)

491 #ifde‡
__BIG_ENDIAN


492 
	#rSDIDAT
 (*(volatile *)0x5a00003F)

493 
	#SDIDAT
 0x5a00003F

	)

495 
	#rSDIDAT
 (*(volatile *)0x5a00003C)

496 
	#SDIDAT
 0x5a00003C

	)

500 
	#_ISR_STARTADDRESS
 
πems_ve˘‹_èbÀ


	)

502 
	#pISR_RESET
 (*(*)(
_ISR_STARTADDRESS
+0x0))

	)

503 
	#pISR_UNDEF
 (*(*)(
_ISR_STARTADDRESS
+0x4))

	)

504 
	#pISR_SWI
 (*(*)(
_ISR_STARTADDRESS
+0x8))

	)

505 
	#pISR_PABORT
 (*(*)(
_ISR_STARTADDRESS
+0xC))

	)

506 
	#pISR_DABORT
 (*(*)(
_ISR_STARTADDRESS
+0x10))

	)

507 
	#pISR_RESERVED
 (*(*)(
_ISR_STARTADDRESS
+0x14))

	)

508 
	#pISR_IRQ
 (*(*)(
_ISR_STARTADDRESS
+0x18))

	)

509 
	#pISR_FIQ
 (*(*)(
_ISR_STARTADDRESS
+0x1C))

	)

511 
	#pISR_EINT0
 (*(*)(
_ISR_STARTADDRESS
+0x20))

	)

512 
	#pISR_EINT1
 (*(*)(
_ISR_STARTADDRESS
+0x24))

	)

513 
	#pISR_EINT2
 (*(*)(
_ISR_STARTADDRESS
+0x28))

	)

514 
	#pISR_EINT3
 (*(*)(
_ISR_STARTADDRESS
+0x2C))

	)

515 
	#pISR_EINT4_7
 (*(*)(
_ISR_STARTADDRESS
+0x30))

	)

516 
	#pISR_EINT8_23
 (*(*)(
_ISR_STARTADDRESS
+0x34))

	)

517 
	#pISR_BAT_FLT
 (*(*)(
_ISR_STARTADDRESS
+0x3C))

	)

518 
	#pISR_TICK
 (*(*)(
_ISR_STARTADDRESS
+0x40))

	)

519 
	#pISR_WDT
 (*(*)(
_ISR_STARTADDRESS
+0x44))

	)

520 
	#pISR_TIMER0
 (*(*)(
_ISR_STARTADDRESS
+0x48))

	)

521 
	#pISR_TIMER1
 (*(*)(
_ISR_STARTADDRESS
+0x4C))

	)

522 
	#pISR_TIMER2
 (*(*)(
_ISR_STARTADDRESS
+0x50))

	)

523 
	#pISR_TIMER3
 (*(*)(
_ISR_STARTADDRESS
+0x54))

	)

524 
	#pISR_TIMER4
 (*(*)(
_ISR_STARTADDRESS
+0x58))

	)

525 
	#pISR_UART2
 (*(*)(
_ISR_STARTADDRESS
+0x5C))

	)

526 
	#pISR_NOTUSED
 (*(*)(
_ISR_STARTADDRESS
+0x60))

	)

527 
	#pISR_DMA0
 (*(*)(
_ISR_STARTADDRESS
+0x64))

	)

528 
	#pISR_DMA1
 (*(*)(
_ISR_STARTADDRESS
+0x68))

	)

529 
	#pISR_DMA2
 (*(*)(
_ISR_STARTADDRESS
+0x6C))

	)

530 
	#pISR_DMA3
 (*(*)(
_ISR_STARTADDRESS
+0x70))

	)

531 
	#pISR_SDI
 (*(*)(
_ISR_STARTADDRESS
+0x74))

	)

532 
	#pISR_SPI0
 (*(*)(
_ISR_STARTADDRESS
+0x78))

	)

533 
	#pISR_UART1
 (*(*)(
_ISR_STARTADDRESS
+0x7C))

	)

534 
	#pISR_USBD
 (*(*)(
_ISR_STARTADDRESS
+0x84))

	)

535 
	#pISR_USBH
 (*(*)(
_ISR_STARTADDRESS
+0x88))

	)

536 
	#pISR_IIC
 (*(*)(
_ISR_STARTADDRESS
+0x8C))

	)

537 
	#pISR_UART0
 (*(*)(
_ISR_STARTADDRESS
+0x90))

	)

538 
	#pISR_SPI1
 (*(*)(
_ISR_STARTADDRESS
+0x94))

	)

539 
	#pISR_RTC
 (*(*)(
_ISR_STARTADDRESS
+0x98))

	)

540 
	#pISR_ADC
 (*(*)(
_ISR_STARTADDRESS
+0xA0))

	)

544 
	#BIT_EINT0
 (0x1)

	)

545 
	#BIT_EINT1
 (0x1<<1)

	)

546 
	#BIT_EINT2
 (0x1<<2)

	)

547 
	#BIT_EINT3
 (0x1<<3)

	)

548 
	#BIT_EINT4_7
 (0x1<<4)

	)

549 
	#BIT_EINT8_23
 (0x1<<5)

	)

550 
	#BIT_BAT_FLT
 (0x1<<7)

	)

551 
	#BIT_TICK
 (0x1<<8)

	)

552 
	#BIT_WDT
 (0x1<<9)

	)

553 
	#BIT_TIMER0
 (0x1<<10)

	)

554 
	#BIT_TIMER1
 (0x1<<11)

	)

555 
	#BIT_TIMER2
 (0x1<<12)

	)

556 
	#BIT_TIMER3
 (0x1<<13)

	)

557 
	#BIT_TIMER4
 (0x1<<14)

	)

558 
	#BIT_UART2
 (0x1<<15)

	)

559 
	#BIT_LCD
 (0x1<<16)

	)

560 
	#BIT_DMA0
 (0x1<<17)

	)

561 
	#BIT_DMA1
 (0x1<<18)

	)

562 
	#BIT_DMA2
 (0x1<<19)

	)

563 
	#BIT_DMA3
 (0x1<<20)

	)

564 
	#BIT_SDI
 (0x1<<21)

	)

565 
	#BIT_SPI0
 (0x1<<22)

	)

566 
	#BIT_UART1
 (0x1<<23)

	)

567 
	#BIT_USBD
 (0x1<<25)

	)

568 
	#BIT_USBH
 (0x1<<26)

	)

569 
	#BIT_IIC
 (0x1<<27)

	)

570 
	#BIT_UART0
 (0x1<<28)

	)

571 
	#BIT_SPI1
 (0x1<<29)

	)

572 
	#BIT_RTC
 (0x1<<30)

	)

573 
	#BIT_ADC
 (0x1<<31)

	)

574 
	#BIT_ALLMSK
 (0xFFFFFFFF)

	)

576 
	#CÀ¨Pídög
(
bô
) {\

577 
rSRCPND
 = 
bô
;\

578 
rINTPND
 = 
bô
;\

579 
rINTPND
;\

580 }

	)

582 #i‚de‡
ASM


585 
	s_ªg
 {

586 
	mSM_BIT
:1;

588 
	mRe£rved
:1;

591 
	mIDLE_BIT
:1;

593 
	mPOWER_OFF
:1;

594 
	mNAND_Êash
:1;

595 
	mLCDC
:1;

596 
	mUSB_ho°
:1;

597 
	mUSB_devi˚
:1;

598 
	mPWMTIMER
:1;

599 
	mSDI
:1;

600 
	mUART0
:1;

601 
	mUART1
:1;

602 
	mUART2
:1;

603 
	mGPIO
:1;

604 
	mRTC
:1;

606 
	mADC
:1;

607 
	mIIC
:1;

608 
	mIIS
:1;

609 
	mSPI
:1;

610 } 
	mªg
;

611 
	mÆl
;

612 } 
	tCLKCON
;

617 
	mENVID
:1;

618 
	mBPPMODE
:4;

620 
	mPNRMODE
:2;

621 
	mMMODE
:1;

623 
	mCLKVAL
:10;

624 
	mLINECNT
:10;

626 } 
	mªg
;

627 
	mÆl
;

628 } 
	tLCDCON1
;

632 
	mVSPW
:6;

635 
	mVFPD
:8;

638 
	mLINEVAL
:10;

640 
	mVBPD
:8;

643 } 
	mªg
;

644 
	mÆl
;

645 } 
	tLCDCON2
;

649 
	mHFPD
:8;

652 
	mHOZVAL
:11;

654 
	mHBPD
:7;

657 } 
	mªg
;

658 
	mÆl
;

659 } 
	tLCDCON3
;

663 
	mHSPW
:8;

666 
	mMVAL
:8;

667 } 
	mªg
;

668 
	mÆl
;

669 } 
	tLCDCON4
;

673 
	mHWSWP
:1;

675 
	mBSWP
:1;

677 
	mENLEND
:1;

680 
	mPWREN
:1;

681 
	mINVLEND
:1;

683 
	mINVPWREN
:1;

684 
	mINVVDEN
:1;

687 
	mINVVD
:1;

690 
	mINVVFRAME
:1;

692 
	mINVVLINE
:1;

694 
	mINVVCLK
:1;

698 
	mFRM565
:1;

699 
	mBPP24BL
:1;

700 
	mHSTATUS
:2;

705 
	mVSTATUS
:2;

710 
	mRESERVED
:16;

711 } 
	mªg
;

712 
	mÆl
;

713 } 
	tLCDCON5
;

717 
	mLCDBASEU
:21;

720 
	mLCDBANK
:9;

721 } 
	mªg
;

722 
	mÆl
;

723 } 
	tLCDSADDR1
;

727 
	mLCDBASEL
:21;

731 } 
	mªg
;

732 
	mÆl
;

733 } 
	tLCDSADDR2
;

737 
	mPAGEWIDTH
:11;

740 
	mOFFSIZE
:11;

746 } 
	mªg
;

747 
	mÆl
;

748 } 
	tLCDSADDR3
;

756 
	mIISIFENA
:1;

757 
	mIISPSENA
:1;

758 
	mRXCHIDLE
:1;

759 
	mTXCHIDLE
:1;

760 
	mRXDMAENA
:1;

761 
	mTXDMAENA
:1;

762 
	mRXFIFORDY
:1;

763 
	mTXFIFORDY
:1;

764 
	mLRINDEX
:1;

765 } 
	mªg
;

766 
	mÆl
;

767 } 
	tIISCON
;

771 
	mSBCLKFS
:2;

772 
	mMCLKFS
:1;

773 
	mSDBITS
:1;

774 
	mSIFMT
:1;

775 
	mACTLEVCH
:1;

776 
	mTXRXMODE
:2;

777 
	mMODE
:1;

778 } 
	mªg
;

779 
	mÆl
;

780 } 
	tIISMOD
;

784 
	mPSB
:5;

785 
	mPSA
:5;

786 } 
	mªg
;

787 
	mÆl
;

788 } 
	tIISPSR
;

792 
	mRXFIFOCNT
:6;

793 
	mTXFIFOCNT
:6;

794 
	mRXFIFOENA
:1;

795 
	mTXFIFOENA
:1;

796 
	mRXFIFOMODE
:1;

797 
	mTXFIFOMODE
:1;

798 } 
	mªg
;

799 
	mÆl
;

800 } 
	tIISSFIFCON
;

804 
	mFENTRY
:16;

805 } 
	mªg
;

806 
	mÆl
;

807 } 
	tIISSFIF
;

810 
	#LCD_WIDTH
 240

	)

811 
	#LCD_HEIGHT
 320

	)

812 
	#LCD_ASPECT
 (()(
LCD_WIDTH
/
LCD_HEIGHT
))

	)

814 
	#SMDK2410_KEY_SELECT
 512

	)

815 
	#SMDK2410_KEY_START
 256

	)

816 
	#SMDK2410_KEY_A
 64

	)

817 
	#SMDK2410_KEY_B
 32

	)

818 
	#SMDK2410_KEY_L
 16

	)

819 
	#SMDK2410_KEY_R
 128

	)

820 
	#SMDK2410_KEY_UP
 8

	)

821 
	#SMDK2410_KEY_DOWN
 2

	)

822 
	#SMDK2410_KEY_LEFT
 1

	)

823 
	#SMDK2410_KEY_RIGHT
 4

	)

	@src/lib/libcpu/arm/s3c24xx/include/s3c24xx.h

8 #i‚de‡
S3C24XX_H_


9 
	#S3C24XX_H_


	)

11 #ifde‡
CPU_S3C2400


12 
	~<s3c2400.h
>

13 #ñi‡
deföed
 
CPU_S3C2410


14 
	~<s3c2410.h
>

	@src/lib/libcpu/arm/s3c24xx/irq/irq.c

15 
	~<πems/sc‹e/¨mv4.h
>

17 
	~<b•.h
>

18 
	~<b•/úq.h
>

19 
	~<b•/úq-gíîic.h
>

21 
	~<s3c24xx.h
>

23 
	$b•_öãºu±_di•©ch
()

25 
πems_ve˘‹_numbî
 
ve˘‹
 = *((
uöt32_t
 *Ë
rINTOFFSET_ADDR
);

27 
	`b•_öãºu±_h™dÀr_di•©ch
(
ve˘‹
);

28 
	}
}

30 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_íabÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

32  
RTEMS_SUCCESSFUL
;

33 
	}
}

35 
πems_°©us_code
 
	$b•_öãºu±_ve˘‹_dißbÀ
(
πems_ve˘‹_numbî
 
ve˘‹
)

37  
RTEMS_SUCCESSFUL
;

38 
	}
}

40 
πems_°©us_code
 
	$b•_öãºu±_Ácûôy_öôülize
()

42 
	`_CPU_ISR_ö°Æl_ve˘‹
(
ARM_EXCEPTION_IRQ
, 
_ARMV4_Ex˚±i⁄_öãºu±
, 
NULL
);

44  
RTEMS_SUCCESSFUL
;

45 
	}
}

	@src/lib/libcpu/arm/s3c24xx/irq/irq.h

11 #i‚de‡
_IRQ_H_


12 
	#_IRQ_H_


	)

14 
	~<πems.h
>

15 
	~<πems/úq.h
>

16 
	~<πems/úq-exãnsi⁄.h
>

18 
	~<s3c24xx.h
>

20 #ifde‡
CPU_S3C2400


22 
	#BSP_EINT0
 0

	)

23 
	#BSP_EINT1
 1

	)

24 
	#BSP_EINT2
 2

	)

25 
	#BSP_EINT3
 3

	)

26 
	#BSP_EINT4
 4

	)

27 
	#BSP_EINT5
 5

	)

28 
	#BSP_EINT6
 6

	)

29 
	#BSP_EINT7
 7

	)

30 
	#BSP_INT_TICK
 8

	)

31 
	#BSP_INT_WDT
 9

	)

32 
	#BSP_INT_TIMER0
 10

	)

33 
	#BSP_INT_TIMER1
 11

	)

34 
	#BSP_INT_TIMER2
 12

	)

35 
	#BSP_INT_TIMER3
 13

	)

36 
	#BSP_INT_TIMER4
 14

	)

37 
	#BSP_INT_UERR01
 15

	)

38 
	#_ªs0
 16

	)

39 
	#BSP_INT_DMA0
 17

	)

40 
	#BSP_INT_DMA1
 18

	)

41 
	#BSP_INT_DMA2
 19

	)

42 
	#BSP_INT_DMA3
 20

	)

43 
	#BSP_INT_MMC
 21

	)

44 
	#BSP_INT_SPI
 22

	)

45 
	#BSP_INT_URXD0
 23

	)

46 
	#BSP_INT_URXD1
 24

	)

47 
	#BSP_INT_USBD
 25

	)

48 
	#BSP_INT_USBH
 26

	)

49 
	#BSP_INT_IIC
 27

	)

50 
	#BSP_INT_UTXD0
 28

	)

51 
	#BSP_INT_UTXD1
 29

	)

52 
	#BSP_INT_RTC
 30

	)

53 
	#BSP_INT_ADC
 31

	)

54 
	#BSP_MAX_INT
 32

	)

56 #ñi‡
deföed
 
CPU_S3C2410


58 
	#BSP_EINT0
 0

	)

59 
	#BSP_EINT1
 1

	)

60 
	#BSP_EINT2
 2

	)

61 
	#BSP_EINT3
 3

	)

62 
	#BSP_EINT4_7
 4

	)

63 
	#BSP_EINT8_23
 5

	)

64 
	#BSP_nBATT_FLT
 7

	)

65 
	#BSP_INT_TICK
 8

	)

66 
	#BSP_INT_WDT
 9

	)

67 
	#BSP_INT_TIMER0
 10

	)

68 
	#BSP_INT_TIMER1
 11

	)

69 
	#BSP_INT_TIMER2
 12

	)

70 
	#BSP_INT_TIMER3
 13

	)

71 
	#BSP_INT_TIMER4
 14

	)

72 
	#BSP_INT_UART2
 15

	)

73 
	#BSP_INT_LCD
 16

	)

74 
	#BSP_INT_DMA0
 17

	)

75 
	#BSP_INT_DMA1
 18

	)

76 
	#BSP_INT_DMA2
 19

	)

77 
	#BSP_INT_DMA3
 20

	)

78 
	#BSP_INT_SDI
 21

	)

79 
	#BSP_INT_SPI0
 22

	)

80 
	#BSP_INT_UART1
 23

	)

81 
	#BSP_INT_USBD
 25

	)

82 
	#BSP_INT_USBH
 26

	)

83 
	#BSP_INT_IIC
 27

	)

84 
	#BSP_INT_UART0
 28

	)

85 
	#BSP_INT_SPI1
 29

	)

86 
	#BSP_INT_RTC
 30

	)

87 
	#BSP_INT_ADC
 31

	)

88 
	#BSP_MAX_INT
 32

	)

91 
	#BSP_INTERRUPT_VECTOR_MIN
 0

	)

93 
	#BSP_INTERRUPT_VECTOR_MAX
 (
BSP_MAX_INT
 - 1)

	)

	@src/lib/libcpu/arm/s3c24xx/timer/timer.c

14 
	~<b•.h
>

15 
	~<πems.h
>

16 
	~<πems/btimî.h
>

17 
	~<s3c24xx.h
>

19 
uöt32_t
 
	gg_°¨t
;

20 
uöt32_t
 
	gg_‰eq
;

22 
boﬁ
 
	gbíchm¨k_timî_föd_avîage_ovîhód
;

28 
	$bíchm¨k_timî_öôülize
( )

30 
uöt32_t
 
¸
;

33 
¸
=
rTCON
 & 0xFFFFF0FF;

34 
rTCON
=(
¸
 | (0x0 << 8));

37 
¸
=
rTCFG1
 & 0xFFFFFF0F;

38 
rTCFG1
=(
¸
 | (0<<4));

41 
g_‰eq
 = 
	`gë_PCLK
() / 2000;

42 
rTCNTB1
 = 0xFFFF;

45 
¸
=
rTCON
 & 0xFFFFF0FF;

46 
rTCON
=(
¸
 | (0x1 << 9));

47 
rTCON
=(
¸
 | (0x1 << 8));

49 
g_°¨t
 = 
rTCNTO1
;

50 
	}
}

62 
	#AVG_OVERHEAD
 0

	)

65 
	#LEAST_VALID
 1

	)

67 
bíchm¨k_timî_t
 
	$bíchm¨k_timî_ªad
( )

69 
uöt32_t
 
t
;

70 
tŸÆ
;

72 
t
 = 
rTCNTO1
;

79 
tŸÆ
 = (
g_°¨t
 - 
t
);

82 
tŸÆ
 = (tŸÆ*1000Ë/ 
g_‰eq
;

84 i‡–
bíchm¨k_timî_föd_avîage_ovîhód
 == 1 ) {

85  (Ë
tŸÆ
;

86 } i‡–
tŸÆ
 < 
LEAST_VALID
 ) {

93  (
tŸÆ
 - 
AVG_OVERHEAD
);

94 
	}
}

96 
	$bíchm¨k_timî_dißbÀ_subåa˘ög_avîage_ovîhód
(
boﬁ
 
föd_Êag
)

98 
bíchm¨k_timî_föd_avîage_ovîhód
 = 
föd_Êag
;

99 
	}
}

	@src/lib/libcpu/arm/shared/arm920/mmu.c

10 
	~<lib˝u/mmu.h
>

11 
	~<lib˝u/¨m-˝15.h
>

13 
uöt32_t
 
	tmmu_lvl1_t
;

15 
uöt32_t
 
_âbl_ba£
;

17 
mmu_£t_m≠_övÆ
(
mmu_lvl1_t
 *
ba£
);

19 
	#MMU_CTRL_MMU_EN
 (1 << 0)

	)

20 
	#MMU_CTRL_ALIGN_FAULT_EN
 (1 << 1)

	)

21 
	#MMU_CTRL_D_CACHE_EN
 (1 << 2)

	)

22 
	#MMU_CTRL_DEFAULT
 (0x‡<< 3)

	)

23 
	#MMU_CTRL_LITTLE_ENDIAN
 (0 << 7)

	)

24 
	#MMU_CTRL_BIG_ENDIAN
 (1 << 7)

	)

25 
	#MMU_CTRL_SYS_PROT
 (1 << 8)

	)

26 
	#MMU_CTRL_ROM_PROT
 (1 << 9)

	)

27 
	#MMU_CTRL_I_CACHE_EN
 (1 << 12)

	)

28 
	#MMU_CTRL_LOW_VECT
 (0 << 13)

	)

29 
	#MMU_CTRL_HIGH_VECT
 (1 << 13)

	)

32 
	#MMU_SET_LVL1_SECT
(
addr
, 
≠
, 
dom
, 
˚
, 
be
) \

33 (((
addr
) & 0xfff00000) | \

34 (
≠
) | \

35 (
dom
) | \

36 ((
˚
) << 3) | \

37 ((
be
) << 2) | \

38 0x12)

	)

40 
	#MMU_SET_LVL1_INVAL
 (0x0)

	)

42 
	#MMU_SECT_AP_ALL
 (0x3 << 10)

	)

44 
	$mmu_öô
(
mmu_£˘_m≠_t
 *
m≠
)

46 
mmu_lvl1_t
 *
lvl1_ba£
;

47 
i
;

50 
	`¨m_˝15_ˇche_övÆid©e
();

51 
	`¨m_˝15_éb_övÆid©e
();

54 
	`¨m_˝15_£t_domaö_ac˚ss_c⁄åﬁ
(0xffffffff);

56 
lvl1_ba£
 = (
mmu_lvl1_t
 *)&
_âbl_ba£
;

59 
	`mmu_£t_m≠_övÆ
(
lvl1_ba£
);

60 
	`¨m_˝15_£t_å™¶©i⁄_èbÀ_ba£
(
lvl1_ba£
);

63 
i
 = 0;

64 
m≠
[
i
].
size
 != 0) {

65 
c
 = 0;

66 
b
 = 0;

67 
pba£
;

68 
vba£
;

69 
£˘s
;

71 
m≠
[
i
].
ˇche_Êags
) {

72 
MMU_CACHE_NONE
:

73 
c
 = 0;

74 
b
 = 0;

76 
MMU_CACHE_BUFFERED
:

77 
c
 = 0;

78 
b
 = 1;

80 
MMU_CACHE_WTHROUGH
:

81 
c
 = 1;

82 
b
 = 0;

84 
MMU_CACHE_WBACK
:

85 
c
 = 1;

86 
b
 = 1;

90 
pba£
 = (
m≠
[
i
].
∑ddr
 & 0xfff00000) >> 20;

91 
vba£
 = (
m≠
[
i
].
vaddr
 & 0xfff00000) >> 20;

92 
£˘s
 = 
m≠
[
i
].
size
;

94 
£˘s
 > 0) {

95 
lvl1_ba£
[
vba£
] = 
	`MMU_SET_LVL1_SECT
(
pba£
 << 20,

96 
MMU_SECT_AP_ALL
,

98 
c
,

99 
b
);

100 
pba£
++;

101 
vba£
++;

102 
£˘s
--;

104 
i
++;

108 
	`¨m_˝15_ˇche_övÆid©e
();

109 
	`¨m_˝15_éb_övÆid©e
();

112 
	`¨m_˝15_£t_c⁄åﬁ
(
MMU_CTRL_DEFAULT
 |

113 
MMU_CTRL_D_CACHE_EN
 |

114 
MMU_CTRL_I_CACHE_EN
 |

115 
MMU_CTRL_ALIGN_FAULT_EN
 |

116 
MMU_CTRL_LITTLE_ENDIAN
 |

117 
MMU_CTRL_MMU_EN
);

120 
	}
}

123 
	$mmu_£t_m≠_övÆ
(
mmu_lvl1_t
 *
ba£
)

125 
i
;

126 
i
 = 0; i < (0x4000 / 4); i++) {

127 
ba£
[
i
] = 
MMU_SET_LVL1_INVAL
;

129 
	}
}

131 
	$mmu_£t_˝u_async_mode
()

133 
uöt32_t
 
ªg
;

134 
ªg
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

135 
ªg
 |= 0xc0000000;

136 
	`¨m_˝15_£t_c⁄åﬁ
(
ªg
);

137 
	}
}

	@src/lib/libcpu/arm/shared/include/am335x.h

20 
	#OMAP3_DM37XX_INTR_BASE
 0x48200000

	)

23 
	#OMAP3_AM335X_INTR_BASE
 0x48200000

	)

25 
	#AM335X_INT_EMUINT
 0

	)

27 
	#AM335X_INT_COMMTX
 1

	)

29 
	#AM335X_INT_COMMRX
 2

	)

31 
	#AM335X_INT_BENCH
 3

	)

33 
	#AM335X_INT_ELM_IRQ
 4

	)

35 
	#AM335X_INT_NMI
 7

	)

37 
	#AM335X_INT_L3DEBUG
 9

	)

39 
	#AM335X_INT_L3APPINT
 10

	)

41 
	#AM335X_INT_PRCMINT
 11

	)

43 
	#AM335X_INT_EDMACOMPINT
 12

	)

45 
	#AM335X_INT_EDMAMPERR
 13

	)

47 
	#AM335X_INT_EDMAERRINT
 14

	)

49 
	#AM335X_INT_ADC_TSC_GENINT
 16

	)

51 
	#AM335X_INT_USBSSINT
 17

	)

53 
	#AM335X_INT_USB0
 18

	)

55 
	#AM335X_INT_USB1
 19

	)

57 
	#AM335X_INT_PRUSS1_EVTOUT0
 20

	)

59 
	#AM335X_INT_PRUSS1_EVTOUT1
 21

	)

61 
	#AM335X_INT_PRUSS1_EVTOUT2
 22

	)

63 
	#AM335X_INT_PRUSS1_EVTOUT3
 23

	)

65 
	#AM335X_INT_PRUSS1_EVTOUT4
 24

	)

67 
	#AM335X_INT_PRUSS1_EVTOUT5
 25

	)

69 
	#AM335X_INT_PRUSS1_EVTOUT6
 26

	)

71 
	#AM335X_INT_PRUSS1_EVTOUT7
 27

	)

73 
	#AM335X_INT_MMCSD1INT
 28

	)

75 
	#AM335X_INT_MMCSD2INT
 29

	)

77 
	#AM335X_INT_I2C2INT
 30

	)

79 
	#AM335X_INT_eCAP0INT
 31

	)

81 
	#AM335X_INT_GPIOINT2A
 32

	)

83 
	#AM335X_INT_GPIOINT2B
 33

	)

85 
	#AM335X_INT_USBWAKEUP
 34

	)

87 
	#AM335X_INT_LCDCINT
 36

	)

89 
	#AM335X_INT_GFXINT
 37

	)

91 
	#AM335X_INT_ePWM2INT
 39

	)

93 
	#AM335X_INT_3PGSWRXTHR0
 40

	)

95 
	#AM335X_INT_3PGSWRXINT0
 41

	)

97 
	#AM335X_INT_3PGSWTXINT0
 42

	)

99 
	#AM335X_INT_3PGSWMISC0
 43

	)

101 
	#AM335X_INT_UART3INT
 44

	)

103 
	#AM335X_INT_UART4INT
 45

	)

105 
	#AM335X_INT_UART5INT
 46

	)

107 
	#AM335X_INT_eCAP1INT
 47

	)

109 
	#AM335X_INT_DCAN0_INT0
 52

	)

111 
	#AM335X_INT_DCAN0_INT1
 53

	)

113 
	#AM335X_INT_DCAN0_PARITY
 54

	)

115 
	#AM335X_INT_DCAN1_INT0
 55

	)

117 
	#AM335X_INT_DCAN1_INT1
 56

	)

119 
	#AM335X_INT_DCAN1_PARITY
 57

	)

121 
	#AM335X_INT_ePWM0_TZINT
 58

	)

123 
	#AM335X_INT_ePWM1_TZINT
 59

	)

125 
	#AM335X_INT_ePWM2_TZINT
 60

	)

127 
	#AM335X_INT_eCAP2INT
 61

	)

129 
	#AM335X_INT_GPIOINT3A
 62

	)

131 
	#AM335X_INT_GPIOINT3B
 63

	)

133 
	#AM335X_INT_MMCSD0INT
 64

	)

135 
	#AM335X_INT_SPI0INT
 65

	)

137 
	#AM335X_INT_TINT0
 66

	)

139 
	#AM335X_INT_TINT1_1MS
 67

	)

141 
	#AM335X_INT_TINT2
 68

	)

143 
	#AM335X_INT_TINT3
 69

	)

145 
	#AM335X_INT_I2C0INT
 70

	)

147 
	#AM335X_INT_I2C1INT
 71

	)

149 
	#AM335X_INT_UART0INT
 72

	)

151 
	#AM335X_INT_UART1INT
 73

	)

153 
	#AM335X_INT_UART2INT
 74

	)

155 
	#AM335X_INT_RTCINT
 75

	)

157 
	#AM335X_INT_RTCALARMINT
 76

	)

159 
	#AM335X_INT_MBINT0
 77

	)

161 
	#AM335X_INT_M3_TXEV
 78

	)

163 
	#AM335X_INT_eQEP0INT
 79

	)

165 
	#AM335X_INT_MCATXINT0
 80

	)

167 
	#AM335X_INT_MCARXINT0
 81

	)

169 
	#AM335X_INT_MCATXINT1
 82

	)

171 
	#AM335X_INT_MCARXINT1
 83

	)

173 
	#AM335X_INT_ePWM0INT
 86

	)

175 
	#AM335X_INT_ePWM1INT
 87

	)

177 
	#AM335X_INT_eQEP1INT
 88

	)

179 
	#AM335X_INT_eQEP2INT
 89

	)

181 
	#AM335X_INT_DMA_INTR_PIN2
 90

	)

183 
	#AM335X_INT_WDT1INT
 91

	)

185 
	#AM335X_INT_TINT4
 92

	)

187 
	#AM335X_INT_TINT5
 93

	)

189 
	#AM335X_INT_TINT6
 94

	)

191 
	#AM335X_INT_TINT7
 95

	)

193 
	#AM335X_INT_GPIOINT0A
 96

	)

195 
	#AM335X_INT_GPIOINT0B
 97

	)

197 
	#AM335X_INT_GPIOINT1A
 98

	)

199 
	#AM335X_INT_GPIOINT1B
 99

	)

201 
	#AM335X_INT_GPMCINT
 100

	)

203 
	#AM335X_INT_DDRERR0
 101

	)

205 
	#AM335X_INT_TCERRINT0
 112

	)

207 
	#AM335X_INT_TCERRINT1
 113

	)

209 
	#AM335X_INT_TCERRINT2
 114

	)

211 
	#AM335X_INT_ADC_TSC_PENINT
 115

	)

213 
	#AM335X_INT_SMRFLX_SabîtoŸh
 120

	)

215 
	#AM335X_INT_SMRFLX_C‹e
 121

	)

217 
	#AM335X_INT_DMA_INTR_PIN0
 123

	)

219 
	#AM335X_INT_DMA_INTR_PIN1
 124

	)

221 
	#AM335X_INT_SPI1INT
 125

	)

224 
	#OMAP3_AM335X_NR_IRQ_VECTORS
 125

	)

226 
	#AM335X_DMTIMER0_BASE
 0x44E05000

	)

228 
	#AM335X_DMTIMER1_1MS_BASE
 0x44E31000

	)

230 
	#AM335X_DMTIMER2_BASE
 0x48040000

	)

232 
	#AM335X_DMTIMER3_BASE
 0x48042000

	)

234 
	#AM335X_DMTIMER4_BASE
 0x48044000

	)

236 
	#AM335X_DMTIMER5_BASE
 0x48046000

	)

238 
	#AM335X_DMTIMER6_BASE
 0x48048000

	)

240 
	#AM335X_DMTIMER7_BASE
 0x4804A000

	)

245 
	#AM335X_TIMER_TIDR
 0x000

	)

247 
	#AM335X_TIMER_TIOCP_CFG
 0x010

	)

249 
	#AM335X_TIMER_IRQSTATUS_RAW
 0x024

	)

251 
	#AM335X_TIMER_IRQSTATUS
 0x028

	)

253 
	#AM335X_TIMER_IRQENABLE_SET
 0x02C

	)

255 
	#AM335X_TIMER_IRQENABLE_CLR
 0x030

	)

257 
	#AM335X_TIMER_IRQWAKEEN
 0x034

	)

259 
	#AM335X_TIMER_TCLR
 0x038

	)

261 
	#AM335X_TIMER_TCRR
 0x03C

	)

263 
	#AM335X_TIMER_TLDR
 0x040

	)

265 
	#AM335X_TIMER_TTGR
 0x044

	)

267 
	#AM335X_TIMER_TWPS
 0x048

	)

269 
	#AM335X_TIMER_TMAR
 0x04C

	)

271 
	#AM335X_TIMER_TCAR1
 0x050

	)

273 
	#AM335X_TIMER_TSICR
 0x054

	)

275 
	#AM335X_TIMER_TCAR2
 0x058

	)

277 
	#AM335X_WDT_BASE
 0x44E35000

	)

279 
	#AM335X_WDT_WWPS
 0x34

	)

281 
	#AM335X_WDT_WSPR
 0x48

	)

285 
	#AM335X_RTC_BASE
 0x44E3E000

	)

286 
	#AM335X_RTC_SECS
 0x0

	)

287 
	#AM335X_RTC_MINS
 0x4

	)

288 
	#AM335X_RTC_HOURS
 0x8

	)

289 
	#AM335X_RTC_DAYS
 0xc

	)

290 
	#AM335X_RTC_MONTHS
 0x10

	)

291 
	#AM335X_RTC_YEARS
 0x14

	)

292 
	#AM335X_RTC_WEEKS
 0x18

	)

293 
	#AM335X_RTC_CTRL_REG
 0x40

	)

294 
	#AM335X_RTC_STATUS_REG
 0x44

	)

295 
	#AM335X_RTC_REV_REG
 0x74

	)

296 
	#AM335X_RTC_SYSCONFIG
 0x78

	)

297 
	#AM335X_RTC_KICK0
 0x6c

	)

298 
	#AM335X_RTC_KICK1
 0x70

	)

299 
	#AM335X_RTC_OSC_CLOCK
 0x54

	)

301 
	#AM335X_RTC_KICK0_KEY
 0x83E70B13

	)

302 
	#AM335X_RTC_KICK1_KEY
 0x95A4F1E0

	)

	@src/lib/libcpu/arm/shared/include/arm-cp15.h

24 #i‚de‡
LIBCPU_SHARED_ARM_CP15_H


25 
	#LIBCPU_SHARED_ARM_CP15_H


	)

27 
	~<πems.h
>

29 #ifde‡
__˝lu•lus


37 #i‚de‡
ARM_CP15_TEXT_SECTION


38 
	#ARM_CP15_TEXT_SECTION


	)

41 
	#ARM_CP15_CACHE_PREPARE_MVA
(
mva
) \

42 ((c⁄° *Ë(((
uöt32_t
Ë(
mva
)Ë& ~0x1fU))

	)

44 
	#ARM_CP15_TLB_PREPARE_MVA
(
mva
) \

45 ((c⁄° *Ë(((
uöt32_t
Ë(
mva
)Ë& ~0x3fU))

	)

67 
	#ARM_MMU_SECT_BASE_SHIFT
 20

	)

68 
	#ARM_MMU_SECT_BASE_MASK
 (0xfffU << 
ARM_MMU_SECT_BASE_SHIFT
)

	)

69 
	#ARM_MMU_SECT_NS
 (1U << 19)

	)

70 
	#ARM_MMU_SECT_NG
 (1U << 17)

	)

71 
	#ARM_MMU_SECT_S
 (1U << 16)

	)

72 
	#ARM_MMU_SECT_AP_2
 (1U << 15)

	)

73 
	#ARM_MMU_SECT_TEX_2
 (1U << 14)

	)

74 
	#ARM_MMU_SECT_TEX_1
 (1U << 13)

	)

75 
	#ARM_MMU_SECT_TEX_0
 (1U << 12)

	)

76 
	#ARM_MMU_SECT_TEX_SHIFT
 12

	)

77 
	#ARM_MMU_SECT_TEX_MASK
 (0x3U << 
ARM_MMU_SECT_TEX_SHIFT
)

	)

78 
	#ARM_MMU_SECT_AP_1
 (1U << 11)

	)

79 
	#ARM_MMU_SECT_AP_0
 (1U << 10)

	)

80 
	#ARM_MMU_SECT_AP_SHIFT
 10

	)

81 
	#ARM_MMU_SECT_AP_MASK
 (0x23U << 
ARM_MMU_SECT_AP_SHIFT
)

	)

82 
	#ARM_MMU_SECT_DOMAIN_SHIFT
 5

	)

83 
	#ARM_MMU_SECT_DOMAIN_MASK
 (0xfU << 
ARM_MMU_SECT_DOMAIN_SHIFT
)

	)

84 
	#ARM_MMU_SECT_XN
 (1U << 4)

	)

85 
	#ARM_MMU_SECT_C
 (1U << 3)

	)

86 
	#ARM_MMU_SECT_B
 (1U << 2)

	)

87 
	#ARM_MMU_SECT_PXN
 (1U << 0)

	)

88 
	#ARM_MMU_SECT_DEFAULT
 0x2U

	)

89 
	#ARM_MMU_SECT_GET_INDEX
(
mva
) \

90 (((
uöt32_t
Ë(
mva
)Ë>> 
ARM_MMU_SECT_BASE_SHIFT
)

	)

91 
	#ARM_MMU_SECT_MVA_ALIGN_UP
(
mva
) \

92 ((1U << 
ARM_MMU_SECT_BASE_SHIFT
) \

93 + ((((
uöt32_t
Ë(
mva
Ë- 1U)Ë& ~((1U << 
ARM_MMU_SECT_BASE_SHIFT
Ë- 1U)))

	)

95 
	#ARM_MMU_TRANSLATION_TABLE_ENTRY_SIZE
 4U

	)

96 
	#ARM_MMU_TRANSLATION_TABLE_ENTRY_COUNT
 4096U

	)

98 
	#ARM_MMU_DEFAULT_CLIENT_DOMAIN
 15U

	)

100 
	#ARMV7_MMU_READ_ONLY
 \

101 ((
ARM_MMU_DEFAULT_CLIENT_DOMAIN
 << 
ARM_MMU_SECT_DOMAIN_SHIFT
) \

102 | 
ARM_MMU_SECT_AP_0
 \

103 | 
ARM_MMU_SECT_AP_2
 \

104 | 
ARM_MMU_SECT_DEFAULT
)

	)

106 
	#ARMV7_MMU_READ_ONLY_CACHED
 \

107 (
ARMV7_MMU_READ_ONLY
 | 
ARM_MMU_SECT_TEX_0
 | 
ARM_MMU_SECT_C
 | 
ARM_MMU_SECT_B
)

	)

109 
	#ARMV7_MMU_READ_WRITE
 \

110 ((
ARM_MMU_DEFAULT_CLIENT_DOMAIN
 << 
ARM_MMU_SECT_DOMAIN_SHIFT
) \

111 | 
ARM_MMU_SECT_AP_0
 \

112 | 
ARM_MMU_SECT_DEFAULT
)

	)

114 #ifde‡
RTEMS_SMP


115 
	#ARMV7_MMU_READ_WRITE_CACHED
 \

116 (
ARMV7_MMU_READ_WRITE
 \

117 | 
ARM_MMU_SECT_TEX_0
 | 
ARM_MMU_SECT_C
 | 
ARM_MMU_SECT_B
 | 
ARM_MMU_SECT_S
)

	)

119 
	#ARMV7_MMU_READ_WRITE_CACHED
 \

120 (
ARMV7_MMU_READ_WRITE
 \

121 | 
ARM_MMU_SECT_TEX_0
 | 
ARM_MMU_SECT_C
 | 
ARM_MMU_SECT_B
)

	)

124 
	#ARMV7_MMU_DATA_READ_ONLY
 \

125 (
ARMV7_MMU_READ_ONLY
 | 
ARM_MMU_SECT_TEX_0
)

	)

127 
	#ARMV7_MMU_DATA_READ_ONLY_CACHED
 \

128 
ARMV7_MMU_READ_ONLY_CACHED


	)

130 
	#ARMV7_MMU_DATA_READ_WRITE
 \

131 (
ARMV7_MMU_READ_WRITE
 | 
ARM_MMU_SECT_TEX_0
)

	)

133 
	#ARMV7_MMU_DATA_READ_WRITE_CACHED
 \

134 
ARMV7_MMU_READ_WRITE_CACHED


	)

136 
	#ARMV7_MMU_CODE
 \

137 (
ARMV7_MMU_READ_ONLY
 | 
ARM_MMU_SECT_TEX_0
)

	)

139 
	#ARMV7_MMU_CODE_CACHED
 \

140 
ARMV7_MMU_READ_ONLY_CACHED


	)

142 
	#ARMV7_MMU_DEVICE
 \

143 (
ARMV7_MMU_READ_WRITE
 | 
ARM_MMU_SECT_B
)

	)

153 
	#ARM_CP15_CTRL_TE
 (1U << 30)

	)

154 
	#ARM_CP15_CTRL_AFE
 (1U << 29)

	)

155 
	#ARM_CP15_CTRL_TRE
 (1U << 28)

	)

156 
	#ARM_CP15_CTRL_NMFI
 (1U << 27)

	)

157 
	#ARM_CP15_CTRL_EE
 (1U << 25)

	)

158 
	#ARM_CP15_CTRL_VE
 (1U << 24)

	)

159 
	#ARM_CP15_CTRL_XP
 (1U << 23)

	)

160 
	#ARM_CP15_CTRL_U
 (1U << 22)

	)

161 
	#ARM_CP15_CTRL_FI
 (1U << 21)

	)

162 
	#ARM_CP15_CTRL_UWXN
 (1U << 20)

	)

163 
	#ARM_CP15_CTRL_WXN
 (1U << 19)

	)

164 
	#ARM_CP15_CTRL_HA
 (1U << 17)

	)

165 
	#ARM_CP15_CTRL_L4
 (1U << 15)

	)

166 
	#ARM_CP15_CTRL_RR
 (1U << 14)

	)

167 
	#ARM_CP15_CTRL_V
 (1U << 13)

	)

168 
	#ARM_CP15_CTRL_I
 (1U << 12)

	)

169 
	#ARM_CP15_CTRL_Z
 (1U << 11)

	)

170 
	#ARM_CP15_CTRL_SW
 (1U << 10)

	)

171 
	#ARM_CP15_CTRL_R
 (1U << 9)

	)

172 
	#ARM_CP15_CTRL_S
 (1U << 8)

	)

173 
	#ARM_CP15_CTRL_B
 (1U << 7)

	)

174 
	#ARM_CP15_CTRL_CP15BEN
 (1U << 5)

	)

175 
	#ARM_CP15_CTRL_C
 (1U << 2)

	)

176 
	#ARM_CP15_CTRL_A
 (1U << 1)

	)

177 
	#ARM_CP15_CTRL_M
 (1U << 0)

	)

187 
	#ARM_CP15_DAC_NO_ACCESS
 0x0U

	)

188 
	#ARM_CP15_DAC_CLIENT
 0x1U

	)

189 
	#ARM_CP15_DAC_MANAGER
 0x3U

	)

190 
	#ARM_CP15_DAC_DOMAIN
(
ödex
, 
vÆ
Ë((vÆË<< (2 * index))

	)

200 
	#ARM_CP15_FAULT_STATUS_MASK
 0x040F

	)

202 
	#ARM_CP15_FSR_ALIGNMENT_FAULT
 0x00000001

	)

203 
	#ARM_CP15_FSR_BACKGROUND_FAULT
 0x0000

	)

204 
	#ARM_CP15_FSR_ACCESS_PERMISSION_FAULT
 0x000D

	)

205 
	#ARM_CP15_FSR_PRECISE_EXTERNAL_ABORT_FAULT
 0x0008

	)

206 
	#ARM_CP15_FSR_IMPRECISE_EXTERNAL_ABORT_FAULT
 0x0406

	)

207 
	#ARM_CP15_FSR_PRECISE_PARITY_ERROR_EXCEPTION
 0x0006

	)

208 
	#ARM_CP15_FSR_IMPRECISE_PARITY_ERROR_EXCEPTION
 0x0408

	)

209 
	#ARM_CP15_FSR_DEBUG_EVENT
 0x0002

	)

213 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


214 
¨m_˝15_gë_id_code
()

216 
ARM_SWITCH_REGISTERS
;

217 
uöt32_t
 
vÆ
;

219 
__asm__
 volatile (

220 
ARM_SWITCH_TO_ARM


222 
ARM_SWITCH_BACK


223 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


226  
vÆ
;

229 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


230 
¨m_˝15_gë_tcm_°©us
()

232 
ARM_SWITCH_REGISTERS
;

233 
uöt32_t
 
vÆ
;

235 
__asm__
 volatile (

236 
ARM_SWITCH_TO_ARM


238 
ARM_SWITCH_BACK


239 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


242  
vÆ
;

245 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


246 
¨m_˝15_gë_c⁄åﬁ
()

248 
ARM_SWITCH_REGISTERS
;

249 
uöt32_t
 
vÆ
;

251 
__asm__
 volatile (

252 
ARM_SWITCH_TO_ARM


254 
ARM_SWITCH_BACK


255 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


258  
vÆ
;

261 
ARM_CP15_TEXT_SECTION
 
ölöe
 

262 
¨m_˝15_£t_c⁄åﬁ
(
uöt32_t
 
vÆ
)

264 
ARM_SWITCH_REGISTERS
;

266 
__asm__
 volatile (

267 
ARM_SWITCH_TO_ARM


271 
ARM_SWITCH_BACK


272 : 
ARM_SWITCH_OUTPUT


273 : [
vÆ
] "r" (val)

294 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


295 
¨m_˝15_mmu_dißbÀ
(
uöt32_t
 
˛s
)

297 
ARM_SWITCH_REGISTERS
;

298 
uöt32_t
 
˘æ
;

299 
uöt32_t
 
tmp_0
;

300 
uöt32_t
 
tmp_1
;

302 
__asm__
 volatile (

303 
ARM_SWITCH_TO_ARM


319 
ARM_SWITCH_BACK


320 : [
˘æ
] "=&r" (ctrl),

321 [
tmp_0
] "=&r" (tmp_0),

322 [
tmp_1
] "=&r" (tmp_1)

323 
ARM_SWITCH_ADDITIONAL_OUTPUT


324 : [
˛s
] "r" (cls)

328  
˘æ
;

331 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


332 *
¨m_˝15_gë_å™¶©i⁄_èbÀ_ba£
()

334 
ARM_SWITCH_REGISTERS
;

335 
uöt32_t
 *
ba£
;

337 
__asm__
 volatile (

338 
ARM_SWITCH_TO_ARM


340 
ARM_SWITCH_BACK


341 : [
ba£
] "=&r" (ba£Ë
ARM_SWITCH_ADDITIONAL_OUTPUT


344  
ba£
;

347 
ARM_CP15_TEXT_SECTION
 
ölöe
 

348 
¨m_˝15_£t_å™¶©i⁄_èbÀ_ba£
(
uöt32_t
 *
ba£
)

350 
ARM_SWITCH_REGISTERS
;

352 
__asm__
 volatile (

353 
ARM_SWITCH_TO_ARM


355 
ARM_SWITCH_BACK


356 : 
ARM_SWITCH_OUTPUT


357 : [
ba£
] "r" (base)

361 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


362 
¨m_˝15_gë_domaö_ac˚ss_c⁄åﬁ
()

364 
ARM_SWITCH_REGISTERS
;

365 
uöt32_t
 
vÆ
;

367 
__asm__
 volatile (

368 
ARM_SWITCH_TO_ARM


370 
ARM_SWITCH_BACK


371 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


374  
vÆ
;

377 
ARM_CP15_TEXT_SECTION
 
ölöe
 

378 
¨m_˝15_£t_domaö_ac˚ss_c⁄åﬁ
(
uöt32_t
 
vÆ
)

380 
ARM_SWITCH_REGISTERS
;

382 
__asm__
 volatile (

383 
ARM_SWITCH_TO_ARM


385 
ARM_SWITCH_BACK


386 : 
ARM_SWITCH_OUTPUT


387 : [
vÆ
] "r" (val)

391 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


392 
¨m_˝15_gë_d©a_Áu…_°©us
()

394 
ARM_SWITCH_REGISTERS
;

395 
uöt32_t
 
vÆ
;

397 
__asm__
 volatile (

398 
ARM_SWITCH_TO_ARM


400 
ARM_SWITCH_BACK


401 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


404  
vÆ
;

407 
ARM_CP15_TEXT_SECTION
 
ölöe
 

408 
¨m_˝15_£t_d©a_Áu…_°©us
(
uöt32_t
 
vÆ
)

410 
ARM_SWITCH_REGISTERS
;

412 
__asm__
 volatile (

413 
ARM_SWITCH_TO_ARM


415 
ARM_SWITCH_BACK


416 : 
ARM_SWITCH_OUTPUT


417 : [
vÆ
] "r" (val)

421 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


422 
¨m_˝15_gë_ö°ru˘i⁄_Áu…_°©us
()

424 
ARM_SWITCH_REGISTERS
;

425 
uöt32_t
 
vÆ
;

427 
__asm__
 volatile (

428 
ARM_SWITCH_TO_ARM


430 
ARM_SWITCH_BACK


431 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


434  
vÆ
;

437 
ARM_CP15_TEXT_SECTION
 
ölöe
 

438 
¨m_˝15_£t_ö°ru˘i⁄_Áu…_°©us
(
uöt32_t
 
vÆ
)

440 
ARM_SWITCH_REGISTERS
;

442 
__asm__
 volatile (

443 
ARM_SWITCH_TO_ARM


445 
ARM_SWITCH_BACK


446 : 
ARM_SWITCH_OUTPUT


447 : [
vÆ
] "r" (val)

451 
ARM_CP15_TEXT_SECTION
 
ölöe
 

452 *
¨m_˝15_gë_Áu…_addªss
()

454 
ARM_SWITCH_REGISTERS
;

455 *
mva
;

457 
__asm__
 volatile (

458 
ARM_SWITCH_TO_ARM


460 
ARM_SWITCH_BACK


461 : [
mva
] "=&r" (mvaË
ARM_SWITCH_ADDITIONAL_OUTPUT


464  
mva
;

467 
ARM_CP15_TEXT_SECTION
 
ölöe
 

468 
¨m_˝15_£t_Áu…_addªss
(c⁄° *
mva
)

470 
ARM_SWITCH_REGISTERS
;

472 
__asm__
 volatile (

473 
ARM_SWITCH_TO_ARM


475 
ARM_SWITCH_BACK


476 : 
ARM_SWITCH_OUTPUT


477 : [
mva
] "r" (mva)

481 
ARM_CP15_TEXT_SECTION
 
ölöe
 

482 
¨m_˝15_éb_övÆid©e
()

484 
ARM_SWITCH_REGISTERS
;

485 
uöt32_t
 
sbz
 = 0;

487 
__asm__
 volatile (

488 
ARM_SWITCH_TO_ARM


490 
ARM_SWITCH_BACK


491 : 
ARM_SWITCH_OUTPUT


492 : [
sbz
] "r" (sbz)

499 
_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
();

500 
_ARM_In°ru˘i⁄_synchr⁄iz©i⁄_b¨rõr
();

503 
ARM_CP15_TEXT_SECTION
 
ölöe
 

504 
¨m_˝15_éb_övÆid©e_íåy
(c⁄° *
mva
)

506 
ARM_SWITCH_REGISTERS
;

508 
mva
 = 
ARM_CP15_TLB_PREPARE_MVA
(mva);

510 
__asm__
 volatile (

511 
ARM_SWITCH_TO_ARM


513 
ARM_SWITCH_BACK


514 : 
ARM_SWITCH_OUTPUT


515 : [
mva
] "r" (mva)

519 
ARM_CP15_TEXT_SECTION
 
ölöe
 

520 
¨m_˝15_éb_ö°ru˘i⁄_övÆid©e
()

522 
ARM_SWITCH_REGISTERS
;

523 
uöt32_t
 
sbz
 = 0;

525 
__asm__
 volatile (

526 
ARM_SWITCH_TO_ARM


528 
ARM_SWITCH_BACK


529 : 
ARM_SWITCH_OUTPUT


530 : [
sbz
] "r" (sbz)

534 
ARM_CP15_TEXT_SECTION
 
ölöe
 

535 
¨m_˝15_éb_ö°ru˘i⁄_övÆid©e_íåy
(c⁄° *
mva
)

537 
ARM_SWITCH_REGISTERS
;

539 
mva
 = 
ARM_CP15_TLB_PREPARE_MVA
(mva);

541 
__asm__
 volatile (

542 
ARM_SWITCH_TO_ARM


544 
ARM_SWITCH_BACK


545 : 
ARM_SWITCH_OUTPUT


546 : [
mva
] "r" (mva)

550 
ARM_CP15_TEXT_SECTION
 
ölöe
 

551 
¨m_˝15_éb_d©a_övÆid©e
()

553 
ARM_SWITCH_REGISTERS
;

554 
uöt32_t
 
sbz
 = 0;

556 
__asm__
 volatile (

557 
ARM_SWITCH_TO_ARM


559 
ARM_SWITCH_BACK


560 : 
ARM_SWITCH_OUTPUT


561 : [
sbz
] "r" (sbz)

565 
ARM_CP15_TEXT_SECTION
 
ölöe
 

566 
¨m_˝15_éb_d©a_övÆid©e_íåy
(c⁄° *
mva
)

568 
ARM_SWITCH_REGISTERS
;

570 
mva
 = 
ARM_CP15_TLB_PREPARE_MVA
(mva);

572 
__asm__
 volatile (

573 
ARM_SWITCH_TO_ARM


575 
ARM_SWITCH_BACK


576 : 
ARM_SWITCH_OUTPUT


577 : [
mva
] "r" (mva)

581 
ARM_CP15_TEXT_SECTION
 
ölöe
 

582 
¨m_˝15_éb_lockdown_íåy
(c⁄° *
mva
)

584 
uöt32_t
 
¨m_swôch_ªg
;

586 
__asm__
 volatile (

587 
ARM_SWITCH_TO_ARM


598 
ARM_SWITCH_BACK


599 : [
mva
] "Ù" (mva), [
¨m_swôch_ªg
] "=&r" (arm_switch_reg)

600 : "[mva]" (
mva
)

613 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


614 
¨m_˝15_gë_ˇche_ty≥
()

616 
ARM_SWITCH_REGISTERS
;

617 
uöt32_t
 
vÆ
;

619 
__asm__
 volatile (

620 
ARM_SWITCH_TO_ARM


622 
ARM_SWITCH_BACK


623 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


626  
vÆ
;

630 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


631 
¨m_˝15_gë_mö_ˇche_löe_size
()

633 
uöt32_t
 
m˛s
 = 0;

634 
uöt32_t
 
˘
 = 
¨m_˝15_gë_ˇche_ty≥
();

635 
uöt32_t
 
f‹m©
 = (
˘
 >> 29) & 0x7U;

637 i‡(
f‹m©
 == 0x4) {

639 
m˛s
 = (1U << (
˘
 & 0xf)) * 4;

640 } i‡(
f‹m©
 == 0x0) {

642 
uöt32_t
 
mask
 = (1U << 12) - 1;

643 
uöt32_t
 
d˛s
 = (
˘
 >> 12Ë& 
mask
;

644 
uöt32_t
 
i˛s
 = 
˘
 & 
mask
;

646 
m˛s
 = 
d˛s
 <
i˛s
 ? dcls : icls;

649  
m˛s
;

653 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


654 
¨m_˝15_gë_d©a_ˇche_löe_size
()

656 
uöt32_t
 
m˛s
 = 0;

657 
uöt32_t
 
˘
 = 
¨m_˝15_gë_ˇche_ty≥
();

658 
uöt32_t
 
f‹m©
 = (
˘
 >> 29) & 0x7U;

660 i‡(
f‹m©
 == 0x4) {

662 
m˛s
 = (1U << ((
˘
 & 0xf0000) >> 16)) * 4;

663 } i‡(
f‹m©
 == 0x0) {

665 
uöt32_t
 
mask
 = (1U << 12) - 1;

666 
m˛s
 = (
˘
 >> 12Ë& 
mask
;

669  
m˛s
;

673 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


674 
¨m_˝15_gë_ö°ru˘i⁄_ˇche_löe_size
()

676 
uöt32_t
 
m˛s
 = 0;

677 
uöt32_t
 
˘
 = 
¨m_˝15_gë_ˇche_ty≥
();

678 
uöt32_t
 
f‹m©
 = (
˘
 >> 29) & 0x7U;

680 i‡(
f‹m©
 == 0x4) {

682 
m˛s
 = (1U << (
˘
 & 0x0000f)) * 4;

683 } i‡(
f‹m©
 == 0x0) {

685 
uöt32_t
 
mask
 = (1U << 12) - 1;

686 
m˛s
 = 
˘
 & 
mask
;;

689  
m˛s
;

694 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


695 
¨m_˝15_gë_ˇche_size_id
()

697 
ARM_SWITCH_REGISTERS
;

698 
uöt32_t
 
vÆ
;

700 
__asm__
 volatile (

701 
ARM_SWITCH_TO_ARM


703 
ARM_SWITCH_BACK


704 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


707  
vÆ
;

710 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


711 
¨m_ccsidr_gë_löe_powî
(
uöt32_t
 
ccsidr
)

713  (
ccsidr
 & 0x7) + 4;

716 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


717 
¨m_ccsidr_gë_assocütivôy
(
uöt32_t
 
ccsidr
)

719  ((
ccsidr
 >> 3) & 0x3ff) + 1;

722 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


723 
¨m_ccsidr_gë_num_£ts
(
uöt32_t
 
ccsidr
)

725  ((
ccsidr
 >> 13) & 0x7fff) + 1;

730 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


731 
¨m_˝15_gë_ˇche_Àvñ_id
()

733 
ARM_SWITCH_REGISTERS
;

734 
uöt32_t
 
vÆ
;

736 
__asm__
 volatile (

737 
ARM_SWITCH_TO_ARM


739 
ARM_SWITCH_BACK


740 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


743  
vÆ
;

746 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


747 
¨m_˛idr_gë_Àvñ_of_cohîícy
(
uöt32_t
 
˛idr
)

749  (
˛idr
 >> 24) & 0x7;

752 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


753 
¨m_˛idr_gë_ˇche_ty≥
(
uöt32_t
 
˛idr
, uöt32_à
Àvñ
)

755  (
˛idr
 >> (3 * 
Àvñ
)) & 0x7;

760 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


761 
¨m_˝15_gë_ˇche_size_£À˘i⁄
()

763 
ARM_SWITCH_REGISTERS
;

764 
uöt32_t
 
vÆ
;

766 
__asm__
 volatile (

767 
ARM_SWITCH_TO_ARM


769 
ARM_SWITCH_BACK


770 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


773  
vÆ
;

776 
ARM_CP15_TEXT_SECTION
 
ölöe
 

777 
¨m_˝15_£t_ˇche_size_£À˘i⁄
(
uöt32_t
 
vÆ
)

779 
ARM_SWITCH_REGISTERS
;

781 
__asm__
 volatile (

782 
ARM_SWITCH_TO_ARM


784 
ARM_SWITCH_BACK


785 : 
ARM_SWITCH_OUTPUT


786 : [
vÆ
] "r" (val)

791 
ARM_CP15_TEXT_SECTION
 
ölöe
 

792 
¨m_˝15_ˇche_övÆid©e
()

794 
ARM_SWITCH_REGISTERS
;

795 
uöt32_t
 
sbz
 = 0;

797 
__asm__
 volatile (

798 
ARM_SWITCH_TO_ARM


800 
ARM_SWITCH_BACK


801 : 
ARM_SWITCH_OUTPUT


802 : [
sbz
] "r" (sbz)

809 
ARM_CP15_TEXT_SECTION
 
ölöe
 

810 
¨m_˝15_ö°ru˘i⁄_ˇche_ö√r_sh¨óbÀ_övÆid©e_Æl
()

812 
ARM_SWITCH_REGISTERS
;

813 
uöt32_t
 
sbz
 = 0;

815 
__asm__
 volatile (

816 
ARM_SWITCH_TO_ARM


818 
ARM_SWITCH_BACK


819 : 
ARM_SWITCH_OUTPUT


820 : [
sbz
] "r" (sbz)

827 
ARM_CP15_TEXT_SECTION
 
ölöe
 

828 
¨m_˝15_bønch_¥edi˘‹_ö√r_sh¨óbÀ_övÆid©e_Æl
()

830 
ARM_SWITCH_REGISTERS
;

831 
uöt32_t
 
sbz
 = 0;

833 
__asm__
 volatile (

834 
ARM_SWITCH_TO_ARM


836 
ARM_SWITCH_BACK


837 : 
ARM_SWITCH_OUTPUT


838 : [
sbz
] "r" (sbz)

845 
ARM_CP15_TEXT_SECTION
 
ölöe
 

846 
¨m_˝15_bønch_¥edi˘‹_övÆid©e_Æl
()

848 
ARM_SWITCH_REGISTERS
;

849 
uöt32_t
 
sbz
 = 0;

851 
__asm__
 volatile (

852 
ARM_SWITCH_TO_ARM


854 
ARM_SWITCH_BACK


855 : 
ARM_SWITCH_OUTPUT


856 : [
sbz
] "r" (sbz)

861 
ARM_CP15_TEXT_SECTION
 
ölöe
 

862 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e
()

864 
ARM_SWITCH_REGISTERS
;

865 
uöt32_t
 
sbz
 = 0;

867 
__asm__
 volatile (

868 
ARM_SWITCH_TO_ARM


870 
ARM_SWITCH_BACK


871 : 
ARM_SWITCH_OUTPUT


872 : [
sbz
] "r" (sbz)

877 
ARM_CP15_TEXT_SECTION
 
ölöe
 

878 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e_löe
(c⁄° *
mva
)

880 
ARM_SWITCH_REGISTERS
;

882 
mva
 = 
ARM_CP15_CACHE_PREPARE_MVA
(mva);

884 
__asm__
 volatile (

885 
ARM_SWITCH_TO_ARM


887 
ARM_SWITCH_BACK


888 : 
ARM_SWITCH_OUTPUT


889 : [
mva
] "r" (mva)

894 
ARM_CP15_TEXT_SECTION
 
ölöe
 

895 
¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e_löe_by_£t_™d_way
(
uöt32_t
 
£t_™d_way
)

897 
ARM_SWITCH_REGISTERS
;

899 
__asm__
 volatile (

900 
ARM_SWITCH_TO_ARM


902 
ARM_SWITCH_BACK


903 : 
ARM_SWITCH_OUTPUT


904 : [
£t_™d_way
] "r" (set_and_way)

909 
ARM_CP15_TEXT_SECTION
 
ölöe
 

910 
¨m_˝15_ö°ru˘i⁄_ˇche_¥e„tch_löe
(c⁄° *
mva
)

912 
ARM_SWITCH_REGISTERS
;

914 
mva
 = 
ARM_CP15_CACHE_PREPARE_MVA
(mva);

916 
__asm__
 volatile (

917 
ARM_SWITCH_TO_ARM


919 
ARM_SWITCH_BACK


920 : 
ARM_SWITCH_OUTPUT


921 : [
mva
] "r" (mva)

925 
ARM_CP15_TEXT_SECTION
 
ölöe
 

926 
¨m_˝15_d©a_ˇche_övÆid©e
()

928 
ARM_SWITCH_REGISTERS
;

929 
uöt32_t
 
sbz
 = 0;

931 
__asm__
 volatile (

932 
ARM_SWITCH_TO_ARM


934 
ARM_SWITCH_BACK


935 : 
ARM_SWITCH_OUTPUT


936 : [
sbz
] "r" (sbz)

941 
ARM_CP15_TEXT_SECTION
 
ölöe
 

942 
¨m_˝15_d©a_ˇche_övÆid©e_löe
(c⁄° *
mva
)

944 
ARM_SWITCH_REGISTERS
;

946 
mva
 = 
ARM_CP15_CACHE_PREPARE_MVA
(mva);

948 
__asm__
 volatile (

949 
ARM_SWITCH_TO_ARM


951 
ARM_SWITCH_BACK


952 : 
ARM_SWITCH_OUTPUT


953 : [
mva
] "r" (mva)

958 
ARM_CP15_TEXT_SECTION
 
ölöe
 

959 
¨m_˝15_d©a_ˇche_övÆid©e_löe_by_£t_™d_way
(
uöt32_t
 
£t_™d_way
)

961 
ARM_SWITCH_REGISTERS
;

963 
__asm__
 volatile (

964 
ARM_SWITCH_TO_ARM


966 
ARM_SWITCH_BACK


967 : 
ARM_SWITCH_OUTPUT


968 : [
£t_™d_way
] "r" (set_and_way)

973 
ARM_CP15_TEXT_SECTION
 
ölöe
 

974 
¨m_˝15_d©a_ˇche_övÆid©e_Æl_Àvñs
()

976 
uöt32_t
 
˛idr
 = 
¨m_˝15_gë_ˇche_Àvñ_id
();

977 
uöt32_t
 
loc
 = 
¨m_˛idr_gë_Àvñ_of_cohîícy
(
˛idr
);

978 
uöt32_t
 
Àvñ
 = 0;

980 
Àvñ
 = 0;Üevñ < 
loc
; ++level) {

981 
uöt32_t
 
˘y≥
 = 
¨m_˛idr_gë_ˇche_ty≥
(
˛idr
, 
Àvñ
);

984 i‡((
˘y≥
 & 0x2) != 0) {

985 
uöt32_t
 
ccsidr
;

986 
uöt32_t
 
löe_powî
;

987 
uöt32_t
 
assocütivôy
;

988 
uöt32_t
 
way
;

989 
uöt32_t
 
way_shi·
;

991 
¨m_˝15_£t_ˇche_size_£À˘i⁄
(
Àvñ
 << 1);

992 
_ARM_In°ru˘i⁄_synchr⁄iz©i⁄_b¨rõr
();

994 
ccsidr
 = 
¨m_˝15_gë_ˇche_size_id
();

995 
löe_powî
 = 
¨m_ccsidr_gë_löe_powî
(
ccsidr
);

996 
assocütivôy
 = 
¨m_ccsidr_gë_assocütivôy
(
ccsidr
);

997 
way_shi·
 = 
__buûtö_˛z
(
assocütivôy
 - 1);

999 
way
 = 0; way < 
assocütivôy
; ++way) {

1000 
uöt32_t
 
num_£ts
 = 
¨m_ccsidr_gë_num_£ts
(
ccsidr
);

1001 
uöt32_t
 
£t
;

1003 
£t
 = 0; së < 
num_£ts
; ++set) {

1004 
uöt32_t
 
£t_way
 = (
way
 << 
way_shi·
)

1005 | (
£t
 << 
löe_powî
)

1006 | (
Àvñ
 << 1);

1008 
¨m_˝15_d©a_ˇche_övÆid©e_löe_by_£t_™d_way
(
£t_way
);

1015 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1016 
¨m_˝15_d©a_ˇche_˛ón_löe
(c⁄° *
mva
)

1018 
ARM_SWITCH_REGISTERS
;

1020 
mva
 = 
ARM_CP15_CACHE_PREPARE_MVA
(mva);

1022 
__asm__
 volatile (

1023 
ARM_SWITCH_TO_ARM


1025 
ARM_SWITCH_BACK


1026 : 
ARM_SWITCH_OUTPUT


1027 : [
mva
] "r" (mva)

1032 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1033 
¨m_˝15_d©a_ˇche_˛ón_löe_by_£t_™d_way
(
uöt32_t
 
£t_™d_way
)

1035 
ARM_SWITCH_REGISTERS
;

1037 
__asm__
 volatile (

1038 
ARM_SWITCH_TO_ARM


1040 
ARM_SWITCH_BACK


1041 : 
ARM_SWITCH_OUTPUT


1042 : [
£t_™d_way
] "r" (set_and_way)

1047 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1048 
¨m_˝15_d©a_ˇche_ã°_™d_˛ón
()

1050 
ARM_SWITCH_REGISTERS
;

1052 
__asm__
 volatile (

1053 
ARM_SWITCH_TO_ARM


1057 
ARM_SWITCH_BACK


1058 : 
ARM_SWITCH_OUTPUT


1068 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1069 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e
()

1071 
ARM_SWITCH_REGISTERS
;

1073 
uöt32_t
 
sbz
 = 0;

1075 
__asm__
 volatile (

1076 
ARM_SWITCH_TO_ARM


1078 
ARM_SWITCH_BACK


1079 : 
ARM_SWITCH_OUTPUT


1080 : [
sbz
] "r" (sbz)

1085 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1086 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e_löe
(c⁄° *
mva
)

1088 
ARM_SWITCH_REGISTERS
;

1090 
mva
 = 
ARM_CP15_CACHE_PREPARE_MVA
(mva);

1092 
__asm__
 volatile (

1093 
ARM_SWITCH_TO_ARM


1095 
ARM_SWITCH_BACK


1096 : 
ARM_SWITCH_OUTPUT


1097 : [
mva
] "r" (mva)

1102 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1103 
¨m_˝15_d©a_ˇche_˛ón_™d_övÆid©e_löe_by_£t_™d_way
(
uöt32_t
 
£t_™d_way
)

1105 
ARM_SWITCH_REGISTERS
;

1107 
__asm__
 volatile (

1108 
ARM_SWITCH_TO_ARM


1110 
ARM_SWITCH_BACK


1111 : 
ARM_SWITCH_OUTPUT


1112 : [
£t_™d_way
] "r" (set_and_way)

1117 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1118 
¨m_˝15_d©a_ˇche_ã°_™d_˛ón_™d_övÆid©e
()

1120 
ARM_SWITCH_REGISTERS
;

1122 
__asm__
 volatile (

1123 
ARM_SWITCH_TO_ARM


1127 
ARM_SWITCH_BACK


1128 : 
ARM_SWITCH_OUTPUT


1136 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1137 
¨m_˝15_døö_wrôe_buf„r
()

1139 
ARM_SWITCH_REGISTERS
;

1140 
uöt32_t
 
sbz
 = 0;

1142 
__asm__
 volatile (

1143 
ARM_SWITCH_TO_ARM


1145 
ARM_SWITCH_BACK


1146 : 
ARM_SWITCH_OUTPUT


1147 : [
sbz
] "r" (sbz)

1152 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1153 
¨m_˝15_waô_f‹_öãºu±
()

1155 
ARM_SWITCH_REGISTERS
;

1156 
uöt32_t
 
sbz
 = 0;

1158 
__asm__
 volatile (

1159 
ARM_SWITCH_TO_ARM


1161 
ARM_SWITCH_BACK


1162 : 
ARM_SWITCH_OUTPUT


1163 : [
sbz
] "r" (sbz)

1168 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


1169 
¨m_˝15_gë_mu…ùro˚ss‹_afföôy
()

1171 
ARM_SWITCH_REGISTERS
;

1172 
uöt32_t
 
mpidr
;

1174 
__asm__
 volatile (

1175 
ARM_SWITCH_TO_ARM


1177 
ARM_SWITCH_BACK


1178 : [
mpidr
] "=&r" (mpidrË
ARM_SWITCH_ADDITIONAL_OUTPUT


1181  
mpidr
 & 0xff;

1184 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


1185 
¨m_c‹ãx_a9_gë_mu…ùro˚ss‹_˝u_id
()

1187  
¨m_˝15_gë_mu…ùro˚ss‹_afföôy
() & 0xff;

1190 
	#ARM_CORTEX_A9_ACTL_FW
 (1U << 0)

	)

1191 
	#ARM_CORTEX_A9_ACTL_L2_PREFETCH_HINT_ENABLE
 (1U << 1)

	)

1192 
	#ARM_CORTEX_A9_ACTL_L1_PREFETCH_ENABLE
 (1U << 2)

	)

1193 
	#ARM_CORTEX_A9_ACTL_WRITE_FULL_LINE_OF_ZEROS_MODE
 (1U << 3)

	)

1194 
	#ARM_CORTEX_A9_ACTL_SMP
 (1U << 6)

	)

1195 
	#ARM_CORTEX_A9_ACTL_EXCL
 (1U << 7)

	)

1196 
	#ARM_CORTEX_A9_ACTL_ALLOC_IN_ONE_WAY
 (1U << 8)

	)

1197 
	#ARM_CORTEX_A9_ACTL_PARITY_ON
 (1U << 9)

	)

1199 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


1200 
¨m_˝15_gë_auxûüry_c⁄åﬁ
()

1202 
ARM_SWITCH_REGISTERS
;

1203 
uöt32_t
 
vÆ
;

1205 
__asm__
 volatile (

1206 
ARM_SWITCH_TO_ARM


1208 
ARM_SWITCH_BACK


1209 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


1212  
vÆ
;

1215 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1216 
¨m_˝15_£t_auxûüry_c⁄åﬁ
(
uöt32_t
 
vÆ
)

1218 
ARM_SWITCH_REGISTERS
;

1220 
__asm__
 volatile (

1221 
ARM_SWITCH_TO_ARM


1223 
ARM_SWITCH_BACK


1224 : 
ARM_SWITCH_OUTPUT


1225 : [
vÆ
] "r" (val)

1231 
ARM_CP15_TEXT_SECTION
 
ölöe
 
uöt32_t


1232 
¨m_˝15_gë_¥o˚ss‹_„©uª_1
()

1234 
ARM_SWITCH_REGISTERS
;

1235 
uöt32_t
 
vÆ
;

1237 
__asm__
 volatile (

1238 
ARM_SWITCH_TO_ARM


1240 
ARM_SWITCH_BACK


1241 : [
vÆ
] "=&r" (vÆË
ARM_SWITCH_ADDITIONAL_OUTPUT


1244  
vÆ
;

1249 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1250 *
¨m_˝15_gë_ve˘‹_ba£_addªss
()

1252 
ARM_SWITCH_REGISTERS
;

1253 *
ba£
;

1255 
__asm__
 volatile (

1256 
ARM_SWITCH_TO_ARM


1258 
ARM_SWITCH_BACK


1259 : [
ba£
] "=&r" (ba£Ë
ARM_SWITCH_ADDITIONAL_OUTPUT


1262  
ba£
;

1265 
ARM_CP15_TEXT_SECTION
 
ölöe
 

1266 
¨m_˝15_£t_ve˘‹_ba£_addªss
(*
ba£
)

1268 
ARM_SWITCH_REGISTERS
;

1270 
__asm__
 volatile (

1271 
ARM_SWITCH_TO_ARM


1273 
ARM_SWITCH_BACK


1274 : 
ARM_SWITCH_OUTPUT


1275 : [
ba£
] "r" (base)

1284 
uöt32_t
 
¨m_˝15_£t_å™¶©i⁄_èbÀ_íåõs
(

1285 c⁄° *
begö
,

1286 c⁄° *
íd
,

1287 
uöt32_t
 
£˘i⁄_Êags


1290 
¨m_˝15_£t_ex˚±i⁄_h™dÀr
(

1291 
Arm_symbﬁic_ex˚±i⁄_«me
 
ex˚±i⁄
,

1292 (*
h™dÀr
)()

1297 #ifde‡
__˝lu•lus


	@src/lib/libcpu/arm/shared/include/cache_.h

23 #i‚de‡
LIBCPU_ARM_CACHE__H


24 
	#LIBCPU_ARM_CACHE__H


	)

26 #ifde‡
__ARM_ARCH_5TEJ__


27 
	~<lib˝u/¨m-˝15.h
>

29 
	#CPU_DATA_CACHE_ALIGNMENT
 32

	)

30 
	#CPU_INSTRUCTION_CACHE_ALIGNMENT
 32

	)

32 
ölöe
 
	$_CPU_ˇche_Êush_1_d©a_löe
(c⁄° *
d_addr
)

34 
	`¨m_˝15_d©a_ˇche_˛ón_löe
(
d_addr
);

35 
	}
}

37 
ölöe
 
	$_CPU_ˇche_övÆid©e_1_d©a_löe
(c⁄° *
d_addr
)

39 
	`¨m_˝15_d©a_ˇche_övÆid©e_löe
(
d_addr
);

40 
	}
}

42 
ölöe
 
	$_CPU_ˇche_‰ìze_d©a
()

45 
	}
}

47 
ölöe
 
	$_CPU_ˇche_un‰ìze_d©a
()

50 
	}
}

52 
ölöe
 
	$_CPU_ˇche_övÆid©e_1_ö°ru˘i⁄_löe
(c⁄° *
d_addr
)

54 
	`¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e_löe
(
d_addr
);

55 
	}
}

57 
ölöe
 
	$_CPU_ˇche_‰ìze_ö°ru˘i⁄
()

60 
	}
}

62 
ölöe
 
	$_CPU_ˇche_un‰ìze_ö°ru˘i⁄
()

65 
	}
}

67 
ölöe
 
	$_CPU_ˇche_Êush_ítúe_d©a
()

69 
	`¨m_˝15_d©a_ˇche_ã°_™d_˛ón
();

70 
	}
}

72 
ölöe
 
	$_CPU_ˇche_övÆid©e_ítúe_d©a
()

74 
	`¨m_˝15_d©a_ˇche_övÆid©e
();

75 
	}
}

77 
ölöe
 
	$_CPU_ˇche_íabÀ_d©a
()

79 
πems_öãºu±_Àvñ
 
Àvñ
;

80 
uöt32_t
 
˘æ
;

82 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

83 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

84 
˘æ
 |
ARM_CP15_CTRL_C
;

85 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

86 
	`πems_öãºu±_íabÀ
(
Àvñ
);

87 
	}
}

89 
ölöe
 
	$_CPU_ˇche_dißbÀ_d©a
()

91 
πems_öãºu±_Àvñ
 
Àvñ
;

92 
uöt32_t
 
˘æ
;

94 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

95 
	`¨m_˝15_d©a_ˇche_ã°_™d_˛ón_™d_övÆid©e
();

96 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

97 
˘æ
 &~
ARM_CP15_CTRL_C
;

98 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

99 
	`πems_öãºu±_íabÀ
(
Àvñ
);

100 
	}
}

102 
ölöe
 
	$_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
()

104 
	`¨m_˝15_ö°ru˘i⁄_ˇche_övÆid©e
();

105 
	}
}

107 
ölöe
 
	$_CPU_ˇche_íabÀ_ö°ru˘i⁄
()

109 
πems_öãºu±_Àvñ
 
Àvñ
;

110 
uöt32_t
 
˘æ
;

112 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

113 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

114 
˘æ
 |
ARM_CP15_CTRL_I
;

115 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

116 
	`πems_öãºu±_íabÀ
(
Àvñ
);

117 
	}
}

119 
ölöe
 
	$_CPU_ˇche_dißbÀ_ö°ru˘i⁄
()

121 
πems_öãºu±_Àvñ
 
Àvñ
;

122 
uöt32_t
 
˘æ
;

124 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

125 
˘æ
 = 
	`¨m_˝15_gë_c⁄åﬁ
();

126 
˘æ
 &~
ARM_CP15_CTRL_I
;

127 
	`¨m_˝15_£t_c⁄åﬁ
(
˘æ
);

128 
	`πems_öãºu±_íabÀ
(
Àvñ
);

129 
	}
}

	@src/lib/libcpu/arm/shared/include/mmu.h

10 #i‚de‡
__LIBCPU_MMU_H__


11 
	#__LIBCPU_MMU_H__


	)

13 
	~<°döt.h
>

15 
	#MMU_SECT_SIZE
 0x100000

	)

17 
	#MMU_CACHE_NONE
 0x0

	)

18 
	#MMU_CACHE_BUFFERED
 0x1

	)

19 
	#MMU_CACHE_WTHROUGH
 0x2

	)

20 
	#MMU_CACHE_WBACK
 0x3

	)

23 
uöt32_t
 
	m∑ddr
;

24 
uöt32_t
 
	mvaddr
;

25 
uöt32_t
 
	msize
;

26 
uöt8_t
 
	mˇche_Êags
;

27 } 
	tmmu_£˘_m≠_t
;

29 
mmu_öô
(
mmu_£˘_m≠_t
 *
m≠
);

30 
mmu_£t_˝u_async_mode
();

	@src/lib/libcpu/arm/shared/include/omap3.h

20 
	#OMAP3_DM37XX_INTR_BASE
 0x48200000

	)

23 
	#OMAP3_AM335X_INTR_BASE
 0x48200000

	)

26 
	#OMAP3_INTCPS_REVISION
 0x000

	)

27 
	#OMAP3_INTCPS_SYSCONFIG
 0x010

	)

28 
	#OMAP3_INTCPS_SYSSTATUS
 0x014

	)

29 
	#OMAP3_INTCPS_SIR_IRQ
 0x040

	)

30 
	#OMAP3_INTCPS_SIR_FIQ
 0x044

	)

31 
	#OMAP3_INTCPS_CONTROL
 0x048

	)

32 
	#OMAP3_INTCPS_PROTECTION
 0x04C

	)

33 
	#OMAP3_INTCPS_IDLE
 0x050

	)

34 
	#OMAP3_INTCPS_IRQ_PRIORITY
 0x060

	)

35 
	#OMAP3_INTCPS_FIQ_PRIORITY
 0x064

	)

36 
	#OMAP3_INTCPS_THRESHOLD
 0x068

	)

37 
	#OMAP3_INTCPS_ITR0
 0x080

	)

38 
	#OMAP3_INTCPS_MIR0
 0x084

	)

39 
	#OMAP3_INTCPS_MIR1
 0x0A4

	)

40 
	#OMAP3_INTCPS_MIR2
 0x0C4

	)

41 
	#OMAP3_INTCPS_MIR3
 0x0E4

	)

42 
	#OMAP3_INTCPS_MIR_CLEAR0
 0x088

	)

43 
	#OMAP3_INTCPS_MIR_SET0
 0x08C

	)

44 
	#OMAP3_INTCPS_ISR_SET0
 0x090

	)

45 
	#OMAP3_INTCPS_ISR_CLEAR0
 0x094

	)

46 
	#OMAP3_INTCPS_PENDING_IRQ0
 0x098

	)

47 
	#OMAP3_INTCPS_PENDING_IRQ1
 0x0b8

	)

48 
	#OMAP3_INTCPS_PENDING_IRQ2
 0x0d8

	)

49 
	#OMAP3_INTCPS_PENDING_IRQ3
 0x0f8

	)

50 
	#OMAP3_INTCPS_PENDING_FIQ0
 0x09C

	)

51 
	#OMAP3_INTCPS_ILR0
 0x100

	)

54 
	#OMAP3_SYSCONFIG_AUTOIDLE
 0x01

	)

56 
	#OMAP3_INTR_ITR
(
ba£
,
n
) \

57 (
ba£
 + 
OMAP3_INTCPS_ITR0
 + 0x20 * (
n
))

	)

58 
	#OMAP3_INTR_MIR
(
ba£
,
n
) \

59 (
ba£
 + 
OMAP3_INTCPS_MIR0
 + 0x20 * (
n
))

	)

60 
	#OMAP3_INTR_MIR_CLEAR
(
ba£
,
n
) \

61 (
ba£
 + 
OMAP3_INTCPS_MIR_CLEAR0
 + 0x20 * (
n
))

	)

62 
	#OMAP3_INTR_MIR_SET
(
ba£
,
n
) \

63 (
ba£
 + 
OMAP3_INTCPS_MIR_SET0
 + 0x20 * (
n
))

	)

64 
	#OMAP3_INTR_ISR_SET
(
ba£
,
n
) \

65 (
ba£
 + 
OMAP3_INTCPS_ISR_SET0
 + 0x20 * (
n
))

	)

66 
	#OMAP3_INTR_ISR_CLEAR
(
ba£
,
n
) \

67 (
ba£
 + 
OMAP3_INTCPS_ISR_CLEAR0
 + 0x20 * (
n
))

	)

68 
	#OMAP3_INTR_PENDING_IRQ
(
ba£
,
n
) \

69 (
ba£
 + 
OMAP3_INTCPS_PENDING_IRQ0
 + 0x20 * (
n
))

	)

70 
	#OMAP3_INTR_PENDING_FIQ
(
ba£
,
n
) \

71 (
ba£
 + 
OMAP3_INTCPS_PENDING_FIQ0
 + 0x20 * (
n
))

	)

72 
	#OMAP3_INTR_ILR
(
ba£
,
m
) \

73 (
ba£
 + 
OMAP3_INTCPS_ILR0
 + 0x4 * (
m
))

	)

75 
	#OMAP3_INTR_ACTIVEIRQ_MASK
 0x7‡

	)

76 
	#OMAP3_INTR_NEWIRQAGR
 0x1

	)

78 
	#OMAP3_DM337X_NR_IRQ_VECTORS
 96

	)

81 
	#OMAP3_MCBSP2_ST_IRQ
 4

	)

82 
	#OMAP3_MCBSP3_ST_IRQ
 5

	)

83 
	#OMAP3_SYS_NIRQ
 7

	)

84 
	#OMAP3_SMX_DBG_IRQ
 9

	)

85 
	#OMAP3_SMX_APP_IRQ
 10

	)

86 
	#OMAP3_PRCM_IRQ
 11

	)

87 
	#OMAP3_SDMA0_IRQ
 12

	)

88 
	#OMAP3_SDMA1_IRQ
 13

	)

89 
	#OMAP3_SDMA2_IRQ
 14

	)

90 
	#OMAP3_SDMA3_IRQ
 15

	)

91 
	#OMAP3_MCBSP1_IRQ
 16

	)

92 
	#OMAP3_MCBSP2_IRQ
 17

	)

93 
	#OMAP3_GPMC_IRQ
 20

	)

94 
	#OMAP3_SGX_IRQ
 21

	)

95 
	#OMAP3_MCBSP3_IRQ
 22

	)

96 
	#OMAP3_MCBSP4_IRQ
 23

	)

97 
	#OMAP3_CAM0_IRQ
 24

	)

98 
	#OMAP3_DSS_IRQ
 25

	)

99 
	#OMAP3_MAIL_U0_IRQ
 26

	)

100 
	#OMAP3_MCBSP5_IRQ
 27

	)

101 
	#OMAP3_IVA2_MMU_IRQ
 28

	)

102 
	#OMAP3_GPIO1_IRQ
 29

	)

103 
	#OMAP3_GPIO2_IRQ
 30

	)

104 
	#OMAP3_GPIO3_IRQ
 31

	)

105 
	#OMAP3_GPIO4_IRQ
 32

	)

106 
	#OMAP3_GPIO5_IRQ
 33

	)

107 
	#OMAP3_GPIO6_IRQ
 34

	)

108 
	#OMAP3_WDT3_IRQ
 36

	)

109 
	#OMAP3_GPT1_IRQ
 37

	)

110 
	#OMAP3_GPT2_IRQ
 38

	)

111 
	#OMAP3_GPT3_IRQ
 39

	)

112 
	#OMAP3_GPT4_IRQ
 40

	)

113 
	#OMAP3_GPT5_IRQ
 41

	)

114 
	#OMAP3_GPT6_IRQ
 42

	)

115 
	#OMAP3_GPT7_IRQ
 43

	)

116 
	#OMAP3_GPT8_IRQ
 44

	)

117 
	#OMAP3_GPT9_IRQ
 45

	)

118 
	#OMAP3_GPT10_IRQ
 46

	)

119 
	#OMAP3_GPT11_IRQ
 47

	)

120 
	#OMAP3_SPI4_IRQ
 48

	)

121 
	#OMAP3_MCBSP4_TX_IRQ
 54

	)

122 
	#OMAP3_MCBSP4_RX_IRQ
 55

	)

123 
	#OMAP3_I2C1_IRQ
 56

	)

124 
	#OMAP3_I2C2_IRQ
 57

	)

125 
	#OMAP3_HDQ_IRQ
 58

	)

126 
	#OMAP3_MCBSP1_TX_IRQ
 59

	)

127 
	#OMAP3_MCBSP1_RX_IRQ
 60

	)

128 
	#OMAP3_I2C3_IRQ
 61

	)

129 
	#OMAP3_MCBSP2_TX_IRQ
 62

	)

130 
	#OMAP3_MCBSP2_RX_IRQ
 63

	)

131 
	#OMAP3_SPI1_IRQ
 65

	)

132 
	#OMAP3_SPI2_IRQ
 66

	)

133 
	#OMAP3_UART1_IRQ
 72

	)

134 
	#OMAP3_UART2_IRQ
 73

	)

135 
	#OMAP3_UART3_IRQ
 74

	)

136 
	#OMAP3_PBIAS_IRQ
 75

	)

137 
	#OMAP3_OHCI_IRQ
 76

	)

138 
	#OMAP3_EHCI_IRQ
 77

	)

139 
	#OMAP3_TLL_IRQ
 78

	)

140 
	#OMAP3_MCBSP5_TX_IRQ
 81

	)

141 
	#OMAP3_MCBSP5_RX_IRQ
 82

	)

142 
	#OMAP3_MMC1_IRQ
 83

	)

143 
	#OMAP3_MMC2_IRQ
 86

	)

144 
	#OMAP3_ICR_IRQ
 87

	)

145 
	#OMAP3_D2DFRINT_IRQ
 88

	)

146 
	#OMAP3_MCBSP3_TX_IRQ
 89

	)

147 
	#OMAP3_MCBSP3_RX_IRQ
 90

	)

148 
	#OMAP3_SPI3_IRQ
 91

	)

149 
	#OMAP3_HSUSB_MC_IRQ
 92

	)

150 
	#OMAP3_HSUSB_DMA_IRQ
 93

	)

151 
	#OMAP3_MMC3_IRQ
 94

	)

154 
	#OMAP3_GPTIMER1_BASE
 0x48318000

	)

156 
	#OMAP3_GPTIMER2_BASE
 0x49032000

	)

158 
	#OMAP3_GPTIMER3_BASE
 0x49034000

	)

160 
	#OMAP3_GPTIMER4_BASE
 0x49036000

	)

162 
	#OMAP3_GPTIMER5_BASE
 0x49038000

	)

164 
	#OMAP3_GPTIMER6_BASE
 0x4903A000

	)

166 
	#OMAP3_GPTIMER7_BASE
 0x4903C000

	)

168 
	#OMAP3_GPTIMER8_BASE
 0x4903E000

	)

170 
	#OMAP3_GPTIMER9_BASE
 0x49040000

	)

172 
	#OMAP3_GPTIMER10_BASE
 0x48086000

	)

174 
	#OMAP3_GPTIMER11_BASE
 0x48088000

	)

179 
	#OMAP3_TIMER_TIDR
 0x000

	)

181 
	#OMAP3_TIMER_TIOCP_CFG
 0x010

	)

183 
	#OMAP3_TIMER_TISTAT
 0x014

	)

185 
	#OMAP3_TIMER_TISR
 0x018

	)

187 
	#OMAP3_TIMER_TIER
 0x01C

	)

189 
	#OMAP3_TIMER_TWER
 0x020

	)

191 
	#OMAP3_TIMER_TCLR
 0x024

	)

193 
	#OMAP3_TIMER_TCRR
 0x028

	)

195 
	#OMAP3_TIMER_TLDR
 0x02C

	)

197 
	#OMAP3_TIMER_TTGR
 0x030

	)

199 
	#OMAP3_TIMER_TWPS
 0x034

	)

201 
	#OMAP3_TIMER_TMAR
 0x038

	)

203 
	#OMAP3_TIMER_TCAR1
 0x03C

	)

205 
	#OMAP3_TIMER_TSICR
 0x040

	)

207 
	#OMAP3_TIMER_TCAR2
 0x044

	)

209 
	#OMAP3_TIMER_TPIR
 0x048

	)

211 
	#OMAP3_TIMER_TNIR
 0x04C

	)

213 
	#OMAP3_TIMER_TCVR
 0x050

	)

215 
	#OMAP3_TIMER_TOCR
 0x054

	)

217 
	#OMAP3_TIMER_TOWR
 0x058

	)

221 
	#OMAP3_TISR_MAT_IT_FLAG
 (1 << 0Ë

	)

222 
	#OMAP3_TISR_OVF_IT_FLAG
 (1 << 1Ë

	)

223 
	#OMAP3_TISR_TCAR_IT_FLAG
 (1 << 2Ë

	)

226 
	#OMAP3_TIER_MAT_IT_ENA
 (1 << 0Ë

	)

227 
	#OMAP3_TIER_OVF_IT_ENA
 (1 << 1Ë

	)

228 
	#OMAP3_TIER_TCAR_IT_ENA
 (1 << 2Ë

	)

231 
	#OMAP3_TCLR_ST
 (1 << 0Ë

	)

232 
	#OMAP3_TCLR_AR
 (1 << 1Ë

	)

233 
	#OMAP3_TCLR_PRE
 (1 << 5Ë

	)

234 
	#OMAP3_TCLR_PTV
 (1 << 1Ë

	)

235 
	#OMAP3_TCLR_OVF_TRG
 (1 << 10Ë

	)

238 
	#OMAP3_CM_CLKSEL_GFX
 0x48004b40

	)

239 
	#OMAP3_CM_CLKEN_PLL
 0x48004d00

	)

240 
	#OMAP3_CM_FCLKEN1_CORE
 0x48004A00

	)

241 
	#OMAP3_CM_CLKSEL_CORE
 0x48004A40

	)

242 
	#OMAP3_CM_FCLKEN_PER
 0x48005000

	)

243 
	#OMAP3_CM_CLKSEL_PER
 0x48005040

	)

244 
	#OMAP3_CM_CLKSEL_WKUP
 0x48004c40

	)

247 
	#CM_MODULEMODE_MASK
 (0x3 << 0)

	)

248 
	#CM_MODULEMODE_ENABLE
 (0x2 << 0)

	)

249 
	#CM_MODULEMODE_DISABLED
 (0x0 << 0)

	)

251 
	#CM_CLKCTRL_IDLEST
 (0x3 << 16)

	)

252 
	#CM_CLKCTRL_IDLEST_FUNC
 (0x0 << 16)

	)

253 
	#CM_CLKCTRL_IDLEST_TRANS
 (0x1 << 16)

	)

254 
	#CM_CLKCTRL_IDLEST_IDLE
 (0x2 << 16)

	)

255 
	#CM_CLKCTRL_IDLEST_DISABLE
 (0x3 << 16)

	)

257 
	#CM_WKUP_BASE
 0x44E00400

	)

259 
	#CM_WKUP_TIMER1_CLKCTRL
 (
CM_WKUP_BASE
 + 0xC4)

	)

262 
	#CM_PER_BASE
 0x44E00000

	)

263 
	#CM_PER_TIMER7_CLKCTRL
 (
CM_PER_BASE
 + 0x7C)

	)

268 
	#CM_DPLL_BASE
 0x44E00500

	)

270 
	#CLKSEL_TIMER1MS_CLK
 (
CM_DPLL_BASE
 + 0x28)

	)

272 
	#CLKSEL_TIMER1MS_CLK_SEL_MASK
 (0x7 << 0)

	)

273 
	#CLKSEL_TIMER1MS_CLK_SEL_SEL1
 (0x0 << 0)

	)

275 
	#CLKSEL_TIMER1MS_CLK_SEL_SEL2
 (0x1 << 0)

	)

277 
	#CLKSEL_TIMER1MS_CLK_SEL_SEL3
 (0x2 << 0)

	)

279 
	#CLKSEL_TIMER1MS_CLK_SEL_SEL4
 (0x3 << 0)

	)

281 
	#CLKSEL_TIMER1MS_CLK_SEL_SEL5
 (0x4 << 0)

	)

284 
	#CLKSEL_TIMER7_CLK
 (
CM_DPLL_BASE
 + 0x04)

	)

285 
	#CLKSEL_TIMER7_CLK_SEL_MASK
 (0x3 << 0)

	)

286 
	#CLKSEL_TIMER7_CLK_SEL_SEL1
 (0x0 << 0Ë

	)

287 
	#CLKSEL_TIMER7_CLK_SEL_SEL2
 (0x1 << 0Ë

	)

288 
	#CLKSEL_TIMER7_CLK_SEL_SEL3
 (0x2 << 0Ë

	)

289 
	#CLKSEL_TIMER7_CLK_SEL_SEL4
 (0x3 << 0Ë

	)

292 
	#CM_RTC_BASE
 0x44E00800

	)

293 
	#CM_RTC_RTC_CLKCTRL
 0x0

	)

294 
	#CM_RTC_CLKSTCTRL
 0x4

	)

297 
	#OMAP3_CLKSEL_GPT1
 (1 << 0)

	)

298 
	#OMAP3_CLKSEL_GPT10
 (1 << 6)

	)

299 
	#OMAP3_CLKSEL_GPT11
 (1 << 7)

	)

301 
	#OMAP34XX_CORE_L4_IO_BASE
 0x48000000

	)

303 
	#ARM_TTBR_ADDR_MASK
 (0xffffc000)

	)

304 
	#ARM_TTBR_OUTER_NC
 (0x0 << 3Ë

	)

305 
	#ARM_TTBR_OUTER_WBWA
 (0x1 << 3Ë

	)

306 
	#ARM_TTBR_OUTER_WT
 (0x2 << 3Ë

	)

307 
	#ARM_TTBR_OUTER_WBNWA
 (0x3 << 3Ë

	)

308 
	#ARM_TTBR_FLAGS_CACHED
 
ARM_TTBR_OUTER_WBWA


	)

312 
	#CPU_CONTROL_MMU_ENABLE
 0x00000001

	)

313 
	#CPU_CONTROL_AFLT_ENABLE
 0x00000002

	)

314 
	#CPU_CONTROL_DC_ENABLE
 0x00000004

	)

315 
	#CPU_CONTROL_WBUF_ENABLE
 0x00000008

	)

316 
	#CPU_CONTROL_32BP_ENABLE
 0x00000010

	)

317 
	#CPU_CONTROL_32BD_ENABLE
 0x00000020

	)

318 
	#CPU_CONTROL_LABT_ENABLE
 0x00000040

	)

319 
	#CPU_CONTROL_BEND_ENABLE
 0x00000080

	)

320 
	#CPU_CONTROL_SYST_ENABLE
 0x00000100

	)

321 
	#CPU_CONTROL_ROM_ENABLE
 0x00000200

	)

322 
	#CPU_CONTROL_CPCLK
 0x00000400

	)

323 
	#CPU_CONTROL_SWP_ENABLE
 0x00000400

	)

324 
	#CPU_CONTROL_BPRD_ENABLE
 0x00000800

	)

325 
	#CPU_CONTROL_IC_ENABLE
 0x00001000

	)

326 
	#CPU_CONTROL_VECRELOC
 0x00002000

	)

327 
	#CPU_CONTROL_ROUNDROBIN
 0x00004000

	)

328 
	#CPU_CONTROL_V4COMPAT
 0x00008000

	)

329 
	#CPU_CONTROL_FI_ENABLE
 0x00200000

	)

330 
	#CPU_CONTROL_UNAL_ENABLE
 0x00400000

	)

331 
	#CPU_CONTROL_XP_ENABLE
 0x00800000

	)

332 
	#CPU_CONTROL_V_ENABLE
 0x01000000

	)

333 
	#CPU_CONTROL_EX_BEND
 0x02000000

	)

334 
	#CPU_CONTROL_NMFI
 0x08000000

	)

335 
	#CPU_CONTROL_TR_ENABLE
 0x10000000

	)

336 
	#CPU_CONTROL_AF_ENABLE
 0x20000000

	)

337 
	#CPU_CONTROL_TE_ENABLE
 0x40000000

	)

339 
	#CPU_CONTROL_IDC_ENABLE
 
CPU_CONTROL_DC_ENABLE


	)

344 
	#ARM_VM_SECTION
 (1 << 1)

	)

346 
	#ARM_VM_SECTION_PRESENT
 (1 << 1)

	)

348 
	#ARM_VM_SECTION_B
 (1 << 2)

	)

350 
	#ARM_VM_SECTION_C
 (1 << 3)

	)

352 
	#ARM_VM_SECTION_DOMAIN
 (0xF << 5)

	)

354 
	#ARM_VM_SECTION_SUPER
 (0x1 << 10)

	)

356 
	#ARM_VM_SECTION_USER
 (0x3 << 10)

	)

358 
	#ARM_VM_SECTION_TEX0
 (1 << 12)

	)

360 
	#ARM_VM_SECTION_TEX1
 (1 << 13)

	)

362 
	#ARM_VM_SECTION_TEX2
 (1 << 14)

	)

364 
	#ARM_VM_SECTION_RO
 (1 << 15)

	)

366 
	#ARM_VM_SECTION_SHAREABLE
 (1 << 16)

	)

368 
	#ARM_VM_SECTION_NOTGLOBAL
 (1 << 17)

	)

371 
	#ARM_VM_SECTION_WB
 \

372 (
ARM_VM_SECTION_TEX2
 | 
ARM_VM_SECTION_TEX0
 | 
ARM_VM_SECTION_B
 )

	)

374 
	#ARM_VM_SECTION_WT
 \

375 (
ARM_VM_SECTION_TEX2
 | 
ARM_VM_SECTION_TEX1
 | 
ARM_VM_SECTION_C
 )

	)

377 
	#ARM_VM_SECTION_WTWB
 \

378 (
ARM_VM_SECTION_TEX2
 | 
ARM_VM_SECTION_TEX0
 | 
ARM_VM_SECTION_C
 )

	)

382 
	#ARM_VM_SECTION_CACHED
 
ARM_VM_SECTION_WTWB


	)

383 
	#ARM_VM_SECTION_DEVICE
 (
ARM_VM_SECTION_B
)

	)

	@src/lib/libcpu/arm/shared/include/omap_timer.h

7 
	~<°döt.h
>

9 
	som≠_timî_ªgi°îs


11 
uöt32_t
 
	mTIDR
;

12 
uöt32_t
 
	mTIOCP_CFG
;

13 
uöt32_t
 
	mTISTAT
;

14 
uöt32_t
 
	mTISR
;

15 
uöt32_t
 
	mTIER
;

16 
uöt32_t
 
	mTWER
;

17 
uöt32_t
 
	mTCLR
;

18 
uöt32_t
 
	mTCRR
;

19 
uöt32_t
 
	mTLDR
;

20 
uöt32_t
 
	mTTGR
;

21 
uöt32_t
 
	mTWPS
;

22 
uöt32_t
 
	mTMAR
;

23 
uöt32_t
 
	mTCAR1
;

24 
uöt32_t
 
	mTSICR
;

25 
uöt32_t
 
	mTCAR2
;

26 
uöt32_t
 
	mTPIR
;

27 
uöt32_t
 
	mTNIR
;

28 
uöt32_t
 
	mTCVR
;

29 
uöt32_t
 
	mTOCR
;

30 
uöt32_t
 
	mTOWR
;

32 } 
	tom≠_timî_ªgi°îs_t
;

34 
	som≠_timî


36 
uöt32_t
 
	mba£
;

37 
	múq_ƒ
;

38 
om≠_timî_ªgi°îs
 *
	mªgs
;

39 } 
	tom≠_timî_t
;

	@src/lib/libcpu/shared/include/cache.h

21 #i‚de‡
__LIBCPU_CACHE_h


22 
	#__LIBCPU_CACHE_h


	)

24 
_CPU_ˇche_Êush_1_d©a_löe
(c⁄° *
d_addr
);

25 
_CPU_ˇche_övÆid©e_1_d©a_löe
(c⁄° *
d_addr
);

26 
_CPU_ˇche_‰ìze_d©a
();

27 
_CPU_ˇche_un‰ìze_d©a
();

28 
_CPU_ˇche_övÆid©e_1_ö°ru˘i⁄_löe
(c⁄° *
d_addr
);

29 
_CPU_ˇche_‰ìze_ö°ru˘i⁄
();

30 
_CPU_ˇche_un‰ìze_ö°ru˘i⁄
();

31 
_CPU_ˇche_Êush_ítúe_d©a
();

32 
_CPU_ˇche_övÆid©e_ítúe_d©a
();

33 
_CPU_ˇche_íabÀ_d©a
();

34 
_CPU_ˇche_dißbÀ_d©a
();

35 
_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
();

36 
_CPU_ˇche_íabÀ_ö°ru˘i⁄
();

37 
_CPU_ˇche_dißbÀ_ö°ru˘i⁄
();

	@src/lib/libcpu/shared/src/cache_manager.c

42 
	~<πems.h
>

43 
	~"ˇche_.h
"

45 #i‡
deföed
(
RTEMS_SMP
)

47 
	~<πems/sc‹e/smpim∂.h
>

50 c⁄° *
	maddr
;

51 
size_t
 
	msize
;

52 } 
	tsmp_ˇche_¨ó
;

54 #i‡
deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

56 
	$smp_ˇche_d©a_Êush
(*
¨g
)

58 
smp_ˇche_¨ó
 *
¨ó
 = 
¨g
;

60 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(
¨ó
->
addr
,áªa->
size
);

61 
	}
}

63 
	$smp_ˇche_d©a_öv
(*
¨g
)

65 
smp_ˇche_¨ó
 *
¨ó
 = 
¨g
;

67 
	`πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
(
¨ó
->
addr
,áªa->
size
);

68 
	}
}

70 
	$smp_ˇche_d©a_Êush_Æl
(*
¨g
)

72 
	`πems_ˇche_Êush_ítúe_d©a
();

73 
	}
}

75 
	$smp_ˇche_d©a_öv_Æl
(*
¨g
)

77 
	`πems_ˇche_övÆid©e_ítúe_d©a
();

78 
	}
}

83 
	$πems_ˇche_Êush_mu…ùÀ_d©a_löes_¥o˚ss‹_£t
(

84 c⁄° *
addr
,

85 
size_t
 
size
,

86 c⁄° 
size_t
 
£tsize
,

87 c⁄° 
˝u_£t_t
 *
£t


90 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

91 
smp_ˇche_¨ó
 
¨ó
 = { 
addr
, 
size
 };

93 
	`_SMP_Mu…iˇ°_a˘i⁄
–
£tsize
, 
£t
, 
smp_ˇche_d©a_Êush
, &
¨ó
 );

95 
	}
}

98 
	$πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes_¥o˚ss‹_£t
(

99 c⁄° *
addr
,

100 
size_t
 
size
,

101 c⁄° 
size_t
 
£tsize
,

102 c⁄° 
˝u_£t_t
 *
£t


105 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

106 
smp_ˇche_¨ó
 
¨ó
 = { 
addr
, 
size
 };

108 
	`_SMP_Mu…iˇ°_a˘i⁄
–
£tsize
, 
£t
, 
smp_ˇche_d©a_öv
, &
¨ó
 );

110 
	}
}

113 
	$πems_ˇche_Êush_ítúe_d©a_¥o˚ss‹_£t
(

114 c⁄° 
size_t
 
£tsize
,

115 c⁄° 
˝u_£t_t
 *
£t


118 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

119 
	`_SMP_Mu…iˇ°_a˘i⁄
–
£tsize
, 
£t
, 
smp_ˇche_d©a_Êush_Æl
, 
NULL
 );

121 
	}
}

124 
	$πems_ˇche_övÆid©e_ítúe_d©a_¥o˚ss‹_£t
(

125 c⁄° 
size_t
 
£tsize
,

126 c⁄° 
˝u_£t_t
 *
£t


129 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

130 
	`_SMP_Mu…iˇ°_a˘i⁄
–
£tsize
, 
£t
, 
smp_ˇche_d©a_öv_Æl
, 
NULL
 );

132 
	}
}

146 
	$πems_ˇche_Êush_mu…ùÀ_d©a_löes
–c⁄° * 
d_addr
, 
size_t
 
n_byãs
 )

148 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

149 #i‡
	`deföed
(
CPU_CACHE_SUPPORT_PROVIDES_RANGE_FUNCTIONS
)

150 
	`_CPU_ˇche_Êush_d©a_ønge
–
d_addr
, 
n_byãs
 );

152 c⁄° * 
föÆ_addªss
;

160 if–
n_byãs
 == 0 )

164 
föÆ_addªss
 = (*)((
size_t
)
d_addr
 + 
n_byãs
 - 1);

165 
d_addr
 = (*)((
size_t
)d_add∏& ~(
CPU_DATA_CACHE_ALIGNMENT
 - 1));

166  
d_addr
 <
föÆ_addªss
 ) {

167 
	`_CPU_ˇche_Êush_1_d©a_löe
–
d_addr
 );

168 
d_addr
 = (*)((
size_t
)d_add∏+ 
CPU_DATA_CACHE_ALIGNMENT
);

172 
	}
}

182 
	$πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
–c⁄° * 
d_addr
, 
size_t
 
n_byãs
 )

184 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

185 #i‡
	`deföed
(
CPU_CACHE_SUPPORT_PROVIDES_RANGE_FUNCTIONS
)

186 
	`_CPU_ˇche_övÆid©e_d©a_ønge
–
d_addr
, 
n_byãs
 );

188 c⁄° * 
föÆ_addªss
;

196 if–
n_byãs
 == 0 )

200 
föÆ_addªss
 = (*)((
size_t
)
d_addr
 + 
n_byãs
 - 1);

201 
d_addr
 = (*)((
size_t
)d_add∏& ~(
CPU_DATA_CACHE_ALIGNMENT
 - 1));

202  
föÆ_addªss
 >
d_addr
 ) {

203 
	`_CPU_ˇche_övÆid©e_1_d©a_löe
–
d_addr
 );

204 
d_addr
 = (*)((
size_t
)d_add∏+ 
CPU_DATA_CACHE_ALIGNMENT
);

208 
	}
}

216 
	$πems_ˇche_Êush_ítúe_d©a
( )

218 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

222 
	`_CPU_ˇche_Êush_ítúe_d©a
();

224 
	}
}

232 
	$πems_ˇche_övÆid©e_ítúe_d©a
( )

234 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

239 
	`_CPU_ˇche_övÆid©e_ítúe_d©a
();

241 
	}
}

247 
size_t


248 
	$πems_ˇche_gë_d©a_löe_size
( )

250 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

251  
CPU_DATA_CACHE_ALIGNMENT
;

255 
	}
}

258 
size_t


259 
	$πems_ˇche_gë_d©a_ˇche_size
–
uöt32_t
 
Àvñ
 )

261 #i‡
	`deföed
(
CPU_CACHE_SUPPORT_PROVIDES_CACHE_SIZE_FUNCTIONS
)

262  
	`_CPU_ˇche_gë_d©a_ˇche_size
–
Àvñ
 );

266 
	}
}

273 
	$πems_ˇche_‰ìze_d©a
( )

275 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

276 
	`_CPU_ˇche_‰ìze_d©a
();

278 
	}
}

284 
	$πems_ˇche_un‰ìze_d©a
( )

286 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

287 
	`_CPU_ˇche_un‰ìze_d©a
();

289 
	}
}

294 
	$πems_ˇche_íabÀ_d©a
( )

296 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

297 
	`_CPU_ˇche_íabÀ_d©a
();

299 
	}
}

304 
	$πems_ˇche_dißbÀ_d©a
( )

306 #i‡
	`deföed
(
CPU_DATA_CACHE_ALIGNMENT
)

307 
	`_CPU_ˇche_dißbÀ_d©a
();

309 
	}
}

317 #i‡
deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
) \

318 && 
deföed
(
RTEMS_SMP
) \

319 && 
	$deföed
(
CPU_CACHE_NO_INSTRUCTION_CACHE_SNOOPING
)

321 
	$smp_ˇche_ö°_öv
(*
¨g
)

323 
smp_ˇche_¨ó
 *
¨ó
 = 
¨g
;

325 
	`_CPU_ˇche_övÆid©e_ö°ru˘i⁄_ønge
(
¨ó
->
addr
,áªa->
size
);

326 
	}
}

328 
	$smp_ˇche_ö°_öv_Æl
(*
¨g
)

330 
	`_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
();

331 
	}
}

341 #i‡
deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
) \

342 && !
	$deföed
(
CPU_CACHE_SUPPORT_PROVIDES_RANGE_FUNCTIONS
)

344 
	$_CPU_ˇche_övÆid©e_ö°ru˘i⁄_ønge
(

345 c⁄° * 
i_addr
,

346 
size_t
 
n_byãs


349 c⁄° * 
föÆ_addªss
;

357 if–
n_byãs
 == 0 )

361 
föÆ_addªss
 = (*)((
size_t
)
i_addr
 + 
n_byãs
 - 1);

362 
i_addr
 = (*)((
size_t
)i_add∏& ~(
CPU_INSTRUCTION_CACHE_ALIGNMENT
 - 1));

363  
föÆ_addªss
 >
i_addr
 ) {

364 
	`_CPU_ˇche_övÆid©e_1_ö°ru˘i⁄_löe
–
i_addr
 );

365 
i_addr
 = (*)((
size_t
)i_add∏+ 
CPU_INSTRUCTION_CACHE_ALIGNMENT
);

367 
	}
}

371 
	$πems_ˇche_övÆid©e_mu…ùÀ_ö°ru˘i⁄_löes
(

372 c⁄° * 
i_addr
,

373 
size_t
 
n_byãs


376 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

377 #i‡
	`deföed
(
RTEMS_SMP
Ë&& deföed(
CPU_CACHE_NO_INSTRUCTION_CACHE_SNOOPING
)

378 
smp_ˇche_¨ó
 
¨ó
 = { 
i_addr
, 
n_byãs
 };

380 
	`_SMP_Mu…iˇ°_a˘i⁄
–0, 
NULL
, 
smp_ˇche_ö°_öv
, &
¨ó
 );

382 
	`_CPU_ˇche_övÆid©e_ö°ru˘i⁄_ønge
–
i_addr
, 
n_byãs
 );

385 
	}
}

393 
	$πems_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
( )

395 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

396 #i‡
	`deföed
(
RTEMS_SMP
Ë&& deföed(
CPU_CACHE_NO_INSTRUCTION_CACHE_SNOOPING
)

397 
	`_SMP_Mu…iˇ°_a˘i⁄
–0, 
NULL
, 
smp_ˇche_ö°_öv_Æl
, NULL );

399 
	`_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
();

402 
	}
}

408 
size_t


409 
	$πems_ˇche_gë_ö°ru˘i⁄_löe_size
( )

411 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

412  
CPU_INSTRUCTION_CACHE_ALIGNMENT
;

416 
	}
}

419 
size_t


420 
	$πems_ˇche_gë_ö°ru˘i⁄_ˇche_size
–
uöt32_t
 
Àvñ
 )

422 #i‡
	`deföed
(
CPU_CACHE_SUPPORT_PROVIDES_CACHE_SIZE_FUNCTIONS
)

423  
	`_CPU_ˇche_gë_ö°ru˘i⁄_ˇche_size
–
Àvñ
 );

427 
	}
}

435 
	$πems_ˇche_‰ìze_ö°ru˘i⁄
( )

437 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

438 
	`_CPU_ˇche_‰ìze_ö°ru˘i⁄
();

440 
	}
}

446 
	$πems_ˇche_un‰ìze_ö°ru˘i⁄
( )

448 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

449 
	`_CPU_ˇche_un‰ìze_ö°ru˘i⁄
();

451 
	}
}

456 
	$πems_ˇche_íabÀ_ö°ru˘i⁄
( )

458 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

459 
	`_CPU_ˇche_íabÀ_ö°ru˘i⁄
();

461 
	}
}

466 
	$πems_ˇche_dißbÀ_ö°ru˘i⁄
( )

468 #i‡
	`deföed
(
CPU_INSTRUCTION_CACHE_ALIGNMENT
)

469 
	`_CPU_ˇche_dißbÀ_ö°ru˘i⁄
();

471 
	}
}

	@src/lib/libcpu/shared/src/no_cache.c

5 
	~<πems.h
>

6 
	~"ˇche_.h
"

18 
	$_CPU_ˇche_‰ìze_d©a
 ( Ë{
	}
}

19 
	$_CPU_ˇche_un‰ìze_d©a
 ( Ë{
	}
}

20 
	$_CPU_ˇche_‰ìze_ö°ru˘i⁄
 ( Ë{
	}
}

21 
	$_CPU_ˇche_un‰ìze_ö°ru˘i⁄
 ( Ë{
	}
}

23 
	$_CPU_ˇche_Êush_1_d©a_löe
 (

24 c⁄° * 
d_addr
 )

26 
	}
}

28 
	$_CPU_ˇche_övÆid©e_1_d©a_löe
 (

29 c⁄° * 
d_addr
 )

31 
	}
}

33 
	$_CPU_ˇche_Êush_ítúe_d©a
 ( )

35 
	}
}

37 
	$_CPU_ˇche_övÆid©e_ítúe_d©a
 ( )

39 
	}
}

41 
	$_CPU_ˇche_íabÀ_d©a
 ( )

43 
	}
}

45 
	$_CPU_ˇche_dißbÀ_d©a
 ( )

47 
	}
}

49 
	$_CPU_ˇche_övÆid©e_1_ö°ru˘i⁄_löe
 (

50 c⁄° * 
i_addr
 )

52 
	}
}

54 
	$_CPU_ˇche_övÆid©e_ítúe_ö°ru˘i⁄
 ( )

56 
	}
}

58 
	$_CPU_ˇche_íabÀ_ö°ru˘i⁄
 ( )

60 
	}
}

62 
	$_CPU_ˇche_dißbÀ_ö°ru˘i⁄
 ( )

64 
	}
}

	@src/libchip/display/disp_fonts.h

21 #i‚de‡
DISP_FONTS_H


22 
	#DISP_FONTS_H


	)

24 
	~<πems.h
>

26 
öt8_t
 
	tdi•_f⁄t_dimí
;

28 
	sdi•_f⁄t_boundög_box


30 
di•_f⁄t_dimí
 
	mw
, 
	mh
, 
	mx
, 
	my
;

33 
	sdi•_f⁄t_glyph


35 
di•_f⁄t_boundög_box
 
	mbb
;

36 
di•_f⁄t_dimí
 
	mwx
, 
	mwy
;

37 c⁄° *
	mbôm≠
;

40 
	sdi•_f⁄t_ba£


42 
öt8_t
 
	må™s
;

43 
di•_f⁄t_boundög_box
 
	mfbb
;

44 
di•_f⁄t_dimí
 
	mas˚¡
, 
	mdes˚¡
;

45 
uöt8_t
 
	mdeÁu…_ch¨
;

46 
di•_f⁄t_glyph
 *
	mœtö1
[256];

49 
di•_f⁄t_ba£
 *
	tdi•_f⁄t_t
;

	@src/libchip/display/disp_hcms29xx.c

21 
	~<°rög.h
>

22 
	~<°dlib.h
>

24 
	~<πems.h
>

25 
	~<πems/libio.h
>

26 
	~<b•.h
>

27 
	~<πems/libi2c.h
>

28 
	~<libchù/di•_hcms29xx.h
>

29 
	~"f⁄t_hcms29xx.h
"

30 
	#FONT_BASE
 
f⁄t_hcms29xx_ba£


	)

33 
	#DISP_HCMS29XX_DIGIT_CNT
 (4)

	)

34 
	#DISP_HCMS29XX_SEMA_NAME
 
	`πems_buûd_«me
('D','4','I','Q')

	)

35 
	#DISP_HCMS29XX_TRNS_SEMA_NAME
 
	`πems_buûd_«me
('D','4','T','R')

	)

36 
	#DISP_HCMS29XX_TIMER_NAME
 
	`πems_buûd_«me
('D','4','T','M')

	)

37 
	#DISP_HCMS29XX_TASK_NAME
 
	`πems_buûd_«me
('D','4','T','A')

	)

39 
	#DISP_HCMS29XX_EVENT_TIMER
 
RTEMS_EVENT_1


	)

40 
	#DISP_HCMS29XX_EVENT_NEWSTR
 
RTEMS_EVENT_2


	)

43 
di•_f⁄t_t
 
	gdi•_hcms29xx_f⁄t_n‹mÆ
;

44 
di•_f⁄t_t
 
	gdi•_hcms29xx_f⁄t_rŸ©e
;

45 c⁄° 
πems_libi2c_t‰_mode_t
 
	g•i_di•hcms29xx_t‰_mode
 = {

46 .
baudøã
 = 1000000,

47 .
	gbôs_≥r_ch¨
 = 8,

48 .
	glsb_fú°
 = 
åue
,

49 .
	g˛ock_öv
 = 
åue
,

50 .
	g˛ock_phs
 = 
åue
,

51 .
	gidÀ_ch¨
 = 0

54 
di•_hcms29xx_drv_t
 
	gdi•_hcms29xx_drv_tbl
;

63 
πems_°©us_code
 
	gdi•_hcms29xx_f⁄t_°ru˘_size


71 
di•_f⁄t_t
 
	g§c
,

72 
size_t
 *
	gd°_size


80 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

81 
size_t
 
	gf⁄t_size
 = 0;

82 
size_t
 
	gglyph_idx
;

86 i‡((
	grc
 =
RTEMS_SUCCESSFUL
) &&

87 (
§c
 =
NULL
)) {

88 
rc
 = 
RTEMS_INVALID_ADDRESS
;

90 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

91 
f⁄t_size
 =

92 (*
§c
);

94 
	gglyph_idx
 = 0;

95 (
	grc
 =
RTEMS_SUCCESSFUL
) &&

96 (
glyph_idx
 < ((
§c
->
œtö1
)/(src->latin1[0])))) {

97 i‡(
§c
->
œtö1
[
glyph_idx
] !
NULL
) {

98 
f⁄t_size
 +(*(
§c
->
œtö1
[
glyph_idx
]))

99 + (
size_t
Ë
§c
->
œtö1
[
glyph_idx
]->
bb
.
w
;

101 
	gglyph_idx
++;

103 *
	gd°_size
 = 
f⁄t_size
;

105  
	grc
;

111 
ölöe
 
	gdi•_hcms29xx_bôsw≠


119 
	gbyã


126 
	gªsu…
 = 0;

127 
	gsmsk
,
	gdmsk
;

128 
	gsmsk
 = 0x01,
	gdmsk
=0x80;

129 
	gsmsk
 < 0x100;

130 
	gsmsk
<<=1 ,
	gdmsk
>>=1) {

131 i‡((
byã
 & 
smsk
) != 0) {

132 
ªsu…
 |(Ë
dmsk
;

135  
	gªsu…
;

141 
πems_°©us_code
 
	gdi•_hcms29xx_c›y_f⁄t


149 
di•_f⁄t_t
 
	g§c
,

150 
di•_f⁄t_ba£
 *
	gd°
,

151 
	gshi·_˙t
,

152 
boﬁ
 
	gdo_rŸ©e


160 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

161 *
	gÆloc_√xt
 = (*)
d°
;

162 
size_t
 
	gglyph_idx
 = 0;

163 
	gglyph_size
;

164 
	gbyã
;

165 
	gb˙t
;

170 i‡((
	grc
 =
RTEMS_SUCCESSFUL
) &&

171 ((
§c
 =
NULL
) ||

172 (
d°
 =
NULL
))) {

173 
rc
 = 
RTEMS_INVALID_ADDRESS
;

178 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

179 *
d°
 = *
§c
;

180 
	gÆloc_√xt
 +(*
d°
);

185 
	gglyph_idx
 = 0;

186 (
	grc
 =
RTEMS_SUCCESSFUL
) &&

187 
glyph_idx
 < ((
§c
->
œtö1
)/(src->latin1[0]))) {

188 i‡(
§c
->
œtö1
[
glyph_idx
] !
NULL
) {

192 
d°
->
œtö1
[
glyph_idx
] = (
di•_f⁄t_glyph
 *)
Æloc_√xt
;

193 
	gÆloc_√xt
 +(*(
d°
->
œtö1
[
glyph_idx
]));

198 *(
	gdi•_f⁄t_glyph
 *)(
	gd°
->
	gœtö1
[
glyph_idx
]) =

199 *(
§c
->
œtö1
[
glyph_idx
]);

202 
	gd°
->
	gœtö1
[
glyph_idx
] = 
NULL
;

204 
	gglyph_idx
++;

210 
	gglyph_idx
 = 0;

211 (
	grc
 =
RTEMS_SUCCESSFUL
) &&

212 
glyph_idx
 < ((
§c
->
œtö1
)/(src->latin1[0]))) {

213 i‡(
§c
->
œtö1
[
glyph_idx
] !
NULL
) {

214 
glyph_size
 = 
§c
->
œtö1
[
glyph_idx
]->
bb
.
w
;

218 
	gd°
->
	gœtö1
[
glyph_idx
]->
	gbôm≠
 = (c⁄° *Ë
Æloc_√xt
;

219 
	gÆloc_√xt
 +
glyph_size
;

223 
	gb˙t
 = 0;b˙à< 
	gglyph_size
;bcnt++) {

224 i‡(
	gdo_rŸ©e
) {

225 
	gbyã
 = 
§c
->
œtö1
[
glyph_idx
]->
bôm≠
[
glyph_size
 - 1 - 
b˙t
];

226 
	gbyã
 = 
di•_hcms29xx_bôsw≠
(
byã
);

229 
	gbyã
 = 
§c
->
œtö1
[
glyph_idx
]->
bôm≠
[
b˙t
];

231 i‡(
	gshi·_˙t
 < 0) {

232 
	gbyã
 = 
byã
 >> 
shi·_˙t
;

234 i‡(
	gshi·_˙t
 > 0) {

235 
	gbyã
 = 
byã
 >> 
shi·_˙t
;

237 ((*)(
	gd°
->
	gœtö1
[
glyph_idx
]->
	gbôm≠
))[
b˙t
] = 
byã
;

240 
	gglyph_idx
++;

242  
	grc
;

248 
πems_°©us_code
 
	gdi•_hcms29xx_Æloc_c›y_f⁄t


256 c⁄° 
di•_f⁄t_t
 
	g§c
,

257 
di•_f⁄t_t
 *
	gd°
,

258 
	gshi·_˙t
,

259 
boﬁ
 
	gdo_rŸ©e


267 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

268 
size_t
 
	g§c_size
 = 0;

272 i‡((
	grc
 =
RTEMS_SUCCESSFUL
) &&

273 ((
§c
 =
NULL
)

274 || (
d°
 =
NULL
))) {

275 
rc
 = 
RTEMS_INVALID_ADDRESS
;

280 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

281 
rc
 = 
di•_hcms29xx_f⁄t_°ru˘_size
(
§c
,&
§c_size
);

286 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

287 *
d°
 = 
mÆloc
(
§c_size
);

288 i‡(*
	gd°
 =
NULL
) {

289 
rc
 = 
RTEMS_UNSATISFIED
;

295 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

296 
rc
 = 
di•_hcms29xx_c›y_f⁄t
(
§c
,*
d°
,
shi·_˙t
,
do_rŸ©e
);

298  
	grc
;

308 
πems_°©us_code
 
	gdi•_hcms29xx_£nd_to_di•œy


317 
di•_hcms29xx_drv_t
 *
	gso·c_±r
,

318 c⁄° vﬁ©ûê*
	gdi•_buf„r


325 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

326 
boﬁ
 
	gch¨_avaû
;

327 c⁄° 
di•_f⁄t_glyph
 *
	gglyph_±r
;

328 
di•_f⁄t_t
 
	gcuº_f⁄t
;

329 
	gi
, 
	gªt_˙t
;

330 
	gc
;

335 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

336 
rc
 = 
πems_libi2c_£nd_°¨t
(
so·c_±r
->
di•_∑øm
.
mö‹
);

341 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

342 
rc
 = -
πems_libi2c_io˘l
(
so·c_±r
->
di•_∑øm
.
mö‹
,

343 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
,

344 &
•i_di•hcms29xx_t‰_mode
);

350 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

351 
rc
 = 
πems_libi2c_£nd_addr
(
so·c_±r
->
di•_∑øm
.
mö‹
,
åue
);

357 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

358 
cuº_f⁄t
 =

359 
so·c_±r
->
di•_∑øm
.
rŸ©e


360 ? 
di•_hcms29xx_f⁄t_rŸ©e


361 : 
di•_hcms29xx_f⁄t_n‹mÆ
;

363 
	gch¨_avaû
 = 
åue
;

369 
	gi
 = 0;

370 ((
	grc
 =
RTEMS_SUCCESSFUL
) &&

371 (
i
 < 
DISP_HCMS29XX_DIGIT_CNT
));

372 
	gi
++) {

374 
	gc
 = 
di•_buf„r
[
i
];

375 i‡(
	gch¨_avaû
 && (
	gc
 == '\0')) {

376 
ch¨_avaû
 = 
Ál£
;

378 
	gglyph_±r
 = (
ch¨_avaû


379 ? 
cuº_f⁄t
->
œtö1
[
c
]

380 : 
NULL
);

381 i‡(
	gglyph_±r
 =
NULL
) {

382 
glyph_±r
 = 
cuº_f⁄t
->
œtö1
[' '];

388 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

389 
ªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
so·c_±r
->
di•_∑øm
.
mö‹
,

390 
glyph_±r
->
bôm≠
,5);

391 i‡(
	gªt_˙t
 < 0) {

392 
	grc
 = -
ªt_˙t
;

400 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

401 
rc
 = 
πems_libi2c_£nd_°›
(
so·c_±r
->
di•_∑øm
.
mö‹
);

404  
	grc
;

410 
πems_°©us_code
 
	gdi•_hcms29xx_£nd_to_c⁄åﬁ


419 
di•_hcms29xx_drv_t
 *
	gso·c_±r
,

420 
	gpwm
,

421 
	g≥ak
,

422 
	g¶ìp
,

423 
	gdiv
,

424 
	gchaö


431 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

432 
	grun
, 
	gªt_˙t
;

433 
uöt8_t
 
	g˘æ_buf„r
;

436 
	grun
 = 0;

437 ((
	grc
 =
RTEMS_SUCCESSFUL
Ë&& (
run
 <= 1));

438 
	grun
++) {

439 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

440 i‡(
run
 == 0) {

441 
˘æ_buf„r
 =

443 ((
¶ìp
 & 0x01) << 6) |

444 ((
≥ak
 & 0x03) << 4) |

445 ((
pwm
 & 0x0f) << 0);

448 
	g˘æ_buf„r
 =

450 ((
div
 & 0x01) << 1) |

451 ((
chaö
 & 0x01) << 0);

456 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

457 
rc
 = 
πems_libi2c_£nd_°¨t
(
so·c_±r
->
di•_∑øm
.
mö‹
);

462 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

463 
rc
 = -
πems_libi2c_io˘l
(
so·c_±r
->
di•_∑øm
.
mö‹
,

464 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
,

465 &
•i_di•hcms29xx_t‰_mode
);

471 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

472 
rc
 = 
πems_libi2c_£nd_addr
(
so·c_±r
->
di•_∑øm
.
mö‹
,
åue
);

478 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

479 
ªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
so·c_±r
->
di•_∑øm
.
mö‹
,

480 &
˘æ_buf„r
,1);

481 i‡(
	gªt_˙t
 < 0) {

482 
	grc
 = -
ªt_˙t
;

491 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

492 
rc
 = 
πems_libi2c_£nd_°›
(
so·c_±r
->
di•_∑øm
.
mö‹
);

495  
	grc
;

501 
πems_timî_£rvi˚_routöe
 
	gdi•_hcms29xx_timî_§


509 
πems_id
 
	gid
,

510 * 
	g¨g


517 
di•_hcms29xx_drv_t
 *
	gso·c_±r
 = 
¨g
;

519 
πems_evít_£nd
(
so·c_±r
->
di•_∑øm
.
èsk_id
, 
DISP_HCMS29XX_EVENT_TIMER
);

525 
πems_èsk
 
	gdi•_hcms29xx_upd©e_èsk


533 
πems_èsk_¨gumít
 
	g¨gumít


540 
πems_evít_£t
 
	gmy_evíts
;

541 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

542 
	gdi•_off£t
 = 0;

543 
πems_id
 
	gdi•_hcms29xx_timî_id
;

544 
di•_hcms29xx_drv_t
 *
	gso·c_±r
 = &
di•_hcms29xx_drv_tbl
;

553 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

554 
rc
 = 
di•_hcms29xx_£nd_to_c⁄åﬁ
(
so·c_±r
,

561 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

562 
rc
 = 
di•_hcms29xx_£nd_to_di•œy
(
so·c_±r
,

569 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

570 
rc
 = 
πems_timî_¸óã
(
DISP_HCMS29XX_TIMER_NAME
,

571 &
di•_hcms29xx_timî_id
);

574 
	grc
 =
RTEMS_SUCCESSFUL
) {

578 
rc
 = 
πems_evít_ª˚ive
(
DISP_HCMS29XX_EVENT_NEWSTR
 |

579 
DISP_HCMS29XX_EVENT_TIMER
 ,

580 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

581 
RTEMS_NO_TIMEOUT
,

582 &
my_evíts
);

583 i‡(
	gmy_evíts
 & 
	gDISP_HCMS29XX_EVENT_NEWSTR
) {

587 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

588 
rc
 = 
πems_£m≠h‹e_obèö
(
so·c_±r
->
di•_∑øm
.
åns_£ma_id
,

589 
RTEMS_WAIT
,
RTEMS_NO_TIMEOUT
);

591 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

592 
°∫˝y
(
so·c_±r
->
di•_∑øm
.
di•_buf„r
,

593 
so·c_±r
->
di•_∑øm
.
åns_buf„r
,

594 (
so·c_±r
->
di•_∑øm
.
di•_buf„r
));

595 
	gso·c_±r
->
	gdi•_∑øm
.
	gdi•_buf„r
[(
so·c_±r
->
di•_∑øm
.
di•_buf„r
)-1] = '\0';

596 
	gso·c_±r
->
	gdi•_∑øm
.
	gdi•_buf_˙t
 =

597 (Ë
°æí
(
so·c_±r
->
di•_∑øm
.
di•_buf„r
);

599 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

600 
rc
 = 
πems_£m≠h‹e_ªÀa£
(
so·c_±r
->
di•_∑øm
.
åns_£ma_id
);

606 
	gdi•_off£t
 = -4;

608 i‡(
	gmy_evíts
 & 
	gDISP_HCMS29XX_EVENT_TIMER
) {

612 i‡((
	gdi•_off£t
 < 0) ||

613 (
	gdi•_off£t
 < 
	gso·c_±r
->
	gdi•_∑øm
.
	gdi•_buf_˙t
-

614 
	gDISP_HCMS29XX_DIGIT_CNT
/2)) {

615 
	gdi•_off£t
++;

618 
	gdi•_off£t
 = -4;

624 i‡(
	gdi•_off£t
 < 0) {

625 
	grc
 = 
di•_hcms29xx_£nd_to_di•œy
(
so·c_±r
,

626 
so·c_±r
->
di•_∑øm
.
di•_buf„r
);

628 i‡(
	gdi•_off£t


629 < (
	gso·c_±r
->
	gdi•_∑øm
.
	gdi•_buf_˙t
 - 
	gDISP_HCMS29XX_DIGIT_CNT
)) {

630 
	grc
 = 
di•_hcms29xx_£nd_to_di•œy
(
so·c_±r
,

631 
so·c_±r
->
di•_∑øm
.
di•_buf„r
+
di•_off£t
);

634 
	grc
 = 
di•_hcms29xx_£nd_to_di•œy
(
so·c_±r
,

635 
so·c_±r
->
di•_∑øm
.
di•_buf„r


636 + 
so·c_±r
->
di•_∑øm
.
di•_buf_˙t


637 - 
DISP_HCMS29XX_DIGIT_CNT
);

642 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

643 i‡(
so·c_±r
->
di•_∑øm
.
di•_buf_˙t
 > 
DISP_HCMS29XX_DIGIT_CNT
) {

644 
rc
 = 
πems_timî_fúe_a·î
(
di•_hcms29xx_timî_id
,

646 
di•_hcms29xx_timî_§
,

647 
NULL
);

650 
	grc
 = 
πems_timî_ˇn˚l
(
di•_hcms29xx_timî_id
);

662 
πems_°©us_code
 
	gdi•_hcms29xx_upd©e


670 
di•_hcms29xx_drv_t
 *
	gso·c_±r
,

671 c⁄° *
	g§c


678 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

683 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

684 
rc
 = 
πems_£m≠h‹e_obèö
(
so·c_±r
->
di•_∑øm
.
åns_£ma_id
,

685 
RTEMS_WAIT
,
RTEMS_NO_TIMEOUT
);

690 
°∫˝y
(
so·c_±r
->
di•_∑øm
.
åns_buf„r
,
§c
,

691 (
so·c_±r
->
di•_∑øm
.
åns_buf„r
));

692 
	gso·c_±r
->
	gdi•_∑øm
.
	gåns_buf„r
[(
so·c_±r
->
di•_∑øm
.
åns_buf„r
)-1] = '\0';

697 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

698 
rc
 = 
πems_£m≠h‹e_ªÀa£
(
so·c_±r
->
di•_∑øm
.
åns_£ma_id
);

704 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

705 
rc
 = 
πems_evít_£nd
(
so·c_±r
->
di•_∑øm
.
èsk_id
,

706 
DISP_HCMS29XX_EVENT_NEWSTR
);

709  
	grc
;

715 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_öôülize


724 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

725 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

726 *
	g¨g


736 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

737 
di•_hcms29xx_drv_t
 *
	gso·c_±r
 = &
di•_hcms29xx_drv_tbl
;

747 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

748 
rc
 = 
di•_hcms29xx_Æloc_c›y_f⁄t
(

749 &
FONT_BASE
,

750 &
di•_hcms29xx_f⁄t_n‹mÆ
,

751 
FONT_BASE
.
des˚¡
,

752 
FALSE
);

755 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

756 
rc
 = 
di•_hcms29xx_Æloc_c›y_f⁄t
(&
FONT_BASE
,

757 &
di•_hcms29xx_f⁄t_rŸ©e
,

759 
åue
);

764 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

765 
rc
 = 
πems_£m≠h‹e_¸óã
 (
DISP_HCMS29XX_TRNS_SEMA_NAME
,1,

766 
RTEMS_PRIORITY


767 |
RTEMS_BINARY_SEMAPHORE


768 |
RTEMS_INHERIT_PRIORITY


769 |
RTEMS_NO_PRIORITY_CEILING


770 |
RTEMS_LOCAL
,

772 &
so·c_±r
->
di•_∑øm
.
åns_£ma_id
);

778 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

779 
rc
 = 
πems_èsk_¸óã
(
DISP_HCMS29XX_TASK_NAME
,

781 
RTEMS_MINIMUM_STACK_SIZE
,

782 
RTEMS_INTERRUPT_LEVEL
(0Ë| 
RTEMS_TIMESLICE
,

783 
RTEMS_DEFAULT_ATTRIBUTES
,

784 &
so·c_±r
->
di•_∑øm
.
èsk_id
);

786 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

787 
rc
 = 
πems_èsk_°¨t
(
so·c_±r
->
di•_∑øm
.
èsk_id
,

788 
di•_hcms29xx_upd©e_èsk
,0);

790  
	grc
;

796 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_›í


804 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

805 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

806 *
	g¨g


813 
di•_hcms29xx_drv_t
 *
	gso·c_±r
 = &
di•_hcms29xx_drv_tbl
;

817 
	gso·c_±r
->
	gdi•_∑øm
.
	gdev_buf_˙t
 = 0;

819  
	gRTEMS_SUCCESSFUL
;

825 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_wrôe


833 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

834 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

835 *
	g¨g


842 
πems_libio_rw_¨gs_t
 *
	g¨gs
 = 
¨g
;

843 
uöt32_t
 
	g˙t
;

844 
di•_hcms29xx_drv_t
 *
	gso·c_±r
 = &
di•_hcms29xx_drv_tbl
;

846 
	g˙t
 = 0;˙à< 
	g¨gs
->
	gcou¡
;cnt++) {

850 i‡(((
	gso·c_±r
->
	gdi•_∑øm
.
	gdev_buf_˙t
 > 0)

851 &&((
	g¨gs
->
	gbuf„r
[
˙t
] == '\n')

852 || (
¨gs
->
buf„r
[
˙t
] == '\0'))

854 ||–
so·c_±r
->
di•_∑øm
.
dev_buf_˙t
 >=

855 (Ë(
so·c_±r
->
di•_∑øm
.
dev_buf„r
) - 1)) {

856 
so·c_±r
->
di•_∑øm
.
dev_buf„r
[so·c_±r->di•_∑øm.
dev_buf_˙t
] = '\0';

860 
di•_hcms29xx_upd©e
(
so·c_±r
,so·c_±r->
di•_∑øm
.
dev_buf„r
);

861 
	gso·c_±r
->
	gdi•_∑øm
.
	gdev_buf_˙t
 = 0;

866 i‡((
	g¨gs
->
	gbuf„r
[
˙t
] != '\n') &&

867 (
¨gs
->
buf„r
[
˙t
] != '\0')) {

868 
so·c_±r
->
di•_∑øm
.
dev_buf„r
[so·c_±r->di•_∑øm.
dev_buf_˙t
++] =

869 
¨gs
->
buf„r
[
˙t
];

872 
	g¨gs
->
	gbyãs_moved
 = 
¨gs
->
cou¡
;

874  
	gRTEMS_SUCCESSFUL
;

880 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_˛o£


888 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

889 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

890 *
	g¨g


898  
	gRTEMS_SUCCESSFUL
;

904 
πems_drivî_addªss_èbÀ
 
	gdi•_hcms29xx_›s
 = {

905 .
öôüliz©i⁄_íåy
 = 
di•_hcms29xx_dev_öôülize
,

906 .
	g›í_íåy
 = 
di•_hcms29xx_dev_›í
,

907 .
	gwrôe_íåy
 = 
di•_hcms29xx_dev_wrôe
,

908 .
	g˛o£_íåy
 = 
di•_hcms29xx_dev_˛o£


912 
di•_hcms29xx_drv_t
 
	gdi•_hcms29xx_drv_tbl
 = {

914 .
›s
 = &
di•_hcms29xx_›s
,

915 .
	gsize
 =  (
di•_hcms29xx_drv_t
),

926 
	gÁl£


930 
πems_libi2c_drv_t
 *
	gdi•_hcms29xx_drivî_des¸ùt‹
 =

931 &
di•_hcms29xx_drv_tbl
.
libi2c_drv_íåy
;

	@src/libchip/display/disp_hcms29xx.h

21 #i‚de‡
_DISP_HCMS29XX_H


22 
	#_DISP_HCMS29XX_H


	)

23 
	~<πems.h
>

24 
	~<time.h
>

26 #ifde‡
__˝lu•lus


29 
	#DISP_HCMS29XX_TEXT_CNT
 (128)

	)

32 
πems_devi˚_mö‹_numbî
 
mö‹
;

36 
di•_buf„r
[
DISP_HCMS29XX_TEXT_CNT
];

37 
di•_buf_˙t
;

41 
åns_buf„r
[
DISP_HCMS29XX_TEXT_CNT
];

45 
dev_buf„r
[
DISP_HCMS29XX_TEXT_CNT
];

46 
dev_buf_˙t
;

48 
πems_id
 
åns_£ma_id
;

49 
πems_id
 
èsk_id
;

50 
boﬁ
 
rŸ©e
;

51 } 
	t•i_di•_hcms29xx_∑øm_t
;

54 
πems_libi2c_drv_t
 
libi2c_drv_íåy
;

55 
•i_di•_hcms29xx_∑øm_t
 
di•_∑øm
;

56 } 
	tdi•_hcms29xx_drv_t
;

60 
πems_libi2c_drv_t
 *
di•_hcms29xx_drivî_des¸ùt‹
;

65 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_öôülize


74 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

75 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

76 *
	g¨g


86 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_›í


94 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

95 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

96 *
	g¨g


106 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_wrôe


114 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

115 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

116 *
	g¨g


126 
πems_devi˚_drivî
 
	gdi•_hcms29xx_dev_˛o£


134 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

135 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

136 *
	g¨g


143 
	#DISP_HCMS29XX_DRIVER
 { \

144 
di•_hcms29xx_dev_öôülize
, \

145 
di•_hcms29xx_dev_›í
, \

146 
NULL
, \

147 
di•_hcms29xx_dev_wrôe
, \

148 
NULL
, \

149 
di•_hcms29xx_dev_˛o£
}

	)

152 #ifde‡
__˝lu•lus


	@src/libchip/display/font_hcms29xx.c

20 
	~<°ddef.h
>

21 
	~"di•_f⁄ts.h
"

23 c⁄° 
	gbôm≠_hp_fixed_5_7_0
 [5] = {

30 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_0
 = {

32 5, 0, 
bôm≠_hp_fixed_5_7_0
,

35 c⁄° 
	gbôm≠_hp_fixed_5_7_1
 [5] = {

42 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_1
 = {

44 5, 0, 
bôm≠_hp_fixed_5_7_1
,

47 c⁄° 
	gbôm≠_hp_fixed_5_7_2
 [5] = {

54 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_2
 = {

56 5, 0, 
bôm≠_hp_fixed_5_7_2
,

59 c⁄° 
	gbôm≠_hp_fixed_5_7_3
 [5] = {

66 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_3
 = {

68 5, 0, 
bôm≠_hp_fixed_5_7_3
,

71 c⁄° 
	gbôm≠_hp_fixed_5_7_4
 [5] = {

78 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_4
 = {

80 5, 0, 
bôm≠_hp_fixed_5_7_4
,

83 c⁄° 
	gbôm≠_hp_fixed_5_7_5
 [5] = {

90 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_5
 = {

92 5, 0, 
bôm≠_hp_fixed_5_7_5
,

95 c⁄° 
	gbôm≠_hp_fixed_5_7_6
 [5] = {

102 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_6
 = {

104 5, 0, 
bôm≠_hp_fixed_5_7_6
,

107 c⁄° 
	gbôm≠_hp_fixed_5_7_7
 [5] = {

114 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_7
 = {

116 5, 0, 
bôm≠_hp_fixed_5_7_7
,

119 c⁄° 
	gbôm≠_hp_fixed_5_7_8
 [5] = {

126 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_8
 = {

128 5, 0, 
bôm≠_hp_fixed_5_7_8
,

131 c⁄° 
	gbôm≠_hp_fixed_5_7_9
 [5] = {

138 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_9
 = {

140 5, 0, 
bôm≠_hp_fixed_5_7_9
,

143 c⁄° 
	gbôm≠_hp_fixed_5_7_10
 [5] = {

150 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_10
 = {

152 5, 0, 
bôm≠_hp_fixed_5_7_10
,

155 c⁄° 
	gbôm≠_hp_fixed_5_7_11
 [5] = {

162 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_11
 = {

164 5, 0, 
bôm≠_hp_fixed_5_7_11
,

167 c⁄° 
	gbôm≠_hp_fixed_5_7_12
 [5] = {

174 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_12
 = {

176 5, 0, 
bôm≠_hp_fixed_5_7_12
,

179 c⁄° 
	gbôm≠_hp_fixed_5_7_13
 [5] = {

186 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_13
 = {

188 5, 0, 
bôm≠_hp_fixed_5_7_13
,

191 c⁄° 
	gbôm≠_hp_fixed_5_7_14
 [5] = {

198 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_14
 = {

200 5, 0, 
bôm≠_hp_fixed_5_7_14
,

203 c⁄° 
	gbôm≠_hp_fixed_5_7_15
 [5] = {

210 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_15
 = {

212 5, 0, 
bôm≠_hp_fixed_5_7_15
,

215 c⁄° 
	gbôm≠_hp_fixed_5_7_16
 [5] = {

222 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_16
 = {

224 5, 0, 
bôm≠_hp_fixed_5_7_16
,

227 c⁄° 
	gbôm≠_hp_fixed_5_7_17
 [5] = {

234 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_17
 = {

236 5, 0, 
bôm≠_hp_fixed_5_7_17
,

239 c⁄° 
	gbôm≠_hp_fixed_5_7_18
 [5] = {

246 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_18
 = {

248 5, 0, 
bôm≠_hp_fixed_5_7_18
,

251 c⁄° 
	gbôm≠_hp_fixed_5_7_19
 [5] = {

258 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_19
 = {

260 5, 0, 
bôm≠_hp_fixed_5_7_19
,

263 c⁄° 
	gbôm≠_hp_fixed_5_7_20
 [5] = {

270 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_20
 = {

272 5, 0, 
bôm≠_hp_fixed_5_7_20
,

275 c⁄° 
	gbôm≠_hp_fixed_5_7_21
 [5] = {

282 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_21
 = {

284 5, 0, 
bôm≠_hp_fixed_5_7_21
,

287 c⁄° 
	gbôm≠_hp_fixed_5_7_22
 [5] = {

294 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_22
 = {

296 5, 0, 
bôm≠_hp_fixed_5_7_22
,

299 c⁄° 
	gbôm≠_hp_fixed_5_7_23
 [5] = {

306 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_23
 = {

308 5, 0, 
bôm≠_hp_fixed_5_7_23
,

311 c⁄° 
	gbôm≠_hp_fixed_5_7_24
 [5] = {

318 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_24
 = {

320 5, 0, 
bôm≠_hp_fixed_5_7_24
,

323 c⁄° 
	gbôm≠_hp_fixed_5_7_25
 [5] = {

330 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_25
 = {

332 5, 0, 
bôm≠_hp_fixed_5_7_25
,

335 c⁄° 
	gbôm≠_hp_fixed_5_7_26
 [5] = {

342 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_26
 = {

344 5, 0, 
bôm≠_hp_fixed_5_7_26
,

347 c⁄° 
	gbôm≠_hp_fixed_5_7_27
 [5] = {

354 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_27
 = {

356 5, 0, 
bôm≠_hp_fixed_5_7_27
,

359 c⁄° 
	gbôm≠_hp_fixed_5_7_28
 [5] = {

366 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_28
 = {

368 5, 0, 
bôm≠_hp_fixed_5_7_28
,

371 c⁄° 
	gbôm≠_hp_fixed_5_7_29
 [5] = {

378 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_29
 = {

380 5, 0, 
bôm≠_hp_fixed_5_7_29
,

383 c⁄° 
	gbôm≠_hp_fixed_5_7_30
 [5] = {

390 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_30
 = {

392 5, 0, 
bôm≠_hp_fixed_5_7_30
,

395 c⁄° 
	gbôm≠_hp_fixed_5_7_31
 [5] = {

402 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_31
 = {

404 5, 0, 
bôm≠_hp_fixed_5_7_31
,

407 c⁄° 
	gbôm≠_hp_fixed_5_7_32
 [5] = {

414 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_32
 = {

416 5, 0, 
bôm≠_hp_fixed_5_7_32
,

419 c⁄° 
	gbôm≠_hp_fixed_5_7_33
 [5] = {

426 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_33
 = {

428 5, 0, 
bôm≠_hp_fixed_5_7_33
,

431 c⁄° 
	gbôm≠_hp_fixed_5_7_34
 [5] = {

438 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_34
 = {

440 5, 0, 
bôm≠_hp_fixed_5_7_34
,

443 c⁄° 
	gbôm≠_hp_fixed_5_7_35
 [5] = {

450 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_35
 = {

452 5, 0, 
bôm≠_hp_fixed_5_7_35
,

455 c⁄° 
	gbôm≠_hp_fixed_5_7_36
 [5] = {

462 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_36
 = {

464 5, 0, 
bôm≠_hp_fixed_5_7_36
,

467 c⁄° 
	gbôm≠_hp_fixed_5_7_37
 [5] = {

474 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_37
 = {

476 5, 0, 
bôm≠_hp_fixed_5_7_37
,

479 c⁄° 
	gbôm≠_hp_fixed_5_7_38
 [5] = {

486 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_38
 = {

488 5, 0, 
bôm≠_hp_fixed_5_7_38
,

491 c⁄° 
	gbôm≠_hp_fixed_5_7_39
 [5] = {

498 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_39
 = {

500 5, 0, 
bôm≠_hp_fixed_5_7_39
,

503 c⁄° 
	gbôm≠_hp_fixed_5_7_40
 [5] = {

510 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_40
 = {

512 5, 0, 
bôm≠_hp_fixed_5_7_40
,

515 c⁄° 
	gbôm≠_hp_fixed_5_7_41
 [5] = {

522 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_41
 = {

524 5, 0, 
bôm≠_hp_fixed_5_7_41
,

527 c⁄° 
	gbôm≠_hp_fixed_5_7_42
 [5] = {

534 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_42
 = {

536 5, 0, 
bôm≠_hp_fixed_5_7_42
,

539 c⁄° 
	gbôm≠_hp_fixed_5_7_43
 [5] = {

546 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_43
 = {

548 5, 0, 
bôm≠_hp_fixed_5_7_43
,

551 c⁄° 
	gbôm≠_hp_fixed_5_7_44
 [5] = {

558 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_44
 = {

560 5, 0, 
bôm≠_hp_fixed_5_7_44
,

563 c⁄° 
	gbôm≠_hp_fixed_5_7_45
 [5] = {

570 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_45
 = {

572 5, 0, 
bôm≠_hp_fixed_5_7_45
,

575 c⁄° 
	gbôm≠_hp_fixed_5_7_46
 [5] = {

582 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_46
 = {

584 5, 0, 
bôm≠_hp_fixed_5_7_46
,

587 c⁄° 
	gbôm≠_hp_fixed_5_7_47
 [5] = {

594 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_47
 = {

596 5, 0, 
bôm≠_hp_fixed_5_7_47
,

599 c⁄° 
	gbôm≠_hp_fixed_5_7_48
 [5] = {

606 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_48
 = {

608 5, 0, 
bôm≠_hp_fixed_5_7_48
,

611 c⁄° 
	gbôm≠_hp_fixed_5_7_49
 [5] = {

618 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_49
 = {

620 5, 0, 
bôm≠_hp_fixed_5_7_49
,

623 c⁄° 
	gbôm≠_hp_fixed_5_7_50
 [5] = {

630 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_50
 = {

632 5, 0, 
bôm≠_hp_fixed_5_7_50
,

635 c⁄° 
	gbôm≠_hp_fixed_5_7_51
 [5] = {

642 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_51
 = {

644 5, 0, 
bôm≠_hp_fixed_5_7_51
,

647 c⁄° 
	gbôm≠_hp_fixed_5_7_52
 [5] = {

654 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_52
 = {

656 5, 0, 
bôm≠_hp_fixed_5_7_52
,

659 c⁄° 
	gbôm≠_hp_fixed_5_7_53
 [5] = {

666 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_53
 = {

668 5, 0, 
bôm≠_hp_fixed_5_7_53
,

671 c⁄° 
	gbôm≠_hp_fixed_5_7_54
 [5] = {

678 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_54
 = {

680 5, 0, 
bôm≠_hp_fixed_5_7_54
,

683 c⁄° 
	gbôm≠_hp_fixed_5_7_55
 [5] = {

690 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_55
 = {

692 5, 0, 
bôm≠_hp_fixed_5_7_55
,

695 c⁄° 
	gbôm≠_hp_fixed_5_7_56
 [5] = {

702 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_56
 = {

704 5, 0, 
bôm≠_hp_fixed_5_7_56
,

707 c⁄° 
	gbôm≠_hp_fixed_5_7_57
 [5] = {

714 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_57
 = {

716 5, 0, 
bôm≠_hp_fixed_5_7_57
,

719 c⁄° 
	gbôm≠_hp_fixed_5_7_58
 [5] = {

726 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_58
 = {

728 5, 0, 
bôm≠_hp_fixed_5_7_58
,

731 c⁄° 
	gbôm≠_hp_fixed_5_7_59
 [5] = {

738 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_59
 = {

740 5, 0, 
bôm≠_hp_fixed_5_7_59
,

743 c⁄° 
	gbôm≠_hp_fixed_5_7_60
 [5] = {

750 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_60
 = {

752 5, 0, 
bôm≠_hp_fixed_5_7_60
,

755 c⁄° 
	gbôm≠_hp_fixed_5_7_61
 [5] = {

762 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_61
 = {

764 5, 0, 
bôm≠_hp_fixed_5_7_61
,

767 c⁄° 
	gbôm≠_hp_fixed_5_7_62
 [5] = {

774 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_62
 = {

776 5, 0, 
bôm≠_hp_fixed_5_7_62
,

779 c⁄° 
	gbôm≠_hp_fixed_5_7_63
 [5] = {

786 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_63
 = {

788 5, 0, 
bôm≠_hp_fixed_5_7_63
,

791 c⁄° 
	gbôm≠_hp_fixed_5_7_64
 [5] = {

798 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_64
 = {

800 5, 0, 
bôm≠_hp_fixed_5_7_64
,

803 c⁄° 
	gbôm≠_hp_fixed_5_7_65
 [5] = {

810 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_65
 = {

812 5, 0, 
bôm≠_hp_fixed_5_7_65
,

815 c⁄° 
	gbôm≠_hp_fixed_5_7_66
 [5] = {

822 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_66
 = {

824 5, 0, 
bôm≠_hp_fixed_5_7_66
,

827 c⁄° 
	gbôm≠_hp_fixed_5_7_67
 [5] = {

834 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_67
 = {

836 5, 0, 
bôm≠_hp_fixed_5_7_67
,

839 c⁄° 
	gbôm≠_hp_fixed_5_7_68
 [5] = {

846 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_68
 = {

848 5, 0, 
bôm≠_hp_fixed_5_7_68
,

851 c⁄° 
	gbôm≠_hp_fixed_5_7_69
 [5] = {

858 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_69
 = {

860 5, 0, 
bôm≠_hp_fixed_5_7_69
,

863 c⁄° 
	gbôm≠_hp_fixed_5_7_70
 [5] = {

870 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_70
 = {

872 5, 0, 
bôm≠_hp_fixed_5_7_70
,

875 c⁄° 
	gbôm≠_hp_fixed_5_7_71
 [5] = {

882 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_71
 = {

884 5, 0, 
bôm≠_hp_fixed_5_7_71
,

887 c⁄° 
	gbôm≠_hp_fixed_5_7_72
 [5] = {

894 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_72
 = {

896 5, 0, 
bôm≠_hp_fixed_5_7_72
,

899 c⁄° 
	gbôm≠_hp_fixed_5_7_73
 [5] = {

906 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_73
 = {

908 5, 0, 
bôm≠_hp_fixed_5_7_73
,

911 c⁄° 
	gbôm≠_hp_fixed_5_7_74
 [5] = {

918 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_74
 = {

920 5, 0, 
bôm≠_hp_fixed_5_7_74
,

923 c⁄° 
	gbôm≠_hp_fixed_5_7_75
 [5] = {

930 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_75
 = {

932 5, 0, 
bôm≠_hp_fixed_5_7_75
,

935 c⁄° 
	gbôm≠_hp_fixed_5_7_76
 [5] = {

942 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_76
 = {

944 5, 0, 
bôm≠_hp_fixed_5_7_76
,

947 c⁄° 
	gbôm≠_hp_fixed_5_7_77
 [5] = {

954 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_77
 = {

956 5, 0, 
bôm≠_hp_fixed_5_7_77
,

959 c⁄° 
	gbôm≠_hp_fixed_5_7_78
 [5] = {

966 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_78
 = {

968 5, 0, 
bôm≠_hp_fixed_5_7_78
,

971 c⁄° 
	gbôm≠_hp_fixed_5_7_79
 [5] = {

978 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_79
 = {

980 5, 0, 
bôm≠_hp_fixed_5_7_79
,

983 c⁄° 
	gbôm≠_hp_fixed_5_7_80
 [5] = {

990 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_80
 = {

992 5, 0, 
bôm≠_hp_fixed_5_7_80
,

995 c⁄° 
	gbôm≠_hp_fixed_5_7_81
 [5] = {

1002 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_81
 = {

1004 5, 0, 
bôm≠_hp_fixed_5_7_81
,

1007 c⁄° 
	gbôm≠_hp_fixed_5_7_82
 [5] = {

1014 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_82
 = {

1016 5, 0, 
bôm≠_hp_fixed_5_7_82
,

1019 c⁄° 
	gbôm≠_hp_fixed_5_7_83
 [5] = {

1026 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_83
 = {

1028 5, 0, 
bôm≠_hp_fixed_5_7_83
,

1031 c⁄° 
	gbôm≠_hp_fixed_5_7_84
 [5] = {

1038 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_84
 = {

1040 5, 0, 
bôm≠_hp_fixed_5_7_84
,

1043 c⁄° 
	gbôm≠_hp_fixed_5_7_85
 [5] = {

1050 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_85
 = {

1052 5, 0, 
bôm≠_hp_fixed_5_7_85
,

1055 c⁄° 
	gbôm≠_hp_fixed_5_7_86
 [5] = {

1062 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_86
 = {

1064 5, 0, 
bôm≠_hp_fixed_5_7_86
,

1067 c⁄° 
	gbôm≠_hp_fixed_5_7_87
 [5] = {

1074 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_87
 = {

1076 5, 0, 
bôm≠_hp_fixed_5_7_87
,

1079 c⁄° 
	gbôm≠_hp_fixed_5_7_88
 [5] = {

1086 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_88
 = {

1088 5, 0, 
bôm≠_hp_fixed_5_7_88
,

1091 c⁄° 
	gbôm≠_hp_fixed_5_7_89
 [5] = {

1098 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_89
 = {

1100 5, 0, 
bôm≠_hp_fixed_5_7_89
,

1103 c⁄° 
	gbôm≠_hp_fixed_5_7_90
 [5] = {

1110 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_90
 = {

1112 5, 0, 
bôm≠_hp_fixed_5_7_90
,

1115 c⁄° 
	gbôm≠_hp_fixed_5_7_91
 [5] = {

1122 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_91
 = {

1124 5, 0, 
bôm≠_hp_fixed_5_7_91
,

1127 c⁄° 
	gbôm≠_hp_fixed_5_7_92
 [5] = {

1134 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_92
 = {

1136 5, 0, 
bôm≠_hp_fixed_5_7_92
,

1139 c⁄° 
	gbôm≠_hp_fixed_5_7_93
 [5] = {

1146 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_93
 = {

1148 5, 0, 
bôm≠_hp_fixed_5_7_93
,

1151 c⁄° 
	gbôm≠_hp_fixed_5_7_94
 [5] = {

1158 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_94
 = {

1160 5, 0, 
bôm≠_hp_fixed_5_7_94
,

1163 c⁄° 
	gbôm≠_hp_fixed_5_7_95
 [5] = {

1170 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_95
 = {

1172 5, 0, 
bôm≠_hp_fixed_5_7_95
,

1175 c⁄° 
	gbôm≠_hp_fixed_5_7_96
 [5] = {

1182 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_96
 = {

1184 5, 0, 
bôm≠_hp_fixed_5_7_96
,

1187 c⁄° 
	gbôm≠_hp_fixed_5_7_97
 [5] = {

1194 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_97
 = {

1196 5, 0, 
bôm≠_hp_fixed_5_7_97
,

1199 c⁄° 
	gbôm≠_hp_fixed_5_7_98
 [5] = {

1206 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_98
 = {

1208 5, 0, 
bôm≠_hp_fixed_5_7_98
,

1211 c⁄° 
	gbôm≠_hp_fixed_5_7_99
 [5] = {

1218 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_99
 = {

1220 5, 0, 
bôm≠_hp_fixed_5_7_99
,

1223 c⁄° 
	gbôm≠_hp_fixed_5_7_100
 [5] = {

1230 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_100
 = {

1232 5, 0, 
bôm≠_hp_fixed_5_7_100
,

1235 c⁄° 
	gbôm≠_hp_fixed_5_7_101
 [5] = {

1242 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_101
 = {

1244 5, 0, 
bôm≠_hp_fixed_5_7_101
,

1247 c⁄° 
	gbôm≠_hp_fixed_5_7_102
 [5] = {

1254 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_102
 = {

1256 5, 0, 
bôm≠_hp_fixed_5_7_102
,

1259 c⁄° 
	gbôm≠_hp_fixed_5_7_103
 [5] = {

1266 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_103
 = {

1268 5, 0, 
bôm≠_hp_fixed_5_7_103
,

1271 c⁄° 
	gbôm≠_hp_fixed_5_7_104
 [5] = {

1278 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_104
 = {

1280 5, 0, 
bôm≠_hp_fixed_5_7_104
,

1283 c⁄° 
	gbôm≠_hp_fixed_5_7_105
 [5] = {

1290 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_105
 = {

1292 5, 0, 
bôm≠_hp_fixed_5_7_105
,

1295 c⁄° 
	gbôm≠_hp_fixed_5_7_106
 [5] = {

1302 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_106
 = {

1304 5, 0, 
bôm≠_hp_fixed_5_7_106
,

1307 c⁄° 
	gbôm≠_hp_fixed_5_7_107
 [5] = {

1314 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_107
 = {

1316 5, 0, 
bôm≠_hp_fixed_5_7_107
,

1319 c⁄° 
	gbôm≠_hp_fixed_5_7_108
 [5] = {

1326 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_108
 = {

1328 5, 0, 
bôm≠_hp_fixed_5_7_108
,

1331 c⁄° 
	gbôm≠_hp_fixed_5_7_109
 [5] = {

1338 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_109
 = {

1340 5, 0, 
bôm≠_hp_fixed_5_7_109
,

1343 c⁄° 
	gbôm≠_hp_fixed_5_7_110
 [5] = {

1350 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_110
 = {

1352 5, 0, 
bôm≠_hp_fixed_5_7_110
,

1355 c⁄° 
	gbôm≠_hp_fixed_5_7_111
 [5] = {

1362 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_111
 = {

1364 5, 0, 
bôm≠_hp_fixed_5_7_111
,

1367 c⁄° 
	gbôm≠_hp_fixed_5_7_112
 [5] = {

1374 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_112
 = {

1376 5, 0, 
bôm≠_hp_fixed_5_7_112
,

1379 c⁄° 
	gbôm≠_hp_fixed_5_7_113
 [5] = {

1386 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_113
 = {

1388 5, 0, 
bôm≠_hp_fixed_5_7_113
,

1391 c⁄° 
	gbôm≠_hp_fixed_5_7_114
 [5] = {

1398 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_114
 = {

1400 5, 0, 
bôm≠_hp_fixed_5_7_114
,

1403 c⁄° 
	gbôm≠_hp_fixed_5_7_115
 [5] = {

1410 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_115
 = {

1412 5, 0, 
bôm≠_hp_fixed_5_7_115
,

1415 c⁄° 
	gbôm≠_hp_fixed_5_7_116
 [5] = {

1422 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_116
 = {

1424 5, 0, 
bôm≠_hp_fixed_5_7_116
,

1427 c⁄° 
	gbôm≠_hp_fixed_5_7_117
 [5] = {

1434 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_117
 = {

1436 5, 0, 
bôm≠_hp_fixed_5_7_117
,

1439 c⁄° 
	gbôm≠_hp_fixed_5_7_118
 [5] = {

1446 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_118
 = {

1448 5, 0, 
bôm≠_hp_fixed_5_7_118
,

1451 c⁄° 
	gbôm≠_hp_fixed_5_7_119
 [5] = {

1458 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_119
 = {

1460 5, 0, 
bôm≠_hp_fixed_5_7_119
,

1463 c⁄° 
	gbôm≠_hp_fixed_5_7_120
 [5] = {

1470 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_120
 = {

1472 5, 0, 
bôm≠_hp_fixed_5_7_120
,

1475 c⁄° 
	gbôm≠_hp_fixed_5_7_121
 [5] = {

1482 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_121
 = {

1484 5, 0, 
bôm≠_hp_fixed_5_7_121
,

1487 c⁄° 
	gbôm≠_hp_fixed_5_7_122
 [5] = {

1494 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_122
 = {

1496 5, 0, 
bôm≠_hp_fixed_5_7_122
,

1499 c⁄° 
	gbôm≠_hp_fixed_5_7_123
 [5] = {

1506 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_123
 = {

1508 5, 0, 
bôm≠_hp_fixed_5_7_123
,

1511 c⁄° 
	gbôm≠_hp_fixed_5_7_124
 [5] = {

1518 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_124
 = {

1520 5, 0, 
bôm≠_hp_fixed_5_7_124
,

1523 c⁄° 
	gbôm≠_hp_fixed_5_7_125
 [5] = {

1530 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_125
 = {

1532 5, 0, 
bôm≠_hp_fixed_5_7_125
,

1535 c⁄° 
	gbôm≠_hp_fixed_5_7_126
 [5] = {

1542 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_126
 = {

1544 5, 0, 
bôm≠_hp_fixed_5_7_126
,

1547 c⁄° 
	gbôm≠_hp_fixed_5_7_127
 [5] = {

1554 
di•_f⁄t_glyph
 
	gglyph_hp_fixed_5_7_127
 = {

1556 5, 0, 
bôm≠_hp_fixed_5_7_127
,

1559 c⁄° 
di•_f⁄t_ba£
 
	gf⁄t_hcms29xx_ba£
 = {

1564 {&
glyph_hp_fixed_5_7_0
,

1565 &
glyph_hp_fixed_5_7_1
,

1566 &
glyph_hp_fixed_5_7_2
,

1567 &
glyph_hp_fixed_5_7_3
,

1568 &
glyph_hp_fixed_5_7_4
,

1569 &
glyph_hp_fixed_5_7_5
,

1570 &
glyph_hp_fixed_5_7_6
,

1571 &
glyph_hp_fixed_5_7_7
,

1572 &
glyph_hp_fixed_5_7_8
,

1573 &
glyph_hp_fixed_5_7_9
,

1574 &
glyph_hp_fixed_5_7_10
,

1575 &
glyph_hp_fixed_5_7_11
,

1576 &
glyph_hp_fixed_5_7_12
,

1577 &
glyph_hp_fixed_5_7_13
,

1578 &
glyph_hp_fixed_5_7_14
,

1579 &
glyph_hp_fixed_5_7_15
,

1580 &
glyph_hp_fixed_5_7_16
,

1581 &
glyph_hp_fixed_5_7_17
,

1582 &
glyph_hp_fixed_5_7_18
,

1583 &
glyph_hp_fixed_5_7_19
,

1584 &
glyph_hp_fixed_5_7_20
,

1585 &
glyph_hp_fixed_5_7_21
,

1586 &
glyph_hp_fixed_5_7_22
,

1587 &
glyph_hp_fixed_5_7_23
,

1588 &
glyph_hp_fixed_5_7_24
,

1589 &
glyph_hp_fixed_5_7_25
,

1590 &
glyph_hp_fixed_5_7_26
,

1591 &
glyph_hp_fixed_5_7_27
,

1592 &
glyph_hp_fixed_5_7_28
,

1593 &
glyph_hp_fixed_5_7_29
,

1594 &
glyph_hp_fixed_5_7_30
,

1595 &
glyph_hp_fixed_5_7_31
,

1596 &
glyph_hp_fixed_5_7_32
,

1597 &
glyph_hp_fixed_5_7_33
,

1598 &
glyph_hp_fixed_5_7_34
,

1599 &
glyph_hp_fixed_5_7_35
,

1600 &
glyph_hp_fixed_5_7_36
,

1601 &
glyph_hp_fixed_5_7_37
,

1602 &
glyph_hp_fixed_5_7_38
,

1603 &
glyph_hp_fixed_5_7_39
,

1604 &
glyph_hp_fixed_5_7_40
,

1605 &
glyph_hp_fixed_5_7_41
,

1606 &
glyph_hp_fixed_5_7_42
,

1607 &
glyph_hp_fixed_5_7_43
,

1608 &
glyph_hp_fixed_5_7_44
,

1609 &
glyph_hp_fixed_5_7_45
,

1610 &
glyph_hp_fixed_5_7_46
,

1611 &
glyph_hp_fixed_5_7_47
,

1612 &
glyph_hp_fixed_5_7_48
,

1613 &
glyph_hp_fixed_5_7_49
,

1614 &
glyph_hp_fixed_5_7_50
,

1615 &
glyph_hp_fixed_5_7_51
,

1616 &
glyph_hp_fixed_5_7_52
,

1617 &
glyph_hp_fixed_5_7_53
,

1618 &
glyph_hp_fixed_5_7_54
,

1619 &
glyph_hp_fixed_5_7_55
,

1620 &
glyph_hp_fixed_5_7_56
,

1621 &
glyph_hp_fixed_5_7_57
,

1622 &
glyph_hp_fixed_5_7_58
,

1623 &
glyph_hp_fixed_5_7_59
,

1624 &
glyph_hp_fixed_5_7_60
,

1625 &
glyph_hp_fixed_5_7_61
,

1626 &
glyph_hp_fixed_5_7_62
,

1627 &
glyph_hp_fixed_5_7_63
,

1628 &
glyph_hp_fixed_5_7_64
,

1629 &
glyph_hp_fixed_5_7_65
,

1630 &
glyph_hp_fixed_5_7_66
,

1631 &
glyph_hp_fixed_5_7_67
,

1632 &
glyph_hp_fixed_5_7_68
,

1633 &
glyph_hp_fixed_5_7_69
,

1634 &
glyph_hp_fixed_5_7_70
,

1635 &
glyph_hp_fixed_5_7_71
,

1636 &
glyph_hp_fixed_5_7_72
,

1637 &
glyph_hp_fixed_5_7_73
,

1638 &
glyph_hp_fixed_5_7_74
,

1639 &
glyph_hp_fixed_5_7_75
,

1640 &
glyph_hp_fixed_5_7_76
,

1641 &
glyph_hp_fixed_5_7_77
,

1642 &
glyph_hp_fixed_5_7_78
,

1643 &
glyph_hp_fixed_5_7_79
,

1644 &
glyph_hp_fixed_5_7_80
,

1645 &
glyph_hp_fixed_5_7_81
,

1646 &
glyph_hp_fixed_5_7_82
,

1647 &
glyph_hp_fixed_5_7_83
,

1648 &
glyph_hp_fixed_5_7_84
,

1649 &
glyph_hp_fixed_5_7_85
,

1650 &
glyph_hp_fixed_5_7_86
,

1651 &
glyph_hp_fixed_5_7_87
,

1652 &
glyph_hp_fixed_5_7_88
,

1653 &
glyph_hp_fixed_5_7_89
,

1654 &
glyph_hp_fixed_5_7_90
,

1655 &
glyph_hp_fixed_5_7_91
,

1656 &
glyph_hp_fixed_5_7_92
,

1657 &
glyph_hp_fixed_5_7_93
,

1658 &
glyph_hp_fixed_5_7_94
,

1659 &
glyph_hp_fixed_5_7_95
,

1660 &
glyph_hp_fixed_5_7_96
,

1661 &
glyph_hp_fixed_5_7_97
,

1662 &
glyph_hp_fixed_5_7_98
,

1663 &
glyph_hp_fixed_5_7_99
,

1664 &
glyph_hp_fixed_5_7_100
,

1665 &
glyph_hp_fixed_5_7_101
,

1666 &
glyph_hp_fixed_5_7_102
,

1667 &
glyph_hp_fixed_5_7_103
,

1668 &
glyph_hp_fixed_5_7_104
,

1669 &
glyph_hp_fixed_5_7_105
,

1670 &
glyph_hp_fixed_5_7_106
,

1671 &
glyph_hp_fixed_5_7_107
,

1672 &
glyph_hp_fixed_5_7_108
,

1673 &
glyph_hp_fixed_5_7_109
,

1674 &
glyph_hp_fixed_5_7_110
,

1675 &
glyph_hp_fixed_5_7_111
,

1676 &
glyph_hp_fixed_5_7_112
,

1677 &
glyph_hp_fixed_5_7_113
,

1678 &
glyph_hp_fixed_5_7_114
,

1679 &
glyph_hp_fixed_5_7_115
,

1680 &
glyph_hp_fixed_5_7_116
,

1681 &
glyph_hp_fixed_5_7_117
,

1682 &
glyph_hp_fixed_5_7_118
,

1683 &
glyph_hp_fixed_5_7_119
,

1684 &
glyph_hp_fixed_5_7_120
,

1685 &
glyph_hp_fixed_5_7_121
,

1686 &
glyph_hp_fixed_5_7_122
,

1687 &
glyph_hp_fixed_5_7_123
,

1688 &
glyph_hp_fixed_5_7_124
,

1689 &
glyph_hp_fixed_5_7_125
,

1690 &
glyph_hp_fixed_5_7_126
,

1691 &
glyph_hp_fixed_5_7_127
,

1692 
NULL
,

1693 
NULL
,

1694 
NULL
,

1695 
NULL
,

1696 
NULL
,

1697 
NULL
,

1698 
NULL
,

1699 
NULL
,

1700 
NULL
,

1701 
NULL
,

1702 
NULL
,

1703 
NULL
,

1704 
NULL
,

1705 
NULL
,

1706 
NULL
,

1707 
NULL
,

1708 
NULL
,

1709 
NULL
,

1710 
NULL
,

1711 
NULL
,

1712 
NULL
,

1713 
NULL
,

1714 
NULL
,

1715 
NULL
,

1716 
NULL
,

1717 
NULL
,

1718 
NULL
,

1719 
NULL
,

1720 
NULL
,

1721 
NULL
,

1722 
NULL
,

1723 
NULL
,

1724 
NULL
,

1725 
NULL
,

1726 
NULL
,

1727 
NULL
,

1728 
NULL
,

1729 
NULL
,

1730 
NULL
,

1731 
NULL
,

1732 
NULL
,

1733 
NULL
,

1734 
NULL
,

1735 
NULL
,

1736 
NULL
,

1737 
NULL
,

1738 
NULL
,

1739 
NULL
,

1740 
NULL
,

1741 
NULL
,

1742 
NULL
,

1743 
NULL
,

1744 
NULL
,

1745 
NULL
,

1746 
NULL
,

1747 
NULL
,

1748 
NULL
,

1749 
NULL
,

1750 
NULL
,

1751 
NULL
,

1752 
NULL
,

1753 
NULL
,

1754 
NULL
,

1755 
NULL
,

1756 
NULL
,

1757 
NULL
,

1758 
NULL
,

1759 
NULL
,

1760 
NULL
,

1761 
NULL
,

1762 
NULL
,

1763 
NULL
,

1764 
NULL
,

1765 
NULL
,

1766 
NULL
,

1767 
NULL
,

1768 
NULL
,

1769 
NULL
,

1770 
NULL
,

1771 
NULL
,

1772 
NULL
,

1773 
NULL
,

1774 
NULL
,

1775 
NULL
,

1776 
NULL
,

1777 
NULL
,

1778 
NULL
,

1779 
NULL
,

1780 
NULL
,

1781 
NULL
,

1782 
NULL
,

1783 
NULL
,

1784 
NULL
,

1785 
NULL
,

1786 
NULL
,

1787 
NULL
,

1788 
NULL
,

1789 
NULL
,

1790 
NULL
,

1791 
NULL
,

1792 
NULL
,

1793 
NULL
,

1794 
NULL
,

1795 
NULL
,

1796 
NULL
,

1797 
NULL
,

1798 
NULL
,

1799 
NULL
,

1800 
NULL
,

1801 
NULL
,

1802 
NULL
,

1803 
NULL
,

1804 
NULL
,

1805 
NULL
,

1806 
NULL
,

1807 
NULL
,

1808 
NULL
,

1809 
NULL
,

1810 
NULL
,

1811 
NULL
,

1812 
NULL
,

1813 
NULL
,

1814 
NULL
,

1815 
NULL
,

1816 
NULL
,

1817 
NULL
,

1818 
NULL
,

1819 
NULL
}

	@src/libchip/display/font_hcms29xx.h

20 #i‚de‡
FONT_HCMS29XX_H


21 
	#FONT_HCMS29XX_H


	)

23 
	~"di•_f⁄ts.h
"

26 #ifde‡
__˝lu•lus


30 
di•_f⁄t_ba£
 
f⁄t_hcms29xx_ba£
;

32 #ifde‡
__˝lu•lus


	@src/libchip/flash/am29lv160.c

12 
	~<°dio.h
>

13 
	~<î∫o.h
>

14 
	~<°rög.h
>

16 
	~<πems.h
>

18 
	~<libchù/am29lv160.h
>

20 #i‚de‡
AM26LV160_ERROR_TRACE


21 
	#AM26LV160_ERROR_TRACE
 (0)

	)

27 c⁄° 
πems_fdisk_£gmít_desc
 
	gπems_am29lv160t_£gmíts
[4] =

30 .
cou¡
 = 31,

31 .
	g£gmít
 = 0,

32 .
	goff£t
 = 0x00000000,

33 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (64)

36 .
	gcou¡
 = 1,

37 .
	g£gmít
 = 31,

38 .
	goff£t
 = 0x001f0000,

39 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (32)

42 .
	gcou¡
 = 2,

43 .
	g£gmít
 = 32,

44 .
	goff£t
 = 0x001f8000,

45 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (8)

48 .
	gcou¡
 = 1,

49 .
	g£gmít
 = 34,

50 .
	goff£t
 = 0x001fc000,

51 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (16)

58 c⁄° 
πems_fdisk_£gmít_desc
 
	gπems_am29lv160b_£gmíts
[] =

61 .
cou¡
 = 1,

62 .
	g£gmít
 = 0,

63 .
	goff£t
 = 0x00000000,

64 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (16)

67 . 
	gcou¡
 = 2,

68 .
	g£gmít
 = 1,

69 .
	goff£t
 = 0x00004000,

70 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (8)

73 .
	gcou¡
 = 1,

74 .
	g£gmít
 = 3,

75 .
	goff£t
 = 0x00008000,

76 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (32)

79 .
	gcou¡
 = 31,

80 .
	g£gmít
 = 4,

81 .
	goff£t
 = 0x00010000,

82 .
	gsize
 = 
RTEMS_FDISK_KBYTES
 (64)

87 
	$πems_am29lv160_bœnk
 (c⁄° 
πems_fdisk_£gmít_desc
* 
sd
,

88 
uöt32_t
 
devi˚
,

89 
uöt32_t
 
£gmít
,

90 
uöt32_t
 
off£t
,

91 
uöt32_t
 
size
)

93 c⁄° 
πems_am29lv160_c⁄fig
* 
ac
 = &
πems_am29lv160_c⁄figuøti⁄
[
devi˚
];

94 vﬁ©ûê
uöt8_t
* 
£g_8
 = 
ac
->
ba£
;

95 vﬁ©ûê
uöt32_t
* 
£g_32
;

96 
uöt32_t
 
cou¡
;

98 
off£t
 +
sd
->off£à+ (
£gmít
 - sd->£gmítË* sd->
size
;

100 
£g_8
 +
off£t
;

102 
cou¡
 = 
off£t
 & ( (
uöt32_t
) - 1);

103 
size
 -
cou¡
;

105 
cou¡
--)

106 i‡(*
£g_8
++ != 0xff)

108 #i‡
AM26LV160_ERROR_TRACE


109 
	`¥ötf
 ("AM26LV160: blank checkÉrror: %p = 0x%02x\n",

110 
£g_8
 - 1, *(seg_8 - 1));

112  
EIO
;

115 
£g_32
 = (vﬁ©ûê
uöt32_t
*Ë
£g_8
;

117 
cou¡
 = 
size
 /  (
uöt32_t
);

118 
size
 -
cou¡
 *  (
uöt32_t
);

120 
cou¡
--)

121 i‡(*
£g_32
++ != 0xffffffff)

123 #i‡
AM26LV160_ERROR_TRACE


124 
	`¥ötf
 ("AM26LV160: blank checkÉrror: %p = 0x%08lx\n",

125 
£g_32
 - 1, *(seg_32 - 1));

127  
EIO
;

130 
£g_8
 = (vﬁ©ûê
uöt8_t
*Ë
£g_32
;

132 
size
--)

133 i‡(*
£g_8
++ != 0xff)

135 #i‡
AM26LV160_ERROR_TRACE


136 
	`¥ötf
 ("AM26LV160: blank checkÉrror: %p = 0x%02x\n",

137 
£g_8
 - 1, *(seg_8 - 1));

139  
EIO
;

143 
	}
}

146 
	$πems_am29lv160_vîify
 (c⁄° 
πems_fdisk_£gmít_desc
* 
sd
,

147 
uöt32_t
 
devi˚
,

148 
uöt32_t
 
£gmít
,

149 
uöt32_t
 
off£t
,

150 c⁄° * 
buf„r
,

151 
uöt32_t
 
size
)

153 c⁄° 
πems_am29lv160_c⁄fig
* 
ac
 = &
πems_am29lv160_c⁄figuøti⁄
[
devi˚
];

154 c⁄° 
uöt8_t
* 
addr
 = 
ac
->
ba£
;

156 
addr
 +(
sd
->
off£t
 + (
£gmít
 - sd->£gmítË* sd->
size
) + offset;

158 i‡(
	`memcmp
 (
addr
, 
buf„r
, 
size
) != 0)

159  
EIO
;

162 
	}
}

165 
	$πems_am29lv160_toggÀ_waô_8
 (vﬁ©ûê
uöt8_t
* 
°©us
)

169 vﬁ©ûê
uöt8_t
 
°©us1
 = *
°©us
;

170 vﬁ©ûê
uöt8_t
 
°©us2
 = *
°©us
;

172 i‡(((
°©us1
 ^ 
°©us2
) & (1 << 6)) == 0)

175 i‡((
°©us1
 & (1 << 5)) != 0)

177 
°©us1
 = *
°©us
;

178 
°©us2
 = *
°©us
;

180 i‡(((
°©us1
 ^ 
°©us2
) & (1 << 6)) == 0)

183 #i‡
AM26LV160_ERROR_TRACE


184 
	`¥ötf
 ("AM26LV160:Érror bit detected: %p = 0x%04x\n",

185 
°©us
, 
°©us1
);

188 *
°©us
 = 0xf0;

189  
EIO
;

192 
	}
}

195 
	$πems_am29lv160_toggÀ_waô_16
 (vﬁ©ûê
uöt16_t
* 
°©us
)

199 vﬁ©ûê
uöt16_t
 
°©us1
 = *
°©us
;

200 vﬁ©ûê
uöt16_t
 
°©us2
 = *
°©us
;

202 i‡(((
°©us1
 ^ 
°©us2
) & (1 << 6)) == 0)

205 i‡((
°©us1
 & (1 << 5)) != 0)

207 
°©us1
 = *
°©us
;

208 
°©us2
 = *
°©us
;

210 i‡(((
°©us1
 ^ 
°©us2
) & (1 << 6)) == 0)

213 #i‡
AM26LV160_ERROR_TRACE


214 
	`¥ötf
 ("AM26LV160:Érror bit detected: %p = 0x%04x/0x%04x\n",

215 
°©us
, 
°©us1
, 
°©us2
);

218 *
°©us
 = 0xf0;

219  
EIO
;

222 
	}
}

225 
	$πems_am29lv160_wrôe_d©a_8
 (vﬁ©ûê
uöt8_t
* 
ba£
,

226 
uöt32_t
 
off£t
,

227 c⁄° 
uöt8_t
* 
d©a
,

228 
uöt32_t
 
size
)

230 vﬁ©ûê
uöt8_t
* 
£g
 = 
ba£
 + 
off£t
;

231 
πems_öãºu±_Àvñ
 
Àvñ
;

236 *
ba£
 = 0xf0;

238 
size
)

240 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

241 *(
ba£
 + 0xaaa) = 0xaa;

242 *(
ba£
 + 0x555) = 0x55;

243 *(
ba£
 + 0xaaa) = 0xa0;

244 *
£g
 = *
d©a
++;

245 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

246 i‡(
	`πems_am29lv160_toggÀ_waô_8
 (
£g
++) != 0)

247  
EIO
;

248 
size
--;

254 *
ba£
 = 0xf0;

257 
	}
}

260 
	$πems_am29lv160_wrôe_d©a_16
 (vﬁ©ûê
uöt16_t
* 
ba£
,

261 
uöt32_t
 
off£t
,

262 c⁄° 
uöt16_t
* 
d©a
,

263 
uöt32_t
 
size
)

265 vﬁ©ûê
uöt16_t
* 
£g
 = 
ba£
 + (
off£t
 / 2);

266 
πems_öãºu±_Àvñ
 
Àvñ
;

268 
size
 /= 2;

273 *
ba£
 = 0xf0;

275 
size
)

277 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

278 *(
ba£
 + 0x555) = 0xaa;

279 *(
ba£
 + 0x2aa) = 0x55;

280 *(
ba£
 + 0x555) = 0xa0;

281 *
£g
 = *
d©a
++;

282 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

283 i‡(
	`πems_am29lv160_toggÀ_waô_16
 (
£g
++) != 0)

284  
EIO
;

285 
size
--;

291 *
ba£
 = 0xf0;

294 
	}
}

297 
	$πems_am29lv160_ªad
 (c⁄° 
πems_fdisk_£gmít_desc
* 
sd
,

298 
uöt32_t
 
devi˚
,

299 
uöt32_t
 
£gmít
,

300 
uöt32_t
 
off£t
,

301 * 
buf„r
,

302 
uöt32_t
 
size
)

304 * 
addr
 =

305 
πems_am29lv160_c⁄figuøti⁄
[
devi˚
].
ba£
 +

306 
sd
->
off£t
 + ((
£gmít
 - sd->£gmítË* sd->
size
) + offset;

307 
	`mem˝y
 (
buf„r
, 
addr
, 
size
);

309 
	}
}

315 
	$πems_am29lv160_wrôe
 (c⁄° 
πems_fdisk_£gmít_desc
* 
sd
,

316 
uöt32_t
 
devi˚
,

317 
uöt32_t
 
£gmít
,

318 
uöt32_t
 
off£t
,

319 c⁄° * 
buf„r
,

320 
uöt32_t
 
size
)

322 
ªt
 = 
	`πems_am29lv160_vîify
 (
sd
, 
devi˚
, 
£gmít
, 
off£t
, 
buf„r
, 
size
);

324 i‡(
ªt
 != 0)

326 c⁄° 
πems_am29lv160_c⁄fig
* 
ac
 = &
πems_am29lv160_c⁄figuøti⁄
[
devi˚
];

327 
uöt32_t
 
soff£t
;

329 
soff£t
 = 
off£t
 + 
sd
->off£à+ ((
£gmít
 - sd->£gmítË* sd->
size
);

331 i‡(
off£t
 & 1)

332 
	`¥ötf
 ("rtems_am29lv160_write: offset is odd\n");

334 i‡(
size
 & 1)

335 
	`¥ötf
 ("rtems_am29lv160_write: size is odd\n");

337 i‡(
ac
->
bus_8bô
)

338 
ªt
 = 
	`πems_am29lv160_wrôe_d©a_8
 (
ac
->
ba£
, 
soff£t
, 
buf„r
, 
size
);

340 
ªt
 = 
	`πems_am29lv160_wrôe_d©a_16
 (
ac
->
ba£
, 
soff£t
, 
buf„r
, 
size
);

345 i‡(
ªt
 == 0)

347 
ªt
 = 
	`πems_am29lv160_vîify
 (
sd
, 
devi˚
, 
£gmít
, 
off£t
, 
buf„r
, 
size
);

348 #i‡
AM26LV160_ERROR_TRACE


349 i‡(
ªt
)

350 
	`¥ötf
 ("AM26LV160: verify failed: %ld-%ld-%08lx: s=%ld\n",

351 
devi˚
, 
£gmít
, 
off£t
, 
size
);

356  
ªt
;

357 
	}
}

360 
	$πems_am29lv160_îa£
 (c⁄° 
πems_fdisk_£gmít_desc
* 
sd
,

361 
uöt32_t
 
devi˚
,

362 
uöt32_t
 
£gmít
)

364 
ªt
 = 
	`πems_am29lv160_bœnk
 (
sd
, 
devi˚
, 
£gmít
, 0, sd->
size
);

365 i‡(
ªt
 != 0)

367 c⁄° 
πems_am29lv160_c⁄fig
* 
ac
 = &
πems_am29lv160_c⁄figuøti⁄
[
devi˚
];

368 
uöt32_t
 
off£t
;

369 
πems_öãºu±_Àvñ
 
Àvñ
;

371 
off£t
 = 
sd
->off£à+ ((
£gmít
 - sd->£gmítË* sd->
size
);

373 i‡(
ac
->
bus_8bô
)

375 vﬁ©ûê
uöt8_t
* 
ba£
 = 
ac
->base;

376 vﬁ©ûê
uöt8_t
* 
£g
 = 
ba£
 + 
off£t
;

381 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

382 *
ba£
 = 0xf0;

383 *(
ba£
 + 0xaaa) = 0xaa;

384 *(
ba£
 + 0x555) = 0x55;

385 *(
ba£
 + 0xaaa) = 0x80;

386 *(
ba£
 + 0xaaa) = 0xaa;

387 *(
ba£
 + 0x555) = 0x55;

388 *
£g
 = 0x30;

389 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

391 
ªt
 = 
	`πems_am29lv160_toggÀ_waô_8
 (
£g
);

396 *
ba£
 = 0xf0;

400 vﬁ©ûê
uöt16_t
* 
ba£
 = 
ac
->base;

401 vﬁ©ûê
uöt16_t
* 
£g
 = 
ba£
 + (
off£t
 / 2);

406 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

407 *
ba£
 = 0xf0;

408 *(
ba£
 + 0x555) = 0xaa;

409 *(
ba£
 + 0x2aa) = 0x55;

410 *(
ba£
 + 0x555) = 0x80;

411 *(
ba£
 + 0x555) = 0xaa;

412 *(
ba£
 + 0x2aa) = 0x55;

413 *
£g
 = 0x30;

414 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

416 
ªt
 = 
	`πems_am29lv160_toggÀ_waô_16
 (
£g
);

421 *
ba£
 = 0xf0;

427 i‡(
ªt
 == 0)

429 
ªt
 = 
	`πems_am29lv160_bœnk
 (
sd
, 
devi˚
, 
£gmít
, 0, sd->
size
);

430 #i‡
AM26LV160_ERROR_TRACE


431 i‡(
ªt
)

432 
	`¥ötf
 ("AM26LV160:Éø£ faûed: %ld-%ld\n", 
devi˚
, 
£gmít
);

437  
ªt
;

438 
	}
}

441 
	$πems_am29lv160_îa£_devi˚
 (c⁄° 
πems_fdisk_devi˚_desc
* 
dd
,

442 
uöt32_t
 
devi˚
)

444 
uöt32_t
 
£gmít
;

446 
£gmít
 = 0; segmíà< 
dd
->
£gmít_cou¡
; segment++)

448 
uöt32_t
 
£g_£gmít
;

450 
£g_£gmít
 = 0;

451 
£g_£gmít
 < 
dd
->
£gmíts
[
£gmít
].
cou¡
;

452 
£g_£gmít
++)

454 
ªt
 = 
	`πems_am29lv160_îa£
 (&
dd
->
£gmíts
[
£gmít
],

455 
devi˚
,

456 
£gmít
 + 
£g_£gmít
);

457 i‡(
ªt
)

458  
ªt
;

463 
	}
}

465 c⁄° 
πems_fdisk_drivî_h™dÀrs
 
	gπems_am29lv160_h™dÀrs
 =

467 .
ªad
 = 
πems_am29lv160_ªad
,

468 .
	gwrôe
 = 
πems_am29lv160_wrôe
,

469 .
	gbœnk
 = 
πems_am29lv160_bœnk
,

470 .
	gvîify
 = 
πems_am29lv160_vîify
,

471 .
	gîa£
 = 
πems_am29lv160_îa£
,

472 .
	gîa£_devi˚
 = 
πems_am29lv160_îa£_devi˚


	@src/libchip/flash/am29lv160.h

14 #i‡!
deföed
 (
_RTEMS_AM29LV160_H_
)

15 
	#_RTEMS_AM29LV160_H_


	)

17 
	~<πems/Êashdisk.h
>

22 
	#πems_am29lv160t_£gmít_cou¡
 (4)

	)

23 c⁄° 
πems_fdisk_£gmít_desc
 
πems_am29lv160t_£gmíts
[4];

28 
	#πems_am29lv160b_£gmít_cou¡
 (4)

	)

29 c⁄° 
πems_fdisk_£gmít_desc
 
πems_am29lv160b_£gmíts
[4];

34 c⁄° 
πems_fdisk_drivî_h™dÀrs
 
πems_am29lv160_h™dÀrs
;

39 
	sπems_am29lv160_c⁄fig


41 
	mbus_8bô
;

42 * 
	mba£
;

43 } 
	tπems_am29lv160_c⁄fig
;

48 c⁄° 
πems_am29lv160_c⁄fig
 
πems_am29lv160_c⁄figuøti⁄
[];

53 
uöt32_t
 
πems_am29lv160_c⁄figuøti⁄_size
;

	@src/libchip/i2c/i2c-2b-eeprom.c

52 
	~<πems.h
>

53 
	~<πems/libi2c.h
>

55 
	~<libchù/i2c-2b-ì¥om.h
>

56 
	~<πems/libio.h
>

58 
	#EEPROM_PG_SZ
 32

	)

59 
	#ALGN
(
x
Ë(((
uöt32_t
)(xË+ 
EEPROM_PG_SZ
Ë& ~(EEPROM_PG_SZ-1))

	)

61 
πems_°©us_code


62 
	$£nd_fûe_±r
 (
πems_devi˚_mö‹_numbî
 
mö‹
, 
pos
, 
tout
)

64 
sc
;

65 
byãs
[2];

67 
byãs
[0] = (
pos
 >> 8) & 0xff;

68 
byãs
[1] = (
pos
) & 0xff;

74 (
sc
 = 
	`πems_libi2c_°¨t_wrôe_byãs
 (
mö‹
, 
byãs
, 2)) < 0) {

75 i‡(--
tout
 <= 0)

76  
tout
 ? -
sc
 : 
RTEMS_TIMEOUT
;

77 
	`πems_èsk_wake_a·î
 (1);

79  
RTEMS_SUCCESSFUL
;

80 
	}
}

82 
πems_°©us_code


83 
	$i2c_2b_ì¥om_wrôe
 (
πems_devi˚_maj‹_numbî
 
maj‹
,

84 
πems_devi˚_mö‹_numbî
 
mö‹
, *
¨g
)

86 
πems_libio_rw_¨gs_t
 *
rw¨gs
 = 
¨g
;

87 
off
 = 
rw¨gs
->
off£t
;

88 
˙t
 = 
rw¨gs
->
cou¡
;

89 *
buf
 = (*)
rw¨gs
->
buf„r
;

90 
sc
;

91 
íd
;

92 
l
;

94 i‡(
˙t
 <= 0)

95  
RTEMS_SUCCESSFUL
;

97 i‡((
sc
 = 
	`£nd_fûe_±r
 (
mö‹
, 
off
, 0)))

98  
sc
;

102 
íd
 = 
	`ALGN
 (
off
);

103 
l
 = 
íd
 - 
off
;

104 i‡(
l
 > 
˙t
)

105 
l
 = 
˙t
;

107 
sc
 = 
	`πems_libi2c_wrôe_byãs
 (
mö‹
, 
buf
, 
l
);

108 i‡(
sc
 < 0)

109  -
sc
;

111 
sc
 = 
	`πems_libi2c_£nd_°›
 (
mö‹
);

112 i‡(
sc
)

113  
sc
;

115 
rw¨gs
->
byãs_moved
 +
l
;

117 
buf
 +
l
;

118 
˙t
 -
l
;

119 
off
 +
l
;

122 i‡((
sc
 = 
	`£nd_fûe_±r
 (
mö‹
, 
off
, 100)))

123  
sc
;

125 } 
˙t
 > 0);

127  
	`πems_libi2c_£nd_°›
 (
mö‹
);

128 
	}
}

130 
πems_°©us_code


131 
	$i2c_2b_ì¥om_ªad
 (
πems_devi˚_maj‹_numbî
 
maj‹
,

132 
πems_devi˚_mö‹_numbî
 
mö‹
, *
¨g
)

134 
sc
;

135 
πems_libio_rw_¨gs_t
 *
rw¨gs
 = 
¨g
;

137 i‡(
RTEMS_SUCCESSFUL
 !(
sc
 = 
	`£nd_fûe_±r
 (
mö‹
, 
rw¨gs
->
off£t
, 0)))

138  -
sc
;

140 
sc
 = 
	`πems_libi2c_°¨t_ªad_byãs
(

141 
mö‹
,

142 (*)
rw¨gs
->
buf„r
,

143 
rw¨gs
->
cou¡


146 i‡(
sc
 < 0) {

147 
rw¨gs
->
byãs_moved
 = 0;

148  -
sc
;

150 
rw¨gs
->
byãs_moved
 = 
sc
;

152  
	`πems_libi2c_£nd_°›
 (
mö‹
);

153 
	}
}

155 
πems_drivî_addªss_èbÀ
 
	gmy›s
 = {

156 .
ªad_íåy
 = 
i2c_2b_ì¥om_ªad
,

157 .
	gwrôe_íåy
 = 
i2c_2b_ì¥om_wrôe
,

160 
πems_libi2c_drv_t
 
	gmy_drv_tbl
 = {

161 .
›s
 = &
my›s
,

162 .
	gsize
 =  (
my_drv_tbl
),

166 
πems_drivî_addªss_èbÀ
 
	gmy_ro_›s
 = {

167 .
ªad_íåy
 = 
i2c_2b_ì¥om_ªad
,

170 
πems_libi2c_drv_t
 
	gmy_ro_drv_tbl
 = {

171 .
›s
 = &
my_ro_›s
,

172 .
	gsize
 =  (
my_ro_drv_tbl
),

176 
πems_libi2c_drv_t
 *
	gi2c_2b_ì¥om_drivî_des¸ùt‹
 = &
my_drv_tbl
;

177 
πems_libi2c_drv_t
 *
	gi2c_2b_ì¥om_ro_drivî_des¸ùt‹
 = &
my_ro_drv_tbl
;

	@src/libchip/i2c/i2c-2b-eeprom.h

1 #i‚de‡
I2C_2B_EEPROM_DRIVER_H


2 
	#I2C_2B_EEPROM_DRIVER_H


	)

55 
	~<πems.h
>

56 
	~<πems/libi2c.h
>

58 #ifde‡
__˝lu•lus


65 
πems_libi2c_drv_t
 *
i2c_2b_ì¥om_ro_drivî_des¸ùt‹
;

68 
πems_libi2c_drv_t
 *
i2c_2b_ì¥om_drivî_des¸ùt‹
;

70 #ifde‡
__˝lu•lus


	@src/libchip/i2c/i2c-ds1621.c

51 
	~<πems.h
>

52 
	~<πems/libi2c.h
>

54 
	~<libchù/i2c-ds1621.h
>

56 
	~<πems/libio.h
>

59 
πems_°©us_code


60 
	$ds1621_öô
 (
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
,

61 *
¨g
)

63 
sc
;

64 
c§
[2] = { 
DS1621_CMD_CSR_ACCESS
, 0 }, 
cmd
;

69 
sc
 = 
	`πems_libi2c_°¨t_wrôe_byãs
 (
mö‹
, 
c§
, 1);

70 i‡(
sc
 < 0)

71  -
sc
;

73 
sc
 = 
	`πems_libi2c_°¨t_ªad_byãs
 (
mö‹
, 
c§
 + 1, 1);

74 i‡(
sc
 < 0)

75  -
sc
;

77 
c§
[1] &~
DS1621_CSR_1SHOT
;

79 
sc
 = 
	`πems_libi2c_°¨t_wrôe_byãs
 (
mö‹
, 
c§
, 2);

80 i‡(
sc
 < 0)

81  -
sc
;

84 
cmd
 = 
DS1621_CMD_START_CONV
;

86 
sc
 = 
	`πems_libi2c_°¨t_wrôe_byãs
 (
mö‹
, &
cmd
, 1);

87 i‡(
sc
 < 0)

88  -
sc
;

93  
	`πems_libi2c_£nd_°›
 (
mö‹
);

94 
	}
}

96 
πems_°©us_code


97 
	$ds1621_ªad
 (
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
,

98 *
¨g
)

100 
sc
;

101 
πems_libio_rw_¨gs_t
 *
rw¨gs
 = 
¨g
;

102 
cmd
 = 
DS1621_CMD_READ_TEMP
;

104 
sc
 = 
	`πems_libi2c_°¨t_wrôe_byãs
 (
mö‹
, &
cmd
, 1);

105 i‡(
sc
 < 0)

106  -
sc
;

107 i‡(
sc
 < 1)

108  
RTEMS_IO_ERROR
;

109 
sc
 = 
	`πems_libi2c_°¨t_ªad_byãs
(
mö‹
, (*)
rw¨gs
->
buf„r
, 1);

110 i‡(
sc
 < 0) {

111 
rw¨gs
->
byãs_moved
 = 0;

112  -
sc
;

114 
rw¨gs
->
byãs_moved
 = 1;

115  
	`πems_libi2c_£nd_°›
 (
mö‹
);

116 
	}
}

118 
πems_drivî_addªss_èbÀ
 
	gmy›s
 = {

119 .
öôüliz©i⁄_íåy
 = 
ds1621_öô
,

120 .
	gªad_íåy
 = 
ds1621_ªad
,

123 
πems_libi2c_drv_t
 
	gmy_drv_tbl
 = {

124 .
›s
 = &
my›s
,

125 .
	gsize
 =  (
my_drv_tbl
),

128 
πems_libi2c_drv_t
 *
	gi2c_ds1621_drivî_des¸ùt‹
 = &
my_drv_tbl
;

	@src/libchip/i2c/i2c-ds1621.h

1 #i‚de‡
I2C_DS_1621_DRIVER_H


2 
	#I2C_DS_1621_DRIVER_H


	)

55 
	#DS1621_CMD_READ_TEMP
 0xØ

	)

56 
	#DS1621_CMD_CSR_ACCESS
 0xac

	)

57 
	#DS1621_CMD_START_CONV
 0xì

	)

60 
	#DS1621_CSR_DONE
 (1<<7)

	)

61 
	#DS1621_CSR_TEMP_HI
 (1<<6Ë

	)

62 
	#DS1621_CSR_TEMP_LO
 (1<<5Ë

	)

63 
	#DS1621_CSR_NVMEM_BSY
 (1<<4Ë

	)

64 
	#DS1621_CSR_OUT_POL
 (1<<1Ë

	)

65 
	#DS1621_CSR_1SHOT
 (1<<0Ë

	)

67 
	~<πems.h
>

68 
	~<πems/libi2c.h
>

70 #ifde‡
__˝lu•lus


75 
πems_libi2c_drv_t
 *
i2c_ds1621_drivî_des¸ùt‹
;

77 #ifde‡
__˝lu•lus


	@src/libchip/i2c/i2c-sc620.c

21 #ifde‡
HAVE_CONFIG_H


22 
	~"c⁄fig.h
"

25 
	~<libchù/i2c-sc620.h
>

27 
	~<πems/libio.h
>

29 
	#SC620_REG_COUNT
 10

	)

31 
πems_°©us_code
 
	$i2c_sc620_wrôe
(

32 
πems_devi˚_maj‹_numbî
 
maj‹
,

33 
πems_devi˚_mö‹_numbî
 
mö‹
,

34 *
¨g


37 
πems_°©us_code
 
sc
 = 
RTEMS_IO_ERROR
;

38 
πems_libio_rw_¨gs_t
 *
rw
 = 
¨g
;

39 *
buf
 = (*Ë&
rw
->
buf„r
[0];

41 i‡(
rw
->
cou¡
 =2 && 
buf
[0] < 
SC620_REG_COUNT
) {

42 
rv
;

44 
rv
 = 
	`πems_libi2c_°¨t_wrôe_byãs
(

45 
mö‹
, 
buf
, 2

47 i‡(
rv
 == 2) {

48 
sc
 = 
	`πems_libi2c_£nd_°›
(
mö‹
);

52 
rw
->
byãs_moved
 = 
sc
 =
RTEMS_SUCCESSFUL
 ? 2 : 0;

54  
sc
;

55 
	}
}

57 
πems_°©us_code
 
	$i2c_sc620_ªad
(

58 
πems_devi˚_maj‹_numbî
 
maj‹
,

59 
πems_devi˚_mö‹_numbî
 
mö‹
,

60 *
¨g


63 
πems_°©us_code
 
sc
 = 
RTEMS_IO_ERROR
;

64 
πems_libio_rw_¨gs_t
 *
rw
 = 
¨g
;

65 *
buf
 = (*Ë&
rw
->
buf„r
[0];

67 i‡(
rw
->
cou¡
 =1 && 
buf
[0] < 
SC620_REG_COUNT
) {

68 
rv
;

70 
rv
 = 
	`πems_libi2c_°¨t_wrôe_byãs
(
mö‹
, 
buf
, 1);

71 i‡(
rv
 == 1) {

72 
sc
 = 
	`πems_libi2c_£nd_addr
(
mö‹
, 0);

73 i‡(
sc
 =
RTEMS_SUCCESSFUL
) {

74 
rv
 = 
	`πems_libi2c_ªad_byãs
(
mö‹
, 
buf
, 1);

75 i‡(
rv
 == 1) {

76 
sc
 = 
	`πems_libi2c_£nd_°›
(
mö‹
);

82 
rw
->
byãs_moved
 = 
sc
 =
RTEMS_SUCCESSFUL
 ? 1 : 0;

84  
sc
;

85 
	}
}

87 
πems_drivî_addªss_èbÀ
 
	gi2c_sc620_›s
 = {

88 .
ªad_íåy
 = 
i2c_sc620_ªad
,

89 .
	gwrôe_íåy
 = 
i2c_sc620_wrôe


92 
πems_libi2c_drv_t
 
	gi2c_sc620_drivî
 = {

93 .
›s
 = &
i2c_sc620_›s
,

94 .
	gsize
 = (
i2c_sc620_drivî
)

	@src/libchip/i2c/i2c-sc620.h

15 #i‚de‡
I2C_SC620_H


16 
	#I2C_SC620_H


	)

18 
	~<πems/libi2c.h
>

20 #ifde‡
__˝lu•lus


34 
πems_libi2c_drv_t
 
i2c_sc620_drivî
;

36 #ifde‡
__˝lu•lus


	@src/libchip/i2c/spi-flash-m25p40.c

19 
	~<πems.h
>

20 
	~<πems/libi2c.h
>

22 
	~<libchù/•i-Êash-m25p40.h
>

23 
	~<πems/libio.h
>

26 
•i_memdrv_t
 
	g•i_Êash_m25p40_rw_drv_t
 = {

28 .
›s
 = &
•i_memdrv_rw_›s
,

29 .
	gsize
 =  (
•i_Êash_m25p40_rw_drv_t
),

32 .
	gbaudøã
 = 2000000,

33 .
	gîa£_bef‹e_¥ogøm
 = 
åue
,

34 .
	gem±y_°©e
 = 0xff,

35 .
	g∑ge_size
 = 256,

36 .
	g£˘‹_size
 = 0x10000,

37 .
	gmem_size
 = 0x80000,

41 
πems_libi2c_drv_t
 *
	g•i_Êash_m25p40_rw_drivî_des¸ùt‹
 =

42 &
•i_Êash_m25p40_rw_drv_t
.
libi2c_drv_íåy
;

44 
•i_memdrv_t
 
	g•i_Êash_m25p40_ro_drv_t
 = {

46 .
›s
 = &
•i_memdrv_ro_›s
,

47 .
	gsize
 =  (
•i_Êash_m25p40_ro_drv_t
),

50 .
	gbaudøã
 = 2000000,

51 .
	gîa£_bef‹e_¥ogøm
 = 
åue
,

52 .
	gem±y_°©e
 = 0xff,

53 .
	g∑ge_size
 = 256,

54 .
	g£˘‹_size
 = 0x10000,

55 .
	gmem_size
 = 0x80000,

59 
πems_libi2c_drv_t
 *
	g•i_Êash_m25p40_ro_drivî_des¸ùt‹
 =

60 &
•i_Êash_m25p40_ro_drv_t
.
libi2c_drv_íåy
;

	@src/libchip/i2c/spi-flash-m25p40.h

24 #i‚de‡
_LIBCHIP_SPI_FLASH_M25P40_H


25 
	#_LIBCHIP_SPI_FLASH_M25P40_H


	)

27 
	~<libchù/•i-memdrv.h
>

29 #ifde‡
__˝lu•lus


36 
πems_libi2c_drv_t
 *
•i_Êash_m25p40_rw_drivî_des¸ùt‹
;

38 
πems_libi2c_drv_t
 *
•i_Êash_m25p40_ro_drivî_des¸ùt‹
;

40 #ifde‡
__˝lu•lus


	@src/libchip/i2c/spi-fram-fm25l256.c

19 
	~<πems.h
>

20 
	~<πems/libi2c.h
>

22 
	~<libchù/•i-‰am-fm25l256.h
>

23 
	~<πems/libio.h
>

26 
•i_memdrv_t
 
	g•i_‰am_fm25l256_rw_drv_t
 = {

28 .
›s
 = &
•i_memdrv_rw_›s
,

29 .
	gsize
 =  (
•i_‰am_fm25l256_rw_drv_t
),

32 .
	gbaudøã
 = 2000000,

33 .
	gîa£_bef‹e_¥ogøm
 = 
Ál£
,

34 .
	gem±y_°©e
 = 0xff,

35 .
	g∑ge_size
 = 0x8000,

36 .
	g£˘‹_size
 = 1,

37 .
	gmem_size
 = 0x8000,

41 
πems_libi2c_drv_t
 *
	g•i_‰am_fm25l256_rw_drivî_des¸ùt‹
 =

42 &
•i_‰am_fm25l256_rw_drv_t
.
libi2c_drv_íåy
;

44 
•i_memdrv_t
 
	g•i_‰am_fm25l256_ro_drv_t
 = {

46 .
›s
 = &
•i_memdrv_ro_›s
,

47 .
	gsize
 =  (
•i_‰am_fm25l256_ro_drv_t
),

50 .
	gbaudøã
 = 2000000,

51 .
	gîa£_bef‹e_¥ogøm
 = 
Ál£
,

52 .
	gem±y_°©e
 = 0xff,

53 .
	g∑ge_size
 = 0x8000,

54 .
	g£˘‹_size
 = 1,

55 .
	gmem_size
 = 0x8000,

59 
πems_libi2c_drv_t
 *
	g•i_‰am_fm25l256_ro_drivî_des¸ùt‹
 =

60 &
•i_‰am_fm25l256_ro_drv_t
.
libi2c_drv_íåy
;

	@src/libchip/i2c/spi-fram-fm25l256.h

24 #i‚de‡
_LIBCHIP_SPI_FRAM_FM25L256_H


25 
	#_LIBCHIP_SPI_FRAM_FM25L256_H


	)

27 
	~<libchù/•i-memdrv.h
>

29 #ifde‡
__˝lu•lus


36 
πems_libi2c_drv_t
 *
•i_‰am_fm25l256_rw_drivî_des¸ùt‹
;

38 
πems_libi2c_drv_t
 *
•i_‰am_fm25l256_ro_drivî_des¸ùt‹
;

40 #ifde‡
__˝lu•lus


	@src/libchip/i2c/spi-memdrv.c

24 
	~<πems.h
>

25 
	~<πems/libi2c.h
>

27 
	~<libchù/•i-memdrv.h
>

28 
	~<πems/libio.h
>

30 
	#SPI_MEM_CMD_WREN
 0x06

	)

31 
	#SPI_MEM_CMD_WRDIS
 0x04

	)

32 
	#SPI_MEM_CMD_RDID
 0x9F

	)

33 
	#SPI_MEM_CMD_RDSR
 0x05

	)

34 
	#SPI_MEM_CMD_WRSR
 0x01

	)

35 
	#SPI_MEM_CMD_READ
 0x03

	)

36 
	#SPI_MEM_CMD_PP
 0x02

	)

37 
	#SPI_MEM_CMD_SE
 0xD8

	)

38 
	#SPI_MEM_CMD_BE
 0xC7

	)

39 
	#SPI_MEM_CMD_DP
 0xB9

	)

40 
	#SPI_MEM_CMD_RES
 0xAB

	)

45 
πems_°©us_code
 
	g•i_memdrv_mö‹2∑øm_±r


53 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

54 
•i_memdrv_∑øm_t
 **
	g∑øm_±r


61 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

62 
•i_memdrv_t
 *
	gdrv_±r
;

64 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

65 
rc
 = -
πems_libi2c_io˘l
(
mö‹
,

66 
RTEMS_LIBI2C_IOCTL_GET_DRV_T
,

67 &
drv_±r
);

69 i‡((
	grc
 =
RTEMS_SUCCESSFUL
) &&

70 (
drv_±r
->
libi2c_drv_íåy
.
size
 !(
•i_memdrv_t
))) {

71 
rc
 = 
RTEMS_INVALID_SIZE
;

73 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

74 *
∑øm_±r
 = &(
drv_±r
->
•i_memdrv_∑øm
);

76  
	grc
;

82 
πems_°©us_code
 
	g•i_memdrv_waô_ms


90 
	gms


97 
πems_öãrvÆ
 
	gticks_≥r_£c⁄d
;

99 
	gticks_≥r_£c⁄d
 = 
πems_˛ock_gë_ticks_≥r_£c⁄d
();

100 (Ë
πems_èsk_wake_a·î
(
ticks_≥r_£c⁄d
 * 
ms
 / 1000);

107 
πems_°©us_code
 
	g•i_memdrv_wrôe


115 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

116 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

117 *
	g¨g


124 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

125 
πems_libio_rw_¨gs_t
 *
	grw¨gs
 = 
¨g
;

126 
off_t
 
	goff
 = 
rw¨gs
->
off£t
;

127 
	g˙t
 = 
rw¨gs
->
cou¡
;

128 *
	gbuf
 = (*)
rw¨gs
->
buf„r
;

129 
	gbyãs_£¡
 = 0;

130 
	gcuº_˙t
;

131 
	gcmdbuf
[4];

132 
	gªt_˙t
 = 0;

133 
	gcmd_size
;

134 
•i_memdrv_∑øm_t
 *
	gmem_∑øm_±r
;

135 
πems_libi2c_t‰_mode_t
 
	gt‰_mode
 = {

136 .
baudøã
 = 20000000,

137 .
	gbôs_≥r_ch¨
 = 8,

138 .
	glsb_fú°
 = 
FALSE
,

139 .
	g˛ock_öv
 = 
FALSE
,

140 .
	g˛ock_phs
 = 
FALSE


146 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

147 
rc
 = 
•i_memdrv_mö‹2∑øm_±r
(
mö‹
,&
mem_∑øm_±r
);

152 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

153 i‡((
˙t
 <= 0) ||

154 (
˙t
 > 
mem_∑øm_±r
->
mem_size
) ||

155 (
off
 > (
mem_∑øm_±r
->
mem_size
-
˙t
))) {

156 
rc
 = 
RTEMS_INVALID_SIZE
;

158 i‡(
	gbuf
 =
NULL
) {

159 
rc
 = 
RTEMS_INVALID_ADDRESS
;

162 (
	grc
 =
RTEMS_SUCCESSFUL
) &&

163 (
˙t
 > 
byãs_£¡
)) {

164 
cuº_˙t
 = 
˙t
 - 
byãs_£¡
;

165 i‡((
	gmem_∑øm_±r
->
	g∑ge_size
 > 0) &&

166 (
	goff
 / 
	gmem_∑øm_±r
->
	g∑ge_size
) !=

167 ((
off
+
cuº_˙t
+1Ë/ 
mem_∑øm_±r
->
∑ge_size
)) {

168 
cuº_˙t
 = 
mem_∑øm_±r
->
∑ge_size
 - (
off
 % mem_param_ptr->page_size);

173 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

174 
rc
 = 
πems_libi2c_£nd_°¨t
(
mö‹
);

179 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

180 
t‰_mode
.
baudøã
 = 
mem_∑øm_±r
->baudrate;

181 
	grc
 = -
πems_libi2c_io˘l
(
mö‹
,

182 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
,

183 &
t‰_mode
);

189 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

190 
rc
 = 
πems_libi2c_£nd_addr
(
mö‹
,
TRUE
);

196 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

197 
cmdbuf
[0] = 
SPI_MEM_CMD_WREN
;

198 
	gªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
mö‹
,
cmdbuf
,1);

199 i‡(
	gªt_˙t
 < 0) {

200 
	grc
 = -
ªt_˙t
;

206 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

207 
rc
 = 
πems_libi2c_£nd_°›
(
mö‹
);

212 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

213 
rc
 = 
πems_libi2c_£nd_°¨t
(
mö‹
);

219 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

220 
rc
 = 
πems_libi2c_£nd_addr
(
mö‹
,
TRUE
);

226 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

227 
rc
 = -
πems_libi2c_io˘l
(
mö‹
,

228 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
,

229 &
t‰_mode
);

234 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

235 
cmdbuf
[0] = 
SPI_MEM_CMD_PP
;

236 i‡(
	gmem_∑øm_±r
->
	gmem_size
 > 0x10000 ) {

237 
	gcmdbuf
[1] = (
off
 >> 16) & 0xff;

238 
	gcmdbuf
[2] = (
off
 >> 8) & 0xff;

239 
	gcmdbuf
[3] = (
off
 >> 0) & 0xff;

240 
	gcmd_size
 = 4;

242 i‡(
	gmem_∑øm_±r
->
	gmem_size
 > 256) {

243 
	gcmdbuf
[1] = (
off
 >> 8) & 0xff;

244 
	gcmdbuf
[2] = (
off
 >> 0) & 0xff;

245 
	gcmd_size
 = 3;

248 
	gcmdbuf
[1] = (
off
 >> 0) & 0xff;

249 
	gcmd_size
 = 1;

252 
	gªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
mö‹
,
cmdbuf
,
cmd_size
);

253 i‡(
	gªt_˙t
 < 0) {

254 
	grc
 = -
ªt_˙t
;

260 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

261 
ªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
mö‹
,
buf
,
cuº_˙t
);

262 i‡(
	gªt_˙t
 < 0) {

263 
	grc
 = -
ªt_˙t
;

269 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

270 
rc
 = 
πems_libi2c_£nd_°›
(
mö‹
);

276 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

277 
rc
 = 
•i_memdrv_waô_ms
(5);

282 
	gbyãs_£¡
 +
cuº_˙t
;

283 
	goff
 +
cuº_˙t
;

284 
	gbuf
 +
cuº_˙t
;

286 
	grw¨gs
->
	gbyãs_moved
 = 
byãs_£¡
;

287  
	grc
;

293 
πems_°©us_code
 
	g•i_memdrv_ªad


301 
πems_devi˚_maj‹_numbî
 
	gmaj‹
,

302 
πems_devi˚_mö‹_numbî
 
	gmö‹
,

303 *
	g¨g


310 
πems_°©us_code
 
	grc
 = 
RTEMS_SUCCESSFUL
;

311 
πems_libio_rw_¨gs_t
 *
	grw¨gs
 = 
¨g
;

312 
off_t
 
	goff
 = 
rw¨gs
->
off£t
;

313 
	g˙t
 = 
rw¨gs
->
cou¡
;

314 *
	gbuf
 = (*)
rw¨gs
->
buf„r
;

315 
	gcmdbuf
[4];

316 
	gªt_˙t
 = 0;

317 
	gcmd_size
;

318 
•i_memdrv_∑øm_t
 *
	gmem_∑øm_±r
;

319 
πems_libi2c_t‰_mode_t
 
	gt‰_mode
 = {

320 .
baudøã
 = 20000000,

321 .
	gbôs_≥r_ch¨
 = 8,

322 .
	glsb_fú°
 = 
FALSE
,

323 .
	g˛ock_öv
 = 
FALSE
,

324 .
	g˛ock_phs
 = 
FALSE


330 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

331 
rc
 = 
•i_memdrv_mö‹2∑øm_±r
(
mö‹
,&
mem_∑øm_±r
);

336 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

337 i‡((
˙t
 <= 0) ||

338 (
˙t
 > 
mem_∑øm_±r
->
mem_size
) ||

339 (
off
 > (
mem_∑øm_±r
->
mem_size
-
˙t
))) {

340 
rc
 = 
RTEMS_INVALID_SIZE
;

342 i‡(
	gbuf
 =
NULL
) {

343 
rc
 = 
RTEMS_INVALID_ADDRESS
;

349 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

350 
rc
 = 
πems_libi2c_£nd_°¨t
(
mö‹
);

355 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

356 
t‰_mode
.
baudøã
 = 
mem_∑øm_±r
->baudrate;

357 
	grc
 = -
πems_libi2c_io˘l
(
mö‹
,

358 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
,

359 &
t‰_mode
);

364 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

365 
rc
 = 
πems_libi2c_£nd_addr
(
mö‹
,
TRUE
);

368 i‡(
	goff
 >
mem_∑øm_±r
->
mem_size
) {

375 i‡(
rc
 =
RTEMS_SUCCESSFUL
) {

376 
cmdbuf
[0] = 
SPI_MEM_CMD_RDSR
;

377 
	gªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
mö‹
,
cmdbuf
,1);

378 i‡(
	gªt_˙t
 < 0) {

379 
	grc
 = -
ªt_˙t
;

387 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

388 
cmdbuf
[0] = 
SPI_MEM_CMD_READ
;

389 i‡(
	gmem_∑øm_±r
->
	gmem_size
 > 0x10000 ) {

390 
	gcmdbuf
[1] = (
off
 >> 16) & 0xff;

391 
	gcmdbuf
[2] = (
off
 >> 8) & 0xff;

392 
	gcmdbuf
[3] = (
off
 >> 0) & 0xff;

393 
	gcmd_size
 = 4;

395 i‡(
	gmem_∑øm_±r
->
	gmem_size
 > 256) {

396 
	gcmdbuf
[1] = (
off
 >> 8) & 0xff;

397 
	gcmdbuf
[2] = (
off
 >> 0) & 0xff;

398 
	gcmd_size
 = 3;

401 
	gcmdbuf
[1] = (
off
 >> 0) & 0xff;

402 
	gcmd_size
 = 1;

404 
	gªt_˙t
 = 
πems_libi2c_wrôe_byãs
(
mö‹
,
cmdbuf
,
cmd_size
);

405 i‡(
	gªt_˙t
 < 0) {

406 
	grc
 = -
ªt_˙t
;

413 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

414 
ªt_˙t
 = 
πems_libi2c_ªad_byãs
 (
mö‹
,
buf
,
˙t
);

415 i‡(
	gªt_˙t
 < 0) {

416 
	grc
 = -
ªt_˙t
;

423 i‡(
	grc
 =
RTEMS_SUCCESSFUL
) {

424 
rc
 = 
πems_libi2c_£nd_°›
(
mö‹
);

426 
	grw¨gs
->
	gbyãs_moved
 = (
rc
 =
RTEMS_SUCCESSFUL
Ë? 
ªt_˙t
 : 0;

428  
	grc
;

434 
πems_drivî_addªss_èbÀ
 
	g•i_memdrv_rw_›s
 = {

435 .
ªad_íåy
 = 
•i_memdrv_ªad
,

436 .
	gwrôe_íåy
 = 
•i_memdrv_wrôe


439 
πems_drivî_addªss_èbÀ
 
	g•i_memdrv_ro_›s
 = {

440 .
ªad_íåy
 = 
•i_memdrv_ªad
,

	@src/libchip/i2c/spi-memdrv.h

20 #i‚de‡
_LIBCHIP_SPI_MEMDRV_H


21 
	#_LIBCHIP_SPI_MEMDRV_H


	)

23 
	~<πems/libi2c.h
>

25 #ifde‡
__˝lu•lus


32 
πems_°©us_code
 
•i_memdrv_wrôe


40 
πems_devi˚_maj‹_numbî
 
maj‹
,

41 
πems_devi˚_maj‹_numbî
 
mö‹
,

42 *
¨g


52 
πems_°©us_code
 
•i_memdrv_ªad


60 
πems_devi˚_maj‹_numbî
 
maj‹
,

61 
πems_devi˚_maj‹_numbî
 
mö‹
,

62 *
¨g


70 
uöt32_t
 
baudøã
;

71 
boﬁ
 
îa£_bef‹e_¥ogøm
;

72 
uöt32_t
 
em±y_°©e
;

73 
uöt32_t
 
∑ge_size
;

74 
uöt32_t
 
£˘‹_size
;

75 
uöt32_t
 
mem_size
;

76 } 
	t•i_memdrv_∑øm_t
;

79 
πems_libi2c_drv_t
 
libi2c_drv_íåy
;

80 
•i_memdrv_∑øm_t
 
•i_memdrv_∑øm
;

81 } 
	t•i_memdrv_t
;

83 
πems_drivî_addªss_èbÀ
 
•i_memdrv_rw_›s
;

84 
πems_drivî_addªss_èbÀ
 
•i_memdrv_ro_›s
;

86 #ifde‡
__˝lu•lus


	@src/libchip/i2c/spi-sd-card.c

20 
	~<°dio.h
>

21 
	~<°rög.h
>

22 
	~<î∫o.h
>

23 
	~<öây≥s.h
>

25 
	~<πems.h
>

26 
	~<πems/libi2c.h
>

27 
	~<πems/libio.h
>

28 
	~<πems/diskdevs.h
>

29 
	~<πems/blkdev.h
>

31 
	~<libchù/•i-sd-ˇrd.h
>

33 
	~<πems/°©us-checks.h
>

40 
ölöe
 
uöt16_t
 
	$sd_ˇrd_gë_uöt16
–c⁄° 
uöt8_t
 *
s
)

42  (
uöt16_t
Ë((
s
 [0] << 8) | s [1]);

43 
	}
}

45 
ölöe
 
uöt32_t
 
	$sd_ˇrd_gë_uöt32
–c⁄° 
uöt8_t
 *
s
)

47  ((
uöt32_t
Ë
s
 [0] << 24) | ((uint32_t) s [1] << 16) | ((uint32_t) s [2] << 8) | (uint32_t) s [3];

48 
	}
}

50 
ölöe
 
	$sd_ˇrd_put_uöt16
–
uöt16_t
 
v
, 
uöt8_t
 *
s
)

52 *
s
++ = (
uöt8_t
Ë(
v
 >> 8);

53 *
s
 = (
uöt8_t
Ë(
v
);

54 
	}
}

56 
ölöe
 
	$sd_ˇrd_put_uöt32
–
uöt32_t
 
v
, 
uöt8_t
 *
s
)

58 *
s
++ = (
uöt8_t
Ë(
v
 >> 24);

59 *
s
++ = (
uöt8_t
Ë(
v
 >> 16);

60 *
s
++ = (
uöt8_t
Ë(
v
 >> 8);

61 *
s
 = (
uöt8_t
Ë(
v
);

62 
	}
}

66 
	#SD_CARD_BUSY_TOKEN
 0

	)

68 
	#SD_CARD_BLOCK_SIZE_DEFAULT
 512

	)

70 
	#SD_CARD_COMMAND_RESPONSE_START
 7

	)

77 
	#SD_CARD_CMD_GO_IDLE_STATE
 0

	)

78 
	#SD_CARD_CMD_SEND_OP_COND
 1

	)

79 
	#SD_CARD_CMD_SEND_IF_COND
 8

	)

80 
	#SD_CARD_CMD_SEND_CSD
 9

	)

81 
	#SD_CARD_CMD_SEND_CID
 10

	)

82 
	#SD_CARD_CMD_STOP_TRANSMISSION
 12

	)

83 
	#SD_CARD_CMD_SEND_STATUS
 13

	)

84 
	#SD_CARD_CMD_SET_BLOCKLEN
 16

	)

85 
	#SD_CARD_CMD_READ_SINGLE_BLOCK
 17

	)

86 
	#SD_CARD_CMD_READ_MULTIPLE_BLOCK
 18

	)

87 
	#SD_CARD_CMD_SET_BLOCK_COUNT
 23

	)

88 
	#SD_CARD_CMD_WRITE_BLOCK
 24

	)

89 
	#SD_CARD_CMD_WRITE_MULTIPLE_BLOCK
 25

	)

90 
	#SD_CARD_CMD_PROGRAM_CSD
 27

	)

91 
	#SD_CARD_CMD_SET_WRITE_PROT
 28

	)

92 
	#SD_CARD_CMD_CLR_WRITE_PROT
 29

	)

93 
	#SD_CARD_CMD_SEND_WRITE_PROT
 30

	)

94 
	#SD_CARD_CMD_TAG_SECTOR_START
 32

	)

95 
	#SD_CARD_CMD_TAG_SECTOR_END
 33

	)

96 
	#SD_CARD_CMD_UNTAG_SECTOR
 34

	)

97 
	#SD_CARD_CMD_TAG_ERASE_GROUP_START
 35

	)

98 
	#SD_CARD_CMD_TAG_ERASE_GROUP_END
 36

	)

99 
	#SD_CARD_CMD_UNTAG_ERASE_GROUP
 37

	)

100 
	#SD_CARD_CMD_ERASE
 38

	)

101 
	#SD_CARD_CMD_LOCK_UNLOCK
 42

	)

102 
	#SD_CARD_CMD_APP_CMD
 55

	)

103 
	#SD_CARD_CMD_GEN_CND
 56

	)

104 
	#SD_CARD_CMD_READ_OCR
 58

	)

105 
	#SD_CARD_CMD_CRC_ON_OFF
 59

	)

114 
	#SD_CARD_ACMD_SD_SEND_OP_COND
 41

	)

123 
	#SD_CARD_FLAG_HCS
 0x40000000U

	)

125 
	#SD_CARD_FLAG_VHS_2_7_TO_3_3
 0x00000100U

	)

127 
	#SD_CARD_FLAG_CHECK_PATTERN
 0x000000ØU

	)

136 
	#SD_CARD_COMMAND_SET_COMMAND
–
c
, 
cmd
Ë(cË[1] = (
uöt8_t
Ë(0x40 + ((cmdË& 0x3f))

	)

138 
	#SD_CARD_COMMAND_SET_ARGUMENT
–
c
, 
¨g
Ë
	`sd_ˇrd_put_uöt32
–◊rg), &((cË[2]))

	)

140 
	#SD_CARD_COMMAND_SET_CRC7
–
c
, 
¸c7
Ë((cË[6] = ((¸c7Ë<< 1Ë| 1U)

	)

142 
	#SD_CARD_COMMAND_GET_CRC7
–
c
Ë((cË[6] >> 1)

	)

151 
	#SD_CARD_IS_RESPONSE
–
r
Ë((‘Ë& 0x80Ë=0)

	)

153 
	#SD_CARD_IS_ERRORLESS_RESPONSE
–
r
Ë((‘Ë& 0x7eË=0)

	)

155 
	#SD_CARD_IS_NOT_IDLE_RESPONSE
–
r
Ë((‘Ë& 0x81Ë=0)

	)

157 
	#SD_CARD_IS_DATA_ERROR
–
r
Ë((‘Ë& 0xe0Ë=0)

	)

159 
	#SD_CARD_IS_DATA_REJECTED
–
r
Ë((‘Ë& 0x1fË!0x05)

	)

168 
	#SD_CARD_CID_SIZE
 16

	)

170 
	#SD_CARD_CID_GET_MID
–
cid
Ë((cidË[0])

	)

171 
	#SD_CARD_CID_GET_OID
–
cid
Ë
	`sd_ˇrd_gë_uöt16
–cid + 1)

	)

172 
	#SD_CARD_CID_GET_PNM
–
cid
, 
i
Ë((Ë(cidË[3 + (i)])

	)

173 
	#SD_CARD_CID_GET_PRV
–
cid
Ë((cidË[9])

	)

174 
	#SD_CARD_CID_GET_PSN
–
cid
Ë
	`sd_ˇrd_gë_uöt32
–cid + 10)

	)

175 
	#SD_CARD_CID_GET_MDT
–
cid
Ë((cidË[14])

	)

176 
	#SD_CARD_CID_GET_CRC7
–
cid
Ë((cidË[15] >> 1)

	)

185 
	#SD_CARD_CSD_SIZE
 16

	)

187 
	#SD_CARD_CSD_GET_CSD_STRUCTURE
–
csd
Ë((csdË[0] >> 6)

	)

188 
	#SD_CARD_CSD_GET_SPEC_VERS
–
csd
Ë(((csdË[0] >> 2Ë& 0xf)

	)

189 
	#SD_CARD_CSD_GET_TAAC
–
csd
Ë((csdË[1])

	)

190 
	#SD_CARD_CSD_GET_NSAC
–
csd
Ë((
uöt32_t
Ë(csdË[2])

	)

191 
	#SD_CARD_CSD_GET_TRAN_SPEED
–
csd
Ë((csdË[3])

	)

192 
	#SD_CARD_CSD_GET_C_SIZE
–
csd
Ë((((
uöt32_t
Ë(csdË[6] & 0x3Ë<< 10Ë+ (((uöt32_tË(csdË[7]Ë<< 2Ë+ ((((uöt32_tË(csdË[8]Ë>> 6Ë& 0x3))

	)

193 
	#SD_CARD_CSD_GET_C_SIZE_MULT
–
csd
Ë((((csdË[9] & 0x3Ë<< 1Ë+ (((csdË[10] >> 7Ë& 0x1))

	)

194 
	#SD_CARD_CSD_GET_READ_BLK_LEN
–
csd
Ë((
uöt32_t
Ë(csdË[5] & 0xf)

	)

195 
	#SD_CARD_CSD_GET_WRITE_BLK_LEN
–
csd
Ë((((
uöt32_t
Ë(csdË[12] & 0x3Ë<< 2Ë+ ((((uöt32_tË(csdË[13]Ë>> 6Ë& 0x3))

	)

196 
	#SD_CARD_CSD_1_GET_C_SIZE
–
csd
Ë((((
uöt32_t
Ë(csdË[7] & 0x3fË<< 16Ë+ (((uöt32_tË(csdË[8]Ë<< 8Ë+ (uöt32_tË(csdË[9])

	)

200 
	#SD_CARD_INVALIDATE_RESPONSE_INDEX
–
e
Ëe->
ª•⁄£_ödex
 = 
SD_CARD_COMMAND_SIZE


	)

207 
	#SD_CARD_START_BLOCK_SINGLE_BLOCK_READ
 0x„

	)

208 
	#SD_CARD_START_BLOCK_MULTIPLE_BLOCK_READ
 0x„

	)

209 
	#SD_CARD_START_BLOCK_SINGLE_BLOCK_WRITE
 0x„

	)

210 
	#SD_CARD_START_BLOCK_MULTIPLE_BLOCK_WRITE
 0xfc

	)

211 
	#SD_CARD_STOP_TRANSFER_MULTIPLE_BLOCK_WRITE
 0xfd

	)

220 
ölöe
 
uöt32_t
 
	$sd_ˇrd_block_numbî
–c⁄° 
uöt8_t
 *
csd
)

222 
uöt32_t
 
size
 = 
	`SD_CARD_CSD_GET_C_SIZE
–
csd
);

223 
uöt32_t
 
mu…
 = 1U << (
	`SD_CARD_CSD_GET_C_SIZE_MULT
–
csd
) + 2);

224  (
size
 + 1Ë* 
mu…
;

225 
	}
}

227 
ölöe
 
uöt32_t
 
	$sd_ˇrd_ˇ∑côy
–c⁄° 
uöt8_t
 *
csd
)

229 
uöt32_t
 
block_size
 = 1U << 
	`SD_CARD_CSD_GET_READ_BLK_LEN
–
csd
);

230  
	`sd_ˇrd_block_numbî
–
csd
Ë* 
block_size
;

231 
	}
}

233 
ölöe
 
uöt32_t
 
	$sd_ˇrd_å™s„r_•ìd
–c⁄° 
uöt8_t
 *
csd
)

235 
uöt32_t
 
s
 = 
	`SD_CARD_CSD_GET_TRAN_SPEED
–
csd
);

236 
uöt32_t
 
e
 = 
s
 & 0x7;

237 
uöt32_t
 
m
 = 
s
 >> 3;

238 
e
) {

239 0: 
s
 = 10000; ;

240 1: 
s
 = 100000; ;

241 2: 
s
 = 1000000; ;

242 3: 
s
 = 10000000; ;

243 : 
s
 = 0; ;

245 
m
) {

246 1: 
s
 *= 10; ;

247 2: 
s
 *= 12; ;

248 3: 
s
 *= 13; ;

249 4: 
s
 *= 15; ;

250 5: 
s
 *= 20; ;

251 6: 
s
 *= 25; ;

252 7: 
s
 *= 30; ;

253 8: 
s
 *= 35; ;

254 9: 
s
 *= 40; ;

255 10: 
s
 *= 45; ;

256 11: 
s
 *= 50; ;

257 12: 
s
 *= 55; ;

258 13: 
s
 *= 60; ;

259 14: 
s
 *= 70; ;

260 15: 
s
 *= 80; ;

261 : 
s
 *= 0; ;

263  
s
;

264 
	}
}

266 
ölöe
 
uöt32_t
 
	$sd_ˇrd_ac˚ss_time
–c⁄° 
uöt8_t
 *
csd
)

268 
uöt32_t
 
ac
 = 
	`SD_CARD_CSD_GET_TAAC
–
csd
);

269 
uöt32_t
 
e
 = 
ac
 & 0x7;

270 
uöt32_t
 
m
 = 
ac
 >> 3;

271 
e
) {

272 0: 
ac
 = 1; ;

273 1: 
ac
 = 10; ;

274 2: 
ac
 = 100; ;

275 3: 
ac
 = 1000; ;

276 4: 
ac
 = 10000; ;

277 5: 
ac
 = 100000; ;

278 6: 
ac
 = 1000000; ;

279 7: 
ac
 = 10000000; ;

280 : 
ac
 = 0; ;

282 
m
) {

283 1: 
ac
 *= 10; ;

284 2: 
ac
 *= 12; ;

285 3: 
ac
 *= 13; ;

286 4: 
ac
 *= 15; ;

287 5: 
ac
 *= 20; ;

288 6: 
ac
 *= 25; ;

289 7: 
ac
 *= 30; ;

290 8: 
ac
 *= 35; ;

291 9: 
ac
 *= 40; ;

292 10: 
ac
 *= 45; ;

293 11: 
ac
 *= 50; ;

294 12: 
ac
 *= 55; ;

295 13: 
ac
 *= 60; ;

296 14: 
ac
 *= 70; ;

297 15: 
ac
 *= 80; ;

298 : 
ac
 *= 0; ;

300  
ac
 / 10;

301 
	}
}

303 
ölöe
 
uöt32_t
 
	$sd_ˇrd_max_ac˚ss_time
–c⁄° 
uöt8_t
 *
csd
, 
uöt32_t
 
å™s„r_•ìd
)

305 
uöt64_t
 
ac
 = 
	`sd_ˇrd_ac˚ss_time
–
csd
);

306 
uöt32_t
 
ac_100ms
 = 
å™s„r_•ìd
 / 80;

307 
uöt32_t
 
n
 = 
	`SD_CARD_CSD_GET_NSAC
–
csd
) * 100;

310 
ac
 =á¯* 
å™s„r_•ìd
 / 80000000;

311 
ac
 =á¯+ 100*
n
;

312 i‡((
uöt32_t
)
ac
 > 
ac_100ms
)

313  
ac_100ms
;

315  (
uöt32_t
)
ac
;

316 
	}
}

328 
uöt8_t
 
	$sd_ˇrd_compuã_¸c7
 (
uöt8_t
 *
d©a
, 
size_t
 
Àn
)

330 
uöt8_t
 
e
, 
f
, 
¸c
;

331 
size_t
 
i
;

333 
¸c
 = 0;

334 
i
 = 0; i < 
Àn
; i++) {

335 
e
 = 
¸c
 ^ 
d©a
[
i
];

336 
f
 = 
e
 ^ (e >> 4) ^ (e >> 7);

337 
¸c
 = (
f
 << 1) ^ (f << 4);

339  
¸c
 >> 1;

340 
	}
}

342 
uöt16_t
 
	$sd_ˇrd_compuã_¸c16
 (
uöt8_t
 *
d©a
, 
size_t
 
Àn
)

344 
uöt8_t
 
s
, 
t
;

345 
uöt16_t
 
¸c
;

346 
size_t
 
i
;

348 
¸c
 = 0;

349 
i
 = 0; i < 
Àn
; i++) {

350 
s
 = 
d©a
[
i
] ^ (
¸c
 >> 8);

351 
t
 = 
s
 ^ (s >> 4);

352 
¸c
 = (¸¯<< 8Ë^ 
t
 ^ (t << 5) ^ (t << 12);

354  
¸c
;

355 
	}
}

364 
ölöe
 
	$sd_ˇrd_quîy
–
sd_ˇrd_drivî_íåy
 *
e
, 
uöt8_t
 *
ö
, 
n
)

366  
	`πems_libi2c_ªad_byãs
–
e
->
bus
, 
ö
, 
n
);

367 
	}
}

369 
	$sd_ˇrd_waô
–
sd_ˇrd_drivî_íåy
 *
e
)

371 
rv
 = 0;

372 
r
 = 0;

373 
n
 = 2;

377 
ªåõs
 = 
e
->
n_ac_max
 * 25 / 10;

381 
waô_time_byãs
 = (
ªåõs
 + 149) / 150;

382 
e
->
busy
) {

384 
rv
 = 
	`sd_ˇrd_quîy
–
e
,É->
ª•⁄£
, 
n
);

385 
	`RTEMS_CHECK_RV
–
rv
, "Busy");

388 
r
 = 0;Ñ < 
n
; ++r) {

389 i‡(
e
->
ª•⁄£
 [
r
] !
SD_CARD_BUSY_TOKEN
) {

390 
e
->
busy
 = 
Ál£
;

394 
ªåõs
 -
n
;

395 i‡(
ªåõs
 <= 0) {

396  -
RTEMS_TIMEOUT
;

399 i‡(
e
->
scheduÀ_if_busy
) {

400 
uöt64_t
 
waô_time_us
 = 
waô_time_byãs
;

401 
waô_time_us
 *= 8000000;

402 
waô_time_us
 /
e
->
å™s„r_mode
.
baudøã
;

403 
	`πems_èsk_wake_a·î
–
	`RTEMS_MICROSECONDS_TO_TICKS
(
waô_time_us
));

404 
ªåõs
 -
waô_time_byãs
;

405 
waô_time_byãs
 = wait_time_bytes * 15 / 10;

407 
n
 = 
SD_CARD_COMMAND_SIZE
;

411 
	}
}

413 
	$sd_ˇrd_£nd_comm™d
–
sd_ˇrd_drivî_íåy
 *
e
, 
uöt32_t
 
comm™d
, uöt32_à
¨gumít
)

415 
rv
 = 0;

416 
πems_libi2c_ªad_wrôe_t
 
rw
 = {

417 .
rd_buf
 = 
e
->
ª•⁄£
,

418 .
wr_buf
 = 
e
->
comm™d
,

419 .
byã_˙t
 = 
SD_CARD_COMMAND_SIZE


421 
r
 = 0;

422 
uöt8_t
 
¸c7
;

424 
	`SD_CARD_INVALIDATE_RESPONSE_INDEX
–
e
);

427 
rv
 = 
	`sd_ˇrd_waô
–
e
);

428 
	`RTEMS_CHECK_RV
–
rv
, "Wait");

431 
	`SD_CARD_COMMAND_SET_COMMAND
–
e
->
comm™d
, command);

432 
	`SD_CARD_COMMAND_SET_ARGUMENT
–
e
->
comm™d
, 
¨gumít
);

433 
¸c7
 = 
	`sd_ˇrd_compuã_¸c7
–
e
->
comm™d
 + 1, 5);

434 
	`SD_CARD_COMMAND_SET_CRC7
–
e
->
comm™d
, 
¸c7
);

435 
rv
 = 
	`πems_libi2c_io˘l
–
e
->
bus
, 
RTEMS_LIBI2C_IOCTL_READ_WRITE
, &
rw
);

436 
	`RTEMS_CHECK_RV
–
rv
, "Write commandándÑeadÑesponse");

439 
r
 = 
SD_CARD_COMMAND_RESPONSE_START
;Ñ < 
SD_CARD_COMMAND_SIZE
; ++r) {

440 
	`RTEMS_DEBUG_PRINT
–"Tokí [%02u]: 0x%02x\n", 
r
, 
e
->
ª•⁄£
 [r]);

441 
e
->
ª•⁄£_ödex
 = 
r
;

442 i‡(
	`SD_CARD_IS_RESPONSE
–
e
->
ª•⁄£
 [
r
])) {

443 i‡(
	`SD_CARD_IS_ERRORLESS_RESPONSE
–
e
->
ª•⁄£
 [
r
])) {

446 
	`RTEMS_SYSLOG_ERROR
–"Comm™dÉº‹ [%02i]: 0x%02" 
PRIx8
 "\n", 
r
, 
e
->
ª•⁄£
 [r]);

447 
sd_ˇrd_£nd_comm™d_îr‹
;

449 } i‡(
e
->
ª•⁄£
 [
r
] !
SD_CARD_IDLE_TOKEN
) {

450 
	`RTEMS_SYSLOG_ERROR
–"U√x≥˘edÅokí [%02i]: 0x%02" 
PRIx8
 "\n", 
r
, 
e
->
ª•⁄£
 [r]);

451 
sd_ˇrd_£nd_comm™d_îr‹
;

455 
	`RTEMS_SYSLOG_ERROR
( "Timeout\n");

457 
sd_ˇrd_£nd_comm™d_îr‹
:

459 
	`RTEMS_SYSLOG_ERROR
( "Response:");

460 
r
 = 0;Ñ < 
SD_CARD_COMMAND_SIZE
; ++r) {

461 i‡(
e
->
ª•⁄£_ödex
 =
r
) {

462 
	`RTEMS_SYSLOG_PRINT
–" %02" 
PRIx8
 ":[%02" PRIx8 "]", 
e
->
comm™d
 [
r
],É->
ª•⁄£
 [r]);

464 
	`RTEMS_SYSLOG_PRINT
–" %02" 
PRIx8
 ":%02" PRIx8 "", 
e
->
comm™d
 [
r
],É->
ª•⁄£
 [r]);

467 
	`RTEMS_SYSLOG_PRINT
( "\n");

469  -
RTEMS_IO_ERROR
;

470 
	}
}

472 
	$sd_ˇrd_£nd_ªgi°î_comm™d
–
sd_ˇrd_drivî_íåy
 *
e
, 
uöt32_t
 
comm™d
, uöt32_à
¨gumít
, uöt32_à*
ªg
)

474 
rv
 = 0;

475 
uöt8_t
 
¸c7
;

477 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
comm™d
, 
¨gumít
);

478 
	`RTEMS_CHECK_RV
–
rv
, "Send command");

480 i‡(
e
->
ª•⁄£_ödex
 + 5 > 
SD_CARD_COMMAND_SIZE
) {

485 
	`RTEMS_SYSLOG_ERROR
( "UnexpectedÑesponseÖosition\n");

486  -
RTEMS_IO_ERROR
;

489 
¸c7
 = 
	`sd_ˇrd_compuã_¸c7
–
e
->
ª•⁄£
 +É->
ª•⁄£_ödex
, 5);

490 i‡(
¸c7
 !
	`SD_CARD_COMMAND_GET_CRC7
–
e
->
ª•⁄£
 +É->
ª•⁄£_ödex
) &&

491 
	`SD_CARD_COMMAND_GET_CRC7
–
e
->
ª•⁄£
 +É->
ª•⁄£_ödex
) != 0x7f) {

492 
	`RTEMS_SYSLOG_ERROR
( "CRC check failed onÑegister command\n");

493  -
RTEMS_IO_ERROR
;

496 *
ªg
 = 
	`sd_ˇrd_gë_uöt32
–
e
->
ª•⁄£
 +É->
ª•⁄£_ödex
 + 1);

499 
	}
}

501 
	$sd_ˇrd_°›_mu…ùÀ_block_ªad
–
sd_ˇrd_drivî_íåy
 *
e
)

503 
rv
 = 0;

504 
uöt8_t
 
¸c7
;

506 
	`SD_CARD_COMMAND_SET_COMMAND
–
e
->
comm™d
, 
SD_CARD_CMD_STOP_TRANSMISSION
);

507 
	`SD_CARD_COMMAND_SET_ARGUMENT
–
e
->
comm™d
, 0);

509 
¸c7
 = 0x30;

510 
	`SD_CARD_COMMAND_SET_CRC7
–
e
->
comm™d
, 
¸c7
);

511 
rv
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
,É->
comm™d
, 
SD_CARD_COMMAND_SIZE
);

512 
	`RTEMS_CHECK_RV
–
rv
, "Write stopÅransferÅoken");

515 
	}
}

517 
	$sd_ˇrd_°›_mu…ùÀ_block_wrôe
–
sd_ˇrd_drivî_íåy
 *
e
)

519 
rv
 = 0;

520 
uöt8_t
 
°›_å™s„r
 [3] = { 
SD_CARD_IDLE_TOKEN
, 
SD_CARD_STOP_TRANSFER_MULTIPLE_BLOCK_WRITE
, SD_CARD_IDLE_TOKEN };

523 
rv
 = 
	`sd_ˇrd_waô
–
e
);

524 
	`RTEMS_CHECK_RV
–
rv
, "Wait");

527 
rv
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
, 
°›_å™s„r
, 3);

528 
	`RTEMS_CHECK_RV
–
rv
, "Write stopÅransferÅoken");

531 
e
->
busy
 = 
åue
;

534 
	}
}

536 
	$sd_ˇrd_ªad
–
sd_ˇrd_drivî_íåy
 *
e
, 
uöt8_t
 
°¨t_tokí
, uöt8_à*
ö
, 
n
)

538 
rv
 = 0;

541 
r
 = 
e
->
ª•⁄£_ödex
 + 1;

544 
ª•⁄£_size
 = 
SD_CARD_COMMAND_SIZE
;

547 
uöt8_t
 *
ª•⁄£
 = 
e
->response;

550 
i
 = 0;

553 
uöt16_t
 
¸c16
;

556 
ªåõs
 = 
e
->
n_ac_max
;

558 
	`SD_CARD_INVALIDATE_RESPONSE_INDEX
–
e
);

560 
åue
) {

561 
	`RTEMS_DEBUG_PRINT
–"Sórch from %uÅÿ%u\n", 
r
, 
ª•⁄£_size
 - 1);

564 
ªåõs
 -(
ª•⁄£_size
 - 
r
);

565 
r
 < 
ª•⁄£_size
) {

566 
	`RTEMS_DEBUG_PRINT
–"Tokí [%02u]: 0x%02x\n", 
r
, 
ª•⁄£
 [r]);

567 i‡(
ª•⁄£
 [
r
] =
°¨t_tokí
) {

569 ++
r
;

570 
sd_ˇrd_ªad_°¨t
;

571 } i‡(
	`SD_CARD_IS_DATA_ERROR
–
ª•⁄£
 [
r
])) {

572 
	`RTEMS_SYSLOG_ERROR
–"D©®îr‹Åokí [%02i]: 0x%02" 
PRIx8
 "\n", 
r
, 
ª•⁄£
 [r]);

573  -
RTEMS_IO_ERROR
;

574 } i‡(
ª•⁄£
 [
r
] !
SD_CARD_IDLE_TOKEN
) {

575 
	`RTEMS_SYSLOG_ERROR
–"U√x≥˘edÅokí [%02i]: 0x%02" 
PRIx8
 "\n", 
r
, 
ª•⁄£
 [r]);

576  -
RTEMS_IO_ERROR
;

578 ++
r
;

581 i‡(
ªåõs
 <= 0) {

582 
	`RTEMS_SYSLOG_ERROR
( "Timeout\n");

583  -
RTEMS_IO_ERROR
;

586 i‡(
e
->
scheduÀ_if_busy
)

587 
	`πems_èsk_wake_a·î
–
RTEMS_YIELD_PROCESSOR
);

593 
ª•⁄£
 = 
ö
;

594 
ª•⁄£_size
 = 50;

595 i‡(
ª•⁄£_size
 > 
n
)

596 
ª•⁄£_size
 = 
n
;

597 
rv
 = 
	`sd_ˇrd_quîy
–
e
, 
ª•⁄£
, 
ª•⁄£_size
);

598 
	`RTEMS_CHECK_RV
–
rv
, "Query data startÅoken");

601 
r
 = 0;

604 
sd_ˇrd_ªad_°¨t
:

607 
r
 < 
ª•⁄£_size
 && 
i
 < 
n
) {

608 
ö
 [
i
++] = 
ª•⁄£
 [
r
++];

612 i‡(
i
 < 
n
) {

613 
rv
 = 
	`sd_ˇrd_quîy
–
e
, &
ö
 [
i
], 
n
 - i);

614 
	`RTEMS_CHECK_RV
–
rv
, "Read data");

615 
i
 +
rv
;

619 
rv
 = 
	`sd_ˇrd_quîy
–
e
,É->
ª•⁄£
, 3);

620 
	`RTEMS_CHECK_RV
–
rv
, "Read CRC 16");

622 
¸c16
 = 
	`sd_ˇrd_compuã_¸c16
 (
ö
, 
n
);

623 i‡((
e
->
ª•⁄£
[0] !((
¸c16
 >> 8) & 0xff)) ||

624 (
e
->
ª•⁄£
[1] !(
¸c16
 & 0xff))) {

625 
	`RTEMS_SYSLOG_ERROR
( "CRC check failed onÑead\n");

626  -
RTEMS_IO_ERROR
;

629  
i
;

630 
	}
}

632 
	$sd_ˇrd_wrôe
–
sd_ˇrd_drivî_íåy
 *
e
, 
uöt8_t
 
°¨t_tokí
, uöt8_à*
out
, 
n
)

634 
rv
 = 0;

635 
uöt8_t
 
¸c16_byãs
 [2] = { 0, 0 };

636 
uöt16_t
 
¸c16
;

639 
o
 = 0;

642 
rv
 = 
	`sd_ˇrd_waô
–
e
);

643 
	`RTEMS_CHECK_RV
–
rv
, "Wait");

646 
rv
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
, &
°¨t_tokí
, 1);

647 
	`RTEMS_CHECK_RV
–
rv
, "Write data startÅoken");

650 
o
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
, 
out
, 
n
);

651 
	`RTEMS_CHECK_RV
–
o
, "Write data");

654 
¸c16
 = 
	`sd_ˇrd_compuã_¸c16
(
out
, 
n
);

655 
¸c16_byãs
[0] = (
¸c16
>>8) & 0xff;

656 
¸c16_byãs
[1] = (
¸c16
) & 0xff;

657 
rv
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
, 
¸c16_byãs
, 2);

658 
	`RTEMS_CHECK_RV
–
rv
, "Write CRC 16");

661 
rv
 = 
	`sd_ˇrd_quîy
–
e
,É->
ª•⁄£
, 2);

662 
	`RTEMS_CHECK_RV
–
rv
, "Read dataÑesponse");

663 i‡(
	`SD_CARD_IS_DATA_REJECTED
–
e
->
ª•⁄£
 [0])) {

664 
	`RTEMS_SYSLOG_ERROR
–"D©®ªje˘ed: 0x%02" 
PRIx8
 "\n", 
e
->
ª•⁄£
 [0]);

665  -
RTEMS_IO_ERROR
;

669 
e
->
busy
 = 
åue
;

671  
o
;

672 
	}
}

674 
ölöe
 
πems_°©us_code
 
	$sd_ˇrd_°¨t
–
sd_ˇrd_drivî_íåy
 *
e
)

676 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

677 
rv
 = 0;

679 
sc
 = 
	`πems_libi2c_£nd_°¨t
–
e
->
bus
);

680 
	`RTEMS_CHECK_SC
–
sc
, "Send start");

682 
rv
 = 
	`πems_libi2c_io˘l
–
e
->
bus
, 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
, &e->
å™s„r_mode
);

683 
	`RTEMS_CHECK_RV_SC
–
rv
, "SetÅransfer mode");

685 
sc
 = 
	`πems_libi2c_£nd_addr
–
e
->
bus
, 1);

686 
	`RTEMS_CHECK_SC
–
sc
, "Sendáddress");

688  
RTEMS_SUCCESSFUL
;

689 
	}
}

691 
ölöe
 
πems_°©us_code
 
	$sd_ˇrd_°›
–
sd_ˇrd_drivî_íåy
 *
e
)

693 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

695 
sc
 = 
	`πems_libi2c_£nd_°›
–
e
->
bus
);

696 
	`RTEMS_CHECK_SC
–
sc
, "Send stop");

698  
RTEMS_SUCCESSFUL
;

699 
	}
}

701 
πems_°©us_code
 
	$sd_ˇrd_öô
–
sd_ˇrd_drivî_íåy
 *
e
)

703 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

704 
rv
 = 0;

705 
uöt8_t
 
block
 [
SD_CARD_BLOCK_SIZE_DEFAULT
];

706 
uöt32_t
 
å™s„r_•ìd
 = 0;

707 
uöt32_t
 
ªad_block_size
 = 0;

708 
uöt32_t
 
wrôe_block_size
 = 0;

709 
uöt8_t
 
csd_°ru˘uª
 = 0;

710 
uöt64_t
 
ˇ∑côy
 = 0;

711 
uöt8_t
 
¸c7
;

714 
boﬁ
 
assume_sd
 = 
åue
;

720 
boﬁ
 
high_ˇ∑côy
 = 
åue
;

722 
boﬁ
 
do_cmd58
 = 
åue
;

723 
uöt32_t
 
cmd_¨g
 = 0;

724 
uöt32_t
 
if_c⁄d_ã°
 = 
SD_CARD_FLAG_VHS_2_7_TO_3_3
 | 
SD_CARD_FLAG_CHECK_PATTERN
;

725 
uöt32_t
 
if_c⁄d_ªg
 = 
if_c⁄d_ã°
;

728 
sc
 = 
	`sd_ˇrd_°¨t
–
e
);

729 
	`RTEMS_CLEANUP_SC
–
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Start");

732 
rv
 = 
	`sd_ˇrd_waô
–
e
);

733 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Wait");

736 
	`mem£t
–
block
, 
SD_CARD_IDLE_TOKEN
, 
SD_CARD_BLOCK_SIZE_DEFAULT
);

737 
rv
 = 
	`πems_libi2c_wrôe_byãs
–
e
->
bus
, 
block
, 
SD_CARD_BLOCK_SIZE_DEFAULT
);

738 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Active chip select delay");

741 
sc
 = 
	`sd_ˇrd_°›
–
e
);

742 
	`RTEMS_CHECK_SC
–
sc
, "Stop");

745 
sc
 = 
	`πems_libi2c_£nd_°¨t
–
e
->
bus
);

746 
	`RTEMS_CHECK_SC
–
sc
, "Send start");

749 
rv
 = 
	`πems_libi2c_io˘l
–
e
->
bus
, 
RTEMS_LIBI2C_IOCTL_SET_TFRMODE
, &e->
å™s„r_mode
);

750 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "SetÅransfer mode");

753 
rv
 = 
	`sd_ˇrd_quîy
–
e
,É->
ª•⁄£
, 
SD_CARD_COMMAND_SIZE
);

754 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Inactive chip select delay");

757 
sc
 = 
	`πems_libi2c_£nd_addr
–
e
->
bus
, 1);

758 
	`RTEMS_CLEANUP_SC
–
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Sendáddress");

761 
	`sd_ˇrd_°›_mu…ùÀ_block_wrôe
–
e
);

764 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_STATUS
, 0);

767 
	`sd_ˇrd_°›_mu…ùÀ_block_ªad
–
e
);

770 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_GO_IDLE_STATE
, 0);

771 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Send: SD_CARD_CMD_GO_IDLE_STATE");

780 
rv
 = 
	`sd_ˇrd_£nd_ªgi°î_comm™d
–
e
, 
SD_CARD_CMD_SEND_IF_COND
, 
if_c⁄d_ªg
, &if_cond_reg);

788 i‡(
rv
 < 0) {

790 
cmd_¨g
 = 0;

792 
cmd_¨g
 = 
SD_CARD_FLAG_HCS
;

796 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_CRC_ON_OFF
, 1);

799 
åue
) {

800 i‡(
assume_sd
) {

802 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_APP_CMD
, 0);

803 i‡(
rv
 < 0) {

804 
	`RTEMS_SYSLOG
( "CMD55 failed. Assume MMCándÅry CMD1\n");

805 
assume_sd
 = 
Ál£
;

813 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_ACMD_SD_SEND_OP_COND
, 
cmd_¨g
);

814 i‡(
rv
 < 0) {

819 
	`RTEMS_SYSLOG
( "ACMD41 failed. Assume MMCánd do CMD58 (once)Åhen CMD1\n");

820 
assume_sd
 = 
Ál£
;

821 
cmd_¨g
 = 
SD_CARD_FLAG_HCS
;

822 
do_cmd58
 = 
åue
;

830 i‡(
if_c⁄d_ªg
 !
if_c⁄d_ã°
) {

831 
	`RTEMS_CLEANUP_RV_SC
–-1, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Bad voltage for SD");

843 i‡(
do_cmd58
) {

844 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_READ_OCR
, 
cmd_¨g
);

845 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Failed CMD58 for MMC");

848 
do_cmd58
 = 
Ál£
;

852 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_OP_COND
, 0);

853 i‡(
rv
 < 0) {

854 i‡(
cmd_¨g
 != 0) {

860 
cmd_¨g
 = 0;

861 
do_cmd58
 = 
åue
;

862 
high_ˇ∑côy
 = 
Ál£
;

866 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "FailedÅo initialize MMC");

876 i‡(
	`SD_CARD_IS_NOT_IDLE_RESPONSE
–
e
->
ª•⁄£
 [e->
ª•⁄£_ödex
])) {

881 
	`πems_èsk_wake_a·î
–
RTEMS_YIELD_PROCESSOR
);

885 i‡(
assume_sd
) {

886 i‡(
cmd_¨g
 == 0) {

888 
high_ˇ∑côy
 = 0;

890 
uöt32_t
 
ªg
 = 0;

898 
rv
 = 
	`sd_ˇrd_£nd_ªgi°î_comm™d
–
e
, 
SD_CARD_CMD_READ_OCR
, 0, &
ªg
);

899 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Failed CMD58 for SD 2.x");

902 
high_ˇ∑côy
 = (
ªg
 & 
SD_CARD_FLAG_HCS
) != 0;

909 i‡(
high_ˇ∑côy
) {

910 
uöt32_t
 
ªg
 = 0;

916 
rv
 = 
	`sd_ˇrd_£nd_ªgi°î_comm™d
–
e
, 
SD_CARD_CMD_READ_OCR
, 
cmd_¨g
, &
ªg
);

917 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Failed CMD58 for MMC 4.2");

920 
high_ˇ∑côy
 = (
ªg
 & 0x6000000Ë=
SD_CARD_FLAG_HCS
;

925 i‡(
e
->
vîbo£
) {

926 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_CID
, 0);

927 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Send: SD_CARD_CMD_SEND_CID");

928 
rv
 = 
	`sd_ˇrd_ªad
–
e
, 
SD_CARD_START_BLOCK_SINGLE_BLOCK_READ
, 
block
, 
SD_CARD_CID_SIZE
);

929 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Read: SD_CARD_CMD_SEND_CID");

930 
	`RTEMS_SYSLOG
( "*** Card Identification ***\n");

931 
	`RTEMS_SYSLOG
–"M™uÁ˘uª∏ID : %" 
PRIu8
 "\n", 
	`SD_CARD_CID_GET_MID
–
block
));

932 
	`RTEMS_SYSLOG
–"OEM/Aµliˇti⁄ ID : %" 
PRIu16
 "\n", 
	`SD_CARD_CID_GET_OID
–
block
));

933 
	`RTEMS_SYSLOG
(

935 
	`SD_CARD_CID_GET_PNM
–
block
, 0),

936 
	`SD_CARD_CID_GET_PNM
–
block
, 1),

937 
	`SD_CARD_CID_GET_PNM
–
block
, 2),

938 
	`SD_CARD_CID_GET_PNM
–
block
, 3),

939 
	`SD_CARD_CID_GET_PNM
–
block
, 4),

940 
	`SD_CARD_CID_GET_PNM
–
block
, 5)

942 
	`RTEMS_SYSLOG
–"Produ˘Ñevisi⁄ : %" 
PRIu8
 "\n", 
	`SD_CARD_CID_GET_PRV
–
block
));

943 
	`RTEMS_SYSLOG
–"Produ˘ sîü»numbî : %" 
PRIu32
 "\n", 
	`SD_CARD_CID_GET_PSN
–
block
));

944 
	`RTEMS_SYSLOG
–"M™uÁ˘urög d©ê : %" 
PRIu8
 "\n", 
	`SD_CARD_CID_GET_MDT
–
block
));

945 
	`RTEMS_SYSLOG
–"7-bô CRC checksum : %" 
PRIu8
 "\n", 
	`SD_CARD_CID_GET_CRC7
–
block
));

946 
¸c7
 = 
	`sd_ˇrd_compuã_¸c7
–
block
, 15);

947 i‡(
¸c7
 !
	`SD_CARD_CID_GET_CRC7
–
block
))

948 
	`RTEMS_SYSLOG
–" Faûed! (compuãd %02" 
PRIx8
 ")\n", 
¸c7
);

954 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_CSD
, 0);

955 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Send: SD_CARD_CMD_SEND_CSD");

956 
rv
 = 
	`sd_ˇrd_ªad
–
e
, 
SD_CARD_START_BLOCK_SINGLE_BLOCK_READ
, 
block
, 
SD_CARD_CSD_SIZE
);

957 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Read: SD_CARD_CMD_SEND_CSD");

959 
¸c7
 = 
	`sd_ˇrd_compuã_¸c7
–
block
, 15);

960 i‡(
¸c7
 !
	`SD_CARD_CID_GET_CRC7
–
block
)) {

961 
	`RTEMS_SYSLOG
( "SD_CARD_CMD_SEND_CSD CRC failed\n");

962 
sc
 = 
RTEMS_IO_ERROR
;

963 
sd_ˇrd_drivî_öô_˛ónup
;

967 
csd_°ru˘uª
 = 
	`SD_CARD_CSD_GET_CSD_STRUCTURE
–
block
);

970 
å™s„r_•ìd
 = 
	`sd_ˇrd_å™s„r_•ìd
–
block
);

971 
e
->
å™s„r_mode
.
baudøã
 = 
å™s„r_•ìd
;

972 
e
->
n_ac_max
 = 
	`sd_ˇrd_max_ac˚ss_time
–
block
, 
å™s„r_•ìd
);

975 i‡(
csd_°ru˘uª
 =0 || !
assume_sd
) {

978 
ªad_block_size
 = 1U << 
	`SD_CARD_CSD_GET_READ_BLK_LEN
–
block
);

979 
e
->
block_size_shi·
 = 
	`SD_CARD_CSD_GET_WRITE_BLK_LEN
–
block
);

980 
wrôe_block_size
 = 1U << 
e
->
block_size_shi·
;

981 i‡(
ªad_block_size
 < 
wrôe_block_size
) {

982 
	`RTEMS_SYSLOG_ERROR
( "Read block size smallerÅhan write block size\n");

983  -
RTEMS_IO_ERROR
;

985 
e
->
block_size
 = 
wrôe_block_size
;

986 
e
->
block_numbî
 = 
	`sd_ˇrd_block_numbî
–
block
);

987 
ˇ∑côy
 = 
	`sd_ˇrd_ˇ∑côy
–
block
);

988 } i‡(
csd_°ru˘uª
 == 1) {

989 
uöt32_t
 
c_size
 = 
	`SD_CARD_CSD_1_GET_C_SIZE
–
block
);

992 
e
->
block_size_shi·
 = 9;

993 
e
->
block_size
 = 512;

995 
e
->
block_numbî
 = (
c_size
 + 1) * 1024;

996 
ˇ∑côy
 = (
c_size
 + 1) * 512 * 1024;

997 
ªad_block_size
 = 512;

998 
wrôe_block_size
 = 512;

1001 
e
->
n_ac_max
 = 
å™s„r_•ìd
 / 80;

1003 
	`RTEMS_DO_CLEANUP_SC
–
RTEMS_IO_ERROR
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Unexpected CSD StructureÇumber");

1007 i‡(
e
->
vîbo£
) {

1008 
	`RTEMS_SYSLOG
( "*** Card Specific Data ***\n");

1009 
	`RTEMS_SYSLOG
–"CSD såu˘uª : %" 
PRIu8
 "\n", 
	`SD_CARD_CSD_GET_CSD_STRUCTURE
–
block
));

1010 
	`RTEMS_SYSLOG
–"S≥¯vîsi⁄ : %" 
PRIu8
 "\n", 
	`SD_CARD_CSD_GET_SPEC_VERS
–
block
));

1011 
	`RTEMS_SYSLOG
–"Ac˚s†timê[ns] : %" 
PRIu32
 "\n", 
	`sd_ˇrd_ac˚ss_time
–
block
));

1012 
	`RTEMS_SYSLOG
–"Ac˚s†timê[N] : %" 
PRIu32
 "\n", 
	`SD_CARD_CSD_GET_NSAC
–
block
)*100);

1013 
	`RTEMS_SYSLOG
–"Maxác˚s†timê[N] : %" 
PRIu32
 "\n", 
e
->
n_ac_max
);

1014 
	`RTEMS_SYSLOG
–"MaxÑód block sizê[B] : %" 
PRIu32
 "\n", 
ªad_block_size
);

1015 
	`RTEMS_SYSLOG
–"Max wrôêblock sizê[B] : %" 
PRIu32
 "\n", 
wrôe_block_size
);

1016 
	`RTEMS_SYSLOG
–"Block sizê[B] : %" 
PRIu32
 "\n", 
e
->
block_size
);

1017 
	`RTEMS_SYSLOG
–"BlockÇumbî : %" 
PRIu32
 "\n", 
e
->
block_numbî
);

1018 
	`RTEMS_SYSLOG
–"C≠acôy [B] : %" 
PRIu64
 "\n", 
ˇ∑côy
);

1019 
	`RTEMS_SYSLOG
–"MaxÅøns„∏•ìd [b/s] : %" 
PRIu32
 "\n", 
å™s„r_•ìd
);

1022 i‡(
high_ˇ∑côy
) {

1024 
e
->
block_size_shi·
 = 0;

1025 } i‡(
e
->
block_size_shi·
 == 10) {

1032 
e
->
block_size_shi·
 = 9;

1033 
e
->
block_size
 = 512;

1034 
e
->
block_numbî
 *= 2;

1038 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SET_BLOCKLEN
,É->
block_size
);

1039 
	`RTEMS_CLEANUP_RV_SC
–
rv
, 
sc
, 
sd_ˇrd_drivî_öô_˛ónup
, "Send: SD_CARD_CMD_SET_BLOCKLEN");

1042 
sc
 = 
	`sd_ˇrd_°›
–
e
);

1043 
	`RTEMS_CHECK_SC
–
sc
, "Stop");

1045  
RTEMS_SUCCESSFUL
;

1047 
sd_ˇrd_drivî_öô_˛ónup
:

1050 
	`sd_ˇrd_°›
–
e
);

1052  
sc
;

1053 
	}
}

1061 
	$sd_ˇrd_disk_block_ªad
–
sd_ˇrd_drivî_íåy
 *
e
, 
πems_blkdev_ªque°
 *
r
)

1063 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1064 
rv
 = 0;

1065 
uöt32_t
 
°¨t_addªss
 = 
	`RTEMS_BLKDEV_START_BLOCK
 (
r
Ë<< 
e
->
block_size_shi·
;

1066 
uöt32_t
 
i
 = 0;

1068 #ifde‡
DEBUG


1070 i‡(
r
->
bufs
[0].
block
 >
e
->
block_numbî
) {

1071 
	`RTEMS_SYSLOG_ERROR
( "Start blockÇumber out ofÑange");

1072  -
RTEMS_INTERNAL_ERROR
;

1073 } i‡(
r
->
bu‚um
 > 
e
->
block_numbî
 - 
	`RTEMS_BLKDEV_START_BLOCK
 (r)) {

1074 
	`RTEMS_SYSLOG_ERROR
( "Block count out ofÑange");

1075  -
RTEMS_INTERNAL_ERROR
;

1080 
sc
 = 
	`sd_ˇrd_°¨t
–
e
);

1081 
	`RTEMS_CLEANUP_SC_RV
–
sc
, 
rv
, 
sd_ˇrd_disk_block_ªad_˛ónup
, "Start");

1083 i‡(
r
->
bu‚um
 == 1) {

1084 #ifde‡
DEBUG


1086 i‡(
r
->
bufs
 [0].
Àngth
 !
e
->
block_size
) {

1087 
	`RTEMS_DO_CLEANUP_RV
–-
RTEMS_INTERNAL_ERROR
, 
rv
, 
sd_ˇrd_disk_block_ªad_˛ónup
, "Bufferánd disk block sizeáreÇotÉqual");

1089 
	`RTEMS_DEBUG_PRINT
–"[01:01]: buf„∏0x%08x, sizê%u\n", 
r
->
bufs
 [0].
buf„r
,Ñ->buf†[0].
Àngth
);

1093 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_READ_SINGLE_BLOCK
, 
°¨t_addªss
);

1094 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_ªad_˛ónup
, "Send: SD_CARD_CMD_READ_SINGLE_BLOCK");

1095 
rv
 = 
	`sd_ˇrd_ªad
–
e
, 
SD_CARD_START_BLOCK_SINGLE_BLOCK_READ
, (
uöt8_t
 *Ë
r
->
bufs
 [0].
buf„r
, (Ëe->
block_size
);

1096 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_ªad_˛ónup
, "Read: SD_CARD_CMD_READ_SINGLE_BLOCK");

1099 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_READ_MULTIPLE_BLOCK
, 
°¨t_addªss
);

1100 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_ªad_°›_˛ónup
, "Send: SD_CARD_CMD_READ_MULTIPLE_BLOCK");

1103 
i
 = 0; i < 
r
->
bu‚um
; ++i) {

1104 #ifde‡
DEBUG


1106 i‡(
r
->
bufs
 [
i
].
Àngth
 !
e
->
block_size
) {

1107 
	`RTEMS_DO_CLEANUP_RV
–-
RTEMS_INTERNAL_ERROR
, 
rv
, 
sd_ˇrd_disk_block_ªad_°›_˛ónup
, "Bufferánd disk block sizeáreÇotÉqual");

1109 
	`RTEMS_DEBUG_PRINT
–"[%02u:%02u]: buf„∏0x%08x, sizê%u\n", 
i
 + 1, 
r
->
bu‚um
,Ñ->
bufs
 [i].
buf„r
,Ñ->buf†[i].
Àngth
);

1112 
rv
 = 
	`sd_ˇrd_ªad
–
e
, 
SD_CARD_START_BLOCK_MULTIPLE_BLOCK_READ
, (
uöt8_t
 *Ë
r
->
bufs
 [
i
].
buf„r
, (Ëe->
block_size
);

1113 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_ªad_°›_˛ónup
, "Read block");

1117 
rv
 = 
	`sd_ˇrd_°›_mu…ùÀ_block_ªad
–
e
);

1118 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_ªad_˛ónup
, "Stop multiple blockÑead");

1122 
sc
 = 
	`sd_ˇrd_°›
–
e
);

1123 
	`RTEMS_CHECK_SC_RV
–
sc
, "Stop");

1126 
	`πems_blkdev_ªque°_d⁄e
–
r
, 
RTEMS_SUCCESSFUL
);

1130 
sd_ˇrd_disk_block_ªad_°›_˛ónup
:

1133 
	`sd_ˇrd_°›_mu…ùÀ_block_ªad
–
e
);

1135 
sd_ˇrd_disk_block_ªad_˛ónup
:

1138 
	`sd_ˇrd_°›
–
e
);

1141 
	`πems_blkdev_ªque°_d⁄e
–
r
, 
RTEMS_IO_ERROR
);

1144 
	}
}

1146 
	$sd_ˇrd_disk_block_wrôe
–
sd_ˇrd_drivî_íåy
 *
e
, 
πems_blkdev_ªque°
 *
r
)

1148 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1149 
rv
 = 0;

1150 
uöt32_t
 
°¨t_addªss
 = 
	`RTEMS_BLKDEV_START_BLOCK
 (
r
Ë<< 
e
->
block_size_shi·
;

1151 
uöt32_t
 
i
 = 0;

1153 #ifde‡
DEBUG


1155 i‡(
r
->
bufs
[0].
block
 >
e
->
block_numbî
) {

1156 
	`RTEMS_SYSLOG_ERROR
( "Start blockÇumber out ofÑange");

1157  -
RTEMS_INTERNAL_ERROR
;

1158 } i‡(
r
->
bu‚um
 > 
e
->
block_numbî
 - 
	`RTEMS_BLKDEV_START_BLOCK
 (r)) {

1159 
	`RTEMS_SYSLOG_ERROR
( "Block count out ofÑange");

1160  -
RTEMS_INTERNAL_ERROR
;

1165 
sc
 = 
	`sd_ˇrd_°¨t
–
e
);

1166 
	`RTEMS_CLEANUP_SC_RV
–
sc
, 
rv
, 
sd_ˇrd_disk_block_wrôe_˛ónup
, "Start");

1168 i‡(
r
->
bu‚um
 == 1) {

1169 #ifde‡
DEBUG


1171 i‡(
r
->
bufs
 [0].
Àngth
 !
e
->
block_size
) {

1172 
	`RTEMS_DO_CLEANUP_RV
–-
RTEMS_INTERNAL_ERROR
, 
rv
, 
sd_ˇrd_disk_block_wrôe_˛ónup
, "Bufferánd disk block sizeáreÇotÉqual");

1174 
	`RTEMS_DEBUG_PRINT
–"[01:01]: buf„∏0x%08x, sizê%u\n", 
r
->
bufs
 [0].
buf„r
,Ñ->buf†[0].
Àngth
);

1178 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_WRITE_BLOCK
, 
°¨t_addªss
);

1179 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_wrôe_˛ónup
, "Send: SD_CARD_CMD_WRITE_BLOCK");

1180 
rv
 = 
	`sd_ˇrd_wrôe
–
e
, 
SD_CARD_START_BLOCK_SINGLE_BLOCK_WRITE
, (
uöt8_t
 *Ë
r
->
bufs
 [0].
buf„r
, (Ëe->
block_size
);

1181 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_wrôe_˛ónup
, "Write: SD_CARD_CMD_WRITE_BLOCK");

1184 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_WRITE_MULTIPLE_BLOCK
, 
°¨t_addªss
);

1185 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_wrôe_°›_˛ónup
, "Send: SD_CARD_CMD_WRITE_MULTIPLE_BLOCK");

1188 
i
 = 0; i < 
r
->
bu‚um
; ++i) {

1189 #ifde‡
DEBUG


1191 i‡(
r
->
bufs
 [
i
].
Àngth
 !
e
->
block_size
) {

1192 
	`RTEMS_DO_CLEANUP_RV
–-
RTEMS_INTERNAL_ERROR
, 
rv
, 
sd_ˇrd_disk_block_wrôe_°›_˛ónup
, "Bufferánd disk block sizeáreÇotÉqual");

1194 
	`RTEMS_DEBUG_PRINT
–"[%02u:%02u]: buf„∏0x%08x, sizê%u\n", 
i
 + 1, 
r
->
bu‚um
,Ñ->
bufs
 [i].
buf„r
,Ñ->buf†[i].
Àngth
);

1197 
rv
 = 
	`sd_ˇrd_wrôe
–
e
, 
SD_CARD_START_BLOCK_MULTIPLE_BLOCK_WRITE
, (
uöt8_t
 *Ë
r
->
bufs
 [
i
].
buf„r
, (Ëe->
block_size
);

1198 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_wrôe_°›_˛ónup
, "Write block");

1202 
rv
 = 
	`sd_ˇrd_°›_mu…ùÀ_block_wrôe
–
e
);

1203 
	`RTEMS_CLEANUP_RV
–
rv
, 
sd_ˇrd_disk_block_wrôe_˛ónup
, "Stop multiple block write");

1207 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_STATUS
, 0);

1208 
	`RTEMS_CHECK_RV
–
rv
, "Send: SD_CARD_CMD_SEND_STATUS");

1211 
sc
 = 
	`sd_ˇrd_°›
–
e
);

1212 
	`RTEMS_CHECK_SC_RV
–
sc
, "Stop");

1215 
	`πems_blkdev_ªque°_d⁄e
–
r
, 
RTEMS_SUCCESSFUL
);

1219 
sd_ˇrd_disk_block_wrôe_°›_˛ónup
:

1222 
	`sd_ˇrd_°›_mu…ùÀ_block_wrôe
–
e
);

1224 
sd_ˇrd_disk_block_wrôe_˛ónup
:

1227 
rv
 = 
	`sd_ˇrd_£nd_comm™d
–
e
, 
SD_CARD_CMD_SEND_STATUS
, 0);

1228 
	`RTEMS_CHECK_RV
–
rv
, "Send: SD_CARD_CMD_SEND_STATUS");

1231 
	`sd_ˇrd_°›
–
e
);

1234 
	`πems_blkdev_ªque°_d⁄e
–
r
, 
RTEMS_IO_ERROR
);

1237 
	}
}

1239 
	$sd_ˇrd_disk_io˘l
–
πems_disk_devi˚
 *
dd
, 
uöt32_t
 
ªq
, *
¨g
)

1241 
	`RTEMS_DEBUG_PRINT
( "sd_card_disk_ioctl minor = %u,Ñeq = 0x%08x,árg = %p\n",

1242 ()
	`πems_fûesy°em_dev_mö‹_t
(
dd
->
dev
), ()
ªq
, 
¨g
);

1243 i‡(
ªq
 =
RTEMS_BLKIO_REQUEST
) {

1244 
πems_devi˚_mö‹_numbî
 
mö‹
 = 
	`πems_disk_gë_mö‹_numbî
–
dd
);

1245 
sd_ˇrd_drivî_íåy
 *
e
 = &
sd_ˇrd_drivî_èbÀ
 [
mö‹
];

1246 
πems_blkdev_ªque°
 *
r
 = (πems_blkdev_ªque° *Ë
¨g
;

1247 (*
f
)–
sd_ˇrd_drivî_íåy
 *, 
πems_blkdev_ªque°
 *);

1248 
uöt32_t
 
ªåõs
 = 
e
->retries;

1249 
ªsu…
;

1251 
r
->
ªq
) {

1252 
RTEMS_BLKDEV_REQ_READ
:

1253 
f
 = 
sd_ˇrd_disk_block_ªad
;

1255 
RTEMS_BLKDEV_REQ_WRITE
:

1256 
f
 = 
sd_ˇrd_disk_block_wrôe
;

1259 
î∫o
 = 
EINVAL
;

1263 
ªsu…
 = 
	`f
–
e
, 
r
);

1264 } 
ªåõs
-- > 0 && 
ªsu…
 != 0);

1265  
ªsu…
;

1267 } i‡(
ªq
 =
RTEMS_BLKIO_CAPABILITIES
) {

1268 *(
uöt32_t
 *Ë
¨g
 = 
RTEMS_BLKDEV_CAP_MULTISECTOR_CONT
;

1271  
	`πems_blkdev_io˘l
–
dd
, 
ªq
, 
¨g
 );

1273 
	}
}

1275 
πems_°©us_code
 
	$sd_ˇrd_disk_öô
–
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
, *
¨g
)

1277 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1280 
sc
 = 
	`πems_disk_io_öôülize
();

1281 
	`RTEMS_CHECK_SC
–
sc
, "Initialize RTEMS disk IO");

1283 
mö‹
 = 0; mö‹ < 
sd_ˇrd_drivî_èbÀ_size
; ++minor) {

1284 
sd_ˇrd_drivî_íåy
 *
e
 = &
sd_ˇrd_drivî_èbÀ
 [
mö‹
];

1285 
dev_t
 
dev
 = 
	`πems_fûesy°em_make_dev_t
–
maj‹
, 
mö‹
);

1286 
uöt32_t
 
ªåõs
 = 
e
->retries;

1290 
sc
 = 
	`sd_ˇrd_öô
–
e
);

1291 } 
ªåõs
-- > 0 && 
sc
 !
RTEMS_SUCCESSFUL
);

1292 
	`RTEMS_CHECK_SC
–
sc
, "Initialize SD Card");

1295 
sc
 = 
	`πems_disk_¸óã_phys
–
dev
, 
e
->
block_size
,É->
block_numbî
, 
sd_ˇrd_disk_io˘l
, 
NULL
,É->
devi˚_«me
);

1296 
	`RTEMS_CHECK_SC
–
sc
, "Create disk device");

1299  
RTEMS_SUCCESSFUL
;

1300 
	}
}

1304 c⁄° 
πems_drivî_addªss_èbÀ
 
	gsd_ˇrd_disk_›s
 = {

1305 .
öôüliz©i⁄_íåy
 = 
sd_ˇrd_disk_öô
,

1306 .
	g›í_íåy
 = 
πems_blkdev_gíîic_›í
,

1307 .
	g˛o£_íåy
 = 
πems_blkdev_gíîic_˛o£
,

1308 .
	gªad_íåy
 = 
πems_blkdev_gíîic_ªad
,

1309 .
	gwrôe_íåy
 = 
πems_blkdev_gíîic_wrôe
,

1310 .
	gc⁄åﬁ_íåy
 = 
πems_blkdev_gíîic_io˘l


1313 
πems_°©us_code
 
	$sd_ˇrd_ªgi°î
( )

1315 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1316 
πems_devi˚_maj‹_numbî
 
maj‹
 = 0;

1318 
sc
 = 
	`πems_io_ªgi°î_drivî
–0, &
sd_ˇrd_disk_›s
, &
maj‹
);

1319 
	`RTEMS_CHECK_SC
–
sc
, "Register disk SD Card driver");

1321  
RTEMS_SUCCESSFUL
;

1322 
	}
}

	@src/libchip/i2c/spi-sd-card.h

20 #i‚de‡
LIBI2C_SD_CARD_H


21 
	#LIBI2C_SD_CARD_H


	)

23 
	~<°döt.h
>

24 
	~<°dboﬁ.h
>

26 
	~<πems/libi2c.h
>

28 #ifde‡
__˝lu•lus


32 
	#SD_CARD_IDLE_TOKEN
 0xff

	)

41 
	#SD_CARD_COMMAND_SIZE
 18

	)

43 
	#SD_CARD_TRANSFER_MODE_DEFAULT
 { .
baudøã
 = 400000, .
bôs_≥r_ch¨
 = 8, .
lsb_fú°
 = 
FALSE
, .
˛ock_öv
 = FALSE, .
˛ock_phs
 = FALSE, .
idÀ_ch¨
 = 
SD_CARD_IDLE_TOKEN
 }

	)

45 
	#SD_CARD_COMMAND_DEFAULT
 { \

46 
SD_CARD_IDLE_TOKEN
, \

48 
SD_CARD_IDLE_TOKEN
, SD_CARD_IDLE_TOKEN, \

49 
SD_CARD_IDLE_TOKEN
, SD_CARD_IDLE_TOKEN, \

50 
SD_CARD_IDLE_TOKEN
, SD_CARD_IDLE_TOKEN, \

51 
SD_CARD_IDLE_TOKEN
, SD_CARD_IDLE_TOKEN, \

52 
SD_CARD_IDLE_TOKEN
, SD_CARD_IDLE_TOKEN, \

53 
SD_CARD_IDLE_TOKEN
 \

54 }

	)

57 
	#SD_CARD_N_AC_MAX_DEFAULT
 5000

	)

60 c⁄° *
devi˚_«me
;

61 
πems_devi˚_mö‹_numbî
 
bus
;

62 
πems_libi2c_t‰_mode_t
 
å™s„r_mode
;

63 
uöt8_t
 
comm™d
 [
SD_CARD_COMMAND_SIZE
];

64 
uöt8_t
 
ª•⁄£
 [
SD_CARD_COMMAND_SIZE
];

65 
ª•⁄£_ödex
;

66 
uöt32_t
 
n_ac_max
;

67 
uöt32_t
 
block_numbî
;

68 
uöt32_t
 
block_size
;

69 
uöt32_t
 
block_size_shi·
;

70 
boﬁ
 
busy
;

71 
boﬁ
 
vîbo£
;

72 
boﬁ
 
scheduÀ_if_busy
;

73 
uöt32_t
 
ªåõs
;

74 } 
	tsd_ˇrd_drivî_íåy
;

76 
sd_ˇrd_drivî_íåy
 
sd_ˇrd_drivî_èbÀ
 [];

78 
size_t
 
sd_ˇrd_drivî_èbÀ_size
;

80 
πems_°©us_code
 
sd_ˇrd_ªgi°î
( );

82 #ifde‡
__˝lu•lus


	@src/libchip/ide/ata.c

16 
	~<î∫o.h
>

17 
	~<πems/chaö.h
>

18 
	~<as£π.h
>

19 
	~<°rög.h
>

21 
	~<πems/diskdevs.h
>

22 
	~<πems/blkdev.h
>

23 
	~<libchù/ide_˘æ_io.h
>

24 
	~<libchù/ide_˘æ_cfg.h
>

25 
	~"©a_öã∫Æ.h
"

26 
	~<libchù/©a.h
>

28 
	#ATA_DEBUG
 0

	)

30 #i‡
ATA_DEBUG


31 
	~<°dio.h
>

32 
boﬁ
 
	g©a_åa˚
;

33 
	#©a_¥ötf
 i‡(
©a_åa˚
Ë
¥ötf


	)

36 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 !
TRUE


37 
	~<πems/úq.h
>

38 
	#ATA_IRQ_CHAIN_MAX_CNT
 4

	)

40 
πems_úq_numbî
 
	m«me
;

41 
πems_chaö_c⁄åﬁ
 
	múq_chaö
;

42 } 
	t©a_úq_chaö_t
;

44 
©a_úq_chaö_t
 
	g©a_úq_chaö
[
ATA_IRQ_CHAIN_MAX_CNT
];

45 
	g©a_úq_chaö_˙t
 = 0;

48 
πems_id
 
	g©a_lock
;

50 
	$πems_©a_lock
 ()

52 
πems_°©us_code
 
sc
 = 
	`πems_£m≠h‹e_obèö
 (
©a_lock
,

53 
RTEMS_WAIT
,

54 
RTEMS_NO_TIMEOUT
);

55 i‡(
sc
 !
RTEMS_SUCCESSFUL
)

56 
	`πems_Áèl_îr‹_occuºed
 (
RTEMS_INTERNAL_ERROR
);

57 
	}
}

60 
	$πems_©a_u∆ock
 ()

62 
πems_°©us_code
 
sc
 = 
	`πems_£m≠h‹e_ªÀa£
 (
©a_lock
);

63 i‡(
sc
 !
RTEMS_SUCCESSFUL
)

64 
	`πems_Áèl_îr‹_occuºed
 (
RTEMS_INTERNAL_ERROR
);

65 
	}
}

67 
	#RTEMS_ATA_LOCK_ATTRIBS
 \

68 (
RTEMS_PRIORITY
 | 
RTEMS_BINARY_SEMAPHORE
 | \

69 
RTEMS_INHERIT_PRIORITY
 | 
RTEMS_NO_PRIORITY_CEILING
 | 
RTEMS_LOCAL
)

	)

72 #unde‡
ATA_DEV_IS_FLASH_DISK


75 
©a_ide_˘æ_t
 
	g©a_ide_˘æs
[
IDE_CTRL_MAX_MINOR_NUMBER
];

81 
©a_ide_dev_t
 
	g©a_devs
[2 * 
IDE_CTRL_MAX_MINOR_NUMBER
];

82 
	g©a_devs_numbî
;

85 
boﬁ
 
	g©a_öôülized
 = 
Ál£
;

89 
πems_id
 
	g©a_èsk_id
;

90 
πems_id
 
	g©a_queue_id
;

92 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


94 
πems_chaö_c⁄åﬁ
 
	g©a_öt_vec
[
ATA_MAX_RTEMS_INT_VEC_NUMBER
 + 1];

98 
©a_¥o˚ss_ªque°
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
);

101 
©a_add_to_c⁄åﬁÀr_queue
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

102 
©a_ªq_t
 *
¨eq
);

121 
πems_°©us_code


122 
	$©a_io_d©a_ªque°
(
dev_t
 
devi˚
, 
πems_blkdev_ªque°
 *
ªq
)

124 
©a_ªq_t
 *
¨eq
;

125 
πems_devi˚_mö‹_numbî
 
ªl_mö‹
;

128 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
;

129 
uöt8_t
 
dev
;

131 
ªl_mö‹
 = (
	`πems_fûesy°em_dev_mö‹_t
(
devi˚
)) /

132 
ATA_MINOR_NUM_RESERVED_PER_ATA_DEVICE
;

135 
˘æ_mö‹
 = 
©a_devs
[
ªl_mö‹
].ctrl_minor;

138 
dev
 = 
©a_devs
[
ªl_mö‹
].
devi˚
;

140 
¨eq
 = 
	`mÆloc
((
©a_ªq_t
));

141 i‡(
¨eq
 =
NULL
)

143 
	`πems_blkdev_ªque°_d⁄e
(
ªq
, 
RTEMS_NO_MEMORY
);

144  
RTEMS_SUCCESSFUL
;

147 
¨eq
->
bªq
 = 
ªq
;

148 
¨eq
->
˙t
 = 
ªq
->
bu‚um
;

149 
¨eq
->
cbuf
 = 0;

150 
¨eq
->
pos
 = 0;

153 
¨eq
->
ªgs
.
to_wrôe
 = 
ATA_REGISTERS_POSITION
;

154 
¨eq
->
ªgs
.
to_ªad
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_STATUS
);

157 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] =

158 (
dev
 << 
IDE_REGISTER_DEVICE_HEAD_DEV_POS
);

161 i‡(
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
mode_a˘ive
 & 
ATA_MODES_DMA
)

164 
¨eq
->
ty≥
 = 
ATA_COMMAND_TYPE_DMA
;

165 i‡(
ªq
->ªq =
RTEMS_BLKDEV_REQ_READ
)

166 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] = 
ATA_COMMAND_READ_DMA
;

168 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] = 
ATA_COMMAND_WRITE_DMA
;

172 i‡(
ªq
->ªq =
RTEMS_BLKDEV_REQ_READ
)

174 
¨eq
->
ty≥
 = 
ATA_COMMAND_TYPE_PIO_IN
;

175 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] = 
ATA_COMMAND_READ_SECTORS
;

176 #i‡
ATA_DEBUG


177 
	`©a_¥ötf
("ata_io_data_request:Åype: READ: %lu, %lu cmd:%02x\n",

178 
ªq
->
bufs
[0].
block
,Ñeq->
bu‚um
,

179 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
]);

184 
¨eq
->
ty≥
 = 
ATA_COMMAND_TYPE_PIO_OUT
;

185 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] = 
ATA_COMMAND_WRITE_SECTORS
;

186 #i‡
ATA_DEBUG


187 
	`©a_¥ötf
("ata_io_data_request:Åype: WRITE: %lu, %lu cmd:%02x\n",

188 
ªq
->
bufs
[0].
block
,Ñeq->
bu‚um
,

189 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
]);

197 i‡(
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
lba_avaibÀ
)

199 
uöt32_t
 
°¨t
 = 
ªq
->
bufs
[0].
block
;

200 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_LBA0
] = (
uöt8_t
)
°¨t
;

201 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_LBA1
] = (
uöt8_t
)(
°¨t
 >> 8);

202 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_LBA2
] = (
uöt8_t
)(
°¨t
 >> 16);

204 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_LBA3
] |(
uöt8_t
Ë(
°¨t
 >> 24);

205 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_LBA3
] |
IDE_REGISTER_LBA3_L
;

209 
uöt32_t
 
cou¡
 = 
ªq
->
bufs
[0].
block
;

211 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_SECTOR_NUMBER
] =

212 (
cou¡
 % 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
£˘‹s
) + 1;

215 
cou¡
 /
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
£˘‹s
;

216 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] |=

217 (
cou¡
 / 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
cylödîs
);

220 
cou¡
 %
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
cylödîs
;

221 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_CYLINDER_LOW
] = (
uöt8_t
)
cou¡
;

222 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_CYLINDER_HIGH
] = (
uöt8_t
)(
cou¡
 >> 8);

223 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] &=

224 ~
IDE_REGISTER_DEVICE_HEAD_L
;

231 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_SECTOR_COUNT
] =

232 
¨eq
->
bªq
->
bu‚um
 * (¨eq->bªq->
bufs
[0].
Àngth
 / 
ATA_SECTOR_SIZE
);

235 
	`©a_add_to_c⁄åﬁÀr_queue
(
˘æ_mö‹
, 
¨eq
);

237  
RTEMS_SUCCESSFUL
;

238 
	}
}

253 
πems_°©us_code


254 
	$©a_n⁄_d©a_ªque°
(
dev_t
 
devi˚
, 
uöt32_t
 
cmd
, *
¨gp
)

256 
πems_°©us_code
 
rc
;

257 
©a_ªq_t
 *
¨eq
;

258 
πems_devi˚_mö‹_numbî
 
ªl_mö‹
;

261 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
;

262 
uöt8_t
 
dev
;

263 
©a_queue_msg_t
 
msg
;

265 
ªl_mö‹
 = (
	`πems_fûesy°em_dev_mö‹_t
(
devi˚
)) /

266 
ATA_MINOR_NUM_RESERVED_PER_ATA_DEVICE
;

269 
˘æ_mö‹
 = 
©a_devs
[
ªl_mö‹
].ctrl_minor;

272 
dev
 = 
©a_devs
[
ªl_mö‹
].
devi˚
;

275 
¨eq
 = 
	`mÆloc
((
©a_ªq_t
));

276 i‡(
¨eq
 =
NULL
)

278  
RTEMS_NO_MEMORY
;

280 
	`mem£t
(
¨eq
, 0, (
©a_ªq_t
));

282 
¨eq
->
ty≥
 = 
ATA_COMMAND_TYPE_NON_DATA
;

283 
¨eq
->
ªgs
.
to_wrôe
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_COMMAND
);

284 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] |=

285 (
dev
 << 
IDE_REGISTER_DEVICE_HEAD_DEV_POS
);

286 
¨eq
->
bªq
 = 
NULL
;

287 
¨eq
->
ªgs
.
to_ªad
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_ERROR
);

293 
cmd
)

295 
ATAIO_SET_MULTIPLE_MODE
:

296 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] =

297 
ATA_COMMAND_SET_MULTIPLE_MODE
;

298 
¨eq
->
ªgs
.
to_wrôe
 |=

299 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_SECTOR_COUNT
);

300 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_SECTOR_COUNT
] = *(
uöt8_t
*)
¨gp
;

304 
	`‰ì
(
¨eq
);

305  
RTEMS_INVALID_NUMBER
;

309 
rc
 = 
	`πems_£m≠h‹e_¸óã
(
	`πems_buûd_«me
('I', 'D', 'E', 'S'),

311 
RTEMS_FIFO
 | 
RTEMS_COUNTING_SEMAPHORE
 |

312 
RTEMS_NO_INHERIT_PRIORITY
 |

313 
RTEMS_NO_PRIORITY_CEILING
 | 
RTEMS_LOCAL
,

315 &(
¨eq
->
£ma
));

316 i‡(
rc
 !
RTEMS_SUCCESSFUL
)

318 
	`‰ì
(
¨eq
);

319  
rc
;

322 
	`©a_add_to_c⁄åﬁÀr_queue
(
˘æ_mö‹
, 
¨eq
);

325 
rc
 = 
	`πems_£m≠h‹e_obèö
(
¨eq
->
£ma
, 
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
);

326 i‡(
rc
 !
RTEMS_SUCCESSFUL
)

328 
	`‰ì
(
¨eq
);

329  
rc
;

332 
	`πems_£m≠h‹e_dñëe
(
¨eq
->
£ma
);

338 i‡(
¨eq
->
°©us
 =
RTEMS_SUCCESSFUL
)

340 
cmd
)

342 
ATAIO_SET_MULTIPLE_MODE
:

345 
rc
 = 
RTEMS_INVALID_NUMBER
;

354 
rc
 = 
RTEMS_IO_ERROR
;

358 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_SUCCESS_EVT
, 
˘æ_mö‹
, 0);

360  
rc
;

361 
	}
}

373 
	$©a_¥o˚ss_ªque°
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
)

375 
©a_ªq_t
 *
¨eq
;

376 
uöt16_t
 
byã
;

377 
©a_queue_msg_t
 
msg
;

378 
uöt8_t
 
i
;

380 
uöt8_t
 
dev
;

382 
uöt16_t
 
vÆ
;

383 
ISR_Levñ
 
Àvñ
;

386 i‡(
	`πems_chaö_is_em±y
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
))

390 
	`_ISR_DißbÀ
(
Àvñ
);

391 
¨eq
 = (
©a_ªq_t
 *)
	`πems_chaö_fú°
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
);

392 
	`_ISR_E«bÀ
(
Àvñ
);

396 
dev
 = 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] &

397 
IDE_REGISTER_DEVICE_HEAD_DEV
;

401 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_DEVICE_HEAD
,

402 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
]);

405 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
, &
byã
);

406 } (
byã
 & 
IDE_REGISTER_STATUS_BSY
) ||

407 (!(
byã
 & 
IDE_REGISTER_STATUS_DRDY
)));

410 
i
=0; i< 
ATA_MAX_CMD_REG_OFFSET
; i++)

412 
uöt32_t
 
ªg
 = (1 << 
i
);

413 i‡(
¨eq
->
ªgs
.
to_wrôe
 & 
ªg
)

414 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
, 
i
, 
¨eq
->
ªgs
.regs[i]);

417 #i‡
ATA_DEBUG


418 
	`©a_¥ötf
("©a_¥o˚ss_ªque°:Åy≥: %d\n", 
¨eq
->
ty≥
);

422 i‡(
¨eq
->
ty≥
 =
ATA_COMMAND_TYPE_PIO_OUT
)

425 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

426 &
byã
);

427 } 
byã
 & 
IDE_REGISTER_STATUS_BSY
);

429 i‡(
byã
 & 
IDE_REGISTER_STATUS_DRQ
)

431 i‡(
¨eq
->
˙t
)

433 
ccbuf
 = 
¨eq
->
cbuf
;

434 
	`ide_c⁄åﬁÀr_wrôe_d©a_block
(
˘æ_mö‹
,

435 
¨eq
->
bªq
->
bufs
[0].
Àngth
 *áªq->
˙t
,

436 
¨eq
->
bªq
->
bufs
, &¨eq->
cbuf
,

437 &
¨eq
->
pos
);

438 
ccbuf
 = 
¨eq
->
cbuf
 - ccbuf;

439 
¨eq
->
˙t
 -
ccbuf
;

444 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
Ál£
)

446 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(

447 
˘æ_mö‹
,

448 
IDE_REGISTER_ALTERNATE_STATUS_OFFSET
,

449 &
vÆ
);

450 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

451 &
vÆ
);

453 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_ERROR_EVT
, 
˘æ_mö‹
,

454 
RTEMS_IO_ERROR
);

459 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
Ál£
)

462 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

463 &
byã
);

464 } 
byã
 & 
IDE_REGISTER_STATUS_BSY
);

466 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_GEN_EVT
, 
˘æ_mö‹
, 0);

468 
	}
}

483 
ölöe
 

484 
	$©a_ªque°_d⁄e
(
©a_ªq_t
 *
¨eq
, 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

485 
πems_°©us_code
 
°©us
)

487 
	`as£π
(
¨eq
);

489 #i‡
ATA_DEBUG


490 
	`©a_¥ötf
("ata_request_done:Éntry\n");

493 
	`ATA_EXEC_CALLBACK
(
¨eq
, 
°©us
);

494 
	`πems_chaö_exåa˘
(&
¨eq
->
lök
);

496 i‡(!
	`πems_chaö_is_em±y
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
))

498 
	`‰ì
(
¨eq
);

499 
	`©a_¥o˚ss_ªque°
(
˘æ_mö‹
);

503 
	`‰ì
(
¨eq
);

505 #i‡
ATA_DEBUG


506 
	`©a_¥ötf
("ata_request_done:Éxit\n");

508 
	}
}

522 
ölöe
 

523 
	$©a_n⁄_d©a_ªque°_d⁄e
(
©a_ªq_t
 *
¨eq
,

524 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

525 
πems_°©us_code
 
°©us
, 
öfo
)

527 #i‡
ATA_DEBUG


528 
	`©a_¥ötf
("ata_non_data_request_done:Éntry\n");

531 
¨eq
->
°©us
 = status;

532 
¨eq
->
öfo
 = info;

533 
	`πems_£m≠h‹e_ªÀa£
(
¨eq
->
£ma
);

534 
	}
}

548 
	$©a_add_to_c⁄åﬁÀr_queue
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

549 
©a_ªq_t
 *
¨eq
)

551 
	`πems_©a_lock
();

553 
	`πems_chaö_≠≥nd
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
, &
¨eq
->
lök
);

554 i‡(
	`πems_chaö_has_⁄ly_⁄e_node
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
))

557 
©a_queue_msg_t
 
msg
;

559 #i‡
ATA_DEBUG_DOES_NOT_WORK_WITH_QEMU


560 
uöt16_t
 
vÆ
;

565 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
,

566 
IDE_REGISTER_ALTERNATE_STATUS
,

567 &
vÆ
);

568 i‡(
vÆ
 & 
IDE_REGISTER_STATUS_BSY
)

571 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_PROCESS_NEXT_EVT
, 
˘æ_mö‹
, 0);

574 
	`πems_©a_u∆ock
();

575 
	}
}

589 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


590 
πems_i§
 
	$©a_öãºu±_h™dÀr
(
πems_ve˘‹_numbî
 
vec
)

592 
πems_chaö_node
 *
the_node
 = 
	`πems_chaö_fú°
(&
©a_öt_vec
[
vec
]);

593 
©a_queue_msg_t
 
msg
;

594 
uöt16_t
 
byã
;

596  ; !
	`πems_chaö_is_èû
(&
©a_öt_vec
[
vec
], 
the_node
) ; )

604 
msg
.
˘æ_mö‹
 = ((
©a_öt_°_t
 *)
the_node
)->ctrl_minor;

605 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
msg
.
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

606 &
byã
);

607 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_GEN_EVT
, msg.
˘æ_mö‹
, 0);

609 
the_node
 =Åhe_node->
√xt
;

611 
	}
}

613 
	$©a_öãºu±_h™dÀr
(
πems_úq_hdl_∑øm
 
h™dÀ
)

615 
©a_úq_chaö_ödex
 = (Ë
h™dÀ
;

616 
πems_chaö_node
 *
the_node
 =

617 
	`πems_chaö_œ°
(&
©a_úq_chaö
[
©a_úq_chaö_ödex
].
úq_chaö
);

618 
©a_queue_msg_t
 
msg
;

619 
uöt16_t
 
byã
;

622  ; !
	`πems_chaö_is_èû
(&
©a_úq_chaö
[
©a_úq_chaö_ödex
].
úq_chaö
,

623 
the_node
) ; )

631 
msg
.
˘æ_mö‹
 = ((
©a_öt_°_t
 *)
the_node
)->ctrl_minor;

632 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
msg
.
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

633 &
byã
);

634 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_GEN_EVT
, msg.
˘æ_mö‹
, 0);

636 
the_node
 =Åhe_node->
√xt
;

638 
	}
}

640 
	$©a_öãºu±_⁄
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
±r
)

644 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(0,

645 
IDE_REGISTER_DEVICE_CONTROL_OFFSET
,

648 
	}
}

651 
	$©a_öãºu±_off
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
±r
)

655 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(0,

656 
IDE_REGISTER_DEVICE_CONTROL_OFFSET
,

657 
IDE_REGISTER_DEVICE_CONTROL_nIEN


659 
	}
}

662 
	$©a_öãºu±_isOn
(c⁄° 
πems_úq_c⁄√˘_d©a
 *
±r
)

664 
uöt16_t
 
byã
;

667 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(0,

668 
IDE_REGISTER_DEVICE_CONTROL_OFFSET
,

669 &
byã


672  !(
byã
 & 
IDE_REGISTER_DEVICE_CONTROL_nIEN
);

673 
	}
}

676 
πems_úq_c⁄√˘_d©a
 
	g©a_úq_d©a
 =

680 
©a_öãºu±_h™dÀr
,

681 
NULL
,

682 
©a_öãºu±_⁄
,

683 
©a_öãºu±_off
,

684 
©a_öãºu±_isOn


698 
ölöe
 

699 
	$©a_pio_ö_¥Ÿocﬁ
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
, 
©a_ªq_t
 *
¨eq
)

701 
uöt16_t
 
vÆ
;

703 
uöt8_t
 
dev
;

705 
©a_queue_msg_t
 
msg
;

708 
dev
 = 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] &

709 
IDE_REGISTER_DEVICE_HEAD_DEV
;

712 i‡(
¨eq
->
˙t
)

714 
ccbuf
 = 
¨eq
->
cbuf
;

715 
	`ide_c⁄åﬁÀr_ªad_d©a_block
(
˘æ_mö‹
,

716 
¨eq
->
bªq
->
bufs
[0].
Àngth
 *áªq->
˙t
,

717 
¨eq
->
bªq
->
bufs
, &¨eq->
cbuf
, &¨eq->
pos
);

718 
ccbuf
 = 
¨eq
->
cbuf
 - ccbuf;

719 
¨eq
->
˙t
 -
ccbuf
;

722 i‡(
¨eq
->
˙t
 == 0)

724 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_SUCCESSFUL
);

726 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
Ál£
)

729 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
, &
vÆ
);

730 } 
vÆ
 & 
IDE_REGISTER_STATUS_BSY
);

732 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_GEN_EVT
, 
˘æ_mö‹
, 0);

734 
	}
}

746 
ölöe
 

747 
	$©a_pio_out_¥Ÿocﬁ
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
, 
©a_ªq_t
 *
¨eq
)

749 
uöt16_t
 
vÆ
;

751 
uöt8_t
 
dev
;

753 
©a_queue_msg_t
 
msg
;

755 #i‡
ATA_DEBUG


756 
	`©a_¥ötf
("ata_pio_out_protocol:\n");

760 
dev
 = 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] &

761 
IDE_REGISTER_DEVICE_HEAD_DEV
;

764 i‡(
¨eq
->
˙t
 == 0)

766 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_SUCCESSFUL
);

770 i‡(
¨eq
->
˙t
)

772 
ccbuf
 = 
¨eq
->
cbuf
;

773 
	`ide_c⁄åﬁÀr_wrôe_d©a_block
(
˘æ_mö‹
,

774 
¨eq
->
bªq
->
bufs
[0].
Àngth
 *áªq->
˙t
,

775 
¨eq
->
bªq
->
bufs
, &¨eq->
cbuf
,

776 &
¨eq
->
pos
);

777 
ccbuf
 = 
¨eq
->
cbuf
 - ccbuf;

778 
¨eq
->
˙t
 -
ccbuf
;

780 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
Ál£
)

783 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

784 &
vÆ
);

785 } 
vÆ
 & 
IDE_REGISTER_STATUS_BSY
);

787 
	`ATA_SEND_EVT
(
msg
, 
ATA_MSG_GEN_EVT
, 
˘æ_mö‹
, 0);

790 
	}
}

804 
πems_èsk


805 
	$©a_queue_èsk
(
πems_èsk_¨gumít
 
¨g
)

807 
©a_queue_msg_t
 
msg
;

808 
size_t
 
size
;

809 
©a_ªq_t
 *
¨eq
;

810 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
;

811 
uöt16_t
 
vÆ
;

812 
uöt16_t
 
vÆ1
;

813 
πems_°©us_code
 
rc
;

814 
ISR_Levñ
 
Àvñ
;

816 
	`πems_©a_lock
();

820 
	`πems_©a_u∆ock
();

823 
rc
 = 
	`πems_mesßge_queue_ª˚ive
(
©a_queue_id
, &
msg
, &
size
, 
RTEMS_WAIT
,

824 
RTEMS_NO_TIMEOUT
);

825 i‡(
rc
 !
RTEMS_SUCCESSFUL
)

826 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_INTERNAL_ERROR
);

829 
˘æ_mö‹
 = 
msg
.ctrl_minor;

831 
	`πems_©a_lock
();

834 
	`_ISR_DißbÀ
(
Àvñ
);

835 
¨eq
 = (
©a_ªq_t
 *)
	`πems_chaö_fú°
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
);

836 
	`_ISR_E«bÀ
(
Àvñ
);

838 
msg
.
ty≥
)

840 
ATA_MSG_PROCESS_NEXT_EVT
:

842 
	`©a_¥o˚ss_ªque°
(
˘æ_mö‹
);

845 
ATA_MSG_SUCCESS_EVT
:

851 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_SUCCESSFUL
);

854 
ATA_MSG_ERROR_EVT
:

860 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_IO_ERROR
);

863 
ATA_MSG_GEN_EVT
:

869 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
,

870 &
vÆ
);

872 i‡(
vÆ
 & 
IDE_REGISTER_STATUS_ERR
)

874 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
,

875 
IDE_REGISTER_ERROR
,

876 &
vÆ
);

877 i‡(
vÆ
 & (
IDE_REGISTER_ERROR_UNC
 |

878 
IDE_REGISTER_ERROR_ICRC
 |

879 
IDE_REGISTER_ERROR_IDNF
 |

880 
IDE_REGISTER_ERROR_NM
 |

881 
IDE_REGISTER_ERROR_MED
))

883 i‡(
¨eq
->
ty≥
 =
ATA_COMMAND_TYPE_NON_DATA
)

884 
	`©a_n⁄_d©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
,

885 
RTEMS_UNSATISFIED
,

886 
RTEMS_IO_ERROR
);

888 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_IO_ERROR
);

893 
¨eq
->
ty≥
)

895 
ATA_COMMAND_TYPE_PIO_IN
:

896 
	`©a_pio_ö_¥Ÿocﬁ
(
˘æ_mö‹
, 
¨eq
);

899 
ATA_COMMAND_TYPE_PIO_OUT
:

900 
	`©a_pio_out_¥Ÿocﬁ
(
˘æ_mö‹
, 
¨eq
);

903 
ATA_COMMAND_TYPE_NON_DATA
:

904 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
,

905 
IDE_REGISTER_ERROR
,

906 &
vÆ1
);

907 
	`©a_n⁄_d©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
,

908 
RTEMS_SUCCESSFUL
,

909 
vÆ1
);

913 #i‡
ATA_DEBUG


914 
	`©a_¥ötf
("ata_queue_task:Çon-supported commandÅype\n");

916 
	`©a_ªque°_d⁄e
(
¨eq
, 
˘æ_mö‹
, 
RTEMS_IO_ERROR
);

922 #i‡
ATA_DEBUG


923 
	`©a_¥ötf
("ata_queue_task: internalÉrror\n");

924 
	`πems_èsk_dñëe
 (
RTEMS_SELF
);

926 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_INTERNAL_ERROR
);

930 
	}
}

944 
	$©a_io˘l
(
πems_disk_devi˚
 *
dd
, 
uöt32_t
 
cmd
, *
¨gp
)

946 
dev_t
 
devi˚
 = 
	`πems_disk_gë_devi˚_idítifõr
(
dd
);

947 
πems_°©us_code
 
°©us
;

948 
πems_devi˚_mö‹_numbî
 
ªl_mö‹
;

950 
ªl_mö‹
 = (
	`πems_fûesy°em_dev_mö‹_t
(
devi˚
)) /

951 
ATA_MINOR_NUM_RESERVED_PER_ATA_DEVICE
;

957 i‡(
©a_devs
[
ªl_mö‹
].
devi˚
 =
ATA_UNDEFINED_VALUE
)

959 
î∫o
 = 
ENODEV
;

963 
cmd
)

965 
RTEMS_BLKIO_REQUEST
:

966 
°©us
 = 
	`©a_io_d©a_ªque°
(
devi˚
, (
πems_blkdev_ªque°
 *)
¨gp
);

969 
ATAIO_SET_MULTIPLE_MODE
:

970 
°©us
 = 
	`©a_n⁄_d©a_ªque°
(
devi˚
, 
cmd
, 
¨gp
);

973 
RTEMS_BLKIO_CAPABILITIES
:

974 *((
uöt32_t
*Ë
¨gp
Ë
RTEMS_BLKDEV_CAP_MULTISECTOR_CONT
;

975 
°©us
 = 
RTEMS_SUCCESSFUL
;

979  
	`πems_blkdev_io˘l
 (
dd
, 
cmd
, 
¨gp
);

983 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

985 
î∫o
 = 
EIO
;

989 
	}
}

991 
	$©a_execuã_devi˚_dügno°ic
(

992 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

993 
uöt16_t
 *
£˘‹_buf„r


996 #i‡
ATA_EXEC_DEVICE_DIAGNOSTIC


997 
©a_ªq_t
 
¨eq
;

998 
blkdev_ªque°1
 
bªq
;

1000 
	`©a_bªq_öô
(&
bªq
, 
£˘‹_buf„r
);

1010 
	`mem£t
(&
¨eq
, 0, (
©a_ªq_t
));

1011 
¨eq
.
ty≥
 = 
ATA_COMMAND_TYPE_NON_DATA
;

1012 
¨eq
.
ªgs
.
to_wrôe
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_COMMAND
);

1013 
¨eq
.
ªgs
.ªgs[
IDE_REGISTER_COMMAND
] =

1014 
ATA_COMMAND_EXECUTE_DEVICE_DIAGNOSTIC
;

1015 
¨eq
.
ªgs
.
to_ªad
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_ERROR
);

1017 
¨eq
.
bªq
 = (
πems_blkdev_ªque°
 *)&breq;

1024 
	`©a_¥o˚ss_ªque°_⁄_öô_pha£
(
˘æ_mö‹
, &
¨eq
);

1029 i‡(
bªq
.
ªq
.
°©us
 =
RTEMS_SUCCESSFUL
)

1032 i‡(
¨eq
.
öfo
 =
ATA_DEV0_PASSED_DEV1_PASSED_OR_NOT_PRSNT
)

1034 
	`¥ötk
("ATA: cål:%d:Örim¨y, sec⁄d¨y\n", 
˘æ_mö‹
);

1035 
	`ATA_DEV_INFO
(
˘æ_mö‹
,0).
¥e£¡
 = 
åue
;

1036 
	`ATA_DEV_INFO
(
˘æ_mö‹
,1).
¥e£¡
 = 
åue
;

1038 i‡(
¨eq
.
öfo
 =
ATA_DEV0_PASSED_DEV1_FAILED
)

1040 
	`¥ötk
("ATA: cål:%d:Örim¨y\n", 
˘æ_mö‹
);

1041 
	`ATA_DEV_INFO
(
˘æ_mö‹
,0).
¥e£¡
 = 
åue
;

1042 
	`ATA_DEV_INFO
(
˘æ_mö‹
,1).
¥e£¡
 = 
Ál£
;

1044 i‡(
¨eq
.
öfo
 < 
ATA_DEV1_PASSED_DEV0_FAILED
)

1046 
	`¥ötk
("ATA: cål:%d: sec⁄d¨y\n", 
˘æ_mö‹
);

1047 
	`ATA_DEV_INFO
(
˘æ_mö‹
,0).
¥e£¡
 = 
Ál£
;

1048 
	`ATA_DEV_INFO
(
˘æ_mö‹
,1).
¥e£¡
 = 
åue
;

1052 
	`¥ötk
("ATA: cål:%d:Ç⁄e\n", 
˘æ_mö‹
);

1053 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 0).
¥e£¡
 = 
Ál£
;

1054 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 1).
¥e£¡
 = 
Ál£
;

1058 i‡(
	`ATA_DEV_INFO
(
˘æ_mö‹
, 1).
¥e£¡
)

1060 
uöt16_t
 
ec
 = 0;

1061 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_ERROR
, &
ec
);

1062 i‡(
ec
 & 
ATA_DEV1_PASSED_DEV0_FAILED
)

1064 
	`¥ötk
("ATA: cål:%d: sec⁄d¨y inf‹˚d\n", 
˘æ_mö‹
);

1065 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 1).
¥e£¡
 = 
åue
;

1069 
	`¥ötk
("ATA: cål:%d: sec⁄d¨yÑemoved\n", 
˘æ_mö‹
);

1070 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 1).
¥e£¡
 = 
Ál£
;

1077 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 0).
¥e£¡
 = 
åue
;

1078 
	`ATA_DEV_INFO
(
˘æ_mö‹
,1).
¥e£¡
 = 
åue
;

1080 
	}
}

1095 
πems_devi˚_drivî


1096 
	$πems_©a_öôülize
(
πems_devi˚_maj‹_numbî
 
maj‹
,

1097 
πems_devi˚_mö‹_numbî
 
mö‹_¨g
,

1098 *
¨gs
)

1100 
uöt32_t
 
˘æ_mö‹
;

1101 
πems_°©us_code
 
°©us
;

1102 
uöt16_t
 *
buf„r
;

1103 
i
, 
dev
 = 0;

1104 
«me
[
ATA_MAX_NAME_LENGTH
];

1105 
dev_t
 
devi˚
;

1106 
©a_öt_°_t
 *
öt_°
;

1108 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


1109 
πems_i§_íåy
 
ﬁd_i§
;

1111 
©a_úq_chaö_u£
;

1114 i‡(
©a_öôülized
)

1115  
RTEMS_SUCCESSFUL
;

1118 
°©us
 = 
	`πems_disk_io_öôülize
();

1119 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1120  
°©us
;

1122 
°©us
 = 
	`πems_£m≠h‹e_¸óã
 (
	`πems_buûd_«me
 ('A', 'T', 'A', 'L'),

1123 1, 
RTEMS_ATA_LOCK_ATTRIBS
, 0,

1124 &
©a_lock
);

1125 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1126  
°©us
;

1129 
°©us
 = 
	`πems_mesßge_queue_¸óã
(

1130 
	`πems_buûd_«me
('A', 'T', 'A', 'Q'),

1131 
ATA_DRIVER_MESSAGE_QUEUE_SIZE
,

1132 (
©a_queue_msg_t
),

1133 
RTEMS_FIFO
 | 
RTEMS_LOCAL
,

1134 &
©a_queue_id
);

1135 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1137 
	`πems_disk_io_d⁄e
();

1138  
°©us
;

1145 
°©us
 = 
	`πems_èsk_¸óã
(

1146 
	`πems_buûd_«me
 ('A', 'T', 'A', 'T'),

1147 ((
πems_©a_drivî_èsk_¥i‹ôy
 > 0)

1148 ? 
πems_©a_drivî_èsk_¥i‹ôy


1149 : 
ATA_DRIVER_TASK_DEFAULT_PRIORITY
),

1150 
ATA_DRIVER_TASK_STACK_SIZE
,

1151 
RTEMS_PREEMPT
 | 
RTEMS_NO_TIMESLICE
 | 
RTEMS_NO_ASR
 |

1152 
	`RTEMS_INTERRUPT_LEVEL
(0),

1153 
RTEMS_NO_FLOATING_POINT
 | 
RTEMS_LOCAL
,

1154 &
©a_èsk_id
);

1155 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1157 
	`πems_mesßge_queue_dñëe
(
©a_queue_id
);

1158 
	`πems_disk_io_d⁄e
();

1159  
°©us
;

1166 
°©us
 = 
	`πems_èsk_°¨t
(
©a_èsk_id
, 
©a_queue_èsk
, 0);

1167 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1169 
	`πems_èsk_dñëe
(
©a_èsk_id
);

1170 
	`πems_mesßge_queue_dñëe
(
©a_queue_id
);

1171 
	`πems_disk_io_d⁄e
();

1172  
°©us
;

1175 
buf„r
 = (
uöt16_t
*)
	`mÆloc
(
ATA_SECTOR_SIZE
);

1176 i‡(
buf„r
 =
NULL
)

1178 
	`πems_èsk_dñëe
(
©a_èsk_id
);

1179 
	`πems_mesßge_queue_dñëe
(
©a_queue_id
);

1180 
	`πems_disk_io_d⁄e
();

1181  
RTEMS_NO_MEMORY
;

1184 
©a_devs_numbî
 = 0;

1186 
i
 = 0; i < (2 * 
IDE_CTRL_MAX_MINOR_NUMBER
); i++)

1187 
©a_devs
[
i
].
devi˚
 = 
ATA_UNDEFINED_VALUE
;

1189 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


1191 
i
 = 0; i < 
ATA_MAX_RTEMS_INT_VEC_NUMBER
; i++)

1192 
	`πems_chaö_öôülize_em±y
(&
©a_öt_vec
[
i
]);

1194 
i
 = 0; i < 
ATA_IRQ_CHAIN_MAX_CNT
; i++) {

1195 
	`πems_chaö_öôülize_em±y
(&(
©a_úq_chaö
[
i
].
úq_chaö
));

1211 
˘æ_mö‹
 = 0; cål_mö‹ < 
IDE_C⁄åﬁÀr_Cou¡
; ctrl_minor++)

1212 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
°©us
 =
IDE_CTRL_INITIALIZED
)

1214 
	`πems_chaö_öôülize_em±y
(&
©a_ide_˘æs
[
˘æ_mö‹
].
ªqs
);

1216 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
åue
)

1218 
öt_°
 = 
	`mÆloc
((
©a_öt_°_t
));

1219 i‡(
öt_°
 =
NULL
)

1221 
	`‰ì
(
buf„r
);

1222 
	`πems_èsk_dñëe
(
©a_èsk_id
);

1223 
	`πems_mesßge_queue_dñëe
(
©a_queue_id
);

1224 
	`πems_disk_io_d⁄e
();

1225  
RTEMS_NO_MEMORY
;

1228 
öt_°
->
˘æ_mö‹
 = ctrl_minor;

1229 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


1230 
°©us
 = 
	`πems_öãºu±_ˇtch
(

1231 
©a_öãºu±_h™dÀr
,

1232 
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_vec
,

1233 &
ﬁd_i§
);

1240 
©a_úq_chaö_u£
 = -1;

1241 
i
 = 0;

1242 ((
i
 < 
©a_úq_chaö_˙t
) &&

1243 (
©a_úq_chaö_u£
 < 0));
i
++) {

1244 i‡(
©a_úq_chaö
[
i
].
«me
 ==

1245 
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_vec
) {

1246 
©a_úq_chaö_u£
 = 
i
;

1249 i‡(
©a_úq_chaö_u£
 < 0) {

1253 i‡(
©a_úq_chaö_˙t
 < 
ATA_IRQ_CHAIN_MAX_CNT
) {

1254 
©a_úq_chaö_u£
 = 
©a_úq_chaö_˙t
++;

1256 
©a_úq_chaö
[
©a_úq_chaö_u£
].
«me
 =

1257 
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_vec
;

1258 
©a_úq_d©a
.
«me
 =

1259 
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_vec
;

1260 
©a_úq_d©a
.
hdl
 = 
©a_öãºu±_h™dÀr
;

1261 
©a_úq_d©a
.
h™dÀ
 = (
πems_úq_hdl_∑øm
Ë
˘æ_mö‹
;

1263 
°©us
 = ((0 =
	`BSP_ö°Æl_πems_úq_h™dÀr
(&
©a_úq_d©a
))

1264 ? 
RTEMS_INVALID_NUMBER


1265 : 
RTEMS_SUCCESSFUL
);

1268 
°©us
 = 
RTEMS_TOO_MANY
;

1272 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1274 
	`‰ì
(
öt_°
);

1275 
	`‰ì
(
buf„r
);

1276 
	`πems_èsk_dñëe
(
©a_èsk_id
);

1277 
	`πems_mesßge_queue_dñëe
(
©a_queue_id
);

1278 
	`πems_disk_io_d⁄e
();

1279  
°©us
;

1281 #i‡
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE


1282 
	`πems_chaö_≠≥nd
(

1283 &
©a_öt_vec
[
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_vec
],

1284 &
öt_°
->
lök
);

1286 
	`πems_chaö_≠≥nd
(

1287 &(
©a_úq_chaö
[
©a_úq_chaö_u£
].
úq_chaö
),

1288 &
öt_°
->
lök
);

1292 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
,

1293 
IDE_REGISTER_DEVICE_CONTROL_OFFSET
,

1294 
IDE_REGISTER_DEVICE_CONTROL_nIEN
);

1297 
	`©a_execuã_devi˚_dügno°ic
(
˘æ_mö‹
, 
buf„r
);

1300 
dev
 = 0; dev < 2; dev++)

1301 i‡(
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
¥e£¡
)

1303 
°©us
 = 
	`©a_idítify_devi˚
(

1304 
˘æ_mö‹
,

1305 
dev
,

1306 
buf„r
,

1307 &
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
));

1308 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1315 
°©us
 = 
	`ide_c⁄åﬁÀr_c⁄fig_io_•ìd
(

1316 
˘æ_mö‹
,

1317 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
modes_avaûabÀ
);

1318 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1324 
©a_devs
[
©a_devs_numbî
].
˘æ_mö‹
 = ctrl_minor;

1325 
©a_devs
[
©a_devs_numbî
].
devi˚
 = 
dev
;

1328 
	`°r˝y
(
«me
, "/dev/hd ");

1329 
«me
[7] = 'a' + 2 * 
˘æ_mö‹
 + 
dev
;

1331 
devi˚
 = 
	`πems_fûesy°em_make_dev_t
(

1332 
maj‹
,

1333 (
©a_devs_numbî
 *

1334 
ATA_MINOR_NUM_RESERVED_PER_ATA_DEVICE
));

1335 
°©us
 = 
	`πems_disk_¸óã_phys
(
devi˚
, 
ATA_SECTOR_SIZE
,

1336 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
lba_avaibÀ
 ?

1337 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
lba_£˘‹s
 :

1338 (
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
hóds
 *

1339 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
cylödîs
 *

1340 
	`ATA_DEV_INFO
(
˘æ_mö‹
, 
dev
).
£˘‹s
),

1341 
©a_io˘l
, 
NULL
, 
«me
);

1342 i‡(
°©us
 !
RTEMS_SUCCESSFUL
)

1344 
©a_devs
[
©a_devs_numbî
].
devi˚
 = 
ATA_UNDEFINED_VALUE
;

1347 
©a_devs_numbî
++;

1349 i‡(
IDE_C⁄åﬁÀr_TabÀ
[
˘æ_mö‹
].
öt_driví
 =
åue
)

1351 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
,

1352 
IDE_REGISTER_DEVICE_CONTROL_OFFSET
,

1357 
	`‰ì
(
buf„r
);

1358 
©a_öôülized
 = 
åue
;

1359  
RTEMS_SUCCESSFUL
;

1360 
	}
}

	@src/libchip/ide/ata.h

14 #i‚de‡
__ATA_H__


15 
	#__ATA_H__


	)

17 
	~<πems.h
>

18 
	~<sys/io˘l.h
>

20 
	~<πems/blkdev.h
>

22 #ifde‡
__˝lu•lus


26 
πems_devi˚_drivî
 
πems_©a_öôülize
(

27 
πems_devi˚_maj‹_numbî
 
maj‹
,

28 
πems_devi˚_mö‹_numbî
 
mö‹
,

29 *
¨gs
);

31 
	#ATA_DRIVER_TABLE_ENTRY
 \

32 {
πems_©a_öôülize
, 
RTEMS_GENERIC_BLOCK_DEVICE_DRIVER_ENTRIES
}

	)

35 
	#ATAIO_SET_MULTIPLE_MODE
 
	`_IO
('A', 1)

	)

41 
	#ATA_DRIVER_MESSAGE_QUEUE_SIZE
 50

	)

42 
	#ATA_DRIVER_TASK_STACK_SIZE
 16*1024

	)

43 
	#ATA_DRIVER_TASK_DEFAULT_PRIORITY
 140

	)

44 
πems_èsk_¥i‹ôy
 
πems_©a_drivî_èsk_¥i‹ôy
;

45 #ifde‡
__˝lu•lus


	@src/libchip/ide/ata_internal.h

15 #i‚de‡
__ATA_INTERNAL_H__


16 
	#__ATA_INTERNAL_H__


	)

18 
	~<sys/∑øm.h
>

19 
	~<πems.h
>

20 
	~<sys/ty≥s.h
>

21 
	~<πems/libio.h
>

22 
	~<°dlib.h
>

24 
	~<πems/blkdev.h
>

25 
	~<πems/diskdevs.h
>

27 #ifde‡
__˝lu•lus


37 #i‡(
CPU_BIG_ENDIAN
 =
TRUE
)

38 
	#CF_LE_W
(
v
Ë
	`CPU_sw≠_u16
(v)

	)

39 
	#CF_LE_L
(
v
Ë
	`CPU_sw≠_u32
(v)

	)

40 
	#CT_LE_W
(
v
Ë
	`CPU_sw≠_u16
(v)

	)

41 
	#CT_LE_L
(
v
Ë
	`CPU_sw≠_u32
(v)

	)

43 
	#CF_LE_W
(
v
Ë(v)

	)

44 
	#CF_LE_L
(
v
Ë(v)

	)

45 
	#CT_LE_W
(
v
Ë(v)

	)

46 
	#CT_LE_L
(
v
Ë(v)

	)

49 
	#ATA_UNDEFINED_VALUE
 (-1)

	)

52 
	#ATA_SECTOR_SIZE
 512

	)

55 
	#ATA_MAX_CMD_REG_OFFSET
 8

	)

61 
	#ATA_COMMAND_TYPE_NON_DATA
 0

	)

62 
	#ATA_COMMAND_TYPE_PIO_IN
 1

	)

63 
	#ATA_COMMAND_TYPE_PIO_OUT
 2

	)

64 
	#ATA_COMMAND_TYPE_DMA
 3

	)

74 
	#ATA_COMMAND_NOP
 0x00

	)

75 
	#ATA_COMMAND_READ_SECTORS
 0x20

	)

76 
	#ATA_COMMAND_WRITE_SECTORS
 0x30

	)

77 
	#ATA_COMMAND_READ_VERIFY_SECTORS
 0x40

	)

78 
	#ATA_COMMAND_SEEK
 0x70

	)

79 
	#ATA_COMMAND_EXECUTE_DEVICE_DIAGNOSTIC
 0x90

	)

80 
	#ATA_COMMAND_INITIALIZE_DEVICE_PARAMETERS
 0x91

	)

81 
	#ATA_COMMAND_DOWNLOAD_MICROCODE
 0x92

	)

82 
	#ATA_COMMAND_READ_MULTIPLE
 0xc4

	)

83 
	#ATA_COMMAND_WRITE_MULTIPLE
 0xc5

	)

84 
	#ATA_COMMAND_SET_MULTIPLE_MODE
 0xc6

	)

85 
	#ATA_COMMAND_READ_DMA
 0xc8

	)

86 
	#ATA_COMMAND_WRITE_DMA
 0xˇ

	)

87 
	#ATA_COMMAND_STANDBY_IMMEDIATE
 0xe0

	)

88 
	#ATA_COMMAND_IDLE_IMMEDIATE
 0xe1

	)

89 
	#ATA_COMMAND_STANDBY
 0xe2

	)

90 
	#ATA_COMMAND_IDLE
 0xe3

	)

91 
	#ATA_COMMAND_READ_BUFFER
 0xe4

	)

92 
	#ATA_COMMAND_CHECK_POWER_MODE
 0xe5

	)

93 
	#ATA_COMMAND_SLEEP
 0xe6

	)

94 
	#ATA_COMMAND_WRITE_BUFFER
 0xe8

	)

95 
	#ATA_COMMAND_IDENTIFY_DEVICE
 0xec

	)

96 
	#ATA_COMMAND_SET_FEATURES
 0xef

	)

99 
	#ATA_COMMAND_MEDIA_LOCK
 0xde

	)

100 
	#ATA_COMMAND_MEDIA_UNLOCK
 0xdf

	)

101 
	#ATA_COMMAND_MEDIA_EJECT
 0xed

	)

105 
	#ATA_COMMAND_RECALIBRATE
 0x10

	)

106 
	#ATA_COMMAND_READ_SECTOR_NON_RETRY
 0x21

	)

107 
	#ATA_COMMAND_READ_LONG_RETRY
 0x22

	)

108 
	#ATA_COMMAND_READ_LONG_NON_RETRY
 0x23

	)

109 
	#ATA_COMMAND_WRITE_SECTOR_NON_RETRY
 0x31

	)

110 
	#ATA_COMMAND_WRITE_LONG_RETRY
 0x32

	)

111 
	#ATA_COMMAND_WRITE_LONG_NON_RETRY
 0x33

	)

112 
	#ATA_COMMAND_WRITE_VERIFY
 0x3c

	)

113 
	#ATA_COMMAND_READ_VERIFY_SECTOR_NON_RETRY
 0x41

	)

114 
	#ATA_COMMAND_FORMAT_TRACK
 0x50

	)

115 
	#ATA_COMMAND_READ_DMA_NON_RETRY
 0xc9

	)

116 
	#ATA_COMMAND_WRITE_DMA_NON_RETRY
 0xcb

	)

117 
	#ATA_COMMAND_ACKNOWLEGE_MEDIA_CHANGE
 0xdb

	)

118 
	#ATA_COMMAND_BOOT_POST_BOOT
 0xdc

	)

119 
	#ATA_COMMAND_BOOT_PRE_BOOT
 0xdd

	)

120 
	#ATA_COMMAND_WRITE_SAME
 0xe9

	)

123 
	#ATA_COMMAND_CFA_REQUEST_EXTENDED_ERROR_CODE
 0x03

	)

124 
	#ATA_COMMAND_CFA_WRITE_SECTORS_WITHOUT_ERASE
 0x38

	)

125 
	#ATA_COMMAND_CFA_TRANSLATE_SECTOR
 0x87

	)

126 
	#ATA_COMMAND_CFA_ERASE_SECTORS
 0xc0

	)

127 
	#ATA_COMMAND_CFA_WRITE_MULTIPLE_WITHOUT_ERASE
 0xcd

	)

130 
	#ATA_COMMAND_DEVICE_RESET
 0x08

	)

131 
	#ATA_COMMAND_PACKET
 0xa0

	)

132 
	#ATA_COMMAND_IDENTIFY_PACKET_DEVICE
 0xa1

	)

133 
	#ATA_COMMAND_SERVICE
 0xa2

	)

136 
	#ATA_COMMAND_SECURITY_SET_PASSWORD
 0xf1

	)

137 
	#ATA_COMMAND_SECURITY_UNLOCK
 0xf2

	)

138 
	#ATA_COMMAND_SECURITY_ERASE_PREPARE
 0xf3

	)

139 
	#ATA_COMMAND_SECURITY_ERASE_UNIT
 0xf4

	)

140 
	#ATA_COMMAND_SECURITY_FREEZE_LOCK
 0xf5

	)

141 
	#ATA_COMMAND_SECURITY_DISABLE_PASSWORD
 0xf6

	)

144 
	#ATA_COMMAND_SMART
 0xb0

	)

145 
	#ATA_COMMAND_READ_DMA_QUEUED
 0xc7

	)

146 
	#ATA_COMMAND_WRITE_DMA_QUEUED
 0xcc

	)

147 
	#ATA_COMMAND_GET_MEDIA_STATUS
 0xda

	)

148 
	#ATA_COMMAND_FLUSH_CACHE
 0xe7

	)

149 
	#ATA_COMMAND_READ_NATIVE_MAX_ADDRESS
 0xf8

	)

150 
	#ATA_COMMAND_SET_MAX_ADDRESS
 0xf9

	)

152 
	#ATA_REGISTERS_VALUE
(
ªg
Ë(1 << (ªg))

	)

155 
	#ATA_IDENT_WORD_RW_MULT
 47

	)

156 
	#ATA_IDENT_WORD_CAPABILITIES
 49

	)

157 
	#ATA_IDENT_WORD_FIELD_VALIDITY
 53

	)

158 
	#ATA_IDENT_WORD_NUM_OF_CURR_LOG_CLNDS
 54

	)

159 
	#ATA_IDENT_WORD_NUM_OF_CURR_LOG_HEADS
 55

	)

160 
	#ATA_IDENT_WORD_NUM_OF_CURR_LOG_SECS
 56

	)

161 
	#ATA_IDENT_WORD_MULT_SECS
 59

	)

162 
	#ATA_IDENT_WORD_NUM_OF_USR_SECS0
 60

	)

163 
	#ATA_IDENT_WORD_NUM_OF_USR_SECS1
 61

	)

164 
	#ATA_IDENT_WORD_PIO_SPPRTD
 64

	)

166 
	#ATA_IDENT_BIT_VALID
 0x02

	)

172 
	#ATA_REGISTERS_POSITION
 0xfc

	)

174 
	#ATA_MINOR_NUM_RESERVED_PER_ATA_DEVICE
 64

	)

176 
	#ATA_MAX_RTEMS_INT_VEC_NUMBER
 255

	)

178 
	#ATA_MAX_NAME_LENGTH
 10

	)

181 
	#ATA_DEV0_PASSED_DEV1_PASSED_OR_NOT_PRSNT
 0x01

	)

182 
	#ATA_DEV0_PASSED_DEV1_FAILED
 0x81

	)

183 
	#ATA_DEV1_PASSED_DEV0_FAILED
 0x80

	)

188 
	#ATA_DEV_INFO
(
c⁄åﬁÀr_mö‹
, 
dev
) \

189 
©a_ide_˘æs
[
c⁄åﬁÀr_mö‹
].
devi˚
[
dev
]

	)

194 
	s©a_ªgi°îs_s
 {

195 
uöt16_t
 
ªgs
[8];

196 
uöt16_t
 
to_ªad
;

197 
uöt16_t
 
to_wrôe
;

198 } 
	t©a_ªgi°îs_t
;

201 
	s©a_ªq_s
 {

202 
πems_chaö_node
 
lök
;

203 
ty≥
;

204 
©a_ªgi°îs_t
 
ªgs
;

205 
uöt32_t
 
˙t
;

206 
uöt32_t
 
cbuf
;

207 
uöt32_t
 
pos
;

208 
πems_blkdev_ªque°
 *
bªq
;

211 
πems_id
 
£ma
;

214 
πems_°©us_code
 
°©us
;

215 
öfo
;

216 } 
	t©a_ªq_t
;

219 
	#ATA_EXEC_CALLBACK
(
¨eq
, 
°©us
) \

221 i‡((
¨eq
)->
bªq
 !
NULL
) \

222 
	`πems_blkdev_ªque°_d⁄e
((
¨eq
)->
bªq
, 
°©us
); \

223 } 0)

	)

226 
	e©a_msg_ty≥_s
 {

227 
ATA_MSG_GEN_EVT
 = 1,

228 
ATA_MSG_SUCCESS_EVT
,

229 
ATA_MSG_ERROR_EVT
,

230 
ATA_MSG_PROCESS_NEXT_EVT


231 } 
	t©a_msg_ty≥_t
;

234 
	s©a_queue_msg_s
 {

235 
©a_msg_ty≥_t
 
ty≥
;

236 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
;

237 
îr‹
;

238 } 
	t©a_queue_msg_t
;

241 
	#ATA_FILL_MSG
(
msg
, 
evt_ty≥
, 
˘æ
, 
îr
)\

243 
msg
.
ty≥
 = 
evt_ty≥
;\

244 
msg
.
˘æ_mö‹
 = 
˘æ
;\

245 
msg
.
îr‹
 = 
îr
;\

246 } 0)

	)

248 
	#ATA_SEND_EVT
(
msg
, 
ty≥
, 
˘æ
, 
îr
)\

250 
πems_°©us_code
 
rc
;\

251 
	`ATA_FILL_MSG
(
msg
, 
ty≥
, 
˘æ
, 
îr
);\

252 
rc
 = 
	`πems_mesßge_queue_£nd
(
©a_queue_id
, &
msg
,\

253 (
©a_queue_msg_t
));\

254 i‡(
rc
 !
RTEMS_SUCCESSFUL
)\

255 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_INTERNAL_ERROR
);\

256 } 0)

	)

262 
	s©a_öt_°_s
 {

263 
πems_chaö_node
 
lök
;

264 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
;

265 } 
	t©a_öt_°_t
;

271 
	s©a_ide_dev_s
 {

272 
˘æ_mö‹
;

273 
devi˚
;

274 } 
	t©a_ide_dev_t
;

279 
	s©a_dev_s
 {

280 
öt8_t
 
¥e£¡
;

282 
uöt16_t
 
cylödîs
;

283 
uöt16_t
 
hóds
;

284 
uöt16_t
 
£˘‹s
;

285 
uöt32_t
 
lba_£˘‹s
;

288 
uöt8_t
 
lba_avaibÀ
;

290 
uöt16_t
 
modes_avaûabÀ
;

291 
uöt16_t
 
mode_a˘ive
;

292 } 
	t©a_dev_t
;

299 
	s©a_ide_˘æ_s
 {

300 
boﬁ
 
¥e£¡
;

301 
©a_dev_t
 
devi˚
[2];

302 
πems_chaö_c⁄åﬁ
 
ªqs
;

303 } 
	t©a_ide_˘æ_t
;

306 
	sblkdev_ªque°1
 {

307 
πems_blkdev_ªque°
 
ªq
;

308 
πems_blkdev_sg_buf„r
 
sg
[1];

309 } 
	tblkdev_ªque°1
;

311 
©a_bªq_öô
(
blkdev_ªque°1
 *
bªq
, 
uöt16_t
 *
£˘‹_buf„r
);

313 
πems_°©us_code
 
©a_idítify_devi˚
(

314 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

315 
dev
,

316 
uöt16_t
 *
£˘‹_buf„r
,

317 
©a_dev_t
 *
devi˚_íåy


320 
©a_¥o˚ss_ªque°_⁄_öô_pha£
(

321 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

322 
©a_ªq_t
 *
¨eq


325 #ifde‡
__˝lu•lus


	@src/libchip/ide/ata_util.c

12 
	~"©a_öã∫Æ.h
"

14 
	~<as£π.h
>

15 
	~<°rög.h
>

17 
	~<libchù/ide_˘æ_io.h
>

18 
	~<libchù/ide_˘æ_cfg.h
>

32 
	$©a_¥o˚ss_ªque°_⁄_öô_pha£
(
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

33 
©a_ªq_t
 *
¨eq
)

35 
uöt16_t
 
byã
;

36 
uöt8_t
 
i
;

38 
uöt8_t
 
dev
;

40 
uöt16_t
 
vÆ
, 
vÆ1
;

41 vﬁ©ûê
ªåõs
;

43 
	`as£π
(
¨eq
);

46 
dev
 = 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
] &

47 
IDE_REGISTER_DEVICE_HEAD_DEV
;

50 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_DEVICE_HEAD
,

51 
¨eq
->
ªgs
.ªgs[
IDE_REGISTER_DEVICE_HEAD
]);

53 
ªåõs
 = 0;

55 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
, &
byã
);

62 i‡–! (
byã
 & (
IDE_REGISTER_STATUS_BSY
 | 
IDE_REGISTER_STATUS_DRDY
))) {

63 
ªåõs
++;

64 i‡–10000 =
ªåõs
 ) {

66 
¨eq
->
bªq
->
°©us
 = 
RTEMS_UNSATISFIED
;

70 } (
byã
 & 
IDE_REGISTER_STATUS_BSY
) ||

71 (!(
byã
 & 
IDE_REGISTER_STATUS_DRDY
)));

73 
i
=0; i< 
ATA_MAX_CMD_REG_OFFSET
; i++)

75 
uöt32_t
 
ªg
 = (1 << 
i
);

76 i‡(
¨eq
->
ªgs
.
to_wrôe
 & 
ªg
)

77 
	`ide_c⁄åﬁÀr_wrôe_ªgi°î
(
˘æ_mö‹
, 
i
,

78 
¨eq
->
ªgs
.ªgs[
i
]);

82 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
, &
byã
);

83 } 
byã
 & 
IDE_REGISTER_STATUS_BSY
);

85 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_STATUS
, &
vÆ
);

86 
	`ide_c⁄åﬁÀr_ªad_ªgi°î
(
˘æ_mö‹
, 
IDE_REGISTER_ERROR
, &
vÆ1
);

88 i‡(
vÆ
 & 
IDE_REGISTER_STATUS_ERR
)

90 
¨eq
->
bªq
->
°©us
 = 
RTEMS_IO_ERROR
;

94 
¨eq
->
ty≥
)

96 
ATA_COMMAND_TYPE_PIO_IN
:

97 i‡(
¨eq
->
˙t
)

99 
ccbuf
 = 
¨eq
->
cbuf
;

100 
	`ide_c⁄åﬁÀr_ªad_d©a_block
(
˘æ_mö‹
,

101 
¨eq
->
bªq
->
bufs
[0].
Àngth
 *áªq->
˙t
,

102 
¨eq
->
bªq
->
bufs
, &¨eq->
cbuf
,

103 &
¨eq
->
pos
);

104 
ccbuf
 = 
¨eq
->
cbuf
 - ccbuf;

105 
¨eq
->
˙t
 -
ccbuf
;

107 i‡(
¨eq
->
˙t
 == 0)

109 
¨eq
->
bªq
->
°©us
 = 
RTEMS_SUCCESSFUL
;

117 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_INTERNAL_ERROR
);

121 
ATA_COMMAND_TYPE_NON_DATA
:

122 
¨eq
->
bªq
->
°©us
 = 
RTEMS_SUCCESSFUL
;

123 
¨eq
->
öfo
 = 
vÆ1
;

127 
¨eq
->
bªq
->
°©us
 = 
RTEMS_IO_ERROR
;

130 
	}
}

132 
	$©a_bªq_öô
(
blkdev_ªque°1
 *
bªq
, 
uöt16_t
 *
£˘‹_buf„r
)

134 
	`mem£t
(
bªq
, 0, (*breq));

136 
bªq
->
ªq
.
d⁄e_¨g
 = breq;

137 
bªq
->
ªq
.
bu‚um
 = 1;

138 
bªq
->
ªq
.
bufs
 [0].
Àngth
 = 
ATA_SECTOR_SIZE
;

139 
bªq
->
ªq
.
bufs
 [0].
buf„r
 = 
£˘‹_buf„r
;

140 
	}
}

142 
πems_°©us_code
 
	$©a_idítify_devi˚
(

143 
πems_devi˚_mö‹_numbî
 
˘æ_mö‹
,

144 
dev
,

145 
uöt16_t
 *
£˘‹_buf„r
,

146 
©a_dev_t
 *
devi˚_íåy


149 
©a_ªq_t
 
¨eq
;

150 
blkdev_ªque°1
 
bªq
;

152 
	`©a_bªq_öô
(&
bªq
, 
£˘‹_buf„r
);

158 
	`mem£t
(&
¨eq
, 0, (
©a_ªq_t
));

159 
¨eq
.
ty≥
 = 
ATA_COMMAND_TYPE_PIO_IN
;

160 
¨eq
.
ªgs
.
to_wrôe
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_COMMAND
);

161 
¨eq
.
ªgs
.ªg†[
IDE_REGISTER_COMMAND
] = 
ATA_COMMAND_IDENTIFY_DEVICE
;

162 
¨eq
.
ªgs
.
to_ªad
 = 
	`ATA_REGISTERS_VALUE
(
IDE_REGISTER_STATUS
);

163 
¨eq
.
bªq
 = (
πems_blkdev_ªque°
 *)&breq;

164 
¨eq
.
˙t
 = 
bªq
.
ªq
.
bu‚um
;

165 
¨eq
.
ªgs
.ªg†[
IDE_REGISTER_DEVICE_HEAD
] |=

166 
dev
 << 
IDE_REGISTER_DEVICE_HEAD_DEV_POS
;

173 
	`©a_¥o˚ss_ªque°_⁄_öô_pha£
(
˘æ_mö‹
, &
¨eq
);

176 i‡(
bªq
.
ªq
.
°©us
 !
RTEMS_SUCCESSFUL
) {

177  
RTEMS_IO_ERROR
;

184 
devi˚_íåy
->
cylödîs
 =

185 
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_NUM_OF_CURR_LOG_CLNDS
]);

186 
devi˚_íåy
->
hóds
 =

187 
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_NUM_OF_CURR_LOG_HEADS
]);

188 
devi˚_íåy
->
£˘‹s
 =

189 
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_NUM_OF_CURR_LOG_SECS
]);

190 
devi˚_íåy
->
lba_£˘‹s
 =

191 
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_NUM_OF_USR_SECS1
]);

192 
devi˚_íåy
->
lba_£˘‹s
 <<= 16;

193 
devi˚_íåy
->
lba_£˘‹s
 +
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_NUM_OF_USR_SECS0
]);

194 
devi˚_íåy
->
lba_avaibÀ
 =

195 (
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_CAPABILITIES
]) >> 9) & 0x1;

197 i‡((
	`CF_LE_W
(
£˘‹_buf„r
[
ATA_IDENT_WORD_FIELD_VALIDITY
]) &

198 
ATA_IDENT_BIT_VALID
) == 0) {

200 
devi˚_íåy
->
mode_a˘ive
 = 
ATA_MODES_PIO3
;

202 
devi˚_íåy
->
modes_avaûabÀ
 =

203 ((
	`CF_LE_W
(
£˘‹_buf„r
[64]Ë& 0x1Ë? 
ATA_MODES_PIO3
 : 0) |

204 ((
	`CF_LE_W
(
£˘‹_buf„r
[64]Ë& 0x2Ë? 
ATA_MODES_PIO4
 : 0) |

205 ((
	`CF_LE_W
(
£˘‹_buf„r
[63]Ë& 0x1Ë? 
ATA_MODES_DMA0
 : 0) |

206 ((
	`CF_LE_W
(
£˘‹_buf„r
[63]) & 0x2) ?

207 
ATA_MODES_DMA0
 | 
ATA_MODES_DMA1
 : 0) |

208 ((
	`CF_LE_W
(
£˘‹_buf„r
[63]) & 0x4) ?

209 
ATA_MODES_DMA0
 | 
ATA_MODES_DMA1
 | 
ATA_MODES_DMA2
 : 0);

210 i‡(
devi˚_íåy
->
modes_avaûabÀ
 == 0) {

211  
RTEMS_IO_ERROR
;

215  
RTEMS_SUCCESSFUL
;

216 
	}
}

	@src/libchip/ide/ide_controller.c

16 
	#IDE_CONTROLLER_TRACE
 0

	)

18 
	~<πems/chaö.h
>

19 
	~<î∫o.h
>

20 
	~<πems/blkdev.h
>

22 
	~<libchù/ide_˘æ.h
>

23 
	~<libchù/ide_˘æ_cfg.h
>

24 
	~<libchù/ide_˘æ_io.h
>

26 #i‡
IDE_CONTROLLER_TRACE


27 
	gide_c⁄åﬁÀr_åa˚
 = 1;

44 
πems_devi˚_drivî


45 
	$ide_c⁄åﬁÀr_öôülize
(
πems_devi˚_maj‹_numbî
 
maj‹
,

46 
πems_devi˚_mö‹_numbî
 
mö‹_¨g
,

47 *
¨gs
)

49 
mö‹
;

52 i‡(
IDE_C⁄åﬁÀr_Cou¡
 > 
IDE_CTRL_MAX_MINOR_NUMBER
)

53 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_TOO_MANY
);

55 
mö‹
=0; mö‹ < 
IDE_C⁄åﬁÀr_Cou¡
; minor++)

57 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
°©us
 = 
IDE_CTRL_NON_INITIALIZED
;

59 i‡((
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
¥obe
 =
NULL
 ||

60 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
	`¥obe
(minor)) &&

61 (
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
˘æ_¥obe
 =
NULL
 ||

62 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_¥obe
(minor)))

64 
dev_t
 
dev
;

65 
dev
 = 
	`πems_fûesy°em_make_dev_t
–
maj‹
, 
mö‹
 );

66 i‡(
	`mknod
(
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
«me
,

67 0777 | 
S_IFBLK
, 
dev
 ) < 0)

68 
	`πems_Áèl_îr‹_occuºed
(
î∫o
);

69 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_öôülize
(minor);

70 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
°©us
 = 
IDE_CTRL_INITIALIZED
;

73  
RTEMS_SUCCESSFUL
;

74 
	}
}

91 
	$ide_c⁄åﬁÀr_ªad_d©a_block
(
πems_devi˚_mö‹_numbî
 
mö‹
,

92 
uöt32_t
 
block_size
,

93 
πems_blkdev_sg_buf„r
 *
bufs
,

94 
uöt32_t
 *
cbuf
,

95 
uöt32_t
 *
pos
)

97 #i‡
IDE_CONTROLLER_TRACE


98 i‡(
ide_c⁄åﬁÀr_åa˚
)

99 
	`¥ötk
 ("IDE d©®blockÑód: %d:%d\n", *
cbuf
, 
bufs
[*cbuf].
block
);

101 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_ªad_block
(mö‹, 
block_size
, 
bufs
,

102 
cbuf
, 
pos
);

103 
	}
}

120 
	$ide_c⁄åﬁÀr_wrôe_d©a_block
(
πems_devi˚_mö‹_numbî
 
mö‹
,

121 
uöt32_t
 
block_size
,

122 
πems_blkdev_sg_buf„r
 *
bufs
,

123 
uöt32_t
 *
cbuf
,

124 
uöt32_t
 *
pos
)

127 #i‡
IDE_CONTROLLER_TRACE


128 i‡(
ide_c⁄åﬁÀr_åa˚
)

129 
	`¥ötk
 ("IDE d©®block wrôe: %d:%d\n", *
cbuf
, 
bufs
[*cbuf].
block
);

131 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_wrôe_block
(mö‹, 
block_size
, 
bufs
,

132 
cbuf
, 
pos
);

133 
	}
}

148 
	$ide_c⁄åﬁÀr_ªad_ªgi°î
(
πems_devi˚_mö‹_numbî
 
mö‹
,

149 
ªg
,

150 
uöt16_t
 *
vÆue
)

152 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_ªg_ªad
(mö‹, 
ªg
, 
vÆue
);

153 #i‡
IDE_CONTROLLER_TRACE


154 i‡(
ide_c⁄åﬁÀr_åa˚
)

155 
	`¥ötk
 ("IDEÑódÑeg: %d => %04x\n", 
ªg
, *
vÆue
);

157 
	}
}

172 
	$ide_c⁄åﬁÀr_wrôe_ªgi°î
(
πems_devi˚_mö‹_numbî
 
mö‹
, 
ªg
,

173 
uöt16_t
 
vÆue
)

175 #i‡
IDE_CONTROLLER_TRACE


176 i‡(
ide_c⁄åﬁÀr_åa˚
)

177 
	`¥ötk
 ("IDE wrôêªg: %d => %04x\n", 
ªg
, 
vÆue
);

179 
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_ªg_wrôe
(mö‹, 
ªg
, 
vÆue
);

180 
	}
}

194 
πems_°©us_code


195 
	$ide_c⁄åﬁÀr_c⁄fig_io_•ìd
(
mö‹
, 
uöt16_t
 
modes_avaûabÀ
)

197  
IDE_C⁄åﬁÀr_TabÀ
[
mö‹
].
‚s
->
	`˘æ_c⁄fig_io_•ìd
(

198 
mö‹
,

199 
modes_avaûabÀ
);

200 
	}
}

	@src/libchip/ide/ide_ctrl.h

13 #i‚de‡
__IDE_CTRL_H__


14 
	#__IDE_CTRL_H__


	)

16 #ifde‡
__˝lu•lus


20 
πems_devi˚_drivî
 
ide_c⁄åﬁÀr_öôülize
(

21 
πems_devi˚_maj‹_numbî
 
maj‹
,

22 
πems_devi˚_mö‹_numbî
 
mö‹
,

23 *
¨gs
);

26 
	#IDE_CONTROLLER_DRIVER_TABLE_ENTRY
 \

27 {
ide_c⁄åﬁÀr_öôülize
, 
NULL
, NULL, NULL, NULL, NULL}

	)

30 #ifde‡
__˝lu•lus


	@src/libchip/ide/ide_ctrl_cfg.h

14 #i‚de‡
__IDE_CTRL_CFG_H__


15 
	#__IDE_CTRL_CFG_H__


	)

17 
	~<πems/blkdev.h
>

19 #ifde‡
__˝lu•lus


27 
IDE_STD
,

28 
IDE_CUSTOM


29 } 
	tide_˘æ_devs_t
;

32 
	#ATA_MODES_PIO3
 0x001

	)

33 
	#ATA_MODES_PIO4
 0x002

	)

35 
	#ATA_MODES_PIO
 0x003

	)

37 
	#ATA_MODES_DMA0
 0x004

	)

38 
	#ATA_MODES_DMA1
 0x008

	)

39 
	#ATA_MODES_DMA2
 0x010

	)

41 
	#ATA_MODES_UDMA0
 0x020

	)

42 
	#ATA_MODES_UDMA1
 0x040

	)

43 
	#ATA_MODES_UDMA2
 0x080

	)

44 
	#ATA_MODES_UDMA3
 0x100

	)

45 
	#ATA_MODES_UDMA4
 0x200

	)

46 
	#ATA_MODES_UDMA5
 0x400

	)

48 
	#ATA_MODES_UDMA
 0x7e0

	)

49 
	#ATA_MODES_DMA
 0x7fc

	)

57 
	side_˘æ_‚s_s
 {

58 
boﬁ
 (*
˘æ_¥obe
)(
mö‹
);

59 (*
˘æ_öôülize
)(
mö‹
);

60 (*
˘æ_c⁄åﬁ
)(
mö‹
, 
uöt32_t
 
comm™d
,

61 *
¨g
);

67 (*
˘æ_ªg_ªad
)(
mö‹
, 
ªgi°
, 
uöt16_t
 *
vÆue
);

68 (*
˘æ_ªg_wrôe
)(
mö‹
, 
ªgi°
, 
uöt16_t
 
vÆue
);

74 (*
˘æ_ªad_block
)(
mö‹
, 
uöt32_t
 
block_size
,

75 
πems_blkdev_sg_buf„r
 *
bufs
, 
uöt32_t
 *
cbuf
,

76 
uöt32_t
 *
pos
);

77 (*
˘æ_wrôe_block
)(
mö‹
, 
uöt32_t
 
block_size
,

78 
πems_blkdev_sg_buf„r
 *
bufs
, 
uöt32_t
 *
cbuf
,

79 
uöt32_t
 *
pos
);

81 
πems_°©us_code
 (*
˘æ_c⁄fig_io_•ìd
)(
mö‹
,

82 
uöt16_t
 
modes_avaûabÀ
);

83 } 
	tide_˘æ_‚s_t
;

89 
	side_c⁄åﬁÀr_b•_èbÀ_s
 {

90 *
«me
;

91 
ide_˘æ_devs_t
 
ty≥
;

92 
ide_˘æ_‚s_t
 *
‚s
;

93 
boﬁ
 (*
¥obe
)(
mö‹
);

94 
uöt8_t
 
°©us
;

97 
uöt32_t
 
p‹t1
;

98 
boﬁ
 
öt_driví
;

99 
πems_ve˘‹_numbî
 
öt_vec
;

100 *
∑øms
;

104 } 
	tide_c⁄åﬁÀr_b•_èbÀ_t
;

107 
ide_c⁄åﬁÀr_b•_èbÀ_t
 
IDE_C⁄åﬁÀr_TabÀ
[];

110 
IDE_C⁄åﬁÀr_Cou¡
;

113 
	#IDE_CTRL_MAX_MINOR_NUMBER
 4

	)

115 
	#IDE_CTRL_NON_INITIALIZED
 0

	)

116 
	#IDE_CTRL_INITIALIZED
 1

	)

118 #ifde‡
__˝lu•lus


	@src/libchip/ide/ide_ctrl_io.h

14 #i‚de‡
__IDE_CTRL_IO_H__


15 
	#__IDE_CTRL_IO_H__


	)

17 #ifde‡
__˝lu•lus


21 
	~<πems/blkdev.h
>

24 
	#IDE_REGISTER_DATA
 0

	)

25 
	#IDE_REGISTER_ERROR
 1

	)

26 
	#IDE_REGISTER_FEATURES
 
IDE_REGISTER_ERROR


	)

27 
	#IDE_REGISTER_SECTOR_COUNT
 2

	)

28 
	#IDE_REGISTER_SECTOR_NUMBER
 3

	)

29 
	#IDE_REGISTER_LBA0
 
IDE_REGISTER_SECTOR_NUMBER


	)

30 
	#IDE_REGISTER_CYLINDER_LOW
 4

	)

31 
	#IDE_REGISTER_LBA1
 
IDE_REGISTER_CYLINDER_LOW


	)

32 
	#IDE_REGISTER_CYLINDER_HIGH
 5

	)

33 
	#IDE_REGISTER_LBA2
 
IDE_REGISTER_CYLINDER_HIGH


	)

34 
	#IDE_REGISTER_DEVICE_HEAD
 6

	)

35 
	#IDE_REGISTER_LBA3
 
IDE_REGISTER_DEVICE_HEAD


	)

36 
	#IDE_REGISTER_STATUS
 7

	)

37 
	#IDE_REGISTER_COMMAND
 
IDE_REGISTER_STATUS


	)

40 
	#IDE_REGISTER_ALTERNATE_STATUS
 6

	)

41 
	#IDE_REGISTER_DEVICE_CONTROL
 
IDE_REGISTER_ALTERNATE_STATUS


	)

44 
	#IDE_REGISTER_DEVICE_CONTROL_OFFSET
 8

	)

45 
	#IDE_REGISTER_ALTERNATE_STATUS_OFFSET
 
IDE_REGISTER_DEVICE_CONTROL_OFFSET


	)

46 
	#IDE_REGISTER_DATA_BYTE
 9

	)

47 
	#IDE_REGISTER_DATA_WORD
 10

	)

52 
	#IDE_REGISTER_STATUS_BSY
 0x80

	)

53 
	#IDE_REGISTER_STATUS_DRDY
 0x40

	)

54 
	#IDE_REGISTER_STATUS_DF
 0x20

	)

55 
	#IDE_REGISTER_STATUS_DSC
 0x10

	)

57 
	#IDE_REGISTER_STATUS_DRQ
 0x08

	)

58 
	#IDE_REGISTER_STATUS_CORR
 0x04

	)

60 
	#IDE_REGISTER_STATUS_IDX
 0x02

	)

62 
	#IDE_REGISTER_STATUS_ERR
 0x01

	)

64 
	#IDE_REGISTER_DEVICE_CONTROL_SRST
 0x04

	)

65 
	#IDE_REGISTER_DEVICE_CONTROL_nIEN
 0x02

	)

67 
	#IDE_REGISTER_DEVICE_HEAD_L
 0x40

	)

68 
	#IDE_REGISTER_DEVICE_HEAD_DEV
 0x10

	)

69 
	#IDE_REGISTER_DEVICE_HEAD_DEV_POS
 4

	)

70 
	#IDE_REGISTER_DEVICE_HEAD_HS
 0x0‡

	)

71 
	#IDE_REGISTER_LBA3_L
 0x40

	)

72 
	#IDE_REGISTER_LBA3_DEV
 0x10

	)

73 
	#IDE_REGISTER_LBA3_LBA
 0x0f

	)

75 
	#IDE_REGISTER_ERROR_ICRC
 (1 << 7Ë

	)

77 
	#IDE_REGISTER_ERROR_UNC
 (1 << 6Ë

	)

78 #i‡
CCJ_COULD_NOT_FIND_THIS_ERROR


79 
	#IDE_REGISTER_ERROR_WP
 (1 << 6Ë

	)

81 
	#IDE_REGISTER_ERROR_MC
 (1 << 5Ë

	)

82 
	#IDE_REGISTER_ERROR_IDNF
 (1 << 4Ë

	)

83 
	#IDE_REGISTER_ERROR_MCR
 (1 << 3Ë

	)

85 
	#IDE_REGISTER_ERROR_ABRT
 (1 << 2Ë

	)

86 
	#IDE_REGISTER_ERROR_NM
 (1 << 1Ë

	)

87 
	#IDE_REGISTER_ERROR_AMNF
 (1 << 0Ë

	)

89 
	#IDE_REGISTER_ERROR_MED
 (1 << 0Ë

	)

106 
ide_c⁄åﬁÀr_ªad_d©a_block
(
πems_devi˚_mö‹_numbî
 
mö‹
,

107 
uöt32_t
 
block_size
,

108 
πems_blkdev_sg_buf„r
 *
bufs
,

109 
uöt32_t
 *
cbuf
,

110 
uöt32_t
 *
pos
);

127 
ide_c⁄åﬁÀr_wrôe_d©a_block
(
πems_devi˚_mö‹_numbî
 
mö‹
,

128 
uöt32_t
 
block_size
,

129 
πems_blkdev_sg_buf„r
 *
bufs
,

130 
uöt32_t
 *
cbuf
,

131 
uöt32_t
 *
pos
);

146 
ide_c⁄åﬁÀr_ªad_ªgi°î
(
πems_devi˚_mö‹_numbî
 
mö‹
,

147 
ªg
,

148 
uöt16_t
 *
vÆue
);

163 
ide_c⁄åﬁÀr_wrôe_ªgi°î
(
πems_devi˚_mö‹_numbî
 
mö‹
,

164 
ªg
, 
uöt16_t
 
vÆue
);

178 
πems_°©us_code


179 
ide_c⁄åﬁÀr_c⁄fig_io_•ìd
(
mö‹
, 
uöt16_t
 
modes_avaûabÀ
);

181 #ifde‡
__˝lu•lus


	@src/libchip/network/cs8900.c

26 
	~<î∫o.h
>

27 
	~<°rög.h
>

28 
	~<°dio.h
>

30 
	~"cs8900.h
"

36 #i‡(
MCLBYTES
 < 1520)

44 
	#CS8900_RX_OK_EVENT
 
RTEMS_EVENT_1


	)

45 
	#CS8900_TX_START_EVENT
 
RTEMS_EVENT_1


	)

46 
	#CS8900_TX_OK_EVENT
 
RTEMS_EVENT_2


	)

47 
	#CS8900_TX_WAIT_EVENT
 
RTEMS_EVENT_3


	)

53 
ölöe
 

54 
	$io_µ_gë_ªg_16
 (
cs8900_devi˚
 *
cs
, 
ªg
)

56 
πems_öãºu±_Àvñ
 
Àvñ
;

57 
d©a
;

58 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

59 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PACKET_PAGE_PTR
,

60 0x3000 | 
CS8900_PPP_AUTO_INCREMENT
 | 
ªg
);

61 
d©a
 = 
	`cs8900_io_gë_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT0
);

62 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

63  
d©a
;

64 
	}
}

66 
ölöe
 
uöt32_t


67 
	$io_µ_gë_ªg_32
 (
cs8900_devi˚
 *
cs
, 
uöt16_t
 
ªg
)

69 
πems_öãºu±_Àvñ
 
Àvñ
;

70 
uöt32_t
 
d©a
;

71 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

72 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PACKET_PAGE_PTR
,

73 0x3000 | 
CS8900_PPP_AUTO_INCREMENT
 | 
ªg
);

74 
d©a
 = 
	`cs8900_io_gë_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT0
);

75 
d©a
 <<= 16;

76 
d©a
 |
	`cs8900_io_gë_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT1
);

77 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

78  
d©a
;

79 
	}
}

81 
ölöe
 

82 
	$io_µ_£t_ªg_16
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
d©a
)

84 
πems_öãºu±_Àvñ
 
Àvñ
;

85 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

86 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PACKET_PAGE_PTR
,

87 0x3000 | 
CS8900_PPP_AUTO_INCREMENT
 | 
ªg
);

88 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT0
, 
d©a
);

89 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

90 
	}
}

92 
ölöe
 

93 
	$io_µ_£t_ªg_32
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
d©a
)

95 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PACKET_PAGE_PTR
,

96 0x3000 | 
CS8900_PPP_AUTO_INCREMENT
 | 
ªg
);

97 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT0
, 
d©a
 >> 16);

98 
	`cs8900_io_£t_ªg
 (
cs
, 
CS8900_IO_PP_DATA_PORT1
, 
d©a
);

99 
	}
}

101 
ölöe
 

102 
	$io_µ_bô_£t_ªg_16
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
mask
)

104 
πems_öãºu±_Àvñ
 
Àvñ
;

105 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

106 
	`io_µ_£t_ªg_16
 (
cs
, 
ªg
, 
	`io_µ_gë_ªg_16
 (cs,ÑegË| 
mask
);

107 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

108 
	}
}

110 
ölöe
 

111 
	$io_µ_bô_˛ór_ªg_16
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
mask
)

113 
πems_öãºu±_Àvñ
 
Àvñ
;

114 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

115 
	`io_µ_£t_ªg_16
 (
cs
, 
ªg
, 
	`io_µ_gë_ªg_16
 (cs,ÑegË& ~
mask
);

116 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

117 
	}
}

125 
ölöe
 

126 
	$mem_µ_gë_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
)

128 i‡(!
cs
->
mem_ba£
)

129  
	`io_µ_gë_ªg_16
 (
cs
, 
ªg
);

130  
	`cs8900_mem_gë_ªg
 (
cs
, 
ªg
);

131 
	}
}

133 
ölöe
 

134 
	$mem_µ_£t_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
d©a
)

136 i‡(!
cs
->
mem_ba£
)

137 
	`io_µ_£t_ªg_16
 (
cs
, 
ªg
, 
d©a
);

139 
	`cs8900_mem_£t_ªg
 (
cs
, 
ªg
, 
d©a
);

140 
	}
}

142 
ölöe
 

143 
	$mem_µ_bô_£t_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
mask
)

145 i‡(!
cs
->
mem_ba£
)

146 
	`io_µ_bô_£t_ªg_16
 (
cs
, 
ªg
, 
mask
);

149 
πems_öãºu±_Àvñ
 
Àvñ
;

150 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

151 
	`mem_µ_£t_ªg
 (
cs
, 
ªg
, 
	`mem_µ_gë_ªg
 (cs,ÑegË| 
mask
);

152 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

154 
	}
}

156 
ölöe
 

157 
	$mem_µ_bô_˛ór_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
, 
mask
)

159 i‡(!
cs
->
mem_ba£
)

160 
	`io_µ_bô_˛ór_ªg_16
 (
cs
, 
ªg
, 
mask
);

163 
πems_öãºu±_Àvñ
 
Àvñ
;

164 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

165 
	`mem_µ_£t_ªg
 (
cs
, 
ªg
, 
	`mem_µ_gë_ªg
 (cs,ÑegË& ~
mask
);

166 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

168 
	}
}

174 
	#CS8900_T_INT
 (0)

	)

175 
	#CS8900_T_RX_OK
 (1)

	)

176 
	#CS8900_T_RX_DROPPED
 (2)

	)

177 
	#CS8900_T_NO_MBUF
 (3)

	)

178 
	#CS8900_T_NO_CLUSTERS
 (4)

	)

179 
	#CS8900_T_RX_BEGIN
 (5)

	)

180 
	#CS8900_T_RX_END
 (6)

	)

182 #i‡
CS8900_TRACE


184 c⁄° *
	gcs8900_åa˚_œbñs
[] =

199 
uöt32_t
 
πems_ªad_timî
 ();

201 
ölöe
 

202 
	$cs8900_åa˚
 (
cs8900_devi˚
 *
cs
, 
key
, 
v¨
)

204 
πems_öãºu±_Àvñ
 
Àvñ
;

206 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

208 i‡(
cs
->
åa˚_ö
 < 
CS8900_TRACE_SIZE
)

210 
cs
->
åa˚_key
[cs->
åa˚_ö
] = 
key
;

211 
cs
->
åa˚_v¨
[cs->
åa˚_ö
] = 
v¨
;

212 
cs
->
åa˚_time
[cs->
åa˚_ö
] = 
	`πems_ªad_timî
 ();

213 
cs
->
åa˚_ö
++;

216 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

217 
	}
}

219 
	#cs8900_åa˚
(
c
, 
k
, 
v
)

	)

222 
	$cs8900_gë_mac_addr
 (
cs8900_devi˚
 *
cs
, *
mac_addªss
)

224 
ma
;

231 
ma
 = 
	`io_µ_gë_ªg_16
 (
cs
, 
CS8900_PP_IA
);

232 
mac_addªss
[0] = 
ma
 >> 8;

233 
mac_addªss
[1] = 
ma
;

235 
ma
 = 
	`io_µ_gë_ªg_16
 (
cs
, 
CS8900_PP_IA
 + 2);

236 
mac_addªss
[2] = 
ma
 >> 8;

237 
mac_addªss
[3] = 
ma
;

239 
ma
 = 
	`io_µ_gë_ªg_16
 (
cs
, 
CS8900_PP_IA
 + 4);

240 
mac_addªss
[4] = 
ma
 >> 8;

241 
mac_addªss
[5] = 
ma
;

242 
	}
}

249 
	$cs8900_h¨dw¨e_öô
 (
cs8900_devi˚
 *
cs
)

251 
¥od_id
;

252 
°©us
;

259 
	`io_µ_bô_£t_ªg_16
 (
cs
, 
CS8900_PP_SñfCTL
, 
CS8900_SELF_CTRL_RESET
);

261 
	`πems_èsk_wake_a·î
 (
	`RTEMS_MILLISECONDS_TO_TICKS
 (20));

263 
°©us
 = 
	`io_µ_gë_ªg_16
 (
cs
, 
CS8900_PP_SñfST
);

264 i‡(
°©us
 == 0) {

265 
	`¥ötf
("Reading statusÑegisterágain\n");

266 
°©us
 = 
	`io_µ_gë_ªg_16
 (
cs
, 
CS8900_PP_SñfST
);

269 i‡(((
°©us
 & 
CS8900_SELF_STATUS_INITD
) == 0) ||

270 ((
°©us
 & 
CS8900_SELF_STATUS_INITD
) &&

271 (
°©us
 & 
CS8900_SELF_STATUS_EEPROM_PRESENT
) &&

272 (
°©us
 & 
CS8900_SELF_STATUS_SIBUST
)))

274 
	`¥ötf
 ("CS8900: %s. Initialisationáborted.\n",

275 (
°©us
 & 
CS8900_SELF_STATUS_INITD
) ?

283 i‡(
cs
->
rx_queue_size
 == 0)

284 
cs
->
rx_queue_size
 = 10;

288 
¥od_id
 = 
	`io_µ_gë_ªg_32
 (
cs
, 
CS8900_PP_PROD_ID
);

290 i‡((
¥od_id
 >> 16Ë!
CS8900_ESIA_ID
)

292 
	`¥ötf
 ("CS8900: InvÆid EISA ID,ÑódÖrodu˘ codê0x%08lx\n", 
¥od_id
);

296 i‡((
¥od_id
 & 0x000000ff) != 0)

298 
	`¥ötf
 ("CS8900: UnsupportedÖroduct id,ÑeadÖroduct code 0x%08lx\n",

299 
¥od_id
);

303 
	`¥ötf
 ("CS8900 Rev %ld, %s, %s.\n",

304 (
¥od_id
 >> 8) & 0x1f,

305 
°©us
 & 
CS8900_SELF_STATUS_3_3_V
 ? "3.3V" : "5.0V",

306 
°©us
 & 
CS8900_SELF_STATUS_EEPROM_PRESENT
 ?

313 i‡(
cs
->
mem_ba£
)

315 
	`io_µ_£t_ªg_16
 (
cs
, 
CS8900_PP_MEM_BASE
, cs->
mem_ba£
);

316 
	`io_µ_£t_ªg_16
 (
cs
, 
CS8900_PP_MEM_BASE
 + 2, (cs->
mem_ba£
 >> 16) & 0xf);

318 
	`io_µ_£t_ªg_16
 (
cs
,

319 
CS8900_PP_BusCTL
,

320 
CS8900_BUS_CTRL_RESET_RX_DMA
 |

321 
CS8900_BUS_CTRL_USE_SA
 |

322 
CS8900_BUS_CTRL_MEMORY_ENABLE
);

323 
	`io_µ_£t_ªg_16
 (
cs
,

324 
CS8900_PP_BusCTL
,

325 
CS8900_BUS_CTRL_USE_SA
 |

326 
CS8900_BUS_CTRL_MEMORY_ENABLE
);

339 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_LöeCFG
, 
CS8900_LINE_CTRL_10BASET
);

345 
	#MACO
(
o
Ë
cs
->
¨pcom
.
ac_íaddr
[o]

	)

347 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_IA
,

348 (((Ë
	`MACO
 (1)) << 8) |

349 ((Ë
	`MACO
 (0)));

350 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_IA
 + 2,

351 (((Ë
	`MACO
 (3)) << 8) |

352 ((Ë
	`MACO
 (2)));

353 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_IA
 + 4,

354 (((Ë
	`MACO
 (5)) << 8) |

355 ((Ë
	`MACO
 (4)));

361 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_BufCFG
,

362 
CS8900_BUFFER_CONFIG_RDY_FOR_TX
 |

363 
CS8900_BUFFER_CONFIG_TX_UNDERRUN
 |

364 
CS8900_BUFFER_CONFIG_TX_COL_OVF
 |

365 
CS8900_BUFFER_CONFIG_RX_MISSED_OVF
);

371 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_RxCFG
,

372 
CS8900_RX_CONFIG_RX_OK
 |

373 
CS8900_RX_CONFIG_CRC_ERROR
 |

374 
CS8900_RX_CONFIG_RUNT
|

375 
CS8900_RX_CONFIG_EXTRA_DATA
);

381 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_RxCTL
,

382 
CS8900_RX_CTRL_RX_OK
 |

383 
CS8900_RX_CTRL_MULTICAST
 |

384 
CS8900_RX_CTRL_INDIVIDUAL
 |

385 
CS8900_RX_CTRL_BROADCAST
);

391 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_TxCFG
,

392 
CS8900_TX_CONFIG_TX_OK
 |

393 
CS8900_TX_CONFIG_OUT_OF_WINDOW
 |

394 
CS8900_TX_CONFIG_JABBER
 |

395 
CS8900_TX_CONFIG_16_COLLISION
);

401 
	`cs8900_©èch_öãºu±
 (
cs
);

409 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_INT
, cs->
úq_Àvñ
 & 3);

411 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_BusCTL
,

412 
CS8900_BUS_CTRL_ENABLE_INT
);

413 
	}
}

415 
πems_i§


416 
	$cs8900_öãºu±
 (
πems_ve˘‹_numbî
 
v
, *
c•
)

418 
cs8900_devi˚
 *
cs
 = 
c•
;

419 
isq
 = 0;

420 
mbuf
 *
m
;

421 *
p
;

423 ++
cs
->
ëh_°©s
.
öãºu±s
;

427 
isq
 = 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_ISQ
);

429 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_INT
, 
isq
);

435 i‡(
isq
 == 0)

438 
isq
 & 0x1f)

446 ++
cs
->
ëh_°©s
.
rx_öãºu±s
;

448 i‡(
isq
 & 
CS8900_RX_EVENT_RX_OK
)

450 
m
 = 
cs
->
rx_ªady_hód
;

451 i‡(
m
)

453 
cs
->
rx_ªady_hód
 = 
m
->
m_√xçkt
;

454 i‡(
cs
->
rx_ªady_hód
 == 0)

455 
cs
->
rx_ªady_èû
 = 0;

456 
m
->
m_√xçkt
 = 0;

457 
cs
->
rx_ªady_Àn
--;

459 
p
 = 
	`mtod
 (
m
, *);

461 
m
->
m_pkthdr
.
Àn
 = 
	`cs8900_gë_d©a_block
 (
cs
, 
p
);

463 i‡(
cs
->
rx_lﬂded_èû
 == 0)

464 
cs
->
rx_lﬂded_hód
 = 
m
;

466 
cs
->
rx_lﬂded_èû
->
m_√xçkt
 = 
m
;

467 
cs
->
rx_lﬂded_èû
 = 
m
;

468 
cs
->
rx_lﬂded_Àn
++;

470 i‡(
cs
->
rx_lﬂded_Àn
 == 1)

472 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_RX_OK
, cs->
rx_lﬂded_Àn
);

473 
	`πems_bsd√t_evít_£nd
 (
cs
->
rx_èsk
, 
CS8900_RX_OK_EVENT
);

478 ++
cs
->
ëh_°©s
.
rx_dr›≥d
;

480 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_RX_DROPPED
, cs->
rx_lﬂded_Àn
);

482 i‡(
cs
->
rx_lﬂded_Àn
 == 0)

483 
	`πems_bsd√t_evít_£nd
 (
cs
->
rx_èsk
, 
CS8900_RX_OK_EVENT
);

488 i‡(
isq
 & 
CS8900_RX_EVENT_CRC_ERROR
)

489 ++
cs
->
ëh_°©s
.
rx_¸c_îr‹s
;

491 i‡(
isq
 & 
CS8900_RX_EVENT_RUNT
)

492 ++
cs
->
ëh_°©s
.
rx_ru¡_îr‹s
;

494 i‡(
isq
 & 
CS8900_RX_EVENT_EXTRA_DATA
)

495 ++
cs
->
ëh_°©s
.
rx_ovîsize_îr‹s
;

505 ++
cs
->
ëh_°©s
.
tx_öãºu±s
;

507 i‡(
cs
->
tx_a˘ive
)

509 i‡(
isq
 & 
CS8900_TX_EVENT_TX_OK
)

510 ++
cs
->
ëh_°©s
.
tx_ok
;

512 
cs
->
tx_a˘ive
 = 0;

514 
	`πems_bsd√t_evít_£nd
 (
cs
->
tx_èsk
, 
CS8900_TX_OK_EVENT
);

524 i‡(
isq
 & 
CS8900_BUFFER_EVENT_RDY_FOR_TX
)

526 i‡(
cs
->
tx_a˘ive
)

528 ++
cs
->
ëh_°©s
.
tx_rdy4tx
;

529 
	`πems_bsd√t_evít_£nd
 (
cs
->
tx_èsk
, 
CS8900_TX_WAIT_EVENT
);

532 i‡(
isq
 & 
CS8900_BUFFER_EVENT_TX_UNDERRUN
)

534 ++
cs
->
ëh_°©s
.
tx_undîrun_îr‹s
;

535 i‡(
cs
->
tx_a˘ive
)

536 
	`πems_bsd√t_evít_£nd
 (
cs
->
tx_èsk
, 
CS8900_TX_OK_EVENT
);

538 i‡(
isq
 & 
CS8900_BUFFER_EVENT_SW_INT
)

540 ++
cs
->
ëh_°©s
.
öt_swöt_ªs
;

550 
cs
->
ëh_°©s
.
rx_mis£d_îr‹s
 +=

551 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_RxMISS
) >> 6;

560 
cs
->
ëh_°©s
.
tx_cﬁlisi⁄s
 +=

561 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_TxCﬁ
) >> 6;

569 
	}
}

572 
	$cs8900_lök_a˘ive
 (
cs8900_devi˚
 *
cs
)

574  ((
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_LöeST
Ë& 
CS8900_LINE_STATUS_LINK_OK
) ?

576 
	}
}

578 
ölöe
 

579 
	$cs8900_rx_ªfûl_queue
 (
cs8900_devi˚
 *
cs
)

581 
i‚ë
 *
iÂ
 = &
cs
->
¨pcom
.
ac_if
;

582 
mbuf
 *
m
;

583 
πems_öãºu±_Àvñ
 
Àvñ
;

590 
cs
->
rx_ªady_Àn
 < cs->
rx_queue_size
)

592 
	`MGETHDR
 (
m
, 
M_DONTWAIT
, 
MT_DATA
);

594 i‡(!
m
)

596 ++
cs
->
ëh_°©s
.
rx_no_mbufs
;

597 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_NO_MBUF
, cs->
ëh_°©s
.
rx_no_mbufs
);

601 
	`MCLGET
 (
m
, 
M_DONTWAIT
);

603 i‡(!
m
->
m_ext
.
ext_buf
)

605 ++
cs
->
ëh_°©s
.
rx_no_˛u°îs
;

606 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_NO_CLUSTERS
, cs->
ëh_°©s
.
rx_no_˛u°îs
);

607 
	`m_‰ì
 (
m
);

610 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

611 
m
->
m_√xçkt
 = 0;

613 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

615 i‡(
cs
->
rx_ªady_èû
 == 0)

616 
cs
->
rx_ªady_hód
 = 
m
;

618 
cs
->
rx_ªady_èû
->
m_√xçkt
 = 
m
;

619 
cs
->
rx_ªady_èû
 = 
m
;

620 
cs
->
rx_ªady_Àn
++;

622 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

624 
	}
}

627 
	$cs8900_rx_èsk
 (*
¨g
)

629 
cs8900_devi˚
 *
cs
 = 
¨g
;

630 
i‚ë
 *
iÂ
 = &
cs
->
¨pcom
.
ac_if
;

631 
πems_evít_£t
 
evíts
;

632 
mbuf
 *
m
;

633 
ëhî_hódî
 *
eh
;

634 
πems_°©us_code
 
sc
;

635 
πems_öãºu±_Àvñ
 
Àvñ
;

641 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_LöeCFG
,

642 
CS8900_LINE_CTRL_RX_ON
 |

643 
CS8900_LINE_CTRL_TX_ON
);

649 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_BufCFG
,

650 
CS8900_BUFFER_CONFIG_SW_INT
);

651 ++
cs
->
ëh_°©s
.
öt_swöt_ªq
;

659 
	`cs8900_rx_ªfûl_queue
 (
cs
);

661 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
 (
CS8900_RX_OK_EVENT
,

662 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

663 
	`RTEMS_MILLISECONDS_TO_TICKS
 (250),

664 &
evíts
);

666 
	`cs8900_rx_ªfûl_queue
 (
cs
);

668 i‡(
sc
 =
RTEMS_TIMEOUT
)

679 i‡((
cs
->
ëh_°©s
.
öt_swöt_ªq
 - cs->ëh_°©s.
öt_swöt_ªs
) > 1)

681 
	`¥ötf
 ("cs8900: intÜockup, isq flush\n");

683 
	`mem_µ_bô_˛ór_ªg
 (
cs
, 
CS8900_PP_BusCTL
,

684 
CS8900_BUS_CTRL_ENABLE_INT
);

686 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_ISQ
) != 0);

688 
cs
->
ëh_°©s
.
öt_swöt_ªq
 = cs->ëh_°©s.
öt_swöt_ªs
 = 0;

689 ++
cs
->
ëh_°©s
.
öt_lockup
;

691 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_BusCTL
,

692 
CS8900_BUS_CTRL_ENABLE_INT
);

695 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_BufCFG
,

696 
CS8900_BUFFER_CONFIG_SW_INT
);

697 ++
cs
->
ëh_°©s
.
öt_swöt_ªq
;

700 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_RX_BEGIN
, cs->
rx_lﬂded_Àn
);

702 
cs
->
rx_lﬂded_Àn
)

704 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

706 
m
 = 
cs
->
rx_lﬂded_hód
;

707 i‡(
m
)

709 
cs
->
rx_lﬂded_hód
 = 
m
->
m_√xçkt
;

710 i‡(
cs
->
rx_lﬂded_hód
 == 0)

711 
cs
->
rx_lﬂded_èû
 = 0;

712 
m
->
m_√xçkt
 = 0;

713 
cs
->
rx_lﬂded_Àn
--;

715 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

717 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

719 
cs
->
ëh_°©s
.
rx_byãs
 +
m
->
m_pkthdr
.
Àn
;

721 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 = m->m_pkthdr.À¿-  (
ëhî_hódî
);

723 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

724 
m
->
m_d©a
 + (
ëhî_hódî
);

726 ++
cs
->
ëh_°©s
.
rx_∑ckës
;

728 
	`ëhî_öput
 (
iÂ
, 
eh
, 
m
);

732 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

735 
	`cs8900_åa˚
 (
cs
, 
CS8900_T_RX_END
, cs->
rx_lﬂded_Àn
);

737 
	}
}

740 
	$cs8900_tx_èsk
 (*
¨g
)

742 
cs8900_devi˚
 *
cs
 = 
¨g
;

743 
i‚ë
 *
iÂ
 = &
cs
->
¨pcom
.
ac_if
;

744 
πems_evít_£t
 
evíts
;

745 
mbuf
 *
m
;

746 
πems_°©us_code
 
sc
;

752 
	`πems_èsk_wake_a·î
 (
	`RTEMS_MILLISECONDS_TO_TICKS
 (750));

764 
	`IF_DEQUEUE
 (&
iÂ
->
if_¢d
, 
m
);

770 i‡(!
m
)

772 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

774 
	`πems_bsd√t_evít_ª˚ive
 (
CS8900_TX_START_EVENT
,

775 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

776 
RTEMS_NO_TIMEOUT
,

777 &
evíts
);

781 i‡(
	`cs8900_lök_a˘ive
 (
cs
))

783 
ª£ndög
;

787 
buf_°©us
;

789 
ª£ndög
 = 0;

791 
cs
->
tx_a˘ive
 = 1;

793 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_TxCMD
,

794 
CS8900_TX_CMD_STATUS_TX_START_ENTIRE
 |

795 
CS8900_TX_CMD_STATUS_FORCE
);

796 
	`mem_µ_£t_ªg
 (
cs
, 
CS8900_PP_TxLígth
, 
m
->
m_pkthdr
.
Àn
);

798 
buf_°©us
 = 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_BusST
);

805 i‡(
buf_°©us
 & 
CS8900_BUS_STATUS_TX_BID_ERROR
)

806 ++
cs
->
ëh_°©s
.
tx_bid_îr‹s
;

813 i‡((
buf_°©us
 & 
CS8900_BUS_STATUS_RDY_FOR_TX_NOW
) == 0)

815 
cs
->
ëh_°©s
.
tx_waô_f‹_rdy4tx
++;

816 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
 (
CS8900_TX_WAIT_EVENT
,

817 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

818 
	`RTEMS_MILLISECONDS_TO_TICKS
 (750),

819 &
evíts
);

820 i‡(
sc
 =
RTEMS_TIMEOUT
)

827 
	`¥ötf
 ("txÑesend\n");

828 ++
cs
->
ëh_°©s
.
tx_ª£nds
;

829 
ª£ndög
 = 1;

833 i‡(!
ª£ndög
)

835 
	`cs8900_tx_lﬂd
 (
cs
, 
m
);

836 
cs
->
ëh_°©s
.
tx_∑ckës
++;

837 
cs
->
ëh_°©s
.
tx_byãs
 +
m
->
m_pkthdr
.
Àn
;

841 
ª£ndög
);

843 
	`m_‰ìm
 (
m
);

847 
	`πems_bsd√t_evít_ª˚ive
 (
CS8900_TX_OK_EVENT
,

848 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

849 
RTEMS_NO_TIMEOUT
,

850 &
evíts
);

852 
cs
->
tx_a˘ive
);

856 ++
cs
->
ëh_°©s
.
tx_dr›≥d
;

857 
	`m_‰ìm
 (
m
);

861 
	}
}

864 
	$cs8900_°¨t
 (
i‚ë
 *
iÂ
)

866 
cs8900_devi˚
 *
cs
 = 
iÂ
->
if_so·c
;

872 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

874 
	`πems_bsd√t_evít_£nd
 (
cs
->
tx_èsk
, 
CS8900_TX_START_EVENT
);

875 
	}
}

878 
	$cs8900_°›
 (
cs8900_devi˚
 *
cs
)

880 
	`mem_µ_bô_˛ór_ªg
 (
cs
, 
CS8900_PP_LöeCFG
,

881 
CS8900_LINE_CTRL_RX_ON
 |

882 
CS8900_LINE_CTRL_TX_ON
);

884 
	`mem_µ_bô_˛ór_ªg
 (
cs
, 
CS8900_PP_BusCTL
,

885 
CS8900_BUS_CTRL_ENABLE_INT
);

886 
	}
}

888 c⁄° *
	gëh_°©i°ics_œbñs
[] =

918 
	$cs8900_°©s
 (
cs8900_devi˚
 *
cs
)

920 
i
;

921 
max_œbñ
 = 0;

922 
Àn
;

923 *
vÆue
 = (*Ë&
cs
->
ëh_°©s
.
rx_∑ckës
;

925 
cs
->
ëh_°©s
.
rx_mis£d_îr‹s
 +=

926 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_RxMISS
) >> 6;

928 
cs
->
ëh_°©s
.
tx_cﬁlisi⁄s
 +=

929 
	`mem_µ_gë_ªg
 (
cs
, 
CS8900_PP_TxCﬁ
) >> 6;

931 
	`¥ötf
 ("Network Driver Stats for CS8900 :\n");

933 
i
 = 0; i < ( (
ëh_°©i°ics_œbñs
) /  (const *)); i++)

935 
Àn
 = 
	`°æí
 (
ëh_°©i°ics_œbñs
[
i
]);

936 i‡(
Àn
 > 
max_œbñ
)

937 
max_œbñ
 = 
Àn
;

940 
max_œbñ
 += 2;

942 
	`¥ötf
 ("%*s - %10u %*s - %10u\n",

943 
max_œbñ
, "rxÑódyÜí", 
cs
->
rx_ªady_Àn
,

944 
max_œbñ
, "rxÜﬂdedÜí", 
cs
->
rx_lﬂded_Àn
);

946 
i
 = 0;

947 
i
 < ( (
ëh_°©i°ics_œbñs
) /  (const *));

948 
i
++)

950 
	`¥ötf
 ("%*s - %10lu",

951 
max_œbñ
, 
ëh_°©i°ics_œbñs
[
i
], 
vÆue
[i]);

953 
i
++;

955 i‡(
i
 < ( (
ëh_°©i°ics_œbñs
) /  (const *)))

956 
	`¥ötf
 (" %*s - %10lu",

957 
max_œbñ
, 
ëh_°©i°ics_œbñs
[
i
], 
vÆue
[i]);

958 
	`¥ötf
 ("\n");

961 #i‡
CS8900_TRACE


963 
i
 = 0; i < 
cs
->
åa˚_ö
; i++)

965 
	`¥ötf
 ("%8ld.%03ld ", 
cs
->
åa˚_time
[
i
] / 1000, cs->trace_time[i] % 1000);

967 i‡(
cs
->
åa˚_key
[
i
] <  (
cs8900_åa˚_œbñs
) /  (*))

968 
	`¥ötf
 ("%†: ", 
cs8900_åa˚_œbñs
[
cs
->
åa˚_key
[
i
]]);

970 
	`¥ötf
 ("unknow¿åa˚ key, %d : ", 
cs
->
åa˚_key
[
i
]);

972 i‡(
cs
->
åa˚_key
[
i
] =
CS8900_T_INT
)

974 
	`¥ötf
 ("0x%04lx ", 
cs
->
åa˚_v¨
[
i
]);

975 i‡(
cs
->
åa˚_v¨
[
i
] == 0)

976 
	`¥ötf
 ("end");

979 
cs
->
åa˚_v¨
[
i
] & 0x1f)

982 
	`¥ötf
 ("rxÉvent");

986 
	`¥ötf
 ("txÉvent");

990 
	`¥ötf
 ("bufferÉvent");

994 
	`¥ötf
 ("rx missed");

998 
	`¥ötf
 ("tx collisions");

1002 
	`¥ötf
 ("txÑequest");

1006 
	`¥ötf
 ("tx wait 4Åx");

1010 
	`¥ötf
 ("txálreadyáctive");

1014 
	`¥ötf
 ("unknownÉvent");

1020 
	`¥ötf
 ("0x%08lx", 
cs
->
åa˚_v¨
[
i
]);

1022 
	`¥ötf
 ("\n");

1025 
cs
->
åa˚_ö
 = 0;

1028 
	}
}

1031 
	$cs8900_öô
 (*
¨g
)

1033 
cs8900_devi˚
 *
cs
 = 
¨g
;

1034 
i‚ë
 *
iÂ
 = &
cs
->
¨pcom
.
ac_if
;

1036 i‡(
cs
->
rx_èsk
 == 0)

1043 
	`cs8900_h¨dw¨e_öô
 (
cs
);

1049 
cs
->
rx_èsk
 = 
	`πems_bsd√t_√w¥oc
 ("CSr0", 4096, 
cs8900_rx_èsk
, cs);

1050 
cs
->
tx_èsk
 = 
	`πems_bsd√t_√w¥oc
 ("CSt0", 4096, 
cs8900_tx_èsk
, cs);

1053 #ifde‡
todo


1057 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1065 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1071 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_LöeCFG
,

1072 
CS8900_LINE_CTRL_RX_ON
 |

1073 
CS8900_LINE_CTRL_TX_ON
);

1075 
	`mem_µ_bô_£t_ªg
 (
cs
, 
CS8900_PP_BusCTL
,

1076 
CS8900_BUS_CTRL_ENABLE_INT
);

1077 
	}
}

1080 
	$cs8900_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
cmd
, 
ˇddr_t
 
d©a
)

1082 
cs8900_devi˚
 *
cs
 = 
iÂ
->
if_so·c
;

1083 
îr‹
 = 0;

1085 
cmd
)

1087 
SIOCGIFADDR
:

1088 
SIOCSIFADDR
:

1090 
îr‹
 = 
	`ëhî_io˘l
 (
iÂ
, 
cmd
, 
d©a
);

1093 
SIOCSIFFLAGS
:

1095 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
))

1097 
IFF_RUNNING
:

1099 
	`cs8900_°›
 (
cs
);

1102 
IFF_UP
:

1104 
	`cs8900_öô
 (
cs
);

1107 
IFF_UP
 | 
IFF_RUNNING
:

1109 
	`cs8900_°›
 (
cs
);

1110 
	`cs8900_öô
 (
cs
);

1118 
SIO_RTEMS_SHOW_STATS
:

1120 
	`cs8900_°©s
 (
cs
);

1126 
îr‹
 = 
EINVAL
;

1130  
îr‹
;

1131 
	}
}

1134 
	$cs8900_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
)

1136 
cs8900_devi˚
 *
cs
;

1137 
i‚ë
 *
iÂ
;

1138 
mtu
;

1139 
unô
;

1140 *
«me
;

1146 i‡((
unô
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
«me
)) < 0)

1149 
cs
 = 
c⁄fig
->
drv_˘æ
;

1150 
cs
->
dev
 = 
unô
;

1151 
iÂ
 = &
cs
->
¨pcom
.
ac_if
;

1153 i‡(
©èchög
)

1155 i‡(
iÂ
->
if_so·c
)

1157 
	`¥ötf
 ("Drivî `%s'áÃódy i¿u£.\n", 
c⁄fig
->
«me
);

1165 i‡(
c⁄fig
->
h¨dw¨e_addªss
)

1166 
	`mem˝y
 (
cs
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

1168 
	`cs8900_gë_mac_addr
 (
cs
, cs->
¨pcom
.
ac_íaddr
);

1170 i‡(
c⁄fig
->
mtu
)

1171 
mtu
 = 
c⁄fig
->mtu;

1173 
mtu
 = 
ETHERMTU
;

1175 
cs
->
ac˚±_bˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

1181 
iÂ
->
if_so·c
 = 
cs
;

1182 
iÂ
->
if_unô
 = 
unô
;

1183 
iÂ
->
if_«me
 = 
«me
;

1184 
iÂ
->
if_mtu
 = 
mtu
;

1185 
iÂ
->
if_öô
 = 
cs8900_öô
;

1186 
iÂ
->
if_io˘l
 = 
cs8900_io˘l
;

1187 
iÂ
->
if_°¨t
 = 
cs8900_°¨t
;

1188 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

1189 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

1191 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

1192 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

1198 
	`if_©èch
 (
iÂ
);

1199 
	`ëhî_iÁâach
 (
iÂ
);

1203 i‡(!
iÂ
->
if_so·c
)

1205 
	`¥ötf
 ("Drivî `%s'ÇŸ found.\n", 
c⁄fig
->
«me
);

1209 
	`cs8900_°›
 (
cs
);

1210 
	`cs8900_dëach_öãºu±
 (
cs
);

1214 
	}
}

	@src/libchip/network/cs8900.h

147 #i‡!
deföed
(
_CS8900_H_
)

148 
	#_CS8900_H_


	)

150 
	~<πems.h
>

151 
	~<πems/îr‹.h
>

152 
	~<πems/πems_bsd√t.h
>

154 
	~<sys/∑øm.h
>

155 
	~<sys/mbuf.h
>

156 
	~<sys/sockë.h
>

157 
	~<sys/sockio.h
>

159 
	~<√t/if.h
>

161 
	~<√töë/ö.h
>

162 
	~<√töë/if_ëhî.h
>

166 
	#ET_MINLEN
 60

	)

176 
	#CS8900_ESIA_ID
 (0x630e)

	)

182 
	#CS8900_IO_RX_TX_DATA_PORT0
 (0x0000)

	)

183 
	#CS8900_IO_TX_TX_DATA_PORT1
 (0x0002)

	)

184 
	#CS8900_IO_TxCMD
 (0x0004)

	)

185 
	#CS8900_IO_TxLígth
 (0x0006)

	)

186 
	#CS8900_IO_ISQ
 (0x0008)

	)

187 
	#CS8900_IO_PACKET_PAGE_PTR
 (0x000a)

	)

188 
	#CS8900_IO_PP_DATA_PORT0
 (0x000c)

	)

189 
	#CS8900_IO_PP_DATA_PORT1
 (0x000e)

	)

199 
	#CS8900_PP_PROD_ID
 (0x0000)

	)

200 
	#CS8900_PP_IO_BASE
 (0x0020)

	)

201 
	#CS8900_PP_INT
 (0x0022)

	)

202 
	#CS8900_PP_DMA_CHANNEL
 (0x0024)

	)

203 
	#CS8900_PP_DMA_SOF
 (0x0026)

	)

204 
	#CS8900_PP_DMA_FRM_CNT
 (0x0028)

	)

205 
	#CS8900_PP_DMA_RX_BCNT
 (0x002a)

	)

206 
	#CS8900_PP_MEM_BASE
 (0x002c)

	)

207 
	#CS8900_PP_BPROM_BASE
 (0x0030)

	)

208 
	#CS8900_PP_BPROM_AMASK
 (0x0034)

	)

209 
	#CS8900_PP_EEPROM_CMD
 (0x0040)

	)

210 
	#CS8900_PP_EEPROM_DATA
 (0x0042)

	)

211 
	#CS8900_PP_RX_FRAME_BCNT
 (0x0050)

	)

217 
	#CS8900_PP_RxCFG
 (0x0102)

	)

218 
	#CS8900_PP_RxCTL
 (0x0104)

	)

219 
	#CS8900_PP_TxCFG
 (0x0106)

	)

220 
	#CS8900_PP_TxCMD_READ
 (0x0108)

	)

221 
	#CS8900_PP_BufCFG
 (0x010a)

	)

222 
	#CS8900_PP_LöeCFG
 (0x0112)

	)

223 
	#CS8900_PP_SñfCTL
 (0x0114)

	)

224 
	#CS8900_PP_BusCTL
 (0x0116)

	)

225 
	#CS8900_PP_Te°CTL
 (0x0118)

	)

231 
	#CS8900_PP_ISQ
 (0x0120)

	)

232 
	#CS8900_PP_RxEvít
 (0x0124)

	)

233 
	#CS8900_PP_TxEvít
 (0x0128)

	)

234 
	#CS8900_PP_BufEvít
 (0x012c)

	)

235 
	#CS8900_PP_RxMISS
 (0x0130)

	)

236 
	#CS8900_PP_TxCﬁ
 (0x0132)

	)

237 
	#CS8900_PP_LöeST
 (0x0134)

	)

238 
	#CS8900_PP_SñfST
 (0x0136)

	)

239 
	#CS8900_PP_BusST
 (0x0138)

	)

240 
	#CS8900_PP_TDR
 (0x013c)

	)

246 
	#CS8900_PP_TxCMD
 (0x0144)

	)

247 
	#CS8900_PP_TxLígth
 (0x0146)

	)

253 
	#CS8900_PP_LAF
 (0x0150)

	)

254 
	#CS8900_PP_IA
 (0x0158)

	)

260 
	#CS8900_PP_RxSètus
 (0x0400)

	)

261 
	#CS8900_PP_RxLígth
 (0x0402)

	)

262 
	#CS8900_PP_RxFømeLoc
 (0x0404)

	)

263 
	#CS8900_PP_TxFømeLoc
 (0x0a00)

	)

273 
	#CS8900_PPP_AUTO_INCREMENT
 (0x8000)

	)

279 
	#CS8900_RX_CONFIG_SKIP_1
 (1 << 6)

	)

280 
	#CS8900_RX_CONFIG_STREAM_ENABLE
 (1 << 7)

	)

281 
	#CS8900_RX_CONFIG_RX_OK
 (1 << 8)

	)

282 
	#CS8900_RX_CONFIG_RX_DMA
 (1 << 9)

	)

283 
	#CS8900_RX_CONFIG_RX_AUTO_DMA
 (1 << 10)

	)

284 
	#CS8900_RX_CONFIG_BUFFER_CRC
 (1 << 11)

	)

285 
	#CS8900_RX_CONFIG_CRC_ERROR
 (1 << 12)

	)

286 
	#CS8900_RX_CONFIG_RUNT
 (1 << 13)

	)

287 
	#CS8900_RX_CONFIG_EXTRA_DATA
 (1 << 14)

	)

293 
	#CS8900_RX_EVENT_HASH_IA_MATCH
 (1 << 6)

	)

294 
	#CS8900_RX_EVENT_DRIBBLE_BITS
 (1 << 7)

	)

295 
	#CS8900_RX_EVENT_RX_OK
 (1 << 8)

	)

296 
	#CS8900_RX_EVENT_HASHED
 (1 << 9)

	)

297 
	#CS8900_RX_EVENT_IA
 (1 << 10)

	)

298 
	#CS8900_RX_EVENT_BROADCAST
 (1 << 11)

	)

299 
	#CS8900_RX_EVENT_CRC_ERROR
 (1 << 12)

	)

300 
	#CS8900_RX_EVENT_RUNT
 (1 << 13)

	)

301 
	#CS8900_RX_EVENT_EXTRA_DATA
 (1 << 14)

	)

307 
	#CS8900_RX_CTRL_HASH_IA_MATCH
 (1 << 6)

	)

308 
	#CS8900_RX_CTRL_PROMISCUOUS
 (1 << 7)

	)

309 
	#CS8900_RX_CTRL_RX_OK
 (1 << 8)

	)

310 
	#CS8900_RX_CTRL_MULTICAST
 (1 << 9)

	)

311 
	#CS8900_RX_CTRL_INDIVIDUAL
 (1 << 10)

	)

312 
	#CS8900_RX_CTRL_BROADCAST
 (1 << 11)

	)

313 
	#CS8900_RX_CTRL_CRC_ERROR
 (1 << 12)

	)

314 
	#CS8900_RX_CTRL_RUNT
 (1 << 13)

	)

315 
	#CS8900_RX_CTRL_EXTRA_DATA
 (1 << 14)

	)

321 
	#CS8900_TX_CONFIG_LOSS_OF_CARRIER
 (1 << 6)

	)

322 
	#CS8900_TX_CONFIG_SQ_ERROR
 (1 << 7)

	)

323 
	#CS8900_TX_CONFIG_TX_OK
 (1 << 8)

	)

324 
	#CS8900_TX_CONFIG_OUT_OF_WINDOW
 (1 << 9)

	)

325 
	#CS8900_TX_CONFIG_JABBER
 (1 << 10)

	)

326 
	#CS8900_TX_CONFIG_ANY_COLLISION
 (1 << 11)

	)

327 
	#CS8900_TX_CONFIG_16_COLLISION
 (1 << 15)

	)

333 
	#CS8900_TX_EVENT_LOSS_OF_CARRIER
 (1 << 6)

	)

334 
	#CS8900_TX_EVENT_SQ_ERROR
 (1 << 7)

	)

335 
	#CS8900_TX_EVENT_TX_OK
 (1 << 8)

	)

336 
	#CS8900_TX_EVENT_OUT_OF_WINDOW
 (1 << 9)

	)

337 
	#CS8900_TX_EVENT_JABBER
 (1 << 10)

	)

338 
	#CS8900_TX_EVENT_16_COLLISIONS
 (1 << 15)

	)

344 
	#CS8900_TX_CMD_STATUS_TX_START_5
 (0 << 6)

	)

345 
	#CS8900_TX_CMD_STATUS_TX_START_381
 (1 << 6)

	)

346 
	#CS8900_TX_CMD_STATUS_TX_START_1021
 (2 << 6)

	)

347 
	#CS8900_TX_CMD_STATUS_TX_START_ENTIRE
 (3 << 6)

	)

348 
	#CS8900_TX_CMD_STATUS_FORCE
 (1 << 8)

	)

349 
	#CS8900_TX_CMD_STATUS_ONE_COLLISION
 (1 << 9)

	)

350 
	#CS8900_TX_CMD_STATUS_INHIBIT_CRC
 (1 << 12)

	)

351 
	#CS8900_TX_CMD_STATUS_TX_PAD_DISABLED
 (1 << 13)

	)

357 
	#CS8900_BUFFER_CONFIG_SW_INT
 (1 << 6)

	)

358 
	#CS8900_BUFFER_CONFIG_RX_DMA_DONE
 (1 << 7)

	)

359 
	#CS8900_BUFFER_CONFIG_RDY_FOR_TX
 (1 << 8)

	)

360 
	#CS8900_BUFFER_CONFIG_TX_UNDERRUN
 (1 << 9)

	)

361 
	#CS8900_BUFFER_CONFIG_RX_MISSED
 (1 << 10)

	)

362 
	#CS8900_BUFFER_CONFIG_RX_128_BYTES
 (1 << 11)

	)

363 
	#CS8900_BUFFER_CONFIG_TX_COL_OVF
 (1 << 12)

	)

364 
	#CS8900_BUFFER_CONFIG_RX_MISSED_OVF
 (1 << 13)

	)

365 
	#CS8900_BUFFER_CONFIG_RX_DEST_MATCH
 (1 << 15)

	)

371 
	#CS8900_BUFFER_EVENT_SW_INT
 (1 << 6)

	)

372 
	#CS8900_BUFFER_EVENT_RX_DMA_DONE
 (1 << 7)

	)

373 
	#CS8900_BUFFER_EVENT_RDY_FOR_TX
 (1 << 8)

	)

374 
	#CS8900_BUFFER_EVENT_TX_UNDERRUN
 (1 << 9)

	)

375 
	#CS8900_BUFFER_EVENT_RX_MISSED
 (1 << 10)

	)

376 
	#CS8900_BUFFER_EVENT_RX_128_BYTES
 (1 << 11)

	)

377 
	#CS8900_BUFFER_EVENT_RX_DEST_MATCH
 (1 << 15)

	)

383 
	#CS8900_LINE_CTRL_RX_ON
 (1 << 6)

	)

384 
	#CS8900_LINE_CTRL_TX_ON
 (1 << 7)

	)

385 
	#CS8900_LINE_CTRL_AUI
 (1 << 8)

	)

386 
	#CS8900_LINE_CTRL_10BASET
 (0 << 9)

	)

387 
	#CS8900_LINE_CTRL_AUTO_AUI_10BASET
 (1 << 9)

	)

388 
	#CS8900_LINE_CTRL_MOD_BACKOFF
 (1 << 11)

	)

389 
	#CS8900_LINE_CTRL_POLARITY_DISABLED
 (1 << 12)

	)

390 
	#CS8900_LINE_CTRL_2_PART_DEF_DISABLED
 (1 << 13)

	)

391 
	#CS8900_LINE_CTRL_LO_RX_SQUELCH
 (1 << 14)

	)

397 
	#CS8900_LINE_STATUS_LINK_OK
 (1 << 7)

	)

398 
	#CS8900_LINE_STATUS_AUI
 (1 << 8)

	)

399 
	#CS8900_LINE_STATUS_10_BASE_T
 (1 << 9)

	)

400 
	#CS8900_LINE_STATUS_POLARITY_OK
 (1 << 12)

	)

401 
	#CS8900_LINE_STATUS_CRS
 (1 << 14)

	)

407 
	#CS8900_SELF_CTRL_RESET
 (1 << 6)

	)

408 
	#CS8900_SELF_CTRL_SW_SUSPEND
 (1 << 8)

	)

409 
	#CS8900_SELF_CTRL_HW_SLEEP
 (1 << 9)

	)

410 
	#CS8900_SELF_CTRL_HW_STANDBY
 (1 << 10)

	)

411 
	#CS8900_SELF_CTRL_HC0E
 (1 << 12)

	)

412 
	#CS8900_SELF_CTRL_HC1E
 (1 << 13)

	)

413 
	#CS8900_SELF_CTRL_HCB0
 (1 << 14)

	)

414 
	#CS8900_SELF_CTRL_HCB1
 (1 << 15)

	)

420 
	#CS8900_SELF_STATUS_3_3_V
 (1 << 6)

	)

421 
	#CS8900_SELF_STATUS_INITD
 (1 << 7)

	)

422 
	#CS8900_SELF_STATUS_SIBUST
 (1 << 8)

	)

423 
	#CS8900_SELF_STATUS_EEPROM_PRESENT
 (1 << 9)

	)

424 
	#CS8900_SELF_STATUS_EEPROM_OK
 (1 << 10)

	)

425 
	#CS8900_SELF_STATUS_EL_PRESENT
 (1 << 11)

	)

426 
	#CS8900_SELF_STATUS_EE_SIZE
 (1 << 12)

	)

432 
	#CS8900_BUS_CTRL_RESET_RX_DMA
 (1 << 6)

	)

433 
	#CS8900_BUS_CTRL_USE_SA
 (1 << 9)

	)

434 
	#CS8900_BUS_CTRL_MEMORY_ENABLE
 (1 << 10)

	)

435 
	#CS8900_BUS_CTRL_DMA_BURST
 (1 << 11)

	)

436 
	#CS8900_BUS_CTRL_IOCHRDYE
 (1 << 12)

	)

437 
	#CS8900_BUS_CTRL_RX_DMA_SIZE
 (1 << 13)

	)

438 
	#CS8900_BUS_CTRL_ENABLE_INT
 (1 << 15)

	)

444 
	#CS8900_BUS_STATUS_TX_BID_ERROR
 (1 << 7)

	)

445 
	#CS8900_BUS_STATUS_RDY_FOR_TX_NOW
 (1 << 8)

	)

450 
	#CS8900_TRACE
 0

	)

451 
	#CS8900_TRACE_SIZE
 (400)

	)

457 
	#CS8900_RX_QUEUE_SIZE
 (30)

	)

465 
	mrx_∑ckës
;

466 
	mtx_∑ckës
;

467 
	mrx_byãs
;

468 
	mtx_byãs
;

469 
	mrx_öãºu±s
;

470 
	mtx_öãºu±s
;

473 
	mrx_dr›≥d
;

474 
	mrx_no_mbufs
;

475 
	mrx_no_˛u°îs
;

476 
	mrx_ovîsize_îr‹s
;

477 
	mrx_¸c_îr‹s
;

478 
	mrx_ru¡_îr‹s
;

479 
	mrx_mis£d_îr‹s
;

482 
	mtx_ok
;

483 
	mtx_cﬁlisi⁄s
;

484 
	mtx_bid_îr‹s
;

485 
	mtx_waô_f‹_rdy4tx
;

486 
	mtx_rdy4tx
;

487 
	mtx_undîrun_îr‹s
;

488 
	mtx_dr›≥d
;

489 
	mtx_ª£nds
;

492 
	möt_swöt_ªq
;

493 
	möt_swöt_ªs
;

494 
	möt_lockup
;

496 
	möãºu±s
;

498 } 
	tëh_°©i°ics
;

510 
	mdev
;

517 
	mio_ba£
;

518 
	mmem_ba£
;

530 
	múq_Àvñ
;

536 
	mmac_addªss
[6];

542 
¨pcom
 
	m¨pcom
;

548 
	mac˚±_bˇ°
;

549 
	mtx_a˘ive
;

551 
πems_id
 
	mrx_èsk
;

552 
πems_id
 
	mtx_èsk
;

558 
mbuf
 *
	mrx_ªady_hód
;

559 
mbuf
 *
	mrx_ªady_èû
;

560 
	mrx_ªady_Àn
;

562 
mbuf
 *
	mrx_lﬂded_hód
;

563 
mbuf
 *
	mrx_lﬂded_èû
;

564 
	mrx_lﬂded_Àn
;

571 
	mrx_queue_size
;

573 #i‡
CS8900_TRACE


574 
	måa˚_key
[
CS8900_TRACE_SIZE
];

575 
	måa˚_v¨
[
CS8900_TRACE_SIZE
];

576 
	måa˚_time
[
CS8900_TRACE_SIZE
];

577 
	måa˚_ö
;

584 
ëh_°©i°ics
 
	mëh_°©s
;

586 } 
	tcs8900_devi˚
;

594 
cs8900_lök_a˘ive
 (
cs8900_devi˚
 *
cs
);

610 
cs8900_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

611 
©èchög
);

625 
πems_i§
 
cs8900_öãºu±
 (
πems_ve˘‹_numbî
 
v
, *
cs
);

636 
cs8900_gë_mac_addr
 (
cs8900_devi˚
 *
cs
, *
mac_addªss
);

647 
cs8900_©èch_öãºu±
 (
cs8900_devi˚
 *
cs
);

657 
cs8900_dëach_öãºu±
 (
cs8900_devi˚
 *
cs
);

671 
cs8900_io_£t_ªg
 (
cs8900_devi˚
 *
cs
,

672 
ªg
, 
d©a
);

686 
cs8900_io_gë_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
);

701 
cs8900_mem_£t_ªg
 (
cs8900_devi˚
 *
cs
,

702 
ªg
, 
d©a
);

717 
cs8900_mem_gë_ªg
 (
cs8900_devi˚
 *
cs
, 
ªg
);

732 
cs8900_put_d©a_block
 (
cs8900_devi˚
 *
cs
, 
Àn
, *
d©a
);

747 
cs8900_gë_d©a_block
 (
cs8900_devi˚
 *
cs
, *
d©a
);

759 
cs8900_tx_lﬂd
 (
cs8900_devi˚
 *
cs
, 
mbuf
 *
m
);

	@src/libchip/network/dec21140.c

38 
	~<πems.h
>

46 #i‡
deföed
(
__i386__
)

47 
	#DEC21140_SUPPORTED


	)

48 
	#PCI_DRAM_OFFSET
 0

	)

50 #i‡
deföed
(
__PPC__
)

51 
	#DEC21140_SUPPORTED


	)

54 
	~<b•.h
>

56 #i‡!
deföed
(
PCI_DRAM_OFFSET
)

57 #unde‡
DEC21140_SUPPORTED


60 #i‡
deföed
(
DEC21140_SUPPORTED
)

61 
	~<πems/pci.h
>

63 #i‡
deföed
(
__PPC__
)

64 
	~<lib˝u/byã‹dî.h
>

65 
	~<lib˝u/io.h
>

68 #i‡
deföed
(
__i386__
)

69 
	~<lib˝u/byã‹dî.h
>

72 
	~<°dlib.h
>

73 
	~<°dio.h
>

74 
	~<°d¨g.h
>

75 
	~<°rög.h
>

76 
	~<î∫o.h
>

77 
	~<πems/îr‹.h
>

78 
	~<πems/b•Io.h
>

79 
	~<πems/πems_bsd√t.h
>

81 
	~<sys/∑øm.h
>

82 
	~<sys/mbuf.h
>

84 
	~<sys/sockë.h
>

85 
	~<sys/sockio.h
>

86 
	~<√t/if.h
>

87 
	~<√töë/ö.h
>

88 
	~<√töë/if_ëhî.h
>

90 
	~<b•/úq.h
>

92 #ifde‡
mÆloc


93 #unde‡
mÆloc


95 #ifde‡
‰ì


96 #unde‡
‰ì


99 
	#DEC_DEBUG


	)

102 
	#PCI_VENDOR_ID_DEC
 0x1011

	)

103 
	#PCI_DEVICE_ID_DEC_21140
 0x0009

	)

104 
	#PCI_DEVICE_ID_DEC_21143
 0x0019

	)

106 
	#DRIVER_PREFIX
 "dc"

	)

108 
	#IO_MASK
 0x3

	)

109 
	#MEM_MASK
 0xF

	)

112 
	#ioCSR0
 0x00

	)

113 
	#ioCSR1
 0x08

	)

114 
	#ioCSR2
 0x10

	)

115 
	#ioCSR3
 0x18

	)

116 
	#ioCSR4
 0x20

	)

117 
	#ioCSR5
 0x28

	)

118 
	#ioCSR6
 0x30

	)

119 
	#ioCSR7
 0x38

	)

120 
	#ioCSR8
 0x40

	)

121 
	#ioCSR9
 0x48

	)

122 
	#ioCSR10
 0x50

	)

123 
	#ioCSR11
 0x58

	)

124 
	#ioCSR12
 0x60

	)

125 
	#ioCSR13
 0x68

	)

126 
	#ioCSR14
 0x70

	)

127 
	#ioCSR15
 0x78

	)

130 
	#memCSR0
 0x00

	)

131 
	#memCSR1
 0x02

	)

132 
	#memCSR2
 0x04

	)

133 
	#memCSR3
 0x06

	)

134 
	#memCSR4
 0x08

	)

135 
	#memCSR5
 0x0A

	)

136 
	#memCSR6
 0x0C

	)

137 
	#memCSR7
 0x0E

	)

138 
	#memCSR8
 0x10

	)

139 
	#memCSR9
 0x12

	)

140 
	#memCSR10
 0x14

	)

141 
	#memCSR11
 0x16

	)

142 
	#memCSR12
 0x18

	)

143 
	#memCSR13
 0x1A

	)

144 
	#memCSR14
 0x1C

	)

145 
	#memCSR15
 0x1E

	)

147 
	#DEC_REGISTER_SIZE
 0x100

	)

152 
	#RESET_CHIP
 0x00000001

	)

153 #i‡
deföed
(
__PPC__
)

154 
	#CSR0_MODE
 0x0030e002

	)

156 
	#CSR0_MODE
 0x0020e002

	)

158 
	#ROM_ADDRESS
 0x00004800

	)

159 
	#CSR6_INIT
 0x022cc000

	)

160 
	#CSR6_TX
 0x00002000

	)

161 
	#CSR6_TXRX
 0x00002002

	)

162 
	#IT_SETUP
 0x000100c0

	)

163 
	#CLEAR_IT
 0xFFFFFFFF

	)

164 
	#NO_IT
 0x00000000

	)

167 
	sMD
 {

169 vﬁ©ûê
uöt32_t
 
	m°©us
;

170 vﬁ©ûê
uöt32_t
 
	mcou¡s
;

171 vﬁ©ûê
uöt32_t
 
	mbuf1
, 
	mbuf2
;

173 vﬁ©ûê
mbuf
 *
	mm
;

174 vﬁ©ûê
MD
 *
	m√xt
;

175 } 
__©åibuã__
 ((
∑cked
));

193 
	#NRXBUFS
 16

	)

194 
	#NTXBUFS
 16

	)

199 
	#NDECDRIVER
 8

	)

204 
	#RBUF_SIZE
 1536

	)

206 
	#ET_MINLEN
 60

	)

215 
πems_evít_£t
 
	gunô_sig«ls
[
NDECDRIVER
]{ 
RTEMS_EVENT_1
,

216 
RTEMS_EVENT_2
,

217 
RTEMS_EVENT_3
,

218 
RTEMS_EVENT_4
,

219 
RTEMS_EVENT_5
,

220 
RTEMS_EVENT_6
,

221 
RTEMS_EVENT_7
,

222 
RTEMS_EVENT_8
 };

224 #i‡
deföed
(
__PPC__
)

225 
	#phys_to_bus
(
addªss
Ë(()(◊ddªss)Ë+ 
PCI_DRAM_OFFSET
)

	)

226 
	#bus_to_phys
(
addªss
Ë(()(◊ddªss)Ë- 
PCI_DRAM_OFFSET
)

	)

227 
	#CPU_CACHE_ALIGNMENT_FOR_BUFFER
 
PPC_CACHE_ALIGNMENT


	)

229 
Waô_X_ms
–
timeToWaô
 );

230 
	#phys_to_bus
(
addªss
Ë((Ë(◊ddªss)))

	)

231 
	#bus_to_phys
(
addªss
Ë((Ë(◊ddªss)))

	)

232 
	#πems_b•_dñay_ö_bus_cy˛es
(
cy˛e
Ë
	`Waô_X_ms
–cy˛e/100 )

	)

233 
	#CPU_CACHE_ALIGNMENT_FOR_BUFFER
 
PG_SIZE


	)

236 #i‡(
MCLBYTES
 < 
RBUF_SIZE
)

243 
	sdec21140_so·c
 {

245 
¨pcom
 
	m¨pcom
;

247 
πems_úq_c⁄√˘_d©a
 
	múqInfo
;

248 
πems_evít_£t
 
	mi€vít
;

250 
	mnumRxbuf„rs
, 
	mnumTxbuf„rs
;

252 vﬁ©ûê
MD
 *
	mMDba£
;

253 vﬁ©ûê
MD
 *
	m√xtRxMD
;

254 vﬁ©ûê*
	mbuf„rBa£
;

255 
	mac˚±Brﬂdˇ°
;

257 vﬁ©ûê
MD
 *
	mTxMD
;

258 vﬁ©ûê
MD
 *
	mSítTxMD
;

259 
	mPídögTxCou¡
;

260 
	mTxSu•íded
;

262 
	mp‹t
;

263 vﬁ©ûê
uöt32_t
 *
	mba£
;

268 
	mrxI¡îru±s
;

269 
	mrxNŸFú°
;

270 
	mrxNŸLa°
;

271 
	mrxGü¡
;

272 
	mrxN⁄O˘ë
;

273 
	mrxRu¡
;

274 
	mrxBadCRC
;

275 
	mrxOvîrun
;

276 
	mrxCﬁlisi⁄
;

278 
	mtxI¡îru±s
;

279 
	mtxDe„ºed
;

280 
	mtxHóπbót
;

281 
	mtxL©eCﬁlisi⁄
;

282 
	mtxRëryLimô
;

283 
	mtxUndîrun
;

284 
	mtxLo°C¨rõr
;

285 
	mtxRawWaô
;

288 
dec21140_so·c
 
	gdec21140_so·c
[
NDECDRIVER
];

289 
πems_id
 
	grxD´m⁄Tid
;

290 
πems_id
 
	gtxD´m⁄Tid
;

296 
	#EE_SHIFT_CLK
 0x02

	)

297 
	#EE_CS
 0x01

	)

298 
	#EE_DATA_WRITE
 0x04

	)

299 
	#EE_WRITE_0
 0x01

	)

300 
	#EE_WRITE_1
 0x05

	)

301 
	#EE_DATA_READ
 0x08

	)

302 
	#EE_ENB
 (0x4800 | 
EE_CS
)

	)

305 
	#EE_WRITE_CMD
 (5 << 6)

	)

306 
	#EE_READ_CMD
 (6 << 6)

	)

307 
	#EE_ERASE_CMD
 (7 << 6)

	)

309 
	$ìgë16
(vﬁ©ûê
uöt32_t
 *
iﬂddr
, 
loˇti⁄
)

311 
i
;

312 
ªtvÆ
 = 0;

313 
ªad_cmd
 = 
loˇti⁄
 | 
EE_READ_CMD
;

315 
	`°_À32
(
iﬂddr
, 
EE_ENB
 & ~
EE_CS
);

316 
	`°_À32
(
iﬂddr
, 
EE_ENB
);

319 
i
 = 10; i >= 0; i--) {

320 
d©avÆ
 = (
ªad_cmd
 & (1 << 
i
)Ë? 
EE_DATA_WRITE
 : 0;

321 
	`°_À32
(
iﬂddr
, 
EE_ENB
 | 
d©avÆ
);

322 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

323 
	`°_À32
(
iﬂddr
, 
EE_ENB
 | 
d©avÆ
 | 
EE_SHIFT_CLK
);

324 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

325 
	`°_À32
(
iﬂddr
, 
EE_ENB
 | 
d©avÆ
);

326 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

328 
	`°_À32
(
iﬂddr
, 
EE_ENB
);

330 
i
 = 16; i > 0; i--) {

331 
	`°_À32
(
iﬂddr
, 
EE_ENB
 | 
EE_SHIFT_CLK
);

332 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

333 
ªtvÆ
 = (ªtvÆ << 1Ë| ((
	`ld_À32
(
iﬂddr
Ë& 
EE_DATA_READ
) ? 1 : 0);

334 
	`°_À32
(
iﬂddr
, 
EE_ENB
);

335 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

339 
	`°_À32
(
iﬂddr
, 
EE_ENB
 & ~
EE_CS
);

340  ( ((
ªtvÆ
<<8)&0xff00) | ((retval>>8)&0xff) );

341 
	}
}

343 
	$no_›
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

346 
	}
}

348 
	$dec21140IsOn
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

350  
	`BSP_úq_íabÀd_©_i8259s
 (
úq
->
«me
);

351 
	}
}

356 
πems_i§


357 
	$dec21140E√t_öãºu±_h™dÀr
 ( 
dec21140_so·c
 *
sc
 )

359 vﬁ©ûê
uöt32_t
 *
tba£
;

360 
uöt32_t
 
°©us
;

362 
tba£
 = (
uöt32_t
*)(
sc
->
ba£
);

367 
°©us
 = 
	`ld_À32
(
tba£
+
memCSR5
);

368 
	`°_À32
((
tba£
+
memCSR5
), 
°©us
);

373 if–
°©us
 & 0x000000c0 )

375 
sc
->
rxI¡îru±s
++;

376 
	`πems_bsd√t_evít_£nd
(
rxD´m⁄Tid
, 
sc
->
i€vít
);

378 
	}
}

380 
πems_i§


381 
	$dec21140E√t_öãºu±_h™dÀr_íåy
()

383 
i
;

389 
i
=0; i< 
NDECDRIVER
; i++ )

391 if–
dec21140_so·c
[
i
].
ba£
 )

392 
	`dec21140E√t_öãºu±_h™dÀr
–&
dec21140_so·c
[
i
] );

394 
	}
}

400 
	$dec21140E√t_öôülize_h¨dw¨e
 (
dec21140_so·c
 *
sc
)

402 
i
,
°
;

403 vﬁ©ûê
uöt32_t
 *
tba£
;

404 vﬁ©ûê*
˝
, *
£tup_‰m
, *
óddrs
;

405 vﬁ©ûê*
buf„r
;

406 vﬁ©ûê
MD
 *
rmd
;

409 #ifde‡
DEC_DEBUG


410 
	`¥ötk
("dec2114x : %02x:%02x:%02x:%02x:%02x:%02xÇame '%s%d', io %x, mem %x, int %d\n",

411 
sc
->
¨pcom
.
ac_íaddr
[0], sc->arpcom.ac_enaddr[1],

412 
sc
->
¨pcom
.
ac_íaddr
[2], sc->arpcom.ac_enaddr[3],

413 
sc
->
¨pcom
.
ac_íaddr
[4], sc->arpcom.ac_enaddr[5],

414 
sc
->
¨pcom
.
ac_if
.
if_«me
, sc->¨pcom.ac_if.
if_unô
,

415 
sc
->
p‹t
, (Ësc->
ba£
, sc->
úqInfo
.
«me
 );

418 
tba£
 = 
sc
->
ba£
;

424 
	`°_À32
–(
tba£
+
memCSR6
), 
CSR6_INIT
);

425 
	`°_À32
–(
tba£
+
memCSR0
), 
RESET_CHIP
);

426 
	`πems_b•_dñay_ö_bus_cy˛es
(200);

428 
	`°_À32
–(
tba£
+
memCSR7
), 
NO_IT
);

433 
	`°_À32
–(
tba£
+
memCSR0
), 
CSR0_MODE
);

438 
˝
 = (vﬁ©ûê*)
	`mÆloc
(((
sc
->
numRxbuf„rs
+sc->
numTxbuf„rs
)*(
MD
))

439 + (
sc
->
numTxbuf„rs
*
RBUF_SIZE
)

440 + 
CPU_CACHE_ALIGNMENT_FOR_BUFFER
);

441 
sc
->
buf„rBa£
 = 
˝
;

442 
˝
 +(
CPU_CACHE_ALIGNMENT_FOR_BUFFER
 - ()cp) & (CPU_CACHE_ALIGNMENT_FOR_BUFFER - 1);

443 #i‡
	`deföed
(
__i386__
)

444 #ifde‡
PCI_BRIDGE_DOES_NOT_ENSURE_CACHE_COHERENCY_FOR_DMA


445 i‡(
	`_CPU_is_∑gög_íabÀd
())

446 
_CPU_ch™ge_mem‹y_m≠pög_©åibuã


447 (
NULL
, 
˝
,

448 ((
sc
->
numRxbuf„rs
+sc->
numTxbuf„rs
)*(
MD
))

449 + (
sc
->
numTxbuf„rs
*
RBUF_SIZE
),

450 
PTE_CACHE_DISABLE
 | 
PTE_WRITABLE
);

453 
rmd
 = (vﬁ©ûê
MD
*)
˝
;

454 
sc
->
MDba£
 = 
rmd
;

455 
sc
->
√xtRxMD
 = sc->
MDba£
;

457 
buf„r
 = 
˝
 + ((
sc
->
numRxbuf„rs
+sc->
numTxbuf„rs
)*(
MD
));

458 
	`°_À32
–(
tba£
+
memCSR3
), ()(
	`phys_to_bus
(()(
sc
->
MDba£
))));

460 
i
=0 ; i<
sc
->
numRxbuf„rs
; i++)

462 
mbuf
 *
m
;

465 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

466 
	`MCLGET
 (
m
, 
M_WAIT
);

467 
m
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

468 
rmd
->
m
 = m;

470 
rmd
->
buf2
 = 
	`phys_to_bus
(rmd+1);

471 
rmd
->
buf1
 = 
	`phys_to_bus
(
	`mtod
(
m
, *));

472 
rmd
->
°©us
 = 0x80000000;

473 
rmd
->
cou¡s
 = 0xfdc00000 | (
RBUF_SIZE
);

474 
rmd
->
√xt
 =Ñmd+1;

475 
rmd
++;

480 
sc
->
MDba£
 [sc->
numRxbuf„rs
-1].
buf2
 = 0;

481 
sc
->
MDba£
 [sc->
numRxbuf„rs
-1].
cou¡s
 = 0x„c00000 | (
RBUF_SIZE
);

482 
sc
->
MDba£
 [sc->
numRxbuf„rs
-1].
√xt
 = sc->MDbase;

489 
	`°_À32
–(
tba£
+
memCSR4
), ()(
	`phys_to_bus
(()(
rmd
))) );

490 
i
=0 ; i<
sc
->
numTxbuf„rs
; i++){

491 (
rmd
+
i
)->
buf2
 = 
	`phys_to_bus
(rmd+i+1);

492 (
rmd
+
i
)->
buf1
 = 
	`phys_to_bus
(
buf„r
 + (i*
RBUF_SIZE
));

493 (
rmd
+
i
)->
cou¡s
 = 0x01000000;

494 (
rmd
+
i
)->
°©us
 = 0x0;

495 (
rmd
+
i
)->
√xt
 =Ñmd+i+1;

496 (
rmd
+
i
)->
m
 = 0;

502 (
rmd
+
sc
->
numTxbuf„rs
-1)->
buf2
 = 
	`phys_to_bus
(rmd);

503 (
rmd
+
sc
->
numTxbuf„rs
-1)->
√xt
 =Ñmd;

509 
£tup_‰m
 = (vﬁ©ûê*)(
	`bus_to_phys
(
rmd
->
buf1
));

510 
óddrs
 = (*)(
sc
->
¨pcom
.
ac_íaddr
);

512 
i
 = 1; i < 16; i++) {

513 *
£tup_‰m
++ = 
óddrs
[0];

514 *
£tup_‰m
++ = 
óddrs
[1];

515 *
£tup_‰m
++ = 
óddrs
[0];

516 *
£tup_‰m
++ = 
óddrs
[1];

517 *
£tup_‰m
++ = 
óddrs
[2];

518 *
£tup_‰m
++ = 
óddrs
[3];

519 *
£tup_‰m
++ = 
óddrs
[2];

520 *
£tup_‰m
++ = 
óddrs
[3];

521 *
£tup_‰m
++ = 
óddrs
[4];

522 *
£tup_‰m
++ = 
óddrs
[5];

523 *
£tup_‰m
++ = 
óddrs
[4];

524 *
£tup_‰m
++ = 
óddrs
[5];

528 
	`mem£t
((*Ë
£tup_‰m
, 0xff, 12);

529 
rmd
->
cou¡s
 = 0x09000000 | 192 ;

530 
rmd
->
°©us
 = 0x80000000;

531 
	`°_À32
–(
tba£
+
memCSR6
), 
CSR6_INIT
 | 
CSR6_TX
);

532 
	`°_À32
–(
tba£
+
memCSR1
), 1);

534 
rmd
->
°©us
 != 0x7fffffff);

535 
rmd
->
cou¡s
 = 0x01000000;

537 
sc
->
TxMD
 = 
rmd
+1;

539 
sc
->
úqInfo
.
hdl
 = (
πems_úq_hdl
)
dec21140E√t_öãºu±_h™dÀr_íåy
;

540 
sc
->
úqInfo
.
⁄
 = 
no_›
;

541 
sc
->
úqInfo
.
off
 = 
no_›
;

542 
sc
->
úqInfo
.
isOn
 = 
dec21140IsOn
;

544 #ifde‡
DEC_DEBUG


545 
	`¥ötk
–"dec2114x: In°Ælög IRQ %d\n", 
sc
->
úqInfo
.
«me
 );

547 #ifde‡
BSP_SHARED_HANDLER_SUPPORT


548 
°
 = 
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
–&
sc
->
úqInfo
 );

550 
°
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
–&
sc
->
úqInfo
 );

553 i‡(!
°
)

554 
	`πems_∑nic
 ("dec2114x : I¡îru±Çamê%dáÃódy i¿u£\n", 
sc
->
úqInfo
.
«me
 );

555 
	}
}

558 
	$dec21140_rxD´m⁄
 (*
¨g
)

560 vﬁ©ûê
MD
 *
rmd
;

561 
dec21140_so·c
 *
sc
;

562 
i‚ë
 *
iÂ
;

563 
ëhî_hódî
 *
eh
;

564 
mbuf
 *
m
;

565 
i
,
Àn
;

566 
πems_evít_£t
 
evíts
;

571 
	`πems_bsd√t_evít_ª˚ive
–
RTEMS_ALL_EVENTS
,

572 
RTEMS_WAIT
|
RTEMS_EVENT_ANY
,

573 
RTEMS_NO_TIMEOUT
,

574 &
evíts
);

576 
i
=0; i< 
NDECDRIVER
; i++ )

578 
sc
 = &
dec21140_so·c
[
i
];

579 if–
sc
->
ba£
 )

581 if–
evíts
 & 
sc
->
i€vít
 )

583 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

584 
rmd
 = 
sc
->
√xtRxMD
;

589 (
rmd
->
°©us
 & 0x80000000) == 0)

594 
Àn
 = (
rmd
->
°©us
 >> 16) & 0x7ff;

595 
m
 = (
mbuf
 *)(
rmd
->m);

596 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 =Üí - (
ëhî_hódî
);

597 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

598 
m
->
m_d©a
 +(
ëhî_hódî
);

599 
	`ëhî_öput
 (
iÂ
, 
eh
, 
m
);

602 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

603 
	`MCLGET
 (
m
, 
M_WAIT
);

604 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

605 
rmd
->
m
 = m;

606 
rmd
->
buf1
 = 
	`phys_to_bus
(
	`mtod
(
m
, *));

609 
rmd
->
°©us
 = 0x80000000;

611 
rmd
Ùmd->
√xt
;

614 
sc
->
√xtRxMD
 = 
rmd
;

620 
	}
}

623 
	$£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

625 
dec21140_so·c
 *
dp
 = 
iÂ
->
if_so·c
;

626 vﬁ©ûê
MD
 *
tmd
;

627 vﬁ©ûê*
ãmp
;

628 
mbuf
 *
n
;

629 
Àn
;

630 vﬁ©ûê
uöt32_t
 *
tba£
;

632 
tba£
 = 
dp
->
ba£
;

637 
tmd
 = 
dp
->
TxMD
;

638 
n
 = 
m
;

640 (
tmd
->
°©us
 & 0x80000000) != 0)

642 
tmd
Òmd->
√xt
;

645 
Àn
 = 0;

646 
ãmp
 = (vﬁ©ûê*)(
	`bus_to_phys
(
tmd
->
buf1
));

650 
Àn
 +
m
->
m_Àn
;

651 
	`mem˝y
((*Ë
ãmp
, (*)
m
->
m_d©a
, m->
m_Àn
);

652 
ãmp
 +
m
->
m_Àn
 ;

653 i‡((
m
 = m->
m_√xt
Ë=
NULL
)

657 i‡(
Àn
 < 
ET_MINLEN
)Üen = ET_MINLEN;

658 
tmd
->
cou¡s
 = 0xe1000000 | (
Àn
 & 0x7ff);

659 
tmd
->
°©us
 = 0x80000000;

661 
	`°_À32
–(
tba£
+
memCSR1
), 0x1);

663 
	`m_‰ìm
(
n
);

665 
dp
->
TxMD
 = 
tmd
->
√xt
;

666 
	}
}

672 
	$dec21140_txD´m⁄
 (*
¨g
)

674 
dec21140_so·c
 *
sc
;

675 
i‚ë
 *
iÂ
;

676 
mbuf
 *
m
;

677 
i
;

678 
πems_evít_£t
 
evíts
;

685 
	`πems_bsd√t_evít_ª˚ive
–
RTEMS_ALL_EVENTS
,

686 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

687 
RTEMS_NO_TIMEOUT
, &
evíts
);

689 
i
=0; i< 
NDECDRIVER
; i++ )

691 
sc
 = &
dec21140_so·c
[
i
];

692 if–
sc
->
ba£
 )

694 if–
evíts
 & 
sc
->
i€vít
 )

696 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

703 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

704 if–!
m
 ) ;

706 
	`£nd∑ckë
 (
iÂ
, 
m
);

709 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

715 
	}
}

718 
	$dec21140_°¨t
 (
i‚ë
 *
iÂ
)

720 
dec21140_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

721 
	`πems_bsd√t_evít_£nd
–
txD´m⁄Tid
, 
sc
->
i€vít
 );

722 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

723 
	}
}

729 
	$dec21140_öô
 (*
¨g
)

731 
dec21140_so·c
 *
sc
 = 
¨g
;

732 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

733 vﬁ©ûê
uöt32_t
 *
tba£
;

738 if–!
sc
->
úqInfo
.
hdl
 )

740 
	`dec21140E√t_öôülize_h¨dw¨e
 (
sc
);

746 
tba£
 = 
sc
->
ba£
;

747 
	`°_À32
–(
tba£
+
memCSR5
), 
IT_SETUP
);

748 
	`°_À32
–(
tba£
+
memCSR7
), 
IT_SETUP
);

749 
	`°_À32
–(
tba£
+
memCSR6
), 
CSR6_INIT
 | 
CSR6_TXRX
);

754 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

755 
	}
}

761 
	$dec21140_°›
 (
dec21140_so·c
 *
sc
)

763 vﬁ©ûê
uöt32_t
 *
tba£
;

764 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

766 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

771 
tba£
 = 
sc
->
ba£
;

772 
	`°_À32
–(
tba£
+
memCSR7
), 
NO_IT
);

773 
	`°_À32
–(
tba£
+
memCSR6
), 
CSR6_INIT
);

776 
	}
}

782 
	$dec21140_°©s
 (
dec21140_so·c
 *
sc
)

784 
	`¥ötf
 (" Rx I¡îru±s:%-8lu", 
sc
->
rxI¡îru±s
);

785 
	`¥ötf
 (" NŸ Fú°:%-8lu", 
sc
->
rxNŸFú°
);

786 
	`¥ötf
 (" NŸ La°:%-8lu\n", 
sc
->
rxNŸLa°
);

787 
	`¥ötf
 (" Gü¡:%-8lu", 
sc
->
rxGü¡
);

788 
	`¥ötf
 (" Ru¡:%-8lu", 
sc
->
rxRu¡
);

789 
	`¥ötf
 (" N⁄-o˘ë:%-8lu\n", 
sc
->
rxN⁄O˘ë
);

790 
	`¥ötf
 (" Bad CRC:%-8lu", 
sc
->
rxBadCRC
);

791 
	`¥ötf
 (" Ovîrun:%-8lu", 
sc
->
rxOvîrun
);

792 
	`¥ötf
 (" Cﬁlisi⁄:%-8lu\n", 
sc
->
rxCﬁlisi⁄
);

794 
	`¥ötf
 (" Tx I¡îru±s:%-8lu", 
sc
->
txI¡îru±s
);

795 
	`¥ötf
 (" De„ºed:%-8lu", 
sc
->
txDe„ºed
);

796 
	`¥ötf
 (" Mis£d Hórbót:%-8lu\n", 
sc
->
txHóπbót
);

797 
	`¥ötf
 (" NÿC¨rõr:%-8lu", 
sc
->
txLo°C¨rõr
);

798 
	`¥ötf
 ("Rëønsmô Limô:%-8lu", 
sc
->
txRëryLimô
);

799 
	`¥ötf
 (" L©êCﬁlisi⁄:%-8lu\n", 
sc
->
txL©eCﬁlisi⁄
);

800 
	`¥ötf
 (" Undîrun:%-8lu", 
sc
->
txUndîrun
);

801 
	`¥ötf
 (" Raw ouçuàwaô:%-8lu\n", 
sc
->
txRawWaô
);

802 
	}
}

808 
	$dec21140_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

810 
dec21140_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

811 
îr‹
 = 0;

813 
comm™d
) {

814 
SIOCGIFADDR
:

815 
SIOCSIFADDR
:

816 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

819 
SIOCSIFFLAGS
:

820 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
)) {

821 
IFF_RUNNING
:

822 
	`dec21140_°›
 (
sc
);

825 
IFF_UP
:

826 
	`dec21140_öô
 (
sc
);

829 
IFF_UP
 | 
IFF_RUNNING
:

830 
	`dec21140_°›
 (
sc
);

831 
	`dec21140_öô
 (
sc
);

839 
SIO_RTEMS_SHOW_STATS
:

840 
	`dec21140_°©s
 (
sc
);

847 
îr‹
 = 
EINVAL
;

851  
îr‹
;

852 
	}
}

876 
	$πems_dec21140_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èch
)

878 
dec21140_so·c
 *
sc
;

879 
i‚ë
 *
iÂ
;

880 *
unôName
;

881 
unôNumbî
;

882 
mtu
;

883 
cvÆue
;

884 #i‡
	`deföed
(
__i386__
)

885 
uöt32_t
 
vÆue
;

886 
uöt8_t
 
öãºu±
;

888 
pbus
, 
pdev
, 
pfun
;

889 #i‡
	`deföed
(
__PPC__
)

890 
tmp
;

891 
uöt32_t
 
lvÆue
;

898 if–(
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
(
c⁄fig
, &
unôName
)) == -1 )

902 if–
	`°rcmp
(
unôName
, 
DRIVER_PREFIX
) )

904 
	`¥ötk
("dec2114x : unôÇamê'%s'ÇŸ %s\n", 
unôName
, 
DRIVER_PREFIX
 );

911 i‡–
	`pci_föd_devi˚
(
PCI_VENDOR_ID_DEC
, 
PCI_DEVICE_ID_DEC_21140
,

912 
unôNumbî
-1, &
pbus
, &
pdev
, &
pfun
) == -1 ) {

913 i‡–
	`pci_föd_devi˚
(
PCI_VENDOR_ID_DEC
, 
PCI_DEVICE_ID_DEC_21143
,

914 
unôNumbî
-1, &
pbus
, &
pdev
, &
pfun
) != -1 ) {

917 #i‡
	`deföed
(
__i386__
)

918 
	`pci_wrôe_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
, 0x40, 0 );

920 
	`pci_wrôe_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
, 0x40, 
PCI_DEVICE_ID_DEC_21143
);

924 
	`¥ötk
("dec2114x : devi˚ '%s'ÇŸ found o¿PCI bus\n", 
c⁄fig
->
«me
 );

929 #ifde‡
DEC_DEBUG


931 
	`¥ötk
("dec21140 : found device '%s', bus 0x%02x, dev 0x%02x, func 0x%02x\n",

932 
c⁄fig
->
«me
, 
pbus
, 
pdev
, 
pfun
);

936 i‡((
unôNumbî
 < 1Ë|| (unôNumbî > 
NDECDRIVER
))

938 
	`¥ötk
("dec2114x : unô %òi†övÆid, mu° bê(1 <¿<%d)\n", 
unôNumbî
);

942 
sc
 = &
dec21140_so·c
[
unôNumbî
 - 1];

943 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

944 i‡(
iÂ
->
if_so·c
 !
NULL
)

946 
	`¥ötk
("dec2114x : unô %òÆªady i¿u£.\n", 
unôNumbî
 );

954 
sc
->
i€vít
 = 
unô_sig«ls
[
unôNumbî
-1];

959 
sc
->
numRxbuf„rs
 = (
c⁄fig
->
rbuf_cou¡
Ë? c⁄fig->rbuf_cou¡ : 
NRXBUFS
;

960 
sc
->
numTxbuf„rs
 = (
c⁄fig
->
xbuf_cou¡
Ë? c⁄fig->xbuf_cou¡ : 
NTXBUFS
;

966 #i‡
	`deföed
(
__i386__
)

968 
	`pci_ªad_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
, 16, &
vÆue
);

969 
sc
->
p‹t
 = 
vÆue
 & ~
IO_MASK
;

971 
	`pci_ªad_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
, 20, &
vÆue
);

972 i‡(
	`_CPU_is_∑gög_íabÀd
())

973 
	`_CPU_m≠_phys_addªss
((**Ë&(
sc
->
ba£
),

974 (*)(
vÆue
 & ~
MEM_MASK
),

975 
DEC_REGISTER_SIZE
 ,

976 
PTE_CACHE_DISABLE
 | 
PTE_WRITABLE
);

978 
sc
->
ba£
 = (
uöt32_t
 *)(
vÆue
 & ~
MEM_MASK
);

980 
	`pci_ªad_c⁄fig_byã
(
pbus
, 
pdev
, 
pfun
, 60, &
öãºu±
);

981 
cvÆue
 = 
öãºu±
;

983 #i‡
	`deföed
(
__PPC__
)

984 ()
	`pci_ªad_c⁄fig_dw‹d
(
pbus
,

985 
pdev
,

986 
pfun
,

987 
PCI_BASE_ADDRESS_0
,

988 &
lvÆue
);

990 
sc
->
p‹t
 = 
lvÆue
 & ()(~
IO_MASK
);

992 ()
	`pci_ªad_c⁄fig_dw‹d
(
pbus
,

993 
pdev
,

994 
pfun
,

995 
PCI_BASE_ADDRESS_1
,

996 &
lvÆue
);

998 
tmp
 = ()(
lvÆue
 & ()(~
MEM_MASK
))

999 + ()
PCI_MEM_BASE
;

1001 
sc
->
ba£
 = (
uöt32_t
*)(
tmp
);

1003 
	`pci_ªad_c⁄fig_byã
(
pbus
,

1004 
pdev
,

1005 
pfun
,

1006 
PCI_INTERRUPT_LINE
,

1007 &
cvÆue
);

1015 
	`pci_wrôe_c⁄fig_w‹d
(
pbus
, 
pdev
, 
pfun
,

1016 
PCI_COMMAND
,

1017 (
uöt16_t
Ë–
PCI_COMMAND_IO
 | 
PCI_COMMAND_MEMORY
 | 
PCI_COMMAND_MASTER
 ) );

1023 
	`mem£t
(&
sc
->
úqInfo
,0,(
πems_úq_c⁄√˘_d©a
));

1024 
sc
->
úqInfo
.
«me
 = 
cvÆue
;

1027 #ifde‡
DEC_DEBUG


1028 
	`¥ötk
("dec2114x : unô %d ba£áddªs†%08x.\n", 
unôNumbî
, 
sc
->
ba£
 );

1035 i‡(
c⁄fig
->
h¨dw¨e_addªss
) {

1036 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
,

1037 
ETHER_ADDR_LEN
);

1040 uni⁄ {
c
[64]; 
s
[32];} 
rombuf
;

1041 
i
;

1043 
i
=0; i<32; i++){

1044 
rombuf
.
s
[
i
] = 
	`ìgë16
–
sc
->
ba£
 + 
memCSR9
, i);

1046 #i‡
	`deföed
(
__i386__
)

1047 
i
=0 ; i<(
ETHER_ADDR_LEN
/2); i++){

1048 
sc
->
¨pcom
.
ac_íaddr
[2*
i
] = 
rombuf
.
c
[20+2*i+1];

1049 
sc
->
¨pcom
.
ac_íaddr
[2*
i
+1] = 
rombuf
.
c
[20+2*i];

1052 #i‡
	`deföed
(
__PPC__
)

1053 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
rombuf
.
c
+20, 
ETHER_ADDR_LEN
);

1057 i‡(
c⁄fig
->
mtu
)

1058 
mtu
 = 
c⁄fig
->mtu;

1060 
mtu
 = 
ETHERMTU
;

1062 
sc
->
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

1070 
iÂ
->
if_so·c
 = 
sc
;

1071 
iÂ
->
if_unô
 = 
unôNumbî
;

1072 
iÂ
->
if_«me
 = 
unôName
;

1073 
iÂ
->
if_mtu
 = 
mtu
;

1074 
iÂ
->
if_öô
 = 
dec21140_öô
;

1075 
iÂ
->
if_io˘l
 = 
dec21140_io˘l
;

1076 
iÂ
->
if_°¨t
 = 
dec21140_°¨t
;

1077 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

1078 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

1079 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

1080 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

1085 
	`if_©èch
 (
iÂ
);

1086 
	`ëhî_iÁâach
 (
iÂ
);

1088 #ifde‡
DEC_DEBUG


1089 
	`¥ötk
( "dec2114x : driveráttached\n" );

1095 i‡(
txD´m⁄Tid
 == 0)

1097 
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
( "DCrx", 4096,

1098 
dec21140_rxD´m⁄
, 
NULL
);

1100 
txD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
( "DCtx", 4096,

1101 
dec21140_txD´m⁄
, 
NULL
);

1102 #ifde‡
DEC_DEBUG


1103 
	`¥ötk
( "dec2114x : driverÅasks created\n" );

1108 
	}
};

	@src/libchip/network/dwmac-1000-core.c

23 
	~<as£π.h
>

24 
	~"dwmac-c‹e.h
"

25 
	~"dwmac-comm⁄.h
"

27 
	#DWMAC_1000_CORE_DEBUG


	)

30 #ifde‡
DWMAC_1000_CORE_DEBUG


31 
	#DWMAC_1000_CORE_PRINT_DBG
–
fmt
, 
¨gs
 ... ) 
	`¥ötk
–fmt, ##árg†)

	)

33 
	#DWMAC_1000_CORE_PRINT_DBG
–
fmt
, 
¨gs
 ... ) dÿ{ }  0 )

	)

36 
	#DWMAC_1000_CORE_INIT
 \

38 –
MACGRP_MAC_CONFIGURATION_JD
 \

39 | 
MACGRP_MAC_CONFIGURATION_BE
 ) \

40 & ~
MACGRP_MAC_CONFIGURATION_PS
 \

41 )

	)

43 
	#DWMAC_1000_CORE_HASH_TABLE_SIZE
 256

	)

45 vﬁ©ûê
uöt32_t
 *
	$dwmac_1000_c‹e_gë_mac_addr_low
(

46 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

47 c⁄° 
mac_addr_ödex
 )

49 vﬁ©ûê
uöt32_t
 *
addr
 = 
NULL
;

51 
	`as£π
–
£lf
 !
NULL
 );

52 
	`as£π
–
mac_addr_ödex
 <= 127 );

54 i‡–
mac_addr_ödex
 > 15 ) {

55 
addr
 = &
£lf
->
macgΩ
->
mac_addr16_127
[
mac_addr_ödex
].
low
;

57 
addr
 = &
£lf
->
macgΩ
->
mac_addr0_15
[
mac_addr_ödex
].
low
;

60  
addr
;

61 
	}
}

63 vﬁ©ûê
uöt32_t
 *
	$dwmac_1000_c‹e_gë_mac_addr_high
(

64 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

65 c⁄° 
mac_addr_ödex
 )

67 vﬁ©ûê
uöt32_t
 *
addr
 = 
NULL
;

69 
	`as£π
–
£lf
 !
NULL
 );

70 
	`as£π
–
mac_addr_ödex
 <= 127 );

72 i‡–
mac_addr_ödex
 > 15 ) {

73 
addr
 = &
£lf
->
macgΩ
->
mac_addr16_127
[
mac_addr_ödex
].
high
;

75 
addr
 = &
£lf
->
macgΩ
->
mac_addr0_15
[
mac_addr_ödex
].
high
;

78  
addr
;

79 
	}
}

81 
	$dwmac_1000_c‹e_öô
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

83 
uöt32_t
 
vÆue
 = 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
;

85 
vÆue
 |
DWMAC_1000_CORE_INIT
;

87 i‡––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_RXTYP1COE
 ) != 0

88 || ( 
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_RXTYP2COE
 ) != 0 ) {

90 
vÆue
 |
MACGRP_MAC_CONFIGURATION_IPC
;

94 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_JE
;

95 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_TWOKPE
;

96 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
 = 
vÆue
;

99 
£lf
->
macgΩ
->
öãºu±_mask
 =

100 
MACGRP_INTERRUPT_MASK_RGSMIIIM


101 | 
MACGRP_INTERRUPT_MASK_PCSLCHGIM


102 | 
MACGRP_INTERRUPT_MASK_PCSANCIM


103 | 
MACGRP_INTERRUPT_MASK_TSIM
;

106 
£lf
->
macgΩ
->
mmc_ª˚ive_öãºu±_mask
 = ( 
uöt32_t
 ) ~0L;

107 
£lf
->
macgΩ
->
mmc_å™smô_öãºu±_mask
 = ( 
uöt32_t
 ) ~0L;

108 
£lf
->
macgΩ
->
mmc_ùc_ª˚ive_öãºu±_mask
 = ( 
uöt32_t
 ) ~0L;

109 
	}
}

111 
	$dwmac_1000_c‹e_£t_umac_addr
(

112 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

113 c⁄° 
uöt8_t
 *
addr
,

114 
ªg_n
 )

116 
	`dwmac_c‹e_£t_mac_addr
(

117 
addr
,

118 
	`dwmac_1000_c‹e_gë_mac_addr_high
–
£lf
, 
ªg_n
 ),

119 
	`dwmac_1000_c‹e_gë_mac_addr_low
–
£lf
, 
ªg_n
 )

121 
	}
}

123 
	$dwmac_1000_c‹e_£t_hash_fûãr
(

124 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

125 c⁄° 
boﬁ
 
add
,

126 
i‰eq
 *
i‰
 )

128 
ío
 = 0;

129 
¨pcom
 *
ac
 = &
£lf
->arpcom;

131 i‡–
add
 ) {

132 
ío
 = 
	`ëhî_addmu…i
–
i‰
, 
ac
 );

134 
ío
 = 
	`ëhî_dñmu…i
–
i‰
, 
ac
 );

137 i‡–
ío
 =
ENETRESET
 ) {

138 
ëhî_mu…i°ï
 
°ï
;

139 
ëhî_mu…i
 *
ím
;

140 
num_mu…i
 = 0;

141 
ödex
;

143 
	`ETHER_FIRST_MULTI
–
°ï
, 
ac
, 
ím
 );

145  
ím
 !
NULL
 ) {

147 
uöt64_t
 
addæo
 = 0;

148 
uöt64_t
 
addrhi
 = 0;

150 
	`mem˝y
–&
addæo
, 
ím
->
ím_addæo
, 
ETHER_ADDR_LEN
 );

151 
	`mem˝y
–&
addrhi
, 
ím
->
ím_addrhi
, 
ETHER_ADDR_LEN
 );

152 
num_mu…i
 +1U + (
uöt32_t
Ë–
addrhi
 - 
addæo
 );

155 i‡–
num_mu…i
 > 
DWMAC_1000_CORE_HASH_TABLE_SIZE
 ) {

159  
ödex
 = 0; index < 8; ++index ) {

160 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[
ödex
] = 0xffffffff;

163 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 |
MACGRP_MAC_FRAME_FILTER_PM
;

164 } i‡–
num_mu…i
 > 0 ) {

165 
uöt32_t
 
hash_shadow
[8] = {0, 0, 0, 0, 0, 0, 0, 0};

166 
	`ETHER_FIRST_MULTI
–
°ï
, 
ac
, 
ím
 );

168  
ím
 !
NULL
 ) {

169 
uöt64_t
 
addæo
 = 0;

170 
uöt64_t
 
addrhi
 = 0;

172 
	`mem˝y
–&
addæo
, 
ím
->
ím_addæo
, 
ETHER_ADDR_LEN
 );

173 
	`mem˝y
–&
addrhi
, 
ím
->
ím_addrhi
, 
ETHER_ADDR_LEN
 );

175  
addæo
 <
addrhi
 ) {

177 
uöt32_t
 
¸c
 = 
	`ëhî_¸c32_be
–(
uöt8_t
 *Ë&
addæo
, 
ETHER_ADDR_LEN
 );

182 
uöt32_t
 
ödex_ªg
 = ( 
¸c
 >> 29 ) & 0x7;

183 
uöt32_t
 
ödex_bô
 = ( 
¸c
 >> 24 ) & 0x1f;

185 
hash_shadow
[
ödex_ªg
] |1U << 
ödex_bô
;

186 ++
addæo
;

189 
	`ETHER_NEXT_MULTI
–
°ï
, 
ím
 );

192  
ödex
 = 0; index < 8; ++index ) {

193 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[
ödex
] = 
hash_shadow
[index];

197 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 |
MACGRP_MAC_FRAME_FILTER_HMC
;

200  
ödex
 = 0; index < 8; ++index ) {

201 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[
ödex
] = 0x00000000;

205 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 |
MACGRP_MAC_FRAME_FILTER_HMC
;

208 
	`DWMAC_1000_CORE_PRINT_DBG
(

210 
£lf
->
macgΩ
->
mac_‰ame_fûãr


212 
	`DWMAC_1000_CORE_PRINT_DBG
(

222 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[0],

223 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[1],

224 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[2],

225 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[3],

226 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[4],

227 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[5],

228 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[6],

229 
£lf
->
macgΩ
->
hash_èbÀ_ªg
[7]

232 
	}
}

234 c⁄° 
dwmac_comm⁄_c‹e_›s
 
	gdwmac_c‹e_›s_1000
 = {

235 .
c‹e_öô
 = 
dwmac_1000_c‹e_öô
,

236 .
	g£t_hash_fûãr
 = 
dwmac_1000_c‹e_£t_hash_fûãr
,

237 .
	g£t_umac_addr
 = 
dwmac_1000_c‹e_£t_umac_addr
,

	@src/libchip/network/dwmac-1000-dma.c

23 
	~<î∫o.h
>

24 
	~"dwmac-c‹e.h
"

25 
	~"dwmac-comm⁄.h
"

28 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_64
 = 0x00000000,

29 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_128
 = 0x00004000,

30 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_192
 = 0x00008000,

31 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_256
 = 0x0000c000,

32 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_40
 = 0x00010000,

33 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_32
 = 0x00014000,

34 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_24
 = 0x00018000,

35 
	mDWMAC100_OPERATION_MODE_TTC_CONTROL_16
 = 0x0001c000,

36 } 
	tdwmac1000_›î©i⁄_mode_âc_c⁄åﬁ
;

39 
	mDWMAC100_OPERATION_MODE_RTC_CONTROL_64
 = 0x00000000,

40 
	mDWMAC100_OPERATION_MODE_RTC_CONTROL_32
 = 0x00000008,

41 
	mDWMAC100_OPERATION_MODE_RTC_CONTROL_96
 = 0x00000010,

42 
	mDWMAC100_OPERATION_MODE_RTC_CONTROL_128
 = 0x00000018,

43 } 
	tdwmac1000_›î©i⁄_mode_πc_c⁄åﬁ
;

45 
	$dwmac1000_dma_öô
(

46 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

47 c⁄° 
uöt32_t
 
pbl
,

48 c⁄° 
uöt32_t
 
fb
,

49 c⁄° 
uöt32_t
 
mb
,

50 c⁄° 
boﬁ
 
u£_íh™˚d_desc
,

51 c⁄° 
uöt32_t
 
bur°_Àn_4_suµ‹t
,

52 c⁄° 
uöt32_t
 
bur°_Àn_8_suµ‹t
,

53 c⁄° 
uöt32_t
 
bur°_Àn_16_suµ‹t
,

54 c⁄° 
uöt32_t
 
bur°_bound¨y
,

55 vﬁ©ûê
dwmac_desc
 *
dma_tx
,

56 vﬁ©ûê
dwmac_desc
 *
dma_rx
 )

58 
ío
 = 0;

59 
uöt32_t
 
vÆue
 = 
£lf
->
dmagΩ
->
bus_mode
;

60 
limô
 = 10;

64 
vÆue
 |
DMAGRP_BUS_MODE_SWR
;

65 
£lf
->
dmagΩ
->
bus_mode
 = 
vÆue
;

67  
limô
-- ) {

68 i‡–!–
£lf
->
dmagΩ
->
bus_mode
 & 
DMAGRP_BUS_MODE_SWR
 ) )

71 
	`πems_èsk_wake_a·î
–
	`πems_˛ock_gë_ticks_≥r_£c⁄d
() / 100 );

74 i‡–
limô
 < 0 ) {

75 
ío
 = 
EBUSY
;

80 i‡–
pbl
 >
DWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_8
 ) {

81 
vÆue
 =

82 
	`DMAGRP_BUS_MODE_PBL
––
pbl
 + 1 ) / 8 ) | 
	`DMAGRP_BUS_MODE_RPBL
(

83 –
pbl
 + 1 ) / 8 ) | 
DMAGRP_BUS_MODE_EIGHTXPBL
;

85 
vÆue
 = 
	`DMAGRP_BUS_MODE_PBL
–
pbl
 + 1 ) | 
	`DMAGRP_BUS_MODE_RPBL
(Öbl + 1 );

89 i‡–
fb
 ) {

90 
vÆue
 |
DMAGRP_BUS_MODE_FB
;

94 i‡–
mb
 ) {

95 
vÆue
 |
DMAGRP_BUS_MODE_MB
;

98 i‡–
u£_íh™˚d_desc
 ) {

99 
vÆue
 |
DMAGRP_BUS_MODE_ATDS
;

102 
£lf
->
dmagΩ
->
bus_mode
 = 
vÆue
;

120 
vÆue
 = 
£lf
->
dmagΩ
->
axi_bus_mode
;

122 i‡–
bur°_Àn_4_suµ‹t
 ) {

123 
vÆue
 |
DMAGRP_AXI_BUS_MODE_BLEND4
;

125 
vÆue
 &~
DMAGRP_AXI_BUS_MODE_BLEND4
;

128 i‡–
bur°_Àn_8_suµ‹t
 ) {

129 
vÆue
 |
DMAGRP_AXI_BUS_MODE_BLEND8
;

131 
vÆue
 &~
DMAGRP_AXI_BUS_MODE_BLEND8
;

134 i‡–
bur°_Àn_16_suµ‹t
 ) {

135 
vÆue
 |
DMAGRP_AXI_BUS_MODE_BLEND16
;

137 
vÆue
 &~
DMAGRP_AXI_BUS_MODE_BLEND16
;

140 i‡–
bur°_bound¨y
 ) {

141 
vÆue
 |
DMAGRP_AXI_BUS_MODE_ONEKBBE
;

143 
vÆue
 &~
DMAGRP_AXI_BUS_MODE_ONEKBBE
;

146 
£lf
->
dmagΩ
->
axi_bus_mode
 = 
vÆue
;

149 
	`dwmac_c‹e_íabÀ_dma_úq_rx
–
£lf
 );

150 
	`dwmac_c‹e_íabÀ_dma_úq_tx_deÁu…
–
£lf
 );

154 
£lf
->
dmagΩ
->
å™smô_des¸_li°_addr
 = (
uöçå_t
Ë&
dma_tx
[0];

155 
£lf
->
dmagΩ
->
ª˚ive_des¸_li°_addr
 = (
uöçå_t
Ë&
dma_rx
[0];

158  
ío
;

159 
	}
}

161 
	$dwmac1000_dma_›î©i⁄_mode
(

162 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

163 c⁄° 
txmode
,

164 c⁄° 
rxmode
 )

166 
uöt32_t
 
vÆue
 = 
£lf
->
dmagΩ
->
›î©i⁄_mode
;

169 i‡–
txmode
 =
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD
 ) {

171 
vÆue
 |
DMAGRP_OPERATION_MODE_TSF
;

175 
vÆue
 |
DMAGRP_OPERATION_MODE_OSF
;

177 
vÆue
 &~
DMAGRP_OPERATION_MODE_TSF
;

178 
vÆue
 &~
	`DMAGRP_OPERATION_MODE_TTC_GET
( value );

181 i‡–
txmode
 <= 32 ) {

182 
vÆue
 |
	`DMAGRP_OPERATION_MODE_TTC_SET
(

183 
vÆue
,

184 
DWMAC100_OPERATION_MODE_TTC_CONTROL_32


186 } i‡–
txmode
 <= 64 ) {

187 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_TTC_SET
(

188 
vÆue
,

189 
DWMAC100_OPERATION_MODE_TTC_CONTROL_64


191 } i‡–
txmode
 <= 128 ) {

192 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_TTC_SET
(

193 
vÆue
,

194 
DWMAC100_OPERATION_MODE_TTC_CONTROL_128


196 } i‡–
txmode
 <= 192 ) {

197 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_TTC_SET
(

198 
vÆue
,

199 
DWMAC100_OPERATION_MODE_TTC_CONTROL_192


202 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_TTC_SET
(

203 
vÆue
,

204 
DWMAC100_OPERATION_MODE_TTC_CONTROL_256


209 i‡–
rxmode
 =
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD
 ) {

210 
vÆue
 |
DMAGRP_OPERATION_MODE_RSF
;

212 
vÆue
 &~
DMAGRP_OPERATION_MODE_RSF
;

213 
vÆue
 &
	`DMAGRP_OPERATION_MODE_RTC_GET
( value );

215 i‡–
rxmode
 <= 32 ) {

216 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_RTC_SET
(

217 
vÆue
,

218 
DWMAC100_OPERATION_MODE_RTC_CONTROL_32


220 } i‡–
rxmode
 <= 64 ) {

221 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_RTC_SET
(

222 
vÆue
,

223 
DWMAC100_OPERATION_MODE_RTC_CONTROL_64


225 } i‡–
rxmode
 <= 96 ) {

226 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_RTC_SET
(

227 
vÆue
,

228 
DWMAC100_OPERATION_MODE_RTC_CONTROL_96


231 
vÆue
 = 
	`DMAGRP_OPERATION_MODE_RTC_SET
(

232 
vÆue
,

233 
DWMAC100_OPERATION_MODE_RTC_CONTROL_128


238 
£lf
->
dmagΩ
->
›î©i⁄_mode
 = 
vÆue
;

239 
	}
}

241 c⁄° 
dwmac_comm⁄_dma_›s
 
	gdwmac_dma_›s_1000
 = {

242 .
öô
 = 
dwmac1000_dma_öô
,

243 .
	gdma_mode
 = 
dwmac1000_dma_›î©i⁄_mode
,

	@src/libchip/network/dwmac-1000-ethernet-mac-ops.c

24 
	~"dwmac-comm⁄.h
"

26 c⁄° 
dwmac_comm⁄_dma_›s
 
dwmac_dma_›s_1000
;

27 c⁄° 
dwmac_comm⁄_c‹e_›s
 
dwmac_c‹e_›s_1000
;

29 c⁄° 
dwmac_ëhî√t_mac_›s
 
	gDWMAC_1000_ETHERNET_MAC_OPS
 =

30 
DWMAC_ETHERNET_MAC_OPS_INITIALIZER
(

31 &
dwmac_c‹e_›s_1000
,

32 &
dwmac_dma_›s_1000


	@src/libchip/network/dwmac-common.h

19 #i‚de‡
DWMAC_COMMON_H_


20 
	#DWMAC_COMMON_H_


	)

22 
	#__INSIDE_RTEMS_BSD_TCPIP_STACK__
 1

	)

23 
	#__BSD_VISIBLE
 1

	)

25 
	~<°döt.h
>

26 
	~<πems.h
>

27 
	~<πems/πems_bsd√t.h
>

28 
	~<πems/πems_mii_io˘l.h
>

30 
	~<sys/∑øm.h
>

31 
	~<sys/sockë.h
>

32 
	~<sys/sockio.h
>

33 
	~<sys/mbuf.h
>

35 
	~<√t/if.h
>

36 
	~<√t/if_¨p.h
>

37 
	~<√töë/ö.h
>

38 
	~<√töë/if_ëhî.h
>

39 
	~<√töë/ö_sy°m.h
>

40 
	~<√töë/ù.h
>

42 
	~<libchù/dwmac.h
>

43 
	~"dwmac-desc.h
"

44 
	~"dwmac-ªgs.h
"

46 #ifde‡
__˝lu•lus


50 
	#DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD
 1

	)

54 
	#DWMAC_COMMON_EVENT_TASK_INIT
 
RTEMS_EVENT_1


	)

55 
	#DWMAC_COMMON_EVENT_TASK_STOP
 
RTEMS_EVENT_2


	)

58 
	#DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME
 
RTEMS_EVENT_3


	)

59 
	#DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED
 
RTEMS_EVENT_4


	)

60 
	#DWMAC_COMMON_EVENT_TX_BUMP_UP_DMA_THRESHOLD
 
RTEMS_EVENT_5


	)

61 
	#DWMAC_COMMON_EVENT_TX_PHY_STATUS_CHANGE
 
RTEMS_EVENT_6


	)

64 
	#DWMAC_COMMON_EVENT_RX_FRAME_RECEIVED
 
RTEMS_EVENT_3


	)

66 #ifde‡
__ARM_ARCH_7A__


67 
	#DWMAC_COMMON_DSB
(Ë
	`_ARM_D©a_synchr⁄iz©i⁄_b¨rõr
()

	)

69 
	#DWMAC_COMMON_DSB
()

	)

73 
dwmac_comm⁄_c‹e_›s
 
	tdwmac_comm⁄_c‹e_›s
;

74 
dwmac_comm⁄_dma_›s
 
	tdwmac_comm⁄_dma_›s
;

75 
dwmac_comm⁄_desc_›s
 
	tdwmac_comm⁄_desc_›s
;

78 
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
,

79 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
,

80 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
,

81 
DWMAC_COMMON_RX_FRAME_STATUS_LLC_SNAP


82 } 
	tdwmac_comm⁄_rx_‰ame_°©us
;

85 
DWMAC_COMMON_STATE_DOWN
,

86 
DWMAC_COMMON_STATE_UP
,

88 
DWMAC_COMMON_STATE_COUNT


89 } 
	tdwmac_comm⁄_°©e
;

92 
uöt32_t
 
lök_down
;

93 
uöt32_t
 
lök_up
;

94 } 
	tdwmac_comm⁄_phy_°©us_cou¡s
;

97 
uöt32_t
 
ª˚ive
;

98 
uöt32_t
 
å™smô
;

99 
uöt32_t
 
tx_undîÊow
;

100 
uöt32_t
 
tx_jabbî
;

101 
uöt32_t
 
rx_ovîÊow
;

102 
uöt32_t
 
rx_óæy
;

103 
uöt32_t
 
rx_buf_u«v
;

104 
uöt32_t
 
rx_¥o˚ss_°›≥d
;

105 
uöt32_t
 
rx_w©chdog
;

106 
uöt32_t
 
tx_óæy
;

107 
uöt32_t
 
tx_buf_u«v
;

108 
uöt32_t
 
tx_¥o˚ss_°›≥d
;

109 
uöt32_t
 
Áèl_bus_îr‹
;

110 
uöt32_t
 
unh™dÀd
;

111 } 
	tdwmac_comm⁄_dma_úq_cou¡s
;

114 
uöt32_t
 
de°_addr_Áû
;

115 
uöt32_t
 
¸c_îr‹
;

117 
uöt32_t
 
ª˚ive_îr‹
;

119 
uöt32_t
 
w©chdog_timeout
;

121 
uöt32_t
 
œã_cﬁlisi⁄
;

122 
uöt32_t
 
gü¡_‰ame
;

130 
uöt32_t
 
ovîÊow_îr‹
;

134 
uöt32_t
 
des¸ùt‹_îr‹
;

137 
uöt32_t
 
sour˚_addr_Áû
;

138 
uöt32_t
 
Àngth_îr‹
;

140 
uöt32_t
 
vœn_èg
;

143 
uöt32_t
 
ëhî√t_‰ames
;

146 
uöt32_t
 
dribbÀ_bô_îr‹
;

148 } 
	tdwmac_comm⁄_desc_°©us_cou¡s_rx
;

151 
uöt32_t
 
jabbî
;

153 
uöt32_t
 
‰ame_Êushed
;

155 
uöt32_t
 
lossˇºõr
;

158 
uöt32_t
 
no_ˇºõr
;

159 
uöt32_t
 
ex˚ssive_cﬁlisi⁄s
;

162 
uöt32_t
 
ex˚ssive_de„ºÆ
;

165 
uöt32_t
 
undîÊow
;

169 
uöt32_t
 
ù_hódî_îr‹
;

175 
uöt32_t
 
∑ylﬂd_îr‹
;

178 
uöt32_t
 
de„ºed
;

180 
uöt32_t
 
vœn
;

181 } 
	tdwmac_comm⁄_desc_°©us_cou¡s_tx
;

184 
uöt32_t
 
îr‹s
;

185 
uöt32_t
 
dr›≥d
;

186 
uöt32_t
 
‰ames_good
;

187 
uöt32_t
 
byãs_good
;

188 
uöt32_t
 
‰ames
;

189 
uöt32_t
 
dma_su•íded
;

190 } 
	tdwmac_comm⁄_rx_‰ame_cou¡s
;

193 
uöt32_t
 
‰ames_‰om_°ack
;

194 
uöt32_t
 
‰ames_to_dma
;

195 
uöt32_t
 
∑ckës_to_dma
;

196 
uöt32_t
 
byãs_to_dma
;

197 
uöt32_t
 
∑ckë_îr‹s
;

198 
uöt32_t
 
∑ckës_å™môãd_by_DMA
;

199 } 
	tdwmac_comm⁄_tx_‰ame_cou¡s
;

202 
dwmac_comm⁄_phy_°©us_cou¡s
 
phy_°©us_cou¡s
;

203 
dwmac_comm⁄_dma_úq_cou¡s
 
dma_úq_cou¡s
;

204 
dwmac_comm⁄_desc_°©us_cou¡s_rx
 
desc_°©us_cou¡s_rx
;

205 
dwmac_comm⁄_desc_°©us_cou¡s_tx
 
desc_°©us_cou¡s_tx
;

206 
dwmac_comm⁄_rx_‰ame_cou¡s
 
‰ame_cou¡s_rx
;

207 
dwmac_comm⁄_tx_‰ame_cou¡s
 
‰ame_cou¡s_tx
;

208 } 
	tdwmac_comm⁄_°©s
;

211 
¨pcom
árpcom;

212 
πems_bsd√t_ifc⁄fig
 *
bsd_c⁄fig
;

213 
πems_mdio_öfo
 
mdio
;

214 
πems_id
 
èsk_id_rx
;

215 
πems_id
 
èsk_id_tx
;

216 
πems_id
 
èsk_id_c⁄åﬁ
;

217 *
¨g
;

218 vﬁ©ûê
macgΩ
 *macgrp;

219 vﬁ©ûê
dmagΩ
 *dmagrp;

220 
c§_˛ock
;

221 
dwmac_comm⁄_°©e
 
°©e
;

222 
dwmac_comm⁄_°©s
 
°©s
;

223 
dma_thªshﬁd_c⁄åﬁ
;

224 vﬁ©ûê
dwmac_desc
 *
dma_tx
;

225 vﬁ©ûê
dwmac_desc
 *
dma_rx
;

226 
idx_rx
;

227 
mbuf
 **
mbuf_addr_rx
;

228 
mbuf
 **
mbuf_addr_tx
;

229 c⁄° 
dwmac_cfg
 *
CFG
;

230 
MDIO_BUS_ADDR
;

231 } 
	tdwmac_comm⁄_c⁄ãxt
;

233 
	sdwmac_comm⁄_c‹e_›s
 {

235 (*
c‹e_öô
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

238 (*
£t_hash_fûãr
) (

239 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

240 c⁄° 
boﬁ
 
add
,

241 
i‰eq
 *
i‰
 );

244 (*
£t_umac_addr
) (

245 
dwmac_comm⁄_c⁄ãxt
 *
iﬂddr
,

246 c⁄° *
addr
,

247 c⁄° 
ªg_n
 );

250 
	sdwmac_comm⁄_dma_›s
 {

252 (*
öô
) (

253 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

254 c⁄° 
uöt32_t
 
pbl
,

255 c⁄° 
uöt32_t
 
fb
,

256 c⁄° 
uöt32_t
 
mb
,

257 c⁄° 
boﬁ
 
u£_íh™˚d_desc
,

258 c⁄° 
uöt32_t
 
bur°_Àn_4_suµ‹t
,

259 c⁄° 
uöt32_t
 
bur°_Àn_8_suµ‹t
,

260 c⁄° 
uöt32_t
 
bur°_Àn_16_suµ‹t
,

261 c⁄° 
uöt32_t
 
bur°_bound¨y
,

262 vﬁ©ûê
dwmac_desc
 *
dma_tx
,

263 vﬁ©ûê
dwmac_desc
 *
dma_rx
 );

267 (*
dma_mode
) (

268 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

269 c⁄° 
txmode
,

270 c⁄° 
rxmode
 );

273 
	sdwmac_comm⁄_desc_›s
 {

275 (*
vÆid©e
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

276 
boﬁ
 (*
u£_íh™˚d_descs
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

279 (*
¸óã_rx_desc
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

282 (*
¸óã_tx_desc
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

285 (*
de°roy_rx_desc
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

288 (*
de°roy_tx_desc
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

291 (*
öô_rx_desc
) (

292 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

293 c⁄° 
ödex
 );

296 (*
öô_tx_desc
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

299 (*
ªÀa£_rx_bufs
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

302 
mbuf
 *(*
Æloc_d©a_buf
)–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

305 (*
ªÀa£_tx_bufs
Ë–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

308 (*
¥ï¨e_tx_desc
) (

309 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

310 c⁄° 
idx
,

311 c⁄° 
boﬁ
 
is_fú°
,

312 c⁄° 
size_t
 
Àn
,

313 c⁄° *
pd©a
 );

316 (*
ªÀa£_tx_ow√rshù
) (

317 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

318 c⁄° 
idx_tx
 );

319 
boﬁ
 (*
am_i_tx_ow√r
) (

320 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

321 c⁄° 
idx_tx
 );

324 (*
˛o£_tx_desc
) (

325 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

326 c⁄° 
idx_tx
 );

329 (*
ªÀa£_tx_desc
) (

330 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

331 c⁄° 
idx_tx
 );

334 (*
gë_tx_ls
) (

335 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

336 c⁄° 
idx_tx
 );

339 (*
tx_°©us
) (

340 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

341 c⁄° 
idx_tx
 );

344 
boﬁ
 (*
am_i_rx_ow√r
) (

345 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

346 c⁄° 
desc_idx
 );

349 
size_t
 (*
gë_rx_‰ame_Àn
) (

350 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

351 c⁄° 
desc_idx
 );

354 
dwmac_comm⁄_rx_‰ame_°©us
 (*
rx_°©us
) (

355 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

356 c⁄° 
desc_idx
 );

357 
boﬁ
 (*
is_fú°_rx_£gmít
) (

358 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

359 c⁄° 
des¸ùt‹_ödex
 );

360 
boﬁ
 (*
is_œ°_rx_£gmít
) (

361 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

362 c⁄° 
des¸ùt‹_ödex
 );

363 (*
¥öt_tx_desc
) (

364 vﬁ©ûê
dwmac_desc
 *
p
,

365 c⁄° 
cou¡
 );

366 (*
¥öt_rx_desc
) (

367 vﬁ©ûê
dwmac_desc
 *
p
,

368 c⁄° 
cou¡
 );

371 #ifde‡
__˝lu•lus


	@src/libchip/network/dwmac-core.c

24 
	~"dwmac-c‹e.h
"

25 
	~"dwmac-comm⁄.h
"

26 
	~"dwmac-ªgs.h
"

28 #unde‡
DWMAC_CORE_DEBUG


29 #ifde‡
DWMAC_CORE_DEBUG


30 
	#DWMAC_CORE_PRINT_DBG
–
fmt
, 
¨gs
 ... ) 
	`¥ötk
–fmt, ##árg†)

	)

32 
	#DWMAC_CORE_PRINT_DBG
–
fmt
, 
¨gs
 ... ) dÿ{ }  0 )

	)

36 
	#DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_RX
 \

38 
DMAGRP_INTERRUPT_ENABLE_NIE
 \

39 | 
DMAGRP_INTERRUPT_ENABLE_RIE
 \

40 )

	)

41 
	#DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_TX
 \

43 
DMAGRP_INTERRUPT_ENABLE_NIE
 \

44 | 
DMAGRP_INTERRUPT_ENABLE_FBE
 \

45 | 
DMAGRP_INTERRUPT_ENABLE_UNE
 \

46 | 
DMAGRP_INTERRUPT_ENABLE_AIE
 \

47 )

	)

49 
	#DWMAC_CORE_INTR_ENABLE_ALL_MASK_TX
 \

51 
DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_TX
 \

52 | 
DMAGRP_INTERRUPT_ENABLE_TIE
 \

53 )

	)

55 
	#DWMAC_CORE_INTR_STATUS_DEFAULT_MASK_RX
 \

57 
DMAGRP_STATUS_NIS
 \

58 | 
DMAGRP_STATUS_RI
 \

59 )

	)

60 
	#DWMAC_CORE_INTR_STATUS_DEFAULT_MASK_TX
 \

62 
DMAGRP_STATUS_NIS
 \

63 | 
DMAGRP_STATUS_TI
 \

64 | 
DMAGRP_STATUS_FBI
 \

65 | 
DMAGRP_STATUS_UNF
 \

66 | 
DMAGRP_STATUS_AIS
 \

67 )

	)

70 
	$dwmac_c‹e_dma_ª°¨t_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

72 
£lf
->
dmagΩ
->
å™smô_pﬁl_dem™d
 = 1;

73 
	}
}

75 
	$dwmac_c‹e_íabÀ_dma_úq_tx_deÁu…
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

77 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 |
DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_TX
;

78 
	}
}

80 
	$dwmac_c‹e_íabÀ_dma_úq_tx_å™smôãd
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

82 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 |
DMAGRP_INTERRUPT_ENABLE_TIE
;

83 
	}
}

85 
	$dwmac_c‹e_íabÀ_dma_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

87 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 |
DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_RX
;

88 
	}
}

90 
	$dwmac_c‹e_dißbÀ_dma_úq_tx_Æl
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

92 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 &~
DWMAC_CORE_INTR_ENABLE_ALL_MASK_TX
;

93 
	}
}

95 
	$dwmac_c‹e_dißbÀ_dma_úq_tx_å™smôãd
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

97 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 &~
DMAGRP_INTERRUPT_ENABLE_TIE
;

98 
	}
}

100 
	$dwmac_c‹e_ª£t_dma_úq_°©us_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

102 
£lf
->
dmagΩ
->
°©us
 = 
DWMAC_CORE_INTR_STATUS_DEFAULT_MASK_TX
;

103 
	}
}

105 
	$dwmac_c‹e_ª£t_dma_úq_°©us_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

107 
£lf
->
dmagΩ
->
°©us
 = 
DWMAC_CORE_INTR_STATUS_DEFAULT_MASK_RX
;

108 
	}
}

110 
	$dwmac_c‹e_dißbÀ_dma_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

112 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 &~
DWMAC_CORE_INTR_ENABLE_DEFAULT_MASK_RX
;

113 
	}
}

115 
	$dwmac_c‹e_dma_°¨t_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

117 
£lf
->
dmagΩ
->
›î©i⁄_mode
 |
DMAGRP_OPERATION_MODE_ST
;

118 
	}
}

120 
	$dwmac_c‹e_dma_°›_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

122 
£lf
->
dmagΩ
->
›î©i⁄_mode
 &~
DMAGRP_OPERATION_MODE_ST
;

123 
	}
}

125 
	$dwmac_c‹e_dma_°¨t_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

127 
£lf
->
dmagΩ
->
›î©i⁄_mode
 |
DMAGRP_OPERATION_MODE_SR
;

128 
	}
}

130 
	$dwmac_c‹e_dma_°›_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

132 
£lf
->
dmagΩ
->
›î©i⁄_mode
 &~
DMAGRP_OPERATION_MODE_SR
;

133 
	}
}

135 
	$dwmac_c‹e_dma_ª°¨t_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

137 
£lf
->
dmagΩ
->
ª˚ive_pﬁl_dem™d
 = 1;

138 
	}
}

140 #ifde‡
DWMAC_CORE_DEBUG


141 
	$show_tx_¥o˚ss_°©e
–c⁄° 
uöt32_t
 
°©us
 )

143 c⁄° 
uöt32_t
 
STATE
 = 
	`DMAGRP_STATUS_TS_GET
–
°©us
 );

146  
STATE
 ) {

148 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Stopped): Reset or Stop command\n" );

151 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Running):FetchingÅhe Tx desc\n" );

154 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Running): Waiting forÉnd ofÅx\n" );

157 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Running): ReadingÅhe data "

161 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Suspended): Tx Buff Underflow "

165 
	`DWMAC_CORE_PRINT_DBG
( "- TX (Running): Closing Tx descriptor\n" );

170 
	}
}

172 
	$show_rx_¥o˚ss_°©e
–c⁄° 
uöt32_t
 
°©us
 )

174 c⁄° 
uöt32_t
 
STATE
 = 
	`DMAGRP_STATUS_RS_GET
–
°©us
 );

177  
STATE
 ) {

179 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Stopped): Reset or Stop command\n" );

182 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Running): FetchingÅhe Rx desc\n" );

185 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Running):Checking forÉnd ofÖkt\n" );

188 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Running): Waiting for RxÖkt\n" );

191 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Suspended): Unavailable Rx buf\n" );

194 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Running): Closing Rx descriptor\n" );

197 
	`DWMAC_CORE_PRINT_DBG
( "- RX(Running): FlushingÅhe current frame"

201 
	`DWMAC_CORE_PRINT_DBG
( "- RX (Running): QueuingÅhe Rx frame"

207 
	}
}

210 
	#show_tx_¥o˚ss_°©e
–
°©us
 )

	)

211 
	#show_rx_¥o˚ss_°©e
–
°©us
 )

	)

214 
	$dwmac_c‹e_dma_öãºu±
–*
¨g
 )

216 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

217 
dwmac_comm⁄_dma_úq_cou¡s
 *
cou¡
 = &
£lf
->
°©s
.
dma_úq_cou¡s
;

218 
πems_evít_£t
 
evíts_ª˚ive
 = 0;

219 
πems_evít_£t
 
evíts_å™smô
 = 0;

222 
uöt32_t
 
úq_°©us
 = 
£lf
->
dmagΩ
->
°©us
 & sñf->dmagΩ->
öãºu±_íabÀ
;

223 
uöt32_t
 
úq_h™dÀd
 = 0;

224 
uöt32_t
 
úq_dißbÀ
 = 0;

227 
	`DWMAC_CORE_PRINT_DBG
–"%s: [CSR5: 0x%08x]\n", 
__func__
, 
úq_°©us
 );

230 
	`show_tx_¥o˚ss_°©e
–
£lf
->
dmagΩ
->
°©us
 );

231 
	`show_rx_¥o˚ss_°©e
–
£lf
->
dmagΩ
->
°©us
 );

234 i‡–
úq_°©us
 & 
DMAGRP_STATUS_AIS
 ) {

235 
	`DWMAC_CORE_PRINT_DBG
( "CSR5[15] DMA ABNORMAL IRQ: " );

237 i‡–
úq_°©us
 & 
DMAGRP_STATUS_UNF
 ) {

238 
	`DWMAC_CORE_PRINT_DBG
( "transmit underflow\n" );

239 
evíts_å™smô
 |
DWMAC_COMMON_EVENT_TX_BUMP_UP_DMA_THRESHOLD
;

240 
úq_h™dÀd
 |
DMAGRP_STATUS_UNF
;

241 
úq_dißbÀ
 |
DMAGRP_INTERRUPT_ENABLE_UNE
;

242 ++
cou¡
->
tx_undîÊow
;

245 i‡–
úq_°©us
 & 
DMAGRP_STATUS_TJT
 ) {

246 
	`DWMAC_CORE_PRINT_DBG
( "transmit jabber\n" );

247 
úq_h™dÀd
 |
DMAGRP_STATUS_TJT
;

248 ++
cou¡
->
tx_jabbî
;

251 i‡–
úq_°©us
 & 
DMAGRP_STATUS_OVF
 ) {

252 
	`DWMAC_CORE_PRINT_DBG
( "recv overflow\n" );

253 
úq_h™dÀd
 |
DMAGRP_STATUS_OVF
;

254 ++
cou¡
->
rx_ovîÊow
;

257 i‡–
úq_°©us
 & 
DMAGRP_STATUS_TU
 ) {

258 
	`DWMAC_CORE_PRINT_DBG
( "transmit buffer unavailable\n" );

259 
úq_h™dÀd
 |
DMAGRP_STATUS_TU
;

260 ++
cou¡
->
tx_buf_u«v
;

263 i‡–
úq_°©us
 & 
DMAGRP_STATUS_RU
 ) {

264 
	`DWMAC_CORE_PRINT_DBG
( "receive buffer unavailable\n" );

265 
úq_h™dÀd
 |
DMAGRP_STATUS_RU
;

266 ++
cou¡
->
rx_buf_u«v
;

269 i‡–
úq_°©us
 & 
DMAGRP_STATUS_RPS
 ) {

270 
	`DWMAC_CORE_PRINT_DBG
( "receiveÖrocess stopped\n" );

271 
úq_h™dÀd
 |
DMAGRP_STATUS_RPS
;

272 ++
cou¡
->
rx_¥o˚ss_°›≥d
;

275 i‡–
úq_°©us
 & 
DMAGRP_STATUS_RWT
 ) {

276 
	`DWMAC_CORE_PRINT_DBG
( "receive watchdog\n" );

277 
úq_h™dÀd
 |
DMAGRP_STATUS_RWT
;

278 ++
cou¡
->
rx_w©chdog
;

281 i‡–
úq_°©us
 & 
DMAGRP_STATUS_ETI
 ) {

282 
	`DWMAC_CORE_PRINT_DBG
( "transmitÉarly interrupt\n" );

283 
úq_h™dÀd
 |
DMAGRP_STATUS_ETI
;

284 ++
cou¡
->
tx_óæy
;

287 i‡–
úq_°©us
 & 
DMAGRP_STATUS_ERI
 ) {

288 
	`DWMAC_CORE_PRINT_DBG
( "receiveÉarly interrupt\n" );

289 
úq_h™dÀd
 |
DMAGRP_STATUS_ERI
;

290 ++
cou¡
->
rx_óæy
;

293 i‡–
úq_°©us
 & 
DMAGRP_STATUS_TPS
 ) {

294 
	`DWMAC_CORE_PRINT_DBG
( "transmitÖrocess stopped\n" );

295 
evíts_å™smô
 |
DWMAC_COMMON_EVENT_TASK_INIT
;

296 
úq_h™dÀd
 |
DMAGRP_STATUS_TPS
;

297 
úq_dißbÀ
 |
DMAGRP_INTERRUPT_ENABLE_TSE
;

298 ++
cou¡
->
tx_¥o˚ss_°›≥d
;

301 i‡–
úq_°©us
 & 
DMAGRP_STATUS_FBI
 ) {

302 
	`DWMAC_CORE_PRINT_DBG
( "fatal busÉrror\n" );

303 
evíts_å™smô
 |
DWMAC_COMMON_EVENT_TASK_INIT
;

304 
úq_h™dÀd
 |
DMAGRP_STATUS_FBI
;

305 
úq_dißbÀ
 |
DMAGRP_INTERRUPT_ENABLE_FBE
;

306 ++
cou¡
->
Áèl_bus_îr‹
;

309 
úq_h™dÀd
 |
DMAGRP_STATUS_AIS
;

313 i‡–
úq_°©us
 & 
DMAGRP_STATUS_NIS
 ) {

315 i‡–
úq_°©us
 & 
DMAGRP_STATUS_TI
 ) {

316 
evíts_å™smô
 |
DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED
;

317 
úq_h™dÀd
 |
DMAGRP_STATUS_TI
;

318 
úq_dißbÀ
 |
DMAGRP_INTERRUPT_ENABLE_TIE
;

319 ++
cou¡
->
å™smô
;

323 i‡–
úq_°©us
 & 
DMAGRP_STATUS_RI
 ) {

324 
evíts_ª˚ive
 |
DWMAC_COMMON_EVENT_RX_FRAME_RECEIVED
;

325 
úq_h™dÀd
 |
DMAGRP_STATUS_RI
;

326 
úq_dißbÀ
 |
DMAGRP_INTERRUPT_ENABLE_RIE
;

327 ++
cou¡
->
ª˚ive
;

330 
úq_h™dÀd
 |
DMAGRP_STATUS_NIS
;

334 i‡–
úq_°©us


335 & ( 
DMAGRP_STATUS_GMI
 | 
DMAGRP_STATUS_GLI
 ) ) {

336 
	`DWMAC_CORE_PRINT_DBG
–"%s: u√x≥˘ed sètu†%08x\n", 
__func__
,

337 
úq_°©us
 );

339 i‡–
úq_°©us
 & 
DMAGRP_STATUS_GMI
 ) {

340 
úq_h™dÀd
 |
DMAGRP_STATUS_GMI
;

341 ++
cou¡
->
unh™dÀd
;

344 i‡–
úq_°©us
 & 
DMAGRP_STATUS_GLI
 ) {

345 
úq_h™dÀd
 |
DMAGRP_STATUS_GLI
;

346 ++
cou¡
->
unh™dÀd
;

351 i‡––
úq_°©us
 & 0x1FFCF ) !
úq_h™dÀd
 ) {

352 ++
cou¡
->
unh™dÀd
;

357 
£lf
->
dmagΩ
->
öãºu±_íabÀ
 &~
úq_dißbÀ
;

360 
£lf
->
dmagΩ
->
°©us
 = 
úq_h™dÀd
;

363 i‡–
evíts_ª˚ive
 != 0 ) {

364 (Ë
	`πems_bsd√t_evít_£nd
–
£lf
->
èsk_id_rx
, 
evíts_ª˚ive
 );

368 i‡–
evíts_å™smô
 != 0 ) {

369 (Ë
	`πems_bsd√t_evít_£nd
–
£lf
->
èsk_id_tx
, 
evíts_å™smô
 );

372 
	`DWMAC_CORE_PRINT_DBG
( "\n\n" );

373 
	}
}

375 
	$dwmac_c‹e_dma_Êush_tx_fifo
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

377 
£lf
->
dmagΩ
->
›î©i⁄_mode
 |
DMAGRP_OPERATION_MODE_FTF
;

380 }  ( 
£lf
->
dmagΩ
->
›î©i⁄_mode
 & 
DMAGRP_OPERATION_MODE_FTF
 ) != 0 );

381 
	}
}

383 
	$dwmac_c‹e_£t_mac_addr
(

384 c⁄° 
uöt8_t
 
addr
[6],

385 vﬁ©ûê
uöt32_t
 *
ªg_high
,

386 vﬁ©ûê
uöt32_t
 *
ªg_low
 )

388 
uöt32_t
 
d©a
 = 
	`MAC_HIGH_ADDRHI
––
addr
[5] << 8 ) |áddr[4] );

395 
d©a
 |
MAC_HIGH_AE
;

396 *
ªg_high
 = 
d©a
;

398 
d©a
 =

399 –(
uöt32_t
Ë
addr
[3] << 24 )

400 | ( (
uöt32_t
Ë
addr
[2] << 16 )

401 | ( (
uöt32_t
Ë
addr
[1] << 8 )

402 | 
addr
[0];

403 *
ªg_low
 = 
d©a
;

404 
	}
}

407 
	$dwmac_c‹e_£t_mac
(

408 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

409 c⁄° 
boﬁ
 
íabÀ
 )

411 
uöt32_t
 
vÆue
 = 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
;

414 i‡–
íabÀ
 ) {

415 
vÆue
 |
MACGRP_MAC_CONFIGURATION_RE
 | 
MACGRP_MAC_CONFIGURATION_TE
;

417 
vÆue
 &~–
MACGRP_MAC_CONFIGURATION_RE
 | 
MACGRP_MAC_CONFIGURATION_TE
 );

420 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
 = 
vÆue
;

421 
	}
}

	@src/libchip/network/dwmac-core.h

25 #i‚de‡
DWMAC_CORE_H_


26 
	#DWMAC_CORE_H_


	)

28 
	~<°döt.h
>

29 
	~"dwmac-comm⁄.h
"

31 #ifde‡
__˝lu•lus


35 
dwmac_c‹e_£t_mac_addr
(

36 c⁄° 
uöt8_t
 
addr
[6],

37 vﬁ©ûê
uöt32_t
 *
ªg_high
,

38 vﬁ©ûê
uöt32_t
 *
ªg_low
 );

40 
dwmac_c‹e_£t_mac
(

41 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

42 c⁄° 
boﬁ
 
íabÀ
 );

44 
dwmac_c‹e_dma_°¨t_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

46 
dwmac_c‹e_dma_°›_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

48 
dwmac_c‹e_dma_°¨t_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

50 
dwmac_c‹e_dma_°›_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

52 
dwmac_c‹e_dma_ª°¨t_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

54 
dwmac_c‹e_dma_ª°¨t_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

56 
dwmac_c‹e_íabÀ_dma_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

58 
dwmac_c‹e_íabÀ_dma_úq_tx_deÁu…
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

60 
dwmac_c‹e_íabÀ_dma_úq_tx_å™smôãd
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

62 
dwmac_c‹e_dißbÀ_dma_úq_tx_Æl
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

64 
dwmac_c‹e_dißbÀ_dma_úq_tx_å™smôãd
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

66 
dwmac_c‹e_dißbÀ_dma_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

68 
dwmac_c‹e_ª£t_dma_úq_°©us_tx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

70 
dwmac_c‹e_ª£t_dma_úq_°©us_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

72 
dwmac_c‹e_dma_öãºu±
–*
¨g
 );

74 
dwmac_c‹e_dma_Êush_tx_fifo
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

76 #ifde‡
__˝lu•lus


	@src/libchip/network/dwmac-desc-com.c

24 
	~"dwmac-desc-com.h
"

26 #unde‡
DWMAC_DESC_COM_DEBUG


27 #ifde‡
DWMAC_DESC_COM_DEBUG


28 
	#DWMAC_DESC_COM_PRINT_DBG
–
fmt
, 
¨gs
 ... ) 
	`¥ötk
–fmt, ##árg†)

	)

30 
	#DWMAC_DESC_COM_PRINT_DBG
–
fmt
, 
¨gs
 ... ) dÿ{ }  0 )

	)

33 
mbuf
 *
	$dwmac_desc_com_√w_mbuf
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 ) {

34 
i‚ë
 *
iÂ
 = &
£lf
->
¨pcom
.
ac_if
;

35 
mbuf
 *
m
 = 
NULL
;

38 
	`MGETHDR
–
m
, 
M_DONTWAIT
, 
MT_DATA
 );

40 i‡–
m
 !
NULL
 ) {

41 
	`MCLGET
–
m
, 
M_DONTWAIT
 );

43 i‡–
m
->
m_ext
.
ext_buf
 !
NULL
 ) {

44 i‡––
m
->
m_Êags
 & 
M_EXT
 ) != 0 ) {

46 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

49 
m
->
m_d©a
 = 
	`mtod
–m, * ) + 
ETHER_ALIGN
;

50  
m
;

52 
	`m_‰ì
–
m
 );

55 
	`m_‰ì
–
m
 );

59  
NULL
;

60 
	}
}

	@src/libchip/network/dwmac-desc-com.h

25 #i‚de‡
DWMAC_DESC_COM_H_


26 
	#DWMAC_DESC_COM_H_


	)

28 
	~"dwmac-comm⁄.h
"

29 
	~<sys/queue.h
>

31 #ifde‡
__˝lu•lus


35 
	#DWMAC_DESC_COM_HW_CRC_BYTES
 4

	)

36 
	#DWMAC_DESC_COM_BUF_SIZE
 ( 
ETHER_MAX_LEN
 + 
DWMAC_DESC_COM_HW_CRC_BYTES
 )

	)

38 
mbuf
 *
dwmac_desc_com_√w_mbuf
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 );

40 #ifde‡
__˝lu•lus


	@src/libchip/network/dwmac-desc-enh.c

24 
	~<as£π.h
>

25 
	~<°dlib.h
>

26 
	~<°dio.h
>

27 
	~"dwmac-comm⁄.h
"

28 
	~"dwmac-desc-com.h
"

29 
	~"dwmac-c‹e.h
"

30 
	~<sys/queue.h
>

32 #unde‡
DWMAC_DESC_ENH_DEBUG


33 #ifde‡
DWMAC_DESC_ENH_DEBUG


34 
	#DWMAC_DESC_ENH_PRINT_DBG
–
fmt
, 
¨gs
 ... ) 
	`¥ötk
–fmt, ##árg†)

	)

36 
	#DWMAC_DESC_ENH_PRINT_DBG
–
fmt
, 
¨gs
 ... ) dÿ{ }  0 )

	)

40 
	mDWMAC_IP_PAYLOAD_TYPE_UNKNOWN
,

41 
	mDWMAC_IP_PAYLOAD_TYPE_UDP
,

42 
	mDWMAC_IP_PAYLOAD_TYPE_TCP
,

43 
	mDWMAC_IP_PAYLOAD_TYPE_ICMP


44 } 
	tdwmac_ù_∑ylﬂd_ty≥
;

46 
	$dwmac_desc_íh_rx_£t_⁄_rög_chaö
(

47 vﬁ©ûê
dwmac_desc_ext
 *
p
, 
íd
 )

51 
p
->
îx
.
des0_3
.
des1
 = 
	`DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_2_SIZE_SET
(

52 
p
->
îx
.
des0_3
.
des1
, 0

54 
p
->
îx
.
des0_3
.
des3
 = (
uöt32_t
Ë
NULL
;

56 i‡–
íd
 )

57 
p
->
îx
.
des0_3
.
des1
 |
DWMAC_DESC_ERX_DES1_RECEIVE_END_OF_RING
;

58 
	}
}

60 
	$dwmac_desc_íh_tx_£t_⁄_rög_chaö
(

61 vﬁ©ûê
dwmac_desc_ext
 *
p
, c⁄° 
boﬁ
 
íd
 )

63 i‡–
íd
 )

64 
p
->
ëx
.
des0_3
.
des0
 |
DWMAC_DESC_ETX_DES0_TRANSMIT_END_OF_RING
;

65 
	}
}

67 
	$dwmac_desc_íh_£t_tx_desc_Àn
(

68 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
, 
size_t
 
Àn
 )

70 
p_íh
->
ëx
.
des0_3
.
des1
 = 
	`DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_1_SIZE_SET
(

71 
p_íh
->
ëx
.
des0_3
.
des1
,

72 
Àn


74 
	}
}

76 
boﬁ
 
	$dwmac_desc_íh_is_gü¡_‰ame
–c⁄° 
uöt32_t
 
des0
 )

79 –
des0


80 & 
DWMAC_DESC_ERX_DES0_TIMESTAMP_AVAIL_OR_CHECKSUM_ERROR_OR_GIANT_FRAME


83 
	}
}

85 
boﬁ
 
	$dwmac_desc_íh_is_udp_∑ylﬂd
–c⁄° 
uöt32_t
 
des4
 )

88 
	`DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE_GET
–
des4
 )

89 =
DWMAC_IP_PAYLOAD_TYPE_UDP


91 
	}
}

93 
boﬁ
 
	$dwmac_desc_íh_is_t˝_∑ylﬂd
–c⁄° 
uöt32_t
 
des4
 )

96 
	`DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE_GET
–
des4
 )

97 =
DWMAC_IP_PAYLOAD_TYPE_TCP


99 
	}
}

101 
boﬁ
 
	$dwmac_desc_íh_is_icmp_∑ylﬂd
–c⁄° 
uöt32_t
 
des4
 )

104 
	`DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE_GET
–
des4
 )

105 =
DWMAC_IP_PAYLOAD_TYPE_ICMP


107 
	}
}

109 
dwmac_comm⁄_rx_‰ame_°©us
 
	$dwmac_desc_íh_c€_°©us
(

110 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 )

112 
dwmac_comm⁄_rx_‰ame_°©us
 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
;

113 c⁄° 
uöt32_t
 
DES0
 = 
p_íh
->
îx
.
des0_3
.
des0
;

114 c⁄° 
uöt32_t
 
DES4
 = 
p_íh
->
îx
.
des4
;

117 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_EXT_STATUS_AVAIL_OR_RX_MAC_ADDR_STATUS
 )

119 i‡–!
	`dwmac_desc_íh_is_gü¡_‰ame
–
DES0
 )

120 && ( 
DES0
 & 
DWMAC_DESC_ERX_DES0_FREAME_TYPE
 ) == 0

121 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) == 0

122 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 ) == 0

123 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_ERROR
 ) == 0

124 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_HEADER_ERROR
 ) == 0 ) {

125 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IEEE 802.3 Type frame.\n" );

126 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_LLC_SNAP
;

127 } i‡–––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) != 0

128 || ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

130 && 
	`dwmac_desc_íh_is_gü¡_‰ame
–
DES0
 ) ) {

131 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 No CSUM Error.\n" );

132 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
;

133 } i‡–––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) != 0

134 || ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

136 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_ERROR
 ) != 0 ) {

137 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 Payload Error.\n" );

138 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

139 } i‡–––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) != 0

140 || ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

142 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_HEADER_ERROR
 ) != 0 ) {

143 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 Header Error.\n" );

144 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

145 } i‡–––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) != 0

146 || ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

148 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_ERROR
 ) != 0

149 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IP_HEADER_ERROR
 ) != 0 ) {

150 
	`DWMAC_DESC_ENH_PRINT_DBG
(

152 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

153 } i‡–––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) != 0

154 || ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

156 && ( !
	`dwmac_desc_íh_is_udp_∑ylﬂd
–
DES4
 ) )

157 && ( !
	`dwmac_desc_íh_is_t˝_∑ylﬂd
–
DES4
 ) )

158 && ( !
	`dwmac_desc_íh_is_icmp_∑ylﬂd
–
DES4
 ) ) ) {

159 
	`DWMAC_DESC_ENH_PRINT_DBG
(

161 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

162 } i‡––
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 ) == 0

163 && ( 
DES4
 & 
DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 )

165 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: No IPv4, IPv6 frame.\n" );

166 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

169 
uöt32_t
 
°©us
 = (

170 (
uöt32_t
Ë–
	`dwmac_desc_íh_is_gü¡_‰ame
–
DES0
 ) << 2U )

171 | (
uöt32_t
Ë–––
DES0
 & 
DWMAC_DESC_ERX_DES0_FREAME_TYPE
 )

186 i‡–
°©us
 == 0x0 ) {

187 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IEEE 802.3 Type frame.\n" );

188 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_LLC_SNAP
;

189 } i‡–
°©us
 == 0x4 ) {

190 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 No CSUMÉrrorS.\n" );

191 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
;

192 } i‡–
°©us
 == 0x5 ) {

193 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 Payload Error.\n" );

194 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

195 } i‡–
°©us
 == 0x6 ) {

196 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: IPv4/6 Header Error.\n" );

197 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

198 } i‡–
°©us
 == 0x7 ) {

199 
	`DWMAC_DESC_ENH_PRINT_DBG
(

201 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
;

202 } i‡–
°©us
 == 0x1 ) {

203 
	`DWMAC_DESC_ENH_PRINT_DBG
(

205 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

206 } i‡–
°©us
 == 0x3 ) {

207 
	`DWMAC_DESC_ENH_PRINT_DBG
( "RX Des0 status: No IPv4, IPv6 frame.\n" );

208 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

212  
ªt
;

213 
	}
}

215 
	$dwmac_desc_íh_gë_tx_°©us
(

216 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

217 c⁄° 
idx_tx
 )

219 
ªt
 = 0;

220 vﬁ©ûê
dwmac_desc_ext
 *
dma_tx
 =

221 (vﬁ©ûê
dwmac_desc_ext
 *Ë
£lf
->
dma_tx
;

222 vﬁ©ûê
dwmac_desc_ext
 *
p_desc
 = &
dma_tx
[
idx_tx
];

223 
dwmac_comm⁄_desc_°©us_cou¡s_tx
 *
cou¡s
 =

224 &
£lf
->
°©s
.
desc_°©us_cou¡s_tx
;

227 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_ERROR_SUMMARY
 ) != 0 ) {

228 
	`DWMAC_DESC_ENH_PRINT_DBG
–"DWMAC TXÉº‹... 0x%08x\n", 
p
->
des01
.
ëx
 );

230 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_JABBER_TIMEOUT
 )

232 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tjabber_timeoutÉrror\n" );

233 ++
cou¡s
->
jabbî
;

236 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_FRAME_FLUSHED
 )

238 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tframe_flushedÉrror\n" );

239 ++
cou¡s
->
‰ame_Êushed
;

240 
	`dwmac_c‹e_dma_Êush_tx_fifo
–
£lf
 );

243 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_LOSS_OF_CARRIER
 )

245 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tloss_carrierÉrror\n" );

246 ++
cou¡s
->
lossˇºõr
;

249 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_NO_CARRIER
 )

251 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tno_carrierÉrror\n" );

252 ++
cou¡s
->
no_ˇºõr
;

255 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_EXCESSIVE_COLLISION
 )

257 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\texcessive_collisions\n" );

258 ++
cou¡s
->
ex˚ssive_cﬁlisi⁄s
;

261 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_EXCESSIVE_DEFERAL
 )

263 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\texcessiveÅx_deferral\n" );

264 ++
cou¡s
->
ex˚ssive_de„ºÆ
;

267 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_UNDERFLOW_ERROR
 )

269 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tunderflowÉrror\n" );

270 
	`dwmac_c‹e_dma_Êush_tx_fifo
–
£lf
 );

271 ++
cou¡s
->
undîÊow
;

274 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_IP_HEADER_ERROR
 )

276 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tTX IP header csumÉrror\n" );

277 ++
cou¡s
->
ù_hódî_îr‹
;

280 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_IP_PAYLOAD_ERROR
 )

282 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tAddr/Payload csumÉrror\n" );

283 ++
cou¡s
->
∑ylﬂd_îr‹
;

284 
	`dwmac_c‹e_dma_Êush_tx_fifo
–
£lf
 );

287 
ªt
 = -1;

290 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_DEFERRED_BIT
 ) != 0 ) {

291 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC TX status:Åx deferred\n" );

292 ++
cou¡s
->
de„ºed
;

295 i‡––
p_desc
->
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_VLAN_FRAME
 ) != 0 ) {

296 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC TX status: VLAN frame\n" );

297 ++
cou¡s
->
vœn
;

300  
ªt
;

301 
	}
}

303 
dwmac_comm⁄_rx_‰ame_°©us
 
	$dwmac_desc_íh_gë_rx_°©us
(

304 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

305 c⁄° 
desc_idx
 )

307 
dwmac_comm⁄_desc_°©us_cou¡s_rx
 *
cou¡s
 =

308 &
£lf
->
°©s
.
desc_°©us_cou¡s_rx
;

309 
dwmac_comm⁄_rx_‰ame_°©us
 
ªt
 =

310 
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
;

311 vﬁ©ûê
dwmac_desc_ext
 *
dma_rx
 =

312 (vﬁ©ûê
dwmac_desc_ext
 *Ë
£lf
->
dma_rx
;

313 c⁄° 
uöt32_t
 
DES0
 = 
dma_rx
[
desc_idx
].
îx
.
des0_3
.
des0
;

316 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_ERROR_SUMMARY
 ) != 0 ) {

317 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX Error Summary 0x%08x\n",

318 
DES0
 );

320 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_DESCRIPTOR_ERROR
 ) != 0 ) {

321 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tdescriptorÉrror\n" );

322 ++
cou¡s
->
des¸ùt‹_îr‹
;

325 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_OVERFLOW_ERROR
 ) != 0 ) {

326 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\toverflowÉrror\n" );

327 ++
cou¡s
->
ovîÊow_îr‹
;

330 i‡–
	`dwmac_desc_íh_is_gü¡_‰ame
–
DES0
 ) ) {

331 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tIPC Csum Error/Giant frame\n" );

332 ++
cou¡s
->
gü¡_‰ame
;

335 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_LATE_COLLISION
 ) != 0 ) {

336 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tlate_collisionÉrror\n" );

337 ++
cou¡s
->
œã_cﬁlisi⁄
;

340 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_RECEIVE_WATCHDOG_TIMEOUT
 )

342 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\treceive_watchdogÉrror\n" );

343 ++
cou¡s
->
w©chdog_timeout
;

346 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_RECEIVE_ERROR
 ) != 0 ) {

347 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tReceive Error\n" );

348 ++
cou¡s
->
ª˚ive_îr‹
;

351 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_CRC_ERROR
 ) != 0 ) {

352 
	`DWMAC_DESC_ENH_PRINT_DBG
( "\tCRCÉrror\n" );

353 ++
cou¡s
->
¸c_îr‹
;

356 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

359 i‡–
ªt
 =
DWMAC_COMMON_RX_FRAME_STATUS_GOOD
 ) {

364 
ªt
 = 
	`dwmac_desc_íh_c€_°©us
–&
dma_rx
[
desc_idx
] );

367 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_DRIBBLE_BIT_ERROR
 ) != 0 ) {

368 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX: dribblingÉrror\n" );

369 ++
cou¡s
->
dribbÀ_bô_îr‹
;

372 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_SRC_ADDR_FILTER_FAIL
 ) != 0 ) {

373 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX : Source Address filter fail\n" );

374 ++
cou¡s
->
sour˚_addr_Áû
;

375 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

378 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_DEST_ADDR_FILTER_FAIL
 ) != 0 ) {

379 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX : Dest Address filter fail\n" );

380 ++
cou¡s
->
de°_addr_Áû
;

381 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

384 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_LENGTH_ERROR
 ) != 0 ) {

385 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX:Üength_errorÉrror\n" );

386 ++
cou¡s
->
Àngth_îr‹
;

387 
ªt
 = 
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD
;

390 i‡––
DES0
 & 
DWMAC_DESC_ERX_DES0_VLAN_TAG
 ) != 0 ) {

391 
	`DWMAC_DESC_ENH_PRINT_DBG
( "GMAC RX: VLAN frameÅagged\n" );

392 ++
cou¡s
->
vœn_èg
;

395  
ªt
;

396 
	}
}

398 
	$dwmac_desc_íh_¥öt_tx_desc
(

399 vﬁ©ûê
dwmac_desc
 *
p
,

400 c⁄° 
cou¡
 )

402 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
p
;

403 
ödex
;

406 i‡–
p_íh
 !
NULL
 ) {

407  
ödex
 = 0; index < 
cou¡
; ++index ) {

408 
	`¥ötf
–"Tønsmô DMA Des¸ùt‹ %d\n", 
ödex
 );

409 
	`¥ötf
( "des0\n" );

410 
	`¥ötf
(

426 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_OWN_BIT
 ) != 0,

427 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_IRQ_ON_COMPLETION
 ) != 0,

428 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_LAST_SEGMENT
 ) != 0,

429 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_FIRST_SEGMENT
 ) != 0,

430 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_DISABLE_CRC
 ) != 0,

431 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_DISABLE_PAD
 ) != 0,

432 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


433 & 
DWMAC_DESC_ETX_DES0_TRANSMIT_TIMESTAMP_ENABLE
 ) != 0,

434 
	`DWMAC_DESC_ETX_DES0_CHECKSUM_INSERTION_CONTROL_GET
–
p_íh
[
ödex
].
ëx
.

435 
des0_3
.
des0
 ),

436 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


437 & 
DWMAC_DESC_ETX_DES0_TRANSMIT_END_OF_RING
 ) != 0,

438 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_SECOND_ADDR_CHAINED
 ) != 0,

439 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


440 & 
DWMAC_DESC_ETX_DES0_TRANSMIT_TIMESTAMP_STATUS
 ) != 0,

441 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_IP_HEADER_ERROR
 ) != 0,

442 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_VLAN_FRAME
 ) != 0,

443 
	`DWMAC_DESC_ETX_DES0_COLLISION_COUNT_GET
–
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 ),

444 –
p_íh
[
ödex
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_DEFERRED_BIT
 ) != 0

447 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


448 & 
DWMAC_DESC_ETX_DES0_ERROR_SUMMARY
 ) != 0 ) {

449 
	`¥ötf
( " Error Summary:\n" );

451 i‡–
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


452 & 
DWMAC_DESC_ETX_DES0_JABBER_TIMEOUT
 ) {

453 
	`¥ötf
( " Jabber Timeout\n" );

456 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


457 & 
DWMAC_DESC_ETX_DES0_FRAME_FLUSHED
 ) != 0 ) {

458 
	`¥ötf
( " Frame Flush\n" );

461 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


462 & 
DWMAC_DESC_ETX_DES0_IP_PAYLOAD_ERROR
 ) != 0 ) {

463 
	`¥ötf
( " Payload Error\n" );

466 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


467 & 
DWMAC_DESC_ETX_DES0_LOSS_OF_CARRIER
 ) != 0 ) {

468 
	`¥ötf
( " Loss of Carrier\n" );

471 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


472 & 
DWMAC_DESC_ETX_DES0_NO_CARRIER
 ) != 0 ) {

473 
	`¥ötf
( " No Carrier\n" );

476 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


477 & 
DWMAC_DESC_ETX_DES0_EXCESSIVE_COLLISION
 ) != 0 ) {

478 
	`¥ötf
( " Excessive Collision\n" );

481 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


482 & 
DWMAC_DESC_ETX_DES0_EXCESSIVE_COLLISION
 ) != 0 ) {

483 
	`¥ötf
( " Ecessive Deferral\n" );

486 i‡––
p_íh
[
ödex
].
ëx
.
des0_3
.
des0


487 & 
DWMAC_DESC_ETX_DES0_UNDERFLOW_ERROR
 ) != 0 ) {

488 
	`¥ötf
( " Undeflow Error\n" );

492 
	`¥ötf
( "des1\n" );

493 
	`¥ötf
(

496 
	`DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_2_SIZE_GET
–
p_íh
[
ödex
].
ëx
.
des0_3
.

497 
des1
 ),

498 
	`DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_1_SIZE_GET
–
p_íh
[
ödex
].
ëx
.
des0_3
.

499 
des1
 )

501 
	`¥ötf
( "des2\n" );

502 
	`¥ötf
–" %∞Buf„∏1 Addªss\n", (*Ë
p_íh
[
ödex
].
ëx
.
des0_3
.
des2
 );

503 
	`¥ötf
( "des3\n" );

504 
	`¥ötf
–" %∞Buf„∏2 Addªss\n", (*Ë
p_íh
[
ödex
].
ëx
.
des0_3
.
des3
 );

507 
	}
}

509 
	$dwmac_desc_íh_¥öt_rx_desc
(

510 vﬁ©ûê
dwmac_desc
 *
p
,

511 c⁄° 
cou¡
 )

513 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
p
;

514 
ödex
;

517 i‡–
p_íh
 !
NULL
 ) {

518  
ödex
 = 0; index < 
cou¡
; ++index ) {

519 
	`¥ötf
–"Re˚ivêDMA Des¸ùt‹ %d\n", 
ödex
 );

520 
	`¥ötf
( "des0\n" );

521 
	`¥ötf
(

533 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_OWN_BIT
 ) != 0,

534 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0


535 & 
DWMAC_DESC_ERX_DES0_DEST_ADDR_FILTER_FAIL
 ) != 0,

536 
	`DWMAC_DESC_ERX_DES0_FRAME_LENGTH_GET
(

537 
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 ),

538 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0


539 & 
DWMAC_DESC_ERX_DES0_SRC_ADDR_FILTER_FAIL
 ) != 0,

540 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_LENGTH_ERROR
 ) != 0,

541 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_VLAN_TAG
 ) != 0,

542 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_FIRST_DESCRIPTOR
 ) != 0,

543 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_LAST_DESCRIPTOR
 ) != 0,

544 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_FREAME_TYPE
 ) != 0,

545 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_DRIBBLE_BIT_ERROR
 ) != 0,

546 –
p_íh
[
ödex
].
îx
.
des0_3
.
des0


547 & 
DWMAC_DESC_ERX_DES0_EXT_STATUS_AVAIL_OR_RX_MAC_ADDR_STATUS
 ) != 0

550 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


551 & 
DWMAC_DESC_ERX_DES0_ERROR_SUMMARY
 ) != 0 ) {

552 
	`¥ötf
( " Error Summary:\n" );

554 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


555 & 
DWMAC_DESC_ERX_DES0_DESCRIPTOR_ERROR
 ) != 0 ) {

556 
	`¥ötf
( " Descriptor Error\n" );

559 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


560 & 
DWMAC_DESC_ERX_DES0_OVERFLOW_ERROR
 ) != 0 ) {

561 
	`¥ötf
( " Overflow Error\n" );

564 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


566 
DWMAC_DESC_ERX_DES0_TIMESTAMP_AVAIL_OR_CHECKSUM_ERROR_OR_GIANT_FRAME
 )

568 
	`¥ötf
( " Giant Frame\n" );

571 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


572 & 
DWMAC_DESC_ERX_DES0_LATE_COLLISION
 ) != 0 ) {

573 
	`¥ötf
( " Late Collision\n" );

576 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


577 & 
DWMAC_DESC_ERX_DES0_RECEIVE_WATCHDOG_TIMEOUT
 ) != 0

578 || ( 
p_íh
[
ödex
].
îx
.
des0_3
.
des0


579 & 
DWMAC_DESC_ERX_DES0_RECEIVE_ERROR
 ) != 0 ) {

580 
	`¥ötf
( " IP Header or IP Payload:\n" );

582 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


583 & 
DWMAC_DESC_ERX_DES0_RECEIVE_WATCHDOG_TIMEOUT
 ) != 0 ) {

584 
	`¥ötf
( " Watchdog Timeout\n" );

587 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0


588 & 
DWMAC_DESC_ERX_DES0_RECEIVE_ERROR
 ) != 0 ) {

589 
	`¥ötf
( " Receive Error\n" );

593 i‡––
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_CRC_ERROR
 )

595 
	`¥ötf
( " CRC Error\n" );

599 
	`¥ötf
( "des1\n" );

600 
	`¥ötf
(

606 –
p_íh
[
ödex
].
îx
.
des0_3
.
des1


607 & 
DWMAC_DESC_ERX_DES1_DISABLE_IRQ_ON_COMPLETION
 ) != 0,

608 
	`DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_2_SIZE_GET
–
p_íh
[
ödex
].
îx
.
des0_3
.

609 
des1
 ),

610 –
p_íh
[
ödex
].
îx
.
des0_3
.
des1
 & 
DWMAC_DESC_ERX_DES1_RECEIVE_END_OF_RING
 ) != 0,

611 –
p_íh
[
ödex
].
îx
.
des0_3
.
des1
 & 
DWMAC_DESC_ERX_DES1_SECOND_ADDR_CHAINED
 ) != 0,

612 
	`DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE_GET
–
p_íh
[
ödex
].
îx
.
des0_3
.

613 
des1
 )

615 
	`¥ötf
( "des2\n" );

616 
	`¥ötf
–" %∞Buf„∏1 Addªss\n", (*Ë
p_íh
[
ödex
].
îx
.
des0_3
.
des2
 );

617 
	`¥ötf
( "des3\n" );

618 
	`¥ötf
–" %∞Buf„∏2 Addªss\n", (*Ë
p_íh
[
ödex
].
îx
.
des0_3
.
des3
 );

621 
	}
}

623 
	$dwmac_desc_íh_¸óã_rx_desc
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

625 
ío
 = 0;

626 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
rbuf_cou¡
;

627 c⁄° 
size_t
 
SIZE_DESCS
 = 
NUM_DESCS
 * –
dwmac_desc_ext
 );

628 *
desc_mem
 = 
NULL
;

631 
	`as£π
–
NULL
 =
£lf
->
dma_rx
 );

634 
£lf
->
mbuf_addr_rx
 = 
	`ˇŒoc
–
NUM_DESCS
, –
mbuf
 * ) );

636 i‡–
£lf
->
mbuf_addr_rx
 =
NULL
 ) {

637 
ío
 = 
ENOMEM
;

641 i‡–
ío
 == 0 ) {

642 
ío
 = ( 
£lf
->
CFG
->
CALLBACK
.
mem_Æloc_noˇche
 )(

643 
£lf
->
¨g
,

644 &
desc_mem
,

645 
SIZE_DESCS


649 i‡–
ío
 == 0 ) {

650 i‡–
desc_mem
 !
NULL
 ) {

651 
	`mem£t
–
desc_mem
, 0, 
SIZE_DESCS
 );

652 
	`DWMAC_COMMON_DSB
();

654 
ío
 = 
ENOMEM
;

658 i‡–
ío
 == 0 ) {

659 
£lf
->
dma_rx
 = (vﬁ©ûê
dwmac_desc
 *Ë
desc_mem
;

660 
	`DWMAC_COMMON_DSB
();

663  
ío
;

664 
	}
}

666 
	$dwmac_desc_íh_öô_rx_desc
(

667 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

668 c⁄° 
ödex
 )

670 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 =

671 (vﬁ©ûê
dwmac_desc_ext
 *Ë
£lf
->
dma_rx
;

672 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
rbuf_cou¡
;

673 *
˛u°_°¨t
 =

674 
	`mtod
–
£lf
->
mbuf_addr_rx
[
ödex
], * );

677 
	`as£π
–
NULL
 !
p_íh
 );

679 
	`DWMAC_COMMON_DSB
();

681 
	`πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
(

682 
˛u°_°¨t
,

683 
DWMAC_DESC_COM_BUF_SIZE
 + 
ETHER_ALIGN


686 i‡–
£lf
->
mbuf_addr_rx
[
ödex
] !
NULL
 ) {

687 
p_íh
[
ödex
].
îx
.
des0_3
.
des1
 = 
	`DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE_SET
(

688 
p_íh
->
îx
.
des0_3
.
des1
,

689 
DWMAC_DESC_COM_BUF_SIZE
 );

691 
p_íh
[
ödex
].
îx
.
des0_3
.
des1
 = 
	`DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE_SET
(

692 
p_íh
->
îx
.
des0_3
.
des1
,

696 
p_íh
[
ödex
].
îx
.
des0_3
.
des2
 = (
uöt32_t
Ë
˛u°_°¨t
;

700 
	`dwmac_desc_íh_rx_£t_⁄_rög_chaö
–&
p_íh
[
ödex
],

701 –
ödex
 =
NUM_DESCS
 - 1 ) );

702 
	`DWMAC_COMMON_DSB
();

703 
p_íh
[
ödex
].
îx
.
des0_3
.
des0
 = 
DWMAC_DESC_ERX_DES0_OWN_BIT
;

704 
	}
}

706 
	$dwmac_desc_íh_de°roy_rx_desc
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

708 
ío
 = 0;

709 vﬁ©ûê
dwmac_desc
 *
dma_rx
 = 
£lf
->dma_rx;

712 i‡–
£lf
->
mbuf_addr_rx
 !
NULL
 ) {

713 
	`‰ì
–
£lf
->
mbuf_addr_rx
, 0 );

714 
£lf
->
mbuf_addr_rx
 = 
NULL
;

717 i‡–
dma_rx
 !
NULL
 ) {

718 
ío
 = 
£lf
->
CFG
->
CALLBACK
.
	`mem_‰ì_noˇche
(

719 
£lf
->
¨g
,

720 
	`RTEMS_DEVOLATILE
–*, 
dma_rx
 )

722 
£lf
->
dma_rx
 = 
NULL
;

725 
	`DWMAC_COMMON_DSB
();

727  
ío
;

728 
	}
}

730 
	$dwmac_desc_íh_ªÀa£_rx_bufs
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

732 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_rx
;

733 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
rbuf_cou¡
;

734 
i
;

737 
	`as£π
–
p_íh
 !
NULL
 );

739  
i
 = 0; i < 
NUM_DESCS
; ++i ) {

740 i‡–
p_íh
[
i
].
îx
.
des0_3
.
des2
 != 0 ) {

741 
mbuf
 *
dummy
;

743 
	`as£π
–
£lf
->
mbuf_addr_rx
[
i
] !
NULL
 );

745 
	`MFREE
–
£lf
->
mbuf_addr_rx
[
i
], 
dummy
 );

746 (Ë
dummy
;

747 
	`mem£t
(

748 
	`RTEMS_DEVOLATILE
–*, &
p_íh
[
i
].
îx
 ),

750 –
dwmac_desc_ext
 )

755 
£lf
->
dma_rx
 = (vﬁ©ûê
dwmac_desc
 *Ë
p_íh
;

756 
	`DWMAC_COMMON_DSB
();

757 
	}
}

759 
	$dwmac_desc_íh_¸óã_tx_desc
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

761 
ío
 = 0;

762 *
mem_desc
 = 
NULL
;

763 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
xbuf_cou¡
;

764 c⁄° 
size_t
 
SIZE_DESCS
 = 
NUM_DESCS
 * –
dwmac_desc_ext
 );

767 
	`as£π
–
£lf
->
dma_tx
 =
NULL
 );

770 
£lf
->
mbuf_addr_tx
 = 
	`ˇŒoc
–
NUM_DESCS
, –
mbuf
 * ) );

772 i‡–
£lf
->
mbuf_addr_tx
 =
NULL
 ) {

773 
ío
 = 
ENOMEM
;

776 i‡–
ío
 == 0 ) {

777 
ío
 = ( 
£lf
->
CFG
->
CALLBACK
.
mem_Æloc_noˇche
 )(

778 
£lf
->
¨g
,

779 &
mem_desc
,

780 
SIZE_DESCS


784 i‡–
ío
 == 0 ) {

785 i‡–
mem_desc
 !
NULL
 ) {

786 
	`mem£t
–
mem_desc
, 0, 
SIZE_DESCS
 );

787 
	`DWMAC_COMMON_DSB
();

789 
ío
 = 
ENOMEM
;

793 i‡–
ío
 == 0 ) {

794 
£lf
->
dma_tx
 = 
mem_desc
;

795 
	`DWMAC_COMMON_DSB
();

798  
ío
;

799 
	}
}

801 
	$dwmac_desc_íh_öô_tx_desc
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

803 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

804 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
xbuf_cou¡
;

805 
i
;

808 
	`as£π
–
p_íh
 !
NULL
 );

810  
i
 = 0; i < 
NUM_DESCS
; ++i ) {

811 
	`dwmac_desc_íh_tx_£t_⁄_rög_chaö
–&
p_íh
[
i
], ( i =
NUM_DESCS
 - 1 ) );

814 
£lf
->
dma_tx
 = (vﬁ©ûê
dwmac_desc
 *Ë&
p_íh
[0];

815 
	`DWMAC_COMMON_DSB
();

816 
	}
}

818 
	$dwmac_desc_íh_de°roy_tx_desc
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

820 
ío
 = 0;

821 *
mem_desc
 = 
	`RTEMS_DEVOLATILE
–*, 
£lf
->
dma_tx
 );

824 i‡–
£lf
->
mbuf_addr_tx
 !
NULL
 ) {

825 
	`‰ì
–
£lf
->
mbuf_addr_tx
, 0 );

826 
£lf
->
mbuf_addr_tx
 = 
NULL
;

829 i‡–
mem_desc
 !
NULL
 ) {

830 
ío
 = 
£lf
->
CFG
->
CALLBACK
.
	`mem_‰ì_noˇche
–£lf->
¨g
, 
mem_desc
 );

831 
mem_desc
 = 
NULL
;

832 
£lf
->
dma_tx
 = (vﬁ©ûê
dwmac_desc
 *Ë
mem_desc
;

835 
	`DWMAC_COMMON_DSB
();

837  
ío
;

838 
	}
}

840 
	$dwmac_desc_íh_ªÀa£_tx_bufs
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

842 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

843 c⁄° 
size_t
 
NUM_DESCS
 = (size_tË
£lf
->
bsd_c⁄fig
->
xbuf_cou¡
;

844 
i
;

847 
	`as£π
–
p_íh
 !
NULL
 );

849  
i
 = 0; i < 
NUM_DESCS
; ++i ) {

850 i‡–
p_íh
[
i
].
ëx
.
des0_3
.
des1
 != 0 ) {

851 
mbuf
 *
dummy
;

853 
	`as£π
–
£lf
->
mbuf_addr_tx
[
i
] !
NULL
 );

855 
	`MFREE
–
£lf
->
mbuf_addr_tx
[
i
], 
dummy
 );

856 (Ë
dummy
;

857 
	`mem£t
–
	`RTEMS_DEVOLATILE
( *,

858 &
p_íh
[
i
].
ëx
 ), 0, –
dwmac_desc_ext
 ) );

862 
£lf
->
dma_tx
 = (vﬁ©ûê
dwmac_desc
 *Ë
p_íh
;

863 
	`DWMAC_COMMON_DSB
();

864 
	}
}

866 
ölöe
 
size_t
 
	$dwmac_desc_íh_gë_rx_‰ame_Àn
(

867 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

868 c⁄° 
desc_idx
 )

870 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_rx
;

878 i‡–
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_RXTYP1COE
 ) {

879  
	`DWMAC_DESC_ERX_DES0_FRAME_LENGTH_GET
–
p_íh
[
desc_idx
].
îx
.
des0_3
.
des0
 )

882  
	`DWMAC_DESC_ERX_DES0_FRAME_LENGTH_GET
–
p_íh
[
desc_idx
].
îx
.
des0_3
.
des0
 );

884 
	}
}

886 
boﬁ
 
	$dwmac_desc_íh_am_i_rx_ow√r
(

887 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

888 c⁄° 
desc_idx
 )

890 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_rx
;

891 
boﬁ
 
am_i_ow√r
;

894 
	`DWMAC_COMMON_DSB
();

895 
am_i_ow√r
 =

896 –
p_íh
[
desc_idx
].
îx
.
des0_3
.
des0
 & 
DWMAC_DESC_ERX_DES0_OWN_BIT
 ) == 0;

898  
am_i_ow√r
;

899 
	}
}

901 
boﬁ
 
	$dwmac_desc_íh_am_i_tx_ow√r
(

902 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

903 c⁄° 
idx_tx
 )

905 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

906 
boﬁ
 
am_i_ow√r
;

909 
	`DWMAC_COMMON_DSB
();

910 
am_i_ow√r
 =

911 –
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0
 & 
DWMAC_DESC_ETX_DES0_OWN_BIT
 ) == 0;

913  
am_i_ow√r
;

914 
	}
}

916 
	$dwmac_desc_íh_ªÀa£_tx_ow√rshù
(

917 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

918 c⁄° 
idx_tx
 )

920 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

923 
	`DWMAC_COMMON_DSB
();

924 
p_íh
[
idx_tx
].
îx
.
des0_3
.
des0
 |
DWMAC_DESC_ETX_DES0_OWN_BIT
;

925 
	}
}

927 
	$dwmac_desc_íh_gë_tx_ls
(

928 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

929 c⁄° 
idx_tx
 )

931 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

934  ( ( 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0


935 & 
DWMAC_DESC_ETX_DES0_LAST_SEGMENT
 ) != 0 );

936 
	}
}

938 
	$dwmac_desc_íh_ªÀa£_tx_desc
(

939 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

940 c⁄° 
idx_tx
 )

942 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

945 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0
 =

946 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0


947 & ( 
DWMAC_DESC_ETX_DES0_TRANSMIT_END_OF_RING


948 | 
DWMAC_DESC_ETX_DES0_SECOND_ADDR_CHAINED
 );

950 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des1
 = 0;

951 
	}
}

953 
	$dwmac_desc_íh_¥ï¨e_tx_desc
(

954 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

955 c⁄° 
idx
,

956 c⁄° 
boﬁ
 
is_fú°
,

957 c⁄° 
size_t
 
Àn
,

958 c⁄° *
pd©a
 )

960 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

963 i‡–
is_fú°
 ) {

964 
p_íh
[
idx
].
ëx
.
des0_3
.
des0
 |
DWMAC_DESC_ETX_DES0_FIRST_SEGMENT
;

967 
	`dwmac_desc_íh_£t_tx_desc_Àn
–&
p_íh
[
idx
], 
Àn
 );

969 
p_íh
[
idx
].
ëx
.
des0_3
.
des2
 = (
uöçå_t
Ë
pd©a
;

970 
	}
}

972 
	$dwmac_desc_íh_˛o£_tx_desc
(

973 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

974 c⁄° 
idx_tx


977 vﬁ©ûê
dwmac_desc_ext
 *
p_íh
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_tx
;

979 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0
 |
DWMAC_DESC_ETX_DES0_LAST_SEGMENT
;

980 
p_íh
[
idx_tx
].
ëx
.
des0_3
.
des0
 |
DWMAC_DESC_ETX_DES0_IRQ_ON_COMPLETION
;

981 
	}
}

983 
boﬁ
 
	$dwmac_desc_íh_is_fú°_rx_£gmít
(

984 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

985 c⁄° 
des¸ùt‹_ödex
 )

987 vﬁ©ûê
dwmac_desc_ext
 *
p_descs
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_rx
;

990  ( ( 
p_descs
[
des¸ùt‹_ödex
].
îx
.
des0_3
.
des0


991 & 
DWMAC_DESC_ERX_DES0_FIRST_DESCRIPTOR
 ) != 0 );

992 
	}
}

994 
boﬁ
 
	$dwmac_desc_íh_is_œ°_rx_£gmít
(

995 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

996 c⁄° 
des¸ùt‹_ödex
 )

998 vﬁ©ûê
dwmac_desc_ext
 *
p_descs
 = (vﬁ©ûêdwmac_desc_exà*Ë
£lf
->
dma_rx
;

1001  ( ( 
p_descs
[
des¸ùt‹_ödex
].
îx
.
des0_3
.
des0


1002 & 
DWMAC_DESC_ERX_DES0_LAST_DESCRIPTOR
 ) != 0 );

1003 
	}
}

1005 
	$dwmac_desc_íh_vÆid©e
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1008 i‡––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_ENHDESSEL
 ) != 0 ) {

1011  
EINVAL
;

1013 
	}
}

1015 
boﬁ
 
	$dwmac_desc_íh_u£_íh™˚d_descs
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1017 (Ë
£lf
;

1020  
åue
;

1021 
	}
}

1023 c⁄° 
dwmac_comm⁄_desc_›s
 
	gdwmac_desc_›s_íh™˚d
 = {

1024 .
vÆid©e
 = 
dwmac_desc_íh_vÆid©e
,

1025 .
	gu£_íh™˚d_descs
 = 
dwmac_desc_íh_u£_íh™˚d_descs
,

1026 .
	gtx_°©us
 = 
dwmac_desc_íh_gë_tx_°©us
,

1027 .
	grx_°©us
 = 
dwmac_desc_íh_gë_rx_°©us
,

1028 .
	g¸óã_rx_desc
 = 
dwmac_desc_íh_¸óã_rx_desc
,

1029 .
	g¸óã_tx_desc
 = 
dwmac_desc_íh_¸óã_tx_desc
,

1030 .
	gde°roy_rx_desc
 = 
dwmac_desc_íh_de°roy_rx_desc
,

1031 .
	gde°roy_tx_desc
 = 
dwmac_desc_íh_de°roy_tx_desc
,

1032 .
	göô_rx_desc
 = 
dwmac_desc_íh_öô_rx_desc
,

1033 .
	göô_tx_desc
 = 
dwmac_desc_íh_öô_tx_desc
,

1034 .
	gªÀa£_rx_bufs
 = 
dwmac_desc_íh_ªÀa£_rx_bufs
,

1035 .
	gªÀa£_tx_bufs
 = 
dwmac_desc_íh_ªÀa£_tx_bufs
,

1036 .
	gÆloc_d©a_buf
 = 
dwmac_desc_com_√w_mbuf
,

1037 .
	gam_i_tx_ow√r
 = 
dwmac_desc_íh_am_i_tx_ow√r
,

1038 .
	gam_i_rx_ow√r
 = 
dwmac_desc_íh_am_i_rx_ow√r
,

1039 .
	gªÀa£_tx_desc
 = 
dwmac_desc_íh_ªÀa£_tx_desc
,

1040 .
	g¥ï¨e_tx_desc
 = 
dwmac_desc_íh_¥ï¨e_tx_desc
,

1041 .
	g˛o£_tx_desc
 = 
dwmac_desc_íh_˛o£_tx_desc
,

1042 .
	ggë_tx_ls
 = 
dwmac_desc_íh_gë_tx_ls
,

1043 .
	gªÀa£_tx_ow√rshù
 = 
dwmac_desc_íh_ªÀa£_tx_ow√rshù
,

1044 .
	ggë_rx_‰ame_Àn
 = 
dwmac_desc_íh_gë_rx_‰ame_Àn
,

1045 .
	gis_fú°_rx_£gmít
 = 
dwmac_desc_íh_is_fú°_rx_£gmít
,

1046 .
	gis_œ°_rx_£gmít
 = 
dwmac_desc_íh_is_œ°_rx_£gmít
,

1047 .
	g¥öt_tx_desc
 = 
dwmac_desc_íh_¥öt_tx_desc
,

1048 .
	g¥öt_rx_desc
 = 
dwmac_desc_íh_¥öt_rx_desc
,

1053 c⁄° 
dwmac_des¸ùt‹_›s
 
	gDWMAC_DESCRIPTOR_OPS_ENHANCED
 =

1054 
DWMAC_DESCRIPTOR_OPS_INITIALIZER
(

1055 &
dwmac_desc_›s_íh™˚d


	@src/libchip/network/dwmac-desc.h

1 #i‚de‡
DWMAC_DESC_RX_REGS_H


2 
	#DWMAC_DESC_RX_REGS_H


	)

4 
	~<°döt.h
>

6 
	#DWMAC_DESC_BIT32
(
bô
) \

7 ((
uöt32_t
Ë(((uöt32_tË1Ë<< (
bô
)))

	)

9 
	#DWMAC_DESC_MSK32
(
fú°_bô
, 
œ°_bô
) \

10 ((
uöt32_t
Ë((
	`DWMAC_DESC_BIT32
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

12 
	#DWMAC_DESC_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

13 ((
uöt32_t
) \

14 ((((
uöt32_t
Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`DWMAC_DESC_MSK32
(fú°_bô, 
œ°_bô
)))

	)

16 
	#DWMAC_DESC_FLD32GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

17 ((
uöt32_t
Ë(((
ªg
Ë& 
	`DWMAC_DESC_MSK32
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

19 
	#DWMAC_DESC_FLD32SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

20 ((
uöt32_t
Ë(((
ªg
Ë& ~
	`DWMAC_DESC_MSK32
(
fú°_bô
, 
œ°_bô
)) \

21 | 
	`DWMAC_DESC_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

24 
uöt32_t
 
	mdes0
;

25 
	#DWMAC_DESC_RX_DES0_OWN_BIT
 
	`DWMAC_DESC_BIT32
(31)

	)

26 
	#DWMAC_DESC_RX_DES0_DEST_ADDR_FILTER_FAIL
 
	`DWMAC_DESC_BIT32
(30)

	)

27 
	#DWMAC_DESC_RX_DES0_FRAME_LENGTH
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 16, 29)

	)

28 
	#DWMAC_DESC_RX_DES0_FRAME_LENGTH_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 16, 29)

	)

29 
	#DWMAC_DESC_RX_DES0_FRAME_LENGTH_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 16, 29)

	)

30 
	#DWMAC_DESC_RX_DES0_ERROR_SUMMARY
 
	`DWMAC_DESC_BIT32
(15)

	)

31 
	#DWMAC_DESC_RX_DES0_DESCRIPTOR_ERROR
 
	`DWMAC_DESC_BIT32
(14)

	)

32 
	#DWMAC_DESC_RX_DES0_SRC_ADDR_FILTER_FAIL
 
	`DWMAC_DESC_BIT32
(13)

	)

33 
	#DWMAC_DESC_RX_DES0_LENGTH_ERROR
 
	`DWMAC_DESC_BIT32
(12)

	)

34 
	#DWMAC_DESC_RX_DES0_OVERFLOW_ERROR
 
	`DWMAC_DESC_BIT32
(11)

	)

35 
	#DWMAC_DESC_RX_DES0_VLAN_TAG
 
	`DWMAC_DESC_BIT32
(10)

	)

36 
	#DWMAC_DESC_RX_DES0_FIRST_DESCRIPTOR
 
	`DWMAC_DESC_BIT32
(9)

	)

37 
	#DWMAC_DESC_RX_DES0_LAST_DESCRIPTOR
 
	`DWMAC_DESC_BIT32
(8)

	)

38 
	#DWMAC_DESC_RX_DES0_CHECKSUM_ERROR
 
	`DWMAC_DESC_BIT32
(7)

	)

39 
	#DWMAC_DESC_RX_DES0_LATE_COLLISION
 
	`DWMAC_DESC_BIT32
(6)

	)

40 
	#DWMAC_DESC_RX_DES0_FRAME_TYPE
 
	`DWMAC_DESC_BIT32
(5)

	)

41 
	#DWMAC_DESC_RX_DES0_RECEIVE_WATCHDOG_TIMEOUT
 
	`DWMAC_DESC_BIT32
(4)

	)

42 
	#DWMAC_DESC_RX_DES0_RECEIVE_ERROR
 
	`DWMAC_DESC_BIT32
(3)

	)

43 
	#DWMAC_DESC_RX_DES0_DRIBBLE_BIT_ERROR
 
	`DWMAC_DESC_BIT32
(2)

	)

44 
	#DWMAC_DESC_RX_DES0_CRC_ERROR
 
	`DWMAC_DESC_BIT32
(1)

	)

45 
	#DWMAC_DESC_RX_DES0_RX_MAC_ADDR_OR_PAYLOAD_CHECKSUM_ERROR
 
	`DWMAC_DESC_BIT32
(0)

	)

46 
uöt32_t
 
	mdes1
;

47 
	#DWMAC_DESC_RX_DES1_DISABLE_IRQ_ON_COMPLETION
 
	`DWMAC_DESC_BIT32
(31)

	)

48 
	#DWMAC_DESC_RX_DES1_RECEIVE_END_OF_RING
 
	`DWMAC_DESC_BIT32
(25)

	)

49 
	#DWMAC_DESC_RX_DES1_SECOND_ADDR_CHAINED
 
	`DWMAC_DESC_BIT32
(24)

	)

50 
	#DWMAC_DESC_RX_DES1_RECEIVE_BUFFER_2_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 11, 21)

	)

51 
	#DWMAC_DESC_RX_DES1_RECEIVE_BUFFER_2_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 11, 21)

	)

52 
	#DWMAC_DESC_RX_DES1_RECEIVE_BUFFER_2_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 11, 21)

	)

53 
	#DWMAC_DESC_RX_DES1_RECIVE_BUFFER_1_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 10)

	)

54 
	#DWMAC_DESC_RX_DES1_RECIVE_BUFFER_1_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 10)

	)

55 
	#DWMAC_DESC_RX_DES1_RECIVE_BUFFER_1_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 10)

	)

56 
uöt32_t
 
	mdes2
;

57 
	#DWMAC_DESC_RX_DES2_BUFF_1_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

58 
	#DWMAC_DESC_RX_DES2_BUFF_1_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

59 
	#DWMAC_DESC_RX_DES2_BUFF_1_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

60 
	#DWMAC_DESC_RX_DES2_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

61 
	#DWMAC_DESC_RX_DES2_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

62 
	#DWMAC_DESC_RX_DES2_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

63 
uöt32_t
 
	mdes3
;

64 
	#DWMAC_DESC_RX_DES3_BUFF_2_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

65 
	#DWMAC_DESC_RX_DES3_BUFF_2_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

66 
	#DWMAC_DESC_RX_DES3_BUFF_2_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

67 
	#DWMAC_DESC_RX_DES3_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

68 
	#DWMAC_DESC_RX_DES3_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

69 
	#DWMAC_DESC_RX_DES3_IEEE_RECEIVE_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

70 } 
	tdwmac_desc_rx
;

73 
uöt32_t
 
	mdes0
;

74 
	#DWMAC_DESC_TX_DES0_OWN_BIT
 
	`DWMAC_DESC_BIT32
(31)

	)

75 
	#DWMAC_DESC_TX_DES0_TX_TIMESTAMP_STATUS
 
	`DWMAC_DESC_BIT32
(17)

	)

76 
	#DWMAC_DESC_TX_DES0_IP_HEADER_ERROR
 
	`DWMAC_DESC_BIT32
(16)

	)

77 
	#DWMAC_DESC_TX_DES0_ERROR_SUMMARY
 
	`DWMAC_DESC_BIT32
(15)

	)

78 
	#DWMAC_DESC_TX_DES0_JABBER_TIMEOUT
 
	`DWMAC_DESC_BIT32
(14)

	)

79 
	#DWMAC_DESC_TX_DES0_FRAME_FLUSHED
 
	`DWMAC_DESC_BIT32
(13)

	)

80 
	#DWMAC_DESC_TX_DES0_PAYLOAD_CHECKSUM_ERROR
 
	`DWMAC_DESC_BIT32
(12)

	)

81 
	#DWMAC_DESC_TX_DES0_LOSS_OF_CARRIER
 
	`DWMAC_DESC_BIT32
(11)

	)

82 
	#DWMAC_DESC_TX_DES0_NO_CARRIER
 
	`DWMAC_DESC_BIT32
(10)

	)

83 
	#DWMAC_DESC_TX_DES0_EXCESSIVE_COLLISION
 
	`DWMAC_DESC_BIT32
(8)

	)

84 
	#DWMAC_DESC_TX_DES0_VLAN_FRAME
 
	`DWMAC_DESC_BIT32
(7)

	)

85 
	#DWMAC_DESC_TX_DES0_COLLISION_TIMEOUT
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 3, 6)

	)

86 
	#DWMAC_DESC_TX_DES0_COLLISION_TIMEOUT_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 3, 6)

	)

87 
	#DWMAC_DESC_TX_DES0_COLLISION_TIMEOUT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 3, 6)

	)

88 
	#DWMAC_DESC_TX_DES0_EXCESSIVE_DEFERAL
 
	`DWMAC_DESC_BIT32
(2)

	)

89 
	#DWMAC_DESC_TX_DES0_UNDERFLOW_ERROR
 
	`DWMAC_DESC_BIT32
(1)

	)

90 
	#DWMAC_DESC_TX_DES0_DEFERED_BIT
 
	`DWMAC_DESC_BIT32
(0)

	)

91 
uöt32_t
 
	mdes1
;

92 
	#DWMAC_DESC_TX_DES1_IRQ_ON_COMPLETION
 
	`DWMAC_DESC_BIT32
(31)

	)

93 
	#DWMAC_DESC_TX_DES1_LAST_SEGMENT
 
	`DWMAC_DESC_BIT32
(30)

	)

94 
	#DWMAC_DESC_TX_DES1_FIRST_SEGMENT
 
	`DWMAC_DESC_BIT32
(29)

	)

95 
	#DWMAC_DESC_TX_DES1_CHECKSUM_INSERTION_CONTROL
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 27, 28)

	)

96 
	#DWMAC_DESC_TX_DES1_CHECKSUM_INSERTION_CONTROL_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 27, 28)

	)

97 
	#DWMAC_DESC_TX_DES1_CHECKSUM_INSERTION_CONTROL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 27, 28)

	)

98 
	#DWMAC_DESC_TX_DES1_DISABLE_CRC
 
	`DWMAC_DESC_BIT32
(26)

	)

99 
	#DWMAC_DESC_TX_DES1_TRANSMIT_END_OF_RING
 
	`DWMAC_DESC_BIT32
(25)

	)

100 
	#DWMAC_DESC_TX_DES1_SECOND_ADDRESS_CHAINED
 
	`DWMAC_DESC_BIT32
(24)

	)

101 
	#DWMAC_DESC_TX_DES1_DISABLE_PADDING
 
	`DWMAC_DESC_BIT32
(23)

	)

102 
	#DWMAC_DESC_TX_DES1_TRANSMIT_TIMESTAMP_ENABLE
 
	`DWMAC_DESC_BIT32
(22)

	)

103 
	#DWMAC_DESC_TX_DES1_TRANMIT_BUFFER_2_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 11, 21)

	)

104 
	#DWMAC_DESC_TX_DES1_TRANMIT_BUFFER_2_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 11, 21)

	)

105 
	#DWMAC_DESC_TX_DES1_TRANMIT_BUFFER_2_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 11, 21)

	)

106 
	#DWMAC_DESC_TX_DES1_TRANSMIT_BUFFER_1_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 10)

	)

107 
	#DWMAC_DESC_TX_DES1_TRANSMIT_BUFFER_1_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 10)

	)

108 
	#DWMAC_DESC_TX_DES1_TRANSMIT_BUFFER_1_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 10)

	)

109 
uöt32_t
 
	mdes2
;

110 
	#DWMAC_DESC_TX_DES2_BUFF_1_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

111 
	#DWMAC_DESC_TX_DES2_BUFF_1_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

112 
	#DWMAC_DESC_TX_DES2_BUFF_1_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

113 
	#DWMAC_DESC_TX_DES2_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

114 
	#DWMAC_DESC_TX_DES2_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

115 
	#DWMAC_DESC_TX_DES2_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

116 
uöt32_t
 
	mdes3
;

117 
	#DWMAC_DESC_TX_DES3_BUFF_2_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

118 
	#DWMAC_DESC_TX_DES3_BUFF_2_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

119 
	#DWMAC_DESC_TX_DES3_BUFF_2_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

120 
	#DWMAC_DESC_TX_DES3_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

121 
	#DWMAC_DESC_TX_DES3_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

122 
	#DWMAC_DESC_TX_DES3_IEEE_TRANSMIT_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

123 } 
	tdwmac_desc_tx
;

126 
uöt32_t
 
	mdes0
;

127 
	#DWMAC_DESC_ERX_DES0_OWN_BIT
 
	`DWMAC_DESC_BIT32
(31)

	)

128 
	#DWMAC_DESC_ERX_DES0_DEST_ADDR_FILTER_FAIL
 
	`DWMAC_DESC_BIT32
(30)

	)

129 
	#DWMAC_DESC_ERX_DES0_FRAME_LENGTH
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 16, 29)

	)

130 
	#DWMAC_DESC_ERX_DES0_FRAME_LENGTH_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 16, 29)

	)

131 
	#DWMAC_DESC_ERX_DES0_FRAME_LENGTH_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 16, 29)

	)

132 
	#DWMAC_DESC_ERX_DES0_ERROR_SUMMARY
 
	`DWMAC_DESC_BIT32
(15)

	)

133 
	#DWMAC_DESC_ERX_DES0_DESCRIPTOR_ERROR
 
	`DWMAC_DESC_BIT32
(14)

	)

134 
	#DWMAC_DESC_ERX_DES0_SRC_ADDR_FILTER_FAIL
 
	`DWMAC_DESC_BIT32
(13)

	)

135 
	#DWMAC_DESC_ERX_DES0_LENGTH_ERROR
 
	`DWMAC_DESC_BIT32
(12)

	)

136 
	#DWMAC_DESC_ERX_DES0_OVERFLOW_ERROR
 
	`DWMAC_DESC_BIT32
(11)

	)

137 
	#DWMAC_DESC_ERX_DES0_VLAN_TAG
 
	`DWMAC_DESC_BIT32
(10)

	)

138 
	#DWMAC_DESC_ERX_DES0_FIRST_DESCRIPTOR
 
	`DWMAC_DESC_BIT32
(9)

	)

139 
	#DWMAC_DESC_ERX_DES0_LAST_DESCRIPTOR
 
	`DWMAC_DESC_BIT32
(8)

	)

140 
	#DWMAC_DESC_ERX_DES0_TIMESTAMP_AVAIL_OR_CHECKSUM_ERROR_OR_GIANT_FRAME
 
	`DWMAC_DESC_BIT32
(7)

	)

141 
	#DWMAC_DESC_ERX_DES0_LATE_COLLISION
 
	`DWMAC_DESC_BIT32
(6)

	)

142 
	#DWMAC_DESC_ERX_DES0_FREAME_TYPE
 
	`DWMAC_DESC_BIT32
(5)

	)

143 
	#DWMAC_DESC_ERX_DES0_RECEIVE_WATCHDOG_TIMEOUT
 
	`DWMAC_DESC_BIT32
(4)

	)

144 
	#DWMAC_DESC_ERX_DES0_RECEIVE_ERROR
 
	`DWMAC_DESC_BIT32
(3)

	)

145 
	#DWMAC_DESC_ERX_DES0_DRIBBLE_BIT_ERROR
 
	`DWMAC_DESC_BIT32
(2)

	)

146 
	#DWMAC_DESC_ERX_DES0_CRC_ERROR
 
	`DWMAC_DESC_BIT32
(1)

	)

147 
	#DWMAC_DESC_ERX_DES0_EXT_STATUS_AVAIL_OR_RX_MAC_ADDR_STATUS
 
	`DWMAC_DESC_BIT32
(0)

	)

148 
uöt32_t
 
	mdes1
;

149 
	#DWMAC_DESC_ERX_DES1_DISABLE_IRQ_ON_COMPLETION
 
	`DWMAC_DESC_BIT32
(31)

	)

150 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_2_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 16, 28)

	)

151 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_2_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 16, 28)

	)

152 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_2_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 16, 28)

	)

153 
	#DWMAC_DESC_ERX_DES1_RECEIVE_END_OF_RING
 
	`DWMAC_DESC_BIT32
(15)

	)

154 
	#DWMAC_DESC_ERX_DES1_SECOND_ADDR_CHAINED
 
	`DWMAC_DESC_BIT32
(14)

	)

155 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 12)

	)

156 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 12)

	)

157 
	#DWMAC_DESC_ERX_DES1_RECEIVE_BUFF_1_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 12)

	)

158 
uöt32_t
 
	mdes2
;

159 
	#DWMAC_DESC_ERX_DES2_BUFF_1_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

160 
	#DWMAC_DESC_ERX_DES2_BUFF_1_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

161 
	#DWMAC_DESC_ERX_DES2_BUFF_1_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

162 
uöt32_t
 
	mdes3
;

163 
	#DWMAC_DESC_ERX_DES3_BUFF_2_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

164 
	#DWMAC_DESC_ERX_DES3_BUFF_2_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

165 
	#DWMAC_DESC_ERX_DES3_BUFF_2_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

166 } 
	tdwmac_desc_îx
;

169 
uöt32_t
 
	mdes0
;

170 
	#DWMAC_DESC_ETX_DES0_OWN_BIT
 
	`DWMAC_DESC_BIT32
(31)

	)

171 
	#DWMAC_DESC_ETX_DES0_IRQ_ON_COMPLETION
 
	`DWMAC_DESC_BIT32
(30)

	)

172 
	#DWMAC_DESC_ETX_DES0_LAST_SEGMENT
 
	`DWMAC_DESC_BIT32
(29)

	)

173 
	#DWMAC_DESC_ETX_DES0_FIRST_SEGMENT
 
	`DWMAC_DESC_BIT32
(28)

	)

174 
	#DWMAC_DESC_ETX_DES0_DISABLE_CRC
 
	`DWMAC_DESC_BIT32
(27)

	)

175 
	#DWMAC_DESC_ETX_DES0_DISABLE_PAD
 
	`DWMAC_DESC_BIT32
(26)

	)

176 
	#DWMAC_DESC_ETX_DES0_TRANSMIT_TIMESTAMP_ENABLE
 
	`DWMAC_DESC_BIT32
(25)

	)

177 
	#DWMAC_DESC_ETX_DES0_CHECKSUM_INSERTION_CONTROL
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 22, 23)

	)

178 
	#DWMAC_DESC_ETX_DES0_CHECKSUM_INSERTION_CONTROL_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 22, 23)

	)

179 
	#DWMAC_DESC_ETX_DES0_CHECKSUM_INSERTION_CONTROL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 22, 23)

	)

180 
	#DWMAC_DESC_ETX_DES0_TRANSMIT_END_OF_RING
 
	`DWMAC_DESC_BIT32
(21)

	)

181 
	#DWMAC_DESC_ETX_DES0_SECOND_ADDR_CHAINED
 
	`DWMAC_DESC_BIT32
(20)

	)

182 
	#DWMAC_DESC_ETX_DES0_TRANSMIT_TIMESTAMP_STATUS
 
	`DWMAC_DESC_BIT32
(17)

	)

183 
	#DWMAC_DESC_ETX_DES0_IP_HEADER_ERROR
 
	`DWMAC_DESC_BIT32
(16)

	)

184 
	#DWMAC_DESC_ETX_DES0_ERROR_SUMMARY
 
	`DWMAC_DESC_BIT32
(15)

	)

185 
	#DWMAC_DESC_ETX_DES0_JABBER_TIMEOUT
 
	`DWMAC_DESC_BIT32
(14)

	)

186 
	#DWMAC_DESC_ETX_DES0_FRAME_FLUSHED
 
	`DWMAC_DESC_BIT32
(13)

	)

187 
	#DWMAC_DESC_ETX_DES0_IP_PAYLOAD_ERROR
 
	`DWMAC_DESC_BIT32
(12)

	)

188 
	#DWMAC_DESC_ETX_DES0_LOSS_OF_CARRIER
 
	`DWMAC_DESC_BIT32
(11)

	)

189 
	#DWMAC_DESC_ETX_DES0_NO_CARRIER
 
	`DWMAC_DESC_BIT32
(10)

	)

190 
	#DWMAC_DESC_ETX_DES0_EXCESSIVE_COLLISION
 
	`DWMAC_DESC_BIT32
(8)

	)

191 
	#DWMAC_DESC_ETX_DES0_VLAN_FRAME
 
	`DWMAC_DESC_BIT32
(7)

	)

192 
	#DWMAC_DESC_ETX_DES0_COLLISION_COUNT
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 3, 6)

	)

193 
	#DWMAC_DESC_ETX_DES0_COLLISION_COUNT_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 3, 6)

	)

194 
	#DWMAC_DESC_ETX_DES0_COLLISION_COUNT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 3, 6)

	)

195 
	#DWMAC_DESC_ETX_DES0_EXCESSIVE_DEFERAL
 
	`DWMAC_DESC_BIT32
(2)

	)

196 
	#DWMAC_DESC_ETX_DES0_UNDERFLOW_ERROR
 
	`DWMAC_DESC_BIT32
(1)

	)

197 
	#DWMAC_DESC_ETX_DES0_DEFERRED_BIT
 
	`DWMAC_DESC_BIT32
(0)

	)

198 
uöt32_t
 
	mdes1
;

199 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_2_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 16, 28)

	)

200 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_2_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 16, 28)

	)

201 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_2_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 16, 28)

	)

202 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_1_SIZE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 12)

	)

203 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_1_SIZE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 12)

	)

204 
	#DWMAC_DESC_ETX_DES1_TRANSMIT_BUFFER_1_SIZE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 12)

	)

205 
uöt32_t
 
	mdes2
;

206 
	#DWMAC_DESC_ETX_DES2_BUFF_1_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

207 
	#DWMAC_DESC_ETX_DES2_BUFF_1_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

208 
	#DWMAC_DESC_ETX_DES2_BUFF_1_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

209 
uöt32_t
 
	mdes3
;

210 
	#DWMAC_DESC_ETX_DES3_BUFF_2_ADDR_PTR
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

211 
	#DWMAC_DESC_ETX_DES3_BUFF_2_ADDR_PTR_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

212 
	#DWMAC_DESC_ETX_DES3_BUFF_2_ADDR_PTR_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

213 } 
	tdwmac_desc_ëx
;

216 
dwmac_desc_rx
 
	mrx
;

217 
dwmac_desc_tx
 
	mtx
;

218 
dwmac_desc_îx
 
	mîx
;

219 
dwmac_desc_ëx
 
	mëx
;

220 } 
	tdwmac_desc
;

223 
dwmac_desc_îx
 
	mdes0_3
;

224 
uöt32_t
 
	mdes4
;

225 
	#DWMAC_DESC_EXT_ERX_DES4_LAYER3_AND_LAYER4_FILTER_MATCHED
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 26, 27)

	)

226 
	#DWMAC_DESC_EXT_ERX_DES4_LAYER3_AND_LAYER4_FILTER_MATCHED_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 26, 27)

	)

227 
	#DWMAC_DESC_EXT_ERX_DES4_LAYER3_AND_LAYER4_FILTER_MATCHED_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 26, 27)

	)

228 
	#DWMAC_DESC_EXT_ERX_DES4_LAYER4_FILTER_MATCH
 
	`DWMAC_DESC_BIT32
(25)

	)

229 
	#DWMAC_DESC_EXT_ERX_DES4_LAYER3_FILTER_MATCH
 
	`DWMAC_DESC_BIT32
(24)

	)

230 
	#DWMAC_DESC_EXT_ERX_DES4_TIMESTAMP_DROPPED
 
	`DWMAC_DESC_BIT32
(14)

	)

231 
	#DWMAC_DESC_EXT_ERX_DES4_PTP_VERSION
 
	`DWMAC_DESC_BIT32
(13)

	)

232 
	#DWMAC_DESC_EXT_ERX_DES4_PTP_FRAME_TYPE
 
	`DWMAC_DESC_BIT32
(12)

	)

233 
	#DWMAC_DESC_EXT_ERX_DES4_MESSAGE_TYPE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 8, 11)

	)

234 
	#DWMAC_DESC_EXT_ERX_DES4_MESSAGE_TYPE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 8, 11)

	)

235 
	#DWMAC_DESC_EXT_ERX_DES4_MESSAGE_TYPE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 8, 11)

	)

236 
	#DWMAC_DESC_EXT_ERX_DES4_IPV6_PACKET_RECEIVED
 
	`DWMAC_DESC_BIT32
(7)

	)

237 
	#DWMAC_DESC_EXT_ERX_DES4_IPV4_PACKET_RECEIVED
 
	`DWMAC_DESC_BIT32
(6)

	)

238 
	#DWMAC_DESC_EXT_ERX_DES4_IP_CHECKSUM_BYPASSED
 
	`DWMAC_DESC_BIT32
(5)

	)

239 
	#DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_ERROR
 
	`DWMAC_DESC_BIT32
(4)

	)

240 
	#DWMAC_DESC_EXT_ERX_DES4_IP_HEADER_ERROR
 
	`DWMAC_DESC_BIT32
(3)

	)

241 
	#DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 2)

	)

242 
	#DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 2)

	)

243 
	#DWMAC_DESC_EXT_ERX_DES4_IP_PAYLOAD_TYPE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 2)

	)

244 
uöt32_t
 
	mdes5
;

245 
uöt32_t
 
	mdes6
;

246 
	#DWMAC_DESC_EXT_ERX_DES6_RECEIVE_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

247 
	#DWMAC_DESC_EXT_ERX_DES6_RECEIVE_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

248 
	#DWMAC_DESC_EXT_ERX_DES6_RECEIVE_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

249 
uöt32_t
 
	mdes7
;

250 
	#DWMAC_DESC_EXT_ERX_DES7_RECEIVE_FRAME_TIMESTAMP_HIGH
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

251 
	#DWMAC_DESC_EXT_ERX_DES7_RECEIVE_FRAME_TIMESTAMP_HIGH_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

252 
	#DWMAC_DESC_EXT_ERX_DES7_RECEIVE_FRAME_TIMESTAMP_HIGH_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

253 } 
	tdwmac_desc_ext_îx
;

256 
dwmac_desc_ëx
 
	mdes0_3
;

257 
uöt32_t
 
	mdes4
;

258 
uöt32_t
 
	mdes5
;

259 
uöt32_t
 
	mdes6
;

260 
	#DWMAC_DESC_EXT_ETX_DES6_TRANSMIT_FRAME_TIMESTAMP_LOW
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

261 
	#DWMAC_DESC_EXT_ETX_DES6_TRANSMIT_FRAME_TIMESTAMP_LOW_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

262 
	#DWMAC_DESC_EXT_ETX_DES6_TRANSMIT_FRAME_TIMESTAMP_LOW_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

263 
uöt32_t
 
	mdes7
;

264 
	#DWMAC_DESC_EXT_ETX_DES7_TRANSMIT_FRAME_TIMESTAMP_HIGH
(
vÆ
Ë
	`DWMAC_DESC_FLD32
(vÆ, 0, 31)

	)

265 
	#DWMAC_DESC_EXT_ETX_DES7_TRANSMIT_FRAME_TIMESTAMP_HIGH_GET
(
ªg
Ë
	`DWMAC_DESC_FLD32GET
‘eg, 0, 31)

	)

266 
	#DWMAC_DESC_EXT_ETX_DES7_TRANSMIT_FRAME_TIMESTAMP_HIGH_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_DESC_FLD32SET
‘eg, vÆ, 0, 31)

	)

267 } 
	tdwmac_desc_ext_ëx
;

270 
dwmac_desc_ext_îx
 
	mîx
;

271 
dwmac_desc_ext_ëx
 
	mëx
;

272 } 
	tdwmac_desc_ext
;

	@src/libchip/network/dwmac-regs.h

1 #i‚de‡
MAC_REGS_H


2 
	#MAC_REGS_H


	)

4 
	~<°döt.h
>

6 
	#DWMAC_REGS_BIT32
(
bô
) \

7 ((
uöt32_t
Ë(((uöt32_tË1Ë<< (
bô
)))

	)

9 
	#DWMAC_REGS_MSK32
(
fú°_bô
, 
œ°_bô
) \

10 ((
uöt32_t
Ë((
	`DWMAC_REGS_BIT32
((
œ°_bô
Ë- (
fú°_bô
Ë+ 1Ë- 1Ë<< (fú°_bô)))

	)

12 
	#DWMAC_REGS_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
) \

13 ((
uöt32_t
) \

14 ((((
uöt32_t
Ë(
vÆ
)Ë<< (
fú°_bô
)Ë& 
	`DWMAC_REGS_MSK32
(fú°_bô, 
œ°_bô
)))

	)

16 
	#DWMAC_REGS_FLD32GET
(
ªg
, 
fú°_bô
, 
œ°_bô
) \

17 ((
uöt32_t
Ë(((
ªg
Ë& 
	`DWMAC_REGS_MSK32
(
fú°_bô
, 
œ°_bô
)Ë>> (fú°_bô)))

	)

19 
	#DWMAC_REGS_FLD32SET
(
ªg
, 
vÆ
, 
fú°_bô
, 
œ°_bô
) \

20 ((
uöt32_t
Ë(((
ªg
Ë& ~
	`DWMAC_REGS_MSK32
(
fú°_bô
, 
œ°_bô
)) \

21 | 
	`DWMAC_REGS_FLD32
(
vÆ
, 
fú°_bô
, 
œ°_bô
)))

	)

24 
uöt32_t
 
	mhigh
;

25 
	#MAC_HIGH_ADDRHI
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 15)

	)

26 
	#MAC_HIGH_ADDRHI_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 15)

	)

27 
	#MAC_HIGH_ADDRHI_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 15)

	)

28 
	#MAC_HIGH_MBC0
 
	`DWMAC_REGS_BIT32
(24)

	)

29 
	#MAC_HIGH_MBC1
 
	`DWMAC_REGS_BIT32
(25)

	)

30 
	#MAC_HIGH_MBC2
 
	`DWMAC_REGS_BIT32
(26)

	)

31 
	#MAC_HIGH_MBC3
 
	`DWMAC_REGS_BIT32
(27)

	)

32 
	#MAC_HIGH_MBC4
 
	`DWMAC_REGS_BIT32
(28)

	)

33 
	#MAC_HIGH_MBC5
 
	`DWMAC_REGS_BIT32
(29)

	)

34 
	#MAC_HIGH_SA
 
	`DWMAC_REGS_BIT32
(30)

	)

35 
	#MAC_HIGH_AE
 
	`DWMAC_REGS_BIT32
(31)

	)

36 
uöt32_t
 
	mlow
;

37 
	#MAC_LOW_ADDRLO
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 32)

	)

38 
	#MAC_LOW_ADDRLO_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 32)

	)

39 
	#MAC_LOW_ADDRLO_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 32)

	)

40 } 
	tmac
;

43 
uöt32_t
 
	mmac_c⁄figuøti⁄
;

44 
	#MACGRP_MAC_CONFIGURATION_PRELEN
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 1)

	)

45 
	#MACGRP_MAC_CONFIGURATION_PRELEN_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 1)

	)

46 
	#MACGRP_MAC_CONFIGURATION_PRELEN_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 1)

	)

47 
	#MACGRP_MAC_CONFIGURATION_RE
 
	`DWMAC_REGS_BIT32
(2)

	)

48 
	#MACGRP_MAC_CONFIGURATION_TE
 
	`DWMAC_REGS_BIT32
(3)

	)

49 
	#MACGRP_MAC_CONFIGURATION_DC
 
	`DWMAC_REGS_BIT32
(4)

	)

50 
	#MACGRP_MAC_CONFIGURATION_BL
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 5, 6)

	)

51 
	#MACGRP_MAC_CONFIGURATION_BL_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 5, 6)

	)

52 
	#MACGRP_MAC_CONFIGURATION_BL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 5, 6)

	)

53 
	#MACGRP_MAC_CONFIGURATION_ACS
 
	`DWMAC_REGS_BIT32
(7)

	)

54 
	#MACGRP_MAC_CONFIGURATION_LUD
 
	`DWMAC_REGS_BIT32
(8)

	)

55 
	#MACGRP_MAC_CONFIGURATION_DR
 
	`DWMAC_REGS_BIT32
(9)

	)

56 
	#MACGRP_MAC_CONFIGURATION_IPC
 
	`DWMAC_REGS_BIT32
(10)

	)

57 
	#MACGRP_MAC_CONFIGURATION_DM
 
	`DWMAC_REGS_BIT32
(11)

	)

58 
	#MACGRP_MAC_CONFIGURATION_LM
 
	`DWMAC_REGS_BIT32
(12)

	)

59 
	#MACGRP_MAC_CONFIGURATION_DO
 
	`DWMAC_REGS_BIT32
(13)

	)

60 
	#MACGRP_MAC_CONFIGURATION_FES
 
	`DWMAC_REGS_BIT32
(14)

	)

61 
	#MACGRP_MAC_CONFIGURATION_PS
 
	`DWMAC_REGS_BIT32
(15)

	)

62 
	#MACGRP_MAC_CONFIGURATION_DCRS
 
	`DWMAC_REGS_BIT32
(16)

	)

63 
	#MACGRP_MAC_CONFIGURATION_IFG
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 17, 19)

	)

64 
	#MACGRP_MAC_CONFIGURATION_IFG_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 17, 19)

	)

65 
	#MACGRP_MAC_CONFIGURATION_IFG_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 17, 19)

	)

66 
	#MACGRP_MAC_CONFIGURATION_JE
 
	`DWMAC_REGS_BIT32
(20)

	)

67 
	#MACGRP_MAC_CONFIGURATION_BE
 
	`DWMAC_REGS_BIT32
(21)

	)

68 
	#MACGRP_MAC_CONFIGURATION_JD
 
	`DWMAC_REGS_BIT32
(22)

	)

69 
	#MACGRP_MAC_CONFIGURATION_WD
 
	`DWMAC_REGS_BIT32
(23)

	)

70 
	#MACGRP_MAC_CONFIGURATION_TC
 
	`DWMAC_REGS_BIT32
(24)

	)

71 
	#MACGRP_MAC_CONFIGURATION_CST
 
	`DWMAC_REGS_BIT32
(25)

	)

72 
	#MACGRP_MAC_CONFIGURATION_TWOKPE
 
	`DWMAC_REGS_BIT32
(27)

	)

73 
uöt32_t
 
	mmac_‰ame_fûãr
;

74 
	#MACGRP_MAC_FRAME_FILTER_PR
 
	`DWMAC_REGS_BIT32
(0)

	)

75 
	#MACGRP_MAC_FRAME_FILTER_HUC
 
	`DWMAC_REGS_BIT32
(1)

	)

76 
	#MACGRP_MAC_FRAME_FILTER_HMC
 
	`DWMAC_REGS_BIT32
(2)

	)

77 
	#MACGRP_MAC_FRAME_FILTER_DAIF
 
	`DWMAC_REGS_BIT32
(3)

	)

78 
	#MACGRP_MAC_FRAME_FILTER_PM
 
	`DWMAC_REGS_BIT32
(4)

	)

79 
	#MACGRP_MAC_FRAME_FILTER_DBF
 
	`DWMAC_REGS_BIT32
(5)

	)

80 
	#MACGRP_MAC_FRAME_FILTER_PCF
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 6, 7)

	)

81 
	#MACGRP_MAC_FRAME_FILTER_PCF_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 6, 7)

	)

82 
	#MACGRP_MAC_FRAME_FILTER_PCF_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 6, 7)

	)

83 
	#MACGRP_MAC_FRAME_FILTER_SAIF
 
	`DWMAC_REGS_BIT32
(8)

	)

84 
	#MACGRP_MAC_FRAME_FILTER_SAF
 
	`DWMAC_REGS_BIT32
(9)

	)

85 
	#MACGRP_MAC_FRAME_FILTER_HPF
 
	`DWMAC_REGS_BIT32
(10)

	)

86 
	#MACGRP_MAC_FRAME_FILTER_VTFE
 
	`DWMAC_REGS_BIT32
(16)

	)

87 
	#MACGRP_MAC_FRAME_FILTER_IPFE
 
	`DWMAC_REGS_BIT32
(20)

	)

88 
	#MACGRP_MAC_FRAME_FILTER_DNTU
 
	`DWMAC_REGS_BIT32
(21)

	)

89 
	#MACGRP_MAC_FRAME_FILTER_RA
 
	`DWMAC_REGS_BIT32
(31)

	)

90 
uöt32_t
 
	mª£rved_08
[2];

91 
uöt32_t
 
	mgmii_addªss
;

92 
	#MACGRP_GMII_ADDRESS_GMII_BUSY
 
	`DWMAC_REGS_BIT32
(0)

	)

93 
	#MACGRP_GMII_ADDRESS_GMII_WRITE
 
	`DWMAC_REGS_BIT32
(1)

	)

94 
	#MACGRP_GMII_ADDRESS_CSR_CLOCK_RANGE
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 2, 5)

	)

95 
	#MACGRP_GMII_ADDRESS_CSR_CLOCK_RANGE_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 2, 5)

	)

96 
	#MACGRP_GMII_ADDRESS_CSR_CLOCK_RANGE_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 2, 5)

	)

97 
	#MACGRP_GMII_ADDRESS_GMII_REGISTER
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 6, 10)

	)

98 
	#MACGRP_GMII_ADDRESS_GMII_REGISTER_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 6, 10)

	)

99 
	#MACGRP_GMII_ADDRESS_GMII_REGISTER_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 6, 10)

	)

100 
	#MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 11, 15)

	)

101 
	#MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 11, 15)

	)

102 
	#MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 11, 15)

	)

103 
uöt32_t
 
	mgmii_d©a
;

104 
	#MACGRP_GMII_DATA_GMII_DATA
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 15)

	)

105 
	#MACGRP_GMII_DATA_GMII_DATA_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 15)

	)

106 
	#MACGRP_GMII_DATA_GMII_DATA_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 15)

	)

107 
uöt32_t
 
	mª£rved_18
[9];

108 
uöt32_t
 
	möãºu±_mask
;

109 
	#MACGRP_INTERRUPT_MASK_RGSMIIIM
 
	`DWMAC_REGS_BIT32
(0)

	)

110 
	#MACGRP_INTERRUPT_MASK_PCSLCHGIM
 
	`DWMAC_REGS_BIT32
(1)

	)

111 
	#MACGRP_INTERRUPT_MASK_PCSANCIM
 
	`DWMAC_REGS_BIT32
(2)

	)

112 
	#MACGRP_INTERRUPT_MASK_TSIM
 
	`DWMAC_REGS_BIT32
(9)

	)

113 
	#MACGRP_INTERRUPT_MASK_LPIIM
 
	`DWMAC_REGS_BIT32
(10)

	)

114 
mac
 
	mmac_addr0_15
[16];

115 
uöt32_t
 
	mª£rved_c0
[16];

116 
uöt32_t
 
	mmmc_c⁄åﬁ
;

117 
	#MACGRP_MMC_CONTROL_CNTRST
 
	`DWMAC_REGS_BIT32
(0)

	)

118 
	#MACGRP_MMC_CONTROL_CNTSTOPRO
 
	`DWMAC_REGS_BIT32
(1)

	)

119 
	#MACGRP_MMC_CONTROL_RSTONRD
 
	`DWMAC_REGS_BIT32
(2)

	)

120 
	#MACGRP_MMC_CONTROL_CNTFREEZ
 
	`DWMAC_REGS_BIT32
(3)

	)

121 
	#MACGRP_MMC_CONTROL_CNTPRST
 
	`DWMAC_REGS_BIT32
(4)

	)

122 
	#MACGRP_MMC_CONTROL_CNTPRSTLVL
 
	`DWMAC_REGS_BIT32
(5)

	)

123 
	#MACGRP_MMC_CONTROL_UCDBC
 
	`DWMAC_REGS_BIT32
(8)

	)

124 
uöt32_t
 
	mmmc_ª˚ive_öãºu±
;

125 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXGBFRMIS
 
	`DWMAC_REGS_BIT32
(0)

	)

126 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXGBOCTIS
 
	`DWMAC_REGS_BIT32
(1)

	)

127 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXGOCTIS
 
	`DWMAC_REGS_BIT32
(2)

	)

128 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXBCGFIS
 
	`DWMAC_REGS_BIT32
(3)

	)

129 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXMCGFIS
 
	`DWMAC_REGS_BIT32
(4)

	)

130 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXCRCERFIS
 
	`DWMAC_REGS_BIT32
(5)

	)

131 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXALGNERFIS
 
	`DWMAC_REGS_BIT32
(6)

	)

132 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXRUNTFIS
 
	`DWMAC_REGS_BIT32
(7)

	)

133 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXJABERFIS
 
	`DWMAC_REGS_BIT32
(8)

	)

134 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXUSIZEGFIS
 
	`DWMAC_REGS_BIT32
(9)

	)

135 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXOSIZEGFIS
 
	`DWMAC_REGS_BIT32
(10)

	)

136 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX64OCTGBFIS
 
	`DWMAC_REGS_BIT32
(11)

	)

137 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX65T127OCTGBFIS
 
	`DWMAC_REGS_BIT32
(12)

	)

138 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX128T255OCTGBFIS
 
	`DWMAC_REGS_BIT32
(13)

	)

139 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX256T511OCTGBFIS
 
	`DWMAC_REGS_BIT32
(14)

	)

140 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX512T1023OCTGBFIS
 
	`DWMAC_REGS_BIT32
(15)

	)

141 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RX1024TMAXOCTGBFIS
 
	`DWMAC_REGS_BIT32
(16)

	)

142 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXUCGFIS
 
	`DWMAC_REGS_BIT32
(17)

	)

143 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXLENERFIS
 
	`DWMAC_REGS_BIT32
(18)

	)

144 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXORANGEFIS
 
	`DWMAC_REGS_BIT32
(19)

	)

145 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXPAUSFIS
 
	`DWMAC_REGS_BIT32
(20)

	)

146 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXFOVFIS
 
	`DWMAC_REGS_BIT32
(21)

	)

147 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXVLANGBFIS
 
	`DWMAC_REGS_BIT32
(22)

	)

148 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXWDOGFIS
 
	`DWMAC_REGS_BIT32
(23)

	)

149 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXRCVERRFIS
 
	`DWMAC_REGS_BIT32
(24)

	)

150 
	#MACGRP_MMC_RECEIVE_INTERRUPT_RXCTRLFIS
 
	`DWMAC_REGS_BIT32
(25)

	)

151 
uöt32_t
 
	mmmc_å™smô_öãºu±
;

152 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXGBOCTIS
 
	`DWMAC_REGS_BIT32
(0)

	)

153 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXGBFRMIS
 
	`DWMAC_REGS_BIT32
(1)

	)

154 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXBCGFIS
 
	`DWMAC_REGS_BIT32
(2)

	)

155 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXMCGFIS
 
	`DWMAC_REGS_BIT32
(3)

	)

156 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX64OCTGBFIS
 
	`DWMAC_REGS_BIT32
(4)

	)

157 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX65T127OCTGBFIS
 
	`DWMAC_REGS_BIT32
(5)

	)

158 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX128T255OCTGBFIS
 
	`DWMAC_REGS_BIT32
(6)

	)

159 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX256T511OCTGBFIS
 
	`DWMAC_REGS_BIT32
(7)

	)

160 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX512T1023OCTGBFIS
 
	`DWMAC_REGS_BIT32
(8)

	)

161 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TX1024TMAXOCTGBFIS
 
	`DWMAC_REGS_BIT32
(9)

	)

162 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXUCGBFIS
 
	`DWMAC_REGS_BIT32
(10)

	)

163 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXMCGBFIS
 
	`DWMAC_REGS_BIT32
(11)

	)

164 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXBCGBFIS
 
	`DWMAC_REGS_BIT32
(12)

	)

165 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXUFLOWERFIS
 
	`DWMAC_REGS_BIT32
(13)

	)

166 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXSCOLGFIS
 
	`DWMAC_REGS_BIT32
(14)

	)

167 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXMCOLGFIS
 
	`DWMAC_REGS_BIT32
(15)

	)

168 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXDEFFIS
 
	`DWMAC_REGS_BIT32
(16)

	)

169 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXLATCOLFIS
 
	`DWMAC_REGS_BIT32
(17)

	)

170 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXEXCOLFIS
 
	`DWMAC_REGS_BIT32
(18)

	)

171 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXCARERFIS
 
	`DWMAC_REGS_BIT32
(19)

	)

172 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXGOCTIS
 
	`DWMAC_REGS_BIT32
(20)

	)

173 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXGFRMIS
 
	`DWMAC_REGS_BIT32
(21)

	)

174 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXEXDEFFIS
 
	`DWMAC_REGS_BIT32
(22)

	)

175 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXPAUSFIS
 
	`DWMAC_REGS_BIT32
(23)

	)

176 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXVLANGFIS
 
	`DWMAC_REGS_BIT32
(24)

	)

177 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_TXOSIZEGFIS
 
	`DWMAC_REGS_BIT32
(25)

	)

178 
uöt32_t
 
	mmmc_ª˚ive_öãºu±_mask
;

179 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXGBFRMIM
 
	`DWMAC_REGS_BIT32
(0)

	)

180 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXGBOCTIM
 
	`DWMAC_REGS_BIT32
(1)

	)

181 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXGOCTIM
 
	`DWMAC_REGS_BIT32
(2)

	)

182 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXBCGFIM
 
	`DWMAC_REGS_BIT32
(3)

	)

183 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXMCGFIM
 
	`DWMAC_REGS_BIT32
(4)

	)

184 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXCRCERFIM
 
	`DWMAC_REGS_BIT32
(5)

	)

185 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXALGNERFIM
 
	`DWMAC_REGS_BIT32
(6)

	)

186 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXRUNTFIM
 
	`DWMAC_REGS_BIT32
(7)

	)

187 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXJABERFIM
 
	`DWMAC_REGS_BIT32
(8)

	)

188 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXUSIZEGFIM
 
	`DWMAC_REGS_BIT32
(9)

	)

189 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXOSIZEGFIM
 
	`DWMAC_REGS_BIT32
(10)

	)

190 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX64OCTGBFIM
 
	`DWMAC_REGS_BIT32
(11)

	)

191 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX65T127OCTGBFIM
 
	`DWMAC_REGS_BIT32
(12)

	)

192 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX128T255OCTGBFIM
 
	`DWMAC_REGS_BIT32
(13)

	)

193 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX256T511OCTGBFIM
 
	`DWMAC_REGS_BIT32
(14)

	)

194 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX512T1023OCTGBFIM
 
	`DWMAC_REGS_BIT32
(15)

	)

195 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RX1024TMAXOCTGBFIM
 
	`DWMAC_REGS_BIT32
(16)

	)

196 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXUCGFIM
 
	`DWMAC_REGS_BIT32
(17)

	)

197 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXLENERFIM
 
	`DWMAC_REGS_BIT32
(18)

	)

198 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXORANGEFIM
 
	`DWMAC_REGS_BIT32
(19)

	)

199 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXPAUSFIM
 
	`DWMAC_REGS_BIT32
(20)

	)

200 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXFOVFIM
 
	`DWMAC_REGS_BIT32
(21)

	)

201 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXVLANGBFIM
 
	`DWMAC_REGS_BIT32
(22)

	)

202 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXWDOGFIM
 
	`DWMAC_REGS_BIT32
(23)

	)

203 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXRCVERRFIM
 
	`DWMAC_REGS_BIT32
(24)

	)

204 
	#MACGRP_MMC_RECEIVE_INTERRUPT_MASK_RXCTRLFIM
 
	`DWMAC_REGS_BIT32
(25)

	)

205 
uöt32_t
 
	mmmc_å™smô_öãºu±_mask
;

206 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXGBOCTIM
 
	`DWMAC_REGS_BIT32
(0)

	)

207 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXGBFRMIM
 
	`DWMAC_REGS_BIT32
(1)

	)

208 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXBCGFIM
 
	`DWMAC_REGS_BIT32
(2)

	)

209 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXMCGFIM
 
	`DWMAC_REGS_BIT32
(3)

	)

210 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX64OCTGBFIM
 
	`DWMAC_REGS_BIT32
(4)

	)

211 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX65T127OCTGBFIM
 
	`DWMAC_REGS_BIT32
(5)

	)

212 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX128T255OCTGBFIM
 
	`DWMAC_REGS_BIT32
(6)

	)

213 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX256T511OCTGBFIM
 
	`DWMAC_REGS_BIT32
(7)

	)

214 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX512T1023OCTGBFIM
 
	`DWMAC_REGS_BIT32
(8)

	)

215 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TX1024TMAXOCTGBFIM
 
	`DWMAC_REGS_BIT32
(9)

	)

216 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXUCGBFIM
 
	`DWMAC_REGS_BIT32
(10)

	)

217 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXMCGBFIM
 
	`DWMAC_REGS_BIT32
(11)

	)

218 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXBCGBFIM
 
	`DWMAC_REGS_BIT32
(12)

	)

219 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXUFLOWERFIM
 
	`DWMAC_REGS_BIT32
(13)

	)

220 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXSCOLGFIM
 
	`DWMAC_REGS_BIT32
(14)

	)

221 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXMCOLGFIM
 
	`DWMAC_REGS_BIT32
(15)

	)

222 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXDEFFIM
 
	`DWMAC_REGS_BIT32
(16)

	)

223 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXLATCOLFIM
 
	`DWMAC_REGS_BIT32
(17)

	)

224 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXEXCOLFIM
 
	`DWMAC_REGS_BIT32
(18)

	)

225 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXCARERFIM
 
	`DWMAC_REGS_BIT32
(19)

	)

226 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXGOCTIM
 
	`DWMAC_REGS_BIT32
(20)

	)

227 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXGFRMIM
 
	`DWMAC_REGS_BIT32
(21)

	)

228 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXEXDEFFIM
 
	`DWMAC_REGS_BIT32
(22)

	)

229 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXPAUSFIM
 
	`DWMAC_REGS_BIT32
(23)

	)

230 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXVLANGFIM
 
	`DWMAC_REGS_BIT32
(24)

	)

231 
	#MACGRP_MMC_TRANSMIT_INTERRUPT_MASK_TXOSIZEGFIM
 
	`DWMAC_REGS_BIT32
(25)

	)

232 
uöt32_t
 
	mtxo˘ëcou¡_gb
;

233 
uöt32_t
 
	mtx‰amecou¡_gb
;

234 
uöt32_t
 
	mtxbrﬂdˇ°‰ames_g
;

235 
uöt32_t
 
	mtxmu…iˇ°‰ames_g
;

236 
uöt32_t
 
	mtx64o˘ës_gb
;

237 
uöt32_t
 
	mtx65to127o˘ës_gb
;

238 
uöt32_t
 
	mtx128to255o˘ës_gb
;

239 
uöt32_t
 
	mtx256to511o˘ës_gb
;

240 
uöt32_t
 
	mtx512to1023o˘ës_gb
;

241 
uöt32_t
 
	mtx1024tomaxo˘ës_gb
;

242 
uöt32_t
 
	mtxuniˇ°‰ames_gb
;

243 
uöt32_t
 
	mtxmu…iˇ°‰ames_gb
;

244 
uöt32_t
 
	mtxbrﬂdˇ°‰ames_gb
;

245 
uöt32_t
 
	mtxundîÊowîr‹
;

246 
uöt32_t
 
	mtxsögÀcﬁ_g
;

247 
uöt32_t
 
	mtxmu…icﬁ_g
;

248 
uöt32_t
 
	mtxde„ºed
;

249 
uöt32_t
 
	mtxœãcﬁ
;

250 
uöt32_t
 
	mtxexesscﬁ
;

251 
uöt32_t
 
	mtxˇºõªº
;

252 
uöt32_t
 
	mtxo˘ë˙t
;

253 
uöt32_t
 
	mtx‰amecou¡_g
;

254 
uöt32_t
 
	mtxex˚ssdef
;

255 
uöt32_t
 
	mtx∑u£‰ames
;

256 
uöt32_t
 
	mtxvœn‰ames_g
;

257 
uöt32_t
 
	mtxovîsize_g
;

258 
uöt32_t
 
	mª£rved_17c
;

259 
uöt32_t
 
	mrx‰amecou¡_gb
;

260 
uöt32_t
 
	mrxo˘ëcou¡_gb
;

261 
uöt32_t
 
	mrxo˘ëcou¡_g
;

262 
uöt32_t
 
	mrxbrﬂdˇ°‰ames_g
;

263 
uöt32_t
 
	mrxmu…iˇ°‰ames_g
;

264 
uöt32_t
 
	mrx¸˚º‹
;

265 
uöt32_t
 
	mrxÆignmíãº‹
;

266 
uöt32_t
 
	mrxru¡îr‹
;

267 
uöt32_t
 
	mrxjabbîîr‹
;

268 
uöt32_t
 
	mrxundîsize_g
;

269 
uöt32_t
 
	mrxovîsize_g
;

270 
uöt32_t
 
	mrx64o˘ës_gb
;

271 
uöt32_t
 
	mrx65to127o˘ës_gb
;

272 
uöt32_t
 
	mrx128to255o˘ës_gb
;

273 
uöt32_t
 
	mrx256to511o˘ës_gb
;

274 
uöt32_t
 
	mrx512to1023o˘ës_gb
;

275 
uöt32_t
 
	mrx1024tomaxo˘ës_gb
;

276 
uöt32_t
 
	mrxuniˇ°‰ames_g
;

277 
uöt32_t
 
	mrxÀngthîr‹
;

278 
uöt32_t
 
	mrxouto‰™gëy≥
;

279 
uöt32_t
 
	mrx∑u£‰ames
;

280 
uöt32_t
 
	mrxfifoovîÊow
;

281 
uöt32_t
 
	mrxvœn‰ames_gb
;

282 
uöt32_t
 
	mrxw©chdogîr‹
;

283 
uöt32_t
 
	mrxrcvîr‹
;

284 
uöt32_t
 
	mrx˘æ‰ames_g
;

285 
uöt32_t
 
	mª£rved_1e8
[6];

286 
uöt32_t
 
	mmmc_ùc_ª˚ive_öãºu±_mask
;

287 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4GFIM
 
	`DWMAC_REGS_BIT32
(0)

	)

288 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4HERFIM
 
	`DWMAC_REGS_BIT32
(1)

	)

289 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4NOPAYFIM
 
	`DWMAC_REGS_BIT32
(2)

	)

290 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4FRAGFIM
 
	`DWMAC_REGS_BIT32
(3)

	)

291 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4UDSBLFIM
 
	`DWMAC_REGS_BIT32
(4)

	)

292 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6GFIM
 
	`DWMAC_REGS_BIT32
(5)

	)

293 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6HERFIM
 
	`DWMAC_REGS_BIT32
(6)

	)

294 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6NOPAYFIM
 
	`DWMAC_REGS_BIT32
(7)

	)

295 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXUDPGFIM
 
	`DWMAC_REGS_BIT32
(8)

	)

296 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXUDPERFIM
 
	`DWMAC_REGS_BIT32
(9)

	)

297 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXTCPGFIM
 
	`DWMAC_REGS_BIT32
(10)

	)

298 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXTCPERFIM
 
	`DWMAC_REGS_BIT32
(11)

	)

299 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXICMPGFIM
 
	`DWMAC_REGS_BIT32
(12)

	)

300 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXICMPERFIM
 
	`DWMAC_REGS_BIT32
(13)

	)

301 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4GOIM
 
	`DWMAC_REGS_BIT32
(16)

	)

302 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4HEROIM
 
	`DWMAC_REGS_BIT32
(17)

	)

303 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4NOPAYOIM
 
	`DWMAC_REGS_BIT32
(18)

	)

304 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4FRAGOIM
 
	`DWMAC_REGS_BIT32
(19)

	)

305 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV4UDSBLOIM
 
	`DWMAC_REGS_BIT32
(20)

	)

306 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6GOIM
 
	`DWMAC_REGS_BIT32
(21)

	)

307 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6HEROIM
 
	`DWMAC_REGS_BIT32
(22)

	)

308 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXIPV6NOPAYOIM
 
	`DWMAC_REGS_BIT32
(23)

	)

309 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXUDPGOIM
 
	`DWMAC_REGS_BIT32
(24)

	)

310 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXUDPEROIM
 
	`DWMAC_REGS_BIT32
(25)

	)

311 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXTCPGOIM
 
	`DWMAC_REGS_BIT32
(26)

	)

312 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXTCPEROIM
 
	`DWMAC_REGS_BIT32
(27)

	)

313 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXICMPGOIM
 
	`DWMAC_REGS_BIT32
(28)

	)

314 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_MASK_RXICMPEROIM
 
	`DWMAC_REGS_BIT32
(29)

	)

315 
uöt32_t
 
	mª£rved_204
;

316 
uöt32_t
 
	mmmc_ùc_ª˚ive_öãºu±
;

317 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4GFIS
 
	`DWMAC_REGS_BIT32
(0)

	)

318 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4HERFIS
 
	`DWMAC_REGS_BIT32
(1)

	)

319 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4NOPAYFIS
 
	`DWMAC_REGS_BIT32
(2)

	)

320 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4FRAGFIS
 
	`DWMAC_REGS_BIT32
(3)

	)

321 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4UDSBLFIS
 
	`DWMAC_REGS_BIT32
(4)

	)

322 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6GFIS
 
	`DWMAC_REGS_BIT32
(5)

	)

323 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6HERFIS
 
	`DWMAC_REGS_BIT32
(6)

	)

324 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6NOPAYFIS
 
	`DWMAC_REGS_BIT32
(7)

	)

325 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXUDPGFIS
 
	`DWMAC_REGS_BIT32
(8)

	)

326 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXUDPERFIS
 
	`DWMAC_REGS_BIT32
(9)

	)

327 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXTCPGFIS
 
	`DWMAC_REGS_BIT32
(10)

	)

328 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXTCPERFIS
 
	`DWMAC_REGS_BIT32
(11)

	)

329 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXICMPGFIS
 
	`DWMAC_REGS_BIT32
(12)

	)

330 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXICMPERFIS
 
	`DWMAC_REGS_BIT32
(13)

	)

331 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4GOIS
 
	`DWMAC_REGS_BIT32
(16)

	)

332 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4HEROIS
 
	`DWMAC_REGS_BIT32
(17)

	)

333 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4NOPAYOIS
 
	`DWMAC_REGS_BIT32
(18)

	)

334 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4FRAGOIS
 
	`DWMAC_REGS_BIT32
(19)

	)

335 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV4UDSBLOIS
 
	`DWMAC_REGS_BIT32
(20)

	)

336 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6GOIS
 
	`DWMAC_REGS_BIT32
(21)

	)

337 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6HEROIS
 
	`DWMAC_REGS_BIT32
(22)

	)

338 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXIPV6NOPAYOIS
 
	`DWMAC_REGS_BIT32
(23)

	)

339 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXUDPGOIS
 
	`DWMAC_REGS_BIT32
(24)

	)

340 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXUDPEROIS
 
	`DWMAC_REGS_BIT32
(25)

	)

341 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXTCPGOIS
 
	`DWMAC_REGS_BIT32
(26)

	)

342 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXTCPEROIS
 
	`DWMAC_REGS_BIT32
(27)

	)

343 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXICMPGOIS
 
	`DWMAC_REGS_BIT32
(28)

	)

344 
	#MACGRP_MMC_IPC_RECEIVE_INTERRUPT_RXICMPEROIS
 
	`DWMAC_REGS_BIT32
(29)

	)

345 
uöt32_t
 
	mª£rved_20c
;

346 
uöt32_t
 
	mrxùv4_gd_‰ms
;

347 
uöt32_t
 
	mrxùv4_hdªº_‰ms
;

348 
uöt32_t
 
	mrxùv4_n›ay_‰ms
;

349 
uöt32_t
 
	mrxùv4_‰ag_‰ms
;

350 
uöt32_t
 
	mrxùv4_udsbl_‰ms
;

351 
uöt32_t
 
	mrxùv6_gd_‰ms
;

352 
uöt32_t
 
	mrxùv6_hdªº_‰ms
;

353 
uöt32_t
 
	mrxùv6_n›ay_‰ms
;

354 
uöt32_t
 
	mrxudp_gd_‰ms
;

355 
uöt32_t
 
	mrxudp_îr_‰ms
;

356 
uöt32_t
 
	mrxt˝_gd_‰ms
;

357 
uöt32_t
 
	mrxt˝_îr_‰ms
;

358 
uöt32_t
 
	mrxicmp_gd_‰ms
;

359 
uöt32_t
 
	mrxicmp_îr_‰ms
;

360 
uöt32_t
 
	mª£rved_248
[2];

361 
uöt32_t
 
	mrxùv4_gd_o˘ës
;

362 
uöt32_t
 
	mrxùv4_hdªº_o˘ës
;

363 
uöt32_t
 
	mrxùv4_n›ay_o˘ës
;

364 
uöt32_t
 
	mrxùv4_‰ag_o˘ës
;

365 
uöt32_t
 
	mrxùv4_udsbl_o˘ës
;

366 
uöt32_t
 
	mrxùv6_gd_o˘ës
;

367 
uöt32_t
 
	mrxùv6_hdªº_o˘ës
;

368 
uöt32_t
 
	mrxùv6_n›ay_o˘ës
;

369 
uöt32_t
 
	mrxudp_gd_o˘ës
;

370 
uöt32_t
 
	mrxudp_îr_o˘ës
;

371 
uöt32_t
 
	mrxt˝_gd_o˘ës
;

372 
uöt32_t
 
	mrxt˝îro˘ës
;

373 
uöt32_t
 
	mrxicmp_gd_o˘ës
;

374 
uöt32_t
 
	mrxicmp_îr_o˘ës
;

375 
uöt32_t
 
	mª£rved_288
[158];

376 
uöt32_t
 
	mhash_èbÀ_ªg
[8];

377 
uöt32_t
 
	mª£rved_520
[184];

378 
mac
 
	mmac_addr16_127
[112];

379 } 
	tmacgΩ
;

382 
uöt32_t
 
	mbus_mode
;

383 
	#DMAGRP_BUS_MODE_SWR
 
	`DWMAC_REGS_BIT32
(0)

	)

384 
	#DMAGRP_BUS_MODE_DSL
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 2, 6)

	)

385 
	#DMAGRP_BUS_MODE_DSL_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 2, 6)

	)

386 
	#DMAGRP_BUS_MODE_DSL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 2, 6)

	)

387 
	#DMAGRP_BUS_MODE_ATDS
 
	`DWMAC_REGS_BIT32
(7)

	)

388 
	#DMAGRP_BUS_MODE_PBL
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 8, 13)

	)

389 
	#DMAGRP_BUS_MODE_PBL_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 8, 13)

	)

390 
	#DMAGRP_BUS_MODE_PBL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 8, 13)

	)

391 
	#DMAGRP_BUS_MODE_FB
 
	`DWMAC_REGS_BIT32
(16)

	)

392 
	#DMAGRP_BUS_MODE_RPBL
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 17, 22)

	)

393 
	#DMAGRP_BUS_MODE_RPBL_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 17, 22)

	)

394 
	#DMAGRP_BUS_MODE_RPBL_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 17, 22)

	)

395 
	#DMAGRP_BUS_MODE_USP
 
	`DWMAC_REGS_BIT32
(23)

	)

396 
	#DMAGRP_BUS_MODE_EIGHTXPBL
 
	`DWMAC_REGS_BIT32
(24)

	)

397 
	#DMAGRP_BUS_MODE_AAL
 
	`DWMAC_REGS_BIT32
(25)

	)

398 
	#DMAGRP_BUS_MODE_MB
 
	`DWMAC_REGS_BIT32
(26)

	)

399 
uöt32_t
 
	må™smô_pﬁl_dem™d
;

400 
	#DMAGRP_TRANSMIT_POLL_DEMAND_TPD
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 31)

	)

401 
	#DMAGRP_TRANSMIT_POLL_DEMAND_TPD_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 31)

	)

402 
	#DMAGRP_TRANSMIT_POLL_DEMAND_TPD_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 31)

	)

403 
uöt32_t
 
	mª˚ive_pﬁl_dem™d
;

404 
	#DMAGRP_RECEIVE_POLL_DEMAND_RPD
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 0, 31)

	)

405 
	#DMAGRP_RECEIVE_POLL_DEMAND_RPD_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 0, 31)

	)

406 
	#DMAGRP_RECEIVE_POLL_DEMAND_RPD_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 0, 31)

	)

407 
uöt32_t
 
	mª˚ive_des¸_li°_addr
;

408 
	#DMAGRP_RECEIVE_DESCR_LIST_ADDR_RDESLA_32BIT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 2, 31)

	)

409 
	#DMAGRP_RECEIVE_DESCR_LIST_ADDR_RDESLA_32BIT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 2, 31)

	)

410 
	#DMAGRP_RECEIVE_DESCR_LIST_ADDR_RDESLA_32BIT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 2, 31)

	)

411 
uöt32_t
 
	må™smô_des¸_li°_addr
;

412 
	#DMAGRP_TRANSMIT_DESCR_LIST_ADDR_TDESLA_32BIT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 2, 31)

	)

413 
	#DMAGRP_TRANSMIT_DESCR_LIST_ADDR_TDESLA_32BIT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 2, 31)

	)

414 
	#DMAGRP_TRANSMIT_DESCR_LIST_ADDR_TDESLA_32BIT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 2, 31)

	)

415 
uöt32_t
 
	m°©us
;

416 
	#DMAGRP_STATUS_TI
 
	`DWMAC_REGS_BIT32
(0)

	)

417 
	#DMAGRP_STATUS_TPS
 
	`DWMAC_REGS_BIT32
(1)

	)

418 
	#DMAGRP_STATUS_TU
 
	`DWMAC_REGS_BIT32
(2)

	)

419 
	#DMAGRP_STATUS_TJT
 
	`DWMAC_REGS_BIT32
(3)

	)

420 
	#DMAGRP_STATUS_OVF
 
	`DWMAC_REGS_BIT32
(4)

	)

421 
	#DMAGRP_STATUS_UNF
 
	`DWMAC_REGS_BIT32
(5)

	)

422 
	#DMAGRP_STATUS_RI
 
	`DWMAC_REGS_BIT32
(6)

	)

423 
	#DMAGRP_STATUS_RU
 
	`DWMAC_REGS_BIT32
(7)

	)

424 
	#DMAGRP_STATUS_RPS
 
	`DWMAC_REGS_BIT32
(8)

	)

425 
	#DMAGRP_STATUS_RWT
 
	`DWMAC_REGS_BIT32
(9)

	)

426 
	#DMAGRP_STATUS_ETI
 
	`DWMAC_REGS_BIT32
(10)

	)

427 
	#DMAGRP_STATUS_FBI
 
	`DWMAC_REGS_BIT32
(13)

	)

428 
	#DMAGRP_STATUS_ERI
 
	`DWMAC_REGS_BIT32
(14)

	)

429 
	#DMAGRP_STATUS_AIS
 
	`DWMAC_REGS_BIT32
(15)

	)

430 
	#DMAGRP_STATUS_NIS
 
	`DWMAC_REGS_BIT32
(16)

	)

431 
	#DMAGRP_STATUS_RS
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 17, 19)

	)

432 
	#DMAGRP_STATUS_RS_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 17, 19)

	)

433 
	#DMAGRP_STATUS_RS_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 17, 19)

	)

434 
	#DMAGRP_STATUS_TS
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 20, 22)

	)

435 
	#DMAGRP_STATUS_TS_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 20, 22)

	)

436 
	#DMAGRP_STATUS_TS_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 20, 22)

	)

437 
	#DMAGRP_STATUS_EB
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 23, 25)

	)

438 
	#DMAGRP_STATUS_EB_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 23, 25)

	)

439 
	#DMAGRP_STATUS_EB_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 23, 25)

	)

440 
	#DMAGRP_STATUS_GLI
 
	`DWMAC_REGS_BIT32
(26)

	)

441 
	#DMAGRP_STATUS_GMI
 
	`DWMAC_REGS_BIT32
(27)

	)

442 
	#DMAGRP_STATUS_TTI
 
	`DWMAC_REGS_BIT32
(29)

	)

443 
	#DMAGRP_STATUS_GLPII
 
	`DWMAC_REGS_BIT32
(30)

	)

444 
uöt32_t
 
	m›î©i⁄_mode
;

445 
	#DMAGRP_OPERATION_MODE_SR
 
	`DWMAC_REGS_BIT32
(1)

	)

446 
	#DMAGRP_OPERATION_MODE_OSF
 
	`DWMAC_REGS_BIT32
(2)

	)

447 
	#DMAGRP_OPERATION_MODE_RTC
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 3, 4)

	)

448 
	#DMAGRP_OPERATION_MODE_RTC_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 3, 4)

	)

449 
	#DMAGRP_OPERATION_MODE_RTC_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 3, 4)

	)

450 
	#DMAGRP_OPERATION_MODE_FUF
 
	`DWMAC_REGS_BIT32
(6)

	)

451 
	#DMAGRP_OPERATION_MODE_FEF
 
	`DWMAC_REGS_BIT32
(7)

	)

452 
	#DMAGRP_OPERATION_MODE_EFC
 
	`DWMAC_REGS_BIT32
(8)

	)

453 
	#DMAGRP_OPERATION_MODE_RFA
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 9, 10)

	)

454 
	#DMAGRP_OPERATION_MODE_RFA_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 9, 10)

	)

455 
	#DMAGRP_OPERATION_MODE_RFA_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 9, 10)

	)

456 
	#DMAGRP_OPERATION_MODE_RFD
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 11, 12)

	)

457 
	#DMAGRP_OPERATION_MODE_RFD_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 11, 12)

	)

458 
	#DMAGRP_OPERATION_MODE_RFD_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 11, 12)

	)

459 
	#DMAGRP_OPERATION_MODE_ST
 
	`DWMAC_REGS_BIT32
(13)

	)

460 
	#DMAGRP_OPERATION_MODE_TTC
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 14, 16)

	)

461 
	#DMAGRP_OPERATION_MODE_TTC_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 14, 16)

	)

462 
	#DMAGRP_OPERATION_MODE_TTC_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 14, 16)

	)

463 
	#DMAGRP_OPERATION_MODE_FTF
 
	`DWMAC_REGS_BIT32
(20)

	)

464 
	#DMAGRP_OPERATION_MODE_TSF
 
	`DWMAC_REGS_BIT32
(21)

	)

465 
	#DMAGRP_OPERATION_MODE_DFF
 
	`DWMAC_REGS_BIT32
(24)

	)

466 
	#DMAGRP_OPERATION_MODE_RSF
 
	`DWMAC_REGS_BIT32
(25)

	)

467 
	#DMAGRP_OPERATION_MODE_DT
 
	`DWMAC_REGS_BIT32
(26)

	)

468 
uöt32_t
 
	möãºu±_íabÀ
;

469 
	#DMAGRP_INTERRUPT_ENABLE_TIE
 
	`DWMAC_REGS_BIT32
(0)

	)

470 
	#DMAGRP_INTERRUPT_ENABLE_TSE
 
	`DWMAC_REGS_BIT32
(1)

	)

471 
	#DMAGRP_INTERRUPT_ENABLE_TUE
 
	`DWMAC_REGS_BIT32
(2)

	)

472 
	#DMAGRP_INTERRUPT_ENABLE_TJE
 
	`DWMAC_REGS_BIT32
(3)

	)

473 
	#DMAGRP_INTERRUPT_ENABLE_OVE
 
	`DWMAC_REGS_BIT32
(4)

	)

474 
	#DMAGRP_INTERRUPT_ENABLE_UNE
 
	`DWMAC_REGS_BIT32
(5)

	)

475 
	#DMAGRP_INTERRUPT_ENABLE_RIE
 
	`DWMAC_REGS_BIT32
(6)

	)

476 
	#DMAGRP_INTERRUPT_ENABLE_RUE
 
	`DWMAC_REGS_BIT32
(7)

	)

477 
	#DMAGRP_INTERRUPT_ENABLE_RSE
 
	`DWMAC_REGS_BIT32
(8)

	)

478 
	#DMAGRP_INTERRUPT_ENABLE_RWE
 
	`DWMAC_REGS_BIT32
(9)

	)

479 
	#DMAGRP_INTERRUPT_ENABLE_ETE
 
	`DWMAC_REGS_BIT32
(10)

	)

480 
	#DMAGRP_INTERRUPT_ENABLE_FBE
 
	`DWMAC_REGS_BIT32
(13)

	)

481 
	#DMAGRP_INTERRUPT_ENABLE_ERE
 
	`DWMAC_REGS_BIT32
(14)

	)

482 
	#DMAGRP_INTERRUPT_ENABLE_AIE
 
	`DWMAC_REGS_BIT32
(15)

	)

483 
	#DMAGRP_INTERRUPT_ENABLE_NIE
 
	`DWMAC_REGS_BIT32
(16)

	)

484 
uöt32_t
 
	mª£rved_20
[2];

485 
uöt32_t
 
	maxi_bus_mode
;

486 
	#DMAGRP_AXI_BUS_MODE_UNDEFINED
 
	`DWMAC_REGS_BIT32
(0)

	)

487 
	#DMAGRP_AXI_BUS_MODE_BLEND4
 
	`DWMAC_REGS_BIT32
(1)

	)

488 
	#DMAGRP_AXI_BUS_MODE_BLEND8
 
	`DWMAC_REGS_BIT32
(2)

	)

489 
	#DMAGRP_AXI_BUS_MODE_BLEND16
 
	`DWMAC_REGS_BIT32
(3)

	)

490 
	#DMAGRP_AXI_BUS_MODE_AXI_AAL
 
	`DWMAC_REGS_BIT32
(12)

	)

491 
	#DMAGRP_AXI_BUS_MODE_ONEKBBE
 
	`DWMAC_REGS_BIT32
(13)

	)

492 
	#DMAGRP_AXI_BUS_MODE_RD_OSR_LMT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 16, 19)

	)

493 
	#DMAGRP_AXI_BUS_MODE_RD_OSR_LMT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 16, 19)

	)

494 
	#DMAGRP_AXI_BUS_MODE_RD_OSR_LMT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 16, 19)

	)

495 
	#DMAGRP_AXI_BUS_MODE_WR_OSR_LMT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 20, 23)

	)

496 
	#DMAGRP_AXI_BUS_MODE_WR_OSR_LMT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 20, 23)

	)

497 
	#DMAGRP_AXI_BUS_MODE_WR_OSR_LMT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 20, 23)

	)

498 
	#DMAGRP_AXI_BUS_MODE_LPI_XIT_FRM
 
	`DWMAC_REGS_BIT32
(30)

	)

499 
	#DMAGRP_AXI_BUS_MODE_EN_LPI
 
	`DWMAC_REGS_BIT32
(31)

	)

500 
uöt32_t
 
	mª£rved_2c
[11];

501 
uöt32_t
 
	mhw_„©uª
;

502 
	#DMAGRP_HW_FEATURE_MIISEL
 
	`DWMAC_REGS_BIT32
(0)

	)

503 
	#DMAGRP_HW_FEATURE_GMIISEL
 
	`DWMAC_REGS_BIT32
(1)

	)

504 
	#DMAGRP_HW_FEATURE_HDSEL
 
	`DWMAC_REGS_BIT32
(2)

	)

505 
	#DMAGRP_HW_FEATURE_HASHSEL
 
	`DWMAC_REGS_BIT32
(4)

	)

506 
	#DMAGRP_HW_FEATURE_ADDMACADRSEL
 
	`DWMAC_REGS_BIT32
(5)

	)

507 
	#DMAGRP_HW_FEATURE_PCSSEL
 
	`DWMAC_REGS_BIT32
(6)

	)

508 
	#DMAGRP_HW_FEATURE_SMASEL
 
	`DWMAC_REGS_BIT32
(8)

	)

509 
	#DMAGRP_HW_FEATURE_RWKSEL
 
	`DWMAC_REGS_BIT32
(9)

	)

510 
	#DMAGRP_HW_FEATURE_MGKSEL
 
	`DWMAC_REGS_BIT32
(10)

	)

511 
	#DMAGRP_HW_FEATURE_MMCSEL
 
	`DWMAC_REGS_BIT32
(11)

	)

512 
	#DMAGRP_HW_FEATURE_TSVER1SEL
 
	`DWMAC_REGS_BIT32
(12)

	)

513 
	#DMAGRP_HW_FEATURE_TSVER2SEL
 
	`DWMAC_REGS_BIT32
(13)

	)

514 
	#DMAGRP_HW_FEATURE_EEESEL
 
	`DWMAC_REGS_BIT32
(14)

	)

515 
	#DMAGRP_HW_FEATURE_AVSEL
 
	`DWMAC_REGS_BIT32
(15)

	)

516 
	#DMAGRP_HW_FEATURE_TXOESEL
 
	`DWMAC_REGS_BIT32
(16)

	)

517 
	#DMAGRP_HW_FEATURE_RXTYP1COE
 
	`DWMAC_REGS_BIT32
(17)

	)

518 
	#DMAGRP_HW_FEATURE_RXTYP2COE
 
	`DWMAC_REGS_BIT32
(18)

	)

519 
	#DMAGRP_HW_FEATURE_RXFIFOSIZE
 
	`DWMAC_REGS_BIT32
(19)

	)

520 
	#DMAGRP_HW_FEATURE_RXCHCNT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 20, 21)

	)

521 
	#DMAGRP_HW_FEATURE_RXCHCNT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 20, 21)

	)

522 
	#DMAGRP_HW_FEATURE_RXCHCNT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 20, 21)

	)

523 
	#DMAGRP_HW_FEATURE_TXCHCNT
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 22, 23)

	)

524 
	#DMAGRP_HW_FEATURE_TXCHCNT_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 22, 23)

	)

525 
	#DMAGRP_HW_FEATURE_TXCHCNT_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 22, 23)

	)

526 
	#DMAGRP_HW_FEATURE_ENHDESSEL
 
	`DWMAC_REGS_BIT32
(24)

	)

527 
	#DMAGRP_HW_FEATURE_ACTPHYIF
(
vÆ
Ë
	`DWMAC_REGS_FLD32
(vÆ, 28, 30)

	)

528 
	#DMAGRP_HW_FEATURE_ACTPHYIF_GET
(
ªg
Ë
	`DWMAC_REGS_FLD32GET
‘eg, 28, 30)

	)

529 
	#DMAGRP_HW_FEATURE_ACTPHYIF_SET
(
ªg
, 
vÆ
Ë
	`DWMAC_REGS_FLD32SET
‘eg, vÆ, 28, 30)

	)

530 } 
	tdmagΩ
;

	@src/libchip/network/dwmac.c

24 
	~<as£π.h
>

25 
	~<°dlib.h
>

26 
	~<°dio.h
>

27 
	~<°rög.h
>

28 
	~<î∫o.h
>

29 
	~<b•.h
>

30 
	~<b•/Áèl.h
>

31 
	~<πems/ídün.h
>

32 
	~"dwmac-comm⁄.h
"

33 
	~"dwmac-c‹e.h
"

35 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


36 
	~<b•/úq.h
>

41 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_JABBER
 = 0x80;

42 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_RECEIVE_ERROR
 = 0x40;

43 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_PAGE_RECEIVE
 = 0x20;

44 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_PARALLEL_DETECT_FAULT
 = 0x10;

45 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_LINK_PARTNER_ACK
 = 0x08;

46 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_LINK_DOWN
 = 0x04;

47 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_REMOTE_FAULT
 = 0x02;

48 c⁄° 
dwmac_phy_evít
 
	gPHY_EVENT_LINK_UP
 = 0x01;

51 
	#DWMAC_CONFIG_RX_UNIT_COUNT_DEFAULT
 64

	)

52 
	#DWMAC_CONFIG_RX_UNIT_COUNT_MAX
 
INT_MAX


	)

53 
	#DWMAC_CONFIG_TX_UNIT_COUNT_DEFAULT
 64

	)

54 
	#DWMAC_CONFIG_TX_UNIT_COUNT_MAX
 
INT_MAX


	)

57 
	#DWMAC_DMA_BUS_MODE_PBL_DEFAULT
 
DWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_8


	)

58 
	#DWMAC_DMA_BUS_MODE_FB_DEFAULT
 \

59 
DWMAC_DMA_CFG_BUS_MODE_BURST_MODE_SINGLE_OR_INCR


	)

60 
	#DWMAC_DMA_BUS_MODE_MIXED_BURSTS_DEFAULT
 \

61 
DWMAC_DMA_CFG_BUS_MODE_BURST_NOT_MIXED


	)

62 
	#DWMAC_DMA_AXI_BURST_LENGTH_4_DEFAULT
 \

63 
DWMAC_DMA_CFG_AXI_BURST_LENGTH_4_NOT_SUPPORTED


	)

64 
	#DWMAC_DMA_AXI_BURST_LENGTH_8_DEFAULT
 \

65 
DWMAC_DMA_CFG_AXI_BURST_LENGTH_8_NOT_SUPPORTED


	)

66 
	#DWMAC_DMA_AXI_BURST_LENGTH_16_DEFAULT
 \

67 
DWMAC_DMA_CFG_AXI_BURST_LENGTH_16_NOT_SUPPORTED


	)

68 
	#DWMAC_DMA_AXI_BURST_BOUNDARY_DEFAULT
 \

69 
DWMAC_DMA_CFG_AXI_BURST_BOUNDARY_4_KB


	)

72 
	#DWCGNAC3504_CSR_F_35M
 35000000

	)

73 
	#DWCGNAC3504_CSR_F_60M
 60000000

	)

74 
	#DWCGNAC3504_CSR_F_100M
 100000000

	)

75 
	#DWCGNAC3504_CSR_F_150M
 150000000

	)

76 
	#DWCGNAC3504_CSR_F_250M
 250000000

	)

77 
	#DWCGNAC3504_CSR_F_300M
 300000000

	)

80 
	#DWCGNAC3504_CSR_60_100M
 0x0

	)

81 
	#DWCGNAC3504_CSR_100_150M
 0x1

	)

82 
	#DWCGNAC3504_CSR_20_35M
 0x2

	)

83 
	#DWCGNAC3504_CSR_35_60M
 0x3

	)

84 
	#DWCGNAC3504_CSR_150_250M
 0x4

	)

85 
	#DWCGNAC3504_CSR_250_300M
 0x5

	)

87 
	#DWMAC_ALIGN
–
vÆue
, 
num_byãs_to_Æign_to
 ) \

88 –––
vÆue
 ) + ( ( 
	`ty≥of
–vÆuêË)–
num_byãs_to_Æign_to
 ) - 1 ) ) \

89 & ~––
	`ty≥of
–
vÆue
 ) )–
num_byãs_to_Æign_to
 ) - 1 ) )

	)

91 #unde‡
DWMAC_DEBUG


92 #ifde‡
DWMAC_DEBUG


93 
	#DWMAC_PRINT_DBG
–
fmt
, 
¨gs
 ... ) 
	`¥ötk
–fmt, ##árg†)

	)

95 
	#DWMAC_PRINT_DBG
–
fmt
, 
¨gs
 ... ) dÿ{ }  0 )

	)

98 
	#DWMAC_DMA_THRESHOLD_CONTROL_DEFAULT
 64

	)

100 
	#DWMAC_GLOBAL_MBUF_CNT
 (
πems_bsd√t_c⁄fig
.
mbuf_byãcou¡
 / (
mbuf
))

	)

101 
	#DWMAG_GLOBAL_MCLUST_CNT
 (
πems_bsd√t_c⁄fig
.
mbuf_˛u°î_byãcou¡
 / 
MCLBYTES
)

	)

103 
	$dwmac_if_mdio_busy_waô
–c⁄° vﬁ©ûê
uöt32_t
 *
gmii_addªss
 )

105 
πems_öãrvÆ
 
timeout
 = 
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

106 
πems_öãrvÆ
 
i
 = 0;

109  ( *
gmii_addªss
 & 
MACGRP_GMII_ADDRESS_GMII_BUSY
 ) != 0

110 && 
i
 < 
timeout
 ) {

111 
	`πems_èsk_wake_a·î
( 1 );

112 ++
i
;

115  
i
 < 
timeout
 ? 0 : 
EBUSY
;

116 
	}
}

118 
	$dwmac_if_mdio_ªad
(

119 
phy
,

120 *
¨g
,

121 
phy_ªg
,

122 
uöt32_t
 *
vÆ
 )

124 
ío
 = 0;

125 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

126 vﬁ©ûê
uöt32_t
 *
mii_addªss
 = &
£lf
->
macgΩ
->
gmii_addªss
;

127 vﬁ©ûê
uöt32_t
 *
mii_d©a
 = &
£lf
->
macgΩ
->
gmii_d©a
;

128 
uöt32_t
 
ªg_vÆue
 = 0;

131 i‡–
phy
 == -1 ) {

132 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_SET
(

133 
ªg_vÆue
,

134 
£lf
->
MDIO_BUS_ADDR


137 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_SET
(

138 
ªg_vÆue
,

139 
phy


143 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_GMII_REGISTER_SET
(

144 
ªg_vÆue
,

145 
phy_ªg


147 
ªg_vÆue
 &~
MACGRP_GMII_ADDRESS_GMII_WRITE
;

152 
ªg_vÆue
 |
MACGRP_GMII_ADDRESS_GMII_BUSY
;

153 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_CSR_CLOCK_RANGE_SET
(

154 
ªg_vÆue
,

155 
£lf
->
c§_˛ock


158 
ío
 = 
	`dwmac_if_mdio_busy_waô
–
mii_addªss
 );

160 i‡–
ío
 == 0 ) {

161 *
mii_addªss
 = 
ªg_vÆue
;

163 i‡–
	`dwmac_if_mdio_busy_waô
–
mii_addªss
 ) ) {

164 
ío
 = 
EBUSY
;

167 *
vÆ
 = 
	`MACGRP_GMII_DATA_GMII_DATA_GET
–*
mii_d©a
 );

171  
ío
;

172 
	}
}

174 
	$dwmac_if_mdio_wrôe
(

175 
phy
,

176 *
¨g
,

177 
phy_ªg
,

178 
uöt32_t
 
vÆ
 )

180 
ío
 = 0;

181 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

182 vﬁ©ûê
uöt32_t
 *
mii_addªss
 = &
£lf
->
macgΩ
->
gmii_addªss
;

183 vﬁ©ûê
uöt32_t
 *
mii_d©a
 = &
£lf
->
macgΩ
->
gmii_d©a
;

184 
uöt32_t
 
ªg_vÆue
 = *
mii_addªss
;

187 i‡–
phy
 == -1 ) {

188 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_SET
(

189 
ªg_vÆue
,

190 
£lf
->
MDIO_BUS_ADDR


193 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_PHYSICAL_LAYER_ADDRESS_SET
(

194 
ªg_vÆue
,

195 
phy


199 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_GMII_REGISTER_SET
(

200 
ªg_vÆue
,

201 
phy_ªg


203 
ªg_vÆue
 |
MACGRP_GMII_ADDRESS_GMII_WRITE
;

204 
ªg_vÆue
 |
MACGRP_GMII_ADDRESS_GMII_BUSY
;

205 
ªg_vÆue
 = 
	`MACGRP_GMII_ADDRESS_CSR_CLOCK_RANGE_SET
(

206 
ªg_vÆue
,

207 
£lf
->
c§_˛ock


211 
ío
 = 
	`dwmac_if_mdio_busy_waô
–
mii_addªss
 );

213 i‡–
ío
 == 0 ) {

215 *
mii_d©a
 = 
vÆ
;

216 *
mii_addªss
 = 
ªg_vÆue
;

219 
ío
 = 
	`dwmac_if_mdio_busy_waô
–
mii_addªss
 );

222  
ío
;

223 
	}
}

225 
	$dwmac_gë_phy_öfo
(

226 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

227 c⁄° 
uöt8_t
 
mdio_bus_addr
,

228 
uöt32_t
 *
oui
,

229 
uöt8_t
 *
modñ
,

230 
uöt8_t
 *
ªvisi⁄
 )

232 
ío
 = 0;

233 
uöt32_t
 
ªad
;

236 
ío
 = 
	`dwmac_if_mdio_ªad
(

237 
mdio_bus_addr
,

238 
£lf
,

240 &
ªad
 );

242 i‡–
ío
 == 0 ) {

243 *
oui
 = 0 | ( 
ªad
 << 6 );

244 
ío
 = 
	`dwmac_if_mdio_ªad
(

245 
mdio_bus_addr
,

246 
£lf
,

248 &
ªad
 );

250 i‡–
ío
 == 0 ) {

251 *
oui
 |–
ªad
 & 0xFC00 ) >> 10;

252 *
modñ
 = (
uöt8_t
Ë––
ªad
 & 0x03F0 ) >> 4 );

253 *
ªvisi⁄
 = 
ªad
 & 0x000F;

257  
ío
;

258 
	}
}

260 
ölöe
 
	$dwmac_íabÀ_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

262 
	`dwmac_c‹e_íabÀ_dma_úq_rx
–
£lf
 );

263 
	}
}

265 
ölöe
 
	$dwmac_íabÀ_úq_tx_deÁu…
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

267 
	`dwmac_c‹e_íabÀ_dma_úq_tx_deÁu…
–
£lf
 );

268 
	}
}

270 
ölöe
 
	$dwmac_íabÀ_úq_tx_å™smôãd
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

272 
	`dwmac_c‹e_íabÀ_dma_úq_tx_å™smôãd
–
£lf
 );

273 
	}
}

275 
ölöe
 
	$dwmac_dißbÀ_úq_rx
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

277 
	`dwmac_c‹e_dißbÀ_dma_úq_rx
–
£lf
 );

278 
	}
}

280 
ölöe
 
	$dwmac_dißbÀ_úq_tx_Æl
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

282 
	`dwmac_c‹e_dißbÀ_dma_úq_tx_Æl
–
£lf
 );

283 
	}
}

285 
ölöe
 
	$dwmac_dißbÀ_úq_tx_å™smôãd
 ( 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

287 
	`dwmac_c‹e_dißbÀ_dma_úq_tx_å™smôãd
–
£lf
 );

288 
	}
}

290 
	$dwmac_c⁄åﬁ_ªque°_com∂ëe
–c⁄° 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

292 
πems_°©us_code
 
sc
 = 
	`πems_evít_å™sõ¡_£nd
–
£lf
->
èsk_id_c⁄åﬁ
 );

294 
	`as£π
–
sc
 =
RTEMS_SUCCESSFUL
 );

295 
	}
}

297 
	$dwmac_c⁄åﬁ_ªque°
(

298 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

299 
πems_id
 
èsk
,

300 
πems_evít_£t
 
evít
 )

302 
ío
 = 0;

303 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

304 
uöt32_t
 
√°_cou¡
 = 0;

307 
£lf
->
èsk_id_c⁄åﬁ
 = 
	`πems_èsk_£lf
();

309 
sc
 = 
	`πems_bsd√t_evít_£nd
–
èsk
, 
evít
 );

311 
ío
 = 
	`πems_°©us_code_to_î∫o
–
sc
 );

313 i‡–
ío
 == 0 ) {

314 
√°_cou¡
 = 
	`πems_bsd√t_£m≠h‹e_ªÀa£_ªcursive
();

315 
sc
 = 
	`πems_evít_å™sõ¡_ª˚ive
–
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
 );

316 
ío
 = 
	`πems_°©us_code_to_î∫o
–
sc
 );

317 
	`πems_bsd√t_£m≠h‹e_obèö_ªcursive
–
√°_cou¡
 );

318 
£lf
->
èsk_id_c⁄åﬁ
 = 0;

321  
ío
;

322 
	}
}

324 
boﬁ
 
	$dwmac_if_medü_°©us
(

325 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

326 *
medü
,

327 
uöt8_t
 
phy_addªss
 )

329 
i‚ë
 *
iÂ
 = &
£lf
->
¨pcom
.
ac_if
;

332 *
medü
 = (Ë
	`IFM_MAKEWORD
–0, 0, 0, 
phy_addªss
 );

334  ( *
iÂ
->
if_io˘l
 )–iÂ, 
SIOCGIFMEDIA
, (
ˇddr_t
Ë
medü
 ) == 0;

335 
	}
}

337 
	#DWMAC_PRINT_COUNTER
–
fmt
, 
cou¡î
, 
¨gs
 ... ) \

338 i‡–
cou¡î
 != 0 ) { \

339 
	`¥ötf
–
fmt
, 
cou¡î
, ## 
¨gs
 ); \

340 }

	)

343 
	$dwmac_if_öãrÁ˚_°©s
–*
¨g
 )

345 
ío
 = 0;

346 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = 
¨g
;

347 vﬁ©ûê
macgΩ
 *macgΩ = 
£lf
->macgrp;

348 
medü
 = 0;

349 
boﬁ
 
medü_ok
 = 
	`dwmac_if_medü_°©us
(

350 
£lf
, &
medü
, sñf->
MDIO_BUS_ADDR
 );

351 
uöt32_t
 
oui
;

352 
uöt8_t
 
modñ
;

353 
uöt8_t
 
ªvisi⁄
;

354 
uöt16_t
 
gü¡_‰ame_size
 = 1518;

357 i‡––
MACGRP_MAC_CONFIGURATION_JE
 & 
macgΩ
->
mac_c⁄figuøti⁄
 ) != 0 ) {

359 
gü¡_‰ame_size
 = 9018;

362 i‡–
medü_ok
 ) {

363 
	`πems_ifmedü2°r
–
medü
, 
NULL
, 0 );

364 
	`¥ötf
( "\n" );

365 
ío
 = 
	`dwmac_gë_phy_öfo
(

366 
£lf
,

367 
£lf
->
MDIO_BUS_ADDR
,

368 &
oui
,

369 &
modñ
,

370 &
ªvisi⁄
 );

372 i‡–
ío
 == 0 ) {

373 
	`¥ötf
–"PHY 0x%02x: OUI = 0x%04" 
PRIX32
 ", Modñ = 0x%02" 
PRIX8
 ", Rev = "

374 "0x%02" 
PRIX8
 "\n",

375 
£lf
->
MDIO_BUS_ADDR
,

376 
oui
,

377 
modñ
,

378 
ªvisi⁄
 );

379 
	`¥ötf
( "PHY status counters:\n" );

380 
	`DWMAC_PRINT_COUNTER
(

381 "%" 
PRIu32
 "Üink down\n",

382 
£lf
->
°©s
.
phy_°©us_cou¡s
.
lök_down


384 
	`DWMAC_PRINT_COUNTER
(

385 "%" 
PRIu32
 "Üink up\n",

386 
£lf
->
°©s
.
phy_°©us_cou¡s
.
lök_up


390 
	`¥ötf
–"PHY %d communiˇti⁄Éº‹\n", 
£lf
->
MDIO_BUS_ADDR
 );

393 
	`¥ötf
( "\nHardware counters:\n" );

395 i‡––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_MMCSEL
 ) != 0 ) {

396 
	`DWMAC_PRINT_COUNTER
(

397 "%" 
PRIu32
 " bytesÅransmitted,Éxclusive ofÖreambleándÑetried bytes, "

399 
macgΩ
->
txo˘ëcou¡_gb


401 
	`DWMAC_PRINT_COUNTER
(

402 "%" 
PRIu32
 " goodánd bad framesÅransmitted,Éxclusive ofÑetried "

404 
macgΩ
->
tx‰amecou¡_gb


406 
	`DWMAC_PRINT_COUNTER
(

407 "%" 
PRIu32
 " good broadcast framesÅransmitted\n",

408 
macgΩ
->
txbrﬂdˇ°‰ames_g


410 
	`DWMAC_PRINT_COUNTER
(

411 "%" 
PRIu32
 " good multicast framesÅransmitted\n",

412 
macgΩ
->
txmu…iˇ°‰ames_g


414 
	`DWMAC_PRINT_COUNTER
(

415 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength 64 bytes, "

417 
macgΩ
->
tx64o˘ës_gb


419 
	`DWMAC_PRINT_COUNTER
(

420 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength between 65ánd "

422 
macgΩ
->
tx65to127o˘ës_gb


424 
	`DWMAC_PRINT_COUNTER
(

425 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength between 128ánd "

427 
macgΩ
->
tx128to255o˘ës_gb


429 
	`DWMAC_PRINT_COUNTER
(

430 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength between 256ánd "

432 
macgΩ
->
tx256to511o˘ës_gb


434 
	`DWMAC_PRINT_COUNTER
(

435 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength between 512ánd "

437 
macgΩ
->
tx512to1023o˘ës_gb


439 
	`DWMAC_PRINT_COUNTER
(

440 "%" 
PRIu32
 " goodánd bad framesÅransmitted withÜength between 1,024ánd"

442 
macgΩ
->
tx1024tomaxo˘ës_gb


444 
	`DWMAC_PRINT_COUNTER
(

445 "%" 
PRIu32
 " goodánd bad unicast framesÅransmitted\n",

446 
macgΩ
->
txuniˇ°‰ames_gb


448 
	`DWMAC_PRINT_COUNTER
(

449 "%" 
PRIu32
 " goodánd bad multicast framesÅransmitted\n",

450 
macgΩ
->
txmu…iˇ°‰ames_gb


452 
	`DWMAC_PRINT_COUNTER
(

453 "%" 
PRIu32
 " goodánd bad broadcast framesÅransmitted\n",

454 
macgΩ
->
txbrﬂdˇ°‰ames_gb


456 
	`DWMAC_PRINT_COUNTER
(

457 "%" 
PRIu32
 " framesáborted dueÅo frame underflowÉrror\n",

458 
macgΩ
->
txundîÊowîr‹


460 
	`DWMAC_PRINT_COUNTER
(

461 "%" 
PRIu32
 " successfullyÅransmitted framesáfterá single collision in "

463 
macgΩ
->
txsögÀcﬁ_g


465 
	`DWMAC_PRINT_COUNTER
(

466 "%" 
PRIu32
 " successfullyÅransmitted framesáfter moreÅhaná single"

468 
macgΩ
->
txmu…icﬁ_g


470 
	`DWMAC_PRINT_COUNTER
(

471 "%" 
PRIu32
 " successfullyÅransmitted framesáfterá deferral in "

473 
macgΩ
->
txde„ºed


475 
	`DWMAC_PRINT_COUNTER
(

476 "%" 
PRIu32
 " framesáborted dueÅoÜate collisionÉrror\n",

477 
macgΩ
->
txœãcﬁ


479 
	`DWMAC_PRINT_COUNTER
(

480 "%" 
PRIu32
 " framesáborted dueÅoÉxcessive (16) collisionÉrrors\n",

481 
macgΩ
->
txexesscﬁ


483 
	`DWMAC_PRINT_COUNTER
(

484 "%" 
PRIu32
 " framesáborted dueÅo carrier senseÉrror (no carrier orÜoss"

486 
macgΩ
->
txˇºõªº


488 
	`DWMAC_PRINT_COUNTER
(

489 "%" 
PRIu32
 " bytesÅransmitted,Éxclusive ofÖreamble, in good frames "

491 
macgΩ
->
txo˘ë˙t


493 
	`DWMAC_PRINT_COUNTER
(

494 "%" 
PRIu32
 " good framesÅransmitted\n",

495 
macgΩ
->
tx‰amecou¡_g


497 
	`DWMAC_PRINT_COUNTER
(

498 "%" 
PRIu32
 " framesáborted dueÅoÉxcessive deferralÉrror (deferred for"

500 
macgΩ
->
txex˚ssdef


502 
	`DWMAC_PRINT_COUNTER
(

503 "%" 
PRIu32
 " good PAUSE framesÅransmitted\n",

504 
macgΩ
->
tx∑u£‰ames


506 
	`DWMAC_PRINT_COUNTER
(

507 "%" 
PRIu32
 " good VLAN framesÅransmitted,Éxclusive ofÑetried frames\n",

508 
macgΩ
->
txvœn‰ames_g


510 
	`DWMAC_PRINT_COUNTER
(

511 "%" 
PRIu32
 " goodánd bad framesÑeceived\n",

512 
macgΩ
->
txovîsize_g


514 
	`DWMAC_PRINT_COUNTER
(

515 "%" 
PRIu32
 " goodánd bad framesÑeceived\n",

516 
macgΩ
->
rx‰amecou¡_gb


518 
	`DWMAC_PRINT_COUNTER
(

519 "%" 
PRIu32
 " bytesÑeceived,Éxclusive ofÖreamble, in goodánd bad "

521 
macgΩ
->
rxo˘ëcou¡_gb


523 
	`DWMAC_PRINT_COUNTER
(

524 "%" 
PRIu32
 " bytesÑeceived,Éxclusive ofÖreamble, only in good frames\n",

525 
macgΩ
->
rxo˘ëcou¡_g


527 
	`DWMAC_PRINT_COUNTER
(

528 "%" 
PRIu32
 " good broadcast framesÑeceived\n",

529 
macgΩ
->
rxbrﬂdˇ°‰ames_g


531 
	`DWMAC_PRINT_COUNTER
(

532 "%" 
PRIu32
 " good multicast framesÑeceived\n",

533 
macgΩ
->
rxmu…iˇ°‰ames_g


535 
	`DWMAC_PRINT_COUNTER
(

536 "%" 
PRIu32
 " framesÑeceived with CRCÉrror\n",

537 
macgΩ
->
rx¸˚º‹


539 
	`DWMAC_PRINT_COUNTER
(

540 "%" 
PRIu32
 " framesÑeceived withálignment (dribble)Érror. Valid only"

542 
macgΩ
->
rxÆignmíãº‹


544 
	`DWMAC_PRINT_COUNTER
(

545 "%" 
PRIu32
 " framesÑeceived withÑunt (<64 bytesánd CRCÉrror)Érror\n",

546 
macgΩ
->
rxru¡îr‹


548 
	`DWMAC_PRINT_COUNTER
(

549 "%" 
PRIu32
 " giant framesÑeceived withÜength (including CRC) greater "

550 "th™ %" 
PRIu16
 " bytes (%" PRIu16 " bytes for VLANÅagged)ánd with CRC"

552 
macgΩ
->
rxjabbîîr‹
, 
gü¡_‰ame_size
, giant_frame_size + 4

554 
	`DWMAC_PRINT_COUNTER
(

555 "%" 
PRIu32
 " framesÑeceived withÜengthÜessÅhan 64 bytes, withoutány"

557 
macgΩ
->
rxundîsize_g


559 
	`DWMAC_PRINT_COUNTER
(

560 "%" 
PRIu32
 " framesÑeceived withÜength greaterÅhanÅhe maxsize (1,518"

562 
macgΩ
->
rxovîsize_g


564 
	`DWMAC_PRINT_COUNTER
(

565 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength 64 bytes,Éxclusive"

567 
macgΩ
->
rx64o˘ës_gb


569 
	`DWMAC_PRINT_COUNTER
(

570 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength between 65ánd 127"

572 
macgΩ
->
rx65to127o˘ës_gb


574 
	`DWMAC_PRINT_COUNTER
(

575 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength between 128ánd 255"

577 
macgΩ
->
rx128to255o˘ës_gb


579 
	`DWMAC_PRINT_COUNTER
(

580 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength between 256ánd 511"

582 
macgΩ
->
rx256to511o˘ës_gb


584 
	`DWMAC_PRINT_COUNTER
(

585 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength between 512ánd "

587 
macgΩ
->
rx512to1023o˘ës_gb


589 
	`DWMAC_PRINT_COUNTER
(

590 "%" 
PRIu32
 " goodánd bad framesÑeceived withÜength between 1,024ánd"

592 
macgΩ
->
rx1024tomaxo˘ës_gb


594 
	`DWMAC_PRINT_COUNTER
(

595 "%" 
PRIu32
 " good unicast framesÑeceived\n",

596 
macgΩ
->
rxuniˇ°‰ames_g


598 
	`DWMAC_PRINT_COUNTER
(

599 "%" 
PRIu32
 " framesÑeceived withÜengthÉrror (lengthÅype fieldÇot "

601 
macgΩ
->
rxÀngthîr‹


603 
	`DWMAC_PRINT_COUNTER
(

604 "%" 
PRIu32
 " framesÑeceived withÜength fieldÇotÉqualÅoÅhe valid "

606 
macgΩ
->
rxouto‰™gëy≥


608 
	`DWMAC_PRINT_COUNTER
(

609 "%" 
PRIu32
 " goodánd valid PAUSE framesÑeceived\n",

610 
macgΩ
->
rx∑u£‰ames


612 
	`DWMAC_PRINT_COUNTER
(

613 "%" 
PRIu32
 " missedÑeceived frames dueÅo FIFO overflow\n",

614 
macgΩ
->
rxfifoovîÊow


616 
	`DWMAC_PRINT_COUNTER
(

617 "%" 
PRIu32
 " goodánd bad VLAN framesÑeceived\n",

618 
macgΩ
->
rxvœn‰ames_gb


620 
	`DWMAC_PRINT_COUNTER
(

621 "%" 
PRIu32
 " framesÑeceived withÉrror dueÅo watchdogÅimeoutÉrror "

623 
macgΩ
->
rxw©chdogîr‹


625 
	`DWMAC_PRINT_COUNTER
(

626 "%" 
PRIu32
 " framesÑeceived with ReceiveÉrror or Frame ExtensionÉrror"

628 
macgΩ
->
rxrcvîr‹


630 
	`DWMAC_PRINT_COUNTER
(

631 "%" 
PRIu32
 "Ñeceived good control frames\n",

632 
macgΩ
->
rx˘æ‰ames_g


635 
	`¥ötf
( "\n" );

637 
	`DWMAC_PRINT_COUNTER
(

638 "%" 
PRIu32
 " good IPv4 datagramsÑeceived withÅhe TCP, UDP, or ICMP "

640 
macgΩ
->
rxùv4_gd_‰ms


642 
	`DWMAC_PRINT_COUNTER
(

643 "%" 
PRIu32
 " IPv4 datagramsÑeceived with header (checksum,Üength, or "

645 
macgΩ
->
rxùv4_hdªº_‰ms


647 
	`DWMAC_PRINT_COUNTER
(

648 "%" 
PRIu32
 " IPv4 datagram framesÑeceivedÅhat didÇot haveá TCP, UDP, "

650 
macgΩ
->
rxùv4_n›ay_‰ms


652 
	`DWMAC_PRINT_COUNTER
(

653 "%" 
PRIu32
 " good IPv4 datagrams with fragmentation\n",

654 
macgΩ
->
rxùv4_‰ag_‰ms


656 
	`DWMAC_PRINT_COUNTER
(

657 "%" 
PRIu32
 " good IPv4 datagramsÑeceivedÅhat hadá UDPÖayload with "

659 
macgΩ
->
rxùv4_udsbl_‰ms


661 
	`DWMAC_PRINT_COUNTER
(

662 "%" 
PRIu32
 " good IPv6 datagramsÑeceived with TCP, UDP, or ICMP "

664 
macgΩ
->
rxùv6_gd_‰ms


666 
	`DWMAC_PRINT_COUNTER
(

667 "%" 
PRIu32
 " IPv6 datagramsÑeceived with headerÉrrors (length or "

669 
macgΩ
->
rxùv6_hdªº_‰ms


671 
	`DWMAC_PRINT_COUNTER
(

672 "%" 
PRIu32
 " IPv6 datagram framesÑeceivedÅhat didÇot haveá TCP, UDP,"

675 
macgΩ
->
rxùv6_n›ay_‰ms


677 
	`DWMAC_PRINT_COUNTER
(

678 "%" 
PRIu32
 " good IP datagrams withá good UDPÖayload. This counter is "

680 
macgΩ
->
rxudp_gd_‰ms


682 
	`DWMAC_PRINT_COUNTER
(

683 "%" 
PRIu32
 " good IP datagrams whose UDPÖayload hasá checksumÉrror\n",

684 
macgΩ
->
rxudp_îr_‰ms


686 
	`DWMAC_PRINT_COUNTER
(

687 "%" 
PRIu32
 " good IP datagrams withá good TCPÖayload\n",

688 
macgΩ
->
rxt˝_gd_‰ms


690 
	`DWMAC_PRINT_COUNTER
(

691 "%" 
PRIu32
 " good IP datagrams whose TCPÖayload hasá checksumÉrror\n",

692 
macgΩ
->
rxt˝_îr_‰ms


694 
	`DWMAC_PRINT_COUNTER
(

695 "%" 
PRIu32
 " good IP datagrams withá good ICMPÖayload\n",

696 
macgΩ
->
rxicmp_gd_‰ms


698 
	`DWMAC_PRINT_COUNTER
(

699 "%" 
PRIu32
 " good IP datagrams whose ICMPÖayload hasá checksumÉrror\n",

700 
macgΩ
->
rxicmp_îr_‰ms


702 
	`DWMAC_PRINT_COUNTER
(

703 "%" 
PRIu32
 " bytesÑeceived in good IPv4 datagramsÉncapsulating TCP, UDP,"

705 
macgΩ
->
rxùv4_gd_o˘ës


707 
	`DWMAC_PRINT_COUNTER
(

708 "%" 
PRIu32
 " bytesÑeceived in IPv4 datagrams with headerÉrrors (checksum,"

711 
macgΩ
->
rxùv4_hdªº_o˘ës


713 
	`DWMAC_PRINT_COUNTER
(

714 "%" 
PRIu32
 " bytesÑeceived in IPv4 datagramsÅhat didÇot haveá TCP, UDP"

717 
macgΩ
->
rxùv4_n›ay_o˘ës


719 
	`DWMAC_PRINT_COUNTER
(

720 "%" 
PRIu32
 " bytesÑeceived in fragmented IPv4 datagrams. The value inÅhe"

722 
macgΩ
->
rxùv4_‰ag_o˘ës


724 
	`DWMAC_PRINT_COUNTER
(

725 "%" 
PRIu32
 " bytesÑeceived iná UDP segmentÅhat hadÅhe UDP checksum "

727 
macgΩ
->
rxùv4_udsbl_o˘ës


729 
	`DWMAC_PRINT_COUNTER
(

730 "%" 
PRIu32
 " bytesÑeceived in good IPv6 datagramsÉncapsulating TCP, UDP "

732 
macgΩ
->
rxùv6_gd_o˘ës


734 
	`DWMAC_PRINT_COUNTER
(

735 "%" 
PRIu32
 " bytesÑeceived in IPv6 datagrams with headerÉrrors (length, "

738 
macgΩ
->
rxùv6_hdªº_o˘ës


740 
	`DWMAC_PRINT_COUNTER
(

741 "%" 
PRIu32
 " bytesÑeceived in IPv6 datagramsÅhat didÇot haveá TCP, UDP"

744 
macgΩ
->
rxùv6_n›ay_o˘ës


746 
	`DWMAC_PRINT_COUNTER
(

747 "%" 
PRIu32
 " bytesÑeceived iná good UDP segment. This counter doesÇot "

749 
macgΩ
->
rxudp_gd_o˘ës


751 
	`DWMAC_PRINT_COUNTER
(

752 "%" 
PRIu32
 " bytesÑeceived iná UDP segmentÅhat had checksumÉrrors\n",

753 
macgΩ
->
rxudp_îr_o˘ës


755 
	`DWMAC_PRINT_COUNTER
(

756 "%" 
PRIu32
 " bytesÑeceived iná good TCP segment\n",

757 
macgΩ
->
rxt˝_gd_o˘ës


759 
	`DWMAC_PRINT_COUNTER
(

760 "%" 
PRIu32
 " bytesÑeceived iná TCP segment with checksumÉrrors\n",

761 
macgΩ
->
rxt˝îro˘ës


763 
	`DWMAC_PRINT_COUNTER
(

764 "%" 
PRIu32
 " bytesÑeceived iná good ICMP segment\n",

765 
macgΩ
->
rxicmp_gd_o˘ës


767 
	`DWMAC_PRINT_COUNTER
(

768 "%" 
PRIu32
 " bytesÑeceived inán ICMP segment with checksumÉrrors\n",

769 
macgΩ
->
rxicmp_îr_o˘ës


773 i‡–
ío
 == 0 ) {

774 
	`¥ötf
( "\nInterrupt counts:\n" );

775 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ñeceive interrputs\n",

776 
£lf
->
°©s
.
dma_úq_cou¡s
.
ª˚ive


778 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Åransmit interrupts\n",

779 
£lf
->
°©s
.
dma_úq_cou¡s
.
å™smô


781 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Åx jabber interrupts\n",

782 
£lf
->
°©s
.
dma_úq_cou¡s
.
tx_jabbî


784 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ñx overflow interrupts\n",

785 
£lf
->
°©s
.
dma_úq_cou¡s
.
rx_ovîÊow


787 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÑxÉarly interrupts\n",

788 
£lf
->
°©s
.
dma_úq_cou¡s
.
rx_óæy


790 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ñx buffer unavailable interrupts\n",

791 
£lf
->
°©s
.
dma_úq_cou¡s
.
rx_buf_u«v


793 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÑxÖrocess stopped interrupts\n",

794 
£lf
->
°©s
.
dma_úq_cou¡s
.
rx_¥o˚ss_°›≥d


796 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ñx watchdog interrupts\n",

797 
£lf
->
°©s
.
dma_úq_cou¡s
.
rx_w©chdog


799 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÅxÉarly interrupts\n",

800 
£lf
->
°©s
.
dma_úq_cou¡s
.
tx_óæy


802 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Åx buffer unavailable interrupts\n",

803 
£lf
->
°©s
.
dma_úq_cou¡s
.
tx_buf_u«v


805 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÅxÖrocess stopped interrupts\n",

806 
£lf
->
°©s
.
dma_úq_cou¡s
.
tx_¥o˚ss_°›≥d


808 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Åx underflow interrupts\n",

809 
£lf
->
°©s
.
dma_úq_cou¡s
.
tx_undîÊow


811 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " fatal busÉrror interrupts\n",

812 
£lf
->
°©s
.
dma_úq_cou¡s
.
Áèl_bus_îr‹


814 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " unhandled interrupts\n",

815 
£lf
->
°©s
.
dma_úq_cou¡s
.
unh™dÀd


818 
	`¥ötf
( "\nRX DMA status counts:\n" );

819 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " CRCÉrrors\n",

820 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
¸c_îr‹


822 
	`DWMAC_PRINT_COUNTER
(

823 "%" 
PRIu32
 "Üate collision whenÑeceing in half duplex mode\n",

824 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
œã_cﬁlisi⁄


826 
	`DWMAC_PRINT_COUNTER
(

827 "%" 
PRIu32
 " giant frame orÅimestamp or checksumÉrror\n",

828 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
gü¡_‰ame


831 i‡–
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
w©chdog_timeout
 != 0

832 || 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
ª˚ive_îr‹
 != 0 ) {

833 
	`¥ötf
( " IP Header or IP Payload:\n" );

834 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ñeceive watchdogÅimeout\n",

835 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
w©chdog_timeout


837 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÑeceiveÉrror\n",

838 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
ª˚ive_îr‹


842 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " buffer overflows in MTL\n",

843 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
ovîÊow_îr‹


845 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " descriptor buffersÅoo small\n",

846 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
des¸ùt‹_îr‹


848 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÜengthÉrrors\n",

849 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
Àngth_îr‹


851 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " dribble bitÉrrors\n",

852 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
dribbÀ_bô_îr‹


854 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " vlanÅags\n",

855 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
vœn_èg


857 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Éthernet frames\n",

858 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
ëhî√t_‰ames


860 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " destinationáddress filter failures\n",

861 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
de°_addr_Áû


863 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " sourceáddresss filter failures\n",

864 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
sour˚_addr_Áû


867 
	`¥ötf
( "\nTX DMA status counts:\n" );

868 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " jabberÅime-outs\n",

869 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
jabbî


871 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " frame flushes\n",

872 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
‰ame_Êushed


874 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Üosses of carrier\n",

875 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
lossˇºõr


877 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Ço carriers\n",

878 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
no_ˇºõr


880 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Éxcessive collisions\n",

881 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
ex˚ssive_cﬁlisi⁄s


883 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Éxcessive deferrals\n",

884 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
ex˚ssive_de„ºÆ


886 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " underfolwÉrrors\n",

887 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
undîÊow


889 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " IP headerÉrror\n",

890 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
ù_hódî_îr‹


892 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÖayloadÉrror\n",

893 
£lf
->
°©s
.
desc_°©us_cou¡s_rx
.
sour˚_addr_Áû


895 
	`DWMAC_PRINT_COUNTER
(

896 "%" 
PRIu32
 " MAC defers beforeÅransmission because ofÅheÖresence of carrier\n",

897 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
de„ºed


899 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " VLAN frames\n",

900 
£lf
->
°©s
.
desc_°©us_cou¡s_tx
.
vœn


903 
	`¥ötf
( "\nRX frame counts:\n" );

904 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " frames withÉrrors\n",

905 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
îr‹s


907 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " frames dropped\n",

908 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
dr›≥d


910 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " frames good\n",

911 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
‰ames_good


913 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " bytes in good frames\n",

914 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
byãs_good


916 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " frames good or bad\n",

917 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
‰ames


919 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " DMA suspended\n",

920 
£lf
->
°©s
.
‰ame_cou¡s_rx
.
dma_su•íded


923 
	`¥ötf
( "\nTX frame counts:\n" );

924 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " framesÑeceived fromÇetwork stack\n",

925 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
‰ames_‰om_°ack


927 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " framesÅranmittedÅo DMA\n",

928 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
‰ames_to_dma


930 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÖacketsÅranmittedÅo DMA\n",

931 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
∑ckës_to_dma


933 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 " bytesÅranmittedÅo DMA\n",

934 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
byãs_to_dma


936 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "Öacket buffersÑegained from DMA\n",

937 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
∑ckës_å™môãd_by_DMA


939 
	`DWMAC_PRINT_COUNTER
–"%" 
PRIu32
 "ÖacketÉrrors\n",

940 
£lf
->
°©s
.
‰ame_cou¡s_tx
.
∑ckë_îr‹s


943 
	`¥ötf
( "\n" );

945 #ifde‡
RTEMS_DEBUG


947 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

948 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

950 –
DESC_OPS
->
¥öt_rx_desc
 )(

951 
£lf
->
dma_rx
,

952 (Ë
£lf
->
bsd_c⁄fig
->
xbuf_cou¡


955 –
DESC_OPS
->
¥öt_tx_desc
 )(

956 
£lf
->
dma_tx
,

957 (Ë
£lf
->
bsd_c⁄fig
->
xbuf_cou¡


963  
ío
;

964 
	}
}

966 
ölöe
 
	$dwmac_ö¸emít
(

967 c⁄° 
vÆue
,

968 c⁄° 
cy˛e
 )

970 i‡–
vÆue
 < 
cy˛e
 ) {

971  
vÆue
 + 1;

975 
	}
}

979 
	$dwmac_èsk_rx
–*
¨g
 )

981 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = 
¨g
;

982 
dwmac_comm⁄_rx_‰ame_cou¡s
 *
cou¡s
 = &
£lf
->
°©s
.
‰ame_cou¡s_rx
;

983 c⁄° 
INDEX_MAX
 =

984 (Ë
£lf
->
bsd_c⁄fig
->
rbuf_cou¡
 - 1U;

985 
size_t
 
‰ame_Àn_œ°
 = 0;

986 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

987 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

988 
size_t
 
£gmít_size
;

991  
åue
 ) {

992 
πems_evít_£t
 
evíts
;

993 
πems_°©us_code
 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
(

994 
DWMAC_COMMON_EVENT_TASK_INIT


995 | 
DWMAC_COMMON_EVENT_TASK_STOP


996 | 
DWMAC_COMMON_EVENT_RX_FRAME_RECEIVED
,

997 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

998 
RTEMS_NO_TIMEOUT
,

999 &
evíts


1001 
	`as£π
–
sc
 =
RTEMS_SUCCESSFUL
 );

1004 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TASK_STOP
 ) != 0 ) {

1005 
	`dwmac_c‹e_dma_°›_rx
–
£lf
 );

1006 
	`dwmac_dißbÀ_úq_rx
–
£lf
 );

1009 –
DESC_OPS
->
ªÀa£_rx_bufs
 )–
£lf
 );

1011 
	`dwmac_c⁄åﬁ_ªque°_com∂ëe
–
£lf
 );

1019 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TASK_INIT
 ) != 0 ) {

1020 
ödex
;

1021 
	`dwmac_c‹e_dma_°›_rx
–
£lf
 );

1022 –
DESC_OPS
->
ªÀa£_rx_bufs
 )–
£lf
 );

1024  
ödex
 = 0; index <
INDEX_MAX
; ++index ) {

1025 
£lf
->
mbuf_addr_rx
[
ödex
] = ( 
DESC_OPS
->
Æloc_d©a_buf
 )( self );

1026 
	`as£π
–
£lf
->
mbuf_addr_rx
[
ödex
] !
NULL
 );

1027 –
DESC_OPS
->
öô_rx_desc
 )–
£lf
, 
ödex
 );

1030 
£lf
->
idx_rx
 = 0;

1031 
‰ame_Àn_œ°
 = 0;

1034 
	`dwmac_c‹e_ª£t_dma_úq_°©us_rx
–
£lf
 );

1036 
	`dwmac_c‹e_dma_°¨t_rx
–
£lf
 );

1038 
	`dwmac_c⁄åﬁ_ªque°_com∂ëe
–
£lf
 );

1039 
evíts
 =Évents

1040 & (
πems_evít_£t
Ë–~
DWMAC_COMMON_EVENT_RX_FRAME_RECEIVED
 );

1044 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_RX_FRAME_RECEIVED
 ) != 0 ) {

1045 
idx
 = 
£lf
->
idx_rx
;

1048  ( 
DESC_OPS
->
am_i_rx_ow√r
 )–
£lf
, 
idx
 ) ) {

1049 
mbuf
 *
p_m_√w
;

1050 
dwmac_comm⁄_rx_‰ame_°©us
 
°©us
;

1051 
idx_√xt
 = 
	`dwmac_ö¸emít
(

1052 
£lf
->
idx_rx
, 
INDEX_MAX
 );

1055 
£lf
->
idx_rx
 = 
idx_√xt
;

1058 
°©us
 = ( 
DESC_OPS
->
rx_°©us
 )–
£lf
, 
idx
 );

1060 i‡–
°©us
 =
DWMAC_COMMON_RX_FRAME_STATUS_DISCARD


1061 || 
°©us
 =
DWMAC_COMMON_RX_FRAME_STATUS_CSUM_NONE
 ) {

1062 
	`DWMAC_PRINT_DBG
(

1064 
idx


1066 ++
cou¡s
->
îr‹s
;

1069 –
DESC_OPS
->
öô_rx_desc
 )–
£lf
, 
idx
 );

1070 } i‡–
°©us
 =
DWMAC_COMMON_RX_FRAME_STATUS_LLC_SNAP
 ) {

1071 
	`DWMAC_PRINT_DBG
(

1073 
idx


1075 ++
cou¡s
->
dr›≥d
;

1078 –
DESC_OPS
->
öô_rx_desc
 )–
£lf
, 
idx
 );

1082 
p_m_√w
 = ( 
DESC_OPS
->
Æloc_d©a_buf
 )–
£lf
 );

1084 i‡–
p_m_√w
 !
NULL
 ) {

1085 
boﬁ
 
is_fú°_£g
;

1086 
boﬁ
 
is_œ°_£g
;

1087 
mbuf
 *
p_m
;

1088 
uöt32_t
 
‰ame_Àn
 = ( 
DESC_OPS
->
gë_rx_‰ame_Àn
 )(

1089 
£lf
, 
idx
 );

1093 
is_fú°_£g
 = ( 
DESC_OPS
->
is_fú°_rx_£gmít
 )–
£lf
, 
idx
 );

1094 
is_œ°_£g
 = ( 
DESC_OPS
->
is_œ°_rx_£gmít
 )–
£lf
, 
idx
 );

1096 i‡–
is_fú°_£g
 ) {

1097 
£gmít_size
 = 
‰ame_Àn
;

1099 
£gmít_size
 = 
‰ame_Àn
 - 
‰ame_Àn_œ°
;

1102 
‰ame_Àn_œ°
 = 
‰ame_Àn
;

1104 
p_m
 = 
£lf
->
mbuf_addr_rx
[
idx
];

1105 
£lf
->
mbuf_addr_rx
[
idx
] = 
p_m_√w
;

1108 –
DESC_OPS
->
öô_rx_desc
 )–
£lf
, 
idx
 );

1110 i‡–
p_m
 !
NULL
 ) {

1112 
ëhî_hódî
 *
eh
 = 
	`mtod
–
p_m
, ether_header * );

1113 
sz
 = (Ë
£gmít_size
;

1115 
	`πems_ˇche_övÆid©e_mu…ùÀ_d©a_löes
(

1116 
eh
, 
£gmít_size
 );

1119 i‡–
is_œ°_£g
 ) {

1120 
sz
 -–
ETHER_HDR_LEN
 + 
ETHER_CRC_LEN
 );

1122 
sz
 -
ETHER_HDR_LEN
;

1126 
p_m
->
m_Àn
 = 
sz
;

1127 
p_m
->
m_pkthdr
.
Àn
 = 
sz
;

1128 
p_m
->
m_d©a
 = 
	`mtod
–p_m, * ) + 
ETHER_HDR_LEN
;

1130 
	`DWMAC_COMMON_DSB
();

1132 
	`DWMAC_PRINT_DBG
(

1134 
idx
,

1135 
£gmít_size
,

1136 –
is_fú°_£g
 ) ? ( "F" ) : ( "" ),

1137 –
is_œ°_£g
 ) ? ( "L" ) : ( "" )

1140 
	`ëhî_öput
–&
£lf
->
¨pcom
.
ac_if
, 
eh
, 
p_m
 );

1142 ++
cou¡s
->
‰ames_good
;

1143 
cou¡s
->
byãs_good
 +(
uöt32_t
Ë
p_m
->
m_Àn
;

1145 
	`DWMAC_PRINT_DBG
( "rx: %s: Inconsistent Rx descriptor chain\n",

1146 
£lf
->
¨pcom
.
ac_if
.
if_«me
 );

1147 ++
cou¡s
->
dr›≥d
;

1152 ++
cou¡s
->
dr›≥d
;

1155 –
DESC_OPS
->
öô_rx_desc
 )–
£lf
, 
idx
 );

1156 
	`DWMAC_PRINT_DBG
(

1158 
idx


1163 i‡––
£lf
->
dmagΩ
->
°©us
 & 
DMAGRP_STATUS_RU
 ) != 0 ) {

1165 
	`dwmac_c‹e_dma_ª°¨t_rx
–
£lf
 );

1166 
	`DWMAC_PRINT_DBG
(

1168 
idx


1170 ++
cou¡s
->
dma_su•íded
;

1171 
£lf
->
dmagΩ
->
°©us
 = 
DMAGRP_STATUS_RU
;

1174 
idx
 = 
idx_√xt
;

1175 ++
cou¡s
->
‰ames
;

1179 
£lf
->
dmagΩ
->
°©us
 = 
DMAGRP_STATUS_RI
;

1183 
	`dwmac_íabÀ_úq_rx
–
£lf
 );

1185 
	}
}

1187 
mbuf
 *
	$dwmac_√xt_‰agmít
(

1188 
i‚ë
 *
iÂ
,

1189 
mbuf
 *
m
,

1190 
boﬁ
 *
is_fú°
,

1191 
boﬁ
 *
is_œ°
,

1192 
size_t
 *
size
 ) {

1193 
mbuf
 *
n
 = 
NULL
;

1194 
sz
 = 0;

1197  
åue
 ) {

1198 i‡–
m
 =
NULL
 ) {

1200 
	`IF_DEQUEUE
–&
iÂ
->
if_¢d
, 
m
 );

1203 i‡–
m
 =
NULL
 ) {

1204  
m
;

1209 
	`as£π
–
ETHER_MAX_LEN
 >
m
->
m_pkthdr
.
Àn
 );

1210 *
is_fú°
 = 
åue
;

1214 
sz
 = 
m
->
m_Àn
;

1216 i‡–
sz
 > 0 ) {

1221 
m
 = 
	`m_‰ì
( m );

1226 *
size
 = (
size_t
Ë
sz
;

1229 
n
 = 
m
->
m_√xt
;

1231  
n
 !
NULL
 &&Ç->
m_Àn
 <= 0 ) {

1232 
n
 = 
	`m_‰ì
(Ç );

1235 
m
->
m_√xt
 = 
n
;

1238 i‡–
n
 =
NULL
 ) {

1239 *
is_œ°
 = 
åue
;

1241 *
is_œ°
 = 
Ál£
;

1244  
m
;

1245 
	}
}

1247 
	$dwmac_upd©e_aut⁄egŸüti⁄_∑øms
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1249 
ío
 = 0;

1250 
uöt32_t
 
vÆue
 = 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
;

1251 
medü
 = 0;

1252 
boﬁ
 
medü_ok
 = 
	`dwmac_if_medü_°©us
(

1253 
£lf
, &
medü
, sñf->
MDIO_BUS_ADDR
 );

1256 i‡–
medü_ok
 ) {

1258 i‡–
IFM_ETHER
 =
	`IFM_TYPE
–
medü
 ) ) {

1259 i‡–
IFM_NONE
 !
	`IFM_SUBTYPE
–
medü
 ) ) {

1260 i‡–
IFM_FDX
 & 
medü
 ) {

1262 
vÆue
 |
MACGRP_MAC_CONFIGURATION_DM
;

1265 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_DM
;

1268  
	`IFM_SUBTYPE
–
medü
 ) ) {

1269 
IFM_10_T
:

1272 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_FES
;

1275 
vÆue
 |
MACGRP_MAC_CONFIGURATION_PS
;

1277 
IFM_100_TX
:

1280 
vÆue
 |
MACGRP_MAC_CONFIGURATION_FES
;

1283 
vÆue
 |
MACGRP_MAC_CONFIGURATION_PS
;

1285 
IFM_1000_T
:

1288 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_FES
;

1291 
vÆue
 &~
MACGRP_MAC_CONFIGURATION_PS
;

1294 
ío
 = 
ENOTSUP
;

1298 
ío
 = 
ENOTSUP
;

1301 
ío
 = 
ENOTSUP
;

1304 
ío
 = 
ENOTSUP
;

1307 i‡–
ío
 == 0 ) {

1308 
£lf
->
macgΩ
->
mac_c⁄figuøti⁄
 = 
vÆue
;

1311  
ío
;

1312 
	}
}

1316 
	$dwmac_èsk_tx
–*
¨g
 )

1318 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = 
¨g
;

1319 
idx_å™smô
 = 0;

1320 
idx_å™smô_fú°
 = 0;

1321 
idx_å™smôãd
 = 0;

1322 
idx_ªÀa£
 = 0;

1323 
mbuf
 *
p_m
 = 
NULL
;

1324 
boﬁ
 
is_fú°
 = 
Ál£
;

1325 
boﬁ
 
is_œ°
 = 
Ál£
;

1326 
size_t
 
size
 = 0;

1327 c⁄° 
INDEX_MAX
 =

1328 (Ë
£lf
->
bsd_c⁄fig
->
xbuf_cou¡
 - 1U;

1329 c⁄° 
dwmac_comm⁄_dma_›s
 *
DMA_OPS
 =

1330 (c⁄° 
dwmac_comm⁄_dma_›s
 *Ë
£lf
->
CFG
->
MAC_OPS
->
dma
;

1331 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

1332 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

1333 c⁄° 
dwmac_ˇŒback_cfg
 *
CALLBACK
 = &
£lf
->
CFG
->CALLBACK;

1336  
åue
 ) {

1337 
πems_evít_£t
 
evíts
 = 0;

1338 
πems_°©us_code
 
sc
 = 
	`πems_bsd√t_evít_ª˚ive
(

1339 
DWMAC_COMMON_EVENT_TASK_INIT


1340 | 
DWMAC_COMMON_EVENT_TASK_STOP


1341 | 
DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME


1342 | 
DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED


1343 | 
DWMAC_COMMON_EVENT_TX_BUMP_UP_DMA_THRESHOLD


1344 | 
DWMAC_COMMON_EVENT_TX_PHY_STATUS_CHANGE
,

1345 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

1346 
RTEMS_NO_TIMEOUT
,

1347 &
evíts


1349 
	`as£π
–
sc
 =
RTEMS_SUCCESSFUL
 );

1351  
evíts
 != 0 ) {

1353 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TX_PHY_STATUS_CHANGE
 ) != 0 ) {

1354 
evíts
 &~
DWMAC_COMMON_EVENT_TX_PHY_STATUS_CHANGE
;

1355 
dwmac_comm⁄_phy_°©us_cou¡s
 *
cou¡s
 =

1356 &
£lf
->
°©s
.
phy_°©us_cou¡s
;

1357 
dwmac_phy_evít
 
phy_evíts
 = 0;

1358 
ío
;

1361 
ío
 = 
CALLBACK
->
	`phy_evíts_gë
(

1362 
£lf
->
¨g
,

1363 &
phy_evíts


1366 i‡–
ío
 == 0 ) {

1368 
ío
 = 
CALLBACK
->
	`phy_evít_˛ór
–
£lf
->
¨g
 );

1371 i‡–
ío
 == 0 ) {

1372 i‡––
phy_evíts
 & 
PHY_EVENT_LINK_DOWN
 ) != 0 ) {

1373 ++
cou¡s
->
lök_down
;

1376 i‡––
phy_evíts
 & 
PHY_EVENT_LINK_UP
 ) != 0 ) {

1377 ++
cou¡s
->
lök_up
;

1381 (Ë
	`dwmac_upd©e_aut⁄egŸüti⁄_∑øms
–
£lf
 );

1385 
	`as£π
–
ío
 == 0 );

1389 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TASK_STOP
 ) != 0 ) {

1390 
	`dwmac_c‹e_dma_°›_tx
–
£lf
 );

1391 
	`dwmac_dißbÀ_úq_tx_Æl
–
£lf
 );

1394 –
DESC_OPS
->
ªÀa£_tx_bufs
 )–
£lf
 );

1396 
	`dwmac_c⁄åﬁ_ªque°_com∂ëe
–
£lf
 );

1400 
evíts
 = 0;

1405 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TASK_INIT
 ) != 0 ) {

1406 
evíts
 &~
DWMAC_COMMON_EVENT_TASK_INIT
;

1407 (Ë
	`dwmac_upd©e_aut⁄egŸüti⁄_∑øms
–
£lf
 );

1408 
	`dwmac_c‹e_dma_°›_tx
–
£lf
 );

1409 –
DESC_OPS
->
ªÀa£_tx_bufs
 )–
£lf
 );

1410 
idx_å™smô
 = 0;

1411 
idx_å™smô_fú°
 = 0;

1412 
idx_å™smôãd
 = 0;

1413 
idx_ªÀa£
 = 0;

1414 
p_m
 = 
NULL
;

1415 
is_fú°
 = 
Ál£
;

1416 
is_œ°
 = 
Ál£
;

1417 
size
 = 0;

1418 –
DESC_OPS
->
öô_tx_desc
 )–
£lf
 );

1419 
	`dwmac_c‹e_dma_°¨t_tx
–
£lf
 );

1420 
	`dwmac_c‹e_dma_ª°¨t_tx
–
£lf
 );

1423 
	`dwmac_c‹e_ª£t_dma_úq_°©us_tx
–
£lf
 );

1424 
	`dwmac_íabÀ_úq_tx_deÁu…
–
£lf
 );

1426 
	`dwmac_c⁄åﬁ_ªque°_com∂ëe
–
£lf
 );

1430 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TX_BUMP_UP_DMA_THRESHOLD
 ) != 0 ) {

1431 
evíts
 &~
DWMAC_COMMON_EVENT_TX_BUMP_UP_DMA_THRESHOLD
;

1432 i‡–
£lf
->
dma_thªshﬁd_c⁄åﬁ


1433 !
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD


1434 && 
£lf
->
dma_thªshﬁd_c⁄åﬁ
 <= 256 ) {

1435 
£lf
->
dma_thªshﬁd_c⁄åﬁ
 += 64;

1436 –
DMA_OPS
->
dma_mode
 )(

1437 
£lf
,

1438 
£lf
->
dma_thªshﬁd_c⁄åﬁ
,

1439 
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD


1445 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED
 ) != 0 ) {

1446 
evíts
 &~
DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED
;

1447 
dwmac_comm⁄_tx_‰ame_cou¡s
 *
cou¡s
 = &
£lf
->
°©s
.
‰ame_cou¡s_tx
;

1448 
	`dwmac_dißbÀ_úq_tx_å™smôãd
–
£lf
 );

1451 
idx_å™smôãd_√xt
 = 
	`dwmac_ö¸emít
(

1452 
idx_å™smôãd
, 
INDEX_MAX
 );

1455 if–
idx_ªÀa£
 !
idx_å™smôãd_√xt


1456 && ( 
DESC_OPS
->
am_i_tx_ow√r
 )–
£lf
, 
idx_ªÀa£
 ) ) {

1457  
idx_ªÀa£
 !
idx_å™smôãd_√xt


1458 && ( 
DESC_OPS
->
am_i_tx_ow√r
 )–
£lf
, 
idx_ªÀa£
 ) ) {

1460 i‡––
DESC_OPS
->
gë_tx_ls
 )–
£lf
, 
idx_ªÀa£
 ) ) {

1461 
°©us
 = ( 
DESC_OPS
->
tx_°©us
 )(

1462 
£lf
, 
idx_ªÀa£


1465 i‡–
°©us
 == 0 ) {

1466 ++
cou¡s
->
∑ckës_å™môãd_by_DMA
;

1468 ++
cou¡s
->
∑ckë_îr‹s
;

1472 
	`DWMAC_PRINT_DBG
(

1474 
idx_ªÀa£


1478 –
DESC_OPS
->
ªÀa£_tx_desc
 )–
£lf
, 
idx_ªÀa£
 );

1481 
	`m_‰ì
–
£lf
->
mbuf_addr_tx
[
idx_ªÀa£
] );

1482 
£lf
->
mbuf_addr_tx
[
idx_ªÀa£
] = 
NULL
;

1485 
idx_ªÀa£
 = 
	`dwmac_ö¸emít
(

1486 
idx_ªÀa£
, 
INDEX_MAX
 );

1488 i‡––
£lf
->
¨pcom
.
ac_if
.
if_Êags
 & 
IFF_OACTIVE
 ) != 0 ) {

1492 
evíts
 |
DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME
;

1496 
£lf
->
dmagΩ
->
°©us
 = 
DMAGRP_STATUS_TI
;

1498 
	`dwmac_íabÀ_úq_tx_å™smôãd
–
£lf
 );

1503 i‡––
evíts
 & 
DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME
 ) != 0 ) {

1504 
evíts
 &~
DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME
;

1505 
dwmac_comm⁄_tx_‰ame_cou¡s
 *
cou¡s
 = &
£lf
->
°©s
.
‰ame_cou¡s_tx
;

1507 i‡–
p_m
 !
NULL
 ) {

1509 --
cou¡s
->
‰ames_‰om_°ack
;

1512  
åue
 ) {

1513 
idx
 = 
	`dwmac_ö¸emít
(

1514 
idx_å™smô
, 
INDEX_MAX
 );

1516 
p_m
 = 
	`dwmac_√xt_‰agmít
(

1517 &
£lf
->
¨pcom
.
ac_if
,

1518 
p_m
,

1519 &
is_fú°
,

1520 &
is_œ°
,

1521 &
size


1525 i‡–
p_m
 !
NULL
 ) {

1526 ++
cou¡s
->
‰ames_‰om_°ack
;

1529 i‡–
idx
 =
idx_ªÀa£
 ) {

1530 
	`DWMAC_PRINT_DBG
–"tx: fuŒ queue: 0x%08x\n", 
p_m
 );

1537 
	`πems_ˇche_Êush_mu…ùÀ_d©a_löes
(

1538 
	`mtod
–
p_m
, const * ),

1539 
size


1542 –
DESC_OPS
->
¥ï¨e_tx_desc
 )(

1543 
£lf
,

1544 
idx_å™smô
,

1545 
is_fú°
,

1546 
size
,

1547 
	`mtod
–
p_m
, const * )

1549 
£lf
->
mbuf_addr_tx
[
idx_å™smô
] = 
p_m
;

1551 ++
cou¡s
->
‰ames_to_dma
;

1552 
cou¡s
->
byãs_to_dma
 +
size
;

1553 
	`DWMAC_PRINT_DBG
(

1554 "tx: %02" 
PRIu32
 ": %u %s%s\n",

1555 
idx_å™smô
, 
size
,

1556 –
is_fú°
 !
Ál£
 ) ? ( "F" ) : ( "" ),

1557 –
is_œ°
 !
Ál£
 ) ? ( "L" ) : ( "" )

1561 i‡–
is_fú°
 ) {

1562 
idx_å™smô_fú°
 = 
idx_å™smô
;

1563 
is_fú°
 = 
Ál£
;

1566 –
DESC_OPS
->
ªÀa£_tx_ow√rshù
 )–
£lf
, 
idx_å™smô
 );

1569 i‡–
is_œ°
 ) {

1571 –
DESC_OPS
->
˛o£_tx_desc
 )–
£lf
, 
idx_å™smô
 );

1574 –
DESC_OPS
->
ªÀa£_tx_ow√rshù
 )–
£lf
, 
idx_å™smô_fú°
 );

1575 
idx_å™smôãd
 = 
idx_å™smô
;

1577 i‡––
£lf
->
dmagΩ
->
°©us
 & 
DMAGRP_STATUS_TU
 ) != 0 ) {

1579 
	`dwmac_c‹e_dma_ª°¨t_tx
–
£lf
 );

1580 
	`DWMAC_PRINT_DBG
(

1582 
idx_å™smô_fú°


1588 
idx_å™smô
 = 
idx
;

1590 i‡–
is_œ°
 ) {

1591 ++
cou¡s
->
∑ckës_to_dma
;

1595 
p_m
 =Ö_m->
m_√xt
;

1603 i‡–
p_m
 =
NULL
 ) {

1605 
£lf
->
¨pcom
.
ac_if
.
if_Êags
 &~
IFF_OACTIVE
;

1611 
	`DWMAC_PRINT_DBG
( "tx:Åransmission incomplete\n" );

1612 
evíts
 |
DWMAC_COMMON_EVENT_TX_FRAME_TRANSMITTED
;

1618 
	`DWMAC_PRINT_DBG
( "tx:ÉnableÅransmit interrupts\n" );

1621 
	}
}

1625 
	$dwmac_if_öãrÁ˚_öô
–*
¨g
 )

1627 (Ë
¨g
;

1628 
	}
}

1630 
	$dwmac_if_£t_¥omiscous_mode
(

1631 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

1632 c⁄° 
boﬁ
 
íabÀd
 )

1634 i‡–
íabÀd
 ) {

1636 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 |
MACGRP_MAC_FRAME_FILTER_PR
;

1639 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 &~
MACGRP_MAC_FRAME_FILTER_PR
;

1640 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 &~
MACGRP_MAC_FRAME_FILTER_HUC
;

1641 
£lf
->
macgΩ
->
mac_‰ame_fûãr
 |
MACGRP_MAC_FRAME_FILTER_HPF
;

1643 
	}
}

1645 
	$dwmac_¸óã_dma_desc_rögs
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1647 
ío
 = 0;

1648 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

1649 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

1653 
ío
 = ( 
DESC_OPS
->
¸óã_rx_desc
 )–
£lf
 );

1655 i‡–
ío
 == 0 ) {

1656 
ío
 = ( 
DESC_OPS
->
¸óã_tx_desc
 )–
£lf
 );

1659  
ío
;

1660 
	}
}

1662 
	$dwmac_de°roy_dma_desc_rögs
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1664 
ío
 = 0;

1665 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

1666 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

1670 
ío
 = ( 
DESC_OPS
->
de°roy_rx_desc
 )–
£lf
 );

1672 i‡–
ío
 == 0 ) {

1673 
ío
 = ( 
DESC_OPS
->
de°roy_tx_desc
 )–
£lf
 );

1676  
ío
;

1677 
	}
}

1679 
	$dwmac_öô_dma_ígöe
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1681 
uöt32_t
 
pbl
 =

1682 
DWMAC_DMA_BUS_MODE_PBL_DEFAULT
;

1683 
uöt32_t
 
fixed_bur°
 =

1684 
DWMAC_DMA_BUS_MODE_FB_DEFAULT
;

1685 
uöt32_t
 
mixed_bur°
 =

1686 
DWMAC_DMA_BUS_MODE_MIXED_BURSTS_DEFAULT
;

1687 
uöt32_t
 
bur°_Àn_4_suµ‹t
 =

1688 
DWMAC_DMA_AXI_BURST_LENGTH_4_DEFAULT
;

1689 
uöt32_t
 
bur°_Àn_8_suµ‹t
 =

1690 
DWMAC_DMA_AXI_BURST_LENGTH_8_DEFAULT
;

1691 
uöt32_t
 
bur°_Àn_16_suµ‹t
 =

1692 
DWMAC_DMA_AXI_BURST_LENGTH_16_DEFAULT
;

1693 
uöt32_t
 
bur°_bound¨y
 =

1694 
DWMAC_DMA_AXI_BURST_BOUNDARY_DEFAULT
;

1695 c⁄° 
dwmac_comm⁄_dma_›s
 *
DMA_OPS
 =

1696 (c⁄° 
dwmac_comm⁄_dma_›s
 *Ë
£lf
->
CFG
->
MAC_OPS
->
dma
;

1697 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

1698 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
£lf
->
CFG
->
DESC_OPS
->
›s
;

1702 i‡–
£lf
->
CFG
->
DMA_CFG
 !
NULL
 ) {

1703 c⁄° 
dwmac_dma_cfg
 *
DMA_CFG
 = 
£lf
->
CFG
->DMA_CFG;

1704 
pbl
 = 
DMA_CFG
->
bus_mode_bur°_Àngth
;

1705 
fixed_bur°
 = 
DMA_CFG
->
bus_mode_bur°_mode
;

1706 
mixed_bur°
 = 
DMA_CFG
->
bus_mode_bur°_mixed
;

1707 
bur°_Àn_4_suµ‹t
 = 
DMA_CFG
->
axi_bur°_Àngth_4_suµ‹t
;

1708 
bur°_Àn_8_suµ‹t
 = 
DMA_CFG
->
axi_bur°_Àngth_8_suµ‹t
;

1709 
bur°_Àn_16_suµ‹t
 = 
DMA_CFG
->
axi_bur°_Àngth_16_suµ‹t
;

1710 
bur°_bound¨y
 = 
DMA_CFG
->
axi_bur°_bound¨y
;

1713  ( 
DMA_OPS
->
öô
 )(

1714 
£lf
,

1715 
pbl
,

1716 
fixed_bur°
,

1717 
mixed_bur°
,

1718 –
DESC_OPS
->
u£_íh™˚d_descs
 )–
£lf
 ),

1719 
bur°_Àn_4_suµ‹t
,

1720 
bur°_Àn_8_suµ‹t
,

1721 
bur°_Àn_16_suµ‹t
,

1722 
bur°_bound¨y
,

1723 &
£lf
->
dma_tx
[0],

1724 &
£lf
->
dma_rx
[0]

1726 
	}
}

1728 
	$dwmac_dma_›î©i⁄_mode
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1730 c⁄° 
dwmac_comm⁄_dma_›s
 *
DMA_OPS
 =

1731 (c⁄° 
dwmac_comm⁄_dma_›s
 *Ë
£lf
->
CFG
->
MAC_OPS
->
dma
;

1734 i‡––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_TXOESEL
 ) != 0 ) {

1735 –
DMA_OPS
->
dma_mode
 )(

1736 
£lf
,

1737 
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD
,

1738 
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD


1740 
£lf
->
dma_thªshﬁd_c⁄åﬁ
 = 
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD
;

1742 –
DMA_OPS
->
dma_mode
 )(

1743 
£lf
,

1744 
£lf
->
dma_thªshﬁd_c⁄åﬁ
,

1745 
DWMAC_COMMON_DMA_MODE_STORE_AND_FORWARD


1748 
	}
}

1750 
	$dwmac_mmc_£tup
–
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

1756 
	`as£π
––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_MMCSEL
 ) != 0 );

1758 i‡––
£lf
->
dmagΩ
->
hw_„©uª
 & 
DMAGRP_HW_FEATURE_MMCSEL
 ) != 0 ) {

1759 
£lf
->
macgΩ
->
mmc_c⁄åﬁ
 = 
MACGRP_MMC_CONTROL_CNTRST
;

1761 
	}
}

1763 
	$dwmac_if_up_‹_down
(

1764 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

1765 c⁄° 
boﬁ
 
up
 )

1767 
ío
 = 0;

1768 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1769 
i‚ë
 *
iÂ
 = &
£lf
->
¨pcom
.
ac_if
;

1770 c⁄° 
dwmac_ˇŒback_cfg
 *
CALLBACK
 = &
£lf
->
CFG
->CALLBACK;

1771 c⁄° 
dwmac_comm⁄_c‹e_›s
 *
CORE_OPS
 =

1772 (c⁄° 
dwmac_comm⁄_c‹e_›s
 *Ë
£lf
->
CFG
->
MAC_OPS
->
c‹e
;

1775 i‡–
up
 && 
£lf
->
°©e
 =
DWMAC_COMMON_STATE_DOWN
 ) {

1776 
ío
 = 
CALLBACK
->
	`nic_íabÀ
–
£lf
->
¨g
 );

1778 i‡–
ío
 == 0 ) {

1779 
ío
 = 
CALLBACK
->
	`phy_íabÀ
–
£lf
->
¨g
 );

1782 i‡–
ío
 == 0 ) {

1783 
ío
 = 
CALLBACK
->
	`phy_evít_íabÀ
(

1784 
£lf
->
¨g
,

1785 
PHY_EVENT_LINK_DOWN


1786 | 
PHY_EVENT_LINK_UP


1790 i‡–
ío
 == 0 ) {

1791 
ío
 = 
	`dwmac_¸óã_dma_desc_rögs
–
£lf
 );

1794 i‡–
ío
 == 0 ) {

1795 
ío
 = 
	`dwmac_öô_dma_ígöe
–
£lf
 );

1798 i‡–
ío
 == 0 ) {

1800 –
CORE_OPS
->
£t_umac_addr
 )–
£lf
, sñf->
¨pcom
.
ac_íaddr
, 0 );

1802 
ío
 = ( 
CALLBACK
->
bus_£tup
 )–
£lf
->
¨g
 );

1805 i‡–
ío
 == 0 ) {

1807 –
CORE_OPS
->
c‹e_öô
 )–
£lf
 );

1810 
	`dwmac_c‹e_£t_mac
–
£lf
, 
åue
 );

1813 
	`dwmac_dma_›î©i⁄_mode
–
£lf
 );

1816 
	`dwmac_mmc_£tup
–
£lf
 );

1818 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


1820 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

1821 
£lf
->
CFG
->
IRQ_EMAC
,

1823 
RTEMS_INTERRUPT_UNIQUE
,

1824 
dwmac_c‹e_dma_öãºu±
,

1825 
£lf


1828 
sc
 = 
RTEMS_NOT_IMPLEMENTED
;

1830 
ío
 = 
	`πems_°©us_code_to_î∫o
–
sc
 );

1833 i‡–
ío
 == 0 ) {

1835 
ío
 = 
	`dwmac_c⁄åﬁ_ªque°
(

1836 
£lf
, sñf->
èsk_id_tx
, 
DWMAC_COMMON_EVENT_TASK_INIT
 );

1839 i‡–
ío
 == 0 ) {

1840 
ío
 = 
	`dwmac_c⁄åﬁ_ªque°
(

1841 
£lf
, sñf->
èsk_id_rx
, 
DWMAC_COMMON_EVENT_TASK_INIT
 );

1844 i‡–
ío
 == 0 ) {

1845 
	`dwmac_c‹e_dma_°¨t_rx
–
£lf
 );

1848 
ío
 = ( 
CALLBACK
->
phy_°¨t
 )–
£lf
->
¨g
 );

1851 i‡–
ío
 == 0 ) {

1852 
£lf
->
°©e
 = 
DWMAC_COMMON_STATE_UP
;

1854 
iÂ
->
if_Êags
 &~
IFF_UP
;

1855 (Ë
	`dwmac_c⁄åﬁ_ªque°
(

1856 
£lf
, sñf->
èsk_id_tx
, 
DWMAC_COMMON_EVENT_TASK_STOP
 );

1857 (Ë
	`dwmac_c⁄åﬁ_ªque°
(

1858 
£lf
, sñf->
èsk_id_rx
, 
DWMAC_COMMON_EVENT_TASK_STOP
 );

1859 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


1860 (Ë
	`πems_öãºu±_h™dÀr_ªmove
(

1861 
£lf
->
CFG
->
IRQ_EMAC
,

1862 
dwmac_c‹e_dma_öãºu±
,

1863 
£lf


1866 (Ë–
CALLBACK
->
phy_°›
 )–
£lf
->
¨g
 );

1867 (Ë–
CALLBACK
->
phy_dißbÀ
 )–
£lf
->
¨g
 );

1870 
	`dwmac_c‹e_£t_mac
–
£lf
, 
Ál£
 );

1871 (Ë–
CALLBACK
->
nic_dißbÀ
 )–
£lf
->
¨g
 );

1872 (Ë
	`dwmac_de°roy_dma_desc_rögs
–
£lf
 );

1874 } i‡–!
up
 && 
£lf
->
°©e
 =
DWMAC_COMMON_STATE_UP
 ) {

1875 i‡–
ío
 == 0 ) {

1876 
ío
 = 
	`dwmac_c⁄åﬁ_ªque°
(

1877 
£lf
, sñf->
èsk_id_tx
, 
DWMAC_COMMON_EVENT_TASK_STOP
 );

1880 i‡–
ío
 == 0 ) {

1881 
ío
 = 
	`dwmac_c⁄åﬁ_ªque°
(

1882 
£lf
, sñf->
èsk_id_rx
, 
DWMAC_COMMON_EVENT_TASK_STOP
 );

1885 i‡–
ío
 == 0 ) {

1886 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


1887 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

1888 
£lf
->
CFG
->
IRQ_EMAC
,

1889 
dwmac_c‹e_dma_öãºu±
,

1890 
£lf


1893 
sc
 = 
RTEMS_NOT_IMPLEMENTED
;

1895 
ío
 = 
	`πems_°©us_code_to_î∫o
–
sc
 );

1898 i‡–
ío
 == 0 ) {

1899 
ío
 = ( 
CALLBACK
->
phy_°›
 )–
£lf
->
¨g
 );

1902 i‡–
ío
 == 0 ) {

1903 
ío
 = ( 
CALLBACK
->
phy_dißbÀ
 )–
£lf
->
¨g
 );

1906 i‡–
ío
 == 0 ) {

1908 
	`dwmac_c‹e_£t_mac
–
£lf
, 
Ál£
 );

1910 
ío
 = 
CALLBACK
->
	`nic_dißbÀ
–
£lf
->
¨g
 );

1913 i‡–
ío
 == 0 ) {

1914 
ío
 = 
	`dwmac_de°roy_dma_desc_rögs
–
£lf
 );

1917 i‡–
ío
 == 0 ) {

1919 
	`mem£t
–&
£lf
->
°©s
, 0, –
dwmac_comm⁄_°©s
 ) );

1922 
£lf
->
°©e
 = 
DWMAC_COMMON_STATE_DOWN
;

1926  
ío
;

1927 
	}
}

1931 
	$dwmac_if_öãrÁ˚_io˘l
(

1932 
i‚ë
 *
iÂ
,

1933 
io˘l_comm™d_t
 
cmd
,

1934 
ˇddr_t
 
d©a
 )

1936 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = 
iÂ
->
if_so·c
;

1937 
ío
 = 0;

1940  
cmd
 ) {

1941 
SIOCGIFMEDIA
:

1942 
SIOCSIFMEDIA
:

1943 
	`πems_mii_io˘l
–&
£lf
->
mdio
, sñf, 
cmd
, (*Ë
d©a
 );

1945 
SIOCGIFADDR
:

1946 
SIOCSIFADDR
:

1947 
	`ëhî_io˘l
–
iÂ
, 
cmd
, 
d©a
 );

1949 
SIOCSIFFLAGS
:

1950 
ío
 = 
	`dwmac_if_up_‹_down
–
£lf
, ( 
iÂ
->
if_Êags
 & 
IFF_UP
 ) != 0 );

1952 i‡–
ío
 =0 && ( 
iÂ
->
if_Êags
 & 
IFF_UP
 ) != 0 ) {

1953 
	`dwmac_if_£t_¥omiscous_mode
–
£lf
, ( 
iÂ
->
if_Êags
 & 
IFF_PROMISC
 )

1956 
	`as£π
–
ío
 == 0 );

1960 
SIOCADDMULTI
:

1961 
SIOCDELMULTI
:

1962 #i‚de‡
COMMENTED_OUT


1963 
ío
 = 
ENOTSUP
;

1966 
i‰eq
 *
i‰
 = (i‰eq *Ë
d©a
;

1967 c⁄° 
dwmac_comm⁄_c‹e_›s
 *
CORE_OPS
 =

1968 (c⁄° 
dwmac_comm⁄_c‹e_›s
 *Ë
£lf
->
CFG
->
MAC_OPS
->
c‹e
;

1969 –
CORE_OPS
->
£t_hash_fûãr
 )–
£lf
, 
cmd
 =
SIOCADDMULTI
, 
i‰
 );

1973 
SIO_RTEMS_SHOW_STATS
:

1974 
ío
 = 
	`dwmac_if_öãrÁ˚_°©s
–
£lf
 );

1977 
ío
 = 
EINVAL
;

1981  
ío
;

1982 
	}
}

1985 
	$dwmac_if_öãrÁ˚_°¨t
–
i‚ë
 *
iÂ
 )

1987 
πems_°©us_code
 
sc
;

1988 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = 
iÂ
->
if_so·c
;

1992 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

1994 i‡–
£lf
->
°©e
 =
DWMAC_COMMON_STATE_UP
 ) {

1996 
sc
 = 
	`πems_bsd√t_evít_£nd
–
£lf
->
èsk_id_tx
,

1997 
DWMAC_COMMON_EVENT_TX_TRANSMIT_FRAME
 );

1998 
	`as£π
–
sc
 =
RTEMS_SUCCESSFUL
 );

2000 
	}
}

2002 
	$dwmac_if_˛k_c§_£t
(

2003 c⁄° 
uöt32_t
 
gmii_˛k_øã
,

2004 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 )

2006 
ío
 = 0;

2009 i‡–
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_35M
 ) {

2010 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_20_35M
;

2011 } i‡––
gmii_˛k_øã
 >
DWCGNAC3504_CSR_F_35M
 )

2012 && ( 
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_60M
 ) ) {

2013 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_35_60M
;

2014 } i‡––
gmii_˛k_øã
 >
DWCGNAC3504_CSR_F_60M
 )

2015 && ( 
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_100M
 ) ) {

2016 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_60_100M
;

2017 } i‡––
gmii_˛k_øã
 >
DWCGNAC3504_CSR_F_100M
 )

2018 && ( 
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_150M
 ) ) {

2019 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_100_150M
;

2020 } i‡––
gmii_˛k_øã
 >
DWCGNAC3504_CSR_F_150M
 )

2021 && ( 
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_250M
 ) ) {

2022 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_150_250M
;

2023 } i‡––
gmii_˛k_øã
 >
DWCGNAC3504_CSR_F_250M
 )

2024 && ( 
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_300M
 ) ) {

2025 
£lf
->
c§_˛ock
 = 
DWCGNAC3504_CSR_250_300M
;

2027 
	`as£π
–
gmii_˛k_øã
 < 
DWCGNAC3504_CSR_F_300M
 );

2028 
ío
 = 
EINVAL
;

2031  
ío
;

2032 
	}
}

2034 
	$dwmac_fixup_unô_cou¡
(

2035 c⁄° 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

2036 c⁄° 
cou¡
,

2037 c⁄° 
deÁu…_vÆue
,

2038 c⁄° 
max
 )

2040 
ªt
 = 
cou¡
;

2043 i‡–
ªt
 <= 0 ) {

2044 
ªt
 = 
	`DWMAC_ALIGN
–
deÁu…_vÆue
, 
£lf
->
CFG
->
L1_CACHE_LINE_SIZE
 );

2045 } i‡–
ªt
 > 
max
 ) {

2046 
ªt
 = 
	`DWMAC_ALIGN
–
max
, 
£lf
->
CFG
->
L1_CACHE_LINE_SIZE
 );

2049  
ªt
;

2050 
	}
}

2053 
	$dwmac_if_©èch
(

2054 
dwmac_comm⁄_c⁄ãxt
 *
£lf
,

2055 
πems_bsd√t_ifc⁄fig
 *
bsd_c⁄fig
,

2056 c⁄° 
dwmac_cfg
 *
drivî_c⁄fig
,

2057 *
¨g
 )

2059 
ío
 = 0;

2060 
i‚ë
 *
iÂ
 = &
£lf
->
¨pcom
.
ac_if
;

2061 *
unô_«me
 = 
NULL
;

2062 
unô_numbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
(

2063 
bsd_c⁄fig
,

2064 &
unô_«me
 );

2065 c⁄° 
dwmac_ˇŒback_cfg
 *
CALLBACK
 = &
drivî_c⁄fig
->CALLBACK;

2066 c⁄° 
dwmac_comm⁄_desc_›s
 *
DESC_OPS
 =

2067 (c⁄° 
dwmac_comm⁄_desc_›s
 *Ë
drivî_c⁄fig
->
DESC_OPS
->
›s
;

2068 c⁄° 
dwmac_ifc⁄fig_drv_˘æ
 *
drv_˘æ
 =

2069 (c⁄° 
dwmac_ifc⁄fig_drv_˘æ
 *Ë
bsd_c⁄fig
->
drv_˘æ
;

2071 
	`as£π
–
£lf
 !
NULL
 );

2072 
	`as£π
–
bsd_c⁄fig
 !
NULL
 );

2073 
	`as£π
–
drivî_c⁄fig
 !
NULL
 );

2074 
	`as£π
–
CALLBACK
 !
NULL
 );

2076 i‡–
£lf
 =
NULL


2077 || 
bsd_c⁄fig
 =
NULL


2078 || 
drivî_c⁄fig
 =
NULL


2079 || 
CALLBACK
 =
NULL


2081 
ío
 = 
EINVAL
;

2083 
	`as£π
–
CALLBACK
->
nic_íabÀ
 !
NULL
 );

2084 
	`as£π
–
CALLBACK
->
nic_dißbÀ
 !
NULL
 );

2085 
	`as£π
–
CALLBACK
->
phy_íabÀ
 !
NULL
 );

2086 
	`as£π
–
CALLBACK
->
phy_dißbÀ
 !
NULL
 );

2087 
	`as£π
–
CALLBACK
->
phy_evít_íabÀ
 !
NULL
 );

2088 
	`as£π
–
CALLBACK
->
phy_evít_˛ór
 !
NULL
 );

2089 
	`as£π
–
CALLBACK
->
phy_evíts_gë
 !
NULL
 );

2090 
	`as£π
–
CALLBACK
->
phy_°¨t
 !
NULL
 );

2091 
	`as£π
–
CALLBACK
->
phy_°›
 !
NULL
 );

2092 
	`as£π
–
CALLBACK
->
mem_Æloc_noˇche
 !
NULL
 );

2093 
	`as£π
–
CALLBACK
->
mem_‰ì_noˇche
 !
NULL
 );

2094 
	`as£π
–
CALLBACK
->
bus_£tup
 !
NULL
 );

2096 i‡–
CALLBACK
->
nic_íabÀ
 =
NULL


2097 || 
CALLBACK
->
nic_dißbÀ
 =
NULL


2098 || 
CALLBACK
->
phy_íabÀ
 =
NULL


2099 || 
CALLBACK
->
phy_dißbÀ
 =
NULL


2100 || 
CALLBACK
->
phy_evít_íabÀ
 =
NULL


2101 || 
CALLBACK
->
phy_evít_˛ór
 =
NULL


2102 || 
CALLBACK
->
phy_evíts_gë
 =
NULL


2103 || 
CALLBACK
->
phy_°¨t
 =
NULL


2104 || 
CALLBACK
->
phy_°›
 =
NULL


2105 || 
CALLBACK
->
mem_Æloc_noˇche
 =
NULL


2106 || 
CALLBACK
->
mem_‰ì_noˇche
 =
NULL


2107 || 
CALLBACK
->
bus_£tup
 =
NULL


2109 
ío
 = 
EINVAL
;

2113 i‡–
ío
 == 0 ) {

2114 
£lf
->
dma_thªshﬁd_c⁄åﬁ
 = 
DWMAC_DMA_THRESHOLD_CONTROL_DEFAULT
;

2116 
	`as£π
–
drivî_c⁄fig
->
addr_gmac_ªgs
 !
NULL
 );

2117 i‡–
drivî_c⁄fig
->
addr_gmac_ªgs
 !
NULL
 ) {

2118 
£lf
->
macgΩ
 = 
drivî_c⁄fig
->
addr_gmac_ªgs
;

2120 
	`as£π
–
drivî_c⁄fig
->
addr_dma_ªgs
 !
NULL
 );

2121 i‡–
drivî_c⁄fig
->
addr_dma_ªgs
 !
NULL
 ) {

2122 
£lf
->
dmagΩ
 = 
drivî_c⁄fig
->
addr_dma_ªgs
;

2124 
ío
 = 
EINVAL
;

2127 
ío
 = 
EINVAL
;

2131 i‡–
ío
 == 0 ) {

2132 
ío
 = 
	`dwmac_if_˛k_c§_£t
(

2133 
drivî_c⁄fig
->
GMII_CLK_RATE
,

2134 
£lf


2138 i‡–
ío
 == 0 ) {

2139 i‡–
drv_˘æ
 =
NULL
 ) {

2140 
£lf
->
MDIO_BUS_ADDR
 = 
drivî_c⁄fig
->MDIO_BUS_ADDR;

2142 
£lf
->
MDIO_BUS_ADDR
 = 
drv_˘æ
->
phy_addr
;

2145 
	`as£π
–32 >
£lf
->
MDIO_BUS_ADDR
 );

2147 i‡–32 < 
£lf
->
MDIO_BUS_ADDR
 ) {

2148 
ío
 = 
EINVAL
;

2152 i‡–
ío
 == 0 ) {

2153 
£lf
->
¨g
 =árg;

2154 
£lf
->
°©e
 = 
DWMAC_COMMON_STATE_DOWN
;

2155 
£lf
->
bsd_c⁄fig
 = bsd_config;

2159 
bsd_c⁄fig
->
drv_˘æ
 = 
NULL
;

2162 
£lf
->
mdio
.
mdio_r
 = 
dwmac_if_mdio_ªad
;

2164 
£lf
->
mdio
.
mdio_w
 = 
dwmac_if_mdio_wrôe
;

2167 i‡–
drivî_c⁄fig
->
MAC_OPS
 =&
DWMAC_1000_ETHERNET_MAC_OPS
 ) {

2168 
£lf
->
mdio
.
has_gmii
 = 1;

2170 
£lf
->
mdio
.
has_gmii
 = 0;

2173 
	`as£π
–
drivî_c⁄fig
->
MAC_OPS
 =&
DWMAC_1000_ETHERNET_MAC_OPS
 );

2174 
ío
 = 
ENOTSUP
;

2177 i‡–
ío
 == 0 ) {

2178 
£lf
->
CFG
 = 
drivî_c⁄fig
;

2179 
iÂ
->
if_io˘l
 = 
dwmac_if_öãrÁ˚_io˘l
;

2181 
iÂ
->
if_öô
 = 
dwmac_if_öãrÁ˚_öô
;

2185 
bsd_c⁄fig
->
rbuf_cou¡
 = 
	`dwmac_fixup_unô_cou¡
(

2186 
£lf
,

2187 
bsd_c⁄fig
->
rbuf_cou¡
,

2188 
DWMAC_CONFIG_RX_UNIT_COUNT_DEFAULT
,

2189 
DWMAC_CONFIG_RX_UNIT_COUNT_MAX


2193 
bsd_c⁄fig
->
xbuf_cou¡
 = 
	`dwmac_fixup_unô_cou¡
(

2194 
£lf
,

2195 
bsd_c⁄fig
->
xbuf_cou¡
,

2196 
DWMAC_CONFIG_TX_UNIT_COUNT_DEFAULT
,

2197 
DWMAC_CONFIG_TX_UNIT_COUNT_MAX


2201 
DWMAC_GLOBAL_MBUF_CNT
 / 4 < 
bsd_c⁄fig
->
rbuf_cou¡


2202 || 
DWMAG_GLOBAL_MCLUST_CNT
 / 4 < 
bsd_c⁄fig
->
rbuf_cou¡


2204 
	`b•_Áèl
–
DWMAC_FATAL_TOO_MANY_RBUFS_CONFIGURED
 );

2208 
	`mem˝y
(

2209 
£lf
->
¨pcom
.
ac_íaddr
,

2210 
bsd_c⁄fig
->
h¨dw¨e_addªss
,

2211 
ETHER_ADDR_LEN


2215 
iÂ
->
if_so·c
 = 
£lf
;

2216 
iÂ
->
if_unô
 = (Ë
unô_numbî
;

2217 
iÂ
->
if_«me
 = 
unô_«me
;

2219 
iÂ
->
if_°¨t
 = 
dwmac_if_öãrÁ˚_°¨t
;

2221 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

2222 
iÂ
->
if_w©chdog
 = 
NULL
;

2223 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

2224 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

2225 
iÂ
->
if_timî
 = 0;

2226 
iÂ
->
if_mtu
 =

2227 
bsd_c⁄fig
->
mtu
 > 0 ? (
u_l⁄g
Ëbsd_c⁄fig->mtu : 
ETHERMTU
;

2229 
ío
 = 
DESC_OPS
->
	`vÆid©e
–
£lf
 );

2230 
	`as£π
–
ío
 == 0 );

2233 i‡–
ío
 == 0 ) {

2235 
	`as£π
–
£lf
->
èsk_id_rx
 =
RTEMS_ID_NONE
 );

2236 
£lf
->
èsk_id_rx
 = 
	`πems_bsd√t_√w¥oc
(

2239 
dwmac_èsk_rx
,

2240 
£lf


2242 
	`as£π
–
£lf
->
èsk_id_rx
 !
RTEMS_ID_NONE
 );

2244 i‡–
£lf
->
èsk_id_rx
 =
RTEMS_ID_NONE
 ) {

2245 
ío
 = 
ENOMEM
;

2249 i‡–
ío
 == 0 ) {

2251 
	`as£π
–
£lf
->
èsk_id_tx
 =
RTEMS_ID_NONE
 );

2252 
£lf
->
èsk_id_tx
 = 
	`πems_bsd√t_√w¥oc
(

2255 
dwmac_èsk_tx
,

2256 
£lf


2258 
	`as£π
–
£lf
->
èsk_id_tx
 !
RTEMS_ID_NONE
 );

2260 i‡–
£lf
->
èsk_id_tx
 =
RTEMS_ID_NONE
 ) {

2261 
ío
 = 
ENOMEM
;

2266 i‡–
ío
 == 0 ) {

2268 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

2271 
	`if_©èch
–
iÂ
 );

2272 
	`ëhî_iÁâach
–
iÂ
 );

2275  
ío
;

2276 
	}
}

2280 *
	$dwmac_√tw‹k_if_©èch_dëach
(

2281 
πems_bsd√t_ifc⁄fig
 *
bsd_c⁄fig
,

2282 c⁄° 
dwmac_cfg
 *
drivî_c⁄fig
,

2283 *
¨g
,

2284 
©èchög
 )

2286 
ío
 = 0;

2287 
dwmac_comm⁄_c⁄ãxt
 *
c⁄ãxt
 = 
NULL
;

2290 i‡–
©èchög
 ) {

2291 
c⁄ãxt
 = 
	`ˇŒoc
–1, –
dwmac_comm⁄_c⁄ãxt
 ) );

2292 
	`as£π
–
c⁄ãxt
 !
NULL
 );

2294 i‡–
c⁄ãxt
 !
NULL
 ) {

2295 
ío
 = 
	`dwmac_if_©èch
(

2296 
c⁄ãxt
,

2297 
bsd_c⁄fig
,

2298 
drivî_c⁄fig
,

2299 
¨g


2302 i‡–
ío
 != 0 ) {

2303 
	`‰ì
–
c⁄ãxt
, 0 );

2304 
c⁄ãxt
 = 
NULL
;

2309 
	`as£π
–
©èchög
 !
Ál£
 );

2312  
c⁄ãxt
;

2313 
	}
}

2315 
	$dwmac_if_ªad_‰om_phy
(

2316 *
¨g
,

2317 c⁄° 
phy_ªg
,

2318 
uöt16_t
 *
vÆ
 )

2320 
ío
 = 
EINVAL
;

2321 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

2322 
uöt32_t
 
vÆue
;

2325 i‡–
¨g
 !
NULL
 ) {

2326 
ío
 = 
	`dwmac_if_mdio_ªad
(

2327 
£lf
->
MDIO_BUS_ADDR
,

2328 
£lf
,

2329 
phy_ªg
,

2330 &
vÆue
 );

2333 i‡–
ío
 == 0 ) {

2334 *
vÆ
 = (
uöt16_t
Ë
vÆue
;

2337  
ío
;

2338 
	}
}

2340 
	$dwmac_if_wrôe_to_phy
(

2341 *
¨g
,

2342 c⁄° 
phy_ªg
,

2343 c⁄° 
uöt16_t
 
vÆ
 )

2345 
ío
 = 
EINVAL
;

2346 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

2349 i‡–
¨g
 !
NULL
 ) {

2350 
ío
 = 
	`dwmac_if_mdio_wrôe
(

2351 
£lf
->
MDIO_BUS_ADDR
,

2352 
£lf
,

2353 
phy_ªg
,

2354 
vÆ
 );

2357  
ío
;

2358 
	}
}

2360 
	$dwmac_if_h™dÀ_phy_evít
–*
¨g
 )

2362 
ío
;

2363 
πems_°©us_code
 
sc
;

2364 
dwmac_comm⁄_c⁄ãxt
 *
£lf
 = (dwmac_comm⁄_c⁄ãxà*Ë
¨g
;

2367 
sc
 = 
	`πems_bsd√t_evít_£nd
(

2368 
£lf
->
èsk_id_tx
,

2369 
DWMAC_COMMON_EVENT_TX_PHY_STATUS_CHANGE


2371 
ío
 = 
	`πems_°©us_code_to_î∫o
–
sc
 );

2373  
ío
;

2374 
	}
}

	@src/libchip/network/dwmac.h

23 #i‚de‡
DWMAC_H_


24 
	#DWMAC_H_


	)

26 
	~<°ddef.h
>

27 
	~<°döt.h
>

28 
	~<πems/πems_bsd√t.h
>

30 #ifde‡
__˝lu•lus


41 
phy_addr
;

42 } 
	tdwmac_ifc⁄fig_drv_˘æ
;

48 
uöt8_t
 
	tdwmac_phy_evít
;

51 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_JABBER
;

54 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_RECEIVE_ERROR
;

57 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_PAGE_RECEIVE
;

60 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_PARALLEL_DETECT_FAULT
;

63 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_LINK_PARTNER_ACK
;

66 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_LINK_DOWN
;

69 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_REMOTE_FAULT
;

72 c⁄° 
dwmac_phy_evít
 
PHY_EVENT_LINK_UP
;

83 (*
	tdwmac_if_nic_íabÀ
)–*
	t¨g
 );

94 (*
	tdwmac_if_nic_dißbÀ
)–*
	t¨g
 );

105 (*
	tdwmac_if_phy_íabÀ
)–*
	t¨g
 );

116 (*
	tdwmac_if_phy_dißbÀ
)–*
	t¨g
 );

129 (*
	tdwmac_if_phy_evít_íabÀ
)(

130 *
	t¨g
,

131 c⁄° 
	tdwmac_phy_evít
 
	tevít_£t
 );

142 (*
	tdwmac_if_phy_evít_°©us_˛ór
)–*
	t¨g
 );

157 (*
	tdwmac_if_phy_evíts_°©us_gë
)(

158 *
	t¨g
,

159 
	tdwmac_phy_evít
 *
	tevít_£t
 );

172 (*
	tdwcmac_if_phy_°¨t
)–*
	t¨g
 );

184 (*
	tdwcmac_if_phy_°›
)–*
	t¨g
 );

199 (*
	tdwmac_if_mem_Æloc_noˇche
)(

200 *
	t¨g
,

201 **
	tmem‹y
,

202 c⁄° 
	tsize_t
 
	tsize
 );

215 (*
	tdwmac_if_mem_‰ì_noˇche
)(

216 *
	t¨g
,

217 *
	tmem‹y
 );

229 (*
	tdwmac_if_bus_£tup
)–*
	t¨g
 );

242 
dwmac_if_nic_íabÀ
 
	gnic_íabÀ
;

245 
dwmac_if_nic_dißbÀ
 
	gnic_dißbÀ
;

248 
dwmac_if_phy_íabÀ
 
	gphy_íabÀ
;

251 
dwmac_if_phy_dißbÀ
 
	gphy_dißbÀ
;

254 
dwmac_if_phy_evít_íabÀ
 
	gphy_evít_íabÀ
;

257 
dwmac_if_phy_evít_°©us_˛ór
 
	gphy_evít_˛ór
;

260 
dwmac_if_phy_evíts_°©us_gë
 
	gphy_evíts_gë
;

263 
dwcmac_if_phy_°¨t
 
	gphy_°¨t
;

266 
dwcmac_if_phy_°›
 
	gphy_°›
;

269 
dwmac_if_mem_Æloc_noˇche
 
	gmem_Æloc_noˇche
;

272 
dwmac_if_mem_‰ì_noˇche
 
	gmem_‰ì_noˇche
;

275 
dwmac_if_bus_£tup
 
	gbus_£tup
;

276 } 
	tdwmac_ˇŒback_cfg
;

321 
	#DWMAC_CALLBACK_CFG_INITIALIZER
( \

322 
nic_íabÀ
, \

323 
nic_dißbÀ
, \

324 
phy_íabÀ
, \

325 
phy_dißbÀ
, \

326 
phy_evít_íabÀ
, \

327 
phy_evít_˛ór
, \

328 
phy_evíts_gë
, \

329 
phy_°¨t
, \

330 
phy_°›
, \

331 
mem_Æloc_noˇche
, \

332 
mem_‰ì_noˇche
, \

333 
bus_£tup
 \

336 
nic_íabÀ
, \

337 
nic_dißbÀ
, \

338 
phy_íabÀ
, \

339 
phy_dißbÀ
, \

340 
phy_evít_íabÀ
, \

341 
phy_evít_˛ór
, \

342 
phy_evíts_gë
, \

343 
phy_°¨t
, \

344 
phy_°›
, \

345 
mem_Æloc_noˇche
, \

346 
mem_‰ì_noˇche
, \

347 
bus_£tup
 \

348 }

	)

367 c⁄° *
	gc‹e
;

368 c⁄° *
	gdma
;

369 } 
	tdwmac_ëhî√t_mac_›s
;

381 
	#DWMAC_ETHERNET_MAC_OPS_INITIALIZER
( \

382 
c‹e_›s_addr
, \

383 
dma_›s_addr
 \

386 
c‹e_›s_addr
, \

387 
dma_›s_addr
 \

388 }

	)

407 c⁄° *
	g›s
;

408 } 
	tdwmac_des¸ùt‹_›s
;

418 
	#DWMAC_DESCRIPTOR_OPS_INITIALIZER
( \

419 
desc_›s_addr
 \

422 
desc_›s_addr
 \

423 }

	)

431 c⁄° 
dwmac_ëhî√t_mac_›s
 
DWMAC_1000_ETHERNET_MAC_OPS
;

440 c⁄° 
dwmac_ëhî√t_mac_›s
 
DWMAC_100_ETHERNET_MAC_OPS
;

449 c⁄° 
dwmac_des¸ùt‹_›s
 
DWMAC_DESCRIPTOR_OPS_NORMAL
;

457 c⁄° 
dwmac_des¸ùt‹_›s
 
DWMAC_DESCRIPTOR_OPS_ENHANCED
;

462 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_1
 = 0,

465 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_2
 = 1,

468 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_4
 = 3,

471 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_8
 = 7,

474 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_16
 = 15,

477 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_32
 = 31,

480 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_64
 = 63,

483 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_128
 = 127,

486 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_LENGTH_256
 = 255

487 } 
	tdwmac_dma_cfg_bus_mode_bur°_Àngth
;

492 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_MODE_SINGLE_OR_INCR
,

495 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_MODE_FIXED


496 } 
	tdwmac_dma_cfg_bus_mode_bur°_mode
;

501 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_NOT_MIXED
,

503 
	gDWMAC_DMA_CFG_BUS_MODE_BURST_MIXED


504 } 
	tdwmac_dma_cfg_bus_mode_bur°_mixed
;

509 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_4_NOT_SUPPORTED
,

512 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_4_SUPPORTED


513 } 
	tdwmac_dma_cfg_axi_bur°_Àngth_4_suµ‹t
;

518 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_8_NOT_SUPPORTED
,

521 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_8_SUPPORTED


522 } 
	tdwmac_dma_cfg_axi_bur°_Àngth_8_suµ‹t
;

527 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_16_NOT_SUPPORTED
,

530 
	gDWMAC_DMA_CFG_AXI_BURST_LENGTH_16_SUPPORTED


531 } 
	tdwmac_dma_cfg_axi_bur°_Àngth_16_suµ‹t
;

536 
	gDWMAC_DMA_CFG_AXI_BURST_BOUNDARY_4_KB
,

539 
	gDWMAC_DMA_CFG_AXI_BURST_BOUNDARY_1_KB


540 } 
	tdwmac_dma_cfg_axi_bur°_bound¨y
;

549 
uöt16_t
 
	gøw
;

564 
uöt16_t
 
	gbus_mode_bur°_Àngth
 : 6;

573 
uöt16_t
 
	gbus_mode_bur°_mode
 : 1;

579 
uöt16_t
 
	gbus_mode_bur°_mixed
 : 1;

586 
uöt16_t
 
	gaxi_bur°_Àngth_4_suµ‹t
 : 1;

593 
uöt16_t
 
	gaxi_bur°_Àngth_8_suµ‹t
 : 1;

601 
uöt16_t
 
	gaxi_bur°_Àngth_16_suµ‹t
 : 1;

610 
uöt16_t
 
	gaxi_bur°_bound¨y
 : 1;

612 
uöt16_t
 
	gunu£d
 : 4;

614 } 
	tdwmac_dma_cfg
;

642 
	#DWMAC_DMA_CFG_INITIALIZER
( \

643 
bus_mode_bur°_Àngth
, \

644 
bus_mode_bur°_mode
, \

645 
bus_mode_bur°_mixed
, \

646 
axi_bur°_Àngth_4_suµ‹t
, \

647 
axi_bur°_Àngth_8_suµ‹t
, \

648 
axi_bur°_Àngth_16_suµ‹t
, \

649 
axi_bur°_bound¨y
 \

652 
	`BSP_FLD16
–
bus_mode_bur°_Àngth
, 0, 5 ) \

653 | 
	`BSP_FLD16
–
bus_mode_bur°_mode
, 6, 6 ) \

654 | 
	`BSP_FLD16
–
bus_mode_bur°_mixed
, 7, 7 ) \

655 | 
	`BSP_FLD16
–
axi_bur°_Àngth_4_suµ‹t
, 8, 8 ) \

656 | 
	`BSP_FLD16
–
axi_bur°_Àngth_8_suµ‹t
, 9, 9 ) \

657 | 
	`BSP_FLD16
–
axi_bur°_Àngth_16_suµ‹t
, 10, 10 ) \

658 | 
	`BSP_FLD16
–
axi_bur°_bound¨y
, 11, 11 ) \

659 }

	)

669 c⁄° 
uöt32_t
 
	gGMII_CLK_RATE
;

672 vﬁ©ûê*
	gaddr_gmac_ªgs
;

675 vﬁ©ûê*
	gaddr_dma_ªgs
;

678 c⁄° 
uöt8_t
 
	gMDIO_BUS_ADDR
;

681 c⁄° 
uöt8_t
 
	gL1_CACHE_LINE_SIZE
;

684 c⁄° 
πems_ve˘‹_numbî
 
	gIRQ_EMAC
;

687 c⁄° 
dwmac_dma_cfg
 *
	gDMA_CFG
;

690 c⁄° 
dwmac_ˇŒback_cfg
 
	gCALLBACK
;

693 c⁄° 
dwmac_ëhî√t_mac_›s
 *
	gMAC_OPS
;

696 c⁄° 
dwmac_des¸ùt‹_›s
 *
	gDESC_OPS
;

697 } 
	tdwmac_cfg
;

768 
	#DWMAC_CFG_INITIALIZER
( \

769 
mdio_˛k_øã
, \

770 
macgΩ_ªgs_addr
, \

771 
dmagΩ_ªgs_addr
, \

772 
mdio_bus_addr
, \

773 
l1_ˇche_löe_size
, \

774 
úq_emac
, \

775 
dma_cfg_addr
, \

776 
nic_íabÀ
, \

777 
nic_dißbÀ
, \

778 
phy_íabÀ
, \

779 
phy_dißbÀ
, \

780 
phy_evít_íabÀ
, \

781 
phy_evít_˛ór
, \

782 
phy_evíts_gë
, \

783 
phy_°¨t
, \

784 
phy_°›
, \

785 
mem_Æloc_noˇche
, \

786 
mem_‰ì_noˇche
, \

787 
bus_£tup
, \

788 
ëhî√t_mac_›s_addr
, \

789 
des¸ùt‹_›s_addr
 \

792 
mdio_˛k_øã
, \

793 
macgΩ_ªgs_addr
, \

794 
dmagΩ_ªgs_addr
, \

795 
mdio_bus_addr
, \

796 
l1_ˇche_löe_size
, \

797 
úq_emac
, \

798 
dma_cfg_addr
, \

799 
	`DWMAC_CALLBACK_CFG_INITIALIZER
( \

800 
nic_íabÀ
, \

801 
nic_dißbÀ
, \

802 
phy_íabÀ
, \

803 
phy_dißbÀ
, \

804 
phy_evít_íabÀ
, \

805 
phy_evít_˛ór
, \

806 
phy_evíts_gë
, \

807 
phy_°¨t
, \

808 
phy_°›
, \

809 
mem_Æloc_noˇche
, \

810 
mem_‰ì_noˇche
, \

811 
bus_£tup
 \

813 
ëhî√t_mac_›s_addr
, \

814 
des¸ùt‹_›s_addr
 \

815 }

	)

835 *
dwmac_√tw‹k_if_©èch_dëach
(

836 
πems_bsd√t_ifc⁄fig
 *
bsd_c⁄fig
,

837 c⁄° 
dwmac_cfg
 *
drivî_c⁄fig
,

838 *
¨g
,

839 
©èchög
 );

852 
dwmac_if_ªad_‰om_phy
(

853 *
¨g
,

854 c⁄° 
phy_ªg
,

855 
uöt16_t
 *
vÆ
 );

868 
dwmac_if_wrôe_to_phy
(

869 *
¨g
,

870 c⁄° 
phy_ªg
,

871 c⁄° 
uöt16_t
 
vÆ
 );

882 
dwmac_if_h™dÀ_phy_evít
–*
¨g
 );

884 #ifde‡
__˝lu•lus


	@src/libchip/network/elnk.c

65 
	~<πems.h
>

73 #i‡
deföed
(
__i386__
)

74 
	#ELNK_SUPPORTED


	)

75 
	#PCI_DRAM_OFFSET
 0

	)

78 #i‡
deföed
(
__PPC__
)

79 
	#ELNK_SUPPORTED


	)

82 
	~<b•.h
>

84 #i‡!
deföed
(
PCI_DRAM_OFFSET
)

85 #unde‡
ELNK_SUPPORTED


91 #i‡
deföed
(
ELNK_SUPPORTED
)

92 
	~<πems/pci.h
>

94 #i‡
deföed
(
__PPC__
)

95 
	~<lib˝u/byã‹dî.h
>

96 
	~<lib˝u/io.h
>

99 #i‡
deföed
(
__i386__
)

100 
	~<lib˝u/byã‹dî.h
>

103 
	~<°dlib.h
>

104 
	~<°dio.h
>

105 
	~<°d¨g.h
>

106 
	~<°rög.h
>

107 
	~<î∫o.h
>

108 
	~<πems/îr‹.h
>

109 
	~<πems/b•Io.h
>

110 
	~<πems/πems_bsd√t.h
>

112 
	~<sys/∑øm.h
>

113 
	~<sys/mbuf.h
>

115 
	~<sys/sockë.h
>

116 
	~<sys/sockio.h
>

117 
	~<√t/if.h
>

118 
	~<√töë/ö.h
>

119 
	~<√töë/if_ëhî.h
>

121 
	~<√t/if_medü.h
>

122 
	~<dev/mii/mii.h
>

123 
	~<b•/úq.h
>

125 #i‡
deföed
(
__i386__
)

126 
	#IO_MASK
 0x3

	)

127 
	#MEM_MASK
 0xF

	)

130 #ifde‡
mÆloc


131 #unde‡
mÆloc


133 #ifde‡
‰ì


134 #unde‡
‰ì


137 
	#ELNK_DEBUG


	)

140 
	#DRIVER_PREFIX
 "ñnk"

	)

166 
	#RX_RING_SIZE
 16

	)

167 
	#TX_RING_SIZE
 16

	)

173 
	#NUM_UNITS
 8

	)

178 
	#XL_PACKET_SIZE
 1540

	)

188 
πems_evít_£t
 
	gunô_sig«ls
[
NUM_UNITS
]{ 
RTEMS_EVENT_1
,

189 
RTEMS_EVENT_2
,

190 
RTEMS_EVENT_3
,

191 
RTEMS_EVENT_4
,

192 
RTEMS_EVENT_5
,

193 
RTEMS_EVENT_6
,

194 
RTEMS_EVENT_7
,

195 
RTEMS_EVENT_8
 };

200 #i‡
deföed
(
__PPC__
)

201 
	#phys_to_bus
(
addªss
Ë(()(◊ddªss)Ë+ 
PCI_DRAM_OFFSET
)

	)

202 
	#bus_to_phys
(
addªss
Ë(()(◊ddªss)Ë- 
PCI_DRAM_OFFSET
)

	)

203 
	#CPU_CACHE_ALIGNMENT_FOR_BUFFER
 
PPC_CACHE_ALIGNMENT


	)

205 
Waô_X_ms
–
timeToWaô
 );

206 
	#phys_to_bus
(
addªss
Ë((Ë(◊ddªss)))

	)

207 
	#bus_to_phys
(
addªss
Ë((Ë(◊ddªss)))

	)

208 
	#πems_b•_dñay_ö_bus_cy˛es
(
cy˛e
Ë
	`Waô_X_ms
–cy˛e/100 )

	)

209 
	#CPU_CACHE_ALIGNMENT_FOR_BUFFER
 
PG_SIZE


	)

218 
	#DELAY
(
n
Ë
	`πems_b•_dñay_ö_bus_cy˛es
–n*20 )

	)

226 
	#XL_COMMAND
 0x0E

	)

227 
	#XL_STATUS
 0x0E

	)

229 
	#XL_TX_STATUS
 0x1B

	)

230 
	#XL_TX_FREE
 0x1C

	)

231 
	#XL_DMACTL
 0x20

	)

232 
	#XL_DOWNLIST_PTR
 0x24

	)

233 
	#XL_DOWN_POLL
 0x2D

	)

234 
	#XL_TX_FREETHRESH
 0x2F

	)

235 
	#XL_UPLIST_PTR
 0x38

	)

236 
	#XL_UPLIST_STATUS
 0x30

	)

237 
	#XL_UP_POLL
 0x3D

	)

239 
	#XL_PKTSTAT_UP_STALLED
 0x00002000

	)

240 
	#XL_PKTSTAT_UP_ERROR
 0x00004000

	)

241 
	#XL_PKTSTAT_UP_CMPLT
 0x00008000

	)

243 
	#XL_DMACTL_DN_CMPLT_REQ
 0x00000002

	)

244 
	#XL_DMACTL_DOWN_STALLED
 0x00000004

	)

245 
	#XL_DMACTL_UP_CMPLT
 0x00000008

	)

246 
	#XL_DMACTL_DOWN_CMPLT
 0x00000010

	)

247 
	#XL_DMACTL_UP_RX_EARLY
 0x00000020

	)

248 
	#XL_DMACTL_ARM_COUNTDOWN
 0x00000040

	)

249 
	#XL_DMACTL_DOWN_INPROG
 0x00000080

	)

250 
	#XL_DMACTL_COUNTER_SPEED
 0x00000100

	)

251 
	#XL_DMACTL_DOWNDOWN_MODE
 0x00000200

	)

252 
	#XL_DMACTL_TARGET_ABORT
 0x40000000

	)

253 
	#XL_DMACTL_MASTER_ABORT
 0x80000000

	)

259 
	#XL_CMD_RESET
 0x0000

	)

260 
	#XL_CMD_WINSEL
 0x0800

	)

261 
	#XL_CMD_COAX_START
 0x1000

	)

262 
	#XL_CMD_RX_DISABLE
 0x1800

	)

263 
	#XL_CMD_RX_ENABLE
 0x2000

	)

264 
	#XL_CMD_RX_RESET
 0x2800

	)

265 
	#XL_CMD_UP_STALL
 0x3000

	)

266 
	#XL_CMD_UP_UNSTALL
 0x3001

	)

267 
	#XL_CMD_DOWN_STALL
 0x3002

	)

268 
	#XL_CMD_DOWN_UNSTALL
 0x3003

	)

269 
	#XL_CMD_RX_DISCARD
 0x4000

	)

270 
	#XL_CMD_TX_ENABLE
 0x4800

	)

271 
	#XL_CMD_TX_DISABLE
 0x5000

	)

272 
	#XL_CMD_TX_RESET
 0x5800

	)

273 
	#XL_CMD_INTR_FAKE
 0x6000

	)

274 
	#XL_CMD_INTR_ACK
 0x6800

	)

275 
	#XL_CMD_INTR_ENB
 0x7000

	)

276 
	#XL_CMD_STAT_ENB
 0x7800

	)

277 
	#XL_CMD_RX_SET_FILT
 0x8000

	)

278 
	#XL_CMD_RX_SET_THRESH
 0x8800

	)

279 
	#XL_CMD_TX_SET_THRESH
 0x9000

	)

280 
	#XL_CMD_TX_SET_START
 0x9800

	)

281 
	#XL_CMD_DMA_UP
 0xA000

	)

282 
	#XL_CMD_DMA_STOP
 0xA001

	)

283 
	#XL_CMD_STATS_ENABLE
 0xA800

	)

284 
	#XL_CMD_STATS_DISABLE
 0xB000

	)

285 
	#XL_CMD_COAX_STOP
 0xB800

	)

287 
	#XL_CMD_SET_TX_RECLAIM
 0xC000

	)

288 
	#XL_CMD_RX_SET_HASH
 0xC800

	)

290 
	#XL_HASH_SET
 0x0400

	)

291 
	#XL_HASHFILT_SIZE
 256

	)

298 
	#XL_STAT_INTLATCH
 0x0001

	)

299 
	#XL_STAT_ADFAIL
 0x0002

	)

300 
	#XL_STAT_TX_COMPLETE
 0x0004

	)

301 
	#XL_STAT_TX_AVAIL
 0x0008

	)

302 
	#XL_STAT_RX_COMPLETE
 0x0010

	)

303 
	#XL_STAT_RX_EARLY
 0x0020

	)

304 
	#XL_STAT_INTREQ
 0x0040

	)

305 
	#XL_STAT_STATSOFLOW
 0x0080

	)

306 
	#XL_STAT_DMADONE
 0x0100

	)

307 
	#XL_STAT_LINKSTAT
 0x0100

	)

308 
	#XL_STAT_DOWN_COMPLETE
 0x0200

	)

309 
	#XL_STAT_UP_COMPLETE
 0x0400

	)

310 
	#XL_STAT_DMABUSY
 0x0800

	)

311 
	#XL_STAT_CMDBUSY
 0x1000

	)

316 
	#XL_INTRS
 \

317 (
XL_STAT_UP_COMPLETE
 | 
XL_STAT_STATSOFLOW
 | 
XL_STAT_ADFAIL
| \

318 
XL_STAT_DOWN_COMPLETE
 | 
XL_STAT_TX_COMPLETE
 | 
XL_STAT_INTLATCH
)

	)

327 
	#TC_VENDORID
 0x10B7

	)

332 
	#TC_DEVICEID_BOOMERANG_10BT
 0x9000

	)

333 
	#TC_DEVICEID_BOOMERANG_10BT_COMBO
 0x9001

	)

334 
	#TC_DEVICEID_BOOMERANG_10_100BT
 0x9050

	)

335 
	#TC_DEVICEID_BOOMERANG_100BT4
 0x9051

	)

336 
	#TC_DEVICEID_KRAKATOA_10BT
 0x9004

	)

337 
	#TC_DEVICEID_KRAKATOA_10BT_COMBO
 0x9005

	)

338 
	#TC_DEVICEID_KRAKATOA_10BT_TPC
 0x9006

	)

339 
	#TC_DEVICEID_CYCLONE_10FL
 0x900A

	)

340 
	#TC_DEVICEID_HURRICANE_10_100BT
 0x9055

	)

341 
	#TC_DEVICEID_CYCLONE_10_100BT4
 0x9056

	)

342 
	#TC_DEVICEID_CYCLONE_10_100_COMBO
 0x9058

	)

343 
	#TC_DEVICEID_CYCLONE_10_100FX
 0x905A

	)

344 
	#TC_DEVICEID_TORNADO_10_100BT
 0x9200

	)

345 
	#TC_DEVICEID_TORNADO_10_100BT_920B
 0x9201

	)

346 
	#TC_DEVICEID_HURRICANE_10_100BT_SERV
 0x9800

	)

347 
	#TC_DEVICEID_TORNADO_10_100BT_SERV
 0x9805

	)

348 
	#TC_DEVICEID_HURRICANE_SOHO100TX
 0x7646

	)

349 
	#TC_DEVICEID_TORNADO_HOMECONNECT
 0x4500

	)

350 
	#TC_DEVICEID_HURRICANE_555
 0x5055

	)

351 
	#TC_DEVICEID_HURRICANE_556
 0x6055

	)

352 
	#TC_DEVICEID_HURRICANE_556B
 0x6056

	)

353 
	#TC_DEVICEID_HURRICANE_575A
 0x5057

	)

354 
	#TC_DEVICEID_HURRICANE_575B
 0x5157

	)

355 
	#TC_DEVICEID_HURRICANE_575C
 0x5257

	)

356 
	#TC_DEVICEID_HURRICANE_656
 0x6560

	)

357 
	#TC_DEVICEID_HURRICANE_656B
 0x6562

	)

358 
	#TC_DEVICEID_TORNADO_656C
 0x6564

	)

362 
	#XL_RXSTAT_LENMASK
 0x00001FFF

	)

363 
	#XL_RXSTAT_UP_ERROR
 0x00004000

	)

364 
	#XL_RXSTAT_UP_CMPLT
 0x00008000

	)

365 
	#XL_RXSTAT_UP_OVERRUN
 0x00010000

	)

366 
	#XL_RXSTAT_RUNT
 0x00020000

	)

367 
	#XL_RXSTAT_ALIGN
 0x00040000

	)

368 
	#XL_RXSTAT_CRC
 0x00080000

	)

369 
	#XL_RXSTAT_OVERSIZE
 0x00100000

	)

370 
	#XL_RXSTAT_DRIBBLE
 0x00800000

	)

371 
	#XL_RXSTAT_UP_OFLOW
 0x01000000

	)

372 
	#XL_RXSTAT_IPCKERR
 0x02000000

	)

373 
	#XL_RXSTAT_TCPCKERR
 0x04000000

	)

374 
	#XL_RXSTAT_UDPCKERR
 0x08000000

	)

375 
	#XL_RXSTAT_BUFEN
 0x10000000

	)

376 
	#XL_RXSTAT_IPCKOK
 0x20000000

	)

377 
	#XL_RXSTAT_TCPCOK
 0x40000000

	)

378 
	#XL_RXSTAT_UDPCKOK
 0x80000000

	)

380 
	#XL_TXSTAT_LENMASK
 0x00001FFF

	)

381 
	#XL_TXSTAT_CRCDIS
 0x00002000

	)

382 
	#XL_TXSTAT_TX_INTR
 0x00008000

	)

383 
	#XL_TXSTAT_DL_COMPLETE
 0x00010000

	)

384 
	#XL_TXSTAT_IPCKSUM
 0x02000000

	)

385 
	#XL_TXSTAT_TCPCKSUM
 0x04000000

	)

386 
	#XL_TXSTAT_UDPCKSUM
 0x08000000

	)

387 
	#XL_TXSTAT_RND_DEFEAT
 0x10000000

	)

388 
	#XL_TXSTAT_EMPTY
 0x20000000

	)

389 
	#XL_TXSTAT_DL_INTR
 0x80000000

	)

392 
	#XL_FLAG_FUNCREG
 0x0001

	)

393 
	#XL_FLAG_PHYOK
 0x0002

	)

394 
	#XL_FLAG_EEPROM_OFFSET_30
 0x0004

	)

395 
	#XL_FLAG_WEIRDRESET
 0x0008

	)

396 
	#XL_FLAG_8BITROM
 0x0010

	)

397 
	#XL_FLAG_INVERT_LED_PWR
 0x0020

	)

398 
	#XL_FLAG_INVERT_MII_PWR
 0x0040

	)

399 
	#XL_FLAG_NO_XCVR_PWR
 0x0080

	)

400 
	#XL_FLAG_USE_MMIO
 0x0100

	)

404 
	#XL_EE_READ
 0x0080

	)

405 
	#XL_EE_WRITE
 0x0040

	)

406 
	#XL_EE_ERASE
 0x00c0

	)

407 
	#XL_EE_EWEN
 0x0030

	)

408 
	#XL_EE_8BIT_READ
 0x0200

	)

409 
	#XL_EE_BUSY
 0x8000

	)

411 
	#XL_EE_EADDR0
 0x00

	)

412 
	#XL_EE_EADDR1
 0x01

	)

413 
	#XL_EE_EADDR2
 0x02

	)

414 
	#XL_EE_PRODID
 0x03

	)

415 
	#XL_EE_MDATA_DATE
 0x04

	)

416 
	#XL_EE_MDATA_DIV
 0x05

	)

417 
	#XL_EE_MDATA_PCODE
 0x06

	)

418 
	#XL_EE_MFG_ID
 0x07

	)

419 
	#XL_EE_PCI_PARM
 0x08

	)

420 
	#XL_EE_ROM_ONFO
 0x09

	)

421 
	#XL_EE_OEM_ADR0
 0x0A

	)

422 
	#XL_EE_OEM_ADR1
 0x0B

	)

423 
	#XL_EE_OEM_ADR2
 0x0C

	)

424 
	#XL_EE_SOFTINFO1
 0x0D

	)

425 
	#XL_EE_COMPAT
 0x0E

	)

426 
	#XL_EE_SOFTINFO2
 0x0F

	)

427 
	#XL_EE_CAPS
 0x10

	)

428 
	#XL_EE_RSVD0
 0x11

	)

429 
	#XL_EE_ICFG_0
 0x12

	)

430 
	#XL_EE_ICFG_1
 0x13

	)

431 
	#XL_EE_RSVD1
 0x14

	)

432 
	#XL_EE_SOFTINFO3
 0x15

	)

433 
	#XL_EE_RSVD_2
 0x16

	)

438 
	#XL_CAPS_PNP
 0x0001

	)

439 
	#XL_CAPS_FULL_DUPLEX
 0x0002

	)

440 
	#XL_CAPS_LARGE_PKTS
 0x0004

	)

441 
	#XL_CAPS_SLAVE_DMA
 0x0008

	)

442 
	#XL_CAPS_SECOND_DMA
 0x0010

	)

443 
	#XL_CAPS_FULL_BM
 0x0020

	)

444 
	#XL_CAPS_FRAG_BM
 0x0040

	)

445 
	#XL_CAPS_CRC_PASSTHRU
 0x0080

	)

446 
	#XL_CAPS_TXDONE
 0x0100

	)

447 
	#XL_CAPS_NO_TXLENGTH
 0x0200

	)

448 
	#XL_CAPS_RX_REPEAT
 0x0400

	)

449 
	#XL_CAPS_SNOOPING
 0x0800

	)

450 
	#XL_CAPS_100MBPS
 0x1000

	)

451 
	#XL_CAPS_PWRMGMT
 0x2000

	)

458 
	#XL_W0_EE_DATA
 0x0C

	)

459 
	#XL_W0_EE_CMD
 0x0A

	)

460 
	#XL_W0_RSRC_CFG
 0x08

	)

461 
	#XL_W0_ADDR_CFG
 0x06

	)

462 
	#XL_W0_CFG_CTRL
 0x04

	)

464 
	#XL_W0_PROD_ID
 0x02

	)

465 
	#XL_W0_MFG_ID
 0x00

	)

471 
	#XL_W1_TX_FIFO
 0x10

	)

473 
	#XL_W1_FREE_TX
 0x0C

	)

474 
	#XL_W1_TX_STATUS
 0x0B

	)

475 
	#XL_W1_TX_TIMER
 0x0A

	)

476 
	#XL_W1_RX_STATUS
 0x08

	)

477 
	#XL_W1_RX_FIFO
 0x00

	)

482 
	#XL_RXSTATUS_OVERRUN
 0x01

	)

483 
	#XL_RXSTATUS_RUNT
 0x02

	)

484 
	#XL_RXSTATUS_ALIGN
 0x04

	)

485 
	#XL_RXSTATUS_CRC
 0x08

	)

486 
	#XL_RXSTATUS_OVERSIZE
 0x10

	)

487 
	#XL_RXSTATUS_DRIBBLE
 0x20

	)

492 
	#XL_TXSTATUS_RECLAIM
 0x02

	)

493 
	#XL_TXSTATUS_OVERFLOW
 0x04

	)

494 
	#XL_TXSTATUS_MAXCOLS
 0x08

	)

495 
	#XL_TXSTATUS_UNDERRUN
 0x10

	)

496 
	#XL_TXSTATUS_JABBER
 0x20

	)

497 
	#XL_TXSTATUS_INTREQ
 0x40

	)

498 
	#XL_TXSTATUS_COMPLETE
 0x80

	)

503 
	#XL_W2_RESET_OPTIONS
 0x0C

	)

504 
	#XL_W2_STATION_MASK_HI
 0x0A

	)

505 
	#XL_W2_STATION_MASK_MID
 0x08

	)

506 
	#XL_W2_STATION_MASK_LO
 0x06

	)

507 
	#XL_W2_STATION_ADDR_HI
 0x04

	)

508 
	#XL_W2_STATION_ADDR_MID
 0x02

	)

509 
	#XL_W2_STATION_ADDR_LO
 0x00

	)

511 
	#XL_RESETOPT_FEATUREMASK
 0x0001|0x0002|0x004

	)

512 
	#XL_RESETOPT_D3RESETDIS
 0x0008

	)

513 
	#XL_RESETOPT_DISADVFD
 0x0010

	)

514 
	#XL_RESETOPT_DISADV100
 0x0020

	)

515 
	#XL_RESETOPT_DISAUTONEG
 0x0040

	)

516 
	#XL_RESETOPT_DEBUGMODE
 0x0080

	)

517 
	#XL_RESETOPT_FASTAUTO
 0x0100

	)

518 
	#XL_RESETOPT_FASTEE
 0x0200

	)

519 
	#XL_RESETOPT_FORCEDCONF
 0x0400

	)

520 
	#XL_RESETOPT_TESTPDTPDR
 0x0800

	)

521 
	#XL_RESETOPT_TEST100TX
 0x1000

	)

522 
	#XL_RESETOPT_TEST100RX
 0x2000

	)

524 
	#XL_RESETOPT_INVERT_LED
 0x0010

	)

525 
	#XL_RESETOPT_INVERT_MII
 0x4000

	)

530 
	#XL_W3_INTERNAL_CFG
 0x00

	)

531 
	#XL_W3_MAXPKTSIZE
 0x04

	)

532 
	#XL_W3_RESET_OPT
 0x08

	)

533 
	#XL_W3_FREE_TX
 0x0C

	)

534 
	#XL_W3_FREE_RX
 0x0A

	)

535 
	#XL_W3_MAC_CTRL
 0x06

	)

537 
	#XL_ICFG_CONNECTOR_MASK
 0x00F00000

	)

538 
	#XL_ICFG_CONNECTOR_BITS
 20

	)

540 
	#XL_ICFG_RAMSIZE_MASK
 0x00000007

	)

541 
	#XL_ICFG_RAMWIDTH
 0x00000008

	)

542 
	#XL_ICFG_ROMSIZE_MASK
 (0x00000040|0x00000080)

	)

543 
	#XL_ICFG_DISABLE_BASSD
 0x00000100

	)

544 
	#XL_ICFG_RAMLOC
 0x00000200

	)

545 
	#XL_ICFG_RAMPART
 (0x00010000|0x00020000)

	)

546 
	#XL_ICFG_XCVRSEL
 (0x00100000|0x00200000|0x00400000)

	)

547 
	#XL_ICFG_AUTOSEL
 0x01000000

	)

549 
	#XL_XCVR_10BT
 0x00

	)

550 
	#XL_XCVR_AUI
 0x01

	)

551 
	#XL_XCVR_RSVD_0
 0x02

	)

552 
	#XL_XCVR_COAX
 0x03

	)

553 
	#XL_XCVR_100BTX
 0x04

	)

554 
	#XL_XCVR_100BFX
 0x05

	)

555 
	#XL_XCVR_MII
 0x06

	)

556 
	#XL_XCVR_RSVD_1
 0x07

	)

557 
	#XL_XCVR_AUTO
 0x08

	)

559 
	#XL_MACCTRL_DEFER_EXT_END
 0x0001

	)

560 
	#XL_MACCTRL_DEFER_0
 0x0002

	)

561 
	#XL_MACCTRL_DEFER_1
 0x0004

	)

562 
	#XL_MACCTRL_DEFER_2
 0x0008

	)

563 
	#XL_MACCTRL_DEFER_3
 0x0010

	)

564 
	#XL_MACCTRL_DUPLEX
 0x0020

	)

565 
	#XL_MACCTRL_ALLOW_LARGE_PACK
 0x0040

	)

566 
	#XL_MACCTRL_EXTEND_AFTER_COL
 0x0080 (3c905B 
⁄ly
)

	)

567 
	#XL_MACCTRL_FLOW_CONTROL_ENB
 0x0100 (3c905B 
⁄ly
)

	)

568 
	#XL_MACCTRL_VLT_END
 0x0200 (3c905B 
⁄ly
)

	)

575 
	#XL_W3_MEDIA_OPT
 0x08

	)

577 
	#XL_MEDIAOPT_BT4
 0x0001

	)

578 
	#XL_MEDIAOPT_BTX
 0x0002

	)

579 
	#XL_MEDIAOPT_BFX
 0x0004

	)

580 
	#XL_MEDIAOPT_BT
 0x0008

	)

581 
	#XL_MEDIAOPT_BNC
 0x0010

	)

582 
	#XL_MEDIAOPT_AUI
 0x0020

	)

583 
	#XL_MEDIAOPT_MII
 0x0040

	)

584 
	#XL_MEDIAOPT_VCO
 0x0100

	)

586 
	#XL_MEDIAOPT_10FL
 0x0100

	)

587 
	#XL_MEDIAOPT_MASK
 0x01FF

	)

592 
	#XL_W4_UPPERBYTESOK
 0x0D

	)

593 
	#XL_W4_BADSSD
 0x0C

	)

594 
	#XL_W4_MEDIA_STATUS
 0x0A

	)

595 
	#XL_W4_PHY_MGMT
 0x08

	)

596 
	#XL_W4_NET_DIAG
 0x06

	)

597 
	#XL_W4_FIFO_DIAG
 0x04

	)

598 
	#XL_W4_VCO_DIAG
 0x02

	)

600 
	#XL_W4_CTRLR_STAT
 0x08

	)

601 
	#XL_W4_TX_DIAG
 0x00

	)

603 
	#XL_MII_CLK
 0x01

	)

604 
	#XL_MII_DATA
 0x02

	)

605 
	#XL_MII_DIR
 0x04

	)

607 
	#XL_MEDIA_SQE
 0x0008

	)

608 
	#XL_MEDIA_10TP
 0x00C0

	)

609 
	#XL_MEDIA_LNK
 0x0080

	)

610 
	#XL_MEDIA_LNKBEAT
 0x0800

	)

612 
	#XL_MEDIASTAT_CRCSTRIP
 0x0004

	)

613 
	#XL_MEDIASTAT_SQEENB
 0x0008

	)

614 
	#XL_MEDIASTAT_COLDET
 0x0010

	)

615 
	#XL_MEDIASTAT_CARRIER
 0x0020

	)

616 
	#XL_MEDIASTAT_JABGUARD
 0x0040

	)

617 
	#XL_MEDIASTAT_LINKBEAT
 0x0080

	)

618 
	#XL_MEDIASTAT_JABDETECT
 0x0200

	)

619 
	#XL_MEDIASTAT_POLREVERS
 0x0400

	)

620 
	#XL_MEDIASTAT_LINKDETECT
 0x0800

	)

621 
	#XL_MEDIASTAT_TXINPROG
 0x1000

	)

622 
	#XL_MEDIASTAT_DCENB
 0x4000

	)

623 
	#XL_MEDIASTAT_AUIDIS
 0x8000

	)

625 
	#XL_NETDIAG_TEST_LOWVOLT
 0x0001

	)

626 
	#XL_NETDIAG_ASIC_REVMASK
 (0x0002|0x0004|0x0008|0x0010|0x0020)

	)

627 
	#XL_NETDIAG_UPPER_BYTES_ENABLE
 0x0040

	)

628 
	#XL_NETDIAG_STATS_ENABLED
 0x0080

	)

629 
	#XL_NETDIAG_TX_FATALERR
 0x0100

	)

630 
	#XL_NETDIAG_TRANSMITTING
 0x0200

	)

631 
	#XL_NETDIAG_RX_ENABLED
 0x0400

	)

632 
	#XL_NETDIAG_TX_ENABLED
 0x0800

	)

633 
	#XL_NETDIAG_FIFO_LOOPBACK
 0x1000

	)

634 
	#XL_NETDIAG_MAC_LOOPBACK
 0x2000

	)

635 
	#XL_NETDIAG_ENDEC_LOOPBACK
 0x4000

	)

636 
	#XL_NETDIAG_EXTERNAL_LOOP
 0x8000

	)

641 
	#XL_W5_STAT_ENB
 0x0C

	)

642 
	#XL_W5_INTR_ENB
 0x0A

	)

643 
	#XL_W5_RECLAIM_THRESH
 0x09

	)

644 
	#XL_W5_RX_FILTER
 0x08

	)

645 
	#XL_W5_RX_EARLYTHRESH
 0x06

	)

646 
	#XL_W5_TX_AVAILTHRESH
 0x02

	)

647 
	#XL_W5_TX_STARTTHRESH
 0x00

	)

652 
	#XL_RXFILTER_INDIVIDUAL
 0x01

	)

653 
	#XL_RXFILTER_ALLMULTI
 0x02

	)

654 
	#XL_RXFILTER_BROADCAST
 0x04

	)

655 
	#XL_RXFILTER_ALLFRAMES
 0x08

	)

656 
	#XL_RXFILTER_MULTIHASH
 0x10

	)

661 
	#XL_W6_TX_BYTES_OK
 0x0C

	)

662 
	#XL_W6_RX_BYTES_OK
 0x0A

	)

663 
	#XL_W6_UPPER_FRAMES_OK
 0x09

	)

664 
	#XL_W6_DEFERRED
 0x08

	)

665 
	#XL_W6_RX_OK
 0x07

	)

666 
	#XL_W6_TX_OK
 0x06

	)

667 
	#XL_W6_RX_OVERRUN
 0x05

	)

668 
	#XL_W6_COL_LATE
 0x04

	)

669 
	#XL_W6_COL_SINGLE
 0x03

	)

670 
	#XL_W6_COL_MULTIPLE
 0x02

	)

671 
	#XL_W6_SQE_ERRORS
 0x01

	)

672 
	#XL_W6_CARRIER_LOST
 0x00

	)

677 
	#XL_W7_BM_ADDR
 0x00

	)

678 
	#XL_W7_BM_LEN
 0x06

	)

679 
	#XL_W7_BM_STATUS
 0x0B

	)

680 
	#XL_W7_BM_TIMEr
 0x0A

	)

685 
	#XL_BM_PKTSTAT
 0x20

	)

686 
	#XL_BM_DOWNLISTPTR
 0x24

	)

687 
	#XL_BM_FRAGADDR
 0x28

	)

688 
	#XL_BM_FRAGLEN
 0x2C

	)

689 
	#XL_BM_TXFREETHRESH
 0x2F

	)

690 
	#XL_BM_UPPKTSTAT
 0x30

	)

691 
	#XL_BM_UPLISTPTR
 0x38

	)

700 
	sxl_mii_‰ame
 {

701 
u_öt8_t
 
	mmii_°dñim
;

702 
u_öt8_t
 
	mmii_›code
;

703 
u_öt8_t
 
	mmii_phyaddr
;

704 
u_öt8_t
 
	mmii_ªgaddr
;

705 
u_öt8_t
 
	mmii_tu∫¨ound
;

706 
u_öt16_t
 
	mmii_d©a
;

712 
	#XL_MII_STARTDELIM
 0x01

	)

713 
	#XL_MII_READOP
 0x02

	)

714 
	#XL_MII_WRITEOP
 0x01

	)

715 
	#XL_MII_TURNAROUND
 0x02

	)

728 
	#XL_TYPE_905B
 1

	)

729 
	#XL_TYPE_90X
 2

	)

731 
	#XL_FLAG_FUNCREG
 0x0001

	)

732 
	#XL_FLAG_PHYOK
 0x0002

	)

733 
	#XL_FLAG_EEPROM_OFFSET_30
 0x0004

	)

734 
	#XL_FLAG_WEIRDRESET
 0x0008

	)

735 
	#XL_FLAG_8BITROM
 0x0010

	)

736 
	#XL_FLAG_INVERT_LED_PWR
 0x0020

	)

737 
	#XL_FLAG_INVERT_MII_PWR
 0x0040

	)

738 
	#XL_FLAG_NO_XCVR_PWR
 0x0080

	)

739 
	#XL_FLAG_USE_MMIO
 0x0100

	)

741 
	#XL_NO_XCVR_PWR_MAGICBITS
 0x0900

	)

744 
	#XL_MIN_FRAMELEN
 60

	)

746 
	#XL_LAST_FRAG
 0x80000000

	)

754 
	sxl_°©s


757 
u_öt16_t
 
	mxl_ˇºõr_lo°
;

758 
u_öt16_t
 
	mxl_sqe_îrs
;

759 
u_öt16_t
 
	mxl_tx_mu…i_cﬁlisi⁄
;

760 
u_öt16_t
 
	mxl_tx_sögÀ_cﬁlisi⁄
;

761 
u_öt16_t
 
	mxl_tx_œã_cﬁlisi⁄
;

762 
u_öt16_t
 
	mxl_rx_ovîrun
;

763 
u_öt16_t
 
	mxl_tx_de„ºed
;

765 
u_öt32_t
 
	mxl_rx_byãs_ok
;

766 
u_öt32_t
 
	mxl_tx_byãs_ok
;

768 
u_öt32_t
 
	mxl_tx_‰ames_ok
;

769 
u_öt32_t
 
	mxl_rx_‰ames_ok
;

771 
u_öt16_t
 
	mxl_badssd
;

774 
u_öt16_t
 
	möt°©us
;

775 
u_öt16_t
 
	mrx°©us
;

776 
u_öt8_t
 
	mtx°©us
;

777 
u_öt16_t
 
	mmedü°©us
;

779 
u_öt32_t
 
	mtxcom∂ëe_öts
;

781 
u_öt16_t
 
	mmiüƒ
, 
	mmiù¨
, 
	mmii°©us
, 
	mmiicmd
;

783 
u_öt32_t
 
	mdevi˚_öãºu±s
;

784 
u_öt32_t
 
	möã∫Æc⁄fig
;

785 
u_öt16_t
 
	mmac_c⁄åﬁ
;

787 
u_öt16_t
 
	msmb°©us
;

788 
u_öt32_t
 
	mdma˘l
;

789 
u_öt16_t
 
	mtx‰ì
;

794 
	sxl_ty≥


796 
u_öt16_t
 
	mxl_vid
;

797 
u_öt16_t
 
	mxl_did
;

798 *
	mxl_«me
;

806 
xl_ty≥
 
	gxl_devs
[] = {

807 { 
TC_VENDORID
, 
TC_DEVICEID_BOOMERANG_10BT
,

809 { 
TC_VENDORID
, 
TC_DEVICEID_BOOMERANG_10BT_COMBO
,

811 { 
TC_VENDORID
, 
TC_DEVICEID_BOOMERANG_10_100BT
,

813 { 
TC_VENDORID
, 
TC_DEVICEID_BOOMERANG_100BT4
,

815 { 
TC_VENDORID
, 
TC_DEVICEID_KRAKATOA_10BT
,

817 { 
TC_VENDORID
, 
TC_DEVICEID_KRAKATOA_10BT_COMBO
,

819 { 
TC_VENDORID
, 
TC_DEVICEID_KRAKATOA_10BT_TPC
,

821 { 
TC_VENDORID
, 
TC_DEVICEID_CYCLONE_10FL
,

823 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_10_100BT
,

825 { 
TC_VENDORID
, 
TC_DEVICEID_CYCLONE_10_100BT4
,

827 { 
TC_VENDORID
, 
TC_DEVICEID_CYCLONE_10_100FX
,

829 { 
TC_VENDORID
, 
TC_DEVICEID_CYCLONE_10_100_COMBO
,

831 { 
TC_VENDORID
, 
TC_DEVICEID_TORNADO_10_100BT
,

833 { 
TC_VENDORID
, 
TC_DEVICEID_TORNADO_10_100BT_920B
,

835 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_10_100BT_SERV
,

837 { 
TC_VENDORID
, 
TC_DEVICEID_TORNADO_10_100BT_SERV
,

839 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_SOHO100TX
,

841 { 
TC_VENDORID
, 
TC_DEVICEID_TORNADO_HOMECONNECT
,

843 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_555
,

845 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_556
,

847 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_556B
,

849 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_575A
,

851 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_575B
,

853 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_575C
,

855 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_656
,

857 { 
TC_VENDORID
, 
TC_DEVICEID_HURRICANE_656B
,

859 { 
TC_VENDORID
, 
TC_DEVICEID_TORNADO_656C
,

861 { 0, 0, 
NULL
 }

865 
	#XL_TIMEOUT
 1000

	)

873 
	sRXMD


876 vﬁ©ûê
uöt32_t
 
	m√xt
;

877 vﬁ©ûê
uöt32_t
 
	m°©us
;

878 vﬁ©ûê
uöt32_t
 
	maddr
;

879 vﬁ©ûê
uöt32_t
 
	mÀngth
;

881 
mbuf
 *
	mmbuf
;

882 
RXMD
 *
	m√xt_md
;

883 } 
__©åibuã__
 ((
Æig√d
 (8), 
∑cked
));

889 
	#NUM_FRAGS
 6

	)

895 
	st‰ag


897 vﬁ©ûê
uöt32_t
 
	maddr
;

898 vﬁ©ûê
uöt32_t
 
	mÀngth
;

899 } 
__©åibuã__
 ((
∑cked
));

901 
	sTXMD


904 vﬁ©ûê
uöt32_t
 
	m√xt
;

905 vﬁ©ûê
uöt32_t
 
	m°©us
;

906 
t‰ag
 
	mtx‰ags
[
NUM_FRAGS
];

908 
mbuf
 *
	mmbuf
;

909 
TXMD
 *
	m√xt_md
, *
	mchaö±r
;

910 } 
__©åibuã__
 ((
Æig√d
 (8), 
∑cked
));

916 
	#NUM_CHAIN_LENGTHS
 50

	)

923 
	sñnk_so·c


925 
¨pcom
 
	m¨pcom
;

927 
πems_úq_c⁄√˘_d©a
 
	múqInfo
;

928 
πems_evít_£t
 
	mi€vít
;

929 
	miﬂddr
;

931 *
	mbuf„rBa£
, *
	mrögBa£
;

933 
RXMD
 *
	mrx_rög
, *
	mcuº_rx_md
;

934 
TXMD
 *
	mtx_rög
, *
	mœ°_tx_md
, *
	mœ°_txchaö_hód
;

936 
πems_id
 
	m°©_timî_id
;

937 
uöt32_t
 
	m°©s_upd©e_ticks
;

939 
xl_°©s
 
	mxl_°©s
;

941 
u_öt8_t
 
	mxl_unô
;

942 
u_öt8_t
 
	mxl_ty≥
;

943 
	mxl_Êags
;

944 
u_öt16_t
 
	mxl_medü
;

945 
u_öt16_t
 
	mxl_ˇps
;

946 
u_öt32_t
 
	mxl_xcvr
;

947 
u_öt8_t
 
	mxl_°©s_no_timeout
;

948 
u_öt16_t
 
	mxl_tx_thªsh
;

950 
	mtx_idÀ
;

952 
	mchaö_Àngths
[
NUM_CHAIN_LENGTHS
];

953 
	mchÀnIndex
;

955 
	mvíd‹ID
, 
	mdevi˚ID
;

956 
	mac˚±Brﬂdˇ°
;

957 
	mnumTxbuf„rs
, 
	mnumRxbuf„rs
;

960 
ñnk_so·c
 
	gñnk_so·c
[
NUM_UNITS
];

961 
πems_id
 
	grxD´m⁄Tid
;

962 
πems_id
 
	gtxD´m⁄Tid
;

963 
πems_id
 
	gchaöRecovîyQueue
;

971 #i‡
deföed
(
__i386__
)

973 
	#CSR_WRITE_4
(
sc
, 
ªg
, 
vÆ
Ë
	`i386_ouç‹t_l⁄g
–sc->
iﬂddr
 +Ñeg, vÆ )

	)

974 
	#CSR_WRITE_2
(
sc
, 
ªg
, 
vÆ
Ë
	`i386_ouç‹t_w‹d
–sc->
iﬂddr
 +Ñeg, vÆ )

	)

975 
	#CSR_WRITE_1
(
sc
, 
ªg
, 
vÆ
Ë
	`i386_ouç‹t_byã
–sc->
iﬂddr
 +Ñeg, vÆ )

	)

978 
ölöe
 
	$CSR_READ_4
–
ñnk_so·c
 *
sc
, 
ªg
)

980 
myvÆ
;

981 
	`i386_öp‹t_l⁄g
–
sc
->
iﬂddr
 + 
ªg
, 
myvÆ
 );

982  
myvÆ
;

983 
	}
}

985 
ölöe
 
	$CSR_READ_2
–
ñnk_so·c
 *
sc
, 
ªg
)

987 
myvÆ
;

988 
	`i386_öp‹t_w‹d
–
sc
->
iﬂddr
 + 
ªg
, 
myvÆ
 );

989  
myvÆ
;

990 
	}
}

992 
ölöe
 
	$CSR_READ_1
–
ñnk_so·c
 *
sc
, 
ªg
)

994 
myvÆ
;

995 
	`i386_öp‹t_byã
–
sc
->
iﬂddr
 + 
ªg
, 
myvÆ
 );

996  
myvÆ
;

997 
	}
}

1001 #i‡
deföed
(
__PPC__
)

1003 
	#CSR_WRITE_4
(
sc
, 
ªg
, 
vÆ
Ë
	`oué
–vÆ, sc->
iﬂddr
 +Ñeg)

	)

1004 
	#CSR_WRITE_2
(
sc
, 
ªg
, 
vÆ
Ë
	`outw
–vÆ, sc->
iﬂddr
 +Ñeg)

	)

1005 
	#CSR_WRITE_1
(
sc
, 
ªg
, 
vÆ
Ë
	`outb
–vÆ, sc->
iﬂddr
 +Ñeg)

	)

1007 
	#CSR_READ_4
(
sc
, 
ªg
Ë
	`öl
(sc->
iﬂddr
 +Ñeg)

	)

1008 
	#CSR_READ_2
(
sc
, 
ªg
Ë
	`öw
(sc->
iﬂddr
 +Ñeg)

	)

1009 
	#CSR_READ_1
(
sc
, 
ªg
Ë
	`öb
(sc->
iﬂddr
 +Ñeg)

	)

1014 
	#XL_SEL_WIN
(
x
Ë
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_WINSEL
 | x)

	)

1035 
	$xl_waô
(
ñnk_so·c
 *
sc
)

1037 
i
;

1039 
i
 = 0; i < 
XL_TIMEOUT
; i++)

1041 i‡(!(
	`CSR_READ_2
(
sc
, 
XL_STATUS
Ë& 
XL_STAT_CMDBUSY
))

1045 i‡(
i
 =
XL_TIMEOUT
)

1046 
	`¥ötk
("ëhîlök : unôÉ k%d comm™dÇevî com∂ëed\n", 
sc
->
xl_unô
 );

1048 
	}
}

1064 
	#MII_SET
(
x
) \

1065 
	`CSR_WRITE_2
(
sc
, 
XL_W4_PHY_MGMT
, \

1066 
	`CSR_READ_2
(
sc
, 
XL_W4_PHY_MGMT
Ë| (
x
))

	)

1068 
	#MII_CLR
(
x
) \

1069 
	`CSR_WRITE_2
(
sc
, 
XL_W4_PHY_MGMT
, \

1070 
	`CSR_READ_2
(
sc
, 
XL_W4_PHY_MGMT
Ë& ~(
x
))

	)

1076 
	$xl_mii_sync
(

1077 
ñnk_so·c
 *
sc
)

1079 
i
;

1081 
	`XL_SEL_WIN
(4);

1082 
	`MII_SET
(
XL_MII_DIR
|
XL_MII_DATA
);

1084 
i
 = 0; i < 32; i++) {

1085 
	`MII_SET
(
XL_MII_CLK
);

1086 
	`MII_SET
(
XL_MII_DATA
);

1087 
	`MII_CLR
(
XL_MII_CLK
);

1088 
	`MII_SET
(
XL_MII_DATA
);

1092 
	}
}

1098 
	$xl_mii_£nd
(

1099 
ñnk_so·c
 *
sc
,

1100 
u_öt32_t
 
bôs
,

1101 
˙t
 )

1103 
i
;

1105 
	`XL_SEL_WIN
(4);

1106 
	`MII_CLR
(
XL_MII_CLK
);

1108 
i
 = (0x1 << (
˙t
 - 1)); i; i >>= 1) {

1109 i‡(
bôs
 & 
i
) {

1110 
	`MII_SET
(
XL_MII_DATA
);

1112 
	`MII_CLR
(
XL_MII_DATA
);

1114 
	`MII_CLR
(
XL_MII_CLK
);

1115 
	`MII_SET
(
XL_MII_CLK
);

1117 
	}
}

1123 
	$xl_mii_ªadªg
(

1124 
ñnk_so·c
 *
sc
,

1125 
xl_mii_‰ame
 *
‰ame
 )

1127 
i
, 
ack
;

1132 
‰ame
->
mii_°dñim
 = 
XL_MII_STARTDELIM
;

1133 
‰ame
->
mii_›code
 = 
XL_MII_READOP
;

1134 
‰ame
->
mii_tu∫¨ound
 = 0;

1135 
‰ame
->
mii_d©a
 = 0;

1141 
	`XL_SEL_WIN
(4);

1143 
	`CSR_WRITE_2
(
sc
, 
XL_W4_PHY_MGMT
, 0);

1147 
	`MII_SET
(
XL_MII_DIR
);

1149 
	`xl_mii_sync
(
sc
);

1154 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_°dñim
, 2);

1155 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_›code
, 2);

1156 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_phyaddr
, 5);

1157 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_ªgaddr
, 5);

1160 
	`MII_CLR
((
XL_MII_CLK
|
XL_MII_DATA
));

1161 
	`MII_SET
(
XL_MII_CLK
);

1164 
	`MII_CLR
(
XL_MII_DIR
);

1167 
	`MII_CLR
(
XL_MII_CLK
);

1168 
ack
 = 
	`CSR_READ_2
(
sc
, 
XL_W4_PHY_MGMT
Ë& 
XL_MII_DATA
;

1169 
	`MII_SET
(
XL_MII_CLK
);

1175 i‡(
ack
) {

1176 
i
 = 0; i < 16; i++) {

1177 
	`MII_CLR
(
XL_MII_CLK
);

1178 
	`MII_SET
(
XL_MII_CLK
);

1180 
Áû
;

1183 
i
 = 0x8000; i; i >>= 1) {

1184 
	`MII_CLR
(
XL_MII_CLK
);

1185 i‡(!
ack
) {

1186 i‡(
	`CSR_READ_2
(
sc
, 
XL_W4_PHY_MGMT
Ë& 
XL_MII_DATA
)

1187 
‰ame
->
mii_d©a
 |
i
;

1189 
	`MII_SET
(
XL_MII_CLK
);

1192 
Áû
:

1194 
	`MII_CLR
(
XL_MII_CLK
);

1195 
	`MII_SET
(
XL_MII_CLK
);

1197 i‡(
ack
)

1200 
	}
}

1206 
	$xl_mii_wrôîeg
(

1207 
ñnk_so·c
 *
sc
,

1208 
xl_mii_‰ame
 *
‰ame
 )

1214 
‰ame
->
mii_°dñim
 = 
XL_MII_STARTDELIM
;

1215 
‰ame
->
mii_›code
 = 
XL_MII_WRITEOP
;

1216 
‰ame
->
mii_tu∫¨ound
 = 
XL_MII_TURNAROUND
;

1221 
	`XL_SEL_WIN
(4);

1226 
	`MII_SET
(
XL_MII_DIR
);

1228 
	`xl_mii_sync
(
sc
);

1230 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_°dñim
, 2);

1231 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_›code
, 2);

1232 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_phyaddr
, 5);

1233 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_ªgaddr
, 5);

1234 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_tu∫¨ound
, 2);

1235 
	`xl_mii_£nd
(
sc
, 
‰ame
->
mii_d©a
, 16);

1238 
	`MII_SET
(
XL_MII_CLK
);

1239 
	`MII_CLR
(
XL_MII_CLK
);

1244 
	`MII_CLR
(
XL_MII_DIR
);

1247 
	}
}

1250 
	$xl_miibus_ªadªg
(

1251 
ñnk_so·c
 *
sc
,

1252 
phy
,

1253 
ªg
 )

1255 
xl_mii_‰ame
 
‰ame
;

1264 i‡((!(
sc
->
xl_Êags
 & 
XL_FLAG_PHYOK
)Ë&& 
phy
 != 24)

1266 
	`¥ötk
("ëhîlök : unôÉ k%d xl_miibus_ªadªgÑëu∫ed\n", 
sc
->
xl_unô
);

1270 
	`mem£t
((*)&
‰ame
, 0, (frame));

1272 
‰ame
.
mii_phyaddr
 = 
phy
;

1273 
‰ame
.
mii_ªgaddr
 = 
ªg
;

1274 
	`xl_mii_ªadªg
(
sc
, &
‰ame
);

1276 (
‰ame
.
mii_d©a
);

1277 
	}
}

1280 
	$xl_miibus_wrôîeg
(

1281 
ñnk_so·c
 *
sc
,

1282 
phy
,

1283 
ªg
,

1284 
d©a
 )

1286 
xl_mii_‰ame
 
‰ame
;

1288 i‡((!(
sc
->
xl_Êags
 & 
XL_FLAG_PHYOK
)Ë&& 
phy
 != 24)

1290 
	`¥ötk
("ëhîlök : unôÉ k%d xl_miibus_wrôîegÑëu∫ed\n", 
sc
->
xl_unô
);

1294 
	`mem£t
((*)&
‰ame
, 0, (frame));

1296 
‰ame
.
mii_phyaddr
 = 
phy
;

1297 
‰ame
.
mii_ªgaddr
 = 
ªg
;

1298 
‰ame
.
mii_d©a
 = 
d©a
;

1300 
	`xl_mii_wrôîeg
(
sc
, &
‰ame
);

1303 
	}
}

1318 
	$xl_ì¥om_waô
(
ñnk_so·c
 *
sc
)

1320 
i
;

1322 
i
 = 0; i < 100; i++) {

1323 i‡(
	`CSR_READ_2
(
sc
, 
XL_W0_EE_CMD
Ë& 
XL_EE_BUSY
)

1324 
	`DELAY
(162);

1329 i‡(
i
 == 100) {

1330 
	`¥ötk
("ëhîlök : unôÉ k%dÉïrom faûedÅÿcomêªady\n", 
sc
->
xl_unô
);

1335 
	}
}

1342 
	$xl_ªad_ì¥om
(

1343 
ñnk_so·c
 *
sc
,

1344 
ˇddr_t
 
de°
,

1345 
off
,

1346 
˙t
,

1347 
sw≠
)

1349 
îr
 = 0, 
i
;

1350 
u_öt16_t
 
w‹d
 = 0, *
±r
;

1351 
	#EEPROM_5BIT_OFFSET
(
A
Ë((((AË<< 2Ë& 0x7F00Ë| ((AË& 0x003F))

	)

1352 
	#EEPROM_8BIT_OFFSET
(
A
Ë((AË& 0x003F)

	)

1357 
	`XL_SEL_WIN
(0);

1359 i‡(
	`xl_ì¥om_waô
(
sc
))

1362 i‡(
sc
->
xl_Êags
 & 
XL_FLAG_EEPROM_OFFSET_30
)

1363 
off
 += 0x30;

1365 
i
 = 0; i < 
˙t
; i++) {

1366 i‡(
sc
->
xl_Êags
 & 
XL_FLAG_8BITROM
)

1367 
	`CSR_WRITE_2
(
sc
, 
XL_W0_EE_CMD
,

1368 
XL_EE_8BIT_READ
 | 
	`EEPROM_8BIT_OFFSET
(
off
 + 
i
));

1370 
	`CSR_WRITE_2
(
sc
, 
XL_W0_EE_CMD
,

1371 
XL_EE_READ
 | 
	`EEPROM_5BIT_OFFSET
(
off
 + 
i
));

1372 
îr
 = 
	`xl_ì¥om_waô
(
sc
);

1373 i‡(
îr
)

1375 
w‹d
 = 
	`CSR_READ_2
(
sc
, 
XL_W0_EE_DATA
);

1376 
±r
 = (
u_öt16_t
*)(
de°
 + (
i
 * 2));

1377 i‡(
sw≠
)

1378 *
±r
 = 
	`¡ohs
(
w‹d
);

1380 *
±r
 = 
w‹d
;

1383 (
îr
 ? 1 : 0);

1384 
	}
}

1390 
	$xl_°©s_upd©e
(

1391 
πems_id
 
timîid
,

1392 *
xsc
)

1394 
ñnk_so·c
 *
sc
 = (ñnk_so·¯*)
xsc
;

1395 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1396 
u_öt32_t
 
t1
;

1398 
sc
->
xl_°©s
.
öt°©us
 = 
	`CSR_READ_2
(sc, 
XL_STATUS
);

1400 
sc
->
xl_°©s
.
miüƒ
 = 
	`xl_miibus_ªadªg
(sc, 0x18, 
MII_ANAR
 );

1401 
sc
->
xl_°©s
.
miù¨
 = 
	`xl_miibus_ªadªg
(sc, 0x18, 
MII_ANLPAR
 );

1402 
sc
->
xl_°©s
.
mii°©us
 = 
	`xl_miibus_ªadªg
(sc, 0x18, 
MII_BMSR
 );

1403 
sc
->
xl_°©s
.
miicmd
 = 
	`xl_miibus_ªadªg
(sc, 0x18, 
MII_BMCR
 );

1405 
	`XL_SEL_WIN
(1);

1406 
sc
->
xl_°©s
.
rx°©us
 = 
	`CSR_READ_2
(sc, 
XL_W1_RX_STATUS
 );

1407 
sc
->
xl_°©s
.
tx°©us
 = 
	`CSR_READ_1
(sc, 
XL_W1_TX_STATUS
 );

1408 
sc
->
xl_°©s
.
smb°©us
 = 
	`CSR_READ_2
(sc, 2 );

1410 
	`XL_SEL_WIN
(3);

1411 
sc
->
xl_°©s
.
öã∫Æc⁄fig
 = 
	`CSR_READ_4
(sc, 
XL_W3_INTERNAL_CFG
);

1412 
sc
->
xl_°©s
.
mac_c⁄åﬁ
 = 
	`CSR_READ_2
(sc, 
XL_W3_MAC_CTRL
);

1413 
sc
->
xl_°©s
.
tx‰ì
 = 
	`CSR_READ_2
(sc, 
XL_W3_FREE_TX
 );

1417 
	`XL_SEL_WIN
(6);

1419 
sc
->
xl_°©s
.
xl_ˇºõr_lo°
 +
	`CSR_READ_1
(sc, 
XL_W6_CARRIER_LOST
);

1420 
sc
->
xl_°©s
.
xl_sqe_îrs
 +
	`CSR_READ_1
(sc, 
XL_W6_SQE_ERRORS
);

1421 
sc
->
xl_°©s
.
xl_tx_mu…i_cﬁlisi⁄
 +
	`CSR_READ_1
(sc, 
XL_W6_COL_MULTIPLE
);

1422 
sc
->
xl_°©s
.
xl_tx_sögÀ_cﬁlisi⁄
 +
	`CSR_READ_1
(sc, 
XL_W6_COL_SINGLE
);

1423 
sc
->
xl_°©s
.
xl_tx_œã_cﬁlisi⁄
 +
	`CSR_READ_1
(sc, 
XL_W6_COL_LATE
);

1424 
sc
->
xl_°©s
.
xl_rx_ovîrun
 +
	`CSR_READ_1
(sc, 
XL_W6_RX_OVERRUN
);

1425 
sc
->
xl_°©s
.
xl_tx_de„ºed
 +
	`CSR_READ_1
(sc, 
XL_W6_DEFERRED
);

1427 
sc
->
xl_°©s
.
xl_tx_‰ames_ok
 +
	`CSR_READ_1
(sc, 
XL_W6_TX_OK
);

1428 
sc
->
xl_°©s
.
xl_rx_‰ames_ok
 +
	`CSR_READ_1
(sc, 
XL_W6_RX_OK
);

1430 
sc
->
xl_°©s
.
xl_rx_byãs_ok
 +
	`CSR_READ_2
(sc, 
XL_W6_TX_BYTES_OK
 );

1431 
sc
->
xl_°©s
.
xl_tx_byãs_ok
 +
	`CSR_READ_2
(sc, 
XL_W6_RX_BYTES_OK
 );

1433 
t1
 = 
	`CSR_READ_1
(
sc
, 
XL_W6_UPPER_FRAMES_OK
);

1434 
sc
->
xl_°©s
.
xl_rx_‰ames_ok
 +((
t1
 & 0x3) << 8);

1435 
sc
->
xl_°©s
.
xl_tx_‰ames_ok
 +(((
t1
 >> 4) & 0x3) << 8);

1438 
iÂ
->
if_õº‹s
 +
sc
->
xl_°©s
.
xl_rx_ovîrun
;

1440 
iÂ
->
if_cﬁlisi⁄s
 +
sc
->
xl_°©s
.
xl_tx_mu…i_cﬁlisi⁄
 +

1441 
sc
->
xl_°©s
.
xl_tx_sögÀ_cﬁlisi⁄
 +

1442 
sc
->
xl_°©s
.
xl_tx_œã_cﬁlisi⁄
;

1450 
	`XL_SEL_WIN
(4);

1452 
t1
 = 
	`CSR_READ_1
(
sc
, 
XL_W4_UPPERBYTESOK
);

1453 
sc
->
xl_°©s
.
xl_rx_byãs_ok
 +((
t1
 & 0xf) << 16);

1454 
sc
->
xl_°©s
.
xl_tx_byãs_ok
 +(((
t1
 >> 4) & 0xf) << 16);

1456 
sc
->
xl_°©s
.
xl_badssd
 +
	`CSR_READ_1
(sc, 
XL_W4_BADSSD
);

1458 
sc
->
xl_°©s
.
medü°©us
 = 
	`CSR_READ_2
(sc, 
XL_W4_MEDIA_STATUS
 );

1459 
sc
->
xl_°©s
.
dma˘l
 = 
	`CSR_READ_4
(sc, 
XL_DMACTL
 );

1462 
	`XL_SEL_WIN
(7);

1464 i‡(!
sc
->
xl_°©s_no_timeout
)

1465 
	`πems_timî_fúe_a·î
–
sc
->
°©_timî_id
, sc->
°©s_upd©e_ticks
, 
xl_°©s_upd©e
, (*)sc );

1467 
	}
}

1476 
	$xl_ª£t
(
ñnk_so·c
 *
sc
)

1478 
i
;

1480 
	`XL_SEL_WIN
(0);

1481 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RESET
 |

1482 ((
sc
->
xl_Êags
 & 
XL_FLAG_WEIRDRESET
) ?

1483 
XL_RESETOPT_DISADVFD
:0));

1485 
i
 = 0; i < 
XL_TIMEOUT
; i++) {

1486 
	`DELAY
(10);

1487 i‡(!(
	`CSR_READ_2
(
sc
, 
XL_STATUS
Ë& 
XL_STAT_CMDBUSY
))

1491 i‡(
i
 =
XL_TIMEOUT
)

1492 
	`¥ötk
("ëhîlök : unôÉ k%dÑe£àdidn'àcom∂ëe\n", 
sc
->
xl_unô
);

1501 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_RESET
);

1502 
	`DELAY
(100000);

1503 
	`xl_waô
(
sc
);

1504 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_RESET
);

1505 
	`xl_waô
(
sc
);

1507 i‡(
sc
->
xl_Êags
 & 
XL_FLAG_INVERT_LED_PWR
 ||

1508 
sc
->
xl_Êags
 & 
XL_FLAG_INVERT_MII_PWR
)

1510 
	`XL_SEL_WIN
(2);

1511 
	`CSR_WRITE_2
(
sc
, 
XL_W2_RESET_OPTIONS
, 
	`CSR_READ_2
(sc,

1512 
XL_W2_RESET_OPTIONS
)

1513 | ((
sc
->
xl_Êags
 & 
XL_FLAG_INVERT_LED_PWR
)?
XL_RESETOPT_INVERT_LED
:0)

1514 | ((
sc
->
xl_Êags
 & 
XL_FLAG_INVERT_MII_PWR
)?
XL_RESETOPT_INVERT_MII
:0)

1519 
	`DELAY
(100000);

1521 
	}
}

1527 
	$xl_°›
(
ñnk_so·c
 *
sc
)

1529 
i‚ë
 *
iÂ
;

1531 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1532 
iÂ
->
if_timî
 = 0;

1534 
	`πems_timî_ˇn˚l
–
sc
->
°©_timî_id
 );

1536 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_DISABLE
);

1537 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_STATS_DISABLE
);

1538 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ENB
);

1539 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_DISCARD
);

1540 
	`xl_waô
(
sc
);

1541 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_DISABLE
);

1542 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_STOP
);

1543 
	`DELAY
(800);

1545 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ACK
|
XL_STAT_INTLATCH
);

1546 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_STAT_ENB
|0);

1547 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ENB
|0);

1550 
	}
}

1567 
	$xl_£tcfg
(
ñnk_so·c
 *
sc
)

1569 
u_öt32_t
 
icfg
;

1571 
	`XL_SEL_WIN
(3);

1572 
icfg
 = 
	`CSR_READ_4
(
sc
, 
XL_W3_INTERNAL_CFG
);

1574 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1576 i‡(
sc
->
xl_medü
 & 
XL_MEDIAOPT_MII
 || sc->xl_medü & 
XL_MEDIAOPT_BT4
)

1577 
icfg
 |(
XL_XCVR_MII
 << 
XL_ICFG_CONNECTOR_BITS
);

1579 i‡(
sc
->
xl_medü
 & 
XL_MEDIAOPT_BTX
)

1580 
icfg
 |(
XL_XCVR_AUTO
 << 
XL_ICFG_CONNECTOR_BITS
);

1582 
	`CSR_WRITE_4
(
sc
, 
XL_W3_INTERNAL_CFG
, 
icfg
);

1583 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_STOP
);

1585 
	`XL_SEL_WIN
(7);

1587 
	}
}

1592 
	$xl_£tmode
(

1593 
ñnk_so·c
 *
sc
,

1594 
medü
)

1596 
u_öt32_t
 
icfg
;

1597 
u_öt16_t
 
medü°©
;

1599 
	`¥ötk
("ëhîlök : unôÉ k%d sñe˘ög ", 
sc
->
xl_unô
);

1601 
	`XL_SEL_WIN
(4);

1602 
medü°©
 = 
	`CSR_READ_2
(
sc
, 
XL_W4_MEDIA_STATUS
);

1603 
	`XL_SEL_WIN
(3);

1604 
icfg
 = 
	`CSR_READ_4
(
sc
, 
XL_W3_INTERNAL_CFG
);

1606 i‡(
sc
->
xl_medü
 & 
XL_MEDIAOPT_BT
) {

1607 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_T
) {

1608 
	`¥ötk
("10baseTÅransceiver, ");

1609 
sc
->
xl_xcvr
 = 
XL_XCVR_10BT
;

1610 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1611 
icfg
 |(
XL_XCVR_10BT
 << 
XL_ICFG_CONNECTOR_BITS
);

1612 
medü°©
 |
XL_MEDIASTAT_LINKBEAT
|

1613 
XL_MEDIASTAT_JABGUARD
;

1614 
medü°©
 &~
XL_MEDIASTAT_SQEENB
;

1618 i‡(
sc
->
xl_medü
 & 
XL_MEDIAOPT_BFX
) {

1619 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_100_FX
) {

1620 
	`¥ötk
("100baseFXÖort, ");

1621 
sc
->
xl_xcvr
 = 
XL_XCVR_100BFX
;

1622 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1623 
icfg
 |(
XL_XCVR_100BFX
 << 
XL_ICFG_CONNECTOR_BITS
);

1624 
medü°©
 |
XL_MEDIASTAT_LINKBEAT
;

1625 
medü°©
 &~
XL_MEDIASTAT_SQEENB
;

1629 i‡(
sc
->
xl_medü
 & (
XL_MEDIAOPT_AUI
|
XL_MEDIAOPT_10FL
)) {

1630 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_5
) {

1631 
	`¥ötk
("AUIÖort, ");

1632 
sc
->
xl_xcvr
 = 
XL_XCVR_AUI
;

1633 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1634 
icfg
 |(
XL_XCVR_AUI
 << 
XL_ICFG_CONNECTOR_BITS
);

1635 
medü°©
 &~(
XL_MEDIASTAT_LINKBEAT
|

1636 
XL_MEDIASTAT_JABGUARD
);

1637 
medü°©
 |~
XL_MEDIASTAT_SQEENB
;

1639 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_FL
) {

1640 
	`¥ötk
("10baseFLÅransceiver, ");

1641 
sc
->
xl_xcvr
 = 
XL_XCVR_AUI
;

1642 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1643 
icfg
 |(
XL_XCVR_AUI
 << 
XL_ICFG_CONNECTOR_BITS
);

1644 
medü°©
 &~(
XL_MEDIASTAT_LINKBEAT
|

1645 
XL_MEDIASTAT_JABGUARD
);

1646 
medü°©
 |~
XL_MEDIASTAT_SQEENB
;

1650 i‡(
sc
->
xl_medü
 & 
XL_MEDIAOPT_BNC
) {

1651 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_2
) {

1652 
	`¥ötk
("BNCÖort, ");

1653 
sc
->
xl_xcvr
 = 
XL_XCVR_COAX
;

1654 
icfg
 &~
XL_ICFG_CONNECTOR_MASK
;

1655 
icfg
 |(
XL_XCVR_COAX
 << 
XL_ICFG_CONNECTOR_BITS
);

1656 
medü°©
 &~(
XL_MEDIASTAT_LINKBEAT
|

1657 
XL_MEDIASTAT_JABGUARD
|

1658 
XL_MEDIASTAT_SQEENB
);

1662 i‡((
medü
 & 
IFM_GMASK
Ë=
IFM_FDX
 ||

1663 
	`IFM_SUBTYPE
(
medü
Ë=
IFM_100_FX
) {

1664 
	`¥ötk
("full duplex\n");

1665 
	`XL_SEL_WIN
(3);

1666 
	`CSR_WRITE_1
(
sc
, 
XL_W3_MAC_CTRL
, 
XL_MACCTRL_DUPLEX
);

1668 
	`¥ötk
("half duplex\n");

1669 
	`XL_SEL_WIN
(3);

1670 
	`CSR_WRITE_1
(
sc
, 
XL_W3_MAC_CTRL
,

1671 (
	`CSR_READ_1
(
sc
, 
XL_W3_MAC_CTRL
Ë& ~
XL_MACCTRL_DUPLEX
));

1674 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_2
)

1675 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_START
);

1677 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_STOP
);

1679 
	`CSR_WRITE_4
(
sc
, 
XL_W3_INTERNAL_CFG
, 
icfg
);

1680 
	`XL_SEL_WIN
(4);

1681 
	`CSR_WRITE_2
(
sc
, 
XL_W4_MEDIA_STATUS
, 
medü°©
);

1682 
	`DELAY
(800);

1683 
	`XL_SEL_WIN
(7);

1686 
	}
}

1695 
	$xl_choo£_xcvr
(

1696 
ñnk_so·c
 *
sc
,

1697 
vîbo£
)

1699 
u_öt16_t
 
devid
;

1706 
	`xl_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
devid
, 
XL_EE_PRODID
, 1, 0);

1708 
devid
) {

1709 
TC_DEVICEID_BOOMERANG_10BT
:

1710 
TC_DEVICEID_KRAKATOA_10BT
:

1711 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BT
;

1712 
sc
->
xl_xcvr
 = 
XL_XCVR_10BT
;

1713 i‡(
vîbo£
)

1714 
	`¥ötk
("etherlink : unitÉlnk%d guessing 10BaseT "

1715 "å™s˚ivî\n", 
sc
->
xl_unô
);

1717 
TC_DEVICEID_BOOMERANG_10BT_COMBO
:

1718 
TC_DEVICEID_KRAKATOA_10BT_COMBO
:

1719 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BT
|
XL_MEDIAOPT_BNC
|
XL_MEDIAOPT_AUI
;

1720 
sc
->
xl_xcvr
 = 
XL_XCVR_10BT
;

1721 i‡(
vîbo£
)

1722 
	`¥ötk
("etherlink : unitÉlnk%d guessing COMBO "

1723 "(AUI/BNC/TP)\n", 
sc
->
xl_unô
);

1725 
TC_DEVICEID_KRAKATOA_10BT_TPC
:

1726 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BT
|
XL_MEDIAOPT_BNC
;

1727 
sc
->
xl_xcvr
 = 
XL_XCVR_10BT
;

1728 i‡(
vîbo£
)

1729 
	`¥ötk
("ëhîlök : unôÉ k%d guessög TPC (BNC/TP)\n", 
sc
->
xl_unô
);

1731 
TC_DEVICEID_CYCLONE_10FL
:

1732 
sc
->
xl_medü
 = 
XL_MEDIAOPT_10FL
;

1733 
sc
->
xl_xcvr
 = 
XL_XCVR_AUI
;

1734 i‡(
vîbo£
)

1735 
	`¥ötk
("ëhîlök : unôÉ k%d guessög 10ba£FL\n", 
sc
->
xl_unô
);

1737 
TC_DEVICEID_BOOMERANG_10_100BT
:

1738 
TC_DEVICEID_HURRICANE_555
:

1739 
TC_DEVICEID_HURRICANE_556
:

1740 
TC_DEVICEID_HURRICANE_556B
:

1741 
TC_DEVICEID_HURRICANE_575A
:

1742 
TC_DEVICEID_HURRICANE_575B
:

1743 
TC_DEVICEID_HURRICANE_575C
:

1744 
TC_DEVICEID_HURRICANE_656
:

1745 
TC_DEVICEID_HURRICANE_656B
:

1746 
TC_DEVICEID_TORNADO_656C
:

1747 
TC_DEVICEID_TORNADO_10_100BT_920B
:

1748 
sc
->
xl_medü
 = 
XL_MEDIAOPT_MII
;

1749 
sc
->
xl_xcvr
 = 
XL_XCVR_MII
;

1750 i‡(
vîbo£
)

1751 
	`¥ötk
("ëhîlök : unôÉ k%d guessög MII\n", 
sc
->
xl_unô
);

1753 
TC_DEVICEID_BOOMERANG_100BT4
:

1754 
TC_DEVICEID_CYCLONE_10_100BT4
:

1755 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BT4
;

1756 
sc
->
xl_xcvr
 = 
XL_XCVR_MII
;

1757 i‡(
vîbo£
)

1758 
	`¥ötk
("ëhîlök : unôÉ k%d guessög 100Ba£T4/MII\n", 
sc
->
xl_unô
);

1760 
TC_DEVICEID_HURRICANE_10_100BT
:

1761 
TC_DEVICEID_HURRICANE_10_100BT_SERV
:

1762 
TC_DEVICEID_TORNADO_10_100BT_SERV
:

1763 
TC_DEVICEID_HURRICANE_SOHO100TX
:

1764 
TC_DEVICEID_TORNADO_10_100BT
:

1765 
TC_DEVICEID_TORNADO_HOMECONNECT
:

1766 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BTX
;

1767 
sc
->
xl_xcvr
 = 
XL_XCVR_AUTO
;

1768 i‡(
vîbo£
)

1769 
	`¥ötk
("ëhîlök : unôÉ k%d guessög 10/100 i¡î«l\n", 
sc
->
xl_unô
);

1771 
TC_DEVICEID_CYCLONE_10_100_COMBO
:

1772 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BTX
|
XL_MEDIAOPT_BNC
|
XL_MEDIAOPT_AUI
;

1773 
sc
->
xl_xcvr
 = 
XL_XCVR_AUTO
;

1774 i‡(
vîbo£
)

1775 
	`¥ötk
("etherlink : unitÉlnk%d guessing 10/100 "

1776 "∂u†BNC/AUI\n", 
sc
->
xl_unô
);

1779 
	`¥ötk
("etherlink : unitÉlnk%d unknown device ID: %x -- "

1780 "deÁu…ögÅÿ10ba£T\n", 
sc
->
xl_unô
, 
devid
);

1781 
sc
->
xl_medü
 = 
XL_MEDIAOPT_BT
;

1786 
	}
}

1807 
	$xl_medücheck
(
ñnk_so·c
 *
sc
)

1810 
	`xl_choo£_xcvr
(
sc
, 1);

1818 i‡(
sc
->
xl_medü
 & (
XL_MEDIAOPT_MASK
 & ~
XL_MEDIAOPT_VCO
)) {

1823 i‡(
sc
->
xl_xcvr
 <
XL_XCVR_AUTO
)

1826 
	`¥ötk
("etherlink : unitÉlnk%d bogus xcvr value "

1827 "ö EEPROM (%x)\n", 
sc
->
xl_unô
, sc->
xl_xcvr
);

1828 
	`¥ötk
("etherlink : unitÉlnk%d choosingÇew default based "

1829 "⁄ c¨dÅy≥\n", 
sc
->
xl_unô
);

1832 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
 &&

1833 
sc
->
xl_medü
 & 
XL_MEDIAOPT_10FL
)

1835 
	`¥ötk
("etherlink : unitÉlnk%d WARNING:Ço media options bits set in "

1836 "thêmedü o±i⁄†ªgi°î!!\n", 
sc
->
xl_unô
);

1837 
	`¥ötk
("etherlink : unitÉlnk%dÅhis could beá manufacturing defect in "

1838 "you∏ad≠ã∏‹ sy°em\n", 
sc
->
xl_unô
);

1839 
	`¥ötk
("etherlink : unitÉlnk%dáttemptingÅo guess mediaÅype; you "

1840 "shouldÖrobably c⁄su… you∏víd‹\n", 
sc
->
xl_unô
);

1844 
	}
}

1870 
	$no_›
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

1873 
	}
}

1878 
	$ñnkIsOn
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

1880  
	`BSP_úq_íabÀd_©_i8259s
 (
úq
->
«me
);

1881 
	}
}

1889 
	$ñnk_°¨t_txchaö
–
ñnk_so·c
 *
sc
, 
TXMD
 *
chaöhód
 )

1891 
	`xl_waô
(
sc
);

1892 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_DOWN_STALL
);

1895 
sc
->
œ°_txchaö_hód
 = 
chaöhód
;

1896 
sc
->
tx_idÀ
 = 0;

1898 
	`xl_waô
(
sc
);

1900 
	`CSR_WRITE_4
(
sc
, 
XL_DOWNLIST_PTR
, 
	`phys_to_bus
–sc->
œ°_txchaö_hód
 ));

1901 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_DOWN_UNSTALL
);

1902 
	}
}

1911 
πems_i§


1912 
	$ñnk_öãºu±_h™dÀr
 ( 
ñnk_so·c
 *
sc
 )

1914 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1915 
u_öt16_t
 
°©us
;

1917  ((
°©us
 = 
	`CSR_READ_2
(
sc
, 
XL_STATUS
)Ë& 
XL_INTRS
) && status != 0xFFFF)

1919 
sc
->
xl_°©s
.
devi˚_öãºu±s
++;

1921 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ACK
 | (
°©us
 & 
XL_INTRS
));

1924 
	`¥ötk
("ëhîlök : unôÉ k%d i¡°©u†%04x\n", 
sc
->
xl_unô
, 
°©us
 );

1927 i‡(
°©us
 & 
XL_STAT_UP_COMPLETE
)

1930 
	`¥ötk
("ëhîlök : unôÉ k%dÑx\n", 
sc
->
xl_unô
 );

1933 
	`πems_bsd√t_evít_£nd
(
rxD´m⁄Tid
, 
sc
->
i€vít
);

1936 if–(
°©us
 & 
XL_STAT_DOWN_COMPLETE
Ë|| (°©u†& 
XL_STAT_TX_COMPLETE
) )

1939 
TXMD
 *
chaöèûmd
 = 
NULL
;

1942 if–
°©us
 & 
XL_STAT_TX_COMPLETE
 )

1947 
iÂ
->
if_€º‹s
++;

1948 
sc
->
xl_°©s
.
txcom∂ëe_öts
++;

1950 
	`¥ötk
("ëhîlök : unôÉ k%dÅønsmôÉº‹\n", 
sc
->
xl_unô
 );

1954 
	`xl_waô
(
sc
);

1955 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_DISABLE
);

1957 
	`xl_waô
(
sc
);

1958 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_RESET
 | 1 );

1960 
	`xl_waô
(
sc
);

1961 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_ENABLE
);

1963 
	`xl_waô
(
sc
);

1969 
	`πems_mesßge_queue_£nd
–
chaöRecovîyQueue
, &
sc
->
œ°_txchaö_hód
, (
TXMD
 *));

1973 if–
sc
->
œ°_txchaö_hód
->
chaö±r
 )

1980 if–()
sc
->
œ°_txchaö_hód
->
chaö±r
 == -1 )

1989 
chaöèûmd
 = 
sc
->
œ°_txchaö_hód
;

1999 
chaöèûmd
 = 
sc
->
œ°_txchaö_hód
->
chaö±r
;

2000 if–!
chaöèûmd
->
chaö±r
 ) chaöèûmd = 
NULL
;

2004 if–
chaöèûmd
 )

2007 
	`ñnk_°¨t_txchaö
(
sc
, 
chaöèûmd
->
√xt_md
 );

2012 
sc
->
tx_idÀ
 = -1;

2016 
	`πems_bsd√t_evít_£nd
–
txD´m⁄Tid
, 
sc
->
i€vít
 );

2018 
	`¥ötk
("unôÉ k%dÅx d⁄e\n", 
sc
->
xl_unô
 );

2024 i‡(
°©us
 & 
XL_STAT_ADFAIL
)

2026 
	`¥ötk
("ëhîlök : unôÉ k%d C©a°r›hi¯bu†Áûuª\n", 
sc
->
xl_unô
 );

2028 i‡(
°©us
 & 
XL_STAT_STATSOFLOW
)

2030 
sc
->
xl_°©s_no_timeout
 = 1;

2031 
	`xl_°©s_upd©e
(
sc
->
°©_timî_id
,sc);

2032 
sc
->
xl_°©s_no_timeout
 = 0;

2039 
uöt16_t
 
öt°©us
, 
öã«bÀ
, 
ödíabÀ
;

2041 
öt°©us
 = 
	`CSR_READ_2
(
sc
, 
XL_STATUS
 );

2043 
	`XL_SEL_WIN
(5);

2044 
öã«bÀ
 = 
	`CSR_READ_2
(
sc
, 
XL_W5_INTR_ENB
 );

2045 
ödíabÀ
 = 
	`CSR_READ_2
(
sc
, 
XL_W5_STAT_ENB
 );

2046 
	`XL_SEL_WIN
(7);

2047 
	`¥ötk
("ëhîlök : unôÉ k%d i°© %04x, ií %04x, ind %04x\n", 
sc
->
xl_unô
, 
öt°©us
, 
öã«bÀ
, 
ödíabÀ
 );

2050 
	}
}

2056 
πems_i§


2057 
	$ñnk_öãºu±_h™dÀr_íåy
()

2059 
i
;

2065 
i
=0; i< 
NUM_UNITS
; i++ )

2067 if–
ñnk_so·c
[
i
].
iﬂddr
 )

2068 
	`ñnk_öãºu±_h™dÀr
–&
ñnk_so·c
[
i
] );

2070 
	}
}

2086 
	$ñnk_öôülize_h¨dw¨e
 (
ñnk_so·c
 *
sc
)

2088 *
˝
;

2089 
i
, 
j
, 
rxsize
, 
txsize
, 
rögsize
;

2094 
˝
 = (*)
	`mÆloc
–(
rögsize
 = ((
rxsize
 = (
sc
->
numRxbuf„rs
 * (
RXMD
))) +

2095 (
txsize
 = (
sc
->
numTxbuf„rs
 * (
TXMD
)))) ) +

2096 + 
CPU_CACHE_ALIGNMENT_FOR_BUFFER
);

2097 
sc
->
buf„rBa£
 = 
˝
;

2098 
˝
 +(
CPU_CACHE_ALIGNMENT_FOR_BUFFER
 - ()cp) & (CPU_CACHE_ALIGNMENT_FOR_BUFFER - 1);

2099 #i‡
	`deföed
(
__i386__
)

2100 #ifde‡
PCI_BRIDGE_DOES_NOT_ENSURE_CACHE_COHERENCY_FOR_DMA


2101 i‡(
	`_CPU_is_∑gög_íabÀd
())

2102 
_CPU_ch™ge_mem‹y_m≠pög_©åibuã


2103 (
NULL
, 
˝
, 
rögsize
, 
PTE_CACHE_DISABLE
 | 
PTE_WRITABLE
);

2106 
sc
->
rögBa£
 = 
˝
;

2110 
sc
->
rx_rög
 = (
RXMD
 *)sc->
rögBa£
;

2111 
sc
->
tx_rög
 = (
TXMD
 *)&sc->
rögBa£
[ 
rxsize
 ];

2114 
mbuf
 *
m
;

2115 
RXMD
 *
nxtmd
;

2122 
i
=0 ; i<
sc
->
numRxbuf„rs
; i++)

2124 if–((
uöt32_t
)&
sc
->
rx_rög
[
i
] & 0x7) )

2126 
	`πems_∑nic
 ("ëhîlök : unôÉ k%dÑxÑögÉ¡ry %dÇŸálig√dÅÿ8 byãs\n", 
sc
->
xl_unô
, 
i
 );

2130 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

2131 
	`MCLGET
 (
m
, 
M_WAIT
);

2132 
m
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

2134 if–
i
 =
sc
->
numRxbuf„rs
-1 )

2135 
nxtmd
 = &
sc
->
rx_rög
[0];

2137 
nxtmd
 = &
sc
->
rx_rög
[
i
+1];

2139 
sc
->
rx_rög
[
i
].
√xt_md
 = 
nxtmd
;

2140 
sc
->
rx_rög
[
i
].
mbuf
 = 
m
;

2142 
	`°_À32
–&
sc
->
rx_rög
[
i
].
°©us
, 0);

2143 
	`°_À32
–&
sc
->
rx_rög
[
i
].
√xt
, (
uöt32_t
)
	`phys_to_bus
–
nxtmd
 ));

2144 
	`°_À32
–&
sc
->
rx_rög
[
i
].
addr
, (
uöt32_t
)
	`phys_to_bus
–
	`mtod
(
m
, *) ));

2145 
	`°_À32
–&
sc
->
rx_rög
[
i
].
Àngth
, 
XL_LAST_FRAG
 | 
XL_PACKET_SIZE
 );

2147 
sc
->
cuº_rx_md
 = &sc->
rx_rög
[0];

2152 
TXMD
 *
thismd
, *
nxtmd
;

2171 
i
=0 ; i<
sc
->
numTxbuf„rs
; i++)

2173 if–((
uöt32_t
)&
sc
->
tx_rög
[
i
] & 0x7) )

2175 
	`πems_∑nic
 ("ëhîlök : unôÉ k%dÅxÑögÉ¡ry %dÇŸálig√dÅÿ8 byãs\n", 
sc
->
xl_unô
, 
i
 );

2178 if–
i
 =
sc
->
numTxbuf„rs
-1 )

2179 
nxtmd
 = &
sc
->
tx_rög
[0];

2181 
nxtmd
 = &
sc
->
tx_rög
[
i
+1];

2183 
thismd
 = &
sc
->
tx_rög
[
i
];

2185 
thismd
->
√xt_md
 = 
nxtmd
;

2186 
thismd
->
chaö±r
 = 
NULL
;

2187 
thismd
->
mbuf
 = 
NULL
;

2189 
	`°_À32
–&
thismd
->
°©us
, 
XL_TXSTAT_DL_COMPLETE
 );

2190 
	`°_À32
–&
thismd
->
√xt
, 0);

2192 
j
=0; j< 
NUM_FRAGS
; j++)

2194 
	`°_À32
–&
thismd
->
tx‰ags
[
j
].
addr
, 0 );

2195 
	`°_À32
–&
thismd
->
tx‰ags
[
j
].
Àngth
, 0 );

2198 
sc
->
œ°_tx_md
 = &sc->
tx_rög
[0];

2204 #ifde‡
ELNK_DEBUG


2205 
	`¥ötk
("etherlink : %02x:%02x:%02x:%02x:%02x:%02xÇame 'elnk%d', io %x, int %d\n",

2206 
sc
->
¨pcom
.
ac_íaddr
[0], sc->arpcom.ac_enaddr[1],

2207 
sc
->
¨pcom
.
ac_íaddr
[2], sc->arpcom.ac_enaddr[3],

2208 
sc
->
¨pcom
.
ac_íaddr
[4], sc->arpcom.ac_enaddr[5],

2209 
sc
->
xl_unô
,

2210 ()
sc
->
iﬂddr
, sc->
úqInfo
.
«me
 );

2214 
sc
->
úqInfo
.
hdl
 = (
πems_úq_hdl
)
ñnk_öãºu±_h™dÀr_íåy
;

2215 
sc
->
úqInfo
.
⁄
 = 
no_›
;

2216 
sc
->
úqInfo
.
off
 = 
no_›
;

2217 
sc
->
úqInfo
.
isOn
 = 
ñnkIsOn
;

2219 if–
sc
->
úqInfo
.
«me
 != 255 )

2221 
°
;

2223 #ifde‡
BSP_SHARED_HANDLER_SUPPORT


2224 
°
 = 
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
–&
sc
->
úqInfo
 );

2226 
°
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
–&
sc
->
úqInfo
 );

2228 i‡(!
°
)

2229 
	`πems_∑nic
 ("ëhîlök : unôÉ k%d I¡îru±Çamê%dáÃódy i¿u£\n", 
sc
->
xl_unô
, sc->
úqInfo
.
«me
 );

2233 
	`¥ötk
("ëhîlök : unôÉ k%d I¡îru±ÇŸ s≥cifõd by devi˚\n", 
sc
->
xl_unô
 );

2235 
	}
}

2248 
	$ñnk_rxD´m⁄
 (*
¨g
)

2250 
ñnk_so·c
 *
sc
;

2251 
ëhî_hódî
 *
eh
;

2252 
mbuf
 *
m
;

2253 
RXMD
 *
rmd
;

2254 
i
,
Àn
, 
rx°©
;

2255 
πems_evít_£t
 
evíts
;

2260 
	`πems_bsd√t_evít_ª˚ive
–
RTEMS_ALL_EVENTS
,

2261 
RTEMS_WAIT
|
RTEMS_EVENT_ANY
,

2262 
RTEMS_NO_TIMEOUT
,

2263 &
evíts
);

2267 
i
=0; i< 
NUM_UNITS
; i++ )

2269 
sc
 = &
ñnk_so·c
[
i
];

2270 if–
sc
->
iﬂddr
 )

2272 if–
evíts
 & 
sc
->
i€vít
 )

2274 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2276 
rmd
 = 
sc
->
cuº_rx_md
;

2281  (
rx°©
 = 
	`ld_À32
(&
rmd
->
°©us
)) )

2283 i‡(
rx°©
 & 
XL_RXSTAT_UP_ERROR
)

2285 
	`¥ötk
("unô %òu∞îr‹\n", 
sc
->
xl_unô
 );

2286 
iÂ
->
if_õº‹s
++;

2289 if–(
rx°©
 & 
XL_RXSTAT_UP_CMPLT
) )

2294 *
pkt
, *
dñim
;

2295 
i
;

2296 
pkt
 = 
	`mtod
(
rmd
->
mbuf
, *);

2297 
	`¥ötk
("unô %òrxÖkà(%08xË", 
sc
->
xl_unô
, 
pkt
 );

2298 
dñim
="", 
i
=0; i < (
ëhî_hódî
)+8; i++, delim=":")

2299 
	`¥ötk
("%s%02x", 
dñim
, (Ë
pkt
[
i
] );

2300 
	`¥ötk
("\n");

2305 
Àn
 = ( 
	`ld_À32
(&
rmd
->
°©us
Ë& 
XL_RXSTAT_LENMASK
);

2306 
m
 = 
rmd
->
mbuf
;

2307 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 =Üí - (
ëhî_hódî
);

2308 
eh
 = 
	`mtod
(
m
, 
ëhî_hódî
 *);

2309 
m
->
m_d©a
 +(
ëhî_hódî
);

2311 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

2314 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

2315 
	`MCLGET
 (
m
, 
M_WAIT
);

2316 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

2317 
rmd
->
mbuf
 = 
m
;

2318 
	`°_À32
–&
rmd
->
°©us
, 0 );

2319 
	`°_À32
–&
rmd
->
addr
, (
uöt32_t
)
	`phys_to_bus
(
	`mtod
(
m
, *)) );

2324 
	`¥ötk
("ëhîlök : unôÉ k%d badÑe˚ivê°©u†--Öackë dr›≥d\n", 
sc
->
xl_unô
);

2325 
iÂ
->
if_õº‹s
++;

2328 
rmd
->
°©us
 = 0;

2330 
rmd
 =Ñmd->
√xt_md
;

2333 
sc
->
cuº_rx_md
 = 
rmd
;

2341 if–
	`πems_evít_sy°em_ª˚ive
–
RTEMS_ALL_EVENTS
,

2342 
RTEMS_NO_WAIT
 | 
RTEMS_EVENT_ANY
,

2344 &
evíts
 ) =
RTEMS_UNSATISFIED
 ) ;

2347 
	}
}

2360 
	$ñnk_txD´m⁄
 (*
¨g
)

2362 
ñnk_so·c
 *
sc
;

2363 
i‚ë
 *
iÂ
;

2364 
mbuf
 *
m
;

2365 
TXMD
 *
œ°md
, *
√xtmd
, *
fú°md
;

2366 
chaöCou¡
,
i
;

2367 
πems_evít_£t
 
evíts
;

2374 
	`πems_bsd√t_evít_ª˚ive
–
RTEMS_ALL_EVENTS
,

2375 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

2376 
RTEMS_NO_TIMEOUT
, &
evíts
);

2378 
i
=0; i< 
NUM_UNITS
; i++ )

2380 
sc
 = &
ñnk_so·c
[
i
];

2381 if–
sc
->
iﬂddr
 )

2383 if–
evíts
 & 
sc
->
i€vít
 )

2385 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2391 
chaöCou¡
 = 0;

2392 
fú°md
 = 
NULL
;

2394 
œ°md
 = 
sc
->
œ°_tx_md
;

2406 
TXMD
 *
chaöhód
, *
chaöèû
;

2407 
size_t
 
esize
;

2409 if–
	`πems_mesßge_queue_ª˚ive
–
chaöRecovîyQueue
, &
chaöhód
, &
esize
,

2410 
RTEMS_NO_WAIT
, 0Ë=
RTEMS_SUCCESSFUL
 )

2413 
chaöèû
 = 
chaöhód
->
chaö±r
;

2417 if–
chaöèû
 && ()chaintail != -1 )

2421 
	`m_‰ìm
–
chaöhód
->
mbuf
 );

2422 
	`°_À32
–&
chaöhód
->
°©us
, 
XL_TXSTAT_DL_COMPLETE
 );

2423 
chaöhód
->
mbuf
 = 
NULL
;

2425 if–
chaöhód
 =
chaöèû
 ) ;

2426 
chaöhód
 = chaöhód->
√xt_md
;

2432 
	`m_‰ìm
–
chaöhód
->
mbuf
 );

2433 
	`°_À32
–&
chaöhód
->
°©us
, 
XL_TXSTAT_DL_COMPLETE
 );

2434 
chaöhód
->
mbuf
 = 
NULL
;

2439 
√xtmd
 = 
œ°md
->
√xt_md
;

2442 if–! (
	`ld_À32
(&
√xtmd
->
°©us
Ë& 
XL_TXSTAT_DL_COMPLETE
) )

2444 
	`¥ötk
("ëhîlök : unôÉ k%dÅxÑög fuŒ!\n", 
sc
->
xl_unô
);

2448 if–
√xtmd
->
mbuf
 )

2450 
	`¥ötk
("ëhîlök : unôÉ k%dÅxÑög c‹ru±!\n", 
sc
->
xl_unô
);

2456 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

2457 if–!
m
 ) ;

2460 
i
;

2462 
√xtmd
->
mbuf
 = 
m
;

2464 
i
=0; i< 
NUM_FRAGS
; i++)

2466 
	`°_À32
–&
√xtmd
->
tx‰ags
[
i
].
Àngth
, ((
m
->
m_√xt
)?0:
XL_LAST_FRAG
Ë| ( m->
m_Àn
 & 
XL_TXSTAT_LENMASK
) );

2467 
	`°_À32
–&
√xtmd
->
tx‰ags
[
i
].
addr
, (
uöt32_t
)
	`phys_to_bus
–
m
->
m_d©a
 ) );

2468 i‡((
m
 = m->
m_√xt
Ë=
NULL
)

2471 if–
m
 )

2473 
	`¥ötk
("ëhîlök : unôÉ k%dÅx føgmít†exhau°ed,ÅrunˇtögÖackë!\n", 
sc
->
xl_unô
);

2474 
	`°_À32
–&
√xtmd
->
tx‰ags
[
NUM_FRAGS
-1].
Àngth
, 
XL_LAST_FRAG
 |

2475 
	`ld_À32
–&
√xtmd
->
tx‰ags
[
NUM_FRAGS
-1].
Àngth
) );

2481 *
pkt
 = 
	`bus_to_phys
–
	`ld_À32
–&
√xtmd
->
tx‰ags
[
i
].
addr
 )), *
dñim
;

2482 
i
;

2483 
	`¥ötk
("unô %d queuedÖkà(%08xË", 
sc
->
xl_unô
, (
uöt32_t
)
pkt
 );

2484 
dñim
="", 
i
=0; i < (
ëhî_hódî
); i++, delim=":")

2485 
	`¥ötk
("%s%02x", 
dñim
, (Ë
pkt
[
i
] );

2486 
	`¥ötk
("\n");

2492 
	`°_À32
–&
√xtmd
->
√xt
, 0);

2493 
	`°_À32
–&
√xtmd
->
°©us
, 0);

2495 if–!
fú°md
 )

2498 
fú°md
 = 
√xtmd
;

2509 
œ°md
->
chaö±r
 = (
TXMD
 *)-1;

2514 
	`°_À32
–&
œ°md
->
√xt
, (
uöt32_t
)
	`phys_to_bus
–
√xtmd
 ));

2517 ++
chaöCou¡
;

2518 
œ°md
 = 
√xtmd
;

2525 if–
fú°md
 )

2530 
sc
->
œ°_tx_md
 = 
œ°md
;

2537 
	`°_À32
–&
œ°md
->
°©us
, 
XL_TXSTAT_DL_INTR
 );

2546 if–
chaöCou¡
 > 1 )

2548 
fú°md
->
chaö±r
 = 
œ°md
;

2550 
sc
->
chaö_Àngths
[sc->
chÀnIndex
]()
chaöCou¡
;

2551 if–++
sc
->
chÀnIndex
 =
NUM_CHAIN_LENGTHS
 ) sc->chlenIndex = 0;

2560 
œ°md
->
chaö±r
 = 
NULL
;

2563 
	`¥ötk
("unit %d queued %dÖkts,Üastpkt status %08X\n",

2564 
sc
->
xl_unô
,

2565 
chaöCou¡
,

2566 (
uöt32_t
)
	`ld_À32
–&
œ°md
->
°©us
) );

2569 if–
sc
->
tx_idÀ
 =0 && 
	`CSR_READ_4
(sc, 
XL_DOWNLIST_PTR
) == 0 )

2571 
	`¥ötk
("ëhîlök : unôÉ k%dÅx f‹˚d!\n", 
sc
->
xl_unô
);

2572 
sc
->
tx_idÀ
 = -1;

2580 if–
sc
->
tx_idÀ
 )

2583 
	`¥ötk
("ëhîlök : unôÉ k%dÅx sèπed %dÖackës\n", 
sc
->
xl_unô
, 
chaöCou¡
 );

2585 
	`ñnk_°¨t_txchaö
(
sc
, 
fú°md
);

2590 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

2595 
	}
}

2608 
	$ñnk_°¨t
 (
i‚ë
 *
iÂ
)

2610 
ñnk_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

2612 
	`¥ötk
("unô %òtx sig«Àd\n", 
sc
->
xl_unô
 );

2614 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

2615 
	`πems_bsd√t_evít_£nd
–
txD´m⁄Tid
, 
sc
->
i€vít
 );

2616 
	}
}

2636 
	$ñnk_öô
 (*
¨g
)

2638 
i
;

2639 
ñnk_so·c
 *
sc
 = 
¨g
;

2640 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2642 if–!(
iÂ
->
if_Êags
 & 
IFF_RUNNING
) )

2644 
	`xl_°›
(
sc
);

2645 
	`xl_ª£t
(
sc
);

2646 
sc
->
tx_idÀ
 = -1;

2649 
uöt32_t
 
¸
,
§
;

2651 
	`xl_miibus_wrôîeg
(
sc
, 0x18, 
MII_BMCR
, 
BMCR_RESET
 );

2653  (
¸
 = 
	`xl_miibus_ªadªg
(
sc
, 0x18, 
MII_BMCR
 )Ë& 
BMCR_RESET
 )

2655 
	`DELAY
(100000);

2658 
	`xl_miibus_wrôîeg
(
sc
, 0x18, 
MII_ANAR
, 
ANAR_10
 | 
ANAR_TX
 | 
ANAR_10_FD
 | 
ANAR_TX_FD
 );

2659 
	`xl_miibus_wrôîeg
(
sc
, 0x18, 
MII_BMCR
, 
BMCR_STARTNEG
 | 
BMCR_AUTOEN
 );

2661 
i
=0; ((
§
 = 
	`xl_miibus_ªadªg
(
sc
, 0x18, 
MII_BMSR
)Ë& 
BMSR_ACOMP
) == 0 && i < 20; i++)

2662 
	`DELAY
(10000);

2669 if–!
sc
->
úqInfo
.
hdl
 )

2671 
	`ñnk_öôülize_h¨dw¨e
(
sc
);

2678 
u_öt8_t
 
rxfût
;

2681 
	`XL_SEL_WIN
(2);

2682 
i
 = 0; i < 
ETHER_ADDR_LEN
; i++)

2684 
	`CSR_WRITE_1
(
sc
, 
XL_W2_STATION_ADDR_LO
 + 
i
, sc->
¨pcom
.
ac_íaddr
[i]);

2688 
medü
 = 
IFM_ETHER
|
IFM_100_TX
|
IFM_FDX
;

2690 
	`xl_medücheck
(
sc
);

2693 
sc
->
xl_xcvr
) {

2694 
XL_XCVR_10BT
:

2695 
medü
 = 
IFM_ETHER
|
IFM_10_T
;

2696 
	`xl_£tmode
(
sc
, 
medü
);

2698 
XL_XCVR_AUI
:

2699 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
 &&

2700 
sc
->
xl_medü
 =
XL_MEDIAOPT_10FL
) {

2701 
medü
 = 
IFM_ETHER
|
IFM_10_FL
;

2702 
	`xl_£tmode
(
sc
, 
medü
);

2704 
medü
 = 
IFM_ETHER
|
IFM_10_5
;

2705 
	`xl_£tmode
(
sc
, 
medü
);

2708 
XL_XCVR_COAX
:

2709 
medü
 = 
IFM_ETHER
|
IFM_10_2
;

2710 
	`xl_£tmode
(
sc
, 
medü
);

2712 
XL_XCVR_AUTO
:

2713 
XL_XCVR_100BTX
:

2714 
	`xl_£tcfg
(
sc
);

2716 
XL_XCVR_MII
:

2717 
	`¥ötk
("ëhîlök : unôÉ k%d MII medüÇŸ suµ‹ãd!\n", 
sc
->
xl_unô
);

2719 
XL_XCVR_100BFX
:

2720 
medü
 = 
IFM_ETHER
|
IFM_100_FX
;

2723 
	`¥ötk
("ëhîlök : unôÉ k%d unknow¿XCVRÅy≥: %d\n", 
sc
->
xl_unô
, sc->
xl_xcvr
);

2728 
medü
 = 
IFM_ETHER
|
IFM_10_T
;

2733 i‡(
sc
->
xl_Êags
 & 
XL_FLAG_NO_XCVR_PWR
) {

2734 
	`XL_SEL_WIN
(0);

2735 
	`CSR_WRITE_2
(
sc
, 
XL_W0_MFG_ID
, 
XL_NO_XCVR_PWR_MAGICBITS
);

2741 
	`XL_SEL_WIN
(2);

2743 
i
 = 0; i < 3; i++)

2744 
	`CSR_WRITE_2
(
sc
, 
XL_W2_STATION_MASK_LO
 + (
i
 * 2), 0);

2752 
	`CSR_WRITE_1
(
sc
, 
XL_TX_FREETHRESH
, 
XL_PACKET_SIZE
 >> 8);

2755 
sc
->
xl_tx_thªsh
 = 
XL_MIN_FRAMELEN
;

2756 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_SET_START
|sc->
xl_tx_thªsh
);

2767 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
) {

2768 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
,

2769 
XL_CMD_SET_TX_RECLAIM
|(
XL_PACKET_SIZE
 >> 4));

2773 
	`XL_SEL_WIN
(5);

2774 
rxfût
 = 
	`CSR_READ_1
(
sc
, 
XL_W5_RX_FILTER
);

2777 
rxfût
 |
XL_RXFILTER_INDIVIDUAL
;

2780 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
) {

2781 
rxfût
 |
XL_RXFILTER_ALLFRAMES
;

2782 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_SET_FILT
|
rxfût
);

2784 
rxfût
 &~
XL_RXFILTER_ALLFRAMES
;

2785 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_SET_FILT
|
rxfût
);

2791 i‡(
iÂ
->
if_Êags
 & 
IFF_BROADCAST
) {

2792 
rxfût
 |
XL_RXFILTER_BROADCAST
;

2793 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_SET_FILT
|
rxfût
);

2795 
rxfût
 &~
XL_RXFILTER_BROADCAST
;

2796 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_SET_FILT
|
rxfût
);

2803 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
)

2804 
	`xl_£tmu…i_hash
(
sc
);

2806 
	`xl_£tmu…i
(
sc
);

2818 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_UP_STALL
);

2819 
	`xl_waô
(
sc
);

2820 
	`CSR_WRITE_4
(
sc
, 
XL_UPLIST_PTR
, 
	`phys_to_bus
–sc->
cuº_rx_md
 ));

2821 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_UP_UNSTALL
);

2822 
	`xl_waô
(
sc
);

2826 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
) {

2828 
	`CSR_WRITE_1
(
sc
, 
XL_DOWN_POLL
, 64);

2829 
	`xl_waô
(
sc
);

2830 
	`¥ötk
("ëhîlök : unôÉ k%dÅxÖﬁlögÉ«bÀd\n", 
sc
->
xl_unô
 );

2838 
	`XL_SEL_WIN
(3);

2839 i‡(
sc
->
xl_xcvr
 =
XL_XCVR_COAX
)

2840 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_START
);

2842 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_COAX_STOP
);

2845 i‡(
sc
->
xl_ty≥
 =
XL_TYPE_905B
)

2846 
	`CSR_WRITE_2
(
sc
, 
XL_W3_MAXPKTSIZE
, 
XL_PACKET_SIZE
);

2849 
	`mem£t
–&
sc
->
xl_°©s
, 0, (xl_stats));

2851 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_STATS_DISABLE
);

2852 
sc
->
xl_°©s_no_timeout
 = 1;

2853 
	`xl_°©s_upd©e
(
sc
->
°©_timî_id
,sc);

2854 
sc
->
xl_°©s_no_timeout
 = 0;

2855 
	`XL_SEL_WIN
(4);

2856 
	`CSR_WRITE_2
(
sc
, 
XL_W4_NET_DIAG
, 
XL_NETDIAG_UPPER_BYTES_ENABLE
);

2857 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_STATS_ENABLE
);

2863 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ACK
|0xFF);

2864 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_STAT_ENB
|
XL_INTRS
);

2865 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_INTR_ENB
|
XL_INTRS
);

2868 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_SET_THRESH
|(
XL_PACKET_SIZE
 >>2));

2869 
	`CSR_WRITE_4
(
sc
, 
XL_DMACTL
, 
XL_DMACTL_UP_RX_EARLY
 );

2872 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_TX_ENABLE
);

2873 
	`xl_waô
(
sc
);

2874 
	`CSR_WRITE_2
(
sc
, 
XL_COMMAND
, 
XL_CMD_RX_ENABLE
);

2875 
	`xl_waô
(
sc
);

2878 
	`XL_SEL_WIN
(7);

2881 
	`πems_timî_fúe_a·î
–
sc
->
°©_timî_id
, sc->
°©s_upd©e_ticks
, 
xl_°©s_upd©e
, (*)sc );

2887 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

2889 
	}
}

2901 
	$ñnk_°›
 (
ñnk_so·c
 *
sc
)

2903 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2904 
i
;

2909 
	`xl_°›
(
sc
);

2910 
	`xl_ª£t
(
sc
);

2911 
sc
->
tx_idÀ
 = -1;

2913 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

2919 
TXMD
 *
chaöhód
;

2920 
size_t
 
esize
;

2922  
	`πems_mesßge_queue_ª˚ive
–
chaöRecovîyQueue
, &
chaöhód
, &
esize
,

2923 
RTEMS_NO_WAIT
, 0Ë=
RTEMS_SUCCESSFUL
 );

2926 
i
=0 ; i<
sc
->
numRxbuf„rs
; i++)

2928 
	`°_À32
–&
sc
->
rx_rög
[
i
].
°©us
, 0);

2929 
	`°_À32
–&
sc
->
rx_rög
[
i
].
Àngth
, 
XL_LAST_FRAG
 | 
XL_PACKET_SIZE
 );

2932 
i
=0 ; i<
sc
->
numTxbuf„rs
; i++)

2934 
	`°_À32
–&
sc
->
tx_rög
[
i
].
°©us
, 
XL_TXSTAT_DL_COMPLETE
 );

2935 
	`°_À32
–&
sc
->
tx_rög
[
i
].
√xt
, 0);

2936 if–
sc
->
tx_rög
[
i
].
mbuf
 )

2938 
	`m_‰ì
–
sc
->
tx_rög
[
i
].
mbuf
 );

2939 
sc
->
tx_rög
[
i
].
mbuf
 = 
NULL
;

2942 
	}
}

2951 
	$ñnk_°©s
 (
ñnk_so·c
 *
sc
)

2953 
	`¥ötf
(" MII PHY data {ánr:%04xÜpar:%04x stat:%04x ctl:%04x }\n",

2954 
sc
->
xl_°©s
.
miüƒ
,

2955 
sc
->
xl_°©s
.
miù¨
,

2956 
sc
->
xl_°©s
.
mii°©us
,

2957 
sc
->
xl_°©s
.
miicmd
);

2959 
	`¥ötf
(" i¡î«lcfg:%08" 
PRIx32
 " macctl:%04x dmactl:%08" PRIx32 "\n",

2960 
sc
->
xl_°©s
.
öã∫Æc⁄fig
,

2961 
sc
->
xl_°©s
.
mac_c⁄åﬁ
,

2962 
sc
->
xl_°©s
.
dma˘l
);

2964 
	`¥ötf
("Ñxstatus:%04xÅxstatus:%02x smbstat:%04x\n",

2965 
sc
->
xl_°©s
.
rx°©us
,

2966 
sc
->
xl_°©s
.
tx°©us
,

2967 
sc
->
xl_°©s
.
smb°©us
);

2969 
	`¥ötf
("Åxfree:%04X intstatus:%04x mediastat:%04x\n",

2970 
sc
->
xl_°©s
.
tx‰ì
,

2971 
sc
->
xl_°©s
.
öt°©us
,

2972 
sc
->
xl_°©s
.
medü°©us
);

2976 
i
, 
tŸÆLígths
0, 
numLígths
= 0;

2978 
i
=0; i< 
NUM_CHAIN_LENGTHS
; i++)

2980 if–
sc
->
chaö_Àngths
[
i
] > -1 )

2982 
tŸÆLígths
 +
sc
->
chaö_Àngths
[
i
];

2983 ++
numLígths
;

2987 
	`¥ötf
(" i¡îru±s:%-9" 
PRIu32
 "Åxcmp_ints:%-5" PRIu32 "ávg_chain_len:%-4d\n",

2988 
sc
->
xl_°©s
.
devi˚_öãºu±s
,

2989 
sc
->
xl_°©s
.
txcom∂ëe_öts
,

2990 
numLígths
 ? (
tŸÆLígths
 /ÇumLengths) : -1 );

2993 
	`¥ötf
(" carrier_lost:%-5d sqe_errs:%-5d\n",

2994 
sc
->
xl_°©s
.
xl_ˇºõr_lo°
,

2995 
sc
->
xl_°©s
.
xl_sqe_îrs
);

2997 
	`¥ötf
("Åx_multi_collision:%-5dÅx_single_collision:%-5d\n",

2998 
sc
->
xl_°©s
.
xl_tx_mu…i_cﬁlisi⁄
,

2999 
sc
->
xl_°©s
.
xl_tx_sögÀ_cﬁlisi⁄
);

3001 
	`¥ötf
("Åx_late_collision:%-5dÑx_overrun:%-5d\n",

3002 
sc
->
xl_°©s
.
xl_tx_œã_cﬁlisi⁄
,

3003 
sc
->
xl_°©s
.
xl_rx_ovîrun
);

3005 
	`¥ötf
("Åx_deferred:%-5d badssd:%-5d\n",

3006 
sc
->
xl_°©s
.
xl_tx_de„ºed
,

3007 
sc
->
xl_°©s
.
xl_badssd
);

3009 
	`¥ötf
("Ñx_‰ames_ok:%-9" 
PRIu32
 "Åx_frames_ok:%-9" PRIu32 "\n",

3010 
sc
->
xl_°©s
.
xl_rx_‰ames_ok
,

3011 
sc
->
xl_°©s
.
xl_tx_‰ames_ok
);

3013 
	`¥ötf
("Ñx_byãs_ok:%-9" 
PRIu32
 "Åx_bytes_ok:%-9" PRIu32 "\n",

3014 
sc
->
xl_°©s
.
xl_rx_byãs_ok
,

3015 
sc
->
xl_°©s
.
xl_tx_byãs_ok
 );

3016 
	}
}

3028 
	$ñnk_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

3030 
ñnk_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

3031 
îr‹
 = 0;

3033 
comm™d
) {

3034 
SIOCGIFADDR
:

3035 
SIOCSIFADDR
:

3036 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

3039 
SIOCSIFFLAGS
:

3040 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
)) {

3041 
IFF_RUNNING
:

3042 
	`ñnk_°›
 (
sc
);

3045 
IFF_UP
:

3046 
	`ñnk_öô
 (
sc
);

3049 
IFF_UP
 | 
IFF_RUNNING
:

3050 
	`ñnk_°›
 (
sc
);

3051 
	`ñnk_öô
 (
sc
);

3059 
SIO_RTEMS_SHOW_STATS
:

3060 
	`ñnk_°©s
 (
sc
);

3067 
îr‹
 = 
EINVAL
;

3071  
îr‹
;

3072 
	}
}

3082 
	$i·≠
(
i‚ë
 *
iÂ
, 
ëhî_hódî
 *
eh
, 
mbuf
 *
m
 )

3084 
i
;

3085 *
dñim
, *
pkt
;

3087 
	`¥ötk
("unô %i, sr¯", 
iÂ
->
if_unô
 );

3088 
dñim
"", 
i
=0; i< 
ETHER_ADDR_LEN
; i++, delim=":")

3089 
	`¥ötk
("%s%02x", 
dñim
, (Ë
eh
->
ëhî_sho°
[
i
] );

3091 
	`¥ötk
(" dest ");

3093 
dñim
"", 
i
=0; i< 
ETHER_ADDR_LEN
; i++, delim=":")

3094 
	`¥ötk
("%s%02x", 
dñim
, (Ë
eh
->
ëhî_dho°
[
i
] );

3095 
	`¥ötk
("Ökt ");

3097 
pkt
 = (*)
eh
;

3098 
dñim
="", 
i
=0; i < (
ëhî_hódî
); i++, delim=":")

3099 
	`¥ötk
("%s%02x", 
dñim
, (Ë
pkt
[
i
] );

3101 
	`¥ötk
("\n");

3103 
	}
}

3108 
	sñ_bﬂrds


3110 
	mpbus
,
	mpdev
,
	mpfun
, 
	mvid
, 
	mdid
, 
	mtödex
;

3117 
	$πems_ñnk_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èch
)

3119 
ñnk_so·c
 *
sc
;

3120 
i‚ë
 *
iÂ
;

3121 *
unôName
;

3122 
unôNumbî
;

3123 
mtu
, 
i
;

3124 
cvÆue
;

3125 
ñ_bﬂrds
 
sysbﬂrds
[
NUM_UNITS
];

3126 
numFound
 = 0;

3127 
pbus
, 
pdev
, 
pfun
;

3128 #i‡
	`deföed
(
__i386__
)

3129 
uöt32_t
 
vÆue
;

3130 
uöt8_t
 
öãºu±
;

3132 #i‡
	`deföed
(
__PPC__
)

3133 
uöt32_t
 
lvÆue
;

3141 if–(
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
–
c⁄fig
, &
unôName
)) == -1 )

3146 if–
	`°rcmp
(
unôName
, 
DRIVER_PREFIX
) )

3148 
	`¥ötk
("ëhîlök : invÆid unôÇamê'%s'\n", 
unôName
 );

3152 i‡((
unôNumbî
 < 1Ë|| (unôNumbî > 
NUM_UNITS
))

3154 
	`¥ötk
("ëhîlök : unô %òi†övÆid, mu° bê(1 <¿<%d)\n", 
unôNumbî
, 
NUM_UNITS
);

3160 
d⁄e
0, 
unum
;

3167  
i
=0; !
d⁄e
 && 
xl_devs
[i].
xl_vid
; i++)

3169 
unum
1; !
d⁄e
 &&

3170 
	`pci_föd_devi˚
–
xl_devs
[
i
].
xl_vid
, xl_devs[i].
xl_did
, 
unum
-1,

3171 &
sysbﬂrds
[
numFound
].
pbus
,

3172 &
sysbﬂrds
[
numFound
].
pdev
,

3173 &
sysbﬂrds
[
numFound
].
pfun
)==0; 
unum
++)

3175 if–
numFound
 =
NUM_UNITS
 )

3177 
	`¥ötk
("ëhîlök : Maximum o‡%d unô†found,Éxå®devi˚†ign‹ed.\n", 
NUM_UNITS
 );

3178 
d⁄e
=-1;

3182 
sysbﬂrds
[
numFound
].
vid
 = 
xl_devs
[
i
].
xl_vid
;

3183 
sysbﬂrds
[
numFound
].
did
 = 
xl_devs
[
i
].
xl_did
;

3184 
sysbﬂrds
[
numFound
].
tödex
 = 
i
;

3185 ++
numFound
;

3190 if–! 
numFound
 )

3192 
	`¥ötk
("etherlink : No Etherlink devices found\n");

3196 if–
unôNumbî
-1 >
numFound
 )

3198 
	`¥ötk
("ëhîlök : devi˚ '%s'ÇŸ found\n", 
c⁄fig
->
«me
 );

3207 if–
numFound
 > 1 )

3209 
ñ_bﬂrds
 
tbﬂrd
;

3210 
dids‹t
;

3214 
dids‹t
 = 0;

3216 
i
=1; i<
numFound
; i++)

3218 if–
sysbﬂrds
[
i
-1].
pbus
 > sysboards[i].pbus ||

3219 (
sysbﬂrds
[
i
-1].
pbus
 =sysbﬂrds[i].pbu†&& sysbﬂrds[i-1].
pdev
 > sysboards[i].pdev) )

3221 
	`mem˝y
(&
tbﬂrd
, &
sysbﬂrds
[
i
-1], (
ñ_bﬂrds
));

3222 
	`mem˝y
(&
sysbﬂrds
[
i
-1], &sysbﬂrds[i], (
ñ_bﬂrds
));

3223 
	`mem˝y
(&
sysbﬂrds
[
i
], &
tbﬂrd
, (
ñ_bﬂrds
));

3224 
dids‹t
++;

3228  
dids‹t
 );

3235 
pbus
 = 
sysbﬂrds
[
unôNumbî
-1].pbus;

3236 
pdev
 = 
sysbﬂrds
[
unôNumbî
-1].pdev;

3237 
pfun
 = 
sysbﬂrds
[
unôNumbî
-1].pfun;

3240 
sc
 = &
ñnk_so·c
[
unôNumbî
 - 1];

3241 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3242 i‡(
iÂ
->
if_so·c
 !
NULL
)

3244 
	`¥ötk
("ëhîlök : unô %òÆªady i¿u£.\n", 
unôNumbî
 );

3251 
sc
->
xl_unô
 = 
unôNumbî
;

3252 
sc
->
xl_ty≥
 = 
sysbﬂrds
[ 
unôNumbî
-1 ].
tödex
;

3254 
sc
->
víd‹ID
 = 
sysbﬂrds
[
numFound
].
vid
;

3255 
sc
->
devi˚ID
 = 
sysbﬂrds
[
numFound
].
did
;

3257 
sc
->
numRxbuf„rs
 = (
c⁄fig
->
rbuf_cou¡
Ë? c⁄fig->rbuf_cou¡ : 
RX_RING_SIZE
;

3258 
sc
->
numTxbuf„rs
 = (
c⁄fig
->
xbuf_cou¡
Ë? c⁄fig->xbuf_cou¡ : 
TX_RING_SIZE
;

3261 
i
=0; i< 
NUM_CHAIN_LENGTHS
; i++Ë
sc
->
chaö_Àngths
[i]= -1;

3262 
sc
->
chÀnIndex
 = 0;

3265 i‡(
c⁄fig
->
mtu
)

3266 
mtu
 = 
c⁄fig
->mtu;

3268 
mtu
 = 
ETHERMTU
;

3270 
sc
->
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

3274 #ifde‡
ELNK_DEBUG


3275 
	`¥ötk
("etherlink : device '%s',Çame 'elnk%d',Öci %02x:%02x.%02x, %dÑx/%dÅx buffers\n",

3276 
xl_devs
[
sc
->
xl_ty≥
].
xl_«me
, sc->
xl_unô
,

3277 
pbus
, 
pdev
, 
pfun
,

3278 
sc
->
numRxbuf„rs
, sc->
numTxbuf„rs
);

3285 if–
	`πems_timî_¸óã
–
	`πems_buûd_«me
–'X', 'L', 't', ()(
sc
->
xl_unô
 & 255)),

3286 &
sc
->
°©_timî_id
 ) !
RTEMS_SUCCESSFUL
 )

3288 
	`¥ötk
("ëhîlök : unôÉ k%d u«bÀÅÿ¸óã sèt†timî\n", 
sc
->
xl_unô
 );

3295 
sc
->
°©s_upd©e_ticks
 = 
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

3300 
sc
->
i€vít
 = 
unô_sig«ls
[
unôNumbî
-1];

3303 #i‡
	`deföed
(
__i386__
)

3304 
	`pci_ªad_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
, 16, &
vÆue
);

3305 
sc
->
iﬂddr
 = 
vÆue
 & ~
IO_MASK
;

3307 
	`pci_ªad_c⁄fig_byã
(
pbus
, 
pdev
, 
pfun
, 60, &
öãºu±
);

3308 
cvÆue
 = 
öãºu±
;

3310 #i‡
	`deföed
(
__PPC__
)

3314 
	`pci_wrôe_c⁄fig_w‹d
(
pbus
, 
pdev
, 
pfun
,

3315 
PCI_COMMAND
,

3316 (
uöt16_t
)–
PCI_COMMAND_IO
 |

3317 
PCI_COMMAND_MASTER
 |

3318 
PCI_COMMAND_INVALIDATE
 |

3319 
PCI_COMMAND_WAIT
 ) );

3323 
	`pci_ªad_c⁄fig_dw‹d
(
pbus
, 
pdev
, 
pfun
,

3324 
PCI_BASE_ADDRESS_0
,

3325 &
lvÆue
);

3327 
sc
->
iﬂddr
 = (
uöt32_t
)
lvÆue
 & 
PCI_BASE_ADDRESS_IO_MASK
;

3332 
	`pci_ªad_c⁄fig_byã
(
pbus
, 
pdev
, 
pfun
,

3333 
PCI_INTERRUPT_LINE
,

3334 &
cvÆue
);

3337 
	`mem£t
(&
sc
->
úqInfo
,0,(
πems_úq_c⁄√˘_d©a
));

3338 
sc
->
úqInfo
.
«me
 = 
cvÆue
;

3347 
uöt8_t
 
pci_œãncy
;

3348 
uöt8_t
 
√w_œãncy
 = 248;

3354 #i‡
	`deföed
(
__i386__
)

3355 
	`pci_ªad_c⁄fig_byã
(
pbus
, 
pdev
, 
pfun
, 0x0d, &
pci_œãncy
);

3357 #i‡
	`deföed
(
__PPC__
)

3358 
	`pci_ªad_c⁄fig_byã
(
pbus
,
pdev
,
pfun
, 
PCI_LATENCY_TIMER
, &
pci_œãncy
);

3360 i‡(
pci_œãncy
 < 
√w_œãncy
)

3362 
	`¥ötk
("ëhîlök : unôÉ k%d Ovîridög PCIÜ©ícy,Åimî (CFLTË£âög o‡%d,Çew vÆuêi†%d.\n", 
sc
->
xl_unô
, 
pci_œãncy
, 
√w_œãncy
 );

3363 #i‡
	`deföed
(
__i386__
)

3364 
	`pci_wrôe_c⁄fig_byã
(
pbus
, 
pdev
, 
pfun
, 0x0d, 
√w_œãncy
);

3366 #i‡
	`deföed
(
__PPC__
)

3367 
	`pci_wrôe_c⁄fig_byã
(
pbus
,
pdev
,
pfun
, 
PCI_LATENCY_TIMER
, 
√w_œãncy
);

3373 
	`xl_ª£t
(
sc
);

3377 
u_öt16_t
 
xcvr
[2];

3378 
u_ch¨
 
óddr
[
ETHER_ADDR_LEN
];

3380 
sc
->
xl_Êags
 = 0;

3381 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_555
)

3382 
sc
->
xl_Êags
 |
XL_FLAG_EEPROM_OFFSET_30
 | 
XL_FLAG_PHYOK
;

3383 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_556
 ||

3384 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_556B
)

3385 
sc
->
xl_Êags
 |
XL_FLAG_FUNCREG
 | 
XL_FLAG_PHYOK
 |

3386 
XL_FLAG_EEPROM_OFFSET_30
 | 
XL_FLAG_WEIRDRESET
 |

3387 
XL_FLAG_INVERT_LED_PWR
 | 
XL_FLAG_INVERT_MII_PWR
;

3388 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_555
 ||

3389 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_556
)

3390 
sc
->
xl_Êags
 |
XL_FLAG_8BITROM
;

3391 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_556B
)

3392 
sc
->
xl_Êags
 |
XL_FLAG_NO_XCVR_PWR
;

3394 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_575A
 ||

3395 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_575B
 ||

3396 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_575C
 ||

3397 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_656B
 ||

3398 
sc
->
devi˚ID
 =
TC_DEVICEID_TORNADO_656C
)

3399 
sc
->
xl_Êags
 |
XL_FLAG_FUNCREG
 | 
XL_FLAG_PHYOK
 |

3400 
XL_FLAG_EEPROM_OFFSET_30
 | 
XL_FLAG_8BITROM
;

3401 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_656
)

3402 
sc
->
xl_Êags
 |
XL_FLAG_FUNCREG
 | 
XL_FLAG_PHYOK
;

3403 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_575B
)

3404 
sc
->
xl_Êags
 |
XL_FLAG_INVERT_LED_PWR
;

3405 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_575C
)

3406 
sc
->
xl_Êags
 |
XL_FLAG_INVERT_MII_PWR
;

3407 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_TORNADO_656C
)

3408 
sc
->
xl_Êags
 |
XL_FLAG_INVERT_MII_PWR
;

3409 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_656
 ||

3410 
sc
->
devi˚ID
 =
TC_DEVICEID_HURRICANE_656B
)

3411 
sc
->
xl_Êags
 |
XL_FLAG_INVERT_MII_PWR
 |

3412 
XL_FLAG_INVERT_LED_PWR
;

3413 i‡(
sc
->
devi˚ID
 =
TC_DEVICEID_TORNADO_10_100BT_920B
)

3414 
sc
->
xl_Êags
 |
XL_FLAG_PHYOK
;

3417 i‡(
c⁄fig
->
h¨dw¨e_addªss
)

3419 
	`mem˝y
(
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

3423 i‡(
	`xl_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, 
XL_EE_OEM_ADR0
, 3, 1))

3425 
	`¥ötk
("ëhîlök : unôÉ k%d FaûedÅÿªad sèti⁄áddªss\n", 
sc
->
xl_unô
 );

3428 
	`mem˝y
((*)&
sc
->
¨pcom
.
ac_íaddr
, 
óddr
, 
ETHER_ADDR_LEN
);

3436 
	`xl_ªad_ì¥om
(
sc
, (
ˇddr_t
)&sc->
xl_ˇps
, 
XL_EE_CAPS
, 1, 0);

3437 i‡(
sc
->
xl_ˇps
 & 
XL_CAPS_NO_TXLENGTH
)

3438 
sc
->
xl_ty≥
 = 
XL_TYPE_905B
;

3440 
sc
->
xl_ty≥
 = 
XL_TYPE_90X
;

3448 
	`XL_SEL_WIN
(3);

3449 
sc
->
xl_medü
 = 
	`CSR_READ_2
(sc, 
XL_W3_MEDIA_OPT
);

3451 
	`xl_ªad_ì¥om
(
sc
, (*)&
xcvr
, 
XL_EE_ICFG_0
, 2, 0);

3452 
sc
->
xl_xcvr
 = 
xcvr
[0] | xcvr[1] << 16;

3453 
sc
->
xl_xcvr
 &
XL_ICFG_CONNECTOR_MASK
;

3454 
sc
->
xl_xcvr
 >>
XL_ICFG_CONNECTOR_BITS
;

3457 
	`¥ötk
("ëhîlök : unôÉ k%d EEPROM së xcv∏tÿ0x%x\n", 
sc
->
xl_unô
, sc->
xl_xcvr
);

3461 
msg
[255];

3462 
i
;

3464 
	s_avaûmedü


3466 
bô
;

3467 *
«me
;

3468 } 
_am
[]{{ 
XL_MEDIAOPT_BT4
, "100BaseT4" },

3469 { 
XL_MEDIAOPT_BTX
, "100BaseTX" },

3470 { 
XL_MEDIAOPT_BFX
, "100BaseFX" },

3471 { 
XL_MEDIAOPT_BT
, "10BaseT" },

3472 { 
XL_MEDIAOPT_BNC
, "10Base2" },

3473 { 
XL_MEDIAOPT_AUI
, "10mbps AUI"},

3474 { 
XL_MEDIAOPT_MII
, "MII"},

3475 { 0, 
NULL
 }};

3477 
msg
[0]= 0;

3478  
i
=0; 
_am
[i].
bô
; i++)

3480 if–
sc
->
xl_medü
 & 
_am
[
i
].
bô
 )

3481 
	`•rötf
–&
msg
[
	`°æí
(msg)], ",%s", 
_am
[
i
].
«me
 );

3483 if–!
	`°æí
(
msg
ËË
	`°r˝y
( &msg[1], "<no media bits>");

3485 
	`¥ötk
("ëhîlök : unôÉ k%dávaûabÀ medü : %s\n", 
sc
->
xl_unô
, &
msg
[1]);

3488 
	`XL_SEL_WIN
(7);

3496 
iÂ
->
if_so·c
 = 
sc
;

3497 
iÂ
->
if_«me
 = 
unôName
;

3498 
iÂ
->
if_unô
 = 
sc
->
xl_unô
;

3499 
iÂ
->
if_mtu
 = 
mtu
;

3500 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

3501 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

3502 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

3503 
iÂ
->
if_öô
 = 
ñnk_öô
;

3504 
iÂ
->
if_°¨t
 = 
ñnk_°¨t
;

3505 
iÂ
->
if_io˘l
 = 
ñnk_io˘l
;

3506 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

3509 
iÂ
->
if_èp
 = 
i·≠
;

3515 
	`if_©èch
 (
iÂ
);

3516 
	`ëhî_iÁâach
 (
iÂ
);

3518 #ifde‡
ELNK_DEBUG


3519 
	`¥ötk
–"ëhîlök : unôÉ k%d drivîáâached\n", 
sc
->
xl_unô
 );

3525 i‡(
txD´m⁄Tid
 == 0)

3527 if–
	`πems_mesßge_queue_¸óã
–
	`πems_buûd_«me
('X','L','c','r'),

3528 
sc
->
numTxbuf„rs
+1,

3529 (
TXMD
 *),

3530 
RTEMS_FIFO
 | 
RTEMS_LOCAL
,

3531 &
chaöRecovîyQueue
 ) !
RTEMS_SUCCESSFUL
 )

3533 
	`πems_∑nic
( "etherlink : UnableÅo create TX bufferÑecovery queue\n" );

3537 
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
( "XLrx", 4096,

3538 
ñnk_rxD´m⁄
, 
NULL
);

3540 
txD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
( "XLtx", 4096,

3541 
ñnk_txD´m⁄
, 
NULL
);

3542 #ifde‡
ELNK_DEBUG


3543 
	`¥ötk
( "etherlink : driverÅasks created\n" );

3548 
	}
};

	@src/libchip/network/greth.c

12 
	~<πems.h
>

13 
	~<b•.h
>

15 #ifde‡
GRETH_SUPPORTED


17 
	~<öây≥s.h
>

18 
	~<î∫o.h
>

19 
	~<πems/b•Io.h
>

20 
	~<°dlib.h
>

21 
	~<°dio.h
>

22 
	~<°d¨g.h
>

23 
	~<πems/îr‹.h
>

24 
	~<πems/πems_bsd√t.h
>

25 
	~"gªth.h
"

27 
	~<sys/∑øm.h
>

28 
	~<sys/mbuf.h
>

30 
	~<sys/sockë.h
>

31 
	~<sys/sockio.h
>

32 
	~<√t/if.h
>

33 
	~<√töë/ö.h
>

34 
	~<√töë/if_ëhî.h
>

36 #ifde‡
mÆloc


37 #unde‡
mÆloc


39 #ifde‡
‰ì


40 #unde‡
‰ì


45 #ifde‡
CPU_U32_FIX


46 
ùÆign
(
mbuf
 *
m
);

50 #i‚de‡
GRETH_MEM_LOAD


51 
	#GRETH_MEM_LOAD
(
addr
Ë(*(vﬁ©ûê*)◊ddr))

	)

57 
	#NOCDRIVER
 1

	)

62 
	#RBUF_SIZE
 1518

	)

64 
	#ET_MINLEN
 64

	)

70 
	#INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

76 
	#START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

79 
	#GRETH_TX_WAIT_EVENT
 
RTEMS_EVENT_3


	)

81 #i‡(
MCLBYTES
 < 
RBUF_SIZE
)

86 #i‚de‡
GRETH_AUTONEGO_TIMEOUT_MS


87 
	#GRETH_AUTONEGO_TIMEOUT_MS
 4000

	)

89 c⁄° 
time•ec
 
	ggªth_èn
 = {

90 
GRETH_AUTONEGO_TIMEOUT_MS
/1000,

91 (
GRETH_AUTONEGO_TIMEOUT_MS
 % 1000) *1000000

95 
	#GRETH_AUTONEGO_PRINT_TIME


	)

99 
	s_gªth_rxtxdesc
 {

100 vﬁ©ûê
uöt32_t
 
	m˘æ
;

101 
uöt32_t
 *
	maddr
;

102 } 
	tgªth_rxtxdesc
;

108 
	sgªth_so·c


111 
¨pcom
 
	m¨pcom
;

113 
gªth_ªgs
 *
	mªgs
;

115 
	mac˚±Brﬂdˇ°
;

116 
πems_id
 
	md´m⁄Tid
;

118 
	mtx_±r
;

119 
	mtx_d±r
;

120 
	mtx_˙t
;

121 
	mrx_±r
;

122 
	mtxbufs
;

123 
	mrxbufs
;

124 
gªth_rxtxdesc
 *
	mtxdesc
;

125 
gªth_rxtxdesc
 *
	mrxdesc
;

126 
mbuf
 **
	mrxmbuf
;

127 
mbuf
 **
	mtxmbuf
;

128 
πems_ve˘‹_numbî
 
	mve˘‹
;

131 
	mtx_öt_gí
;

132 
	mtx_öt_gí_cur
;

133 
mbuf
 *
	m√xt_tx_mbuf
;

134 
	mmax_‰agsize
;

137 
phy_devi˚_öfo
 
	mphydev
;

138 
	mfd
;

139 
	m•
;

140 
	mgb
;

141 
	mgbô_mac
;

142 
	mauto_√g
;

143 
time•ec
 
	mauto_√g_time
;

148 
	mrxI¡îru±s
;

150 
	mrxPackës
;

151 
	mrxLígthEº‹
;

152 
	mrxN⁄O˘ë
;

153 
	mrxBadCRC
;

154 
	mrxOvîrun
;

156 
	mtxI¡îru±s
;

158 
	mtxDe„ºed
;

159 
	mtxHóπbót
;

160 
	mtxL©eCﬁlisi⁄
;

161 
	mtxRëryLimô
;

162 
	mtxUndîrun
;

166 
gªth_so·c
 
	ggªth
;

168 
gªth_¥o˚ss_tx_gbô
(
gªth_so·c
 *
sc
);

169 
gªth_¥o˚ss_tx
(
gªth_so·c
 *
sc
);

171 *
	$ÆmÆloc
(
sz
)

173 *
tmp
;

174 
tmp
 = 
	`ˇŒoc
(1,2*
sz
);

175 
tmp
 = (*Ë(((
uöçå_t
Èmp+
sz
) & ~(sz -1));

176 (
tmp
);

177 
	}
}

181 
	$gªth_öãºu±_h™dÀr
 (*
¨g
)

183 
uöt32_t
 
°©us
;

184 
uöt32_t
 
˘æ
;

185 
πems_evít_£t
 
evíts
 = 0;

186 
gªth_so·c
 *
gªth
 = 
¨g
;

189 
°©us
 = 
gªth
->
ªgs
->status;

190 
gªth
->
ªgs
->
°©us
 = status;

191 
˘æ
 = 
gªth
->
ªgs
->ctrl;

194 i‡((
˘æ
 & 
GRETH_CTRL_RXIRQ
Ë&& (
°©us
 & (
GRETH_STATUS_RXERR
 | 
GRETH_STATUS_RXIRQ
)))

196 
gªth
->
rxI¡îru±s
++;

198 
˘æ
 &~
GRETH_CTRL_RXIRQ
;

199 
evíts
 |
INTERRUPT_EVENT
;

202 i‡–(
˘æ
 & 
GRETH_CTRL_TXIRQ
Ë&& (
°©us
 & (
GRETH_STATUS_TXERR
 | 
GRETH_STATUS_TXIRQ
)) )

204 
gªth
->
txI¡îru±s
++;

205 
˘æ
 &~
GRETH_CTRL_TXIRQ
;

206 
evíts
 |
GRETH_TX_WAIT_EVENT
;

210 
gªth
->
ªgs
->
˘æ
 = ctrl;

213 i‡–
evíts
 )

214 
	`πems_bsd√t_evít_£nd
 (
gªth
->
d´m⁄Tid
, 
evíts
);

215 
	}
}

217 
uöt32_t
 
	$ªad_mii
(
uöt32_t
 
phy_addr
, uöt32_à
ªg_addr
)

219 
gªth
.
ªgs
->
mdio_˘æ
 & 
GRETH_MDIO_BUSY
) {}

220 
gªth
.
ªgs
->
mdio_˘æ
 = (
phy_addr
 << 11Ë| (
ªg_addr
 << 6Ë| 
GRETH_MDIO_READ
;

221 
gªth
.
ªgs
->
mdio_˘æ
 & 
GRETH_MDIO_BUSY
) {}

222 i‡(!(
gªth
.
ªgs
->
mdio_˘æ
 & 
GRETH_MDIO_LINKFAIL
))

223 ((
gªth
.
ªgs
->
mdio_˘æ
 >> 16) & 0xFFFF);

225 
	`¥ötf
("greth: failedÅoÑead mii\n");

228 
	}
}

230 
	$wrôe_mii
(
uöt32_t
 
phy_addr
, uöt32_à
ªg_addr
, uöt32_à
d©a
)

232 
gªth
.
ªgs
->
mdio_˘æ
 & 
GRETH_MDIO_BUSY
) {}

233 
gªth
.
ªgs
->
mdio_˘æ
 =

234 ((
d©a
 & 0xFFFFË<< 16Ë| (
phy_addr
 << 11Ë| (
ªg_addr
 << 6Ë| 
GRETH_MDIO_WRITE
;

235 
gªth
.
ªgs
->
mdio_˘æ
 & 
GRETH_MDIO_BUSY
) {}

236 
	}
}

238 
	$¥öt_öô_öfo
(
gªth_so·c
 *
sc
)

240 
	`¥ötf
("greth: driveráttached\n");

241 i‡–
sc
->
auto_√g
 == -1 ){

242 
	`¥ötf
("AutoÇegotiationÅimed out. Selecting default config\n");

244 
	`¥ötf
("**** PHY ****\n");

245 
	`¥ötf
("Víd‹: %x Devi˚: %x Revisi⁄: %d\n",
sc
->
phydev
.
víd‹
, sc->phydev.
devi˚
, sc->phydev.
ªv
);

246 
	`¥ötf
("Current Operating Mode: ");

247 i‡(
sc
->
gb
) {

248 
	`¥ötf
("1000 Mbit ");

249 } i‡(
sc
->
•
) {

250 
	`¥ötf
("100 Mbit ");

252 
	`¥ötf
("10 Mbit ");

254 i‡(
sc
->
fd
) {

255 
	`¥ötf
("Full Duplex\n");

257 
	`¥ötf
("Half Duplex\n");

259 #ifde‡
GRETH_AUTONEGO_PRINT_TIME


260 i‡–
sc
->
auto_√g
 ) {

261 
	`¥ötf
("Aut⁄egŸüti⁄ Time: %ldms\n", 
sc
->
auto_√g_time
.
tv_£c
*1000 +

262 
sc
->
auto_√g_time
.
tv_n£c
/1000000);

265 
	}
}

272 
	$gªth_öôülize_h¨dw¨e
 (
gªth_so·c
 *
sc
)

274 
mbuf
 *
m
;

275 
i
;

276 
phyaddr
;

277 
phy˘æ
;

278 
phy°©us
;

279 
tmp1
;

280 
tmp2
;

281 
time•ec
 
t°¨t
, 
äow
;

283 
gªth_ªgs
 *
ªgs
;

285 
ªgs
 = 
sc
->regs;

288 
gªth
.
rxI¡îru±s
 = 0;

289 
gªth
.
rxPackës
 = 0;

291 
ªgs
->
˘æ
 = 0;

292 
ªgs
->
˘æ
 = 
GRETH_CTRL_RST
;

293 
ªgs
->
˘æ
 = 0;

296 
sc
->
gbô_mac
 = (
ªgs
->
˘æ
 >> 27) & 1;

300 
phyaddr
 = (
ªgs
->
mdio_˘æ
 >> 11) & 0x1F;

303 (
phy˘æ
 = 
	`ªad_mii
(
phyaddr
, 0)) & 0x8000) {}

306 
	`wrôe_mii
(
phyaddr
, 0, 0x8000 | 
phy˘æ
);

308 (
	`ªad_mii
(
phyaddr
, 0)) & 0x8000) {}

309 
phy°©us
 = 
	`ªad_mii
(
phyaddr
, 1);

313 i‡((!
sc
->
gbô_mac
Ë&& (
phy°©us
 & 0x100)Ë
	`wrôe_mii
(
phyaddr
, 9, 0);

316 i‡(
phy°©us
 & 0x08) {

317 
	`wrôe_mii
(
phyaddr
, 0, 
phy˘æ
 | 0x1200);

318 
phy˘æ
 = 
	`ªad_mii
(
phyaddr
, 0);

323 
sc
->
gb
 = 0;

324 
sc
->
fd
 = 0;

325 
sc
->
•
 = 0;

326 
sc
->
auto_√g
 = 0;

327 
	`_Time•ec_Së_to_zîo
(&
sc
->
auto_√g_time
);

328 i‡((
phy˘æ
 >> 12) & 1) {

330 
sc
->
auto_√g
 = 1;

331 i‡(
	`πems_˛ock_gë_u±ime
(&
t°¨t
Ë!
RTEMS_SUCCESSFUL
)

332 
	`¥ötk
("rtems_clock_get_uptime failed\n");

333 !(((
phy°©us
 = 
	`ªad_mii
(
phyaddr
, 1)) >> 5) & 1)) {

334 i‡(
	`πems_˛ock_gë_u±ime
(&
äow
Ë!
RTEMS_SUCCESSFUL
)

335 
	`¥ötk
("rtems_clock_get_uptime failed\n");

336 
	`_Time•ec_Subåa˘
(&
t°¨t
, &
äow
, &
sc
->
auto_√g_time
);

337 i‡(
	`_Time•ec_Gª©î_th™
(&
sc
->
auto_√g_time
, &
gªth_èn
)) {

338 
sc
->
auto_√g
 = -1;

339 
tmp1
 = 
	`ªad_mii
(
phyaddr
, 0);

340 
sc
->
gb
 = ((
phy˘æ
 >> 6) & 1) && !((phyctrl >> 13) & 1);

341 
sc
->
•
 = !((
phy˘æ
 >> 6) & 1) && ((phyctrl >> 13) & 1);

342 
sc
->
fd
 = (
phy˘æ
 >> 8) & 1;

343 
auto_√g_d⁄e
;

346 
	`πems_èsk_wake_a·î
(
	`πems_˛ock_gë_ticks_≥r_£c⁄d
()/32);

348 
sc
->
phydev
.
adv
 = 
	`ªad_mii
(
phyaddr
, 4);

349 
sc
->
phydev
.
∑π
 = 
	`ªad_mii
(
phyaddr
, 5);

350 i‡((
phy°©us
 >> 8) & 1) {

351 
sc
->
phydev
.
exèdv
 = 
	`ªad_mii
(
phyaddr
, 9);

352 
sc
->
phydev
.
exç¨t
 = 
	`ªad_mii
(
phyaddr
, 10);

353 i‡–(
sc
->
phydev
.
exèdv
 & 
GRETH_MII_EXTADV_1000FD
) &&

354 (
sc
->
phydev
.
exç¨t
 & 
GRETH_MII_EXTPRT_1000FD
)) {

355 
sc
->
gb
 = 1;

356 
sc
->
fd
 = 1;

358 i‡–(
sc
->
phydev
.
exèdv
 & 
GRETH_MII_EXTADV_1000HD
) &&

359 (
sc
->
phydev
.
exç¨t
 & 
GRETH_MII_EXTPRT_1000HD
)) {

360 
sc
->
gb
 = 1;

361 
sc
->
fd
 = 0;

364 i‡((
sc
->
gb
 =0Ë|| ((sc->gb =1Ë&& (sc->
gbô_mac
 == 0))) {

365 i‡–(
sc
->
phydev
.
adv
 & 
GRETH_MII_100TXFD
) &&

366 (
sc
->
phydev
.
∑π
 & 
GRETH_MII_100TXFD
)) {

367 
sc
->
•
 = 1;

368 
sc
->
fd
 = 1;

370 i‡–(
sc
->
phydev
.
adv
 & 
GRETH_MII_100TXHD
) &&

371 (
sc
->
phydev
.
∑π
 & 
GRETH_MII_100TXHD
)) {

372 
sc
->
•
 = 1;

373 
sc
->
fd
 = 0;

375 i‡–(
sc
->
phydev
.
adv
 & 
GRETH_MII_10FD
) &&

376 (
sc
->
phydev
.
∑π
 & 
GRETH_MII_10FD
)) {

377 
sc
->
fd
 = 1;

381 
auto_√g_d⁄e
:

382 
sc
->
phydev
.
víd‹
 = 0;

383 
sc
->
phydev
.
devi˚
 = 0;

384 
sc
->
phydev
.
ªv
 = 0;

385 
phy°©us
 = 
	`ªad_mii
(
phyaddr
, 1);

388 i‡(
phy°©us
 & 1) {

389 
tmp1
 = 
	`ªad_mii
(
phyaddr
, 2);

390 
tmp2
 = 
	`ªad_mii
(
phyaddr
, 3);

392 
sc
->
phydev
.
víd‹
 = (
tmp1
 << 6Ë| ((
tmp2
 >> 10) & 0x3F);

393 
sc
->
phydev
.
ªv
 = 
tmp2
 & 0xF;

394 
sc
->
phydev
.
devi˚
 = (
tmp2
 >> 4) & 0x3F;

399 i‡((
phy°©us
 & 1Ë&& (
sc
->
phydev
.
víd‹
 =0x005043Ë&& (sc->phydev.
devi˚
 == 0x0C)) {

400 i‡(((
sc
->
gb
Ë&& !(sc->
gbô_mac
)Ë|| !((
phy˘æ
 >> 12) & 1)) {

401 
	`wrôe_mii
(
phyaddr
, 0, 
sc
->
•
 << 13);

402 
	`wrôe_mii
(
phyaddr
, 0, 0x8000);

403 
sc
->
gb
 = 0;

404 
sc
->
•
 = 0;

405 
sc
->
fd
 = 0;

408 i‡(((
sc
->
gb
Ë&& !(sc->
gbô_mac
)Ë|| !((
phy˘æ
 >> 12) & 1)) {

409 
	`wrôe_mii
(
phyaddr
, 0, 
sc
->
•
 << 13);

410 
sc
->
gb
 = 0;

411 
sc
->
•
 = 0;

412 
sc
->
fd
 = 0;

415 (
	`ªad_mii
(
phyaddr
, 0)) & 0x8000) {}

417 
ªgs
->
˘æ
 = 0;

418 
ªgs
->
˘æ
 = 
GRETH_CTRL_RST
;

419 
ªgs
->
˘æ
 = 0;

422 
sc
->
txdesc
 = (
gªth_rxtxdesc
 *Ë
	`ÆmÆloc
(1024);

423 
sc
->
rxdesc
 = (
gªth_rxtxdesc
 *Ë
	`ÆmÆloc
(1024);

424 
sc
->
tx_±r
 = 0;

425 
sc
->
tx_d±r
 = 0;

426 
sc
->
tx_˙t
 = 0;

427 
sc
->
rx_±r
 = 0;

428 
ªgs
->
txdesc
 = (
uöçå_t
Ë
sc
->txdesc;

429 
ªgs
->
rxdesc
 = (
uöçå_t
Ë
sc
->rxdesc;

431 
sc
->
rxmbuf
 = 
	`ˇŒoc
(sc->
rxbufs
, (*sc->rxmbuf));

432 
sc
->
txmbuf
 = 
	`ˇŒoc
(sc->
txbufs
, (*sc->txmbuf));

434 
i
 = 0; i < 
sc
->
txbufs
; i++)

436 
sc
->
txdesc
[
i
].
˘æ
 = 0;

437 i‡(!(
sc
->
gbô_mac
)) {

438 
sc
->
txdesc
[
i
].
addr
 = 
	`mÆloc
(
GRETH_MAXBUF_LEN
);

440 #ifde‡
GRETH_DEBUG


444 
i
 = 0; i < 
sc
->
rxbufs
; i++)

447 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

448 
	`MCLGET
 (
m
, 
M_WAIT
);

449 i‡(
sc
->
gbô_mac
)

450 
m
->
m_d©a
 += 2;

451 
m
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

452 
sc
->
rxmbuf
[
i
] = 
m
;

453 
sc
->
rxdesc
[
i
].
addr
 = (
uöt32_t
 *Ë
	`mtod
(
m
, uint32_t *);

454 
sc
->
rxdesc
[
i
].
˘æ
 = 
GRETH_RXD_ENABLE
 | 
GRETH_RXD_IRQ
;

455 #ifde‡
GRETH_DEBUG


459 
sc
->
rxdesc
[sc->
rxbufs
 - 1].
˘æ
 |
GRETH_RXD_WRAP
;

462 
ªgs
->
mac_addr_msb
 =

463 
sc
->
¨pcom
.
ac_íaddr
[0] << 8 | sc->arpcom.ac_enaddr[1];

465 
uöt32_t
 
mac_addr_lsb
;

466 
mac_addr_lsb
 = 
sc
->
¨pcom
.
ac_íaddr
[2];

467 
mac_addr_lsb
 <<= 8;

468 
mac_addr_lsb
 |
sc
->
¨pcom
.
ac_íaddr
[3];

469 
mac_addr_lsb
 <<= 8;

470 
mac_addr_lsb
 |
sc
->
¨pcom
.
ac_íaddr
[4];

471 
mac_addr_lsb
 <<= 8;

472 
mac_addr_lsb
 |
sc
->
¨pcom
.
ac_íaddr
[5];

473 
ªgs
->
mac_addr_lsb
 = mac_addr_lsb;

475 i‡–
sc
->
rxbufs
 < 10 ) {

476 
sc
->
tx_öt_gí
 = sc->
tx_öt_gí_cur
 = 1;

478 
sc
->
tx_öt_gí
 = sc->
tx_öt_gí_cur
 = sc->
txbufs
/2;

480 
sc
->
√xt_tx_mbuf
 = 
NULL
;

482 i‡–!
sc
->
gbô_mac
 )

483 
sc
->
max_‰agsize
 = 1;

486 
ªgs
->
°©us
 = 0xffffffff;

489 
	`πems_öãºu±_h™dÀr_ö°Æl
(
sc
->
ve˘‹
, "gªth", 
RTEMS_INTERRUPT_SHARED
,

490 
gªth_öãºu±_h™dÀr
, 
sc
);

492 
ªgs
->
˘æ
 |
GRETH_CTRL_RXEN
 | (
sc
->
fd
 << 4Ë| 
GRETH_CTRL_RXIRQ
 | (sc->
•
 << 7Ë| (sc->
gb
 << 8);

494 
	`¥öt_öô_öfo
(
sc
);

495 
	}
}

497 #ifde‡
CPU_U32_FIX


509 
	$ùÆign
(
mbuf
 *
m
)

511 *
fú°
, *
œ°
, 
d©a
;

512 
tmp
;

514 i‡((((Ë
m
->
m_d©a
Ë& 2Ë&& (m->
m_Àn
)) {

515 
œ°
 = (*Ë((((Ë
m
->
m_d©a
Ë+ m->
m_Àn
 + 8) & ~3);

516 
fú°
 = (*Ë(((Ë
m
->
m_d©a
) & ~3);

517 
tmp
 = 
	`GRETH_MEM_LOAD
(
fú°
);

518 
tmp
 =Åmp << 16;

519 
fú°
++;

525 
d©a
 = 
	`GRETH_MEM_LOAD
(
fú°
);

526 *
fú°
 = 
tmp
 | (
d©a
 >> 16);

527 
tmp
 = 
d©a
 << 16;

528 
fú°
++;

529 } 
fú°
 <
œ°
);

531 
m
->
m_d©a
 = (
ˇddr_t
)((() m->m_data) + 2);

533 
	}
}

537 
	$gªth_D´m⁄
 (*
¨g
)

539 
ëhî_hódî
 *
eh
;

540 
gªth_so·c
 *
dp
 = (gªth_so·¯*Ë&
gªth
;

541 
i‚ë
 *
iÂ
 = &
dp
->
¨pcom
.
ac_if
;

542 
mbuf
 *
m
;

543 
Àn
, 
Àn_°©us
, 
bad
;

544 
πems_evít_£t
 
evíts
;

545 
πems_öãºu±_Àvñ
 
Àvñ
;

546 
fú°
;

547 #ifde‡
CPU_U32_FIX


548 
tmp
;

553 
	`πems_bsd√t_evít_ª˚ive
 (
INTERRUPT_EVENT
 | 
GRETH_TX_WAIT_EVENT
,

554 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

555 
RTEMS_NO_TIMEOUT
, &
evíts
);

557 i‡–
evíts
 & 
GRETH_TX_WAIT_EVENT
 ){

562 i‡–
dp
->
gbô_mac
 )

563 
	`gªth_¥o˚ss_tx_gbô
(
dp
);

565 
	`gªth_¥o˚ss_tx
(
dp
);

568 i‡–(
evíts
 & 
INTERRUPT_EVENT
) == 0 )

572 #ifde‡
GRETH_ETH_DEBUG


573 
	`¥ötf
 ("r\n");

575 
fú°
=1;

577 
agaö
:

578 !((
Àn_°©us
 =

579 
	`GRETH_MEM_LOAD
(&
dp
->
rxdesc
[dp->
rx_±r
].
˘æ
)Ë& 
GRETH_RXD_ENABLE
))

581 
bad
 = 0;

582 i‡(
Àn_°©us
 & 
GRETH_RXD_TOOLONG
)

584 
dp
->
rxLígthEº‹
++;

585 
bad
 = 1;

587 i‡(
Àn_°©us
 & 
GRETH_RXD_DRIBBLE
)

589 
dp
->
rxN⁄O˘ë
++;

590 
bad
 = 1;

592 i‡(
Àn_°©us
 & 
GRETH_RXD_CRCERR
)

594 
dp
->
rxBadCRC
++;

595 
bad
 = 1;

597 i‡(
Àn_°©us
 & 
GRETH_RXD_OVERRUN
)

599 
dp
->
rxOvîrun
++;

600 
bad
 = 1;

602 i‡(
Àn_°©us
 & 
GRETH_RXD_LENERR
)

604 
dp
->
rxLígthEº‹
++;

605 
bad
 = 1;

607 i‡(!
bad
)

610 
Àn
 = 
Àn_°©us
 & 0x7FF;

611 
m
 = 
dp
->
rxmbuf
[dp->
rx_±r
];

612 #ifde‡
GRETH_DEBUG


613 
i
;

614 
	`¥ötf
("RX: 0x%08x, Lí: %d : ", (Ë
m
->
m_d©a
, 
Àn
);

615 
i
=0; i<
Àn
; i++)

616 
	`¥ötf
("%x%x", (
m
->
m_d©a
[
i
] >> 4) & 0x0ff, m->m_data[i] & 0x0ff);

617 
	`¥ötf
("\n");

619 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 =

620 
Àn
 -  (
ëhî_hódî
);

622 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

624 
m
->
m_d©a
 + (
ëhî_hódî
);

625 #ifde‡
CPU_U32_FIX


626 if(!
dp
->
gbô_mac
) {

628 
tmp
 = 
	`GRETH_MEM_LOAD
((
uöçå_t
)
eh
);

629 
tmp
 = 
	`GRETH_MEM_LOAD
(4+(
uöçå_t
)
eh
);

630 
tmp
 = 
	`GRETH_MEM_LOAD
(8+(
uöçå_t
)
eh
);

631 
tmp
 = 
	`GRETH_MEM_LOAD
(12+(
uöçå_t
)
eh
);

632 ()
tmp
;

633 
	`ùÆign
(
m
);

637 
	`ëhî_öput
 (
iÂ
, 
eh
, 
m
);

638 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

639 
	`MCLGET
 (
m
, 
M_WAIT
);

640 i‡(
dp
->
gbô_mac
)

641 
m
->
m_d©a
 += 2;

642 
dp
->
rxmbuf
[dp->
rx_±r
] = 
m
;

643 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

644 
dp
->
rxdesc
[dp->
rx_±r
].
addr
 =

645 (
uöt32_t
 *Ë
	`mtod
 (
m
, uint32_t *);

646 
dp
->
rxPackës
++;

648 i‡(
dp
->
rx_±r
 =dp->
rxbufs
 - 1) {

649 
dp
->
rxdesc
[dp->
rx_±r
].
˘æ
 = 
GRETH_RXD_ENABLE
 | 
GRETH_RXD_IRQ
 | 
GRETH_RXD_WRAP
;

651 
dp
->
rxdesc
[dp->
rx_±r
].
˘æ
 = 
GRETH_RXD_ENABLE
 | 
GRETH_RXD_IRQ
;

653 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

654 
dp
->
ªgs
->
˘æ
 |
GRETH_CTRL_RXEN
;

655 
	`πems_öãºu±_íabÀ
(
Àvñ
);

656 
dp
->
rx_±r
 = (dp->rx_±∏+ 1Ë% dp->
rxbufs
;

660 i‡–
fú°
 ){

661 
fú°
=0;

662 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

663 
dp
->
ªgs
->
˘æ
 |
GRETH_CTRL_RXIRQ
;

664 
	`πems_öãºu±_íabÀ
(
Àvñ
);

665 
agaö
;

670 
	}
}

672 
	göside
 = 0;

674 
	$£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

676 
gªth_so·c
 *
dp
 = 
iÂ
->
if_so·c
;

677 *
ãmp
;

678 
mbuf
 *
n
;

679 
Àn
;

680 
πems_öãºu±_Àvñ
 
Àvñ
;

683 i‡(
öside
Ë
	`¥ötf
 ("error: sendpacketÑe-entered!!\n");

684 
öside
 = 1;

689 i‡(
	`GRETH_MEM_LOAD
(&
dp
->
txdesc
[dp->
tx_±r
].
˘æ
Ë& 
GRETH_TXD_ENABLE
){

691 
öside
 = 0;

696 
n
 = 
m
;

698 
Àn
 = 0;

699 
ãmp
 = (*Ë
	`GRETH_MEM_LOAD
(&
dp
->
txdesc
[dp->
tx_±r
].
addr
);

700 #ifde‡
GRETH_DEBUG


701 
	`¥ötf
("TXD: 0x%08x : BUF: 0x%08x\n", (Ë
m
->
m_d©a
, (Ë
ãmp
);

705 #ifde‡
GRETH_DEBUG


706 
i
;

707 
	`¥ötf
("MBUF: 0x%08x : ", (Ë
m
->
m_d©a
);

708 
i
=0;i<
m
->
m_Àn
;i++)

709 
	`¥ötf
("%x%x", (
m
->
m_d©a
[
i
] >> 4) & 0x0ff, m->m_data[i] & 0x0ff);

710 
	`¥ötf
("\n");

712 
Àn
 +
m
->
m_Àn
;

713 i‡(
Àn
 <
RBUF_SIZE
)

714 
	`mem˝y
 ((*Ë
ãmp
, (*Ë
m
->
m_d©a
, m->
m_Àn
);

715 
ãmp
 +
m
->
m_Àn
;

716 i‡((
m
 = m->
m_√xt
Ë=
NULL
)

720 
	`m_‰ìm
 (
n
);

724 i‡(
Àn
 <
GRETH_MAXBUF_LEN
) {

725 i‡(
dp
->
tx_±r
 < dp->
txbufs
-1) {

726 
dp
->
txdesc
[dp->
tx_±r
].
˘æ
 = 
GRETH_TXD_ENABLE
 | 
Àn
;

728 
dp
->
txdesc
[dp->
tx_±r
].
˘æ
 =

729 
GRETH_TXD_WRAP
 | 
GRETH_TXD_ENABLE
 | 
Àn
;

731 
dp
->
tx_±r
 = (dp->tx_±∏+ 1Ë% dp->
txbufs
;

732 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

733 
dp
->
ªgs
->
˘æ
 = dp->ªgs->˘æ | 
GRETH_CTRL_TXEN
;

734 
	`πems_öãºu±_íabÀ
(
Àvñ
);

737 
öside
 = 0;

740 
	}
}

744 
	$£nd∑ckë_gbô
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

746 
gªth_so·c
 *
dp
 = 
iÂ
->
if_so·c
;

747 
Àn
;

749 
˘æ
;

750 
‰ags
;

751 
mbuf
 *
mtmp
;

752 
öt_í
;

753 
πems_öãºu±_Àvñ
 
Àvñ
;

755 i‡(
öside
Ë
	`¥ötf
 ("error: sendpacketÑe-entered!!\n");

756 
öside
 = 1;

758 
Àn
 = 0;

759 #ifde‡
GRETH_DEBUG


760 
	`¥ötf
("TXD: 0x%08x\n", (Ë
m
->
m_d©a
);

765 
‰ags
=1;

766 
mtmp
=
m
;

767 
mtmp
->
m_√xt
){

768 
‰ags
++;

769 
mtmp
 = mtmp->
m_√xt
;

772 i‡–
‰ags
 > 
dp
->
max_‰agsize
 )

773 
dp
->
max_‰agsize
 = 
‰ags
;

775 i‡–
‰ags
 > 
dp
->
txbufs
 ){

776 
öside
 = 0;

777 
	`¥ötf
("GRETH: MBUF-chain cannot be sent. Increase descriptor count.\n");

781 i‡–
‰ags
 > (
dp
->
txbufs
-dp->
tx_˙t
) ){

782 
öside
 = 0;

784  
‰ags
;

793 
dp
->
tx_öt_gí_cur
-=
‰ags
;

794 i‡–
dp
->
tx_öt_gí_cur
 <= 0 ){

795 
dp
->
tx_öt_gí_cur
 = dp->
tx_öt_gí
;

796 
öt_í
 = 
GRETH_TXD_IRQ
;

798 
öt_í
 = 0;

805 #ifde‡
GRETH_DEBUG


806 
i
;

807 
	`¥ötf
("MBUF: 0x%08x, Lí: %d : ", (Ë
m
->
m_d©a
, m->
m_Àn
);

808 
i
=0; i<
m
->
m_Àn
; i++)

809 
	`¥ötf
("%x%x", (
m
->
m_d©a
[
i
] >> 4) & 0x0ff, m->m_data[i] & 0x0ff);

810 
	`¥ötf
("\n");

812 
Àn
 +
m
->
m_Àn
;

813 
dp
->
txdesc
[dp->
tx_±r
].
addr
 = (
uöt32_t
 *)
m
->
m_d©a
;

816 i‡(
dp
->
tx_±r
 < dp->
txbufs
-1) {

817 
˘æ
 = 
GRETH_TXD_ENABLE
;

819 
˘æ
 = 
GRETH_TXD_ENABLE
 | 
GRETH_TXD_WRAP
;

823 i‡((
m
->
m_√xt
Ë=
NULL
) {

824 
dp
->
txdesc
[dp->
tx_±r
].
˘æ
 = cå»| 
öt_í
 | 
m
->
m_Àn
;

827 
dp
->
txdesc
[dp->
tx_±r
].
˘æ
 = 
GRETH_TXD_MORE
 | cå»| 
öt_í
 | 
m
->
m_Àn
;

831 
dp
->
txmbuf
[dp->
tx_±r
] = 
m
;

832 
dp
->
tx_±r
 = (dp->tx_±∏+ 1Ë% dp->
txbufs
;

833 
dp
->
tx_˙t
++;

834 
m
 = m->
m_√xt
;

836 
dp
->
txmbuf
[dp->
tx_±r
] = 
m
;

837 
dp
->
tx_±r
 = (dp->tx_±∏+ 1Ë% dp->
txbufs
;

838 
dp
->
tx_˙t
++;

841 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

842 
dp
->
ªgs
->
˘æ
 = dp->ªgs->˘æ | 
GRETH_CTRL_TXEN
;

843 
	`πems_öãºu±_íabÀ
(
Àvñ
);

845 
öside
 = 0;

848 
	}
}

850 
	$gªth_¥o˚ss_tx_gbô
(
gªth_so·c
 *
sc
)

852 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

853 
mbuf
 *
m
;

854 
πems_öãºu±_Àvñ
 
Àvñ
;

855 
fú°
=1;

862 (
sc
->
tx_˙t
 > 0Ë&& !(
	`GRETH_MEM_LOAD
(&sc->
txdesc
[sc->
tx_d±r
].
˘æ
Ë& 
GRETH_TXD_ENABLE
)) {

863 
	`m_‰ì
(
sc
->
txmbuf
[sc->
tx_d±r
]);

864 
sc
->
tx_d±r
 = (sc->tx_d±∏+ 1Ë% sc->
txbufs
;

865 
sc
->
tx_˙t
--;

868 i‡–
sc
->
√xt_tx_mbuf
 ){

870 
m
 = 
sc
->
√xt_tx_mbuf
;

871 
sc
->
√xt_tx_mbuf
 = 
NULL
;

876 
	`IF_DEQUEUE
 (&
iÂ
->
if_¢d
, 
m
);

877 i‡(!
m
){

882 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

889 i‡–(
sc
->
tx_˙t
 >sc->
txbufs
Ë|| 
	`£nd∑ckë_gbô
(
iÂ
, 
m
) ){

896 
sc
->
√xt_tx_mbuf
 = 
m
;

902 i‡–
fú°
 ){

903 
fú°
 = 0;

904 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

905 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

906 
sc
->
ªgs
->
˘æ
 |
GRETH_CTRL_TXIRQ
;

907 
	`πems_öãºu±_íabÀ
(
Àvñ
);

922 
	}
}

924 
	$gªth_¥o˚ss_tx
(
gªth_so·c
 *
sc
)

926 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

927 
mbuf
 *
m
;

928 
πems_öãºu±_Àvñ
 
Àvñ
;

929 
fú°
=1;

935 i‡–
sc
->
√xt_tx_mbuf
 ){

937 
m
 = 
sc
->
√xt_tx_mbuf
;

938 
sc
->
√xt_tx_mbuf
 = 
NULL
;

943 
	`IF_DEQUEUE
 (&
iÂ
->
if_¢d
, 
m
);

944 i‡(!
m
){

949 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

955 i‡–
	`£nd∑ckë
(
iÂ
, 
m
) ){

962 
sc
->
√xt_tx_mbuf
 = 
m
;

968 i‡–
fú°
 ){

969 
fú°
 = 0;

970 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

971 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

972 
sc
->
ªgs
->
˘æ
 |
GRETH_CTRL_TXIRQ
;

973 
	`πems_öãºu±_íabÀ
(
Àvñ
);

988 
	}
}

991 
	$gªth_°¨t
 (
i‚ë
 *
iÂ
)

993 
gªth_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

995 i‡–
iÂ
->
if_Êags
 & 
IFF_OACTIVE
 )

998 i‡–
sc
->
gbô_mac
 ){

1003 
	`gªth_¥o˚ss_tx_gbô
(
sc
);

1005 
	`gªth_¥o˚ss_tx
(
sc
);

1007 
	}
}

1013 
	$gªth_öô
 (*
¨g
)

1015 
gªth_so·c
 *
sc
 = 
¨g
;

1016 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1018 i‡(
sc
->
d´m⁄Tid
 == 0) {

1023 
sc
->
d´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("DCrxtx", 4096,

1024 
gªth_D´m⁄
, 
sc
);

1029 
	`gªth_öôülize_h¨dw¨e
 (
sc
);

1036 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1037 
	}
}

1043 
	$gªth_°›
 (
gªth_so·c
 *
sc
)

1045 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1047 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

1049 
sc
->
ªgs
->
˘æ
 = 0;

1050 
sc
->
ªgs
->
˘æ
 = 
GRETH_CTRL_RST
;

1051 
sc
->
ªgs
->
˘æ
 = 0;

1053 
sc
->
√xt_tx_mbuf
 = 
NULL
;

1054 
	}
}

1061 
	$gªth_°©s
 (
gªth_so·c
 *
sc
)

1063 
	`¥ötf
 (" Rx I¡îru±s:%-8lu", 
sc
->
rxI¡îru±s
);

1064 
	`¥ötf
 (" Rx Packës:%-8lu", 
sc
->
rxPackës
);

1065 
	`¥ötf
 (" Lígth:%-8lu", 
sc
->
rxLígthEº‹
);

1066 
	`¥ötf
 (" N⁄-o˘ë:%-8lu\n", 
sc
->
rxN⁄O˘ë
);

1067 
	`¥ötf
 (" Bad CRC:%-8lu", 
sc
->
rxBadCRC
);

1068 
	`¥ötf
 (" Ovîrun:%-8lu", 
sc
->
rxOvîrun
);

1069 
	`¥ötf
 (" Tx I¡îru±s:%-8lu", 
sc
->
txI¡îru±s
);

1070 
	`¥ötf
 (" MaximÆ Føgs:%-8d", 
sc
->
max_‰agsize
);

1071 
	`¥ötf
 (" GBIT MAC:%-8d", 
sc
->
gbô_mac
);

1072 
	}
}

1078 
	$gªth_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

1080 
gªth_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1081 
îr‹
 = 0;

1083 
comm™d
)

1085 
SIOCGIFADDR
:

1086 
SIOCSIFADDR
:

1087 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

1090 
SIOCSIFFLAGS
:

1091 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
))

1093 
IFF_RUNNING
:

1094 
	`gªth_°›
 (
sc
);

1097 
IFF_UP
:

1098 
	`gªth_öô
 (
sc
);

1101 
IFF_UP
 | 
IFF_RUNNING
:

1102 
	`gªth_°›
 (
sc
);

1103 
	`gªth_öô
 (
sc
);

1110 
SIO_RTEMS_SHOW_STATS
:

1111 
	`gªth_°©s
 (
sc
);

1118 
îr‹
 = 
EINVAL
;

1122  
îr‹
;

1123 
	}
}

1129 
	$πems_gªth_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

1130 
gªth_c⁄figuøti⁄_t
 *
chù
)

1132 
gªth_so·c
 *
sc
;

1133 
i‚ë
 *
iÂ
;

1134 
mtu
;

1135 
unôNumbî
;

1136 *
unôName
;

1139 i‡((
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
unôName
)) < 0)

1142 
sc
 = &
gªth
;

1143 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1144 
	`mem£t
 (
sc
, 0,  (*sc));

1146 i‡(
c⁄fig
->
h¨dw¨e_addªss
)

1148 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
,

1149 
ETHER_ADDR_LEN
);

1153 
	`mem£t
 (
sc
->
¨pcom
.
ac_íaddr
, 0x08, 
ETHER_ADDR_LEN
);

1156 i‡(
c⁄fig
->
mtu
)

1157 
mtu
 = 
c⁄fig
->mtu;

1159 
mtu
 = 
ETHERMTU
;

1161 
sc
->
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

1162 
sc
->
ªgs
 = 
chù
->
ba£_addªss
;

1163 
sc
->
ve˘‹
 = 
chù
->vector;

1164 
sc
->
txbufs
 = 
chù
->
txd_cou¡
;

1165 
sc
->
rxbufs
 = 
chù
->
rxd_cou¡
;

1170 
iÂ
->
if_so·c
 = 
sc
;

1171 
iÂ
->
if_unô
 = 
unôNumbî
;

1172 
iÂ
->
if_«me
 = 
unôName
;

1173 
iÂ
->
if_mtu
 = 
mtu
;

1174 
iÂ
->
if_öô
 = 
gªth_öô
;

1175 
iÂ
->
if_io˘l
 = 
gªth_io˘l
;

1176 
iÂ
->
if_°¨t
 = 
gªth_°¨t
;

1177 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

1178 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

1179 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

1180 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

1185 
	`if_©èch
 (
iÂ
);

1186 
	`ëhî_iÁâach
 (
iÂ
);

1188 #ifde‡
GRETH_DEBUG


1189 
	`¥ötf
 ("GRETH : driver has beenáttached\n");

1192 
	}
};

	@src/libchip/network/greth.h

11 #i‚de‡
_GR_ETH_


12 
	#_GR_ETH_


	)

18 *
	mba£_addªss
;

19 
πems_ve˘‹_numbî
 
	mve˘‹
;

20 
uöt32_t
 
	mtxd_cou¡
;

21 
uöt32_t
 
	mrxd_cou¡
;

22 } 
	tgªth_c⁄figuøti⁄_t
;

26 
	s_gªth_ªgs
 {

27 vﬁ©ûê
uöt32_t
 
	m˘æ
;

28 vﬁ©ûê
uöt32_t
 
	m°©us
;

29 vﬁ©ûê
uöt32_t
 
	mmac_addr_msb
;

30 vﬁ©ûê
uöt32_t
 
	mmac_addr_lsb
;

31 vﬁ©ûê
uöt32_t
 
	mmdio_˘æ
;

32 vﬁ©ûê
uöt32_t
 
	mtxdesc
;

33 vﬁ©ûê
uöt32_t
 
	mrxdesc
;

34 } 
	tgªth_ªgs
;

36 
	#GRETH_TOTAL_BD
 128

	)

37 
	#GRETH_MAXBUF_LEN
 1520

	)

40 
	#GRETH_TXD_ENABLE
 0x0800

	)

41 
	#GRETH_TXD_WRAP
 0x1000

	)

42 
	#GRETH_TXD_IRQ
 0x2000

	)

43 
	#GRETH_TXD_MORE
 0x20000

	)

44 
	#GRETH_TXD_IPCS
 0x40000

	)

45 
	#GRETH_TXD_TCPCS
 0x80000

	)

46 
	#GRETH_TXD_UDPCS
 0x100000

	)

48 
	#GRETH_TXD_UNDERRUN
 0x4000

	)

49 
	#GRETH_TXD_RETLIM
 0x8000

	)

50 
	#GRETH_TXD_LATECOL
 0x10000

	)

52 
	#GRETH_TXD_STATS
 (
GRETH_TXD_UNDERRUN
 | \

53 
GRETH_TXD_RETLIM
 | \

54 
GRETH_TXD_LATECOL
)

	)

56 
	#GRETH_TXD_CS
 (
GRETH_TXD_IPCS
 | \

57 
GRETH_TXD_TCPCS
 | \

58 
GRETH_TXD_UDPCS
)

	)

61 
	#GRETH_RXD_ENABLE
 0x0800

	)

62 
	#GRETH_RXD_WRAP
 0x1000

	)

63 
	#GRETH_RXD_IRQ
 0x2000

	)

65 
	#GRETH_RXD_DRIBBLE
 0x4000

	)

66 
	#GRETH_RXD_TOOLONG
 0x8000

	)

67 
	#GRETH_RXD_CRCERR
 0x10000

	)

68 
	#GRETH_RXD_OVERRUN
 0x20000

	)

69 
	#GRETH_RXD_LENERR
 0x40000

	)

70 
	#GRETH_RXD_ID
 0x40000

	)

71 
	#GRETH_RXD_IR
 0x40000

	)

72 
	#GRETH_RXD_UD
 0x40000

	)

73 
	#GRETH_RXD_UR
 0x40000

	)

74 
	#GRETH_RXD_TD
 0x40000

	)

75 
	#GRETH_RXD_TR
 0x40000

	)

78 
	#GRETH_RXD_STATS
 (
GRETH_RXD_OVERRUN
 | \

79 
GRETH_RXD_DRIBBLE
 | \

80 
GRETH_RXD_TOOLONG
 | \

81 
GRETH_RXD_CRCERR
)

	)

84 
	#GRETH_CTRL_TXEN
 0x00000001

	)

85 
	#GRETH_CTRL_RXEN
 0x00000002

	)

86 
	#GRETH_CTRL_TXIRQ
 0x00000004

	)

87 
	#GRETH_CTRL_RXIRQ
 0x00000008

	)

88 
	#GRETH_CTRL_FULLD
 0x00000010

	)

89 
	#GRETH_CTRL_PRO
 0x00000020

	)

90 
	#GRETH_CTRL_RST
 0x00000040

	)

93 
	#GRETH_STATUS_RXERR
 0x00000001

	)

94 
	#GRETH_STATUS_TXERR
 0x00000002

	)

95 
	#GRETH_STATUS_RXIRQ
 0x00000004

	)

96 
	#GRETH_STATUS_TXIRQ
 0x00000008

	)

97 
	#GRETH_STATUS_RXAHBERR
 0x00000010

	)

98 
	#GRETH_STATUS_TXAHBERR
 0x00000020

	)

101 
	#GRETH_MDIO_WRITE
 0x00000001

	)

102 
	#GRETH_MDIO_READ
 0x00000002

	)

103 
	#GRETH_MDIO_LINKFAIL
 0x00000004

	)

104 
	#GRETH_MDIO_BUSY
 0x00000008

	)

105 
	#GRETH_MDIO_REGADR
 0x000007C0

	)

106 
	#GRETH_MDIO_PHYADR
 0x0000F800

	)

107 
	#GRETH_MDIO_DATA
 0xFFFF0000

	)

111 
	#GRETH_MII_EXTADV_1000FD
 0x00000200

	)

112 
	#GRETH_MII_EXTADV_1000HD
 0x00000100

	)

113 
	#GRETH_MII_EXTPRT_1000FD
 0x00000800

	)

114 
	#GRETH_MII_EXTPRT_1000HD
 0x00000400

	)

116 
	#GRETH_MII_100T4
 0x00000200

	)

117 
	#GRETH_MII_100TXFD
 0x00000100

	)

118 
	#GRETH_MII_100TXHD
 0x00000080

	)

119 
	#GRETH_MII_10FD
 0x00000040

	)

120 
	#GRETH_MII_10HD
 0x00000020

	)

126 
πems_gªth_drivî_©èch
 (

127 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

128 
gªth_c⁄figuøti⁄_t
 *
chù


132 
	sphy_devi˚_öfo


134 
	mvíd‹
;

135 
	mdevi˚
;

136 
	mªv
;

138 
	madv
;

139 
	m∑π
;

141 
	mexèdv
;

142 
	mexç¨t
;

	@src/libchip/network/i82586.c

150 
	~<πems.h
>

151 
	~<πems/îr‹.h
>

152 
	~<πems/πems_bsd√t.h
>

154 
	~<˘y≥.h
>

155 
	~<°dio.h
>

156 
	~<°rög.h
>

157 
	~<î∫o.h
>

159 
	~<sys/∑øm.h
>

160 
	~<sys/mbuf.h
>

161 
	~<sys/sockë.h
>

162 
	~<sys/sockio.h
>

163 
	~<sys/io˘l.h
>

165 
	~<√t/ëhî√t.h
>

166 
	~<√t/if.h
>

167 
	~<√t/if_ty≥s.h
>

168 
	~<√t/if_dl.h
>

170 
	~<√töë/ö.h
>

171 
	~<√töë/if_ëhî.h
>

173 
	~"i82586ªg.h
"

174 
	~"i82586v¨.h
"

176 #i‡
deföed
(
ALIGNBYTES
Ë&& deföed(
ALIGN
)

179 #unde‡
ALIGN


180 
	#ALIGN
(
p
Ë(((
uöçå_t
)’Ë+ 
ALIGNBYTES
Ë& ~ALIGNBYTES)

	)

182 
	#ALIGN
(
p
Ë’)

	)

189 
	#ASYNC_OPTION
 (1)

	)

191 
i82586_ª£t
 (
õ_so·c
 *, );

192 
i82586_w©chdog
 (
i‚ë
 *);

193 
i82586_öô
 (*);

194 
i82586_io˘l
 (
i‚ë
 *, 
io˘l_comm™d_t
 
cmd
, 
ˇddr_t
 
d©a
);

195 
i82586_°¨t
 (
i‚ë
 *);

197 
i82586_°›
 (
i‚ë
 *, );

198 
i82586_röt
 (
õ_so·c
 *, );

199 
i82586_töt
 (
õ_so·c
 *, );

201 
i82586_medüch™ge
 (
i‚ë
 *);

202 
i82586_medü°©us
 (
i‚ë
 *, 
ifmedüªq
 *);

204 
i82586_tx_èsk
(*
¨g
);

205 
i82586_°¨t_tx
(
õ_so·c
 *
sc
);

207 
õ_ªad‰ame
 (
õ_so·c
 *, );

208 
mbuf
 *
õgë
 (
õ_so·c
 *, , );

209 
i82586_gë_rbd_li°
 (
õ_so·c
 *, 
u_öt16_t
*,

210 
u_öt16_t
*, *);

211 
i82586_ªÀa£_rbd_li°
 (
õ_so·c
 *,

212 
u_öt16_t
, u_int16_t);

213 
i82586_dr›_‰ames
 (
õ_so·c
 *);

214 
i82586_chk_rx_rög
 (
õ_so·c
 *);

216 
__ölöe__
 
õ_ack
 (
õ_so·c
 *, 
u_öt
);

217 
__ölöe__
 
õxmô
 (
õ_so·c
 *);

218 
i82586_°¨t_å™s˚ivî
 (
õ_so·c
 *);

220 
i82586_cou¡_îr‹s
 (
õ_so·c
 *);

221 
i82586_rx_îr‹s
 (
õ_so·c
 *, , );

222 
i82586_£tup_bufs
 (
õ_so·c
 *);

223 
£tup_sim∂e_comm™d
 (
õ_so·c
 *, , );

224 
õ_cfg_£tup
 (
õ_so·c
 *, , , );

225 
õ_ü_£tup
 (
õ_so·c
 *, );

226 
õ_run_tdr
 (
õ_so·c
 *, );

227 
õ_mc_£tup
 (
õ_so·c
 *, );

228 
õ_mc_ª£t
 (
õ_so·c
 *);

229 
i82586_°¨t_cmd
 (
õ_so·c
 *, , , , );

230 
i82586_cmd_waô
 (
õ_so·c
 *);

232 #i‡
I82586_DEBUG


233 
¥öt_so·õ
(
õ_so·c
 *
sc
);

234 
¥öt_rbd
 (
õ_so·c
 *, );

237 
	#mö
(
l
,
r
Ë(÷Ë< (rË? (lË: (r))

	)

238 
	#max
(
l
,
r
Ë(÷Ë> (rË? (lË: (r))

	)

240 
	#dñay
(
p
Ë
	`πems_èsk_wake_a·î
 (
	`RTEMS_MICROSECONDS_TO_TICKS
 (p))

	)

242 
	#i82586_WAKE_EVENT
 
RTEMS_EVENT_1


	)

243 
	#i82586_TX_EVENT
 
RTEMS_EVENT_2


	)

246 
	$bômask_¢¥ötf
(
vÆue
, c⁄° *
f‹m©
, *
buf
, 
bÀn
)

248 *
b
 = 
buf
;

249 
bô
 = 31;

251 
bô
-- > *
f‹m©
)

252 
vÆue
 <<= 1;

254 
f‹m©
++;

256 *
f‹m©
)

258 i‡(
vÆue
 & 0x80000000)

259 
	`iß um
(()*
f‹m©
))

260 *
b
++ = *
f‹m©
;

262 *
b
++ = '0';

264 *
b
++ = ',';

266 
bô
-- > *
f‹m©
)

267 
vÆue
 <<= 1;

269 
f‹m©
++;

272 *
b
 = '\0';

273  
buf
;

274 
	}
}

299 
	$i82586_©èch
(
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
)

301 
õ_so·c
 *
sc
;

302 
i‚ë
 *
iÂ
;

303 *
«me
;

304 
unô
;

305 
mtu
;

311 i‡((
unô
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
«me
)) < 0)

314 
sc
 = 
c⁄fig
->
drv_˘æ
;

315 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

317 #i‡
I82586_DEBUG


318 
sc
->
sc_debug
 = 0;

321 i‡(
©èchög
)

323 i‡(
iÂ
->
if_so·c
)

325 
	`¥ötf
 ("Drivî `%s'áÃódy i¿u£.\n", 
c⁄fig
->
«me
);

333 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

335 i‡(
c⁄fig
->
mtu
)

336 
mtu
 = 
c⁄fig
->mtu;

338 
mtu
 = 
ETHERMTU
;

340 
iÂ
->
if_so·c
 = 
sc
;

341 
iÂ
->
if_unô
 = 
unô
;

342 
iÂ
->
if_«me
 = 
«me
;

343 
iÂ
->
if_mtu
 = 
mtu
;

344 
iÂ
->
if_öô
 = 
i82586_öô
;

345 
iÂ
->
if_io˘l
 = 
i82586_io˘l
;

346 
iÂ
->
if_°¨t
 = 
i82586_°¨t
;

347 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

348 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
 | 
IFF_MULTICAST
;

350 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

351 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

354 
	`if_©èch
(
iÂ
);

355 
	`ëhî_iÁâach
(
iÂ
);

359 
	}
}

365 
__ölöe__
 

366 
	$õ_ack
(
õ_so·c
 *
sc
, 
u_öt
 
mask
)

368 
u_öt
 
°©us
;

370 
	`IE_BUS_BARRIER
(
sc
, 0, 0, 
BUS_SPACE_BARRIER_READ
);

371 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_SCB_STATUS
(sc->
scb
));

372 
	`i82586_°¨t_cmd
(
sc
, 
°©us
 & 
mask
, 0, 0, 0);

373 i‡(
sc
->
öåhook
)

374 
sc
->
	`öåhook
(sc, 
INTR_ACK
);

375 
	}
}

388 
__ölöe
 
mbuf
 *

389 
	$õgë
(
õ_so·c
 *
sc
, 
hód
, 
tŸÀn
)

391 
mbuf
 *
m
, *
m0
, *
√wm
;

392 
Àn
, 
ªsid
;

393 
thi§boff
, 
thismboff
;

394 
ëhî_hódî
 
eh
;

399 (
sc
->
memc›yö
)(sc, &
eh
, 
	`IE_RBUF_ADDR
(sc, 
hód
),

400 (
ëhî_hódî
));

402 
ªsid
 = 
tŸÀn
;

404 
	`MGETHDR
(
m0
, 
M_DONTWAIT
, 
MT_DATA
);

405 i‡(
m0
 == 0)

407 
m0
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

408 
m0
->
m_pkthdr
.
Àn
 = 
tŸÀn
;

409 
Àn
 = 
MHLEN
;

410 
m
 = 
m0
;

416 
tŸÀn
 > 0) {

417 i‡(
tŸÀn
 >
MINCLSIZE
) {

418 
	`MCLGET
(
m
, 
M_DONTWAIT
);

419 i‡((
m
->
m_Êags
 & 
M_EXT
) == 0)

420 
bad
;

421 
Àn
 = 
MCLBYTES
;

424 i‡(
m
 =
m0
) {

425 
ˇddr_t
 
√wd©a
 = (caddr_t)

426 
	`ALIGN
(
m
->
m_d©a
 + (
ëhî_hódî
)) -

427 (
ëhî_hódî
);

428 
Àn
 -
√wd©a
 - 
m
->
m_d©a
;

429 
m
->
m_d©a
 = 
√wd©a
;

432 
m
->
m_Àn
 = 
Àn
 = 
	`mö
(
tŸÀn
,Üen);

434 
tŸÀn
 -
Àn
;

435 i‡(
tŸÀn
 > 0) {

436 
	`MGET
(
√wm
, 
M_DONTWAIT
, 
MT_DATA
);

437 i‡(
√wm
 == 0)

438 
bad
;

439 
Àn
 = 
MLEN
;

440 
m
 = m->
m_√xt
 = 
√wm
;

444 
m
 = 
m0
;

445 
thismboff
 = 0;

450 
	`mem˝y
(
	`mtod
(
m
, 
ˇddr_t
), &
eh
, (
ëhî_hódî
));

451 
thismboff
 = (
ëhî_hódî
);

452 
thi§boff
 = (
ëhî_hódî
);

453 
ªsid
 -(
ëhî_hódî
);

460 
ªsid
 > 0) {

461 
thi§bÀn
 = 
IE_RBUF_SIZE
 - 
thi§boff
,

462 
thismbÀn
 = 
m
->
m_Àn
 - 
thismboff
;

463 
Àn
 = 
	`mö
(
thi§bÀn
, 
thismbÀn
);

465 (
sc
->
memc›yö
)(sc, 
	`mtod
(
m
, 
ˇddr_t
Ë+ 
thismboff
,

466 
	`IE_RBUF_ADDR
(
sc
,
hód
Ë+ 
thi§boff
,

467 (
u_öt
)
Àn
);

468 
ªsid
 -
Àn
;

470 i‡(
Àn
 =
thismbÀn
) {

471 
m
 = m->
m_√xt
;

472 
thismboff
 = 0;

474 
thismboff
 +
Àn
;

476 i‡(
Àn
 =
thi§bÀn
) {

477 i‡(++
hód
 =
sc
->
ƒxbuf
)

478 
hód
 = 0;

479 
thi§boff
 = 0;

481 
thi§boff
 +
Àn
;

489  (
m0
);

491 
bad
:

492 
	`m_‰ìm
(
m0
);

494 
	}
}

500 
__ölöe__
 

501 
	$õxmô
(
õ_so·c
 *
sc
)

503 
off
;

504 
cur
, 
¥ev
;

506 
cur
 = 
sc
->
x˘aû
;

508 #i‡
I82586_DEBUG


509 
	`I82586_TRACE
(
sc
, 
I82586_TX_EMIT
, 
cur
);

512 #i‡
I82586_DEBUG


513 i‡(
sc
->
sc_debug
 & 
IED_XMIT
)

514 
	`¥ötf
("%s: xmô buf„∏%d\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
cur
);

520 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_DESC
(sc->
xmô_cmds
, 
cur
),

521 
	`IE_XBD_ADDR
(
sc
->
xbds
, 
cur
));

523 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_STATUS
(sc->
xmô_cmds
, 
cur
), 0);

525 i‡(
sc
->
do_xmôn›chaö
) {

529 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_LINK
(sc->
xmô_cmds
, 
cur
),

530 
	`IE_CMD_NOP_ADDR
(
sc
->
n›_cmds
, 
cur
));

531 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_CMD
(sc->
xmô_cmds
, 
cur
),

532 
IE_CMD_XMIT
 | 
IE_CMD_INTR
);

537 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_STATUS
(sc->
n›_cmds
, 
cur
), 0);

538 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_LINK
(sc->
n›_cmds
, 
cur
),

539 
	`IE_CMD_NOP_ADDR
(
sc
->
n›_cmds
, 
cur
));

544 
¥ev
 = (
cur
 + 
NTXBUF
 - 1) % NTXBUF;

545 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_STATUS
(sc->
n›_cmds
, 
¥ev
), 0);

546 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_LINK
(sc->
n›_cmds
, 
¥ev
),

547 
	`IE_CMD_XMIT_ADDR
(
sc
->
xmô_cmds
, 
cur
));

549 
off
 = 
	`IE_SCB_STATUS
(
sc
->
scb
);

550 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

551 i‡((
sc
->
	`õ_bus_ªad16
(sc, 
off
Ë& 
IE_CUS_ACTIVE
) == 0) {

552 
	`¥ötf
("iexmit: CUÇotáctive\n");

553 
	`i82586_°¨t_å™s˚ivî
(
sc
);

556 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_LINK
(sc->
xmô_cmds
,
cur
),

559 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_XMIT_CMD
(sc->
xmô_cmds
, 
cur
),

560 
IE_CMD_XMIT
 | 
IE_CMD_INTR
 | 
IE_CMD_LAST
);

562 
off
 = 
	`IE_SCB_CMDLST
(
sc
->
scb
);

563 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 
	`IE_CMD_XMIT_ADDR
(sc->
xmô_cmds
, 
cur
));

564 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

566 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
, 0, 0, 
ASYNC_OPTION
))

567 
	`¥ötf
("%s: iexmit: start xmit commandÅimed out\n",

568 
sc
->
¨pcom
.
ac_if
.
if_«me
);

571 
sc
->
¨pcom
.
ac_if
.
if_timî
 = 5;

572 
	}
}

581 
	$i82586_w©chdog
(
i‚ë
 *
iÂ
)

583 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

584 
	`¥ötf
("%s: devi˚Åimeout\n", 
iÂ
->
if_«me
);

585 ++
iÂ
->
if_€º‹s
;

586 
	`i82586_ª£t
(
sc
, 1);

587 
	}
}

590 
	$i82586_cmd_waô
(
õ_so·c
 *
sc
)

593 
i
, 
off
;

594 
u_öt16_t
 
cmd
;

596 
i
 = 0; i < 900000; i++) {

598 
off
 = 
	`IE_SCB_CMD
(
sc
->
scb
);

600 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

601 i‡((
cmd
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
)) == 0)

603 
	`dñay
(1);

606 
off
 = 
	`IE_SCB_STATUS
(
sc
->
scb
);

607 
	`¥ötf
("i82586_cmd_wait:Åimo(%ssync): scb status: 0x%x, cmd: 0x%x\n",

608 
sc
->
async_cmd_ö¥ogªss
?"a":"",

609 
sc
->
	`õ_bus_ªad16
(sc, 
off
), 
cmd
);

612 
	}
}

625 
	$i82586_°¨t_cmd
(
õ_so·c
 *
sc
, 
cmd
, 
õcmdbuf
, 
mask
, 
async
)

627 
i
;

628 
off
;

630 i‡(
sc
->
async_cmd_ö¥ogªss
 != 0) {

635 i‡(
	`i82586_cmd_waô
(
sc
) != 0)

637 
sc
->
async_cmd_ö¥ogªss
 = 0;

640 
off
 = 
	`IE_SCB_CMD
(
sc
->
scb
);

641 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 
cmd
);

642 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_WRITE
);

643 (
sc
->
ch™_©ä
)(sc, 
CARD_RESET
);

645 i‡(
async
 != 0) {

646 
sc
->
async_cmd_ö¥ogªss
 = 1;

650 i‡(
	`IE_ACTION_COMMAND
(
cmd
Ë&& 
õcmdbuf
) {

651 
°©us
;

658 
i
 = 0; i < 369000; i++) {

660 
off
 = 
	`IE_CMD_COMMON_STATUS
(
õcmdbuf
);

661 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

662 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

663 i‡(
°©us
 & 
mask
)

665 
	`dñay
(1);

672  (
	`i82586_cmd_waô
(
sc
));

677 
	}
}

683 
__ölöe
 

684 
	$i82586_cou¡_îr‹s
(
õ_so·c
 *
sc
)

686 
scb
 = 
sc
->scb;

688 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
 +=

689 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_SCB_ERRCRC
(
scb
)) +

690 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_SCB_ERRALN
(
scb
)) +

691 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_SCB_ERRRES
(
scb
)) +

692 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_SCB_ERROVR
(
scb
));

695 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_ERRCRC
(
scb
), 0);

696 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_ERRALN
(
scb
), 0);

697 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_ERRRES
(
scb
), 0);

698 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_ERROVR
(
scb
), 0);

699 
	}
}

703 
	$i82586_rx_îr‹s
(
õ_so·c
 *
sc
, 
‚
, 
°©us
)

705 
bôs
[128];

707 
	`¥ötf
("%s:ÑxÉº‹ (‰ame# %d): %s\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
‚
,

708 
	`bômask_¢¥ötf
(
°©us
, 
IE_FD_STATUSBITS
, 
bôs
, (bits)));

709 
	}
}

714 
πems_i§


715 
	$i82586_öå
(
πems_ve˘‹_numbî
 
vec
, *
¨g
)

717 
õ_so·c
 *
sc
 = 
¨g
;

719 #i‡
I82586_DEBUG


720 
i˙t
 = 0;

721 
	`I82586_TRACE
(
sc
, 
I82586_INTS_REQ
, 
i˙t
++);

729 i‡(
sc
->
öåhook
)

730 (
sc
->
öåhook
)(sc, 
INTR_ENTER
);

736 
	`πems_bsd√t_evít_£nd
 (
sc
->
öå_èsk
, 
i82586_WAKE_EVENT
);

737 
	}
}

746 
	$i82586_öå_èsk
(*
¨g
)

748 
õ_so·c
 *
sc
 = 
¨g
;

749 
πems_evít_£t
 
evíts
;

750 
u_öt
 
°©us
;

751 
off
;

752 
ª£t
;

759 
	`πems_bsd√t_evít_ª˚ive
 (
i82586_WAKE_EVENT
,

760 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

761 0, &
evíts
);

763 
off
 = 
	`IE_SCB_STATUS
(
sc
->
scb
);

764 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

765 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
Ë& 
IE_ST_WHENCE
;

767 #i‡
I82586_DEBUG


768 
	`I82586_TRACE
(
sc
, 
I82586_INTS_IN
, 
°©us
);

771 
ª£t
 = 0;

773 (
°©us
 & 
IE_ST_WHENCE
) != 0) {

774 #i‡
I82586_DEBUG


775 i‡(
sc
->
sc_debug
)

776 
	`¥ötf
 ("%s: -------\n%s: scbstatus=0x%x\n",

777 
sc
->
¨pcom
.
ac_if
.
if_«me
, sc->¨pcom.ac_if.if_«me, 
°©us
);

782 
	`õ_ack
(
sc
, 
°©us
 & 
IE_ST_WHENCE
);

785 
	`i82586_°¨t_cmd
(
sc
, 
°©us
 & 
IE_ST_WHENCE
, 0, 0, 
ASYNC_OPTION
);

787 i‡(
°©us
 & (
IE_ST_FR
 | 
IE_ST_RNR
))

788 i‡(
	`i82586_röt
(
sc
, 
°©us
) != 0) {

789 
ª£t
 = 1;

793 i‡(
°©us
 & 
IE_ST_CX
)

794 i‡(
	`i82586_töt
(
sc
, 
°©us
) != 0) {

795 
ª£t
 = 1;

799 #i‡
I82586_DEBUG


800 i‡((
°©us
 & 
IE_ST_CNA
Ë&& (
sc
->
sc_debug
 & 
IED_CNA
))

801 
	`¥ötf
("%s: c«; sètus=0x%x\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

805 i‡(
sc
->
öåhook
)

806 (
sc
->
öåhook
)(sc, 
INTR_LOOP
);

817 i‡(
	`i82586_cmd_waô
(
sc
) != 0) {

818 
ª£t
 = 1;

823 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

824 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

825 #i‡
I82586_DEBUG


826 
	`I82586_TRACE
(
sc
, 
I82586_INTS_LOOPS
, 
°©us
);

830 i‡(
ª£t
) {

831 #i‡
I82586_DEBUG


832 
	`¥ötf
("%s: i¡∏ª£t; sètus=0x%x\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

834 
	`i82586_cmd_waô
(
sc
);

835 
	`i82586_ª£t
(
sc
, 1);

838 #i‡
I82586_DEBUG


839 
	`I82586_TRACE
(
sc
, 
I82586_INTS_OUT
, 
°©us
);

842 i‡(
sc
->
öåhook
)

843 (
sc
->
öåhook
)(sc, 
INTR_EXIT
);

845 
	}
}

851 
	$i82586_röt
(
õ_so·c
 *
sc
, 
scb°©us
)

853 
time°hru
 = 1024;

854 
i
, 
°©us
, 
off
;

856 #i‡
I82586_DEBUG


857 
	`I82586_TRACE
(
sc
, 
I82586_RX_INT
, 
scb°©us
);

859 i‡(
sc
->
sc_debug
 & 
IED_RINT
)

860 
	`¥ötf
("%s:Ñint: status 0x%x\n",

861 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
scb°©us
);

865 
dr›
 = 0;

867 
i
 = 
sc
->
rfhód
;

868 
off
 = 
	`IE_RFRAME_STATUS
(
sc
->
r‰ames
, 
i
);

869 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

870 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

872 #i‡
I82586_DEBUG


873 i‡(
sc
->
sc_debug
 & 
IED_RINT
)

874 
	`¥ötf
("%s:Ñint: frame(%d) status 0x%x\n",

875 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
i
, 
°©us
);

877 i‡((
°©us
 & 
IE_FD_COMPLETE
) == 0) {

878 i‡((
°©us
 & 
IE_FD_OK
) != 0) {

879 
	`¥ötf
("%s:Ñint: weird: ",

880 
sc
->
¨pcom
.
ac_if
.
if_«me
);

881 
	`i82586_rx_îr‹s
(
sc
, 
i
, 
°©us
);

882 #i‡
I82586_DEBUG


883 
	`I82586_TRACE
(
sc
, 
I82586_RX_ERR
, 
°©us
);

887 i‡(--
time°hru
 == 0) {

889 
	`i82586_cou¡_îr‹s
(
sc
);

890 
time°hru
 = 1024;

893 } i‡((
°©us
 & 
IE_FD_OK
) == 0) {

899 
	`i82586_rx_îr‹s
(
sc
, 
i
, 
°©us
);

900 
dr›
 = 1;

902 #i‡
I82586_DEBUG


903 
	`I82586_TRACE
(
sc
, 
I82586_RX_DROP
, 
°©us
);

907 #i‡
I82586_DEBUG


908 i‡((
°©us
 & 
IE_FD_BUSY
) != 0)

909 
	`¥ötf
("%s:Ñint: frame(%d) busy; status=0x%x\n",

910 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
i
, 
°©us
);

919 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 0);

922 
off
 = 
	`IE_RFRAME_LAST
(
sc
->
r‰ames
, 
i
);

923 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 
IE_FD_EOL
|
IE_FD_SUSP
);

926 
off
 = 
	`IE_RFRAME_BUFDESC
(
sc
->
r‰ames
, 
i
);

927 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 0xffff);

930 
off
 = 
	`IE_RFRAME_LAST
(
sc
->
r‰ames
, sc->
r·aû
);

931 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 0);

933 i‡(++
sc
->
r·aû
 =sc->
n‰ames
)

934 
sc
->
r·aû
 = 0;

935 i‡(++
sc
->
rfhód
 =sc->
n‰ames
)

936 
sc
->
rfhód
 = 0;

939 i‡(
dr›
) {

940 
	`i82586_dr›_‰ames
(
sc
);

941 i‡((
°©us
 & 
IE_FD_RNR
) != 0)

942 
sc
->
∫r_ex≥˘
 = 1;

943 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
++;

944 } i‡(
	`õ_ªad‰ame
(
sc
, 
i
) != 0)

948 i‡((
scb°©us
 & 
IE_ST_RNR
) != 0) {

956 i‡((
scb°©us
 & 
IE_RUS_SUSPEND
) != 0) {

963 
	`¥ötf
("RINT: SUSPENDED; scbstatus=0x%x\n",

964 
scb°©us
);

965 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_RUC_RESUME
, 0, 0, 0) == 0)

967 
	`¥ötf
("%s: RU RESUME commandÅimed out\n",

968 
sc
->
¨pcom
.
ac_if
.
if_«me
);

972 i‡(
sc
->
∫r_ex≥˘
 != 0) {

978 
	`i82586_°¨t_å™s˚ivî
(
sc
);

979 
sc
->
∫r_ex≥˘
 = 0;

982 } i‡((
scb°©us
 & 
IE_RUS_NOSPACE
) != 0) {

989 i‡(
	`i82586_chk_rx_rög
(
sc
) != 0)

992 
	`i82586_°¨t_å™s˚ivî
(
sc
);

993 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
++;

996 
	`¥ötf
("%s:ÑeceiverÇotÑeady; scbstatus=0x%x\n",

997 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
scb°©us
);

999 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
++;

1004 
	}
}

1012 
	$i82586_töt
(
õ_so·c
 *
sc
, 
scb°©us
)

1014 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1015 
°©us
;

1017 #i‡
I82586_DEBUG


1018 
	`I82586_TRACE
(
sc
, 
I82586_TX_INT
, sc->
xmô_busy
);

1021 #i‡
I82586_DEBUG


1022 i‡(
sc
->
xmô_busy
 <= 0) {

1023 
	`¥ötf
("i82586_tint: (%d), WEIRD: xmit_busy=%d, xctail=%d, xchead=%d\n",

1024 
sc
->
åa˚_Êow_ö
 / 2, sc->
xmô_busy
, sc->
x˘aû
, sc->
xchód
);

1025 
	`I82586_TRACE
(
sc
, 
I82586_TX_BAD
, sc->
x˘aû
);

1030 
iÂ
->
if_timî
 = 0;

1031 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

1033 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_XMIT_STATUS
(sc->
xmô_cmds
,

1034 
sc
->
x˘aû
));

1036 #i‡
I82586_DEBUG


1037 i‡(
sc
->
sc_debug
 & 
IED_TINT
)

1038 
	`¥ötf
("%s:Åint: SCB status 0x%x; xmit status 0x%x\n",

1039 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
scb°©us
, 
°©us
);

1042 i‡((
°©us
 & 
IE_STAT_COMPL
Ë=0 || (°©u†& 
IE_STAT_BUSY
)) {

1043 
	`¥ötf
("i82586_tint: (%d) command still busy; status=0x%x;Åail=%d\n",

1044 
sc
->
åa˚_Êow_ö
 / 2, 
°©us
, sc->
x˘aû
);

1045 
	`¥ötf
("õ°©u†0x%x\n", 
scb°©us
);

1049 i‡(
°©us
 & 
IE_STAT_OK
) {

1050 
iÂ
->
if_›ackës
++;

1051 
iÂ
->
if_cﬁlisi⁄s
 +(
°©us
 & 
IE_XS_MAXCOLL
);

1053 
iÂ
->
if_€º‹s
++;

1058 i‡(
°©us
 & 
IE_STAT_ABORT
)

1059 
	`¥ötf
("%s: sídáb‹ãd\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1060 i‡(
°©us
 & 
IE_XS_NOCARRIER
)

1061 
	`¥ötf
("%s:Çÿˇºõr\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1062 i‡(
°©us
 & 
IE_XS_LOSTCTS
)

1063 
	`¥ötf
("%s:Üo° CTS\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1064 i‡(
°©us
 & 
IE_XS_UNDERRUN
)

1065 
	`¥ötf
("%s: DMA undîrun\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1066 i‡(
°©us
 & 
IE_XS_EXCMAX
) {

1067 
	`¥ötf
("%s:Åoo many collisions\n",

1068 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1069 
sc
->
¨pcom
.
ac_if
.
if_cﬁlisi⁄s
 += 16;

1078 i‡(
sc
->
w™t_mc£tup
) {

1079 
	`õ_mc_£tup
(
sc
, 
	`IE_XBUF_ADDR
(sc, sc->
x˘aû
));

1080 
sc
->
w™t_mc£tup
 = 0;

1084 
sc
->
xmô_busy
--;

1085 
sc
->
x˘aû
 = (sc->x˘aû + 1Ë% 
NTXBUF
;

1088 i‡(
sc
->
xmô_busy
 > 0)

1089 
	`õxmô
(
sc
);

1091 
	`i82586_°¨t_tx
(
sc
);

1093 
	}
}

1099 
	$i82586_gë_rbd_li°
(
õ_so·c
 *
sc
, 
u_öt16_t
 *
°¨t
, u_öt16_à*
íd
, *
pkéí
)

1101 
off
, 
rbba£
 = 
sc
->
rbds
;

1102 
rbödex
, 
cou¡
 = 0;

1103 
∂í
 = 0;

1104 
rbd°©us
;

1106 *
°¨t
 = 
rbödex
 = 
sc
->
rbhód
;

1109 
off
 = 
	`IE_RBD_STATUS
(
rbba£
, 
rbödex
);

1110 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

1111 
rbd°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

1112 i‡((
rbd°©us
 & 
IE_RBD_USED
) == 0) {

1117 #i‡
I82586_DEBUG


1118 
	`¥öt_rbd
(
sc
, 
rbödex
);

1120 
	`¥ötf
("%s:Ñeceive descriptors out of syncát %d\n",

1121 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
rbödex
);

1124 
∂í
 +(
rbd°©us
 & 
IE_RBD_CNTMASK
);

1126 i‡(++
rbödex
 =
sc
->
ƒxbuf
)

1127 
rbödex
 = 0;

1129 ++
cou¡
;

1130 } (
rbd°©us
 & 
IE_RBD_LAST
) == 0);

1131 *
íd
 = 
rbödex
;

1132 *
pkéí
 = 
∂í
;

1133  (
cou¡
);

1134 
	}
}

1141 
	$i82586_ªÀa£_rbd_li°
(
õ_so·c
 *
sc
, 
u_öt16_t
 
°¨t
, u_öt16_à
íd
)

1143 
off
, 
rbba£
 = 
sc
->
rbds
;

1144 
rbödex
 = 
°¨t
;

1148 
off
 = 
	`IE_RBD_STATUS
(
rbba£
, 
rbödex
);

1149 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 0);

1150 i‡(++
rbödex
 =
sc
->
ƒxbuf
)

1151 
rbödex
 = 0;

1152 } 
rbödex
 !
íd
);

1155 
rbödex
 = (‘bödex =0Ë? 
sc
->
ƒxbuf
 :Ñbindex) - 1;

1156 
off
 = 
	`IE_RBD_BUFLEN
(
rbba£
, 
rbödex
);

1157 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 
IE_RBUF_SIZE
|
IE_RBD_EOL
);

1160 
off
 = 
	`IE_RBD_BUFLEN
(
rbba£
, 
sc
->
rbèû
);

1161 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 
IE_RBUF_SIZE
);

1165 
sc
->
rbhód
 = 
íd
;

1166 
sc
->
rbèû
 = 
rbödex
;

1167 
	}
}

1176 
	$i82586_dr›_‰ames
(
õ_so·c
 *
sc
)

1178 
u_öt16_t
 
b°¨t
, 
bíd
;

1179 
pkéí
;

1181 i‡(
	`i82586_gë_rbd_li°
(
sc
, &
b°¨t
, &
bíd
, &
pkéí
) == 0)

1183 
	`i82586_ªÀa£_rbd_li°
(
sc
, 
b°¨t
, 
bíd
);

1185 
	}
}

1197 
	$i82586_chk_rx_rög
(
õ_so·c
 *
sc
)

1199 
n
, 
off
, 
vÆ
;

1201 
n
 = 0;Ç < 
sc
->
ƒxbuf
;Ç++) {

1202 
off
 = 
	`IE_RBD_BUFLEN
(
sc
->
rbds
, 
n
);

1203 
vÆ
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

1204 i‡((
n
 =
sc
->
rbèû
Ë^ ((
vÆ
 & 
IE_RBD_EOL
) != 0)) {

1206 
	`¥ötf
("%s:Ñx buffer descriptors out of syncát %d\n",

1207 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
n
);

1214 
n
 = 0;Ç < 
sc
->
n‰ames
;Ç++) {

1215 
off
 = 
	`IE_RFRAME_LAST
(
sc
->
r‰ames
, 
n
);

1216 
vÆ
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
);

1217 i‡((
n
 =
sc
->
r·aû
Ë^ ((
vÆ
 & (
IE_FD_EOL
|
IE_FD_SUSP
)) != 0)) {

1219 
	`¥ötf
("%s:Ñx frameÜist out of syncát %d\n",

1220 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
n
);

1226 
	}
}

1239 
	$õ_ªad‰ame
(
õ_so·c
 *
sc
, 
num
)

1241 
ëhî_hódî
 *
eh
;

1242 
mbuf
 *
m
;

1243 
u_öt16_t
 
b°¨t
, 
bíd
;

1244 
pkéí
;

1246 i‡(
	`i82586_gë_rbd_li°
(
sc
, &
b°¨t
, &
bíd
, &
pkéí
) == 0) {

1247 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
++;

1251 
m
 = 
	`õgë
(
sc
, 
b°¨t
, 
pkéí
);

1252 
	`i82586_ªÀa£_rbd_li°
(
sc
, 
b°¨t
, 
bíd
);

1254 i‡(
m
 == 0) {

1255 
sc
->
¨pcom
.
ac_if
.
if_õº‹s
++;

1263 
eh
 = 
	`mtod
(
m
, 
ëhî_hódî
 *);

1264 
m
->
m_d©a
 + (
ëhî_hódî
);

1265 
m
->
m_Àn
 - (
ëhî_hódî
);

1266 
m
->
m_pkthdr
.
Àn
 - (
ëhî_hódî
);

1268 #i‡
I82586_DEBUG


1269 i‡(
sc
->
sc_debug
 & 
IED_READFRAME
) {

1271 
	`¥ötf
("%s: frame fromÉther %sÅype 0x%xÜen %d\n",

1272 
sc
->
¨pcom
.
ac_if
.
if_«me
,

1273 
	`ëhî_•rötf
(
eh
->
ëhî_sho°
),

1274 (
u_öt
)
	`¡ohs
(
eh
->
ëhî_ty≥
),

1275 
pkéí
);

1279 #i‡
NBPFILTER
 > 0

1281 i‡(
sc
->
¨pcom
.
ac_if
.
if_bpf
 != 0)

1283 
	`bpf_mèp
(
sc
->
¨pcom
.
ac_if
.
if_bpf
, 
m
);

1289 
	`ëhî_öput
 (&
sc
->
¨pcom
.
ac_if
, 
eh
, 
m
);

1290 
sc
->
¨pcom
.
ac_if
.
if_ùackës
++;

1292 #i‡
I82586_DEBUG


1293 
	`I82586_TRACE
(
sc
, 
I82586_RX_OK
, sc->
¨pcom
.
ac_if
.
if_ùackës
);

1297 
	}
}

1303 
	$i82586_°¨t
(
i‚ë
 *
iÂ
)

1305 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1307 i‡((
iÂ
->
if_Êags
 & (
IFF_RUNNING
 | 
IFF_OACTIVE
)) != IFF_RUNNING)

1310 #i‡
I82586_DEBUG


1311 
	`I82586_TRACE
(
sc
, 
I82586_TX_REQ
, sc->
xmô_busy
);

1314 
	`πems_bsd√t_evít_£nd
 (
sc
->
tx_èsk
, 
i82586_TX_EVENT
);

1315 
	}
}

1318 
	$i82586_tx_èsk
(*
¨g
)

1320 
õ_so·c
 *
sc
 = 
¨g
;

1321 
πems_evít_£t
 
evíts
;

1324 
	`πems_bsd√t_evít_ª˚ive
 (
i82586_TX_EVENT
,

1325 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

1326 0, &
evíts
);

1328 #i‡
I82586_DEBUG


1329 
	`I82586_TRACE
(
sc
, 
I82586_TX_EVT
, sc->
xmô_busy
);

1331 i‡(
sc
->
sc_debug
)

1332 
	`¥ötf
 ("%s: =======\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1335 
	`i82586_°¨t_tx
(
sc
);

1337 
	}
}

1340 
	$i82586_°¨t_tx
(
õ_so·c
 *
sc
)

1342 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1343 
mbuf
 *
m0
, *
m
;

1344 
buf„r
, 
hód
, 
xba£
;

1345 
u_sh‹t
 
Àn
;

1346 
s
;

1348 #i‡
I82586_DEBUG


1349 
	`I82586_TRACE
(
sc
, 
I82586_START_TX
, sc->
xmô_busy
);

1352 i‡((
iÂ
->
if_Êags
 & (
IFF_RUNNING
 | 
IFF_OACTIVE
)) != IFF_RUNNING)

1354 #i‡
I82586_DEBUG


1355 
	`I82586_TRACE
(
sc
, 
I82586_TX_ACTIVE
, 
iÂ
->
if_¢d
.
ifq_Àn
);

1361 i‡(
sc
->
xmô_busy
 =
NTXBUF
) {

1362 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

1366 
hód
 = 
sc
->
xchód
;

1367 
xba£
 = 
sc
->
xbds
;

1369 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m0
);

1370 i‡(
m0
 == 0)

1374 i‡((
m0
->
m_Êags
 & 
M_PKTHDR
) == 0)

1375 
	`∑nic
("i82586_start:Ço header mbuf");

1377 #i‡
NBPFILTER
 > 0

1379 i‡(
iÂ
->
if_bpf
)

1380 
	`bpf_mèp
(
iÂ
->
if_bpf
, 
m0
);

1383 #i‡
I82586_DEBUG


1384 i‡(
sc
->
sc_debug
 & 
IED_ENQ
)

1385 
	`¥ötf
("%s: fû»buf„∏%d\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
,

1386 
sc
->
xchód
);

1389 i‡(
m0
->
m_pkthdr
.
Àn
 > 
IE_TBUF_SIZE
)

1390 
	`¥ötf
("%s:Åbu‡ovîÊow\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1392 
buf„r
 = 
	`IE_XBUF_ADDR
(
sc
, 
hód
);

1393 
m
 = 
m0
; m !0; m = m->
m_√xt
) {

1394 (
sc
->
memc›yout
)(sc, 
	`mtod
(
m
,
ˇddr_t
), 
buf„r
, m->
m_Àn
);

1395 
buf„r
 +
m
->
m_Àn
;

1398 
Àn
 = 
	`max
(
m0
->
m_pkthdr
.Àn, 
ETHER_MIN_LEN
);

1399 
	`m_‰ìm
(
m0
);

1405 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_XBD_FLAGS
(
xba£
, 
hód
),

1406 
Àn
 | 
IE_TBD_EOL
);

1407 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_XBD_NEXT
(
xba£
, 
hód
), 0xffff);

1408 
sc
->
	`õ_bus_wrôe24
(sc, 
	`IE_XBD_BUF
(
xba£
, 
hód
),

1409 
	`IE_XBUF_ADDR
(
sc
, 
hód
));

1411 i‡(++
hód
 =
NTXBUF
)

1412 
hód
 = 0;

1413 
sc
->
xchód
 = 
hód
;

1415 #i‡
I82586_DEBUG


1416 
	`I82586_TRACE
(
sc
, 
I82586_TX_START
, sc->
xmô_busy
);

1419 
s
 = 
	`• ë
();

1421 i‡(
sc
->
xmô_busy
 == 0)

1422 
	`õxmô
(
sc
);

1424 
sc
->
xmô_busy
++;

1426 
	`•lx
(
s
);

1428 
	}
}

1435 
	$i82586_¥obîam
(
õ_so·c
 *
sc
)

1437 
ªsu…
, 
off
;

1440 
off
 = 
	`IE_SCP_BUS_USE
(
sc
->
s˝
);

1441 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 0);

1442 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_WRITE
);

1445 
off
 = 
	`IE_ISCP_BUSY
(
sc
->
is˝
);

1446 
sc
->
	`õ_bus_wrôe16
(sc, 
off
, 1);

1447 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_WRITE
);

1449 i‡(
sc
->
hwª£t
)

1450 (
sc
->
hwª£t
)(sc, 
CHIP_PROBE
);

1452 (
sc
->
ch™_©ä
Ë(sc, 
CHIP_PROBE
);

1454 
	`dñay
(100);

1457 
off
 = 
	`IE_ISCP_BUSY
(
sc
->
is˝
);

1458 
	`IE_BUS_BARRIER
(
sc
, 
off
, 2, 
BUS_SPACE_BARRIER_READ
);

1459 
ªsu…
 = 
sc
->
	`õ_bus_ªad16
(sc, 
off
) == 0;

1462 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1464  (
ªsu…
);

1465 
	}
}

1468 
	$i82586_ª£t
(
õ_so·c
 *
sc
, 
h¨d
)

1470 
s
 = 
	`• ë
();

1472 i‡(
h¨d
)

1473 
	`¥ötf
("%s:Ñe£t\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1476 
sc
->
¨pcom
.
ac_if
.
if_timî
 = 0;

1477 
sc
->
¨pcom
.
ac_if
.
if_Êags
 &~
IFF_OACTIVE
;

1482 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_RUC_ABORT
 | 
IE_CUC_ABORT
, 0, 0, 0))

1483 
	`¥ötf
("%s:áb‹àcomm™d†timed out\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1490 i‡(
h¨d
 && 
sc
->
hwª£t
)

1491 (
sc
->
hwª£t
)(sc, 
CARD_RESET
);

1493 
	`dñay
(100);

1494 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1496 i‡((
sc
->
¨pcom
.
ac_if
.
if_Êags
 & 
IFF_UP
) != 0) {

1497 
	`i82586_öô
(&
sc
->
¨pcom
.
ac_if
);

1500 
	`•lx
(
s
);

1501 
	}
}

1504 
	$£tup_sim∂e_comm™d
(
õ_so·c
 *
sc
, 
cmd
, 
cmdbuf
)

1507 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_COMMON_STATUS
(
cmdbuf
), 0);

1508 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_COMMON_CMD
(
cmdbuf
), 
cmd
 | 
IE_CMD_LAST
);

1509 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_COMMON_LINK
(
cmdbuf
), 0xffff);

1512 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_CMDLST
(sc->
scb
), 
cmdbuf
);

1513 
	}
}

1519 
	$õ_run_tdr
(
õ_so·c
 *
sc
, 
cmd
)

1521 
uöt32_t
 
ªsu…
;

1523 
	`£tup_sim∂e_comm™d
(
sc
, 
IE_CMD_TDR
, 
cmd
);

1524 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_TDR_TIME
(
cmd
), 0);

1526 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
, 
cmd
, 
IE_STAT_COMPL
, 0) ||

1527 (
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_COMMON_STATUS
(
cmd
)Ë& 
IE_STAT_OK
) == 0)

1528 
ªsu…
 = 0x10000;

1530 
ªsu…
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_TDR_TIME
(
cmd
));

1533 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1535 i‡(
ªsu…
 & 
IE_TDR_SUCCESS
)

1538 i‡(
ªsu…
 & 0x10000)

1539 
	`¥ötf
("%s: TDR comm™d faûed\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1540 i‡(
ªsu…
 & 
IE_TDR_XCVR
)

1541 
	`¥ötf
("%s:Åøns˚ivîÖrobÀm\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1542 i‡(
ªsu…
 & 
IE_TDR_OPEN
)

1543 
	`¥ötf
("%s: TDR dëe˘ed inc‹ª˘Åîmö©i⁄ %" 
PRId32
 " clocksáway\n",

1544 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
ªsu…
 & 
IE_TDR_TIME
);

1545 i‡(
ªsu…
 & 
IE_TDR_SHORT
)

1546 
	`¥ötf
("%s: TDR dëe˘edá sh‹àcúcuô %" 
PRId32
 " clocksáway\n",

1547 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
ªsu…
 & 
IE_TDR_TIME
);

1549 
	`¥ötf
("%s: TDRÑëu∫ed unknow¿°©u†0x%" 
PRIx32
 "\n",

1550 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
ªsu…
);

1551 
	}
}

1566 
	$i82586_£tup_bufs
(
õ_so·c
 *
sc
)

1568 
±r
 = 
sc
->
buf_¨ó
;

1569 
n
, 
r
;

1575 
±r
 = (ptr + 3) & ~3;

1583 
sc
->
n›_cmds
 = 
±r
;

1584 
±r
 +
NTXBUF
 * 
IE_CMD_NOP_SZ
;

1587 
sc
->
xmô_cmds
 = 
±r
;

1588 
±r
 +
NTXBUF
 * 
IE_CMD_XMIT_SZ
;

1591 
sc
->
xbds
 = 
±r
;

1592 
±r
 +
NTXBUF
 * 
IE_XBD_SZ
;

1595 
sc
->
xbufs
 = 
±r
;

1596 
±r
 +
NTXBUF
 * 
IE_TBUF_SIZE
;

1598 
±r
 = (ptr + 3) & ~3;

1601 
n
 = 
sc
->
buf_¨ó_sz
 - (
±r
 - sc->
buf_¨ó
);

1604 
r
 = 
IE_RFRAME_SZ
 + ((
IE_RBD_SZ
 + 
IE_RBUF_SIZE
Ë* 
B_PER_F
);

1606 
sc
->
n‰ames
 = 
n
 / 
r
;

1608 i‡(
sc
->
n‰ames
 <= 0)

1609 
	`∑nic
("ie: bogus buffer calc\n");

1611 
sc
->
ƒxbuf
 = sc->
n‰ames
 * 
B_PER_F
;

1614 
sc
->
r‰ames
 = 
±r
;

1615 
±r
 +
sc
->
n‰ames
 * 
IE_RFRAME_SZ
;

1618 
sc
->
rbds
 = 
±r
;

1619 
±r
 +
sc
->
ƒxbuf
 * 
IE_RBD_SZ
;

1622 
sc
->
rbufs
 = 
±r
;

1623 
±r
 +
sc
->
ƒxbuf
 * 
IE_RBUF_SIZE
;

1625 #i‡
I82586_DEBUG


1626 
	`¥ötf
("%s: %d føme†%d bufs\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, sc->
n‰ames
,

1627 
sc
->
ƒxbuf
);

1633 
n
 = 0;Ç < 
sc
->
n‰ames
;Ç++) {

1634 
m
 = (
n
 =
sc
->
n‰ames
 - 1) ? 0 :Ç + 1;

1637 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RFRAME_STATUS
(sc->
r‰ames
,
n
), 0);

1640 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RFRAME_BUFDESC
(sc->
r‰ames
,
n
),

1644 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RFRAME_NEXT
(sc->
r‰ames
,
n
),

1645 
	`IE_RFRAME_ADDR
(
sc
->
r‰ames
,
m
));

1648 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RFRAME_LAST
(sc->
r‰ames
,
n
),

1649 ((
m
==0)? (
IE_FD_EOL
|
IE_FD_SUSP
) : 0));

1655 
n
 = 0;Ç < 
sc
->
ƒxbuf
;Ç++) {

1656 
m
 = (
n
 =
sc
->
ƒxbuf
 - 1) ? 0 :Ç + 1;

1659 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RBD_STATUS
(sc->
rbds
,
n
), 0);

1662 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RBD_NEXT
(sc->
rbds
,
n
),

1663 
	`IE_RBD_ADDR
(
sc
->
rbds
,
m
));

1666 
sc
->
	`õ_bus_wrôe24
(sc, 
	`IE_RBD_BUFADDR
(sc->
rbds
, 
n
),

1667 
	`IE_RBUF_ADDR
(
sc
, 
n
));

1668 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RBD_BUFLEN
(sc->
rbds
,
n
),

1669 
IE_RBUF_SIZE
 | ((
m
==0)?
IE_RBD_EOL
:0));

1675 
n
 = 0;Ç < 
NTXBUF
;Ç++) {

1676 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_STATUS
(sc->
n›_cmds
, 
n
), 0);

1678 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_CMD
(sc->
n›_cmds
, 
n
),

1679 
IE_CMD_NOP
);

1681 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_NOP_LINK
(sc->
n›_cmds
, 
n
),

1682 
	`IE_CMD_NOP_ADDR
(
sc
->
n›_cmds
, 
n
));

1692 
sc
->
xchód
 = sc->
x˘aû
 = 0;

1695 
sc
->
xmô_busy
 = 0;

1701 
sc
->
rfhód
 = 0;

1702 
sc
->
r·aû
 = sc->
n‰ames
 - 1;

1708 
sc
->
rbhód
 = 0;

1709 
sc
->
rbèû
 = sc->
ƒxbuf
 - 1;

1712 #i‡
I82586_DEBUG


1713 
	`¥ötf
("%s:Ñeserved %d bytes\n",

1714 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
±r
 - sc->
buf_¨ó
);

1716 
	}
}

1719 
	$õ_cfg_£tup
(
õ_so·c
 *
sc
, 
cmd
, 
¥omiscuous
, 
m™che°î
)

1721 
cmdªsu…
, 
°©us
;

1722 
u_öt8_t
 
buf
[
IE_CMD_CFG_SZ
];

1724 *
	`IE_CMD_CFG_CNT
(
buf
) = 0x0c;

1725 *
	`IE_CMD_CFG_FIFO
(
buf
) = 8;

1726 *
	`IE_CMD_CFG_SAVEBAD
(
buf
) = 0x40;

1727 *
	`IE_CMD_CFG_ADDRLEN
(
buf
) = 0x2e;

1728 *
	`IE_CMD_CFG_PRIORITY
(
buf
) = 0;

1729 *
	`IE_CMD_CFG_IFS
(
buf
) = 0x60;

1730 *
	`IE_CMD_CFG_SLOT_LOW
(
buf
) = 0;

1731 *
	`IE_CMD_CFG_SLOT_HIGH
(
buf
) = 0xf2;

1732 *
	`IE_CMD_CFG_PROMISC
(
buf
Ë(!!
¥omiscuous
Ë| (
m™che°î
 << 2);

1733 *
	`IE_CMD_CFG_CRSCDT
(
buf
) = 0;

1734 *
	`IE_CMD_CFG_MINLEN
(
buf
) = 64;

1735 *
	`IE_CMD_CFG_JUNK
(
buf
) = 0xff;

1736 
sc
->
	`memc›yout
(sc, 
buf
, 
cmd
, 
IE_CMD_CFG_SZ
);

1737 
	`£tup_sim∂e_comm™d
(
sc
, 
IE_CMD_CONFIG
, 
cmd
);

1738 
	`IE_BUS_BARRIER
(
sc
, 
cmd
, 
IE_CMD_CFG_SZ
, 
BUS_SPACE_BARRIER_WRITE
);

1740 
cmdªsu…
 = 
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
, 
cmd
, 
IE_STAT_COMPL
, 0);

1741 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_COMMON_STATUS
(
cmd
));

1742 i‡(
cmdªsu…
 != 0) {

1743 
	`¥ötf
("%s: configure commandÅimed out; status %x\n",

1744 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1747 i‡((
°©us
 & 
IE_STAT_OK
) == 0) {

1748 
	`¥ötf
("%s: configure command failed; status %x\n",

1749 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1754 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1756 
	}
}

1759 
	$õ_ü_£tup
(
õ_so·c
 *
sc
, 
cmdbuf
)

1761 
cmdªsu…
, 
°©us
;

1763 
	`£tup_sim∂e_comm™d
(
sc
, 
IE_CMD_IASETUP
, 
cmdbuf
);

1765 (
sc
->
memc›yout
)(sc, sc->
¨pcom
.
ac_íaddr
,

1766 
	`IE_CMD_IAS_EADDR
(
cmdbuf
), 
ETHER_ADDR_LEN
);

1768 
cmdªsu…
 = 
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
, 
cmdbuf
, 
IE_STAT_COMPL
, 0);

1769 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_COMMON_STATUS
(
cmdbuf
));

1770 i‡(
cmdªsu…
 != 0) {

1771 
	`¥ötf
("%s: individualáddress commandÅimed out; status %x\n",

1772 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1775 i‡((
°©us
 & 
IE_STAT_OK
) == 0) {

1776 
	`¥ötf
("%s: individualáddress command failed; status %x\n",

1777 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1782 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1784 
	}
}

1791 
	$õ_mc_£tup
(
õ_so·c
 *
sc
, 
cmdbuf
)

1793 
cmdªsu…
, 
°©us
;

1795 i‡(
sc
->
mˇ°_cou¡
 == 0)

1798 
	`£tup_sim∂e_comm™d
(
sc
, 
IE_CMD_MCAST
, 
cmdbuf
);

1800 (
sc
->
memc›yout
)(sc, (
ˇddr_t
)sc->
mˇ°_addrs
,

1801 
	`IE_CMD_MCAST_MADDR
(
cmdbuf
),

1802 
sc
->
mˇ°_cou¡
 * 
ETHER_ADDR_LEN
);

1804 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_CMD_MCAST_BYTES
(
cmdbuf
),

1805 
sc
->
mˇ°_cou¡
 * 
ETHER_ADDR_LEN
);

1808 
cmdªsu…
 = 
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
, 
cmdbuf
, 
IE_STAT_COMPL
, 0);

1809 
°©us
 = 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_CMD_COMMON_STATUS
(
cmdbuf
));

1810 i‡(
cmdªsu…
 != 0) {

1811 
	`¥ötf
("%s: multicast setup commandÅimed out; status %x\n",

1812 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1815 i‡((
°©us
 & 
IE_STAT_OK
) == 0) {

1816 
	`¥ötf
("%s: multicast setup command failed; status %x\n",

1817 
sc
->
¨pcom
.
ac_if
.
if_«me
, 
°©us
);

1822 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1824 
	}
}

1835 
	$i82586_öô
(*
¨g
)

1837 
õ_so·c
 *
sc
 = 
¨g
;

1838 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1839 
cmd
;

1841 
sc
->
async_cmd_ö¥ogªss
 = 0;

1842 
sc
->
xmô_busy
 = 0;

1844 #i‡
I82586_DEBUG


1845 
	`mem£t
(
sc
->
åa˚_Êow
, 0, (sc->trace_flow));

1846 
sc
->
åa˚_Êow_wøp
 = 0;

1848 
sc
->
åa˚_Êow_ö
 = 0;

1850 
cmd
 = 
sc
->
buf_¨ó
;

1852 #i‡
I82586_DEBUG


1853 
	`¥ötf
 ("%s: sc_debugáà0x%08x\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
, (Ë&sc->
sc_debug
);

1859 i‡(
	`õ_cfg_£tup
(
sc
, 
cmd
, sc->
¥omisc
, 0) == 0)

1865 i‡(
	`õ_ü_£tup
(
sc
, 
cmd
) == 0)

1871 
	`õ_run_tdr
(
sc
, 
cmd
);

1876 i‡(
	`õ_mc_£tup
(
sc
, 
cmd
) == 0)

1883 i‡(
sc
->
öå_èsk
 == 0)

1884 
sc
->
öå_èsk
 = 
	`πems_bsd√t_√w¥oc
 ("IEi0", 2048, 
i82586_öå_èsk
, sc);

1885 i‡(
sc
->
tx_èsk
 == 0)

1886 
sc
->
tx_èsk
 = 
	`πems_bsd√t_√w¥oc
 ("IEt0", 2048, 
i82586_tx_èsk
, sc);

1892 
	`õ_ack
(
sc
, 
IE_ST_WHENCE
);

1897 
	`i82586_£tup_bufs
(
sc
);

1899 i‡(
sc
->
hwöô
)

1900 (
sc
->
hwöô
)(sc);

1902 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1903 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

1905 i‡(
NTXBUF
 < 2)

1906 
sc
->
do_xmôn›chaö
 = 0;

1908 
	`i82586_°¨t_å™s˚ivî
(
sc
);

1909 
	}
}

1915 
	$i82586_°¨t_å™s˚ivî
(
õ_so·c
 *
sc
)

1917 #i‡
I82586_DEBUG


1918 
	`I82586_TRACE
(
sc
, 
I82586_RX_START
, 0);

1924 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_RFRAME_BUFDESC
(sc->
r‰ames
,sc->
rfhód
),

1925 
	`IE_RBD_ADDR
(
sc
->
rbds
, sc->
rbhód
));

1927 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_RCVLST
(sc->
scb
),

1928 
	`IE_RFRAME_ADDR
(
sc
->
r‰ames
,sc->
rfhód
));

1930 i‡(
sc
->
do_xmôn›chaö
) {

1932 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_SUSPEND
|
IE_RUC_SUSPEND
, 0, 0, 0))

1933 
	`¥ötf
("%s: CU/RU stop commandÅimed out\n",

1934 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1939 
sc
->
	`õ_bus_wrôe16
(sc, 
	`IE_SCB_CMDLST
(sc->
scb
),

1940 
	`IE_CMD_NOP_ADDR
(

1941 
sc
->
n›_cmds
,

1942 (
sc
->
x˘aû
 + 
NTXBUF
 - 1) % NTXBUF));

1944 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_CUC_START
|
IE_RUC_START
, 0, 0, 0))

1945 
	`¥ötf
("%s: CU/RU commandÅimed out\n",

1946 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1948 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_RUC_START
, 0, 0, 0))

1949 
	`¥ötf
("%s: RU commandÅimed out\n",

1950 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1952 
	}
}

1955 
	$i82586_°›
(
i‚ë
 *
iÂ
, 
dißbÀ
)

1957 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1959 i‡(
	`i82586_°¨t_cmd
(
sc
, 
IE_RUC_SUSPEND
 | 
IE_CUC_SUSPEND
, 0, 0, 0))

1960 
	`¥ötf
("%s: iestop: disable commandsÅimed out\n",

1961 
sc
->
¨pcom
.
ac_if
.
if_«me
);

1962 
	}
}

1965 
	$i82586_io˘l
(
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
cmd
, 
ˇddr_t
 
d©a
)

1967 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1969 
s
;

1970 
îr‹
 = 0;

1972 
s
 = 
	`• ë
();

1973 
cmd
) {

1974 
SIOCGIFMEDIA
:

1975 
SIOCSIFMEDIA
:

1977 
SIO_RTEMS_SHOW_STATS
:

1978 #i‡
I82586_DEBUG


1979 
	`¥öt_so·õ
(
sc
);

1983 
îr‹
 = 
	`ëhî_io˘l
(
iÂ
, 
cmd
, 
d©a
);

1984 i‡(
îr‹
 =
ENETRESET
) {

1989 
	`õ_mc_ª£t
(
sc
);

1990 
îr‹
 = 0;

1994 #i‡
I82586_DEBUG


1995 i‡(
cmd
 =
SIOCSIFFLAGS
)

1996 
sc
->
sc_debug
 = (
iÂ
->
if_Êags
 & 
IFF_DEBUG
Ë? 
IED_ALL
 : 0;

1998 
	`•lx
(
s
);

1999  (
îr‹
);

2000 
	}
}

2003 
	$õ_mc_ª£t
(
õ_so·c
 *
sc
)

2005 
ëhî_mu…i
 *
ím
;

2006 
ëhî_mu…i°ï
 
°ï
;

2007 
size
;

2012 
agaö
:

2013 
size
 = 0;

2014 
sc
->
mˇ°_cou¡
 = 0;

2015 
	`ETHER_FIRST_MULTI
(
°ï
, &
sc
->
¨pcom
, 
ím
);

2016 
ím
) {

2017 
size
 += 6;

2018 i‡(
sc
->
mˇ°_cou¡
 >
IE_MAXMCAST
 ||

2019 
	`memcmp
(
ím
->
ím_addæo
,Énm->
ím_addrhi
, 6) != 0) {

2020 
sc
->
¨pcom
.
ac_if
.
if_Êags
 |
IFF_ALLMULTI
;

2021 
	`i82586_io˘l
(&
sc
->
¨pcom
.
ac_if
,

2022 
SIOCSIFFLAGS
, (*)0);

2025 
	`ETHER_NEXT_MULTI
(
°ï
, 
ím
);

2028 i‡(
size
 > 
sc
->
mˇ°_addrs_size
) {

2030 i‡(
sc
->
mˇ°_addrs_size
)

2031 
	`‰ì
(
sc
->
mˇ°_addrs
, 
M_IPMADDR
);

2032 
sc
->
mˇ°_addrs
 = (*)

2033 
	`mÆloc
(
size
, 
M_IPMADDR
, 
M_WAITOK
);

2034 
sc
->
mˇ°_addrs_size
 = 
size
;

2040 
	`ETHER_FIRST_MULTI
(
°ï
, &
sc
->
¨pcom
, 
ím
);

2041 
ím
) {

2042 i‡(
sc
->
mˇ°_cou¡
 >
IE_MAXMCAST
)

2043 
agaö
;

2045 
	`mem˝y
(&
sc
->
mˇ°_addrs
[sc->
mˇ°_cou¡
], 
ím
->
ím_addæo
, 6);

2046 
sc
->
mˇ°_cou¡
++;

2047 
	`ETHER_NEXT_MULTI
(
°ï
, 
ím
);

2049 
sc
->
w™t_mc£tup
 = 1;

2050 
	}
}

2056 
	$i82586_medüch™ge
(
i‚ë
 *
iÂ
)

2058 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

2060 i‡(
sc
->
sc_medüch™ge
)

2061  ((*
sc
->
sc_medüch™ge
)(sc));

2063 
	}
}

2069 
	$i82586_medü°©us
(
i‚ë
 *
iÂ
, 
ifmedüªq
 *
ifmr
)

2071 
õ_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

2073 i‡(
sc
->
sc_medü°©us
)

2074 (*
sc
->
sc_medü°©us
)(sc, 
ifmr
);

2075 
	}
}

2077 #i‡
I82586_DEBUG


2079 
	$¥öt_so·õ
(
õ_so·c
 *
sc
)

2081 *
åa˚_œbñs
[] = {

2102 
i
;

2104 
	`¥ötf
("i82586 %s:\n", 
sc
->
¨pcom
.
ac_if
.
if_«me
);

2106 
	`¥ötf
(" ioba£=%p\n", 
sc
->
sc_ioba£
);

2108 
	`¥ötf
(" scp=0x%08x\t\tiscp=0x%08x\t\tscb=0x%08x\n",

2109 
sc
->
s˝
, sc->
is˝
, sc->
scb
);

2110 
	`¥ötf
(" buf_area=0x%08x\tbuf_area_sz=0x%08x\n",

2111 
sc
->
buf_¨ó
, sc->
buf_¨ó_sz
);

2112 
	`¥ötf
("Ñframes=0x%08x\trbds=0x%08x\t\trbufs=0x%08x\n",

2113 
sc
->
r‰ames
, sc->
rbds
, sc->
rbufs
);

2114 
	`¥ötf
("Çop_cmds=0x%08x\txmit_cmds=0x%08x\n",

2115 
sc
->
n›_cmds
, sc->
xmô_cmds
);

2116 
	`¥ötf
(" xbds=0x%08x\txbufs=0x%08x\n\n",

2117 
sc
->
xbds
, sc->
xbufs
);

2118 
	`¥ötf
("Ñfhead=%d\trftail=%d\n",

2119 
sc
->
rfhód
, sc->
r·aû
);

2120 
	`¥ötf
("Ñbhead=%d\trbtail=%d\n",

2121 
sc
->
rbhód
, sc->
rbèû
);

2122 
	`¥ötf
("Çframes=%d\tnrxbuf=%d\trnr_expect=%d\n",

2123 
sc
->
n‰ames
, sc->
ƒxbuf
, sc->
∫r_ex≥˘
);

2124 
	`¥ötf
(" xchead=%d\txctail=%d\n",

2125 
sc
->
xchód
, sc->
x˘aû
);

2126 
	`¥ötf
(" xmit_busy=%d\txmit_req=%d\tdo_xmitnopchain=%d\n",

2127 
sc
->
xmô_busy
, sc->
xmô_ªq
, sc->
do_xmôn›chaö
);

2128 
	`¥ötf
("Öromisc=%d\tasync_cmd_inprogress=%d\n\n",

2129 
sc
->
¥omisc
, sc->
async_cmd_ö¥ogªss
);

2132 
˙t
;

2133 
ö
;

2134 
lfd⁄e
 = 0;

2135 *
èbs
;

2137 i‡(!
sc
->
åa˚_Êow_wøp
) {

2138 
˙t
 = 
sc
->
åa˚_Êow_ö
;

2139 
ö
 = 0;

2142 
˙t
 = 
I82586_TRACE_FLOW
;

2143 
ö
 = 
sc
->
åa˚_Êow_ö
;

2146 
sc
->
åa˚_Êow_ö
 = sc->
åa˚_Êow_wøp
 = 0;

2148 
˙t
 /= 2;

2150 
i
 = 0; i < 
˙t
; i++) {

2151 i‡(!
lfd⁄e
) {

2152 
sc
->
åa˚_Êow
[
ö
]) {

2153 
I82586_INTS_REQ
:

2154 
I82586_INTS_IN
:

2155 
	`¥ötf
("\n");

2159 
lfd⁄e
 = 0;

2161 i‡(
	`°æí
(
åa˚_œbñs
[
sc
->
åa˚_Êow
[
ö
]]) < 8)

2162 
èbs
 = "\t\t";

2164 
èbs
 = "\t";

2166 
	`¥ötf
(" %d\t%s%s0x%08x (%d)\n",

2167 
i
, 
åa˚_œbñs
[
sc
->
åa˚_Êow
[
ö
]], 
èbs
,

2168 
sc
->
åa˚_Êow
[
ö
 + 1], sc->trace_flow[in + 1]);

2170 
sc
->
åa˚_Êow
[
ö
]) {

2171 
I82586_INTS_REQ
:

2172 
I82586_INTS_OUT
:

2173 
lfd⁄e
 = 1;

2174 
	`¥ötf
("\n");

2177 
ö
 += 2;

2179 i‡(
ö
 >
I82586_TRACE_FLOW
)

2180 
ö
 = 0;

2183 
	}
}

2186 
	$¥öt_rbd
(
õ_so·c
 *
sc
, 
n
)

2188 
	`¥ötf
("RBDát %08x:\n status %04x,Çext %04x, buffer %lx\n"

2189 "Àngth/EOL %04x\n", 
	`IE_RBD_ADDR
(
sc
->
rbds
,
n
),

2190 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_RBD_STATUS
(sc->
rbds
,
n
)),

2191 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_RBD_NEXT
(sc->
rbds
,
n
)),

2192 (
u_l⁄g
)0,

2193 
sc
->
	`õ_bus_ªad16
(sc, 
	`IE_RBD_BUFLEN
(sc->
rbds
,
n
)));

2194 
	}
}

	@src/libchip/network/i82586reg.h

92 
	s__õ_sys_c⁄f_±r
 {

93 
u_öt16_t
 
	mmbz
;

94 
u_öt8_t
 
	mõ_bus_u£
;

95 
u_öt8_t
 
	mmbz2
[5];

96 
u_öt32_t
 
	mõ_is˝_±r
;

99 
	#IE_SCP_SZ
 12

	)

100 
	#IE_SCP_BUS_USE
(
ba£
Ë((ba£Ë+ 2)

	)

101 
	#IE_SCP_ISCP
(
ba£
Ë((ba£Ë+ 8)

	)

107 
	#IE_SCP_ADDR
 0xfffff4

	)

115 
	s__õ_öt_sys_c⁄f_±r
 {

116 
u_öt8_t
 
	mõ_busy
;

117 
u_öt8_t
 
	mmbz
;

118 
u_öt16_t
 
	mõ_scb_off£t
;

119 
ˇddr_t
 
	mõ_ba£
;

122 
	#IE_ISCP_SZ
 8

	)

123 
	#IE_ISCP_BUSY
(
ba£
Ë((ba£Ë+ 0)

	)

124 
	#IE_ISCP_SCB
(
ba£
Ë((ba£Ë+ 2)

	)

125 
	#IE_ISCP_BASE
(
ba£
Ë((ba£Ë+ 4)

	)

131 
	s__õ_sys_˘l_block
 {

132 
u_öt16_t
 
	mõ_°©us
;

133 
u_öt16_t
 
	mõ_comm™d
;

134 
u_öt16_t
 
	mõ_comm™d_li°
;

135 
u_öt16_t
 
	mõ_ªcv_li°
;

136 
u_öt16_t
 
	mõ_îr_¸c
;

137 
u_öt16_t
 
	mõ_îr_Æign
;

138 
u_öt16_t
 
	mõ_îr_ªsour˚
;

139 
u_öt16_t
 
	mõ_îr_ovîrun
;

142 
	#IE_SCB_SZ
 16

	)

143 
	#IE_SCB_STATUS
(
ba£
Ë((ba£Ë+ 0)

	)

144 
	#IE_SCB_CMD
(
ba£
Ë((ba£Ë+ 2)

	)

145 
	#IE_SCB_CMDLST
(
ba£
Ë((ba£Ë+ 4)

	)

146 
	#IE_SCB_RCVLST
(
ba£
Ë((ba£Ë+ 6)

	)

147 
	#IE_SCB_ERRCRC
(
ba£
Ë((ba£Ë+ 8)

	)

148 
	#IE_SCB_ERRALN
(
ba£
Ë((ba£Ë+ 10)

	)

149 
	#IE_SCB_ERRRES
(
ba£
Ë((ba£Ë+ 12)

	)

150 
	#IE_SCB_ERROVR
(
ba£
Ë((ba£Ë+ 14)

	)

153 
	#IE_RUC_MASK
 0x0070

	)

154 
	#IE_RUC_NOP
 0

	)

155 
	#IE_RUC_START
 0x0010

	)

156 
	#IE_RUC_RESUME
 0x0020

	)

157 
	#IE_RUC_SUSPEND
 0x0030

	)

158 
	#IE_RUC_ABORT
 0x0040

	)

160 
	#IE_CUC_MASK
 0x0700

	)

161 
	#IE_CUC_NOP
 0

	)

162 
	#IE_CUC_START
 0x0100

	)

163 
	#IE_CUC_RESUME
 0x0200

	)

164 
	#IE_CUC_SUSPEND
 0x0300

	)

165 
	#IE_CUC_ABORT
 0x0400

	)

167 
	#IE_ACK_COMMAND
 0xf000

	)

168 
	#IE_ACK_CX
 0x8000

	)

169 
	#IE_ACK_FR
 0x4000

	)

170 
	#IE_ACK_CNA
 0x2000

	)

171 
	#IE_ACK_RNR
 0x1000

	)

173 
	#IE_ACTION_COMMAND
(
x
Ë(((xË& 
IE_CUC_MASK
Ë=
IE_CUC_START
)

	)

177 
	#IE_ST_WHENCE
 0xf000

	)

178 
	#IE_ST_CX
 0x8000

	)

179 
	#IE_ST_FR
 0x4000

	)

180 
	#IE_ST_CNA
 0x2000

	)

181 
	#IE_ST_RNR
 0x1000

	)

183 
	#IE_CUS_MASK
 0x0700

	)

184 
	#IE_CUS_ACTIVE
 0x0200

	)

185 
	#IE_CUS_SUSPEND
 0x0100

	)

187 
	#IE_RUS_MASK
 0x0070

	)

188 
	#IE_RUS_SUSPEND
 0x0010

	)

189 
	#IE_RUS_NOSPACE
 0x0020

	)

190 
	#IE_RUS_READY
 0x0040

	)

196 
	s__õ_ªcv_‰ame_desc
 {

197 
u_öt16_t
 
	mõ_fd_°©us
;

198 
u_öt16_t
 
	mõ_fd_œ°
;

199 
u_öt16_t
 
	mõ_fd_√xt
;

200 
u_öt16_t
 
	mõ_fd_buf_desc
;

201 
__õ_í_addr
 
	mde°
;

202 
__õ_í_addr
 
	m§c
;

203 
u_öt16_t
 
	mõ_Àngth
;

204 
u_sh‹t
 
	mmbz
;

207 
	#IE_RFRAME_SZ
 24

	)

208 
	#IE_RFRAME_ADDR
(
ba£
,
i
Ë((ba£Ë+ (iË* 
IE_RFRAME_SZ
)

	)

209 
	#IE_RFRAME_STATUS
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 0)

	)

210 
	#IE_RFRAME_LAST
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 2)

	)

211 
	#IE_RFRAME_NEXT
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 4)

	)

212 
	#IE_RFRAME_BUFDESC
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 6)

	)

213 
	#IE_RFRAME_EDST
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 8)

	)

214 
	#IE_RFRAME_ESRC
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 14)

	)

215 
	#IE_RFRAME_ELEN
(
b
,
i
Ë(
	`IE_RFRAME_ADDR
(b,iË+ 20)

	)

218 
	#IE_FD_EOL
 0x8000

	)

219 
	#IE_FD_SUSP
 0x4000

	)

222 
	#IE_FD_COMPLETE
 0x8000

	)

223 
	#IE_FD_BUSY
 0x4000

	)

224 
	#IE_FD_OK
 0x2000

	)

225 
	#IE_FD_CRC
 0x0800

	)

226 
	#IE_FD_ALGN
 0x0400

	)

227 
	#IE_FD_RNR
 0x0200

	)

228 
	#IE_FD_OVR
 0x0100

	)

229 
	#IE_FD_SHORT
 0x0080

	)

230 
	#IE_FD_NOEOF
 0x0040

	)

231 
	#IE_FD_ERRMASK
 \

232 (
IE_FD_CRC
|
IE_FD_ALGN
|
IE_FD_RNR
|
IE_FD_OVR
|
IE_FD_SHORT
|
IE_FD_NOEOF
)

	)

233 
	#IE_FD_STATUSBITS
 \

234 "\20\20COMPLT\17BUSY\16OK\14CRC\13ALGN\12RNR\11OVR\10SHORT\7NOEOF"

	)

240 
	s__õ_ªcv_buf_desc
 {

241 
u_öt16_t
 
	mõ_rbd_°©us
;

242 
u_öt16_t
 
	mõ_rbd_√xt
;

243 
ˇddr_t
 
	mõ_rbd_buf„r
;

244 
u_öt16_t
 
	mõ_rbd_Àngth
;

245 
u_öt16_t
 
	mmbz
;

248 
	#IE_RBD_SZ
 12

	)

249 
	#IE_RBD_ADDR
(
ba£
,
i
Ë((ba£Ë+ (iË* 
IE_RBD_SZ
)

	)

250 
	#IE_RBD_STATUS
(
b
,
i
Ë(
	`IE_RBD_ADDR
(b,iË+ 0)

	)

251 
	#IE_RBD_NEXT
(
b
,
i
Ë(
	`IE_RBD_ADDR
(b,iË+ 2)

	)

252 
	#IE_RBD_BUFADDR
(
b
,
i
Ë(
	`IE_RBD_ADDR
(b,iË+ 4)

	)

253 
	#IE_RBD_BUFLEN
(
b
,
i
Ë(
	`IE_RBD_ADDR
(b,iË+ 8)

	)

256 
	#IE_RBD_LAST
 0x8000

	)

257 
	#IE_RBD_USED
 0x4000

	)

258 
	#IE_RBD_CNTMASK
 0x3ff‡

	)

261 
	#IE_RBD_EOL
 0x8000

	)

268 
	s__õ_cmd_comm⁄
 {

269 
u_öt16_t
 
	mõ_cmd_°©us
;

270 
u_öt16_t
 
	mõ_cmd_cmd
;

271 
u_öt16_t
 
	mõ_cmd_lök
;

274 
	#IE_CMD_COMMON_SZ
 6

	)

275 
	#IE_CMD_COMMON_STATUS
(
ba£
Ë((ba£Ë+ 0)

	)

276 
	#IE_CMD_COMMON_CMD
(
ba£
Ë((ba£Ë+ 2)

	)

277 
	#IE_CMD_COMMON_LINK
(
ba£
Ë((ba£Ë+ 4)

	)

279 
	#IE_STAT_COMPL
 0x8000

	)

280 
	#IE_STAT_BUSY
 0x4000

	)

281 
	#IE_STAT_OK
 0x2000

	)

282 
	#IE_STAT_ABORT
 0x1000

	)

284 
	#IE_CMD_NOP
 0x0000

	)

285 
	#IE_CMD_IASETUP
 0x0001

	)

286 
	#IE_CMD_CONFIG
 0x0002

	)

287 
	#IE_CMD_MCAST
 0x0003

	)

288 
	#IE_CMD_XMIT
 0x0004

	)

289 
	#IE_CMD_TDR
 0x0005

	)

290 
	#IE_CMD_DUMP
 0x0006

	)

291 
	#IE_CMD_DIAGNOSE
 0x0007

	)

293 
	#IE_CMD_LAST
 0x8000

	)

294 
	#IE_CMD_SUSPEND
 0x4000

	)

295 
	#IE_CMD_INTR
 0x2000

	)

300 
	#IE_CMD_NOP_SZ
 
IE_CMD_COMMON_SZ


	)

301 
	#IE_CMD_NOP_ADDR
(
ba£
,
i
Ë((ba£Ë+ (iË* 
IE_CMD_NOP_SZ
)

	)

302 
	#IE_CMD_NOP_STATUS
(
b
,
i
Ë(
	`IE_CMD_NOP_ADDR
(b,iË+ 0)

	)

303 
	#IE_CMD_NOP_CMD
(
b
,
i
Ë(
	`IE_CMD_NOP_ADDR
(b,iË+ 2)

	)

304 
	#IE_CMD_NOP_LINK
(
b
,
i
Ë(
	`IE_CMD_NOP_ADDR
(b,iË+ 4)

	)

311 
	s__õ_xmô_cmd
 {

312 
__õ_cmd_comm⁄
 
	mcom
;

313 
	#__õ_xmô_°©us
 
com
.
õ_cmd_°©us


	)

315 
u_öt16_t
 
	mõ_xmô_desc
;

316 
__õ_í_addr
 
	mõ_xmô_addr
;

317 
u_öt16_t
 
	mõ_xmô_Àngth
;

320 
	#IE_CMD_XMIT_SZ
 (
IE_CMD_COMMON_SZ
 + 10)

	)

321 
	#IE_CMD_XMIT_ADDR
(
ba£
,
i
Ë((ba£Ë+ (iË* 
IE_CMD_XMIT_SZ
)

	)

322 
	#IE_CMD_XMIT_STATUS
(
b
,
i
) \

323 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 0Ë

	)

324 
	#IE_CMD_XMIT_CMD
(
b
,
i
) \

325 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 2Ë

	)

326 
	#IE_CMD_XMIT_LINK
(
b
,
i
) \

327 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 4Ë

	)

328 
	#IE_CMD_XMIT_DESC
(
b
,
i
) \

329 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 
IE_CMD_COMMON_SZ
 + 0)

	)

330 
	#IE_CMD_XMIT_EADDR
(
b
,
i
) \

331 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 
IE_CMD_COMMON_SZ
 + 2)

	)

332 
	#IE_CMD_XMIT_LEN
(
b
,
i
) \

333 (
	`IE_CMD_XMIT_ADDR
(
b
,
i
Ë+ 
IE_CMD_COMMON_SZ
 + 8)

	)

335 
	#IE_XS_MAXCOLL
 0x000‡

	)

336 
	#IE_XS_EXCMAX
 0x0020

	)

337 
	#IE_XS_SQE
 0x0040

	)

338 
	#IE_XS_DEFERRED
 0x0080

	)

339 
	#IE_XS_UNDERRUN
 0x0100

	)

340 
	#IE_XS_LOSTCTS
 0x0200

	)

341 
	#IE_XS_NOCARRIER
 0x0400

	)

342 
	#IE_XS_LATECOLL
 0x0800

	)

348 
	s__õ_xmô_buf
 {

349 
u_öt16_t
 
	mõ_xmô_Êags
;

350 
u_öt16_t
 
	mõ_xmô_√xt
;

351 
ˇddr_t
 
	mõ_xmô_buf
;

354 
	#IE_XBD_SZ
 8

	)

355 
	#IE_XBD_ADDR
(
ba£
,
i
Ë((ba£Ë+ (iË* 
IE_XBD_SZ
)

	)

356 
	#IE_XBD_FLAGS
(
b
,
i
Ë(
	`IE_XBD_ADDR
(b,iË+ 0)

	)

357 
	#IE_XBD_NEXT
(
b
,
i
Ë(
	`IE_XBD_ADDR
(b,iË+ 2)

	)

358 
	#IE_XBD_BUF
(
b
,
i
Ë(
	`IE_XBD_ADDR
(b,iË+ 4)

	)

360 
	#IE_TBD_EOL
 0x8000

	)

361 
	#IE_TBD_CNTMASK
 0x3ff‡

	)

369 
	s__õ_mˇ°_cmd
 {

370 
__õ_cmd_comm⁄
 
	mcom
;

371 
	#õ_mˇ°_°©us
 
com
.
õ_cmd_°©us


	)

374 
u_sh‹t
 
	mõ_mˇ°_byãs
;

375 
__õ_í_addr
 
	mõ_mˇ°_addrs
[
IE_MAXMCAST
 + 1];

378 
	#IE_CMD_MCAST_SZ
 (
IE_CMD_COMMON_SZ
 + 2 )

	)

379 
	#IE_CMD_MCAST_BYTES
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 0)

	)

380 
	#IE_CMD_MCAST_MADDR
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 2)

	)

386 
	s__õ_tdr_cmd
 {

387 
__õ_cmd_comm⁄
 
	mcom
;

388 
	#õ_tdr_°©us
 
com
.
õ_cmd_°©us


	)

389 
u_sh‹t
 
	mõ_tdr_time
;

392 
	#IE_CMD_TDR_SZ
 (
IE_CMD_COMMON_SZ
 + 2)

	)

393 
	#IE_CMD_TDR_TIME
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 0)

	)

395 
	#IE_TDR_SUCCESS
 0x8000

	)

396 
	#IE_TDR_XCVR
 0x4000

	)

397 
	#IE_TDR_OPEN
 0x2000

	)

398 
	#IE_TDR_SHORT
 0x1000

	)

399 
	#IE_TDR_TIME
 0x07f‡

	)

405 
	s__õ_ü£tup_cmd
 {

406 
__õ_cmd_comm⁄
 
	mcom
;

407 
	#õ_ü£tup_°©us
 
com
.
õ_cmd_°©us


	)

408 
__õ_í_addr
 
	mõ_addªss
;

411 
	#IE_CMD_IAS_SZ
 (
IE_CMD_COMMON_SZ
 + 6)

	)

412 
	#IE_CMD_IAS_EADDR
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 0)

	)

418 
	s__õ_c⁄fig_cmd
 {

419 
__õ_cmd_comm⁄
 
	mcom
;

420 
	#õ_c⁄fig_°©us
 
com
.
õ_cmd_°©us


	)

422 
u_öt8_t
 
	mõ_c⁄fig_cou¡
;

423 
u_öt8_t
 
	mõ_fifo
;

424 
u_öt8_t
 
	mõ_ßve_bad
;

425 
u_öt8_t
 
	mõ_addr_Àn
;

426 
u_öt8_t
 
	mõ_¥i‹ôy
;

427 
u_öt8_t
 
	mõ_ifs
;

428 
u_öt8_t
 
	mõ_¶Ÿ_low
;

429 
u_öt8_t
 
	mõ_¶Ÿ_high
;

430 
u_öt8_t
 
	mõ_¥omisc
;

431 
u_öt8_t
 
	mõ_¸s_cdt
;

432 
u_öt8_t
 
	mõ_mö_Àn
;

433 
u_öt8_t
 
	mõ_junk
;

436 
	#IE_CMD_CFG_SZ
 (
IE_CMD_COMMON_SZ
 + 12)

	)

437 
	#IE_CMD_CFG_CNT
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 0)

	)

438 
	#IE_CMD_CFG_FIFO
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 1)

	)

439 
	#IE_CMD_CFG_SAVEBAD
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 2)

	)

440 
	#IE_CMD_CFG_ADDRLEN
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 3)

	)

441 
	#IE_CMD_CFG_PRIORITY
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 4)

	)

442 
	#IE_CMD_CFG_IFS
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 5)

	)

443 
	#IE_CMD_CFG_SLOT_LOW
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 6)

	)

444 
	#IE_CMD_CFG_SLOT_HIGH
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 7)

	)

445 
	#IE_CMD_CFG_PROMISC
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 8)

	)

446 
	#IE_CMD_CFG_CRSCDT
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 9)

	)

447 
	#IE_CMD_CFG_MINLEN
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 10)

	)

448 
	#IE_CMD_CFG_JUNK
(
ba£
Ë((ba£Ë+ 
IE_CMD_COMMON_SZ
 + 11)

	)

	@src/libchip/network/i82586var.h

100 #i‚de‡
I82586_DEBUG


101 
	#I82586_DEBUG
 0

	)

105 
	#IED_RINT
 0x01

	)

106 
	#IED_TINT
 0x02

	)

107 
	#IED_RNR
 0x04

	)

108 
	#IED_CNA
 0x08

	)

109 
	#IED_READFRAME
 0x10

	)

110 
	#IED_ENQ
 0x20

	)

111 
	#IED_XMIT
 0x40

	)

112 
	#IED_ALL
 0x7f

	)

114 
	#B_PER_F
 3

	)

115 
	#IE_RBUF_SIZE
 256

	)

117 
	#NTXBUF
 2

	)

118 
	#IE_TBUF_SIZE
 
ETHER_MAX_LEN


	)

120 
	#IE_MAXMCAST
 (
IE_TBUF_SIZE
/6)

	)

123 
	#INTR_ENTER
 0

	)

124 
	#INTR_EXIT
 1

	)

125 
	#INTR_LOOP
 2

	)

126 
	#INTR_ACK
 3

	)

128 
	#CHIP_PROBE
 0

	)

129 
	#CARD_RESET
 1

	)

131 #i‡
I82586_DEBUG


132 
	#I82586_INTS_REQ
 0

	)

133 
	#I82586_INTS_IN
 1

	)

134 
	#I82586_INTS_LOOPS
 2

	)

135 
	#I82586_INTS_OUT
 3

	)

136 
	#I82586_RX_INT
 4

	)

137 
	#I82586_RX_DROP
 5

	)

138 
	#I82586_RX_ERR
 6

	)

139 
	#I82586_RX_OK
 7

	)

140 
	#I82586_RX_START
 8

	)

141 
	#I82586_START_TX
 9

	)

142 
	#I82586_TX_START
 10

	)

143 
	#I82586_TX_INT
 11

	)

144 
	#I82586_TX_REQ
 12

	)

145 
	#I82586_TX_EVT
 13

	)

146 
	#I82586_TX_EMIT
 14

	)

147 
	#I82586_TX_BAD
 15

	)

148 
	#I82586_TX_ACTIVE
 16

	)

149 
	#I82586_TRACE_CNT
 17

	)

151 
	#I82586_TRACE_FLOW
 (10000)

	)

198 
	sõ_so·c
 {

199 
¨pcom
 
	m¨pcom
;

206 
πems_id
 
	möå_èsk
;

207 
πems_id
 
	mtx_èsk
;

209 *
	msc_ioba£
;

210 *
	msc_maddr
;

212 
u_öt
 
	msc_msize
;

215 (*
	mhwª£t
Ë(
	mõ_so·c
 *, );

216 (*
	mhwöô
Ë(
	mõ_so·c
 *);

217 (*
	mch™_©ä
Ë(
	mõ_so·c
 *, );

218 (*
	möåhook
Ë(
	mõ_so·c
 *, 
	mwhîe
);

220 (*
	mmemc›yö
Ë(
	mõ_so·c
 *, *, , 
	msize_t
);

221 (*
	mmemc›yout
Ë(
	mõ_so·c
 *, const *,

222 , 
	msize_t
);

223 
u_öt16_t
 (*
õ_bus_ªad16
Ë(
	mõ_so·c
 *, 
	moff£t
);

224 (*
	mõ_bus_wrôe16
Ë(
	mõ_so·c
 *, 
	moff£t
,

225 
u_öt16_t
 
	mvÆue
);

226 (*
	mõ_bus_wrôe24
Ë(
	mõ_so·c
 *, 
	moff£t
,

227 
	maddr
);

228 (*
	mõ_bus_b¨rõr
Ë(
	mõ_so·c
 *, 
	moff£t
,

229 
	mÀngth
, 
	mÊags
);

232 (*
	msc_medüch™ge
Ë(
	mõ_so·c
 *);

234 (*
	msc_medü°©us
Ë(
	mõ_so·c
 *, 
	mifmedüªq
 *);

240 
	ms˝
;

241 
	mis˝
;

242 
	mscb
;

248 
	mbuf_¨ó
;

249 
	mbuf_¨ó_sz
;

254 
	mr‰ames
;

255 
	mrbds
;

256 
	mrbufs
;

257 
	#IE_RBUF_ADDR
(
sc
, 
i
Ë(sc->
rbufs
 + ((iË* 
IE_RBUF_SIZE
))

	)

258 
	mrfhód
, 
	mr·aû
;

259 
	mrbhód
, 
	mrbèû
;

260 
	mn‰ames
;

261 
	mƒxbuf
;

262 
	m∫r_ex≥˘
;

264 
	mn›_cmds
;

265 
	mxmô_cmds
;

266 
	mxbds
;

267 
	mxbufs
;

268 
	#IE_XBUF_ADDR
(
sc
, 
i
Ë(sc->
xbufs
 + ((iË* 
IE_TBUF_SIZE
))

	)

270 
	mxchód
, 
	mx˘aû
;

271 
	mxmô_busy
;

272 
	mdo_xmôn›chaö
;

273 
	mxmô_ªq
;

276 *
	mmˇ°_addrs
;

277 
	mmˇ°_addrs_size
;

278 
	mmˇ°_cou¡
;

279 
	mw™t_mc£tup
;

281 
	m¥omisc
;

282 
	masync_cmd_ö¥ogªss
;

285 #i‡
I82586_DEBUG


286 
	#I82586_TRACE
(
s
, 
e
, 
d
) \

287 dÿ{ 
πems_öãºu±_Àvñ
 
Àvñ
; 
	`πems_öãºu±_dißbÀ
 (level); \

288 (
s
)->
åa˚_Êow
[(s)->
åa˚_Êow_ö
++] = (
e
); \

289 (
s
)->
åa˚_Êow
[(s)->
åa˚_Êow_ö
++] = ()(
d
); \

290 i‡((
s
)->
åa˚_Êow_ö
 >
I82586_TRACE_FLOW
) { \

291 (
s
)->
åa˚_Êow_ö
 = 0; \

292 (
s
)->
åa˚_Êow_wøp
 = 1; \

294 
	`πems_öãºu±_íabÀ
 (
Àvñ
); \

295 } 0)

	)

297 
	msc_debug
;

298 
	måa˚_Êow
[
I82586_TRACE_FLOW
 * 2];

299 
	måa˚_Êow_wøp
;

301 
	måa˚_Êow_ö
;

305 
πems_i§
 
i82586_öå
 (
πems_ve˘‹_numbî
 , *);

306 
i82586_¥obîam
 (
õ_so·c
 *);

307 
i82586_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
);

310 
	#xIE_BUS_BARRIER
(
sc
, 
off£t
, 
Àngth
, 
Êags
) \

312 i‡((
sc
)->
õ_bus_b¨rõr
) \

313 ((
sc
)->
õ_bus_b¨rõr
)((sc), (
off£t
), (
Àngth
), (
Êags
));\

315 
	`bus_•a˚_b¨rõr
((
sc
)->
bt
, (sc)->
bh
, (
off£t
), (
Àngth
), \

316 (
Êags
)); \

317 } 0)

	)

319 
	#IE_BUS_BARRIER
(
sc
, 
off£t
, 
Àngth
, 
Êags
)

	)

	@src/libchip/network/if_dc.c

102 #i‡
deföed
(
DRIVER_SUPPORTED
)

103 #unde‡
DRIVER_SUPPORTED


106 #i‡
deföed
(
__i386__
)

107 
	#DRIVER_SUPPORTED


	)

110 #i‡
deföed
(
__PPC__
)

111 
	#DRIVER_SUPPORTED


	)

114 
	~<b•.h
>

116 #i‡!
deföed
(
PCI_DRAM_OFFSET
)

117 #unde‡
DRIVER_SUPPORTED


120 #i‡
deföed
(
DRIVER_SUPPORTED
)

121 
	~<πems/pci.h
>

123 
	~<πems/îr‹.h
>

124 
	~<î∫o.h
>

125 
	~<πems/πems_bsd√t.h
>

127 
	~<√t/if_ty≥s.h
>

129 
	~<sys/∑øm.h
>

130 
	~<sys/sockio.h
>

131 
	~<sys/sockë.h
>

132 
	~<sys/mbuf.h
>

133 
	~<√t/if.h
>

134 
	~<√töë/ö.h
>

135 
	~<√töë/if_ëhî.h
>

136 
	~<sys/mÆloc.h
>

137 
	~<sys/sy°m.h
>

138 
	~<b•.h
>

143 
	~<√t/if_medü.h
>

144 
	~<πems/pci.h
>

150 
	~<vm/vm.h
>

153 
	#vt›hys
(
p
Ë(
uöçå_t
)’)

	)

162 
	~<vm/pm≠.h
>

163 
	~<machöe/˛ock.h
>

164 
	~<machöe/bus_pio.h
>

165 
	~<machöe/bus_memio.h
>

166 
	~<machöe/bus.h
>

167 
	~<machöe/ªsour˚.h
>

168 
	~<sys/bus.h
>

169 
	~<sys/rm™.h
>

171 
	~<dev/mii/mii.h
>

173 
	~<dev/mii/miiv¨.h
>

175 
	~<pci/pcúeg.h
>

176 
	~<pci/pciv¨.h
>

183 #ifde‡
__Æpha__


184 
	#SRM_MEDIA


	)

187 
	~<b•/úq.h
>

190 
	~"if_d¸eg.h
"

193 
	#DRIVER_PREFIX
 "é"

	)

194 
	#NDRIVER
 1

	)

195 
	#IRQ_EVENT
 
RTEMS_EVENT_13


	)

196 
dc_so·c
 
	gdc_so·c_devs
[
NDRIVER
];

198 
	#UNUSED


	)

202 
	~"miibus_if.h
"

206 #i‚de‡
löt


207 c⁄° 
	grcsid
[] =

220 
dc_ty≥
 
	gdc_devs
[] = {

221 { 
DC_VENDORID_DEC
, 
DC_DEVICEID_21143
,

223 { 
DC_VENDORID_DAVICOM
, 
DC_DEVICEID_DM9009
,

225 { 
DC_VENDORID_DAVICOM
, 
DC_DEVICEID_DM9100
,

227 { 
DC_VENDORID_DAVICOM
, 
DC_DEVICEID_DM9102
,

229 { 
DC_VENDORID_DAVICOM
, 
DC_DEVICEID_DM9102
,

231 { 
DC_VENDORID_ADMTEK
, 
DC_DEVICEID_AL981
,

233 { 
DC_VENDORID_ADMTEK
, 
DC_DEVICEID_AN985
,

235 { 
DC_VENDORID_ASIX
, 
DC_DEVICEID_AX88140A
,

237 { 
DC_VENDORID_ASIX
, 
DC_DEVICEID_AX88140A
,

239 { 
DC_VENDORID_MX
, 
DC_DEVICEID_98713
,

241 { 
DC_VENDORID_MX
, 
DC_DEVICEID_98713
,

243 { 
DC_VENDORID_CP
, 
DC_DEVICEID_98713_CP
,

245 { 
DC_VENDORID_CP
, 
DC_DEVICEID_98713_CP
,

247 { 
DC_VENDORID_MX
, 
DC_DEVICEID_987x5
,

249 { 
DC_VENDORID_MX
, 
DC_DEVICEID_987x5
,

251 { 
DC_VENDORID_MX
, 
DC_DEVICEID_987x5
,

253 { 
DC_VENDORID_MX
, 
DC_DEVICEID_98727
,

255 { 
DC_VENDORID_LO
, 
DC_DEVICEID_82C115
,

257 { 
DC_VENDORID_LO
, 
DC_DEVICEID_82C168
,

259 { 
DC_VENDORID_LO
, 
DC_DEVICEID_82C168
,

261 { 
DC_VENDORID_ACCTON
, 
DC_DEVICEID_EN1217
,

263 { 
DC_VENDORID_ACCTON
, 
DC_DEVICEID_EN2242
,

265 { 
DC_VENDORID_CONEXANT
, 
DC_DEVICEID_RS7112
,

267 { 0, 0, 
NULL
, 0 }

271 
dc_¥obe
 
__P
((
devi˚_t
));

272 
dc_©èch
 
__P
((
devi˚_t
));

273 
dc_dëach
 
__P
((
devi˚_t
));

274 
dc_su•íd
 
__P
((
devi˚_t
));

275 
dc_ªsume
 
__P
((
devi˚_t
));

276 
dc_shutdown
 
__P
((
devi˚_t
));

277 
dc_a˝i
 
__P
((
devi˚_t
));

280 
dc_ty≥
 *
dc_devty≥
();

281 
dc_√wbuf
(
dc_so·c
 *, , 
mbuf
 *);

282 
dc_íˇp
(
dc_so·c
 *, 
mbuf
 *,

283 
u_öt32_t
 *);

284 
dc_cﬂl
(
dc_so·c
 *, 
mbuf
 **);

285 
dc_≤ic_rx_bug_w¨
(
dc_so·c
 *, );

286 
dc_rx_ªsync
(
dc_so·c
 *);

287 
dc_rxeof
(
dc_so·c
 *);

288 
dc_txeof
(
dc_so·c
 *);

290 
dc_tx_undîrun
(
dc_so·c
 *);

291 
dc_öå
(*);

292 
dc_d´m⁄
(*);

293 
dc_°¨t
(
i‚ë
 *);

294 
dc_io˘l
(
i‚ë
 *, 
io˘l_comm™d_t
, 
ˇddr_t
);

295 
dc_öô
(*);

296 
dc_°›
(
dc_so·c
 *);

297 
dc_w©chdog
(
i‚ë
 *);

299 
dc_ifmedü_upd
 
__P
((
i‚ë
 *));

300 
dc_ifmedü_°s
 
__P
((
i‚ë
 *, 
ifmedüªq
 *));

303 
dc_dñay
(
dc_so·c
 *);

304 
dc_ì¥om_idÀ
(
dc_so·c
 *);

305 
dc_ì¥om_putbyã
(
dc_so·c
 *, );

306 
dc_ì¥om_gëw‹d
(
dc_so·c
 *, , 
u_öt16_t
 *);

307 
dc_ì¥om_gëw‹d_≤ic
(
dc_so·c
 *, , 
u_öt16_t
 *);

308 
dc_ì¥om_width
(
dc_so·c
 *);

309 
dc_ªad_ì¥om
(
dc_so·c
 *, 
ˇddr_t
, ,, );

312 
dc_mii_wrôebô
 
__P
((
dc_so·c
 *, ));

313 
dc_mii_ªadbô
 
__P
((
dc_so·c
 *));

314 
dc_mii_sync
 
__P
((
dc_so·c
 *));

315 
dc_mii_£nd
 
__P
((
dc_so·c
 *, 
u_öt32_t
, ));

316 
dc_mii_ªadªg
 
__P
((
dc_so·c
 *, 
dc_mii_‰ame
 *));

317 
dc_mii_wrôîeg
 
__P
((
dc_so·c
 *, 
dc_mii_‰ame
 *));

318 
dc_miibus_ªadªg
 
__P
((
devi˚_t
, , ));

319 
dc_miibus_wrôîeg
 
__P
((
devi˚_t
, , , ));

320 
dc_miibus_°©chg
 
__P
((
devi˚_t
));

321 
dc_miibus_medüöô
 
__P
((
devi˚_t
));

324 
dc_£tcfg
(
dc_so·c
 *, );

325 
u_öt32_t
 
dc_¸c_À
(
dc_so·c
 *, 
ˇddr_t
);

326 #i‚de‡
UNUSED


327 
u_öt32_t
 
dc_¸c_be
(
ˇddr_t
);

329 
dc_£tfût_21143
(
dc_so·c
 *);

330 
dc_£tfût_asix
(
dc_so·c
 *);

331 
dc_£tfût_admãk
(
dc_so·c
 *);

332 
dc_£tfût
(
dc_so·c
 *);

333 
dc_ª£t
(
dc_so·c
 *);

334 
dc_li°_rx_öô
(
dc_so·c
 *);

335 
dc_li°_tx_öô
(
dc_so·c
 *);

336 
dc_ªad_§om
(
dc_so·c
 *, );

337 
dc_∑r£_21143_§om
(
dc_so·c
 *);

338 
dc_≠∂y_fixup
(
dc_so·c
 *, );

341 
dc_decode_Àaf_sü
 
__P
((
dc_so·c
 *,

342 
dc_eblock_sü
 *));

343 
dc_decode_Àaf_mii
 
__P
((
dc_so·c
 *,

344 
dc_eblock_mii
 *));

345 
dc_decode_Àaf_sym
 
__P
((
dc_so·c
 *,

346 
dc_eblock_sym
 *));

350 #ifde‡
DC_USEIOSPACE


351 
	#DC_RES
 
SYS_RES_IOPORT


	)

352 
	#DC_RID
 
DC_PCI_CFBIO


	)

354 
	#DC_RES
 
SYS_RES_MEMORY


	)

355 
	#DC_RID
 
DC_PCI_CFBMA


	)

359 
devi˚_mëhod_t
 
	gdc_mëhods
[] = {

361 
DEVMETHOD
(
devi˚_¥obe
, 
dc_¥obe
),

362 
DEVMETHOD
(
devi˚_©èch
, 
dc_©èch
),

363 
DEVMETHOD
(
devi˚_dëach
, 
dc_dëach
),

364 
DEVMETHOD
(
devi˚_su•íd
, 
dc_su•íd
),

365 
DEVMETHOD
(
devi˚_ªsume
, 
dc_ªsume
),

366 
DEVMETHOD
(
devi˚_shutdown
, 
dc_shutdown
),

369 
DEVMETHOD
(
bus_¥öt_chûd
, 
bus_gíîic_¥öt_chûd
),

370 
DEVMETHOD
(
bus_drivî_added
, 
bus_gíîic_drivî_added
),

373 
DEVMETHOD
(
miibus_ªadªg
, 
dc_miibus_ªadªg
),

374 
DEVMETHOD
(
miibus_wrôîeg
, 
dc_miibus_wrôîeg
),

375 
DEVMETHOD
(
miibus_°©chg
, 
dc_miibus_°©chg
),

376 
DEVMETHOD
(
miibus_medüöô
, 
dc_miibus_medüöô
),

381 
drivî_t
 
	gdc_drivî
 = {

383 
dc_mëhods
,

384 (
dc_so·c
)

387 
dev˛ass_t
 
	gdc_dev˛ass
;

391 #ifde‡
__i386__


392 
	gdc_quick
=1;

394 
SYSCTL_INT
(
_hw
, 
OID_AUTO
, 
dc_quick
, 
CTLFLAG_RW
,

395 &
dc_quick
,0,"doÇot mdevget in dc driver");

400 
DRIVER_MODULE
(
if_dc
, 
pci
, 
dc_drivî
, 
dc_dev˛ass
, 0, 0);

401 
DRIVER_MODULE
(
miibus
, 
dc
, 
miibus_drivî
, 
miibus_dev˛ass
, 0, 0);

405 
	#DC_SETBIT
(
sc
, 
ªg
, 
x
) \

406 
	`CSR_WRITE_4
(
sc
, 
ªg
, 
	`CSR_READ_4
(sc,ÑegË| (
x
))

	)

408 
	#DC_CLRBIT
(
sc
, 
ªg
, 
x
) \

409 
	`CSR_WRITE_4
(
sc
, 
ªg
, 
	`CSR_READ_4
(sc,ÑegË& ~(
x
))

	)

411 
	#SIO_SET
(
x
Ë
	`DC_SETBIT
(
sc
, 
DC_SIO
, (x))

	)

412 
	#SIO_CLR
(
x
Ë
	`DC_CLRBIT
(
sc
, 
DC_SIO
, (x))

	)

420 #ifde‡
__i386__


421 
Waô_X_ms
( );

422 
	#DELAY
(
n
Ë
	`Waô_X_ms
–()(“)/100Ë)

	)

424 
	#DELAY
(
n
Ë
	`πems_b•_dñay
“)

	)

428 
	$dc_dñay
(
sc
)

429 
dc_so·c
 *
sc
;

431 
idx
;

433 
idx
 = (300 / 33) + 1; idx > 0; idx--)

434 
	`CSR_READ_4
(
sc
, 
DC_BUSCTL
);

435 
	}
}

437 
	$dc_ì¥om_width
(
sc
)

438 
dc_so·c
 *
sc
;

440 
i
;

443 
	`dc_ì¥om_idÀ
(
sc
);

446 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_EESEL
);

447 
	`dc_dñay
(
sc
);

448 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_READ
);

449 
	`dc_dñay
(
sc
);

450 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

451 
	`dc_dñay
(
sc
);

452 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CS
);

453 
	`dc_dñay
(
sc
);

455 
i
 = 3; i--;) {

456 i‡(6 & (1 << 
i
))

457 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_DATAIN
);

459 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_DATAIN
);

460 
	`dc_dñay
(
sc
);

461 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

462 
	`dc_dñay
(
sc
);

463 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

464 
	`dc_dñay
(
sc
);

467 
i
 = 1; i <= 12; i++) {

468 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

469 
	`dc_dñay
(
sc
);

470 i‡(!(
	`CSR_READ_4
(
sc
, 
DC_SIO
Ë& 
DC_SIO_EE_DATAOUT
)) {

471 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

472 
	`dc_dñay
(
sc
);

475 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

476 
	`dc_dñay
(
sc
);

480 
	`dc_ì¥om_idÀ
(
sc
);

482 i‡(
i
 < 4 || i > 12)

483 
sc
->
dc_romwidth
 = 6;

485 
sc
->
dc_romwidth
 = 
i
;

488 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_EESEL
);

489 
	`dc_dñay
(
sc
);

490 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_READ
);

491 
	`dc_dñay
(
sc
);

492 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

493 
	`dc_dñay
(
sc
);

494 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CS
);

495 
	`dc_dñay
(
sc
);

498 
	`dc_ì¥om_idÀ
(
sc
);

499 
	}
}

501 
	$dc_ì¥om_idÀ
(
sc
)

502 
dc_so·c
 *
sc
;

504 
i
;

506 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_EESEL
);

507 
	`dc_dñay
(
sc
);

508 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_READ
);

509 
	`dc_dñay
(
sc
);

510 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

511 
	`dc_dñay
(
sc
);

512 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CS
);

513 
	`dc_dñay
(
sc
);

515 
i
 = 0; i < 25; i++) {

516 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

517 
	`dc_dñay
(
sc
);

518 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

519 
	`dc_dñay
(
sc
);

522 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

523 
	`dc_dñay
(
sc
);

524 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CS
);

525 
	`dc_dñay
(
sc
);

526 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 0x00000000);

529 
	}
}

534 
	$dc_ì¥om_putbyã
(
sc
, 
addr
)

535 
dc_so·c
 *
sc
;

536 
addr
;

538 
d
, 
i
;

540 
d
 = 
DC_EECMD_READ
 >> 6;

541 
i
 = 3; i--; ) {

542 i‡(
d
 & (1 << 
i
))

543 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_DATAIN
);

545 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_DATAIN
);

546 
	`dc_dñay
(
sc
);

547 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

548 
	`dc_dñay
(
sc
);

549 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

550 
	`dc_dñay
(
sc
);

556 
i
 = 
sc
->
dc_romwidth
; i--;) {

557 i‡(
addr
 & (1 << 
i
)) {

558 
	`SIO_SET
(
DC_SIO_EE_DATAIN
);

560 
	`SIO_CLR
(
DC_SIO_EE_DATAIN
);

562 
	`dc_dñay
(
sc
);

563 
	`SIO_SET
(
DC_SIO_EE_CLK
);

564 
	`dc_dñay
(
sc
);

565 
	`SIO_CLR
(
DC_SIO_EE_CLK
);

566 
	`dc_dñay
(
sc
);

570 
	}
}

577 
	$dc_ì¥om_gëw‹d_≤ic
(
sc
, 
addr
, 
de°
)

578 
dc_so·c
 *
sc
;

579 
addr
;

580 
u_öt16_t
 *
de°
;

582 
i
;

583 
u_öt32_t
 
r
;

585 
	`CSR_WRITE_4
(
sc
, 
DC_PN_SIOCTL
, 
DC_PN_EEOPCODE_READ
|
addr
);

587 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

588 
	`DELAY
(1);

589 
r
 = 
	`CSR_READ_4
(
sc
, 
DC_SIO
);

590 i‡(!(
r
 & 
DC_PN_SIOCTL_BUSY
)) {

591 *
de°
 = (
u_öt16_t
)(
r
 & 0xFFFF);

597 
	}
}

602 
	$dc_ì¥om_gëw‹d
(
sc
, 
addr
, 
de°
)

603 
dc_so·c
 *
sc
;

604 
addr
;

605 
u_öt16_t
 *
de°
;

607 
i
;

608 
u_öt16_t
 
w‹d
 = 0;

611 
	`dc_ì¥om_idÀ
(
sc
);

614 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_EESEL
);

615 
	`dc_dñay
(
sc
);

616 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_READ
);

617 
	`dc_dñay
(
sc
);

618 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CLK
);

619 
	`dc_dñay
(
sc
);

620 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_EE_CS
);

621 
	`dc_dñay
(
sc
);

626 
	`dc_ì¥om_putbyã
(
sc
, 
addr
);

631 
i
 = 0x8000; i; i >>= 1) {

632 
	`SIO_SET
(
DC_SIO_EE_CLK
);

633 
	`dc_dñay
(
sc
);

634 i‡(
	`CSR_READ_4
(
sc
, 
DC_SIO
Ë& 
DC_SIO_EE_DATAOUT
)

635 
w‹d
 |
i
;

636 
	`dc_dñay
(
sc
);

637 
	`SIO_CLR
(
DC_SIO_EE_CLK
);

638 
	`dc_dñay
(
sc
);

642 
	`dc_ì¥om_idÀ
(
sc
);

644 *
de°
 = 
w‹d
;

647 
	}
}

652 
	$dc_ªad_ì¥om
(
sc
, 
de°
, 
off
, 
˙t
, 
sw≠
)

653 
dc_so·c
 *
sc
;

654 
ˇddr_t
 
de°
;

655 
off
;

656 
˙t
;

657 
sw≠
;

659 
i
;

660 
u_öt16_t
 
w‹d
 = 0, *
±r
;

662 
i
 = 0; i < 
˙t
; i++) {

663 i‡(
	`DC_IS_PNIC
(
sc
))

664 
	`dc_ì¥om_gëw‹d_≤ic
(
sc
, 
off
 + 
i
, &
w‹d
);

666 
	`dc_ì¥om_gëw‹d
(
sc
, 
off
 + 
i
, &
w‹d
);

667 
±r
 = (
u_öt16_t
 *)(
de°
 + (
i
 * 2));

668 i‡(
sw≠
)

669 *
±r
 = 
	`¡ohs
(
w‹d
);

671 *
±r
 = 
w‹d
;

675 
	}
}

686 
	$dc_mii_wrôebô
(
sc
, 
bô
)

687 
dc_so·c
 *
sc
;

688 
bô
;

690 i‡(
bô
)

691 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
,

692 
DC_SIO_ROMCTL_WRITE
|
DC_SIO_MII_DATAOUT
);

694 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_WRITE
);

696 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_MII_CLK
);

697 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_MII_CLK
);

700 
	}
}

705 
	$dc_mii_ªadbô
(
sc
)

706 
dc_so·c
 *
sc
;

708 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_READ
|
DC_SIO_MII_DIR
);

709 
	`CSR_READ_4
(
sc
, 
DC_SIO
);

710 
	`DC_SETBIT
(
sc
, 
DC_SIO
, 
DC_SIO_MII_CLK
);

711 
	`DC_CLRBIT
(
sc
, 
DC_SIO
, 
DC_SIO_MII_CLK
);

712 i‡(
	`CSR_READ_4
(
sc
, 
DC_SIO
Ë& 
DC_SIO_MII_DATAIN
)

716 
	}
}

721 
	$dc_mii_sync
(
sc
)

722 
dc_so·c
 *
sc
;

724 
i
;

726 
	`CSR_WRITE_4
(
sc
, 
DC_SIO
, 
DC_SIO_ROMCTL_WRITE
);

728 
i
 = 0; i < 32; i++)

729 
	`dc_mii_wrôebô
(
sc
, 1);

732 
	}
}

737 
	$dc_mii_£nd
(
sc
, 
bôs
, 
˙t
)

738 
dc_so·c
 *
sc
;

739 
u_öt32_t
 
bôs
;

740 
˙t
;

742 
i
;

744 
i
 = (0x1 << (
˙t
 - 1)); i; i >>= 1)

745 
	`dc_mii_wrôebô
(
sc
, 
bôs
 & 
i
);

746 
	}
}

751 
	$dc_mii_ªadªg
(
sc
, 
‰ame
)

752 
dc_so·c
 *
sc
;

753 
dc_mii_‰ame
 *
‰ame
;

756 
i
, 
ack
, 
s
;

762 
‰ame
->
mii_°dñim
 = 
DC_MII_STARTDELIM
;

763 
‰ame
->
mii_›code
 = 
DC_MII_READOP
;

764 
‰ame
->
mii_tu∫¨ound
 = 0;

765 
‰ame
->
mii_d©a
 = 0;

770 
	`dc_mii_sync
(
sc
);

775 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_°dñim
, 2);

776 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_›code
, 2);

777 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_phyaddr
, 5);

778 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_ªgaddr
, 5);

780 #ifde‡
nŸdef


782 
	`dc_mii_wrôebô
(
sc
, 1);

783 
	`dc_mii_wrôebô
(
sc
, 0);

787 
ack
 = 
	`dc_mii_ªadbô
(
sc
);

793 i‡(
ack
) {

794 
i
 = 0; i < 16; i++) {

795 
	`dc_mii_ªadbô
(
sc
);

797 
Áû
;

800 
i
 = 0x8000; i; i >>= 1) {

801 i‡(!
ack
) {

802 i‡(
	`dc_mii_ªadbô
(
sc
))

803 
‰ame
->
mii_d©a
 |
i
;

807 
Áû
:

809 
	`dc_mii_wrôebô
(
sc
, 0);

810 
	`dc_mii_wrôebô
(
sc
, 0);

813 i‡(
ack
)

816 
	}
}

821 
	$dc_mii_wrôîeg
(
sc
, 
‰ame
)

822 
dc_so·c
 *
sc
;

823 
dc_mii_‰ame
 *
‰ame
;

826 
s
;

832 
‰ame
->
mii_°dñim
 = 
DC_MII_STARTDELIM
;

833 
‰ame
->
mii_›code
 = 
DC_MII_WRITEOP
;

834 
‰ame
->
mii_tu∫¨ound
 = 
DC_MII_TURNAROUND
;

839 
	`dc_mii_sync
(
sc
);

841 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_°dñim
, 2);

842 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_›code
, 2);

843 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_phyaddr
, 5);

844 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_ªgaddr
, 5);

845 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_tu∫¨ound
, 2);

846 
	`dc_mii_£nd
(
sc
, 
‰ame
->
mii_d©a
, 16);

849 
	`dc_mii_wrôebô
(
sc
, 0);

850 
	`dc_mii_wrôebô
(
sc
, 0);

854 
	}
}

856 
	$dc_miibus_ªadªg
(
dev
, 
phy
, 
ªg
)

857 
devi˚_t
 
dev
;

858 
phy
, 
ªg
;

860 
dc_mii_‰ame
 
‰ame
;

861 
dc_so·c
 *
sc
;

862 
i
, 
rvÆ
, 
phy_ªg
 = 0;

864 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

865 
	`bzîo
((*)&
‰ame
, (frame));

876 i‡(
	`DC_IS_ADMTEK
(
sc
Ë&& 
phy
 !
DC_ADMTEK_PHYADDR
)

884 i‡(
	`DC_IS_CONEXANT
(
sc
Ë&& 
phy
 !
DC_CONEXANT_PHYADDR
)

887 i‡(
sc
->
dc_pmode
 !
DC_PMODE_MII
) {

888 i‡(
phy
 =(
MII_NPHY
 - 1)) {

889 
ªg
) {

890 
MII_BMSR
:

895 (
BMSR_MEDIAMASK
);

897 
MII_PHYIDR1
:

898 i‡(
	`DC_IS_PNIC
(
sc
))

899 (
DC_VENDORID_LO
);

900 (
DC_VENDORID_DEC
);

902 
MII_PHYIDR2
:

903 i‡(
	`DC_IS_PNIC
(
sc
))

904 (
DC_DEVICEID_82C168
);

905 (
DC_DEVICEID_21143
);

915 i‡(
	`DC_IS_PNIC
(
sc
)) {

916 
	`CSR_WRITE_4
(
sc
, 
DC_PN_MII
, 
DC_PN_MIIOPCODE_READ
 |

917 (
phy
 << 23Ë| (
ªg
 << 18));

918 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

919 
	`DELAY
(1);

920 
rvÆ
 = 
	`CSR_READ_4
(
sc
, 
DC_PN_MII
);

921 i‡(!(
rvÆ
 & 
DC_PN_MII_BUSY
)) {

922 
rvÆ
 &= 0xFFFF;

923 (
rvÆ
 == 0xFFFF ? 0 :Ñval);

929 i‡(
	`DC_IS_COMET
(
sc
)) {

930 
ªg
) {

931 
MII_BMCR
:

932 
phy_ªg
 = 
DC_AL_BMCR
;

934 
MII_BMSR
:

935 
phy_ªg
 = 
DC_AL_BMSR
;

937 
MII_PHYIDR1
:

938 
phy_ªg
 = 
DC_AL_VENID
;

940 
MII_PHYIDR2
:

941 
phy_ªg
 = 
DC_AL_DEVID
;

943 
MII_ANAR
:

944 
phy_ªg
 = 
DC_AL_ANAR
;

946 
MII_ANLPAR
:

947 
phy_ªg
 = 
DC_AL_LPAR
;

949 
MII_ANER
:

950 
phy_ªg
 = 
DC_AL_ANER
;

953 
	`¥ötk
("dc%d:Öhy_read: badÖhyÑegister %x\n",

954 
sc
->
dc_unô
, 
ªg
);

959 
rvÆ
 = 
	`CSR_READ_4
(
sc
, 
phy_ªg
) & 0x0000FFFF;

961 i‡(
rvÆ
 == 0xFFFF)

963 (
rvÆ
);

966 
‰ame
.
mii_phyaddr
 = 
phy
;

967 
‰ame
.
mii_ªgaddr
 = 
ªg
;

968 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
) {

969 
phy_ªg
 = 
	`CSR_READ_4
(
sc
, 
DC_NETCFG
);

970 
	`CSR_WRITE_4
(
sc
, 
DC_NETCFG
, 
phy_ªg
 & ~
DC_NETCFG_PORTSEL
);

972 
	`dc_mii_ªadªg
(
sc
, &
‰ame
);

973 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

974 
	`CSR_WRITE_4
(
sc
, 
DC_NETCFG
, 
phy_ªg
);

976 (
‰ame
.
mii_d©a
);

977 
	}
}

979 
	$dc_miibus_wrôîeg
(
dev
, 
phy
, 
ªg
, 
d©a
)

980 
devi˚_t
 
dev
;

981 
phy
, 
ªg
, 
d©a
;

983 
dc_so·c
 *
sc
;

984 
dc_mii_‰ame
 
‰ame
;

985 
i
, 
phy_ªg
 = 0;

987 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

988 
	`bzîo
((*)&
‰ame
, (frame));

990 i‡(
	`DC_IS_ADMTEK
(
sc
Ë&& 
phy
 !
DC_ADMTEK_PHYADDR
)

993 i‡(
	`DC_IS_CONEXANT
(
sc
Ë&& 
phy
 !
DC_CONEXANT_PHYADDR
)

996 i‡(
	`DC_IS_PNIC
(
sc
)) {

997 
	`CSR_WRITE_4
(
sc
, 
DC_PN_MII
, 
DC_PN_MIIOPCODE_WRITE
 |

998 (
phy
 << 23Ë| (
ªg
 << 10Ë| 
d©a
);

999 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

1000 i‡(!(
	`CSR_READ_4
(
sc
, 
DC_PN_MII
Ë& 
DC_PN_MII_BUSY
))

1006 i‡(
	`DC_IS_COMET
(
sc
)) {

1007 
ªg
) {

1008 
MII_BMCR
:

1009 
phy_ªg
 = 
DC_AL_BMCR
;

1011 
MII_BMSR
:

1012 
phy_ªg
 = 
DC_AL_BMSR
;

1014 
MII_PHYIDR1
:

1015 
phy_ªg
 = 
DC_AL_VENID
;

1017 
MII_PHYIDR2
:

1018 
phy_ªg
 = 
DC_AL_DEVID
;

1020 
MII_ANAR
:

1021 
phy_ªg
 = 
DC_AL_ANAR
;

1023 
MII_ANLPAR
:

1024 
phy_ªg
 = 
DC_AL_LPAR
;

1026 
MII_ANER
:

1027 
phy_ªg
 = 
DC_AL_ANER
;

1030 
	`¥ötk
("dc%d:Öhy_write: badÖhyÑegister %x\n",

1031 
sc
->
dc_unô
, 
ªg
);

1036 
	`CSR_WRITE_4
(
sc
, 
phy_ªg
, 
d©a
);

1040 
‰ame
.
mii_phyaddr
 = 
phy
;

1041 
‰ame
.
mii_ªgaddr
 = 
ªg
;

1042 
‰ame
.
mii_d©a
 = 
d©a
;

1044 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
) {

1045 
phy_ªg
 = 
	`CSR_READ_4
(
sc
, 
DC_NETCFG
);

1046 
	`CSR_WRITE_4
(
sc
, 
DC_NETCFG
, 
phy_ªg
 & ~
DC_NETCFG_PORTSEL
);

1048 
	`dc_mii_wrôîeg
(
sc
, &
‰ame
);

1049 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

1050 
	`CSR_WRITE_4
(
sc
, 
DC_NETCFG
, 
phy_ªg
);

1053 
	}
}

1055 
	$dc_miibus_°©chg
(
dev
)

1056 
devi˚_t
 
dev
;

1058 
dc_so·c
 *
sc
;

1059 
mii_d©a
 *
mii
;

1060 
ifmedü
 *
ifm
;

1062 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

1063 i‡(
	`DC_IS_ADMTEK
(
sc
))

1066 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

1067 
ifm
 = &
mii
->
mii_medü
;

1068 i‡(
	`DC_IS_DAVICOM
(
sc
) &&

1069 
	`IFM_SUBTYPE
(
ifm
->
ifm_medü
Ë=
IFM_homePNA
) {

1070 
	`dc_£tcfg
(
sc
, 
ifm
->
ifm_medü
);

1071 
sc
->
dc_if_medü
 = 
ifm
->
ifm_medü
;

1073 
	`dc_£tcfg
(
sc
, 
mii
->
mii_medü_a˘ive
);

1074 
sc
->
dc_if_medü
 = 
mii
->
mii_medü_a˘ive
;

1078 
	}
}

1088 
	$dc_miibus_medüöô
(
dev
)

1089 
devi˚_t
 
dev
;

1091 
dc_so·c
 *
sc
;

1092 
mii_d©a
 *
mii
;

1093 
ifmedü
 *
ifm
;

1094 
ªv
;

1096 
ªv
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CFRV
, 4) & 0xFF;

1098 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

1099 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

1100 
ifm
 = &
mii
->
mii_medü
;

1102 i‡(
	`DC_IS_DAVICOM
(
sc
Ë&& 
ªv
 >
DC_REVISION_DM9102A
)

1103 
	`ifmedü_add
(
ifm
, 
IFM_ETHER
|
IFM_homePNA
, 0, 
NULL
);

1106 
	}
}

1109 
	#DC_POLY
 0xEDB88320

	)

1110 
	#DC_BITS_512
 9

	)

1111 
	#DC_BITS_128
 7

	)

1112 
	#DC_BITS_64
 6

	)

1114 
u_öt32_t
 
	$dc_¸c_À
(
sc
, 
addr
)

1115 
dc_so·c
 *
sc
;

1116 
ˇddr_t
 
addr
;

1118 
u_öt32_t
 
idx
, 
bô
, 
d©a
, 
¸c
;

1121 
¸c
 = 0xFFFFFFFF;

1123 
idx
 = 0; idx < 6; idx++) {

1124 
d©a
 = *
addr
++, 
bô
 = 0; bit < 8; bit++, data >>= 1)

1125 
¸c
 = (¸¯>> 1Ë^ (((¸¯^ 
d©a
Ë& 1Ë? 
DC_POLY
 : 0);

1132 i‡(
sc
->
dc_Êags
 & 
DC_128BIT_HASH
)

1133  (
¸c
 & ((1 << 
DC_BITS_128
) - 1));

1136 i‡(
sc
->
dc_Êags
 & 
DC_64BIT_HASH
)

1137  (
¸c
 & ((1 << 
DC_BITS_64
) - 1));

1139  (
¸c
 & ((1 << 
DC_BITS_512
) - 1));

1140 
	}
}

1142 #i‚de‡
UNUSED


1146 
u_öt32_t
 
	$dc_¸c_be
(
addr
)

1147 
ˇddr_t
 
addr
;

1149 
u_öt32_t
 
¸c
, 
ˇºy
;

1150 
i
, 
j
;

1151 
u_öt8_t
 
c
;

1154 
¸c
 = 0xFFFFFFFF;

1156 
i
 = 0; i < 6; i++) {

1157 
c
 = *(
addr
 + 
i
);

1158 
j
 = 0; j < 8; j++) {

1159 
ˇºy
 = ((
¸c
 & 0x80000000Ë? 1 : 0Ë^ (
c
 & 0x01);

1160 
¸c
 <<= 1;

1161 
c
 >>= 1;

1162 i‡(
ˇºy
)

1163 
¸c
 = (¸¯^ 0x04c11db6Ë| 
ˇºy
;

1168 ((
¸c
 >> 26) & 0x0000003F);

1169 
	}
}

1182 
	$dc_£tfût_21143
(
sc
)

1183 
dc_so·c
 *
sc
;

1185 
dc_desc
 *
s‰ame
;

1186 
u_öt32_t
 
h
, *
•
;

1188 
i‚ë
 *
iÂ
;

1189 
i
;

1190 
u_öt16_t
 *
ac_íaddr
;

1192 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1194 
i
 = 
sc
->
dc_cd©a
.
dc_tx_¥od
;

1195 
	`DC_INC
(
sc
->
dc_cd©a
.
dc_tx_¥od
, 
DC_TX_LIST_CNT
);

1196 
sc
->
dc_cd©a
.
dc_tx_˙t
++;

1197 
s‰ame
 = &
sc
->
dc_ld©a
->
dc_tx_li°
[
i
];

1198 
•
 = (
u_öt32_t
 *)&
sc
->
dc_cd©a
.
dc_sbuf
;

1199 
	`bzîo
((*)
•
, 
DC_SFRAME_LEN
);

1201 
s‰ame
->
dc_d©a
 = 
	`vt›hys
(&
sc
->
dc_cd©a
.
dc_sbuf
);

1202 
s‰ame
->
dc_˘l
 = 
DC_SFRAME_LEN
 | 
DC_TXCTL_SETUP
 | 
DC_TXCTL_TLINK
 |

1203 
DC_FILTER_HASHPERF
 | 
DC_TXCTL_FINT
;

1205 
sc
->
dc_cd©a
.
dc_tx_chaö
[
i
] = (
mbuf
 *)&sc->dc_cd©a.
dc_sbuf
;

1208 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1209 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1211 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1213 i‡(
iÂ
->
if_Êags
 & 
IFF_ALLMULTI
)

1214 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1216 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1218 
ifma
 = 
iÂ
->
if_mu…üddrs
.
lh_fú°
; ifm®!
NULL
;

1219 
ifma
 = ifma->
ifma_lök
.
À_√xt
) {

1220 i‡(
ifma
->
ifma_addr
->
ß_Ámûy
 !
AF_LINK
)

1222 
h
 = 
	`dc_¸c_À
(
sc
,

1223 
	`LLADDR
((
sockaddr_dl
 *)
ifma
->
ifma_addr
));

1224 
•
[
h
 >> 4] |= 1 << (h & 0xF);

1228 i‡(
iÂ
->
if_Êags
 & 
IFF_BROADCAST
) {

1229 
h
 = 
	`dc_¸c_À
(
sc
, (
ˇddr_t
)&
ëhîbrﬂdˇ°addr
);

1230 
•
[
h
 >> 4] |= 1 << (h & 0xF);

1234 
ac_íaddr
 = (
u_öt16_t
 *)
sc
->
¨pcom
.ac_enaddr;

1235 
•
[39] = 
ac_íaddr
[0];

1236 
•
[40] = 
ac_íaddr
[1];

1237 
•
[41] = 
ac_íaddr
[2];

1239 
s‰ame
->
dc_°©us
 = 
DC_TXSTAT_OWN
;

1240 
	`CSR_WRITE_4
(
sc
, 
DC_TXSTART
, 0xFFFFFFFF);

1248 
	`DELAY
(10000);

1250 
iÂ
->
if_timî
 = 5;

1253 
	}
}

1255 
	$dc_£tfût_admãk
(
sc
)

1256 
dc_so·c
 *
sc
;

1258 
i‚ë
 *
iÂ
;

1260 
h
 = 0;

1261 
u_öt32_t
 
hashes
[2] = { 0, 0 };

1262 
ifmu…üddr
 *
ifma
;

1264 
u_öt32_t
 *
ac_íaddr
;

1266 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1269 
ac_íaddr
 = (
u_öt32_t
 *)&
sc
->
¨pcom
.ac_enaddr[0];

1270 
	`CSR_WRITE_4
(
sc
, 
DC_AL_PAR0
, *
ac_íaddr
);

1271 
ac_íaddr
 = (
u_öt32_t
 *)&
sc
->
¨pcom
.ac_enaddr[4];

1272 
	`CSR_WRITE_4
(
sc
, 
DC_AL_PAR1
, *
ac_íaddr
);

1275 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1276 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1278 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1280 i‡(
iÂ
->
if_Êags
 & 
IFF_ALLMULTI
)

1281 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1283 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1286 
	`CSR_WRITE_4
(
sc
, 
DC_AL_MAR0
, 0);

1287 
	`CSR_WRITE_4
(
sc
, 
DC_AL_MAR1
, 0);

1294 i‡(
iÂ
->
if_Êags
 & (
IFF_PROMISC
|
IFF_ALLMULTI
))

1298 
ifma
 = 
iÂ
->
if_mu…üddrs
.
lh_fú°
; ifm®!
NULL
;

1299 
ifma
 = ifma->
ifma_lök
.
À_√xt
) {

1300 i‡(
ifma
->
ifma_addr
->
ß_Ámûy
 !
AF_LINK
)

1302 
h
 = 
	`dc_¸c_be
(
	`LLADDR
((
sockaddr_dl
 *)
ifma
->
ifma_addr
));

1303 i‡(
h
 < 32)

1304 
hashes
[0] |(1 << 
h
);

1306 
hashes
[1] |(1 << (
h
 - 32));

1309 
	`CSR_WRITE_4
(
sc
, 
DC_AL_MAR0
, 
hashes
[0]);

1310 
	`CSR_WRITE_4
(
sc
, 
DC_AL_MAR1
, 
hashes
[1]);

1313 
	}
}

1315 
	$dc_£tfût_asix
(
sc
)

1316 
dc_so·c
 *
sc
;

1318 
i‚ë
 *
iÂ
;

1320 
h
 = 0;

1321 
u_öt32_t
 
hashes
[2] = { 0, 0 };

1322 
ifmu…üddr
 *
ifma
;

1324 
u_öt32_t
 *
ac_íaddr
;

1326 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1329 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_PAR0
);

1330 
ac_íaddr
 = (
u_öt32_t
 *)&
sc
->
¨pcom
.ac_enaddr[0];

1331 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, *
ac_íaddr
);

1333 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_PAR1
);

1335 
ac_íaddr
 = (
u_öt32_t
 *)&
sc
->
¨pcom
.ac_enaddr[4];

1336 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, *
ac_íaddr
);

1339 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1340 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1342 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_PROMISC
);

1344 i‡(
iÂ
->
if_Êags
 & 
IFF_ALLMULTI
)

1345 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1347 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ALLMULTI
);

1353 i‡(
iÂ
->
if_Êags
 & 
IFF_BROADCAST
)

1354 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_AX_NETCFG_RX_BROAD
);

1356 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_AX_NETCFG_RX_BROAD
);

1359 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_MAR0
);

1360 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, 0);

1361 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_MAR1
);

1362 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, 0);

1369 i‡(
iÂ
->
if_Êags
 & (
IFF_PROMISC
|
IFF_ALLMULTI
))

1373 
ifma
 = 
iÂ
->
if_mu…üddrs
.
lh_fú°
; ifm®!
NULL
;

1374 
ifma
 = ifma->
ifma_lök
.
À_√xt
) {

1375 i‡(
ifma
->
ifma_addr
->
ß_Ámûy
 !
AF_LINK
)

1377 
h
 = 
	`dc_¸c_be
(
	`LLADDR
((
sockaddr_dl
 *)
ifma
->
ifma_addr
));

1378 i‡(
h
 < 32)

1379 
hashes
[0] |(1 << 
h
);

1381 
hashes
[1] |(1 << (
h
 - 32));

1384 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_MAR0
);

1385 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, 
hashes
[0]);

1386 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTIDX
, 
DC_AX_FILTIDX_MAR1
);

1387 
	`CSR_WRITE_4
(
sc
, 
DC_AX_FILTDATA
, 
hashes
[1]);

1390 
	}
}

1392 
	$dc_£tfût
(
sc
)

1393 
dc_so·c
 *
sc
;

1395 i‡(
	`DC_IS_INTEL
(
sc
Ë|| 
	`DC_IS_MACRONIX
(scË|| 
	`DC_IS_PNIC
(sc) ||

1396 
	`DC_IS_PNICII
(
sc
Ë|| 
	`DC_IS_DAVICOM
(scË|| 
	`DC_IS_CONEXANT
(sc))

1397 
	`dc_£tfût_21143
(
sc
);

1399 i‡(
	`DC_IS_ASIX
(
sc
))

1400 
	`dc_£tfût_asix
(
sc
);

1402 i‡(
	`DC_IS_ADMTEK
(
sc
))

1403 
	`dc_£tfût_admãk
(
sc
);

1406 
	}
}

1413 
	$dc_£tcfg
(
sc
, 
medü
)

1414 
dc_so·c
 *
sc
;

1415 
medü
;

1417 
i
, 
ª°¨t
 = 0;

1418 
u_öt32_t
 
i§
;

1420 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_NONE
)

1423 i‡(
	`CSR_READ_4
(
sc
, 
DC_NETCFG
Ë& (
DC_NETCFG_TX_ON
|
DC_NETCFG_RX_ON
)) {

1424 
ª°¨t
 = 1;

1425 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, (
DC_NETCFG_TX_ON
|
DC_NETCFG_RX_ON
));

1427 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

1428 
i§
 = 
	`CSR_READ_4
(
sc
, 
DC_ISR
);

1429 i‡(
i§
 & 
DC_ISR_TX_IDLE
 ||

1430 (
i§
 & 
DC_ISR_RX_STATE
Ë=
DC_RXSTATE_STOPPED
)

1432 
	`DELAY
(10);

1435 i‡(
i
 =
DC_TIMEOUT
)

1436 
	`¥ötk
("dc%d: failedÅo forceÅxánd "

1437 "rxÅÿidÀ sèã\n", 
sc
->
dc_unô
);

1440 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_100_TX
) {

1441 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_SPEEDSEL
);

1442 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_HEARTBEAT
);

1443 i‡(
sc
->
dc_pmode
 =
DC_PMODE_MII
) {

1444 
w©chdogªg
;

1446 i‡(
	`DC_IS_INTEL
(
sc
)) {

1448 
w©chdogªg
 = 
	`CSR_READ_4
(
sc
, 
DC_WATCHDOG
);

1449 
w©chdogªg
 &~
DC_WDOG_CTLWREN
;

1450 
w©chdogªg
 |
DC_WDOG_JABBERDIS
;

1451 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 
w©chdogªg
);

1453 
	`DC_SETBIT
(
sc
, 
DC_WATCHDOG
, 
DC_WDOG_JABBERDIS
);

1455 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, (
DC_NETCFG_PCS
|

1456 
DC_NETCFG_PORTSEL
|
DC_NETCFG_SCRAMBLER
));

1457 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

1458 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, (
DC_NETCFG_PCS
|

1459 
DC_NETCFG_SCRAMBLER
));

1460 i‡(!
	`DC_IS_DAVICOM
(
sc
))

1461 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1462 
	`DC_CLRBIT
(
sc
, 
DC_10BTCTRL
, 0xFFFF);

1463 i‡(
	`DC_IS_INTEL
(
sc
))

1464 
	`dc_≠∂y_fixup
(
sc
, 
IFM_AUTO
);

1466 i‡(
	`DC_IS_PNIC
(
sc
)) {

1467 
	`DC_PN_GPIO_SETBIT
(
sc
, 
DC_PN_GPIO_SPEEDSEL
);

1468 
	`DC_PN_GPIO_SETBIT
(
sc
, 
DC_PN_GPIO_100TX_LOOP
);

1469 
	`DC_SETBIT
(
sc
, 
DC_PN_NWAY
, 
DC_PN_NWAY_SPEEDSEL
);

1471 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1472 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PCS
);

1473 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_SCRAMBLER
);

1474 i‡(
	`DC_IS_INTEL
(
sc
))

1475 
	`dc_≠∂y_fixup
(
sc
,

1476 (
medü
 & 
IFM_GMASK
Ë=
IFM_FDX
 ?

1477 
IFM_100_TX
|
IFM_FDX
 : IFM_100_TX);

1481 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_10_T
) {

1482 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_SPEEDSEL
);

1483 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_HEARTBEAT
);

1484 i‡(
sc
->
dc_pmode
 =
DC_PMODE_MII
) {

1485 
w©chdogªg
;

1488 i‡(
	`DC_IS_INTEL
(
sc
)) {

1489 
w©chdogªg
 = 
	`CSR_READ_4
(
sc
, 
DC_WATCHDOG
);

1490 
w©chdogªg
 &~
DC_WDOG_CTLWREN
;

1491 
w©chdogªg
 |
DC_WDOG_JABBERDIS
;

1492 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 
w©chdogªg
);

1494 
	`DC_SETBIT
(
sc
, 
DC_WATCHDOG
, 
DC_WDOG_JABBERDIS
);

1496 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, (
DC_NETCFG_PCS
|

1497 
DC_NETCFG_PORTSEL
|
DC_NETCFG_SCRAMBLER
));

1498 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

1499 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PCS
);

1500 i‡(!
	`DC_IS_DAVICOM
(
sc
))

1501 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1502 
	`DC_CLRBIT
(
sc
, 
DC_10BTCTRL
, 0xFFFF);

1503 i‡(
	`DC_IS_INTEL
(
sc
))

1504 
	`dc_≠∂y_fixup
(
sc
, 
IFM_AUTO
);

1506 i‡(
	`DC_IS_PNIC
(
sc
)) {

1507 
	`DC_PN_GPIO_CLRBIT
(
sc
, 
DC_PN_GPIO_SPEEDSEL
);

1508 
	`DC_PN_GPIO_SETBIT
(
sc
, 
DC_PN_GPIO_100TX_LOOP
);

1509 
	`DC_CLRBIT
(
sc
, 
DC_PN_NWAY
, 
DC_PN_NWAY_SPEEDSEL
);

1511 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1512 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PCS
);

1513 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_SCRAMBLER
);

1514 i‡(
	`DC_IS_INTEL
(
sc
)) {

1515 
	`DC_CLRBIT
(
sc
, 
DC_SIARESET
, 
DC_SIA_RESET
);

1516 
	`DC_CLRBIT
(
sc
, 
DC_10BTCTRL
, 0xFFFF);

1517 i‡((
medü
 & 
IFM_GMASK
Ë=
IFM_FDX
)

1518 
	`DC_SETBIT
(
sc
, 
DC_10BTCTRL
, 0x7F3D);

1520 
	`DC_SETBIT
(
sc
, 
DC_10BTCTRL
, 0x7F3F);

1521 
	`DC_SETBIT
(
sc
, 
DC_SIARESET
, 
DC_SIA_RESET
);

1522 
	`DC_CLRBIT
(
sc
, 
DC_10BTCTRL
,

1523 
DC_TCTL_AUTONEGENBL
);

1524 
	`dc_≠∂y_fixup
(
sc
,

1525 (
medü
 & 
IFM_GMASK
Ë=
IFM_FDX
 ?

1526 
IFM_10_T
|
IFM_FDX
 : IFM_10_T);

1527 
	`DELAY
(20000);

1538 i‡(
	`DC_IS_DAVICOM
(
sc
)) {

1539 i‡(
	`IFM_SUBTYPE
(
medü
Ë=
IFM_homePNA
) {

1540 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1541 
sc
->
dc_lök
 = 1;

1543 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_PORTSEL
);

1548 i‡((
medü
 & 
IFM_GMASK
Ë=
IFM_FDX
) {

1549 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_FULLDUPLEX
);

1550 i‡(
sc
->
dc_pmode
 =
DC_PMODE_SYM
 && 
	`DC_IS_PNIC
(sc))

1551 
	`DC_SETBIT
(
sc
, 
DC_PN_NWAY
, 
DC_PN_NWAY_DUPLEX
);

1553 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_FULLDUPLEX
);

1554 i‡(
sc
->
dc_pmode
 =
DC_PMODE_SYM
 && 
	`DC_IS_PNIC
(sc))

1555 
	`DC_CLRBIT
(
sc
, 
DC_PN_NWAY
, 
DC_PN_NWAY_DUPLEX
);

1558 i‡(
ª°¨t
)

1559 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_ON
|
DC_NETCFG_RX_ON
);

1562 
	}
}

1564 
	$dc_ª£t
(
sc
)

1565 
dc_so·c
 *
sc
;

1567 
i
;

1569 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_BUSCTL_RESET
);

1571 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

1572 
	`DELAY
(10);

1573 i‡(!(
	`CSR_READ_4
(
sc
, 
DC_BUSCTL
Ë& 
DC_BUSCTL_RESET
))

1577 i‡(
	`DC_IS_ASIX
(
sc
Ë|| 
	`DC_IS_ADMTEK
(scË|| 
	`DC_IS_CONEXANT
(sc)) {

1578 
	`DELAY
(10000);

1579 
	`DC_CLRBIT
(
sc
, 
DC_BUSCTL
, 
DC_BUSCTL_RESET
);

1580 
i
 = 0;

1583 i‡(
i
 =
DC_TIMEOUT
)

1584 
	`¥ötk
("dc%d:Ñe£à√vî com∂ëed!\n", 
sc
->
dc_unô
);

1587 
	`DELAY
(1000);

1589 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 0x00000000);

1590 
	`CSR_WRITE_4
(
sc
, 
DC_BUSCTL
, 0x00000000);

1591 
	`CSR_WRITE_4
(
sc
, 
DC_NETCFG
, 0x00000000);

1599 i‡(
	`DC_IS_INTEL
(
sc
)) {

1600 
	`DC_SETBIT
(
sc
, 
DC_SIARESET
, 
DC_SIA_RESET
);

1601 
	`CSR_WRITE_4
(
sc
, 
DC_10BTCTRL
, 0);

1602 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 0);

1606 
	}
}

1609 
dc_ty≥
 *
	$dc_devty≥
–
unônum
 )

1611 
dc_ty≥
 *
t
;

1612 
uöt32_t
 
ªv
;

1613 
rc
;

1616 
t
 = 
dc_devs
;

1618 
t
->
dc_«me
 !
NULL
) {

1619 
rc
 = 
	`pci_föd_devi˚
(
t
->
dc_vid
,Å->
dc_did
, \

1620 (
unônum
 - 1), &
t
->
dc_bus
, &t->
dc_dev
, &t->
dc_fun
);

1621 i‡(
rc
 =
PCIB_ERR_SUCCESS
) {

1624 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

1625 
DC_PCI_CFRV
, &
ªv
);

1626 
ªv
 &= 0xFF;

1628 i‡(
t
->
dc_did
 =
DC_DEVICEID_98713
 &&

1629 
ªv
 >
DC_REVISION_98713A
)

1630 
t
++;

1631 i‡(
t
->
dc_did
 =
DC_DEVICEID_98713_CP
 &&

1632 
ªv
 >
DC_REVISION_98713A
)

1633 
t
++;

1634 i‡(
t
->
dc_did
 =
DC_DEVICEID_987x5
 &&

1635 
ªv
 >
DC_REVISION_98715AEC_C
)

1636 
t
++;

1637 i‡(
t
->
dc_did
 =
DC_DEVICEID_987x5
 &&

1638 
ªv
 >
DC_REVISION_98725
)

1639 
t
++;

1640 i‡(
t
->
dc_did
 =
DC_DEVICEID_AX88140A
 &&

1641 
ªv
 >
DC_REVISION_88141
)

1642 
t
++;

1643 i‡(
t
->
dc_did
 =
DC_DEVICEID_82C168
 &&

1644 
ªv
 >
DC_REVISION_82C169
)

1645 
t
++;

1646 i‡(
t
->
dc_did
 =
DC_DEVICEID_DM9102
 &&

1647 
ªv
 >
DC_REVISION_DM9102A
)

1648 
t
++;

1649 (
t
);

1651 
t
++;

1654 (
NULL
);

1655 
	}
}

1667 
	$dc_¥obe
(
dev
)

1668 
devi˚_t
 
dev
;

1670 
dc_ty≥
 *
t
;

1672 
t
 = 
	`dc_devty≥
(
dev
);

1674 i‡(
t
 !
NULL
) {

1675 
	`devi˚_£t_desc
(
dev
, 
t
->
dc_«me
);

1679 (
ENXIO
);

1680 
	}
}

1683 
	$dc_a˝i
(
dev
)

1684 
devi˚_t
 
dev
;

1686 
u_öt32_t
 
r
, 
˝å
;

1687 
unô
;

1689 
unô
 = 
	`devi˚_gë_unô
(
dev
);

1692 
˝å
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CCAP
, 4) & 0xFF;

1694 
r
 = 
	`pci_ªad_c⁄fig
(
dev
, 
˝å
, 4) & 0xFF;

1695 i‡(
r
 == 0x01) {

1697 
r
 = 
	`pci_ªad_c⁄fig
(
dev
, 
˝å
 + 4, 4);

1698 i‡(
r
 & 
DC_PSTATE_D3
) {

1699 
u_öt32_t
 
ioba£
, 
memba£
, 
úq
;

1702 
ioba£
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CFBIO
, 4);

1703 
memba£
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CFBMA
, 4);

1704 
úq
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CFIT
, 4);

1707 
	`¥ötk
("dc%d: chip is in D%dÖower mode "

1708 "-- sëtögÅÿD0\n", 
unô
, 
r
 & 
DC_PSTATE_D3
);

1709 
r
 &= 0xFFFFFFFC;

1710 
	`pci_wrôe_c⁄fig
(
dev
, 
˝å
 + 4, 
r
, 4);

1713 
	`pci_wrôe_c⁄fig
(
dev
, 
DC_PCI_CFBIO
, 
ioba£
, 4);

1714 
	`pci_wrôe_c⁄fig
(
dev
, 
DC_PCI_CFBMA
, 
memba£
, 4);

1715 
	`pci_wrôe_c⁄fig
(
dev
, 
DC_PCI_CFIT
, 
úq
, 4);

1719 
	}
}

1723 
	$dc_≠∂y_fixup
(
sc
, 
medü
)

1724 
dc_so·c
 *
sc
;

1725 
medü
;

1727 
dc_medüöfo
 *
m
;

1728 
u_öt8_t
 *
p
;

1729 
i
;

1730 
u_öt32_t
 
ªg
;

1732 
m
 = 
sc
->
dc_mi
;

1734 
m
 !
NULL
) {

1735 i‡(
m
->
dc_medü
 =
medü
)

1737 
m
 = m->
dc_√xt
;

1740 i‡(
m
 =
NULL
)

1743 
i
 = 0, 
p
 = 
m
->
dc_ª£t_±r
; i < m->
dc_ª£t_Àn
; i++,Ö += 2) {

1744 
ªg
 = (
p
[0] | (p[1] << 8)) << 16;

1745 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 
ªg
);

1748 
i
 = 0, 
p
 = 
m
->
dc_gp_±r
; i < m->
dc_gp_Àn
; i++,Ö += 2) {

1749 
ªg
 = (
p
[0] | (p[1] << 8)) << 16;

1750 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 
ªg
);

1754 
	}
}

1757 
	$dc_decode_Àaf_sü
(
sc
, 
l
)

1758 
dc_so·c
 *
sc
;

1759 
dc_eblock_sü
 *
l
;

1761 
dc_medüöfo
 *
m
;

1763 
m
 = 
	`mÆloc
((
dc_medüöfo
), 
M_DEVBUF
, 
M_NOWAIT
);

1764 
	`bzîo
(
m
, (
dc_medüöfo
));

1765 i‡(
l
->
dc_sü_code
 =
DC_SIA_CODE_10BT
)

1766 
m
->
dc_medü
 = 
IFM_10_T
;

1768 i‡(
l
->
dc_sü_code
 =
DC_SIA_CODE_10BT_FDX
)

1769 
m
->
dc_medü
 = 
IFM_10_T
|
IFM_FDX
;

1771 i‡(
l
->
dc_sü_code
 =
DC_SIA_CODE_10B2
)

1772 
m
->
dc_medü
 = 
IFM_10_2
;

1774 i‡(
l
->
dc_sü_code
 =
DC_SIA_CODE_10B5
)

1775 
m
->
dc_medü
 = 
IFM_10_5
;

1777 
m
->
dc_gp_Àn
 = 2;

1778 
m
->
dc_gp_±r
 = (
u_öt8_t
 *)&
l
->
dc_sü_gpio_˘l
;

1780 
m
->
dc_√xt
 = 
sc
->
dc_mi
;

1781 
sc
->
dc_mi
 = 
m
;

1783 
sc
->
dc_pmode
 = 
DC_PMODE_SIA
;

1786 
	}
}

1788 
	$dc_decode_Àaf_sym
(
sc
, 
l
)

1789 
dc_so·c
 *
sc
;

1790 
dc_eblock_sym
 *
l
;

1792 
dc_medüöfo
 *
m
;

1794 
m
 = 
	`mÆloc
((
dc_medüöfo
), 
M_DEVBUF
, 
M_NOWAIT
);

1795 
	`bzîo
(
m
, (
dc_medüöfo
));

1796 i‡(
l
->
dc_sym_code
 =
DC_SYM_CODE_100BT
)

1797 
m
->
dc_medü
 = 
IFM_100_TX
;

1799 i‡(
l
->
dc_sym_code
 =
DC_SYM_CODE_100BT_FDX
)

1800 
m
->
dc_medü
 = 
IFM_100_TX
|
IFM_FDX
;

1802 
m
->
dc_gp_Àn
 = 2;

1803 
m
->
dc_gp_±r
 = (
u_öt8_t
 *)&
l
->
dc_sym_gpio_˘l
;

1805 
m
->
dc_√xt
 = 
sc
->
dc_mi
;

1806 
sc
->
dc_mi
 = 
m
;

1808 
sc
->
dc_pmode
 = 
DC_PMODE_SYM
;

1811 
	}
}

1813 
	$dc_decode_Àaf_mii
(
sc
, 
l
)

1814 
dc_so·c
 *
sc
;

1815 
dc_eblock_mii
 *
l
;

1817 
u_öt8_t
 *
p
;

1818 
dc_medüöfo
 *
m
;

1820 
m
 = 
	`mÆloc
((
dc_medüöfo
), 
M_DEVBUF
, 
M_NOWAIT
);

1821 
	`bzîo
(
m
, (
dc_medüöfo
));

1823 
m
->
dc_medü
 = 
IFM_AUTO
;

1824 
m
->
dc_gp_Àn
 = 
l
->
dc_g¥_Àn
;

1826 
p
 = (
u_öt8_t
 *)
l
;

1827 
p
 +(
dc_eblock_mii
);

1828 
m
->
dc_gp_±r
 = 
p
;

1829 
p
 +2 * 
l
->
dc_g¥_Àn
;

1830 
m
->
dc_ª£t_Àn
 = *
p
;

1831 
p
++;

1832 
m
->
dc_ª£t_±r
 = 
p
;

1834 
m
->
dc_√xt
 = 
sc
->
dc_mi
;

1835 
sc
->
dc_mi
 = 
m
;

1838 
	}
}

1841 
	$dc_ªad_§om
(
sc
, 
bôs
)

1842 
dc_so·c
 *
sc
;

1843 
bôs
;

1845 
size
;

1847 
size
 = 2 << 
bôs
;

1848 
sc
->
dc_§om
 = 
	`mÆloc
(
size
, 
M_DEVBUF
, 
M_NOWAIT
);

1849 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)sc->
dc_§om
, 0, (
size
 / 2), 0);

1850 
	}
}

1852 
	$dc_∑r£_21143_§om
(
sc
)

1853 
dc_so·c
 *
sc
;

1855 
dc_Àaf_hdr
 *
lhdr
;

1856 
dc_eblock_hdr
 *
hdr
;

1857 
i
, 
loff
;

1858 *
±r
;

1860 
loff
 = 
sc
->
dc_§om
[27];

1861 
lhdr
 = (
dc_Àaf_hdr
 *)&(
sc
->
dc_§om
[
loff
]);

1863 
±r
 = (*)
lhdr
;

1864 
±r
 +(
dc_Àaf_hdr
) - 1;

1865 
i
 = 0; i < 
lhdr
->
dc_m˙t
; i++) {

1866 
hdr
 = (
dc_eblock_hdr
 *)
±r
;

1867 
hdr
->
dc_ty≥
) {

1869 
DC_EBLOCK_MII
:

1870 
	`dc_decode_Àaf_mii
(
sc
, (
dc_eblock_mii
 *)
hdr
);

1872 
DC_EBLOCK_SIA
:

1873 
	`dc_decode_Àaf_sü
(
sc
, (
dc_eblock_sü
 *)
hdr
);

1875 
DC_EBLOCK_SYM
:

1876 
	`dc_decode_Àaf_sym
(
sc
, (
dc_eblock_sym
 *)
hdr
);

1883 
±r
 +(
hdr
->
dc_Àn
 & 0x7F);

1884 
±r
++;

1888 
	}
}

1892 
	$n›
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
unu£d
)

1894 
	}
}

1897 
	$decISON
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

1899  (
	`BSP_úq_íabÀd_©_i8259s
(
úq
->
«me
));

1900 
	}
}

1908 
	$πems_dc_drivî_©èch
(
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
)

1910 
rc
;

1911 
u_ch¨
 
óddr
[
ETHER_ADDR_LEN
];

1913 *
unôName
;

1914 
unôNumbî
;

1916 
uöt32_t
 
comm™d
;

1917 
dc_so·c
 *
sc
;

1918 
i‚ë
 *
iÂ
;

1919 
dc_ty≥
 *
t
;

1920 
uöt32_t
 
ªvisi⁄
;

1921 
îr‹
 = 0, 
mac_off£t
;

1922 
uöt32_t
 
vÆue
;

1928 
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
(
c⁄fig
, &
unôName
);

1929 if–
unôNumbî
 < 0) {

1932 if–
	`°rcmp
(
unôName
, 
DRIVER_PREFIX
) ) {

1933 
	`¥ötk
("dec2114x : unitÇame '%s'Çot %s\n", \

1934 
unôName
, 
DRIVER_PREFIX
 );

1938 
sc
 = &
dc_so·c_devs
[
unôNumbî
 - 1];

1939 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1941 if(
iÂ
->
if_so·c
 !
NULL
) {

1942 
	`¥ötk
("dec2114x[%d]: unitÇumberálready in use.\n", \

1943 
unôNumbî
);

1946 
	`mem£t
(
sc
, 0, (
dc_so·c
));

1949 
sc
->
dc_unô
 = 
unôNumbî
;

1950 
sc
->
dc_«me
 = 
unôName
;

1959 if–(
sc
->
dc_öfo
 = 
	`dc_devty≥
(
unôNumbî
)Ë=
NULL
) {

1960 
	`¥ötk
("Can't findány dec2114x NICs in PCI space.\n");

1963 
t
 = 
sc
->
dc_öfo
;

1970 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

1971 
PCI_COMMAND
, &
comm™d
);

1973 
comm™d
 |(
PCI_COMMAND_IO
 | 
PCI_COMMAND_MEMORY
 | 
PCI_COMMAND_MASTER
);

1974 
	`pci_wrôe_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

1975 
PCI_COMMAND
, 
comm™d
);

1977 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

1978 
PCI_COMMAND
, &
comm™d
);

1981 #ifde‡
DC_USEIOSPACE


1982 i‡(!(
comm™d
 & 
PCI_COMMAND_IO
)) {

1983 
	`¥ötk
("dc%d: faûedÅÿíabÀ I/OÖ‹ts!\n", 
sc
->
dc_unô
);

1984 
îr‹
 = 
ENXIO
;

1985 
Áû
;

1988 i‡(!(
comm™d
 & 
PCI_COMMAND_MEMORY
)) {

1989 
	`¥ötk
("dc%d: faûedÅÿíabÀ mem‹y m≠pög!\n", 
sc
->
dc_unô
);

1990 
îr‹
 = 
ENXIO
;

1991 
Áû
;

1996 
rid
 = 
DC_RID
;

1997 
sc
->
dc_ªs
 = 
	`bus_Æloc_ªsour˚
(
dev
, 
DC_RES
, &
rid
,

1998 0, ~0, 1, 
RF_ACTIVE
);

2000 i‡(
sc
->
dc_ªs
 =
NULL
) {

2001 
	`¥ötk
("dc%d: couldn'àm≠Ö‹ts/mem‹y\n", 
unô
);

2002 
îr‹
 = 
ENXIO
;

2003 
Áû
;

2005 
sc
->
dc_bèg
 = 
	`rm™_gë_bu°ag
(sc->
dc_ªs
);

2006 
sc
->
dc_bh™dÀ
 = 
	`rm™_gë_bush™dÀ
(sc->
dc_ªs
);

2011 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2012 
DC_PCI_CFBMA
, &
vÆue
);

2013 
sc
->
memba£
 = 
vÆue
;

2016 
	`mem£t
(&
sc
->
úqInfo
, 0, (
πems_úq_c⁄√˘_d©a
));

2018 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2019 
DC_PCI_CFIT
, &
vÆue
);

2021 
sc
->
úqInfo
.
«me
 = 
vÆue
 & 0xFF;

2022 
sc
->
úqInfo
.
hdl
 = (
πems_úq_hdl
)
dc_öå
;

2023 
sc
->
úqInfo
.
h™dÀ
 = (*)sc;

2024 
sc
->
úqInfo
.
⁄
 = 
n›
;

2025 
sc
->
úqInfo
.
off
 = 
n›
;

2026 
sc
->
úqInfo
.
isOn
 = 
decISON
;

2028 #ifde‡
BSP_SHARED_HANDLER_SUPPORT


2029 
rc
 = 
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
–&
sc
->
úqInfo
 );

2031 
rc
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
–&
sc
->
úqInfo
 );

2033 if(!
rc
) {

2034 
	`πems_∑nic
("Can't install dec2114x irq handler.\n");

2039 
rid
 = 0;

2040 
sc
->
dc_úq
 = 
	`bus_Æloc_ªsour˚
(
dev
, 
SYS_RES_IRQ
, &
rid
, 0, ~0, 1,

2041 
RF_SHAREABLE
 | 
RF_ACTIVE
);

2043 i‡(
sc
->
dc_úq
 =
NULL
) {

2044 
	`¥ötk
("dc%d: couldn'àm≠ i¡îru±\n", 
unô
);

2045 
	`bus_ªÀa£_ªsour˚
(
dev
, 
DC_RES
, 
DC_RID
, 
sc
->
dc_ªs
);

2046 
îr‹
 = 
ENXIO
;

2047 
Áû
;

2050 
îr‹
 = 
	`bus_£tup_öå
(
dev
, 
sc
->
dc_úq
, 
INTR_TYPE_NET
,

2051 
dc_öå
, 
sc
, &sc->
dc_öåh™d
);

2053 i‡(
îr‹
) {

2054 
	`bus_ªÀa£_ªsour˚
(
dev
, 
SYS_RES_IRQ
, 0, 
sc
->
dc_úq
);

2055 
	`bus_ªÀa£_ªsour˚
(
dev
, 
DC_RES
, 
DC_RID
, 
sc
->
dc_ªs
);

2056 
	`¥ötk
("dc%d: couldn'à£àu∞úq\n", 
unô
);

2057 
Áû
;

2066 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2067 
DC_PCI_CFRV
, &
ªvisi⁄
);

2068 
ªvisi⁄
 &= 0x000000FF;

2071 i‡(
sc
->
dc_öfo
->
dc_did
 !
DC_DEVICEID_82C168
)

2072 
	`dc_ì¥om_width
(
sc
);

2074 
sc
->
dc_öfo
->
dc_did
) {

2075 
DC_DEVICEID_21143
:

2076 
sc
->
dc_ty≥
 = 
DC_TYPE_21143
;

2077 
sc
->
dc_Êags
 |
DC_TX_POLL
|
DC_TX_USE_TX_INTR
;

2078 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
;

2080 
	`dc_ªad_§om
(
sc
, sc->
dc_romwidth
);

2082 
DC_DEVICEID_DM9009
:

2083 
DC_DEVICEID_DM9100
:

2084 
DC_DEVICEID_DM9102
:

2085 
sc
->
dc_ty≥
 = 
DC_TYPE_DM9102
;

2086 
sc
->
dc_Êags
 |
DC_TX_COALESCE
|
DC_TX_INTR_ALWAYS
;

2087 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
|
DC_TX_STORENFWD
;

2088 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2091 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2092 
DC_PCI_CFLT
, &
comm™d
);

2093 
comm™d
 &= 0xFFFF00FF;

2094 
comm™d
 |= 0x00008000;

2096 
	`pci_wrôe_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2097 
DC_PCI_CFLT
, 
comm™d
);

2099 
DC_DEVICEID_AL981
:

2100 
sc
->
dc_ty≥
 = 
DC_TYPE_AL981
;

2101 
sc
->
dc_Êags
 |
DC_TX_USE_TX_INTR
;

2102 
sc
->
dc_Êags
 |
DC_TX_ADMTEK_WAR
;

2103 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2104 
	`dc_ªad_§om
(
sc
, sc->
dc_romwidth
);

2106 
DC_DEVICEID_AN985
:

2107 
DC_DEVICEID_EN2242
:

2108 
sc
->
dc_ty≥
 = 
DC_TYPE_AN985
;

2109 
sc
->
dc_Êags
 |
DC_TX_USE_TX_INTR
;

2110 
sc
->
dc_Êags
 |
DC_TX_ADMTEK_WAR
;

2111 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2112 
	`dc_ªad_§om
(
sc
, sc->
dc_romwidth
);

2114 
DC_DEVICEID_98713
:

2115 
DC_DEVICEID_98713_CP
:

2116 i‡(
ªvisi⁄
 < 
DC_REVISION_98713A
) {

2117 
sc
->
dc_ty≥
 = 
DC_TYPE_98713
;

2119 i‡(
ªvisi⁄
 >
DC_REVISION_98713A
) {

2120 
sc
->
dc_ty≥
 = 
DC_TYPE_98713A
;

2121 
sc
->
dc_Êags
 |
DC_21143_NWAY
;

2123 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
;

2124 
sc
->
dc_Êags
 |
DC_TX_POLL
|
DC_TX_USE_TX_INTR
;

2126 
DC_DEVICEID_987x5
:

2127 
DC_DEVICEID_EN1217
:

2135 i‡(
ªvisi⁄
 >
DC_REVISION_98715AEC_C
 &&

2136 
ªvisi⁄
 < 
DC_REVISION_98725
)

2137 
sc
->
dc_Êags
 |
DC_128BIT_HASH
;

2138 
sc
->
dc_ty≥
 = 
DC_TYPE_987x5
;

2139 
sc
->
dc_Êags
 |
DC_TX_POLL
|
DC_TX_USE_TX_INTR
;

2140 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
|
DC_21143_NWAY
;

2142 
DC_DEVICEID_98727
:

2143 
sc
->
dc_ty≥
 = 
DC_TYPE_987x5
;

2144 
sc
->
dc_Êags
 |
DC_TX_POLL
|
DC_TX_USE_TX_INTR
;

2145 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
|
DC_21143_NWAY
;

2147 
DC_DEVICEID_82C115
:

2148 
sc
->
dc_ty≥
 = 
DC_TYPE_PNICII
;

2149 
sc
->
dc_Êags
 |
DC_TX_POLL
|
DC_TX_USE_TX_INTR
|
DC_128BIT_HASH
;

2150 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
|
DC_21143_NWAY
;

2152 
DC_DEVICEID_82C168
:

2153 
sc
->
dc_ty≥
 = 
DC_TYPE_PNIC
;

2154 
sc
->
dc_Êags
 |
DC_TX_STORENFWD
|
DC_TX_INTR_ALWAYS
;

2155 
sc
->
dc_Êags
 |
DC_PNIC_RX_BUG_WAR
;

2156 
sc
->
dc_≤ic_rx_buf
 = 
	`mÆloc
(
DC_RXLEN
 * 5, 
M_DEVBUF
, 
M_NOWAIT
);

2157 i‡(
ªvisi⁄
 < 
DC_REVISION_82C169
)

2158 
sc
->
dc_pmode
 = 
DC_PMODE_SYM
;

2160 
DC_DEVICEID_AX88140A
:

2161 
sc
->
dc_ty≥
 = 
DC_TYPE_ASIX
;

2162 
sc
->
dc_Êags
 |
DC_TX_USE_TX_INTR
|
DC_TX_INTR_FIRSTFRAG
;

2163 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
;

2164 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2166 
DC_DEVICEID_RS7112
:

2167 
sc
->
dc_ty≥
 = 
DC_TYPE_CONEXANT
;

2168 
sc
->
dc_Êags
 |
DC_TX_INTR_ALWAYS
;

2169 
sc
->
dc_Êags
 |
DC_REDUCED_MII_POLL
;

2170 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2171 
	`dc_ªad_§om
(
sc
, sc->
dc_romwidth
);

2174 
	`¥ötk
("dc%d: unknow¿devi˚: %x\n", 
sc
->
dc_unô
,

2175 
sc
->
dc_öfo
->
dc_did
);

2180 i‡(
	`DC_IS_DAVICOM
(
sc
)) {

2181 
sc
->
dc_ˇchesize
 = 0;

2185 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2186 
DC_PCI_CFLT
, &
vÆue
);

2187 
sc
->
dc_ˇchesize
 = (
u_öt8_t
)(
vÆue
 & 0xFF);

2191 
	`dc_ª£t
(
sc
);

2194 i‡(
	`DC_IS_INTEL
(
sc
)) {

2196 
	`pci_ªad_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2197 
DC_PCI_CFDD
, &
comm™d
);

2198 
comm™d
 &~(
DC_CFDD_SNOOZE_MODE
|
DC_CFDD_SLEEP_MODE
);

2200 
	`pci_wrôe_c⁄fig_dw‹d
(
t
->
dc_bus
,t->
dc_dev
,t->
dc_fun
,\

2201 
DC_PCI_CFDD
, 
comm™d
);

2212 i‡(
	`DC_IS_INTEL
(
sc
))

2213 
	`dc_∑r£_21143_§om
(
sc
);

2214 i‡(
	`DC_IS_MACRONIX
(
sc
Ë|| 
	`DC_IS_PNICII
(sc)) {

2215 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

2216 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2218 
sc
->
dc_pmode
 = 
DC_PMODE_SYM
;

2219 } i‡(!
sc
->
dc_pmode
)

2220 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2225 
sc
->
dc_ty≥
) {

2226 
DC_TYPE_98713
:

2227 
DC_TYPE_98713A
:

2228 
DC_TYPE_987x5
:

2229 
DC_TYPE_PNICII
:

2230 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
mac_off£t
,

2231 (
DC_EE_NODEADDR_OFFSET
 / 2), 1, 0);

2232 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, (
mac_off£t
 / 2), 3, 0);

2234 
DC_TYPE_PNIC
:

2235 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, 0, 3, 1);

2237 
DC_TYPE_DM9102
:

2238 
DC_TYPE_21143
:

2239 
DC_TYPE_ASIX
:

2240 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, 
DC_EE_NODEADDR
, 3, 0);

2242 
DC_TYPE_AL981
:

2243 
DC_TYPE_AN985
:

2244 
	`bc›y
(&
sc
->
dc_§om
[
DC_AL_EE_NODEADDR
], (
ˇddr_t
)&
óddr
,

2245 
ETHER_ADDR_LEN
);

2246 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, 
DC_AL_EE_NODEADDR
, 3, 0);

2248 
DC_TYPE_CONEXANT
:

2249 
	`bc›y
(
sc
->
dc_§om
 + 
DC_CONEXANT_EE_NODEADDR
, &
óddr
, 6);

2252 
	`dc_ªad_ì¥om
(
sc
, (
ˇddr_t
)&
óddr
, 
DC_EE_NODEADDR
, 3, 0);

2259 
	`bc›y
(
óddr
, (*)&
sc
->
¨pcom
.
ac_íaddr
, 
ETHER_ADDR_LEN
);

2260 
	`¥ötk
("dc%d: MACáddress -- %02x:%02x:%02x:%02x:%02x:%02x\n", \

2261 
sc
->
dc_unô
,sc->
¨pcom
.
ac_íaddr
[0], \

2262 
sc
->
¨pcom
.
ac_íaddr
[1], sc->arpcom.ac_enaddr[2], \

2263 
sc
->
¨pcom
.
ac_íaddr
[3], sc->arpcom.ac_enaddr[4], \

2264 
sc
->
¨pcom
.
ac_íaddr
[5]);

2267 
sc
->
dc_ld©a
 = 
	`mÆloc
((
dc_li°_d©a
), 
M_DEVBUF
, 
M_NOWAIT
);

2269 i‡(
sc
->
dc_ld©a
 =
NULL
) {

2270 
	`¥ötk
("dc%d:Çÿmem‹y f‹Üi° buf„rs!\n", 
sc
->
dc_unô
);

2271 i‡(
sc
->
dc_≤ic_rx_buf
 !
NULL
)

2272 
	`‰ì
(
sc
->
dc_≤ic_rx_buf
, 
M_DEVBUF
);

2274 
	`bus_ã¨down_öå
(
dev
, 
sc
->
dc_úq
, sc->
dc_öåh™d
);

2275 
	`bus_ªÀa£_ªsour˚
(
dev
, 
SYS_RES_IRQ
, 0, 
sc
->
dc_úq
);

2276 
	`bus_ªÀa£_ªsour˚
(
dev
, 
DC_RES
, 
DC_RID
, 
sc
->
dc_ªs
);

2278 
îr‹
 = 
ENXIO
;

2279 
Áû
;

2282 
	`bzîo
(
sc
->
dc_ld©a
, (
dc_li°_d©a
));

2284 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2285 
iÂ
->
if_so·c
 = 
sc
;

2286 
iÂ
->
if_unô
 = 
unôNumbî
;

2287 
iÂ
->
if_«me
 = 
unôName
;

2288 
iÂ
->
if_mtu
 = 
ETHERMTU
;

2289 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

2290 
iÂ
->
if_io˘l
 = 
dc_io˘l
;

2291 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

2292 
iÂ
->
if_°¨t
 = 
dc_°¨t
;

2293 
iÂ
->
if_w©chdog
 = 
dc_w©chdog
;

2294 
iÂ
->
if_öô
 = 
dc_öô
;

2295 
iÂ
->
if_baudøã
 = 100000000;

2296 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
DC_TX_LIST_CNT
 - 1;

2306 i‡(
	`DC_IS_INTEL
(
sc
)) {

2307 
	`dc_≠∂y_fixup
(
sc
, 
IFM_AUTO
);

2308 
tmp
 = 
sc
->
dc_pmode
;

2309 
sc
->
dc_pmode
 = 
DC_PMODE_MII
;

2312 
îr‹
 = 
	`mii_phy_¥obe
(
dev
, &
sc
->
dc_miibus
,

2313 
dc_ifmedü_upd
, 
dc_ifmedü_°s
);

2315 i‡(
îr‹
 && 
	`DC_IS_INTEL
(
sc
)) {

2316 
sc
->
dc_pmode
 = 
tmp
;

2317 i‡(
sc
->
dc_pmode
 !
DC_PMODE_SIA
)

2318 
sc
->
dc_pmode
 = 
DC_PMODE_SYM
;

2319 
sc
->
dc_Êags
 |
DC_21143_NWAY
;

2320 
	`mii_phy_¥obe
(
dev
, &
sc
->
dc_miibus
,

2321 
dc_ifmedü_upd
, 
dc_ifmedü_°s
);

2329 i‡(
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CSID
, 4) != 0x80281033)

2330 
sc
->
dc_Êags
 |
DC_TULIP_LEDS
;

2331 
îr‹
 = 0;

2334 i‡(
îr‹
) {

2335 
	`¥ötk
("dc%d: MII wôhouà™y PHY!\n", 
sc
->
dc_unô
);

2336 
	`c⁄tig‰ì
(
sc
->
dc_ld©a
, (
dc_li°_d©a
),

2337 
M_DEVBUF
);

2338 i‡(
sc
->
dc_≤ic_rx_buf
 !
NULL
)

2339 
	`‰ì
(
sc
->
dc_≤ic_rx_buf
, 
M_DEVBUF
);

2340 
	`bus_ã¨down_öå
(
dev
, 
sc
->
dc_úq
, sc->
dc_öåh™d
);

2341 
	`bus_ªÀa£_ªsour˚
(
dev
, 
SYS_RES_IRQ
, 0, 
sc
->
dc_úq
);

2342 
	`bus_ªÀa£_ªsour˚
(
dev
, 
DC_RES
, 
DC_RID
, 
sc
->
dc_ªs
);

2343 
îr‹
 = 
ENXIO
;

2344 
Áû
;

2351 
	`if_©èch
(
iÂ
);

2352 
	`ëhî_iÁâach
(
iÂ
);

2355 i‡(
	`DC_IS_ADMTEK
(
sc
)) {

2359 
	`DC_SETBIT
(
sc
, 
DC_AL_CR
, 
DC_AL_CR_ATUR
);

2362 if(
sc
->
d´m⁄tid
 == 0) {

2363 
sc
->
d´m⁄tid
 = 
	`πems_bsd√t_√w¥oc
("decD",4096, \

2364 
dc_d´m⁄
,(*)
sc
);

2365 
	`¥ötk
("dec[%d]: d´m⁄Öro˚s†°¨ãd\n", 
sc
->
dc_unô
);

2374 #ifde‡
SRM_MEDIA


2375 
sc
->
dc_§m_medü
 = 0;

2378 i‡(
	`DC_IS_INTEL
(
sc
)) {

2379 
comm™d
 = 
	`pci_ªad_c⁄fig
(
dev
, 
DC_PCI_CFDD
, 4);

2380 
comm™d
 &~(
DC_CFDD_SNOOZE_MODE
|
DC_CFDD_SLEEP_MODE
);

2381 (
comm™d
 >> 8) & 0xff) {

2383 
sc
->
dc_§m_medü
 = 
IFM_10_T
;

2386 
sc
->
dc_§m_medü
 = 
IFM_10_T
 | 
IFM_FDX
;

2389 
sc
->
dc_§m_medü
 = 
IFM_100_TX
;

2392 
sc
->
dc_§m_medü
 = 
IFM_100_TX
 | 
IFM_FDX
;

2395 i‡(
sc
->
dc_§m_medü
)

2396 
sc
->
dc_§m_medü
 |
IFM_ACTIVE
 | 
IFM_ETHER
;

2401 
Áû
:

2404 
	}
}

2407 
	$dc_dëach
(
dev
)

2408 
devi˚_t
 
dev
;

2410 
dc_so·c
 *
sc
;

2411 
i‚ë
 *
iÂ
;

2412 
s
;

2413 
dc_medüöfo
 *
m
;

2416 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

2417 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2419 
	`dc_°›
(
sc
);

2420 
	`ëhî_ifdëach
(
iÂ
, 
ETHER_BPF_SUPPORTED
);

2422 
	`bus_gíîic_dëach
(
dev
);

2423 
	`devi˚_dñëe_chûd
(
dev
, 
sc
->
dc_miibus
);

2425 
	`bus_ã¨down_öå
(
dev
, 
sc
->
dc_úq
, sc->
dc_öåh™d
);

2426 
	`bus_ªÀa£_ªsour˚
(
dev
, 
SYS_RES_IRQ
, 0, 
sc
->
dc_úq
);

2427 
	`bus_ªÀa£_ªsour˚
(
dev
, 
DC_RES
, 
DC_RID
, 
sc
->
dc_ªs
);

2429 
	`c⁄tig‰ì
(
sc
->
dc_ld©a
, (
dc_li°_d©a
), 
M_DEVBUF
);

2430 i‡(
sc
->
dc_≤ic_rx_buf
 !
NULL
)

2431 
	`‰ì
(
sc
->
dc_≤ic_rx_buf
, 
M_DEVBUF
);

2433 
sc
->
dc_mi
 !
NULL
) {

2434 
m
 = 
sc
->
dc_mi
->
dc_√xt
;

2435 
	`‰ì
(
sc
->
dc_mi
, 
M_DEVBUF
);

2436 
sc
->
dc_mi
 = 
m
;

2438 
	`‰ì
(
sc
->
dc_§om
, 
M_DEVBUF
);

2442 
	}
}

2449 
	$dc_li°_tx_öô
(
sc
)

2450 
dc_so·c
 *
sc
;

2452 
dc_chaö_d©a
 *
cd
;

2453 
dc_li°_d©a
 *
ld
;

2454 
i
;

2456 
cd
 = &
sc
->
dc_cd©a
;

2457 
ld
 = 
sc
->
dc_ld©a
;

2458 
i
 = 0; i < 
DC_TX_LIST_CNT
; i++) {

2459 i‡(
i
 =(
DC_TX_LIST_CNT
 - 1)) {

2460 
ld
->
dc_tx_li°
[
i
].
dc_√xt
 =

2461 
	`vt›hys
(&
ld
->
dc_tx_li°
[0]);

2463 
ld
->
dc_tx_li°
[
i
].
dc_√xt
 =

2464 
	`vt›hys
(&
ld
->
dc_tx_li°
[
i
 + 1]);

2466 
cd
->
dc_tx_chaö
[
i
] = 
NULL
;

2467 
ld
->
dc_tx_li°
[
i
].
dc_d©a
 = 0;

2468 
ld
->
dc_tx_li°
[
i
].
dc_˘l
 = 0;

2471 
cd
->
dc_tx_¥od
 = cd->
dc_tx_c⁄s
 = cd->
dc_tx_˙t
 = 0;

2474 
	}
}

2482 
	$dc_li°_rx_öô
(
sc
)

2483 
dc_so·c
 *
sc
;

2485 
dc_chaö_d©a
 *
cd
;

2486 
dc_li°_d©a
 *
ld
;

2487 
i
;

2489 
cd
 = &
sc
->
dc_cd©a
;

2490 
ld
 = 
sc
->
dc_ld©a
;

2492 
i
 = 0; i < 
DC_RX_LIST_CNT
; i++) {

2493 i‡(
	`dc_√wbuf
(
sc
, 
i
, 
NULL
Ë=
ENOBUFS
)

2494 (
ENOBUFS
);

2495 i‡(
i
 =(
DC_RX_LIST_CNT
 - 1)) {

2496 
ld
->
dc_rx_li°
[
i
].
dc_√xt
 =

2497 
	`vt›hys
(&
ld
->
dc_rx_li°
[0]);

2499 
ld
->
dc_rx_li°
[
i
].
dc_√xt
 =

2500 
	`vt›hys
(&
ld
->
dc_rx_li°
[
i
 + 1]);

2504 
cd
->
dc_rx_¥od
 = 0;

2507 
	}
}

2512 
	$dc_√wbuf
(
sc
, 
i
, 
m
)

2513 
dc_so·c
 *
sc
;

2514 
i
;

2515 
mbuf
 *
m
;

2517 
mbuf
 *
m_√w
 = 
NULL
;

2518 
dc_desc
 *
c
;

2520 
c
 = &
sc
->
dc_ld©a
->
dc_rx_li°
[
i
];

2522 i‡(
m
 =
NULL
) {

2523 
	`MGETHDR
(
m_√w
, 
M_DONTWAIT
, 
MT_DATA
);

2524 i‡(
m_√w
 =
NULL
)

2525 (
ENOBUFS
);

2527 
	`MCLGET
(
m_√w
, 
M_DONTWAIT
);

2528 i‡(!(
m_√w
->
m_Êags
 & 
M_EXT
)) {

2529 
	`m_‰ìm
(
m_√w
);

2530 (
ENOBUFS
);

2532 
m_√w
->
m_Àn
 = m_√w->
m_pkthdr
.
Àn
 = 
MCLBYTES
;

2534 
m_√w
 = 
m
;

2535 
m_√w
->
m_Àn
 = m_√w->
m_pkthdr
.
Àn
 = 
MCLBYTES
;

2536 
m_√w
->
m_d©a
 = m_√w->
m_ext
.
ext_buf
;

2539 
	`m_adj
(
m_√w
, (
u_öt64_t
));

2546 i‡(
sc
->
dc_Êags
 & 
DC_PNIC_RX_BUG_WAR
)

2547 
	`bzîo
((*)
	`mtod
(
m_√w
, *), m_√w->
m_Àn
);

2549 
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
] = 
m_√w
;

2550 
c
->
dc_d©a
 = 
	`vt›hys
(
	`mtod
(
m_√w
, 
ˇddr_t
));

2551 
c
->
dc_˘l
 = 
DC_RXCTL_RLINK
 | 
DC_RXLEN
;

2552 
c
->
dc_°©us
 = 
DC_RXSTAT_OWN
;

2555 
	}
}

2609 
	#DC_WHOLEFRAME
 (
DC_RXSTAT_FIRSTFRAG
|
DC_RXSTAT_LASTFRAG
)

	)

2610 
	$dc_≤ic_rx_bug_w¨
(
sc
, 
idx
)

2611 
dc_so·c
 *
sc
;

2612 
idx
;

2614 
dc_desc
 *
cur_rx
;

2615 
dc_desc
 *
c
 = 
NULL
;

2616 
mbuf
 *
m
 = 
NULL
;

2617 *
±r
;

2618 
i
, 
tŸÆ_Àn
;

2619 
u_öt32_t
 
rx°©
 = 0;

2621 
i
 = 
sc
->
dc_≤ic_rx_bug_ßve
;

2622 
cur_rx
 = &
sc
->
dc_ld©a
->
dc_rx_li°
[
idx
];

2623 
±r
 = 
sc
->
dc_≤ic_rx_buf
;

2624 
	`bzîo
(
±r
, (
DC_RXLEN
 * 5));

2628 
c
 = &
sc
->
dc_ld©a
->
dc_rx_li°
[
i
];

2629 
rx°©
 = 
c
->
dc_°©us
;

2630 
m
 = 
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
];

2631 
	`bc›y
(
	`mtod
(
m
, *), 
±r
, 
DC_RXLEN
);

2632 
±r
 +
DC_RXLEN
;

2634 i‡(
i
 =
idx
 || 
rx°©
 & 
DC_RXSTAT_LASTFRAG
)

2636 
	`dc_√wbuf
(
sc
, 
i
, 
m
);

2637 
	`DC_INC
(
i
, 
DC_RX_LIST_CNT
);

2641 
tŸÆ_Àn
 = 
	`DC_RXBYTES
(
rx°©
);

2644 *
±r
 == 0x00)

2645 
±r
--;

2648 i‡((
uöçå_t
)(
±r
) & 0x3)

2649 
±r
 -= 1;

2653 
±r
 -
tŸÆ_Àn
;

2654 i‡(
±r
 < 
sc
->
dc_≤ic_rx_buf
)

2655 
±r
 = 
sc
->
dc_≤ic_rx_buf
;

2662 
	`dc_√wbuf
(
sc
, 
i
, 
m
);

2663 
	`bc›y
(
±r
, 
	`mtod
(
m
, *), 
tŸÆ_Àn
);

2664 
cur_rx
->
dc_°©us
 = 
rx°©
 | 
DC_RXSTAT_FIRSTFRAG
;

2667 
	}
}

2680 
	$dc_rx_ªsync
(
sc
)

2681 
dc_so·c
 *
sc
;

2683 
i
, 
pos
;

2684 
dc_desc
 *
cur_rx
;

2686 
pos
 = 
sc
->
dc_cd©a
.
dc_rx_¥od
;

2688 
i
 = 0; i < 
DC_RX_LIST_CNT
; i++) {

2689 
cur_rx
 = &
sc
->
dc_ld©a
->
dc_rx_li°
[
pos
];

2690 i‡(!(
cur_rx
->
dc_°©us
 & 
DC_RXSTAT_OWN
))

2692 
	`DC_INC
(
pos
, 
DC_RX_LIST_CNT
);

2696 i‡(
i
 =
DC_RX_LIST_CNT
)

2700 
sc
->
dc_cd©a
.
dc_rx_¥od
 = 
pos
;

2702 (
EAGAIN
);

2703 
	}
}

2709 
	$dc_rxeof
(
sc
)

2710 
dc_so·c
 *
sc
;

2712 
ëhî_hódî
 *
eh
;

2713 
mbuf
 *
m
;

2714 
i‚ë
 *
iÂ
;

2715 
dc_desc
 *
cur_rx
;

2716 
i
, 
tŸÆ_Àn
 = 0;

2717 
u_öt32_t
 
rx°©
;

2719 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2720 
i
 = 
sc
->
dc_cd©a
.
dc_rx_¥od
;

2722 !(
sc
->
dc_ld©a
->
dc_rx_li°
[
i
].
dc_°©us
 & 
DC_RXSTAT_OWN
)) {

2724 #ifde‡
DEVICE_POLLING


2725 i‡(
iÂ
->
if_ùídög
 & 
IFF_POLLING
) {

2726 i‡(
sc
->
rxcy˛es
 <= 0)

2728 
sc
->
rxcy˛es
--;

2731 
cur_rx
 = &
sc
->
dc_ld©a
->
dc_rx_li°
[
i
];

2732 
rx°©
 = 
cur_rx
->
dc_°©us
;

2733 
m
 = 
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
];

2734 
tŸÆ_Àn
 = 
	`DC_RXBYTES
(
rx°©
);

2736 i‡(
sc
->
dc_Êags
 & 
DC_PNIC_RX_BUG_WAR
) {

2737 i‡((
rx°©
 & 
DC_WHOLEFRAME
) != DC_WHOLEFRAME) {

2738 i‡(
rx°©
 & 
DC_RXSTAT_FIRSTFRAG
)

2739 
sc
->
dc_≤ic_rx_bug_ßve
 = 
i
;

2740 i‡((
rx°©
 & 
DC_RXSTAT_LASTFRAG
) == 0) {

2741 
	`DC_INC
(
i
, 
DC_RX_LIST_CNT
);

2744 
	`dc_≤ic_rx_bug_w¨
(
sc
, 
i
);

2745 
rx°©
 = 
cur_rx
->
dc_°©us
;

2746 
tŸÆ_Àn
 = 
	`DC_RXBYTES
(
rx°©
);

2750 
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
] = 
NULL
;

2759 i‡((
rx°©
 & 
DC_RXSTAT_RXERR
)){

2760 i‡(!(
rx°©
 & 
DC_RXSTAT_GIANT
) ||

2761 (
rx°©
 & (
DC_RXSTAT_CRCERR
 | 
DC_RXSTAT_DRIBBLE
 |

2762 
DC_RXSTAT_MIIERE
 | 
DC_RXSTAT_COLLSEEN
 |

2763 
DC_RXSTAT_RUNT
 | 
DC_RXSTAT_DE
))) {

2764 
iÂ
->
if_õº‹s
++;

2765 i‡(
rx°©
 & 
DC_RXSTAT_COLLSEEN
)

2766 
iÂ
->
if_cﬁlisi⁄s
++;

2767 
	`dc_√wbuf
(
sc
, 
i
, 
m
);

2768 i‡(
rx°©
 & 
DC_RXSTAT_CRCERR
) {

2769 
	`DC_INC
(
i
, 
DC_RX_LIST_CNT
);

2772 
	`dc_öô
(
sc
);

2779 
tŸÆ_Àn
 -
ETHER_CRC_LEN
;

2781 #ifde‡
__i386__


2791 i‡(
dc_quick
 && 
	`dc_√wbuf
(
sc
, 
i
, 
NULL
) == 0) {

2792 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

2793 
m
->
m_pkthdr
.
Àn
 = m->
m_Àn
 = 
tŸÆ_Àn
;

2794 
	`DC_INC
(
i
, 
DC_RX_LIST_CNT
);

2798 
mbuf
 *
m0
;

2800 
m0
 = 
	`m_devgë
(
	`mtod
(
m
, *Ë- 
ETHER_ALIGN
,

2801 
tŸÆ_Àn
 + 
ETHER_ALIGN
, 0, 
iÂ
, 
NULL
);

2802 
	`dc_√wbuf
(
sc
, 
i
, 
m
);

2803 
	`DC_INC
(
i
, 
DC_RX_LIST_CNT
);

2804 i‡(
m0
 =
NULL
) {

2805 
iÂ
->
if_õº‹s
++;

2808 
	`m_adj
(
m0
, 
ETHER_ALIGN
);

2809 
m
 = 
m0
;

2812 
iÂ
->
if_ùackës
++;

2813 
eh
 = 
	`mtod
(
m
, 
ëhî_hódî
 *);

2816 
	`m_adj
(
m
, (
ëhî_hódî
));

2817 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

2820 
sc
->
dc_cd©a
.
dc_rx_¥od
 = 
i
;

2821 
	}
}

2829 
	$dc_txeof
(
sc
)

2830 
dc_so·c
 *
sc
;

2832 
dc_desc
 *
cur_tx
 = 
NULL
;

2833 
i‚ë
 *
iÂ
;

2834 
idx
;

2836 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2842 
idx
 = 
sc
->
dc_cd©a
.
dc_tx_c⁄s
;

2843 
idx
 !
sc
->
dc_cd©a
.
dc_tx_¥od
) {

2844 
u_öt32_t
 
tx°©
;

2846 
cur_tx
 = &
sc
->
dc_ld©a
->
dc_tx_li°
[
idx
];

2847 
tx°©
 = 
cur_tx
->
dc_°©us
;

2849 i‡(
tx°©
 & 
DC_TXSTAT_OWN
)

2852 i‡(!(
cur_tx
->
dc_˘l
 & 
DC_TXCTL_LASTFRAG
) ||

2853 
cur_tx
->
dc_˘l
 & 
DC_TXCTL_SETUP
) {

2854 i‡(
cur_tx
->
dc_˘l
 & 
DC_TXCTL_SETUP
) {

2864 i‡(
	`DC_IS_PNIC
(
sc
)) {

2865 i‡(
tx°©
 & 
DC_TXSTAT_ERRSUM
)

2866 
	`dc_£tfût
(
sc
);

2868 
sc
->
dc_cd©a
.
dc_tx_chaö
[
idx
] = 
NULL
;

2870 
sc
->
dc_cd©a
.
dc_tx_˙t
--;

2871 
	`DC_INC
(
idx
, 
DC_TX_LIST_CNT
);

2875 i‡(
	`DC_IS_CONEXANT
(
sc
)) {

2884 
sc
->
dc_pmode
 =
DC_PMODE_MII
 &&

2885 ((
tx°©
 & 0xFFFFË& ~(
DC_TXSTAT_ERRSUM
|

2886 
DC_TXSTAT_NOCARRIER
)))

2887 
tx°©
 &~
DC_TXSTAT_ERRSUM
;

2890 
sc
->
dc_pmode
 =
DC_PMODE_MII
 &&

2891 ((
tx°©
 & 0xFFFFË& ~(
DC_TXSTAT_ERRSUM
|

2892 
DC_TXSTAT_NOCARRIER
|
DC_TXSTAT_CARRLOST
)))

2893 
tx°©
 &~
DC_TXSTAT_ERRSUM
;

2896 i‡(
tx°©
 & 
DC_TXSTAT_ERRSUM
) {

2897 
iÂ
->
if_€º‹s
++;

2898 i‡(
tx°©
 & 
DC_TXSTAT_EXCESSCOLL
)

2899 
iÂ
->
if_cﬁlisi⁄s
++;

2900 i‡(
tx°©
 & 
DC_TXSTAT_LATECOLL
)

2901 
iÂ
->
if_cﬁlisi⁄s
++;

2902 i‡(!(
tx°©
 & 
DC_TXSTAT_UNDERRUN
)) {

2903 
	`dc_öô
(
sc
);

2908 
iÂ
->
if_cﬁlisi⁄s
 +(
tx°©
 & 
DC_TXSTAT_COLLCNT
) >> 3;

2910 
iÂ
->
if_›ackës
++;

2911 i‡(
sc
->
dc_cd©a
.
dc_tx_chaö
[
idx
] !
NULL
) {

2912 
	`m_‰ìm
(
sc
->
dc_cd©a
.
dc_tx_chaö
[
idx
]);

2913 
sc
->
dc_cd©a
.
dc_tx_chaö
[
idx
] = 
NULL
;

2916 
sc
->
dc_cd©a
.
dc_tx_˙t
--;

2917 
	`DC_INC
(
idx
, 
DC_TX_LIST_CNT
);

2920 i‡(
idx
 !
sc
->
dc_cd©a
.
dc_tx_c⁄s
) {

2922 
sc
->
dc_cd©a
.
dc_tx_c⁄s
 = 
idx
;

2923 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

2925 
iÂ
->
if_timî
 = (
sc
->
dc_cd©a
.
dc_tx_˙t
 == 0) ? 0 : 5;

2928 
	}
}

2932 
	$dc_tick
(
xsc
)

2933 *
xsc
;

2935 
dc_so·c
 *
sc
;

2937 
i‚ë
 *
iÂ
;

2938 
s
;

2939 
u_öt32_t
 
r
;

2942 
sc
 = 
xsc
;

2943 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

2944 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

2946 i‡(
sc
->
dc_Êags
 & 
DC_REDUCED_MII_POLL
) {

2947 i‡(
sc
->
dc_Êags
 & 
DC_21143_NWAY
) {

2948 
r
 = 
	`CSR_READ_4
(
sc
, 
DC_10BTSTAT
);

2949 i‡(
	`IFM_SUBTYPE
(
mii
->
mii_medü_a˘ive
) ==

2950 
IFM_100_TX
 && (
r
 & 
DC_TSTAT_LS100
)) {

2951 
sc
->
dc_lök
 = 0;

2952 
	`mii_medüchg
(
mii
);

2954 i‡(
	`IFM_SUBTYPE
(
mii
->
mii_medü_a˘ive
) ==

2955 
IFM_10_T
 && (
r
 & 
DC_TSTAT_LS10
)) {

2956 
sc
->
dc_lök
 = 0;

2957 
	`mii_medüchg
(
mii
);

2959 i‡(
sc
->
dc_lök
 == 0)

2960 
	`mii_tick
(
mii
);

2962 
r
 = 
	`CSR_READ_4
(
sc
, 
DC_ISR
);

2963 i‡((
r
 & 
DC_ISR_RX_STATE
Ë=
DC_RXSTATE_WAIT
 &&

2964 
sc
->
dc_cd©a
.
dc_tx_˙t
 == 0)

2965 
	`mii_tick
(
mii
);

2966 i‡(!(
mii
->
mii_medü_°©us
 & 
IFM_ACTIVE
))

2967 
sc
->
dc_lök
 = 0;

2970 
	`mii_tick
(
mii
);

2991 i‡(!
sc
->
dc_lök
) {

2992 
	`mii_pﬁl°©
(
mii
);

2993 i‡(
mii
->
mii_medü_°©us
 & 
IFM_ACTIVE
 &&

2994 
	`IFM_SUBTYPE
(
mii
->
mii_medü_a˘ive
Ë!
IFM_NONE
) {

2995 
sc
->
dc_lök
++;

2996 i‡(
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
)

2997 
	`dc_°¨t
(
iÂ
);

3001 i‡(
sc
->
dc_Êags
 & 
DC_21143_NWAY
 && !sc->
dc_lök
)

3002 
sc
->
dc_°©_ch
 = 
	`timeout
(
dc_tick
, sc, 
hz
/10);

3004 
sc
->
dc_°©_ch
 = 
	`timeout
(
dc_tick
, sc, 
hz
);

3007 
	}
}

3014 
	$dc_tx_undîrun
(
sc
)

3015 
dc_so·c
 *
sc
;

3017 
u_öt32_t
 
i§
;

3018 
i
;

3020 i‡(
	`DC_IS_DAVICOM
(
sc
))

3021 
	`dc_öô
(
sc
);

3023 i‡(
	`DC_IS_INTEL
(
sc
)) {

3029 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_ON
);

3031 
i
 = 0; i < 
DC_TIMEOUT
; i++) {

3032 
i§
 = 
	`CSR_READ_4
(
sc
, 
DC_ISR
);

3033 i‡(
i§
 & 
DC_ISR_TX_IDLE
)

3035 
	`DELAY
(10);

3037 i‡(
i
 =
DC_TIMEOUT
) {

3038 
	`¥ötk
("dc%d: failedÅo forceÅxÅo idle state\n",

3039 
sc
->
dc_unô
);

3040 
	`dc_öô
(
sc
);

3044 
	`¥ötk
("dc%d: TX undîru¿-- ", 
sc
->
dc_unô
);

3045 
sc
->
dc_txthªsh
 +
DC_TXTHRESH_INC
;

3046 i‡(
sc
->
dc_txthªsh
 > 
DC_TXTHRESH_MAX
) {

3047 
	`¥ötk
("using storeánd forward mode\n");

3048 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_STORENFWD
);

3050 
	`¥ötk
("increasing TXÅhreshold\n");

3051 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_THRESH
);

3052 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, sc->
dc_txthªsh
);

3055 i‡(
	`DC_IS_INTEL
(
sc
))

3056 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_ON
);

3059 
	}
}

3061 #ifde‡
DEVICE_POLLING


3062 
pﬁl_h™dÀr_t
 
	gdc_pﬁl
;

3065 
	$dc_pﬁl
(
i‚ë
 *
iÂ
, 
pﬁl_cmd
 
cmd
, 
cou¡
)

3067 
dc_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

3069 i‡(
cmd
 =
POLL_DEREGISTER
) {

3071 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 
DC_INTRS
);

3074 
sc
->
rxcy˛es
 = 
cou¡
;

3075 
	`dc_rxeof
(
sc
);

3076 
	`dc_txeof
(
sc
);

3077 i‡(
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
 && !(iÂ->
if_Êags
 & 
IFF_OACTIVE
))

3078 
	`dc_°¨t
(
iÂ
);

3080 i‡(
cmd
 =
POLL_AND_CHECK_STATUS
) {

3081 
u_öt32_t
 
°©us
;

3083 
°©us
 = 
	`CSR_READ_4
(
sc
, 
DC_ISR
);

3084 
°©us
 &(
DC_ISR_RX_WATDOGTIMEO
|
DC_ISR_RX_NOBUF
|

3085 
DC_ISR_TX_NOBUF
|
DC_ISR_TX_IDLE
|
DC_ISR_TX_UNDERRUN
|

3086 
DC_ISR_BUS_ERR
);

3087 i‡(!
°©us
)

3090 
	`CSR_WRITE_4
(
sc
, 
DC_ISR
, 
°©us
);

3092 i‡(
°©us
 & (
DC_ISR_RX_WATDOGTIMEO
|
DC_ISR_RX_NOBUF
) ) {

3093 
u_öt32_t
 
r
 = 
	`CSR_READ_4
(
sc
, 
DC_FRAMESDISCARDED
);

3094 
iÂ
->
if_õº‹s
 +(
r
 & 0xffff) + ((r >> 17) & 0x7ff);

3096 i‡(
	`dc_rx_ªsync
(
sc
))

3097 
	`dc_rxeof
(
sc
);

3100 i‡(
°©us
 & 
DC_ISR_TX_IDLE
 && 
sc
->
dc_cd©a
.
dc_tx_˙t
)

3101 
	`CSR_WRITE_4
(
sc
, 
DC_TXSTART
, 0xFFFFFFFF);

3103 i‡(
°©us
 & 
DC_ISR_TX_UNDERRUN
)

3104 
	`dc_tx_undîrun
(
sc
);

3106 i‡(
°©us
 & 
DC_ISR_BUS_ERR
) {

3107 
	`¥ötk
("dc_pﬁl: dc%d bu†îr‹\n", 
sc
->
dc_unô
);

3108 
	`dc_ª£t
(
sc
);

3109 
	`dc_öô
(
sc
);

3112 
	}
}

3116 
	$dc_öå
(* 
¨g
)

3119 
dc_so·c
 *
sc
 = (dc_so·¯*)
¨g
;

3123 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 0x00000000);

3125 
	`πems_bsd√t_evít_£nd
(
sc
->
d´m⁄tid
, 
IRQ_EVENT
);

3127 i‡(
sc
->
su•íded
) {

3131 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3133 #ifde‡
DEVICE_POLLING


3134 i‡(
iÂ
->
if_ùídög
 & 
IFF_POLLING
)

3136 i‡(
	`ëhî_pﬁl_ªgi°î
(
dc_pﬁl
, 
iÂ
)) {

3137 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 0x00000000);

3141 i‡–(
	`CSR_READ_4
(
sc
, 
DC_ISR
Ë& 
DC_INTRS
) == 0)

3145 i‡(!(
iÂ
->
if_Êags
 & 
IFF_UP
)) {

3146 i‡(
	`CSR_READ_4
(
sc
, 
DC_ISR
Ë& 
DC_INTRS
)

3147 
	`dc_°›
(
sc
);

3151 
	}
}

3155 
	$dc_d´m⁄
(* 
¨g
)

3157 
dc_so·c
 *
sc
 = (dc_so·¯*)
¨g
;

3158 
i‚ë
 *
iÂ
;

3159 
u_öt32_t
 
°©us
;

3160 
πems_evít_£t
 
evíts
;

3164 
	`πems_bsd√t_evít_ª˚ive
(
RTEMS_ALL_EVENTS
, \

3165 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
, \

3166 
RTEMS_NO_TIMEOUT
,

3167 &
evíts
);

3170 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3172 (
°©us
 = 
	`CSR_READ_4
(
sc
, 
DC_ISR
)Ë& 
DC_INTRS
) {

3174 
	`CSR_WRITE_4
(
sc
, 
DC_ISR
, 
°©us
);

3176 i‡(
°©us
 & 
DC_ISR_RX_OK
) {

3177 
cuΩkts
;

3178 
cuΩkts
 = 
iÂ
->
if_ùackës
;

3179 
	`dc_rxeof
(
sc
);

3180 i‡(
cuΩkts
 =
iÂ
->
if_ùackës
) {

3181 
	`dc_rx_ªsync
(
sc
))

3182 
	`dc_rxeof
(
sc
);

3186 i‡(
°©us
 & (
DC_ISR_TX_OK
|
DC_ISR_TX_NOBUF
))

3187 
	`dc_txeof
(
sc
);

3189 i‡(
°©us
 & 
DC_ISR_TX_IDLE
) {

3190 
	`dc_txeof
(
sc
);

3191 i‡(
sc
->
dc_cd©a
.
dc_tx_˙t
) {

3192 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_ON
);

3193 
	`CSR_WRITE_4
(
sc
, 
DC_TXSTART
, 0xFFFFFFFF);

3197 i‡(
°©us
 & 
DC_ISR_TX_UNDERRUN
)

3198 
	`dc_tx_undîrun
(
sc
);

3200 i‡((
°©us
 & 
DC_ISR_RX_WATDOGTIMEO
)

3201 || (
°©us
 & 
DC_ISR_RX_NOBUF
)) {

3202 
cuΩkts
;

3203 
cuΩkts
 = 
iÂ
->
if_ùackës
;

3204 
	`dc_rxeof
(
sc
);

3205 i‡(
cuΩkts
 =
iÂ
->
if_ùackës
) {

3206 
	`dc_rx_ªsync
(
sc
))

3207 
	`dc_rxeof
(
sc
);

3211 i‡(
°©us
 & 
DC_ISR_BUS_ERR
) {

3212 
	`dc_ª£t
(
sc
);

3213 
	`dc_öô
(
sc
);

3219 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 
DC_INTRS
);

3221 i‡(
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
)

3222 
	`dc_°¨t
(
iÂ
);

3225 
	}
}

3232 
	$dc_íˇp
(
sc
, 
m_hód
, 
txidx
)

3233 
dc_so·c
 *
sc
;

3234 
mbuf
 *
m_hód
;

3235 
u_öt32_t
 *
txidx
;

3237 
dc_desc
 *
f
 = 
NULL
;

3238 
mbuf
 *
m
;

3239 
‰ag
, 
cur
, 
˙t
 = 0;

3246 
m
 = 
m_hód
;

3247 
cur
 = 
‰ag
 = *
txidx
;

3249 
m
 = 
m_hód
; m !
NULL
; m = m->
m_√xt
) {

3250 i‡(
m
->
m_Àn
 != 0) {

3251 i‡(
sc
->
dc_Êags
 & 
DC_TX_ADMTEK_WAR
) {

3252 i‡(*
txidx
 !
sc
->
dc_cd©a
.
dc_tx_¥od
 &&

3253 
‰ag
 =(
DC_TX_LIST_CNT
 - 1))

3254 (
ENOBUFS
);

3256 i‡((
DC_TX_LIST_CNT
 -

3257 (
sc
->
dc_cd©a
.
dc_tx_˙t
 + 
˙t
)) < 5)

3258 (
ENOBUFS
);

3260 
f
 = &
sc
->
dc_ld©a
->
dc_tx_li°
[
‰ag
];

3261 
f
->
dc_˘l
 = 
DC_TXCTL_TLINK
 | 
m
->
m_Àn
;

3262 i‡(
˙t
 == 0) {

3263 
f
->
dc_°©us
 = 0;

3264 
f
->
dc_˘l
 |
DC_TXCTL_FIRSTFRAG
;

3266 
f
->
dc_°©us
 = 
DC_TXSTAT_OWN
;

3267 
f
->
dc_d©a
 = 
	`vt›hys
(
	`mtod
(
m
, 
vm_off£t_t
));

3268 
cur
 = 
‰ag
;

3269 
	`DC_INC
(
‰ag
, 
DC_TX_LIST_CNT
);

3270 
˙t
++;

3274 i‡(
m
 !
NULL
)

3275 (
ENOBUFS
);

3277 
sc
->
dc_cd©a
.
dc_tx_˙t
 +
˙t
;

3278 
sc
->
dc_cd©a
.
dc_tx_chaö
[
cur
] = 
m_hód
;

3279 
sc
->
dc_ld©a
->
dc_tx_li°
[
cur
].
dc_˘l
 |
DC_TXCTL_LASTFRAG
;

3280 i‡(
sc
->
dc_Êags
 & 
DC_TX_INTR_FIRSTFRAG
)

3281 
sc
->
dc_ld©a
->
dc_tx_li°
[*
txidx
].
dc_˘l
 |
DC_TXCTL_FINT
;

3282 i‡(
sc
->
dc_Êags
 & 
DC_TX_INTR_ALWAYS
)

3283 
sc
->
dc_ld©a
->
dc_tx_li°
[
cur
].
dc_˘l
 |
DC_TXCTL_FINT
;

3284 i‡(
sc
->
dc_Êags
 & 
DC_TX_USE_TX_INTR
 && sc->
dc_cd©a
.
dc_tx_˙t
 > 64)

3285 
sc
->
dc_ld©a
->
dc_tx_li°
[
cur
].
dc_˘l
 |
DC_TXCTL_FINT
;

3286 
sc
->
dc_ld©a
->
dc_tx_li°
[*
txidx
].
dc_°©us
 = 
DC_TXSTAT_OWN
;

3287 *
txidx
 = 
‰ag
;

3290 
	}
}

3297 
	$dc_cﬂl
(
sc
, 
m_hód
)

3298 
dc_so·c
 *
sc
;

3299 
mbuf
 **
m_hód
;

3301 
mbuf
 *
m_√w
, *
m
;

3303 
m
 = *
m_hód
;

3304 
	`MGETHDR
(
m_√w
, 
M_DONTWAIT
, 
MT_DATA
);

3305 i‡(
m_√w
 =
NULL
)

3306 (
ENOBUFS
);

3307 i‡(
m
->
m_pkthdr
.
Àn
 > 
MHLEN
) {

3308 
	`MCLGET
(
m_√w
, 
M_DONTWAIT
);

3309 i‡(!(
m_√w
->
m_Êags
 & 
M_EXT
)) {

3310 
	`m_‰ìm
(
m_√w
);

3311 (
ENOBUFS
);

3314 
	`m_c›yd©a
(
m
, 0, m->
m_pkthdr
.
Àn
, 
	`mtod
(
m_√w
, 
ˇddr_t
));

3315 
m_√w
->
m_pkthdr
.
Àn
 = m_√w->
m_Àn
 = 
m
->m_pkthdr.len;

3316 
	`m_‰ìm
(
m
);

3317 *
m_hód
 = 
m_√w
;

3320 
	}
}

3329 
	$dc_°¨t
(
iÂ
)

3330 
i‚ë
 *
iÂ
;

3332 
dc_so·c
 *
sc
;

3333 
mbuf
 *
m_hód
 = 
NULL
;

3334 
u_öt32_t
 
idx
;

3336 
sc
 = 
iÂ
->
if_so·c
;

3338 i‡(!
sc
->
dc_lök
 && 
iÂ
->
if_¢d
.
ifq_Àn
 < 10)

3341 i‡(
iÂ
->
if_Êags
 & 
IFF_OACTIVE
)

3344 
idx
 = 
sc
->
dc_cd©a
.
dc_tx_¥od
;

3346 
sc
->
dc_cd©a
.
dc_tx_chaö
[
idx
] =
NULL
) {

3347 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m_hód
);

3348 i‡(
m_hód
 =
NULL
)

3351 i‡(
sc
->
dc_Êags
 & 
DC_TX_COALESCE
 &&

3352 
m_hód
->
m_√xt
 !
NULL
) {

3354 i‡(
	`dc_cﬂl
(
sc
, &
m_hód
)) {

3355 
	`IF_PREPEND
(&
iÂ
->
if_¢d
, 
m_hód
);

3356 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

3361 i‡(
	`dc_íˇp
(
sc
, 
m_hód
, &
idx
)) {

3362 
	`IF_PREPEND
(&
iÂ
->
if_¢d
, 
m_hód
);

3363 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

3371 i‡(
iÂ
->
if_bpf
)

3372 
	`bpf_mèp
(
iÂ
, 
m_hód
);

3374 i‡(
sc
->
dc_Êags
 & 
DC_TX_ONE
) {

3375 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

3381 
sc
->
dc_cd©a
.
dc_tx_¥od
 = 
idx
;

3382 i‡(!(
sc
->
dc_Êags
 & 
DC_TX_POLL
))

3383 
	`CSR_WRITE_4
(
sc
, 
DC_TXSTART
, 0xFFFFFFFF);

3388 
iÂ
->
if_timî
 = 5;

3391 
	}
}

3393 
	$dc_öô
(
xsc
)

3394 *
xsc
;

3396 
dc_so·c
 *
sc
 = 
xsc
;

3397 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3406 
	`dc_°›
(
sc
);

3407 
	`dc_ª£t
(
sc
);

3412 i‡(
	`DC_IS_ASIX
(
sc
Ë|| 
	`DC_IS_DAVICOM
(sc))

3413 
	`CSR_WRITE_4
(
sc
, 
DC_BUSCTL
, 0);

3415 
	`CSR_WRITE_4
(
sc
, 
DC_BUSCTL
, 
DC_BUSCTL_MRME
|
DC_BUSCTL_MRLE
);

3419 i‡(
	`DC_IS_INTEL
(
sc
))

3420 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_BUSCTL_ARBITRATION
);

3421 i‡(
	`DC_IS_DAVICOM
(
sc
Ë|| 
	`DC_IS_INTEL
(sc)) {

3422 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_BURSTLEN_USECA
);

3424 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_BURSTLEN_16LONG
);

3426 i‡(
sc
->
dc_Êags
 & 
DC_TX_POLL
)

3427 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_TXPOLL_1
);

3428 
sc
->
dc_ˇchesize
) {

3430 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_CACHEALIGN_32LONG
);

3433 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_CACHEALIGN_16LONG
);

3436 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_CACHEALIGN_8LONG
);

3440 
	`DC_SETBIT
(
sc
, 
DC_BUSCTL
, 
DC_CACHEALIGN_NONE
);

3444 i‡(
sc
->
dc_Êags
 & 
DC_TX_STORENFWD
)

3445 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_STORENFWD
);

3447 i‡(
sc
->
dc_txthªsh
 > 
DC_TXTHRESH_MAX
) {

3448 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_STORENFWD
);

3450 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_STORENFWD
);

3451 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, sc->
dc_txthªsh
);

3455 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_NO_RXCRC
);

3456 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_BACKOFF
);

3458 i‡(
	`DC_IS_MACRONIX
(
sc
Ë|| 
	`DC_IS_PNICII
(sc)) {

3467 
	`DC_CLRBIT
(
sc
, 
DC_MX_MAGICPACKET
, 0xFFFF0000);

3468 i‡(
sc
->
dc_ty≥
 =
DC_TYPE_98713
)

3469 
	`DC_SETBIT
(
sc
, 
DC_MX_MAGICPACKET
, 
DC_MX_MAGIC_98713
);

3471 
	`DC_SETBIT
(
sc
, 
DC_MX_MAGICPACKET
, 
DC_MX_MAGIC_98715
);

3474 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_THRESH
);

3475 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_TXTHRESH_MIN
);

3478 i‡(
	`dc_li°_rx_öô
(
sc
Ë=
ENOBUFS
) {

3479 
	`¥ötk
("dc%d: initialization failed:Ço "

3480 "mem‹y f‹Ñx buf„rs\n", 
sc
->
dc_unô
);

3481 
	`dc_°›
(
sc
);

3488 
	`dc_li°_tx_öô
(
sc
);

3493 
	`CSR_WRITE_4
(
sc
, 
DC_RXADDR
, 
	`vt›hys
(&sc->
dc_ld©a
->
dc_rx_li°
[0]));

3494 
	`CSR_WRITE_4
(
sc
, 
DC_TXADDR
, 
	`vt›hys
(&sc->
dc_ld©a
->
dc_tx_li°
[0]));

3499 #ifde‡
DEVICE_POLLING


3505 i‡(
iÂ
->
if_ùídög
 & 
IFF_POLLING
)

3506 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 0x00000000);

3510 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 
DC_INTRS
);

3511 
	`CSR_WRITE_4
(
sc
, 
DC_ISR
, 0xFFFFFFFF);

3514 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_TX_ON
);

3521 i‡(
sc
->
dc_Êags
 & 
DC_TULIP_LEDS
) {

3522 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
,

3523 
DC_WDOG_CTLWREN
|
DC_WDOG_LINK
|
DC_WDOG_ACTIVITY
);

3524 
	`CSR_WRITE_4
(
sc
, 
DC_WATCHDOG
, 0);

3533 
	`dc_£tfût
(
sc
);

3536 
	`DC_SETBIT
(
sc
, 
DC_NETCFG
, 
DC_NETCFG_RX_ON
);

3537 
	`CSR_WRITE_4
(
sc
, 
DC_RXSTART
, 0xFFFFFFFF);

3540 
	`dc_£tcfg
(
sc
, sc->
dc_if_medü
);

3542 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

3543 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

3549 i‡(
	`IFM_SUBTYPE
(
mii
->
mii_medü
.
ifm_medü
Ë=
IFM_homePNA
)

3550 
sc
->
dc_lök
 = 1;

3552 i‡(
sc
->
dc_Êags
 & 
DC_21143_NWAY
)

3553 
sc
->
dc_°©_ch
 = 
	`timeout
(
dc_tick
, sc, 
hz
/10);

3555 
sc
->
dc_°©_ch
 = 
	`timeout
(
dc_tick
, sc, 
hz
);

3558 #ifde‡
SRM_MEDIA


3559 if(
sc
->
dc_§m_medü
) {

3560 
i‰eq
 
i‰
;

3562 
i‰
.
i‰_medü
 = 
sc
->
dc_§m_medü
;

3563 
	`ifmedü_io˘l
(
iÂ
, &
i‰
, &
mii
->
mii_medü
, 
SIOCSIFMEDIA
);

3564 
sc
->
dc_§m_medü
 = 0;

3569 
	}
}

3576 
	$dc_ifmedü_upd
(
iÂ
)

3577 
i‚ë
 *
iÂ
;

3579 
dc_so·c
 *
sc
;

3580 
mii_d©a
 *
mii
;

3581 
ifmedü
 *
ifm
;

3583 
sc
 = 
iÂ
->
if_so·c
;

3584 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

3585 
	`mii_medüchg
(
mii
);

3586 
ifm
 = &
mii
->
mii_medü
;

3588 i‡(
	`DC_IS_DAVICOM
(
sc
) &&

3589 
	`IFM_SUBTYPE
(
ifm
->
ifm_medü
Ë=
IFM_homePNA
)

3590 
	`dc_£tcfg
(
sc
, 
ifm
->
ifm_medü
);

3592 
sc
->
dc_lök
 = 0;

3595 
	}
}

3600 
	$dc_ifmedü_°s
(
iÂ
, 
ifmr
)

3601 
i‚ë
 *
iÂ
;

3602 
ifmedüªq
 *
ifmr
;

3604 
dc_so·c
 *
sc
;

3605 
mii_d©a
 *
mii
;

3606 
ifmedü
 *
ifm
;

3608 
sc
 = 
iÂ
->
if_so·c
;

3609 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

3610 
	`mii_pﬁl°©
(
mii
);

3611 
ifm
 = &
mii
->
mii_medü
;

3612 i‡(
	`DC_IS_DAVICOM
(
sc
)) {

3613 i‡(
	`IFM_SUBTYPE
(
ifm
->
ifm_medü
Ë=
IFM_homePNA
) {

3614 
ifmr
->
ifm_a˘ive
 = 
ifm
->
ifm_medü
;

3615 
ifmr
->
ifm_°©us
 = 0;

3619 
ifmr
->
ifm_a˘ive
 = 
mii
->
mii_medü_a˘ive
;

3620 
ifmr
->
ifm_°©us
 = 
mii
->
mii_medü_°©us
;

3623 
	}
}

3627 
	$dc_io˘l
(
iÂ
, 
comm™d
, 
d©a
)

3628 
i‚ë
 *
iÂ
;

3629 
io˘l_comm™d_t
 
comm™d
;

3630 
ˇddr_t
 
d©a
;

3632 
dc_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

3635 
îr‹
 = 0;

3638 
comm™d
) {

3639 
SIOCSIFADDR
:

3640 
SIOCGIFADDR
:

3641 
SIOCSIFMTU
:

3642 
îr‹
 = 
	`ëhî_io˘l
(
iÂ
, 
comm™d
, 
d©a
);

3644 
SIOCSIFFLAGS
:

3645 i‡(
iÂ
->
if_Êags
 & 
IFF_UP
) {

3646 
√ed_£tfût
 = (
iÂ
->
if_Êags
 ^ 
sc
->
dc_if_Êags
) &

3647 (
IFF_PROMISC
 | 
IFF_ALLMULTI
);

3648 i‡(
iÂ
->
if_Êags
 & 
IFF_RUNNING
) {

3649 i‡(
√ed_£tfût
)

3650 
	`dc_£tfût
(
sc
);

3652 
sc
->
dc_txthªsh
 = 0;

3653 
	`dc_öô
(
sc
);

3656 i‡(
iÂ
->
if_Êags
 & 
IFF_RUNNING
)

3657 
	`dc_°›
(
sc
);

3659 
sc
->
dc_if_Êags
 = 
iÂ
->
if_Êags
;

3660 
îr‹
 = 0;

3662 
SIOCADDMULTI
:

3663 
SIOCDELMULTI
:

3664 
	`dc_£tfût
(
sc
);

3665 
îr‹
 = 0;

3668 
SIOCGIFMEDIA
:

3669 
SIOCSIFMEDIA
:

3670 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
dc_miibus
);

3671 
îr‹
 = 
	`ifmedü_io˘l
(
iÂ
, 
i‰
, &
mii
->
mii_medü
, 
comm™d
);

3672 #ifde‡
SRM_MEDIA


3673 i‡(
sc
->
dc_§m_medü
)

3674 
sc
->
dc_§m_medü
 = 0;

3679 
îr‹
 = 
EINVAL
;

3684 (
îr‹
);

3685 
	}
}

3687 
	$dc_w©chdog
(
iÂ
)

3688 
i‚ë
 *
iÂ
;

3690 
dc_so·c
 *
sc
;

3692 
sc
 = 
iÂ
->
if_so·c
;

3694 
iÂ
->
if_€º‹s
++;

3695 
	`¥ötk
("dc%d: w©chdogÅimeout\n", 
sc
->
dc_unô
);

3697 
	`dc_°›
(
sc
);

3698 
	`dc_ª£t
(
sc
);

3699 
	`dc_öô
(
sc
);

3701 i‡(
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
)

3702 
	`dc_°¨t
(
iÂ
);

3705 
	}
}

3711 
	$dc_°›
(
sc
)

3712 
dc_so·c
 *
sc
;

3714 
i
;

3715 
i‚ë
 *
iÂ
;

3717 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3718 
iÂ
->
if_timî
 = 0;

3722 
iÂ
->
if_Êags
 &~(
IFF_RUNNING
 | 
IFF_OACTIVE
);

3723 #ifde‡
DEVICE_POLLING


3724 
	`ëhî_pﬁl_dîegi°î
(
iÂ
);

3727 
	`DC_CLRBIT
(
sc
, 
DC_NETCFG
, (
DC_NETCFG_RX_ON
|
DC_NETCFG_TX_ON
));

3728 
	`CSR_WRITE_4
(
sc
, 
DC_IMR
, 0x00000000);

3729 
	`CSR_WRITE_4
(
sc
, 
DC_TXADDR
, 0x00000000);

3730 
	`CSR_WRITE_4
(
sc
, 
DC_RXADDR
, 0x00000000);

3731 
sc
->
dc_lök
 = 0;

3736 
i
 = 0; i < 
DC_RX_LIST_CNT
; i++) {

3737 i‡(
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
] !
NULL
) {

3738 
	`m_‰ìm
(
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
]);

3739 
sc
->
dc_cd©a
.
dc_rx_chaö
[
i
] = 
NULL
;

3742 
	`bzîo
((*)&
sc
->
dc_ld©a
->
dc_rx_li°
,

3743 (
sc
->
dc_ld©a
->
dc_rx_li°
));

3748 
i
 = 0; i < 
DC_TX_LIST_CNT
; i++) {

3749 i‡(
sc
->
dc_cd©a
.
dc_tx_chaö
[
i
] !
NULL
) {

3750 i‡(
sc
->
dc_ld©a
->
dc_tx_li°
[
i
].
dc_˘l
 &

3751 
DC_TXCTL_SETUP
) {

3752 
sc
->
dc_cd©a
.
dc_tx_chaö
[
i
] = 
NULL
;

3755 
	`m_‰ìm
(
sc
->
dc_cd©a
.
dc_tx_chaö
[
i
]);

3756 
sc
->
dc_cd©a
.
dc_tx_chaö
[
i
] = 
NULL
;

3760 
	`bzîo
((*)&
sc
->
dc_ld©a
->
dc_tx_li°
,

3761 (
sc
->
dc_ld©a
->
dc_tx_li°
));

3764 
	}
}

3772 
	$dc_shutdown
(
dev
)

3773 
devi˚_t
 
dev
;

3775 
dc_so·c
 *
sc
;

3777 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

3779 
	`dc_°›
(
sc
);

3782 
	}
}

3789 
	$dc_su•íd
(
dev
)

3790 
devi˚_t
 
dev
;

3792 
i
;

3793 
s
;

3794 
dc_so·c
 *
sc
;

3797 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

3799 
	`dc_°›
(
sc
);

3801 
i
 = 0; i < 5; i++)

3802 
sc
->
ßved_m≠s
[
i
] = 
	`pci_ªad_c⁄fig
(
dev
, 
PCIR_MAPS
 + i * 4, 4);

3803 
sc
->
ßved_bioßddr
 = 
	`pci_ªad_c⁄fig
(
dev
, 
PCIR_BIOS
, 4);

3804 
sc
->
ßved_öéöe
 = 
	`pci_ªad_c⁄fig
(
dev
, 
PCIR_INTLINE
, 1);

3805 
sc
->
ßved_ˇchñnsz
 = 
	`pci_ªad_c⁄fig
(
dev
, 
PCIR_CACHELNSZ
, 1);

3806 
sc
->
ßved_œâimî
 = 
	`pci_ªad_c⁄fig
(
dev
, 
PCIR_LATTIMER
, 1);

3808 
sc
->
su•íded
 = 1;

3811 
	}
}

3818 
	$dc_ªsume
(
dev
)

3819 
devi˚_t
 
dev
;

3821 
i
;

3822 
s
;

3823 
dc_so·c
 *
sc
;

3824 
i‚ë
 *
iÂ
;

3827 
sc
 = 
	`devi˚_gë_so·c
(
dev
);

3828 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

3830 
	`dc_a˝i
(
dev
);

3833 
i
 = 0; i < 5; i++)

3834 
	`pci_wrôe_c⁄fig
(
dev
, 
PCIR_MAPS
 + 
i
 * 4, 
sc
->
ßved_m≠s
[i], 4);

3835 
	`pci_wrôe_c⁄fig
(
dev
, 
PCIR_BIOS
, 
sc
->
ßved_bioßddr
, 4);

3836 
	`pci_wrôe_c⁄fig
(
dev
, 
PCIR_INTLINE
, 
sc
->
ßved_öéöe
, 1);

3837 
	`pci_wrôe_c⁄fig
(
dev
, 
PCIR_CACHELNSZ
, 
sc
->
ßved_ˇchñnsz
, 1);

3838 
	`pci_wrôe_c⁄fig
(
dev
, 
PCIR_LATTIMER
, 
sc
->
ßved_œâimî
, 1);

3841 
	`pci_íabÀ_busma°î
(
dev
);

3842 
	`pci_íabÀ_io
(
dev
, 
DC_RES
);

3845 i‡(
iÂ
->
if_Êags
 & 
IFF_UP
)

3846 
	`dc_öô
(
sc
);

3848 
sc
->
su•íded
 = 0;

3851 
	}
}

	@src/libchip/network/if_dcreg.h

39 
	#DC_BUSCTL
 0x00

	)

40 
	#DC_TXSTART
 0x08

	)

41 
	#DC_RXSTART
 0x10

	)

42 
	#DC_RXADDR
 0x18

	)

43 
	#DC_TXADDR
 0x20

	)

44 
	#DC_ISR
 0x28

	)

45 
	#DC_NETCFG
 0x30

	)

46 
	#DC_IMR
 0x38

	)

47 
	#DC_FRAMESDISCARDED
 0x40

	)

48 
	#DC_SIO
 0x48

	)

49 
	#DC_ROM
 0x50

	)

50 
	#DC_TIMER
 0x58

	)

51 
	#DC_10BTSTAT
 0x60

	)

52 
	#DC_SIARESET
 0x68

	)

53 
	#DC_10BTCTRL
 0x70

	)

54 
	#DC_WATCHDOG
 0x78

	)

66 
	#DC_TYPE_98713
 0x1

	)

67 
	#DC_TYPE_98713A
 0x2

	)

68 
	#DC_TYPE_987x5
 0x3

	)

71 
	#DC_TYPE_21143
 0x4

	)

72 
	#DC_TYPE_ASIX
 0x5

	)

73 
	#DC_TYPE_AL981
 0x6

	)

74 
	#DC_TYPE_AN985
 0x7

	)

75 
	#DC_TYPE_DM9102
 0x8

	)

76 
	#DC_TYPE_PNICII
 0x9

	)

77 
	#DC_TYPE_PNIC
 0xA

	)

78 
	#DC_TYPE_CONEXANT
 0xC

	)

80 
	#DC_IS_MACRONIX
(
x
) \

81 (
x
->
dc_ty≥
 =
DC_TYPE_98713
 || \

82 
x
->
dc_ty≥
 =
DC_TYPE_98713A
 || \

83 
x
->
dc_ty≥
 =
DC_TYPE_987x5
)

	)

85 
	#DC_IS_ADMTEK
(
x
) \

86 (
x
->
dc_ty≥
 =
DC_TYPE_AL981
 || \

87 
x
->
dc_ty≥
 =
DC_TYPE_AN985
)

	)

89 
	#DC_IS_INTEL
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_21143
)

	)

90 
	#DC_IS_ASIX
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_ASIX
)

	)

91 
	#DC_IS_COMET
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_AL981
)

	)

92 
	#DC_IS_CENTAUR
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_AN985
)

	)

93 
	#DC_IS_DAVICOM
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_DM9102
)

	)

94 
	#DC_IS_PNICII
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_PNICII
)

	)

95 
	#DC_IS_PNIC
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_PNIC
)

	)

96 
	#DC_IS_CONEXANT
(
x
Ë(x->
dc_ty≥
 =
DC_TYPE_CONEXANT
)

	)

99 
	#DC_PMODE_MII
 0x1

	)

100 
	#DC_PMODE_SYM
 0x2

	)

101 
	#DC_PMODE_SIA
 0x3

	)

106 
	#DC_BUSCTL_RESET
 0x00000001

	)

107 
	#DC_BUSCTL_ARBITRATION
 0x00000002

	)

108 
	#DC_BUSCTL_SKIPLEN
 0x0000007C

	)

109 
	#DC_BUSCTL_BUF_BIGENDIAN
 0x00000080

	)

110 
	#DC_BUSCTL_BURSTLEN
 0x00003F00

	)

111 
	#DC_BUSCTL_CACHEALIGN
 0x0000C000

	)

112 
	#DC_BUSCTL_TXPOLL
 0x000E0000

	)

113 
	#DC_BUSCTL_DBO
 0x00100000

	)

114 
	#DC_BUSCTL_MRME
 0x00200000

	)

115 
	#DC_BUSCTL_MRLE
 0x00800000

	)

116 
	#DC_BUSCTL_MWIE
 0x01000000

	)

117 
	#DC_BUSCTL_ONNOW_ENB
 0x04000000

	)

119 
	#DC_SKIPLEN_1LONG
 0x00000004

	)

120 
	#DC_SKIPLEN_2LONG
 0x00000008

	)

121 
	#DC_SKIPLEN_3LONG
 0x00000010

	)

122 
	#DC_SKIPLEN_4LONG
 0x00000020

	)

123 
	#DC_SKIPLEN_5LONG
 0x00000040

	)

125 
	#DC_CACHEALIGN_NONE
 0x00000000

	)

126 
	#DC_CACHEALIGN_8LONG
 0x00004000

	)

127 
	#DC_CACHEALIGN_16LONG
 0x00008000

	)

128 
	#DC_CACHEALIGN_32LONG
 0x0000C000

	)

130 
	#DC_BURSTLEN_USECA
 0x00000000

	)

131 
	#DC_BURSTLEN_1LONG
 0x00000100

	)

132 
	#DC_BURSTLEN_2LONG
 0x00000200

	)

133 
	#DC_BURSTLEN_4LONG
 0x00000400

	)

134 
	#DC_BURSTLEN_8LONG
 0x00000800

	)

135 
	#DC_BURSTLEN_16LONG
 0x00001000

	)

136 
	#DC_BURSTLEN_32LONG
 0x00002000

	)

138 
	#DC_TXPOLL_OFF
 0x00000000

	)

139 
	#DC_TXPOLL_1
 0x00020000

	)

140 
	#DC_TXPOLL_2
 0x00040000

	)

141 
	#DC_TXPOLL_3
 0x00060000

	)

142 
	#DC_TXPOLL_4
 0x00080000

	)

143 
	#DC_TXPOLL_5
 0x000A0000

	)

144 
	#DC_TXPOLL_6
 0x000C0000

	)

145 
	#DC_TXPOLL_7
 0x000E0000

	)

150 
	#DC_ISR_TX_OK
 0x00000001

	)

151 
	#DC_ISR_TX_IDLE
 0x00000002

	)

152 
	#DC_ISR_TX_NOBUF
 0x00000004

	)

153 
	#DC_ISR_TX_JABBERTIMEO
 0x00000008

	)

154 
	#DC_ISR_LINKGOOD
 0x00000010

	)

155 
	#DC_ISR_TX_UNDERRUN
 0x00000020

	)

156 
	#DC_ISR_RX_OK
 0x00000040

	)

157 
	#DC_ISR_RX_NOBUF
 0x00000080

	)

158 
	#DC_ISR_RX_READ
 0x00000100

	)

159 
	#DC_ISR_RX_WATDOGTIMEO
 0x00000200

	)

160 
	#DC_ISR_TX_EARLY
 0x00000400

	)

161 
	#DC_ISR_TIMER_EXPIRED
 0x00000800

	)

162 
	#DC_ISR_LINKFAIL
 0x00001000

	)

163 
	#DC_ISR_BUS_ERR
 0x00002000

	)

164 
	#DC_ISR_RX_EARLY
 0x00004000

	)

165 
	#DC_ISR_ABNORMAL
 0x00008000

	)

166 
	#DC_ISR_NORMAL
 0x00010000

	)

167 
	#DC_ISR_RX_STATE
 0x000E0000

	)

168 
	#DC_ISR_TX_STATE
 0x00700000

	)

169 
	#DC_ISR_BUSERRTYPE
 0x03800000

	)

170 
	#DC_ISR_100MBPSLINK
 0x08000000

	)

171 
	#DC_ISR_MAGICKPACK
 0x10000000

	)

173 
	#DC_RXSTATE_STOPPED
 0x00000000

	)

174 
	#DC_RXSTATE_FETCH
 0x00020000

	)

175 
	#DC_RXSTATE_ENDCHECK
 0x00040000

	)

176 
	#DC_RXSTATE_WAIT
 0x00060000

	)

177 
	#DC_RXSTATE_SUSPEND
 0x00080000

	)

178 
	#DC_RXSTATE_CLOSE
 0x000A0000

	)

179 
	#DC_RXSTATE_FLUSH
 0x000C0000

	)

180 
	#DC_RXSTATE_DEQUEUE
 0x000E0000

	)

182 
	#DC_TXSTATE_RESET
 0x00000000

	)

183 
	#DC_TXSTATE_FETCH
 0x00100000

	)

184 
	#DC_TXSTATE_WAITEND
 0x00200000

	)

185 
	#DC_TXSTATE_READING
 0x00300000

	)

186 
	#DC_TXSTATE_RSVD
 0x00400000

	)

187 
	#DC_TXSTATE_SETUP
 0x00500000

	)

188 
	#DC_TXSTATE_SUSPEND
 0x00600000

	)

189 
	#DC_TXSTATE_CLOSE
 0x00700000

	)

194 
	#DC_NETCFG_RX_HASHPERF
 0x00000001

	)

195 
	#DC_NETCFG_RX_ON
 0x00000002

	)

196 
	#DC_NETCFG_RX_HASHONLY
 0x00000004

	)

197 
	#DC_NETCFG_RX_BADFRAMES
 0x00000008

	)

198 
	#DC_NETCFG_RX_INVFILT
 0x00000010

	)

199 
	#DC_NETCFG_BACKOFFCNT
 0x00000020

	)

200 
	#DC_NETCFG_RX_PROMISC
 0x00000040

	)

201 
	#DC_NETCFG_RX_ALLMULTI
 0x00000080

	)

202 
	#DC_NETCFG_FULLDUPLEX
 0x00000200

	)

203 
	#DC_NETCFG_LOOPBACK
 0x00000C00

	)

204 
	#DC_NETCFG_FORCECOLL
 0x00001000

	)

205 
	#DC_NETCFG_TX_ON
 0x00002000

	)

206 
	#DC_NETCFG_TX_THRESH
 0x0000C000

	)

207 
	#DC_NETCFG_TX_BACKOFF
 0x00020000

	)

208 
	#DC_NETCFG_PORTSEL
 0x00040000

	)

209 
	#DC_NETCFG_HEARTBEAT
 0x00080000

	)

210 
	#DC_NETCFG_STORENFWD
 0x00200000

	)

211 
	#DC_NETCFG_SPEEDSEL
 0x00400000

	)

212 
	#DC_NETCFG_PCS
 0x00800000

	)

213 
	#DC_NETCFG_SCRAMBLER
 0x01000000

	)

214 
	#DC_NETCFG_NO_RXCRC
 0x02000000

	)

215 
	#DC_NETCFG_RX_ALL
 0x40000000

	)

216 
	#DC_NETCFG_CAPEFFECT
 0x80000000

	)

218 
	#DC_OPMODE_NORM
 0x00000000

	)

219 
	#DC_OPMODE_INTLOOP
 0x00000400

	)

220 
	#DC_OPMODE_EXTLOOP
 0x00000800

	)

223 
	#DC_TXTHRESH_72BYTES
 0x00000000

	)

224 
	#DC_TXTHRESH_96BYTES
 0x00004000

	)

225 
	#DC_TXTHRESH_128BYTES
 0x00008000

	)

226 
	#DC_TXTHRESH_160BYTES
 0x0000C000

	)

229 
	#DC_TXTHRESH_MIN
 0x00000000

	)

230 
	#DC_TXTHRESH_INC
 0x00004000

	)

231 
	#DC_TXTHRESH_MAX
 0x0000C000

	)

237 
	#DC_IMR_TX_OK
 0x00000001

	)

238 
	#DC_IMR_TX_IDLE
 0x00000002

	)

239 
	#DC_IMR_TX_NOBUF
 0x00000004

	)

240 
	#DC_IMR_TX_JABBERTIMEO
 0x00000008

	)

241 
	#DC_IMR_LINKGOOD
 0x00000010

	)

242 
	#DC_IMR_TX_UNDERRUN
 0x00000020

	)

243 
	#DC_IMR_RX_OK
 0x00000040

	)

244 
	#DC_IMR_RX_NOBUF
 0x00000080

	)

245 
	#DC_IMR_RX_READ
 0x00000100

	)

246 
	#DC_IMR_RX_WATDOGTIMEO
 0x00000200

	)

247 
	#DC_IMR_TX_EARLY
 0x00000400

	)

248 
	#DC_IMR_TIMER_EXPIRED
 0x00000800

	)

249 
	#DC_IMR_LINKFAIL
 0x00001000

	)

250 
	#DC_IMR_BUS_ERR
 0x00002000

	)

251 
	#DC_IMR_RX_EARLY
 0x00004000

	)

252 
	#DC_IMR_ABNORMAL
 0x00008000

	)

253 
	#DC_IMR_NORMAL
 0x00010000

	)

254 
	#DC_IMR_100MBPSLINK
 0x08000000

	)

255 
	#DC_IMR_MAGICKPACK
 0x10000000

	)

257 
	#DC_INTRS
 \

258 (
DC_IMR_RX_OK
|
DC_IMR_TX_OK
|
DC_IMR_RX_NOBUF
|
DC_IMR_RX_WATDOGTIMEO
|\

259 
DC_IMR_TX_NOBUF
|
DC_IMR_TX_UNDERRUN
|
DC_IMR_BUS_ERR
| \

260 
DC_IMR_ABNORMAL
|
DC_IMR_NORMAL
 )

	)

264 
	#DC_SIO_EE_CS
 0x00000001

	)

265 
	#DC_SIO_EE_CLK
 0x00000002

	)

266 
	#DC_SIO_EE_DATAIN
 0x00000004

	)

267 
	#DC_SIO_EE_DATAOUT
 0x00000008

	)

268 
	#DC_SIO_ROMDATA4
 0x00000010

	)

269 
	#DC_SIO_ROMDATA5
 0x00000020

	)

270 
	#DC_SIO_ROMDATA6
 0x00000040

	)

271 
	#DC_SIO_ROMDATA7
 0x00000080

	)

272 
	#DC_SIO_EESEL
 0x00000800

	)

273 
	#DC_SIO_ROMSEL
 0x00001000

	)

274 
	#DC_SIO_ROMCTL_WRITE
 0x00002000

	)

275 
	#DC_SIO_ROMCTL_READ
 0x00004000

	)

276 
	#DC_SIO_MII_CLK
 0x00010000

	)

277 
	#DC_SIO_MII_DATAOUT
 0x00020000

	)

278 
	#DC_SIO_MII_DIR
 0x00040000

	)

279 
	#DC_SIO_MII_DATAIN
 0x00080000

	)

281 
	#DC_EECMD_WRITE
 0x140

	)

282 
	#DC_EECMD_READ
 0x180

	)

283 
	#DC_EECMD_ERASE
 0x1c0

	)

285 
	#DC_EE_NODEADDR_OFFSET
 0x70

	)

286 
	#DC_EE_NODEADDR
 10

	)

291 
	#DC_TIMER_VALUE
 0x0000FFFF

	)

292 
	#DC_TIMER_CONTINUOUS
 0x00010000

	)

297 
	#DC_TSTAT_MIIACT
 0x00000001

	)

298 
	#DC_TSTAT_LS100
 0x00000002

	)

299 
	#DC_TSTAT_LS10
 0x00000004

	)

300 
	#DC_TSTAT_AUTOPOLARITY
 0x00000008

	)

301 
	#DC_TSTAT_AUIACT
 0x00000100

	)

302 
	#DC_TSTAT_10BTACT
 0x00000200

	)

303 
	#DC_TSTAT_NSN
 0x00000400

	)

304 
	#DC_TSTAT_REMFAULT
 0x00000800

	)

305 
	#DC_TSTAT_ANEGSTAT
 0x00007000

	)

306 
	#DC_TSTAT_LP_CAN_NWAY
 0x00008000

	)

307 
	#DC_TSTAT_LPCODEWORD
 0xFFFF0000

	)

309 
	#DC_ASTAT_DISABLE
 0x00000000

	)

310 
	#DC_ASTAT_TXDISABLE
 0x00001000

	)

311 
	#DC_ASTAT_ABDETECT
 0x00002000

	)

312 
	#DC_ASTAT_ACKDETECT
 0x00003000

	)

313 
	#DC_ASTAT_CMPACKDETECT
 0x00004000

	)

314 
	#DC_ASTAT_AUTONEGCMP
 0x00005000

	)

315 
	#DC_ASTAT_LINKCHECK
 0x00006000

	)

320 
	#DC_SIA_RESET
 0x00000001

	)

321 
	#DC_SIA_AUI
 0x00000008

	)

326 
	#DC_TCTL_ENCODER_ENB
 0x00000001

	)

327 
	#DC_TCTL_LOOPBACK
 0x00000002

	)

328 
	#DC_TCTL_DRIVER_ENB
 0x00000004

	)

329 
	#DC_TCTL_LNKPULSE_ENB
 0x00000008

	)

330 
	#DC_TCTL_HALFDUPLEX
 0x00000040

	)

331 
	#DC_TCTL_AUTONEGENBL
 0x00000080

	)

332 
	#DC_TCTL_RX_SQUELCH
 0x00000100

	)

333 
	#DC_TCTL_COLL_SQUELCH
 0x00000200

	)

334 
	#DC_TCTL_COLL_DETECT
 0x00000400

	)

335 
	#DC_TCTL_SQE_ENB
 0x00000800

	)

336 
	#DC_TCTL_LINKTEST
 0x00001000

	)

337 
	#DC_TCTL_AUTOPOLARITY
 0x00002000

	)

338 
	#DC_TCTL_SET_POL_PLUS
 0x00004000

	)

339 
	#DC_TCTL_AUTOSENSE
 0x00008000

	)

340 
	#DC_TCTL_100BTXHALF
 0x00010000

	)

341 
	#DC_TCTL_100BTXFULL
 0x00020000

	)

342 
	#DC_TCTL_100BT4
 0x00040000

	)

347 
	#DC_WDOG_JABBERDIS
 0x00000001

	)

348 
	#DC_WDOG_HOSTUNJAB
 0x00000002

	)

349 
	#DC_WDOG_JABBERCLK
 0x00000004

	)

350 
	#DC_WDOG_RXWDOGDIS
 0x00000010

	)

351 
	#DC_WDOG_RXWDOGCLK
 0x00000020

	)

352 
	#DC_WDOG_MUSTBEZERO
 0x00000100

	)

353 
	#DC_WDOG_AUIBNC
 0x00100000

	)

354 
	#DC_WDOG_ACTIVITY
 0x00200000

	)

355 
	#DC_WDOG_RX_MATCH
 0x00400000

	)

356 
	#DC_WDOG_LINK
 0x00800000

	)

357 
	#DC_WDOG_CTLWREN
 0x08000000

	)

362 
	#DC_SFRAME_LEN
 192

	)

368 
	sdc_desc
 {

369 
u_öt32_t
 
	mdc_°©us
;

370 
u_öt32_t
 
	mdc_˘l
;

371 
u_öt32_t
 
	mdc_±r1
;

372 
u_öt32_t
 
	mdc_±r2
;

375 
	#dc_d©a
 
dc_±r1


	)

376 
	#dc_√xt
 
dc_±r2


	)

378 
	#DC_RXSTAT_FIFOOFLOW
 0x00000001

	)

379 
	#DC_RXSTAT_CRCERR
 0x00000002

	)

380 
	#DC_RXSTAT_DRIBBLE
 0x00000004

	)

381 
	#DC_RXSTAT_MIIERE
 0x00000008

	)

382 
	#DC_RXSTAT_WATCHDOG
 0x00000010

	)

383 
	#DC_RXSTAT_FRAMETYPE
 0x00000020

	)

384 
	#DC_RXSTAT_COLLSEEN
 0x00000040

	)

385 
	#DC_RXSTAT_GIANT
 0x00000080

	)

386 
	#DC_RXSTAT_LASTFRAG
 0x00000100

	)

387 
	#DC_RXSTAT_FIRSTFRAG
 0x00000200

	)

388 
	#DC_RXSTAT_MULTICAST
 0x00000400

	)

389 
	#DC_RXSTAT_RUNT
 0x00000800

	)

390 
	#DC_RXSTAT_RXTYPE
 0x00003000

	)

391 
	#DC_RXSTAT_DE
 0x00004000

	)

392 
	#DC_RXSTAT_RXERR
 0x00008000

	)

393 
	#DC_RXSTAT_RXLEN
 0x3FFF0000

	)

394 
	#DC_RXSTAT_OWN
 0x80000000

	)

396 
	#DC_RXBYTES
(
x
Ë((x & 
DC_RXSTAT_RXLEN
Ë>> 16)

	)

397 
	#DC_RXSTAT
 (
DC_RXSTAT_FIRSTFRAG
|
DC_RXSTAT_LASTFRAG
|
DC_RXSTAT_OWN
)

	)

399 
	#DC_RXCTL_BUFLEN1
 0x00000FFF

	)

400 
	#DC_RXCTL_BUFLEN2
 0x00FFF000

	)

401 
	#DC_RXCTL_RLINK
 0x01000000

	)

402 
	#DC_RXCTL_RLAST
 0x02000000

	)

404 
	#DC_TXSTAT_DEFER
 0x00000001

	)

405 
	#DC_TXSTAT_UNDERRUN
 0x00000002

	)

406 
	#DC_TXSTAT_LINKFAIL
 0x00000003

	)

407 
	#DC_TXSTAT_COLLCNT
 0x00000078

	)

408 
	#DC_TXSTAT_SQE
 0x00000080

	)

409 
	#DC_TXSTAT_EXCESSCOLL
 0x00000100

	)

410 
	#DC_TXSTAT_LATECOLL
 0x00000200

	)

411 
	#DC_TXSTAT_NOCARRIER
 0x00000400

	)

412 
	#DC_TXSTAT_CARRLOST
 0x00000800

	)

413 
	#DC_TXSTAT_JABTIMEO
 0x00004000

	)

414 
	#DC_TXSTAT_ERRSUM
 0x00008000

	)

415 
	#DC_TXSTAT_OWN
 0x80000000

	)

417 
	#DC_TXCTL_BUFLEN1
 0x000007FF

	)

418 
	#DC_TXCTL_BUFLEN2
 0x003FF800

	)

419 
	#DC_TXCTL_FILTTYPE0
 0x00400000

	)

420 
	#DC_TXCTL_PAD
 0x00800000

	)

421 
	#DC_TXCTL_TLINK
 0x01000000

	)

422 
	#DC_TXCTL_TLAST
 0x02000000

	)

423 
	#DC_TXCTL_NOCRC
 0x04000000

	)

424 
	#DC_TXCTL_SETUP
 0x08000000

	)

425 
	#DC_TXCTL_FILTTYPE1
 0x10000000

	)

426 
	#DC_TXCTL_FIRSTFRAG
 0x20000000

	)

427 
	#DC_TXCTL_LASTFRAG
 0x40000000

	)

428 
	#DC_TXCTL_FINT
 0x80000000

	)

430 
	#DC_FILTER_PERFECT
 0x00000000

	)

431 
	#DC_FILTER_HASHPERF
 0x00400000

	)

432 
	#DC_FILTER_INVERSE
 0x10000000

	)

433 
	#DC_FILTER_HASHONLY
 0x10400000

	)

435 
	#DC_MAXFRAGS
 16

	)

436 #ifde‡
DEVICE_POLLING


437 
	#DC_RX_LIST_CNT
 192

	)

439 
	#DC_RX_LIST_CNT
 64

	)

441 
	#DC_TX_LIST_CNT
 256

	)

442 
	#DC_MIN_FRAMELEN
 60

	)

443 
	#DC_RXLEN
 1536

	)

445 
	#DC_INC
(
x
, 
y
Ë(xË(x + 1Ë% 
	)
y

447 
	sdc_li°_d©a
 {

448 
dc_desc
 
	mdc_rx_li°
[
DC_RX_LIST_CNT
];

449 
dc_desc
 
	mdc_tx_li°
[
DC_TX_LIST_CNT
];

452 
	sdc_chaö_d©a
 {

453 
mbuf
 *
	mdc_rx_chaö
[
DC_RX_LIST_CNT
];

454 
mbuf
 *
	mdc_tx_chaö
[
DC_TX_LIST_CNT
];

455 
u_öt32_t
 
	mdc_sbuf
[
DC_SFRAME_LEN
/(u_int32_t)];

456 
u_öt8_t
 
	mdc_∑d
[
DC_MIN_FRAMELEN
];

457 
	mdc_tx_¥od
;

458 
	mdc_tx_c⁄s
;

459 
	mdc_tx_˙t
;

460 
	mdc_rx_¥od
;

463 
	sdc_medüöfo
 {

464 
	mdc_medü
;

465 
u_öt8_t
 *
	mdc_gp_±r
;

466 
u_öt8_t
 
	mdc_gp_Àn
;

467 
u_öt8_t
 *
	mdc_ª£t_±r
;

468 
u_öt8_t
 
	mdc_ª£t_Àn
;

469 
dc_medüöfo
 *
	mdc_√xt
;

473 
	sdc_ty≥
 {

474 
u_öt16_t
 
	mdc_vid
;

475 
u_öt16_t
 
	mdc_did
;

476 *
	mdc_«me
;

477 
	mdc_devsig
;

478 
	mdc_bus
;

479 
	mdc_dev
;

480 
	mdc_fun
;

483 
	sdc_mii_‰ame
 {

484 
u_öt8_t
 
	mmii_°dñim
;

485 
u_öt8_t
 
	mmii_›code
;

486 
u_öt8_t
 
	mmii_phyaddr
;

487 
u_öt8_t
 
	mmii_ªgaddr
;

488 
u_öt8_t
 
	mmii_tu∫¨ound
;

489 
u_öt16_t
 
	mmii_d©a
;

495 
	#DC_MII_STARTDELIM
 0x01

	)

496 
	#DC_MII_READOP
 0x02

	)

497 
	#DC_MII_WRITEOP
 0x01

	)

498 
	#DC_MII_TURNAROUND
 0x02

	)

511 
	#DC_AL_CR
 0x88

	)

512 
	#DC_AL_PAR0
 0xA4

	)

513 
	#DC_AL_PAR1
 0xA8

	)

514 
	#DC_AL_MAR0
 0xAC

	)

515 
	#DC_AL_MAR1
 0xB0

	)

516 
	#DC_AL_BMCR
 0xB4

	)

517 
	#DC_AL_BMSR
 0xB8

	)

518 
	#DC_AL_VENID
 0xBC

	)

519 
	#DC_AL_DEVID
 0xC0

	)

520 
	#DC_AL_ANAR
 0xC4

	)

521 
	#DC_AL_LPAR
 0xC8

	)

522 
	#DC_AL_ANER
 0xCC

	)

524 
	#DC_AL_CR_ATUR
 0x00000001

	)

525 
	#DC_ADMTEK_PHYADDR
 0x1

	)

526 
	#DC_AL_EE_NODEADDR
 4

	)

532 
	#DC_AX_FILTIDX
 0x68

	)

533 
	#DC_AX_FILTDATA
 0x70

	)

538 
	#DC_AX_NETCFG_RX_BROAD
 0x00000100

	)

543 
	#DC_AX_FILTIDX_PAR0
 0x00000000

	)

544 
	#DC_AX_FILTIDX_PAR1
 0x00000001

	)

545 
	#DC_AX_FILTIDX_MAR0
 0x00000002

	)

546 
	#DC_AX_FILTIDX_MAR1
 0x00000003

	)

555 
	#DC_MX_MAGICPACKET
 0x80

	)

556 
	#DC_MX_NWAYSTAT
 0xA0

	)

561 
	#DC_MX_MPACK_DISABLE
 0x00400000

	)

566 
	#DC_MX_NWAY_10BTHALF
 0x08000000

	)

567 
	#DC_MX_NWAY_10BTFULL
 0x10000000

	)

568 
	#DC_MX_NWAY_100BTHALF
 0x20000000

	)

569 
	#DC_MX_NWAY_100BTFULL
 0x40000000

	)

570 
	#DC_MX_NWAY_100BT4
 0x80000000

	)

578 
	#DC_MX_MAGIC_98713
 0x0F370000

	)

579 
	#DC_MX_MAGIC_98713A
 0x0B3C0000

	)

580 
	#DC_MX_MAGIC_98715
 0x0B3C0000

	)

581 
	#DC_MX_MAGIC_98725
 0x0B3C0000

	)

589 
	#DC_PN_GPIO
 0x60

	)

590 
	#DC_PN_PWRUP_CFG
 0x90

	)

591 
	#DC_PN_SIOCTL
 0x98

	)

592 
	#DC_PN_MII
 0xA0

	)

593 
	#DC_PN_NWAY
 0xB8

	)

596 
	#DC_PN_SIOCTL_DATA
 0x0000003F

	)

597 
	#DC_PN_SIOCTL_OPCODE
 0x00000300

	)

598 
	#DC_PN_SIOCTL_BUSY
 0x80000000

	)

600 
	#DC_PN_EEOPCODE_ERASE
 0x00000300

	)

601 
	#DC_PN_EEOPCODE_READ
 0x00000600

	)

602 
	#DC_PN_EEOPCODE_WRITE
 0x00000100

	)

611 
	#DC_PN_GPIO_DATA0
 0x000000001

	)

612 
	#DC_PN_GPIO_DATA1
 0x000000002

	)

613 
	#DC_PN_GPIO_DATA2
 0x000000004

	)

614 
	#DC_PN_GPIO_DATA3
 0x000000008

	)

615 
	#DC_PN_GPIO_CTL0
 0x000000010

	)

616 
	#DC_PN_GPIO_CTL1
 0x000000020

	)

617 
	#DC_PN_GPIO_CTL2
 0x000000040

	)

618 
	#DC_PN_GPIO_CTL3
 0x000000080

	)

619 
	#DC_PN_GPIO_SPEEDSEL
 
DC_PN_GPIO_DATA0


	)

620 
	#DC_PN_GPIO_100TX_LOOP
 
DC_PN_GPIO_DATA1


	)

621 
	#DC_PN_GPIO_BNC_ENB
 
DC_PN_GPIO_DATA2


	)

622 
	#DC_PN_GPIO_100TX_LNK
 
DC_PN_GPIO_DATA3


	)

623 
	#DC_PN_GPIO_SETBIT
(
sc
, 
r
) \

624 
	`DC_SETBIT
(
sc
, 
DC_PN_GPIO
, ((
r
Ë| (∏<< 4)))

	)

625 
	#DC_PN_GPIO_CLRBIT
(
sc
, 
r
) \

627 
	`DC_SETBIT
(
sc
, 
DC_PN_GPIO
, ((
r
) << 4)); \

628 
	`DC_CLRBIT
(
sc
, 
DC_PN_GPIO
, (
r
)); \

629 }

	)

632 
	#DC_PN_MII_DATA
 0x0000FFFF

	)

633 
	#DC_PN_MII_RESERVER
 0x00020000

	)

634 
	#DC_PN_MII_REGADDR
 0x007C0000

	)

635 
	#DC_PN_MII_PHYADDR
 0x0F800000

	)

636 
	#DC_PN_MII_OPCODE
 0x30000000

	)

637 
	#DC_PN_MII_BUSY
 0x80000000

	)

639 
	#DC_PN_MIIOPCODE_READ
 0x60020000

	)

640 
	#DC_PN_MIIOPCODE_WRITE
 0x50020000

	)

643 
	#DC_PN_NWAY_RESET
 0x00000001

	)

644 
	#DC_PN_NWAY_PDOWN
 0x00000002

	)

645 
	#DC_PN_NWAY_BYPASS
 0x00000004

	)

646 
	#DC_PN_NWAY_AUILOWCUR
 0x00000008

	)

647 
	#DC_PN_NWAY_TPEXTEND
 0x00000010

	)

648 
	#DC_PN_NWAY_POLARITY
 0x00000020

	)

649 
	#DC_PN_NWAY_TP
 0x00000040

	)

650 
	#DC_PN_NWAY_AUIVOLT
 0x00000080

	)

651 
	#DC_PN_NWAY_DUPLEX
 0x00000100

	)

652 
	#DC_PN_NWAY_LINKTEST
 0x00000200

	)

653 
	#DC_PN_NWAY_AUTODETECT
 0x00000400

	)

654 
	#DC_PN_NWAY_SPEEDSEL
 0x00000800

	)

655 
	#DC_PN_NWAY_NWAY_ENB
 0x00001000

	)

656 
	#DC_PN_NWAY_CAP10HDX
 0x00002000

	)

657 
	#DC_PN_NWAY_CAP10FDX
 0x00004000

	)

658 
	#DC_PN_NWAY_CAP100FDX
 0x00008000

	)

659 
	#DC_PN_NWAY_CAP100HDX
 0x00010000

	)

660 
	#DC_PN_NWAY_CAP100T4
 0x00020000

	)

661 
	#DC_PN_NWAY_ANEGRESTART
 0x02000000

	)

662 
	#DC_PN_NWAY_REMFAULT
 0x04000000

	)

663 
	#DC_PN_NWAY_LPAR10HDX
 0x08000000

	)

664 
	#DC_PN_NWAY_LPAR10FDX
 0x10000000

	)

665 
	#DC_PN_NWAY_LPAR100FDX
 0x20000000

	)

666 
	#DC_PN_NWAY_LPAR100HDX
 0x40000000

	)

667 
	#DC_PN_NWAY_LPAR100T4
 0x80000000

	)

675 
	#DC_CONEXANT_PHYADDR
 0x1

	)

676 
	#DC_CONEXANT_EE_NODEADDR
 0x19A

	)

681 
	sdc_so·c
 {

682 
¨pcom
 
	m¨pcom
;

683 
πems_úq_c⁄√˘_d©a
 
	múqInfo
;

684 vﬁ©ûê
u_öt32_t
 
	mmemba£
;

685 
πems_id
 
	md´m⁄tid
;

687 
bus_•a˚_h™dÀ_t
 
	mdc_bh™dÀ
;

688 
bus_•a˚_èg_t
 
	mdc_bèg
;

689 *
	mdc_öåh™d
;

690 
ªsour˚
 *
	mdc_úq
;

691 
ªsour˚
 *
	mdc_ªs
;

693 
dc_ty≥
 *
	mdc_öfo
;

695 
u_öt8_t
 
	mdc_unô
;

696 *
	mdc_«me
;

697 
u_öt8_t
 
	mdc_ty≥
;

698 
u_öt8_t
 
	mdc_pmode
;

699 
u_öt8_t
 
	mdc_lök
;

700 
u_öt8_t
 
	mdc_ˇchesize
;

701 
	mdc_romwidth
;

702 
	mdc_≤ic_rx_bug_ßve
;

703 *
	mdc_≤ic_rx_buf
;

704 
	mdc_if_Êags
;

705 
	mdc_if_medü
;

706 
u_öt32_t
 
	mdc_Êags
;

707 
u_öt32_t
 
	mdc_txthªsh
;

708 
u_öt8_t
 *
	mdc_§om
;

709 
dc_medüöfo
 *
	mdc_mi
;

713 
dc_li°_d©a
 *
	mdc_ld©a
;

714 
dc_chaö_d©a
 
	mdc_cd©a
;

715 #ifde‡
__Æpha__


716 
	mdc_§m_medü
;

718 #ifdef 
DEVICE_POLLING


719 
	mrxcy˛es
;

721 
	msu•íded
;

723 
u_öt32_t
 
	mßved_m≠s
[5];

724 
u_öt32_t
 
	mßved_bioßddr
;

725 
u_öt8_t
 
	mßved_öéöe
;

726 
u_öt8_t
 
	mßved_ˇchñnsz
;

727 
u_öt8_t
 
	mßved_œâimî
;

730 
	#DC_TX_POLL
 0x00000001

	)

731 
	#DC_TX_COALESCE
 0x00000002

	)

732 
	#DC_TX_ADMTEK_WAR
 0x00000004

	)

733 
	#DC_TX_USE_TX_INTR
 0x00000008

	)

734 
	#DC_RX_FILTER_TULIP
 0x00000010

	)

735 
	#DC_TX_INTR_FIRSTFRAG
 0x00000020

	)

736 
	#DC_PNIC_RX_BUG_WAR
 0x00000040

	)

737 
	#DC_TX_FIXED_RING
 0x00000080

	)

738 
	#DC_TX_STORENFWD
 0x00000100

	)

739 
	#DC_REDUCED_MII_POLL
 0x00000200

	)

740 
	#DC_TX_INTR_ALWAYS
 0x00000400

	)

741 
	#DC_21143_NWAY
 0x00000800

	)

742 
	#DC_128BIT_HASH
 0x00001000

	)

743 
	#DC_64BIT_HASH
 0x00002000

	)

744 
	#DC_TULIP_LEDS
 0x00004000

	)

745 
	#DC_TX_ONE
 0x00008000

	)

750 
	#_ªadl_
(
addr
Ë(*(vﬁ©ûê*)((*)◊ddr)))

	)

751 
	#_wrôñ_
(
b
, 
addr
Ë(*(vﬁ©ûê*)((*)◊ddr)Ë(b))

	)

753 
	#CSR_READ_4
(
sc
, 
ªg
Ë
	`_ªadl_
(((sc->
memba£
)+‘eg)))

	)

754 
	#CSR_WRITE_4
(
sc
, 
ªg
, 
vÆ
Ë
	`_wrôñ_
(vÆ, ((sc->
memba£
)+‘eg)))

	)

761 
	#DC_TIMEOUT
 1000

	)

762 
	#ETHER_ALIGN
 2

	)

771 
	#DC_VENDORID_DEC
 0x1011

	)

776 
	#DC_DEVICEID_21143
 0x0019

	)

781 
	#DC_VENDORID_MX
 0x10D9

	)

786 
	#DC_DEVICEID_98713
 0x0512

	)

787 
	#DC_DEVICEID_987x5
 0x0531

	)

788 
	#DC_DEVICEID_98727
 0x0532

	)

789 
	#DC_DEVICEID_98732
 0x0532

	)

792 
	#DC_REVISION_98713
 0x00

	)

793 
	#DC_REVISION_98713A
 0x10

	)

794 
	#DC_REVISION_98715
 0x20

	)

795 
	#DC_REVISION_98715AEC_C
 0x25

	)

796 
	#DC_REVISION_98725
 0x30

	)

801 
	#DC_VENDORID_CP
 0x11F6

	)

806 
	#DC_DEVICEID_98713_CP
 0x9881

	)

811 
	#DC_VENDORID_LO
 0x11AD

	)

818 
	#DC_DEVICEID_82C168
 0x0002

	)

820 
	#DC_REVISION_82C168
 0x10

	)

821 
	#DC_REVISION_82C169
 0x20

	)

827 
	#DC_DEVICEID_82C115
 0xc115

	)

832 
	#DC_VENDORID_DAVICOM
 0x1282

	)

837 
	#DC_DEVICEID_DM9009
 0x9009

	)

838 
	#DC_DEVICEID_DM9100
 0x9100

	)

839 
	#DC_DEVICEID_DM9102
 0x9102

	)

845 
	#DC_REVISION_DM9102
 0x10

	)

846 
	#DC_REVISION_DM9102A
 0x30

	)

851 
	#DC_VENDORID_ADMTEK
 0x1317

	)

856 
	#DC_DEVICEID_AL981
 0x0981

	)

857 
	#DC_DEVICEID_AN985
 0x0985

	)

862 
	#DC_VENDORID_ASIX
 0x125B

	)

867 
	#DC_DEVICEID_AX88140A
 0x1400

	)

873 
	#DC_REVISION_88140
 0x00

	)

874 
	#DC_REVISION_88141
 0x10

	)

879 
	#DC_VENDORID_ACCTON
 0x1113

	)

884 
	#DC_DEVICEID_EN1217
 0x1217

	)

885 
	#DC_DEVICEID_EN2242
 0x1216

	)

890 
	#DC_VENDORID_CONEXANT
 0x14f1

	)

895 
	#DC_DEVICEID_RS7112
 0x1803

	)

902 
	#DC_PCI_CFID
 0x00

	)

903 
	#DC_PCI_CFCS
 0x04

	)

904 
	#DC_PCI_CFRV
 0x08

	)

905 
	#DC_PCI_CFLT
 0x0C

	)

906 
	#DC_PCI_CFBIO
 0x10

	)

907 
	#DC_PCI_CFBMA
 0x14

	)

908 
	#DC_PCI_CCIS
 0x28

	)

909 
	#DC_PCI_CSID
 0x2C

	)

910 
	#DC_PCI_CBER
 0x30

	)

911 
	#DC_PCI_CCAP
 0x34

	)

912 
	#DC_PCI_CFIT
 0x3C

	)

913 
	#DC_PCI_CFDD
 0x40

	)

914 
	#DC_PCI_CWUA0
 0x44

	)

915 
	#DC_PCI_CWUA1
 0x48

	)

916 
	#DC_PCI_SOP0
 0x4C

	)

917 
	#DC_PCI_SOP1
 0x50

	)

918 
	#DC_PCI_CWUC
 0x54

	)

919 
	#DC_PCI_CCID
 0xDC

	)

920 
	#DC_PCI_CPMC
 0xE0

	)

923 
	#DC_CFID_VENDOR
 0x0000FFFF

	)

924 
	#DC_CFID_DEVICE
 0xFFFF0000

	)

927 
	#DC_CFCS_IOSPACE
 0x00000001

	)

928 
	#DC_CFCS_MEMSPACE
 0x00000002

	)

929 
	#DC_CFCS_BUSMASTER
 0x00000004

	)

930 
	#DC_CFCS_MWI_ENB
 0x00000010

	)

931 
	#DC_CFCS_PARITYERR_ENB
 0x00000040

	)

932 
	#DC_CFCS_SYSERR_ENB
 0x00000100

	)

933 
	#DC_CFCS_NEWCAPS
 0x00100000

	)

934 
	#DC_CFCS_FAST_B2B
 0x00800000

	)

935 
	#DC_CFCS_DATAPARITY
 0x01000000

	)

936 
	#DC_CFCS_DEVSELTIM
 0x06000000

	)

937 
	#DC_CFCS_TGTABRT
 0x10000000

	)

938 
	#DC_CFCS_MASTERABRT
 0x20000000

	)

939 
	#DC_CFCS_SYSERR
 0x40000000

	)

940 
	#DC_CFCS_PARITYERR
 0x80000000

	)

943 
	#DC_CFRV_STEPPING
 0x0000000F

	)

944 
	#DC_CFRV_REVISION
 0x000000F0

	)

945 
	#DC_CFRV_SUBCLASS
 0x00FF0000

	)

946 
	#DC_CFRV_BASECLASS
 0xFF000000

	)

948 
	#DC_21143_PB_REV
 0x00000030

	)

949 
	#DC_21143_TB_REV
 0x00000030

	)

950 
	#DC_21143_PC_REV
 0x00000030

	)

951 
	#DC_21143_TC_REV
 0x00000030

	)

952 
	#DC_21143_PD_REV
 0x00000041

	)

953 
	#DC_21143_TD_REV
 0x00000041

	)

956 
	#DC_CFLT_CACHELINESIZE
 0x000000FF

	)

957 
	#DC_CFLT_LATENCYTIMER
 0x0000FF00

	)

960 
	#DC_CSID_VENDOR
 0x0000FFFF

	)

961 
	#DC_CSID_DEVICE
 0xFFFF0000

	)

964 
	#DC_CCAP_OFFSET
 0x000000FF

	)

967 
	#DC_CFIT_INTLINE
 0x000000FF

	)

968 
	#DC_CFIT_INTPIN
 0x0000FF00

	)

969 
	#DC_CFIT_MIN_GNT
 0x00FF0000

	)

970 
	#DC_CFIT_MAX_LAT
 0xFF000000

	)

973 
	#DC_CCID_CAPID
 0x000000FF

	)

974 
	#DC_CCID_NEXTPTR
 0x0000FF00

	)

975 
	#DC_CCID_PM_VERS
 0x00070000

	)

976 
	#DC_CCID_PME_CLK
 0x00080000

	)

977 
	#DC_CCID_DVSPEC_INT
 0x00200000

	)

978 
	#DC_CCID_STATE_D1
 0x02000000

	)

979 
	#DC_CCID_STATE_D2
 0x04000000

	)

980 
	#DC_CCID_PME_D0
 0x08000000

	)

981 
	#DC_CCID_PME_D1
 0x10000000

	)

982 
	#DC_CCID_PME_D2
 0x20000000

	)

983 
	#DC_CCID_PME_D3HOT
 0x40000000

	)

984 
	#DC_CCID_PME_D3COLD
 0x80000000

	)

987 
	#DC_CPMC_STATE
 0x00000003

	)

988 
	#DC_CPMC_PME_ENB
 0x00000100

	)

989 
	#DC_CPMC_PME_STS
 0x00008000

	)

991 
	#DC_PSTATE_D0
 0x0

	)

992 
	#DC_PSTATE_D1
 0x1

	)

993 
	#DC_PSTATE_D2
 0x2

	)

994 
	#DC_PSTATE_D3
 0x3

	)

998 
	#DC_CFDD_DRVUSE
 0x0000FFFF

	)

999 
	#DC_CFDD_SNOOZE_MODE
 0x40000000

	)

1000 
	#DC_CFDD_SLEEP_MODE
 0x80000000

	)

1003 
	#DC_CWUC_MUST_BE_ZERO
 0x00000001

	)

1004 
	#DC_CWUC_SECUREON_ENB
 0x00000002

	)

1005 
	#DC_CWUC_FORCE_WUL
 0x00000004

	)

1006 
	#DC_CWUC_BNC_ABILITY
 0x00000008

	)

1007 
	#DC_CWUC_AUI_ABILITY
 0x00000010

	)

1008 
	#DC_CWUC_TP10_ABILITY
 0x00000020

	)

1009 
	#DC_CWUC_MII_ABILITY
 0x00000040

	)

1010 
	#DC_CWUC_SYM_ABILITY
 0x00000080

	)

1011 
	#DC_CWUC_LOCK
 0x00000100

	)

1017 
	#DC_IB_CTLRCNT
 0x13

	)

1018 
	#DC_IB_LEAF0_CNUM
 0x1A

	)

1019 
	#DC_IB_LEAF0_OFFSET
 0x1B

	)

1021 
	sdc_öfo_Àaf
 {

1022 
u_öt16_t
 
	mdc_c⁄¡y≥
;

1023 
u_öt8_t
 
	mdc_blk˙t
;

1024 
u_öt8_t
 
	mdc_rsvd
;

1025 
u_öt16_t
 
	mdc_öfoblk
;

1028 
	#DC_CTYPE_10BT
 0x0000

	)

1029 
	#DC_CTYPE_10BT_NWAY
 0x0100

	)

1030 
	#DC_CTYPE_10BT_FDX
 0x0204

	)

1031 
	#DC_CTYPE_10B2
 0x0001

	)

1032 
	#DC_CTYPE_10B5
 0x0002

	)

1033 
	#DC_CTYPE_100BT
 0x0003

	)

1034 
	#DC_CTYPE_100BT_FDX
 0x0205

	)

1035 
	#DC_CTYPE_100T4
 0x0006

	)

1036 
	#DC_CTYPE_100FX
 0x0007

	)

1037 
	#DC_CTYPE_100FX_FDX
 0x0208

	)

1038 
	#DC_CTYPE_MII_10BT
 0x0009

	)

1039 
	#DC_CTYPE_MII_10BT_FDX
 0x020A

	)

1040 
	#DC_CTYPE_MII_100BT
 0x000D

	)

1041 
	#DC_CTYPE_MII_100BT_FDX
 0x020E

	)

1042 
	#DC_CTYPE_MII_100T4
 0x000F

	)

1043 
	#DC_CTYPE_MII_100FX
 0x0010

	)

1044 
	#DC_CTYPE_MII_100FX_FDX
 0x0211

	)

1045 
	#DC_CTYPE_DYN_PUP_AUTOSENSE
 0x0800

	)

1046 
	#DC_CTYPE_PUP_AUTOSENSE
 0x8800

	)

1047 
	#DC_CTYPE_NOMEDIA
 0xFFFF

	)

1049 
	#DC_EBLOCK_SIA
 0x0002

	)

1050 
	#DC_EBLOCK_MII
 0x0003

	)

1051 
	#DC_EBLOCK_SYM
 0x0004

	)

1052 
	#DC_EBLOCK_RESET
 0x0005

	)

1053 
	#DC_EBLOCK_PHY_SHUTDOWN
 0x0006

	)

1055 
	sdc_Àaf_hdr
 {

1056 
u_öt16_t
 
	mdc_mty≥
;

1057 
u_öt8_t
 
	mdc_m˙t
;

1058 
u_öt8_t
 
	mdc_rsvd
;

1061 
	sdc_eblock_hdr
 {

1062 
u_öt8_t
 
	mdc_Àn
;

1063 
u_öt8_t
 
	mdc_ty≥
;

1066 
	sdc_eblock_sü
 {

1067 
dc_eblock_hdr
 
	mdc_sü_hdr
;

1068 
u_öt8_t
 
	mdc_sü_code
;

1069 
u_öt8_t
 
	mdc_sü_medü•ec
[6];

1070 
u_öt8_t
 
	mdc_sü_gpio_˘l
[2];

1071 
u_öt8_t
 
	mdc_sü_gpio_d©
[2];

1074 
	#DC_SIA_CODE_10BT
 0x00

	)

1075 
	#DC_SIA_CODE_10B2
 0x01

	)

1076 
	#DC_SIA_CODE_10B5
 0x02

	)

1077 
	#DC_SIA_CODE_10BT_FDX
 0x04

	)

1078 
	#DC_SIA_CODE_EXT
 0x40

	)

1084 
	sdc_eblock_mii
 {

1085 
dc_eblock_hdr
 
	mdc_mii_hdr
;

1086 
u_öt8_t
 
	mdc_mii_phynum
;

1087 
u_öt8_t
 
	mdc_g¥_Àn
;

1097 
	sdc_eblock_sym
 {

1098 
dc_eblock_hdr
 
	mdc_sym_hdr
;

1099 
u_öt8_t
 
	mdc_sym_code
;

1100 
u_öt8_t
 
	mdc_sym_gpio_˘l
[2];

1101 
u_öt8_t
 
	mdc_sym_gpio_d©
[2];

1102 
u_öt8_t
 
	mdc_sym_cmd
[2];

1105 
	#DC_SYM_CODE_100BT
 0x03

	)

1106 
	#DC_SYM_CODE_100BT_FDX
 0x05

	)

1107 
	#DC_SYM_CODE_100T4
 0x06

	)

1108 
	#DC_SYM_CODE_100FX
 0x07

	)

1109 
	#DC_SYM_CODE_100FX_FDX
 0x08

	)

1111 
	sdc_eblock_ª£t
 {

1112 
dc_eblock_hdr
 
	mdc_ª£t_hdr
;

1113 
u_öt8_t
 
	mdc_ª£t_Àn
;

1117 #ifde‡
__Æpha__


1118 #unde‡
vt›hys


1119 
	#vt›hys
(
va
Ë
	`Æpha_XXX_dmam≠
((
vm_off£t_t
)va)

	)

	@src/libchip/network/if_fxp.c

58 #i‡
deföed
(
__i386__
)

62 
	~<πems.h
>

63 
	~<πems/îr‹.h
>

64 
	~<πems/πems_bsd√t.h
>

65 
	~<b•.h
>

67 
	~<î∫o.h
>

68 
	~<sys/∑øm.h
>

69 
	~<sys/mbuf.h
>

70 
	~<sys/sockë.h
>

71 
	~<sys/sockio.h
>

72 
	~<√t/if.h
>

73 
	~<√töë/ö.h
>

74 
	~<√töë/if_ëhî.h
>

75 
	~<sys/mÆloc.h
>

76 
	~<sys/sy°m.h
>

77 
	~<b•.h
>

78 
	~<pcibios.h
>

79 
	~<b•/úq.h
>

80 
	~<πems/pci.h
>

82 #ifde‡
NS


83 
	~<√äs/ns.h
>

84 
	~<√äs/ns_if.h
>

87 
	~<√t/bpf.h
>

89 
	~<vm/vm.h
>

91 
	~<√t/if_ty≥s.h
>

93 
	~"if_fx¥eg.h
"

94 
	~"if_fxpv¨.h
"

99 
πems_öãrvÆ
 
	gfxp_ticksPîSec⁄d
;

100 
	#devi˚_¥ötf
(
devi˚
,
f‹m©
,
¨gs
...Ë
	`¥ötk
(f‹m©,##árgs)

	)

101 
	#DELAY
(
n
Ë
	`πems_èsk_wake_a·î
((“)*
fxp_ticksPîSec⁄d
/1000000)+1)

	)

102 #ifde‡
DEBUG_OUT


103 
	#DBGLVL_PRINTK
(
LVL
,
f‹m©
, 
¨gs
...) \

104 i‡(
DEBUG_OUT
 >(
LVL
)) { \

105 
	`¥ötk
(
f‹m©
, ## 
¨gs
); \

106 }

	)

108 
	#DBGLVL_PRINTK
(
LVL
,
f‹m©
, 
¨gs
...)

	)

115 
	#INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

120 #i‡
deföed
(
__i386
)

121 
	#vt›hys
(
p
Ë(
u_öt32_t
)’)

	)

123 
	#vt›hys
(
p
Ë
	`vt›hys
’)

	)

126 
	#NFXPDRIVER
 1

	)

127 
fxp_so·c
 
	gfxp_so·c
[
NFXPDRIVER
];

128 
boﬁ
 
	gfxp_is_vîbo£
 = 
åue
;

138 
	#RFA_ALIGNMENT_FUDGE
 2

	)

145 
	gtx_thªshﬁd
 = 64;

155 
u_ch¨
 
	gfxp_cb_c⁄fig_ãm∂©e
[] = {

183 
	sfxp_idít
 {

184 
u_öt16_t
 
	mdevid
;

185 *
	m«me
;

186 
	mw¨n
;

189 
	#UNTESTED
 1

	)

197 
fxp_idít
 
	gfxp_idít_èbÀ
[] = {

199 { 0x2449, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

201 { 0x1029, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

203 { 0x1031, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

204 { 0x1032, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

205 { 0x1033, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

206 { 0x1034, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

207 { 0x1035, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

208 { 0x1036, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

209 { 0x1037, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

210 { 0x1038, "I¡ñ Pro/100 Ethî√t", 
UNTESTED
 },

212 { 0, 
NULL
, 0 }

216 
fxp_¥obe
(
devi˚_t
 
dev
);

217 
fxp_©èch
(
devi˚_t
 
dev
);

218 
fxp_dëach
(
devi˚_t
 
dev
);

219 
fxp_shutdown
(
devi˚_t
 
dev
);

221 
fxp_ouçut
 (
i‚ë
 *,

222 
mbuf
 *, 
sockaddr
 *, 
πíåy
 *);

225 
πems_i§
 
fxp_öå
(
πems_ve˘‹_numbî
 
v
);

226 
fxp_öô
(*
xsc
);

227 
fxp_tick
(*
xsc
);

228 
fxp_°¨t
(
i‚ë
 *
iÂ
);

229 
fxp_°›
(
fxp_so·c
 *
sc
);

230 
fxp_ªÀa£
(
fxp_so·c
 *
sc
);

231 
fxp_io˘l
(
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
,

232 
ˇddr_t
 
d©a
);

233 
fxp_w©chdog
(
i‚ë
 *
iÂ
);

234 
fxp_add_rÁbuf
(
fxp_so·c
 *
sc
, 
mbuf
 *
ﬁdm
);

235 
fxp_mc_£tup
(
fxp_so·c
 *
sc
);

236 
u_öt16_t
 
fxp_ì¥om_gëw‹d
(
fxp_so·c
 *
sc
, 
off£t
,

237 
autosize
);

238 
fxp_ì¥om_putw‹d
(
fxp_so·c
 *
sc
, 
off£t
,

239 
u_öt16_t
 
d©a
);

240 
fxp_autosize_ì¥om
(
fxp_so·c
 *
sc
);

241 
fxp_ªad_ì¥om
(
fxp_so·c
 *
sc
, 
u_sh‹t
 *
d©a
,

242 
off£t
, 
w‹ds
);

243 
fxp_wrôe_ì¥om
(
fxp_so·c
 *
sc
, 
u_sh‹t
 *
d©a
,

244 
off£t
, 
w‹ds
);

245 #ifde‡
NOTUSED


246 
fxp_ifmedü_upd
(
i‚ë
 *
iÂ
);

247 
fxp_ifmedü_°s
(
i‚ë
 *
iÂ
,

248 
ifmedüªq
 *
ifmr
);

249 
fxp_£rül_ifmedü_upd
(
i‚ë
 *
iÂ
);

250 
fxp_£rül_ifmedü_°s
(
i‚ë
 *
iÂ
,

251 
ifmedüªq
 *
ifmr
);

252 vﬁ©ûê
fxp_miibus_ªadªg
(
devi˚_t
 
dev
, 
phy
, 
ªg
);

253 
fxp_miibus_wrôîeg
(
devi˚_t
 
dev
, 
phy
, 
ªg
,

254 
vÆue
);

256 
__ölöe
 
fxp_lwc›y
(vﬁ©ûê
u_öt32_t
 *
§c
,

257 vﬁ©ûê
u_öt32_t
 *
d°
);

258 
__ölöe
 
fxp_scb_waô
(
fxp_so·c
 *
sc
);

259 
__ölöe
 
fxp_scb_cmd
(
fxp_so·c
 *
sc
, 
cmd
);

260 
__ölöe
 
fxp_dma_waô
(vﬁ©ûê
u_öt16_t
 *
°©us
,

261 
fxp_so·c
 *
sc
);

266 
__ölöe
 

267 
	$fxp_lwc›y
(vﬁ©ûê
u_öt32_t
 *
§c
, vﬁ©ûêu_öt32_à*
d°
)

269 #ifde‡
__i386__


270 *
d°
 = *
§c
;

272 vﬁ©ûê
u_öt16_t
 *
a
 = (vﬁ©ûêu_öt16_t*)
§c
;

273 vﬁ©ûê
u_öt16_t
 *
b
 = (vﬁ©ûêu_öt16_t*)
d°
;

275 
b
[0] = 
a
[0];

276 
b
[1] = 
a
[1];

278 
	}
}

283 
__ölöe
 
u_öt8_t
 
	$fxp_c§_ªad_1
(
fxp_so·c
 *
sc
,
ªg
) {

284 
u_öt8_t
 
vÆ
;

285 i‡(
sc
->
pci_ªgs_¨e_io
) {

286 
	`öp‹t_byã
(
sc
->
pci_ªgs_ba£
 + 
ªg
,
vÆ
);

289 
vÆ
 = *(
u_öt8_t
*)(
sc
->
pci_ªgs_ba£
+
ªg
);

291  
vÆ
;

292 
	}
}

293 
__ölöe
 
u_öt32_t
 
	$fxp_c§_ªad_2
(
fxp_so·c
 *
sc
,
ªg
) {

294 
u_öt16_t
 
vÆ
;

295 i‡(
sc
->
pci_ªgs_¨e_io
) {

296 
	`öp‹t_w‹d
(
sc
->
pci_ªgs_ba£
 + 
ªg
,
vÆ
);

299 
vÆ
 = *(
u_öt16_t
*)(
sc
->
pci_ªgs_ba£
+
ªg
);

301  
vÆ
;

302 
	}
}

303 
__ölöe
 
u_öt32_t
 
	$fxp_c§_ªad_4
(
fxp_so·c
 *
sc
,
ªg
) {

304 
u_öt32_t
 
vÆ
;

305 i‡(
sc
->
pci_ªgs_¨e_io
) {

306 
	`öp‹t_l⁄g
(
sc
->
pci_ªgs_ba£
 + 
ªg
,
vÆ
);

309 
vÆ
 = *(
u_öt32_t
*)(
sc
->
pci_ªgs_ba£
+
ªg
);

311  
vÆ
;

312 
	}
}

318 
__ölöe
 

319 
	$fxp_scb_waô
(
fxp_so·c
 *
sc
)

321 
i
 = 10000;

323 
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_COMMAND
Ë&& --
i
)

324 
	`DELAY
(2);

325 i‡(
i
 == 0)

326 
	`devi˚_¥ötf
(
sc
->
dev
, "SCBÅimeout: 0x%x 0x%x 0x%x 0x%x\n",

327 
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_COMMAND
),

328 
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_STATACK
),

329 
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_RUSCUS
),

330 
	`CSR_READ_2
(
sc
, 
FXP_CSR_FLOWCONTROL
));

331 
	}
}

333 
__ölöe
 

334 
	$fxp_scb_cmd
(
fxp_so·c
 *
sc
, 
cmd
)

337 i‡(
cmd
 =
FXP_SCB_COMMAND_CU_RESUME
 && 
sc
->
cu_ªsume_bug
) {

338 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_COMMAND
, 
FXP_CB_COMMAND_NOP
);

339 
	`fxp_scb_waô
(
sc
);

341 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_COMMAND
, 
cmd
);

342 
	}
}

344 
__ölöe
 

345 
	$fxp_dma_waô
(vﬁ©ûê
u_öt16_t
 *
°©us
, 
fxp_so·c
 *
sc
)

347 
i
 = 10000;

349 !(*
°©us
 & 
FXP_CB_STATUS_C
Ë&& --
i
)

350 
	`DELAY
(2);

351 i‡(
i
 == 0)

352 
	`devi˚_¥ötf
(
sc
->
dev
, "DMAÅimeout\n");

353 
	}
}

355 
__ölöe
 
	$pci_gë_víd‹
(
fxp_so·c
 *
sc
) {

356 
u_öt16_t
 
víd‹
;

357 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
,0,&
víd‹
);

358  
víd‹
;

359 
	}
}

361 
__ölöe
 
	$pci_gë_devi˚
(
fxp_so·c
 *
sc
) {

362 
u_öt16_t
 
devi˚
;

363 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
,2,&
devi˚
);

364  
devi˚
;

365 
	}
}

367 
__ölöe
 
	$pci_gë_subvíd‹
(
fxp_so·c
 *
sc
) {

368 
u_öt16_t
 
subvíd‹
;

369 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
,0x2c,&
subvíd‹
);

370  
subvíd‹
;

371 
	}
}

373 
__ölöe
 
	$pci_gë_subdevi˚
(
fxp_so·c
 *
sc
) {

374 
u_öt16_t
 
subdevi˚
;

375 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
,0x2e,&
subdevi˚
);

376  
subdevi˚
;

377 
	}
}

379 
__ölöe
 
	$pci_gë_ªvid
(
fxp_so·c
 *
sc
) {

380 
u_öt8_t
 
ªvid
;

381 
	`pcib_c⁄f_ªad8
(
sc
->
pci_sig«tuª
,0x08,&
ªvid
);

382  
ªvid
;

383 
	}
}

385 
	$n›On
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
nŸU£d
)

391 
	}
}

393 
	$fxpIsOn
(c⁄° 
πems_úq_c⁄√˘_d©a
* 
úq
)

395  
	`BSP_úq_íabÀd_©_i8259s
 (
úq
->
«me
);

396 
	}
}

399 
	$πems_fxp_©èch
(
πems_bsd√t_ifc⁄fig
 *
c⁄fig
, 
©èchög
)

401 
îr‹
 = 0;

402 
fxp_so·c
 *
sc
;

403 
i‚ë
 *
iÂ
;

404 
uöt16_t
 
vÆ16
;

405 
uöt32_t
 
vÆ32
;

406 
uöt16_t
 
d©a
;

407 
i
;

408 
s
;

409 
unôNumbî
;

410 *
unôName
;

411 
u_öt16_t
 
dev_id
;

412 
u_öt8_t
 
öãºu±
;

413 
mtu
;

418 
fxp_ticksPîSec⁄d
 = 
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

419 
	`DBGLVL_PRINTK
(1,"fxp_attach called\n");

424 i‡((
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
unôName
)) < 0)

430 i‡((
unôNumbî
 <0Ë|| (unôNumbî > 
NFXPDRIVER
)) {

431 
	`devi˚_¥ötf
(
dev
,"Bad FXP unitÇumber.\n");

434 
sc
 = &
fxp_so·c
[
unôNumbî
 - 1];

435 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

436 i‡(
iÂ
->
if_so·c
 !
NULL
) {

437 
	`devi˚_¥ötf
(
dev
,"FXP Driverálready in use.\n");

441 
	`mem£t
(
sc
, 0, (*sc));

442 #ifde‡
NOTUSED


443 
sc
->
dev
 = dev;

444 
	`ˇŒout_h™dÀ_öô
(&
sc
->
°©_ch
);

445 
	`mtx_öô
(&
sc
->
sc_mtx
, 
	`devi˚_gë_«meunô
(
dev
), 
MTX_DEF
 | 
MTX_RECURSE
);

447 
s
 = 
	`•limp
();

452 { 
j
; 
pbus
, 
pdev
, 
pfun
;

454 
j
=0; 
fxp_idít_èbÀ
[j].
devid
; j++ ) {

455 
i
 = 
	`pci_föd_devi˚
–0x8086, 
fxp_idít_èbÀ
[
j
].
devid
,

456 
unôNumbî
-1, &
pbus
, &
pdev
, &
pfun
 );

457 
sc
->
pci_sig«tuª
 = 
	`PCIB_DEVSIG_MAKE
–
pbus
, 
pdev
, 
pfun
 );

458 
	`DBGLVL_PRINTK
(2,"fxp_attach: find_devidÑeturned %d "

460 
i
,
sc
->
pci_sig«tuª
);

461 i‡(
PCIB_ERR_SUCCESS
 =
i
) {

462 i‡–
UNTESTED
 =
fxp_idít_èbÀ
[
j
].
w¨n
 ) {

463 
	`devi˚_¥ötf
(
dev
,

465 
	`devi˚_¥ötf
(
dev
,

476 i‡(
i
 !
PCIB_ERR_SUCCESS
) {

477 
	`devi˚_¥ötf
(
dev
, "couldÇot find 82559ER device\n");

486 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
, 
PCI_COMMAND
,&
vÆ16
);

487 
vÆ16
 |(
PCI_COMMAND_MEMORY
|
PCI_COMMAND_MASTER
);

488 
	`pcib_c⁄f_wrôe16
(
sc
->
pci_sig«tuª
, 
PCI_COMMAND
, 
vÆ16
);

489 
	`DBGLVL_PRINTK
(3,"fxp_©èch: PCI_COMMAND_wrôê0x%x\n",
vÆ16
);

490 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
, 
PCI_COMMAND
,&
vÆ16
);

491 
	`DBGLVL_PRINTK
(4,"fxp_©èch: PCI_COMMAND_ªad = 0x%x\n",
vÆ16
);

498 #ifde‡
NOTUSED


499 
m1
 = 
PCI_COMMAND_MEMORY
;

500 
m2
 = 
PCI_COMMAND_IO
;

501 
¥e„r_iom≠
 = 0;

502 i‡(
	`ªsour˚_öt_vÆue
(
	`devi˚_gë_«me
(
dev
), 
	`devi˚_gë_unô
(dev),

503 "¥e„r_iom≠", &
¥e„r_iom≠
) == 0 &&Örefer_iomap != 0) {

504 
m1
 = 
PCI_COMMAND_IO
;

505 
m2
 = 
PCI_COMMAND_MEMORY
;

508 i‡(
vÆ
 & 
m1
) {

509 
sc
->
πp
 = ((
m1
 =
PCI_COMMAND_MEMORY
)

510 ? 
SYS_RES_MEMORY
 : 
SYS_RES_IOPORT
);

511 
sc
->
rgd
 = ((
m1
 =
PCI_COMMAND_MEMORY
)

512 ? 
FXP_PCI_MMBA
 : 
FXP_PCI_IOBA
);

513 
sc
->
mem
 = 
	`bus_Æloc_ªsour˚
(
dev
, sc->
πp
, &sc->
rgd
,

514 0, ~0, 1, 
RF_ACTIVE
);

516 i‡(
sc
->
mem
 =
NULL
 && (
vÆ
 & 
m2
)) {

517 
sc
->
πp
 = ((
m2
 =
PCI_COMMAND_MEMORY
)

518 ? 
SYS_RES_MEMORY
 : 
SYS_RES_IOPORT
);

519 
sc
->
rgd
 = ((
m2
 =
PCI_COMMAND_MEMORY
)

520 ? 
FXP_PCI_MMBA
 : 
FXP_PCI_IOBA
);

521 
sc
->
mem
 = 
	`bus_Æloc_ªsour˚
(
dev
, sc->
πp
, &sc->
rgd
,

522 0, ~0, 1, 
RF_ACTIVE
);

525 i‡(!
sc
->
mem
) {

526 
	`devi˚_¥ötf
(
dev
, "couldÇot map deviceÑegisters\n");

527 
îr‹
 = 
ENXIO
;

528 
Áû
;

530 i‡(
fxp_is_vîbo£
) {

531 
	`devi˚_¥ötf
(
dev
, "using %s spaceÑegister mapping\n",

532 
sc
->
πp
 =
SYS_RES_MEMORY
? "memory" : "I/O");

535 
sc
->
sc_°
 = 
	`rm™_gë_bu°ag
(sc->
mem
);

536 
sc
->
sc_sh
 = 
	`rm™_gë_bush™dÀ
(sc->
mem
);

541 
rid
 = 0;

542 
sc
->
úq
 = 
	`bus_Æloc_ªsour˚
(
dev
, 
SYS_RES_IRQ
, &
rid
, 0, ~0, 1,

543 
RF_SHAREABLE
 | 
RF_ACTIVE
);

544 i‡(
sc
->
úq
 =
NULL
) {

545 
	`devi˚_¥ötf
(
dev
, "couldÇot map interrupt\n");

546 
îr‹
 = 
ENXIO
;

547 
Áû
;

550 
îr‹
 = 
	`bus_£tup_öå
(
dev
, 
sc
->
úq
, 
INTR_TYPE_NET
,

551 
fxp_öå
, 
sc
, &sc->
ih
);

552 i‡(
îr‹
) {

553 
	`devi˚_¥ötf
(
dev
, "couldÇot setup irq\n");

554 
Áû
;

561 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
, 
PCI_COMMAND
,&
vÆ16
);

562 
	`DBGLVL_PRINTK
(4,"fxp_©èch: PCI_COMMAND_ªad = 0x%x\n",
vÆ16
);

563 if((
vÆ16
 & 
PCI_COMMAND_IO
) != 0) {

564 
sc
->
pci_ªgs_¨e_io
 = 
åue
;

565 
	`pcib_c⁄f_ªad32
(
sc
->
pci_sig«tuª
,

566 
PCI_BASE_ADDRESS_1
,

567 &
vÆ32
);

568 
sc
->
pci_ªgs_ba£
 = 
vÆ32
 & 
PCI_BASE_ADDRESS_IO_MASK
;

571 
sc
->
pci_ªgs_¨e_io
 = 
Ál£
;

572 
	`pcib_c⁄f_ªad32
(
sc
->
pci_sig«tuª
,

573 
PCI_BASE_ADDRESS_0
,

574 &
vÆ32
);

575 
sc
->
pci_ªgs_ba£
 = 
vÆ32
 & 
PCI_BASE_ADDRESS_MEM_MASK
;

577 
	`DBGLVL_PRINTK
(3,"fxp_attach: CSRÑegistersáre mapped in %s space"

579 
sc
->
pci_ªgs_¨e_io
 ? "I/O" : "MEM",

580 
sc
->
pci_ªgs_ba£
);

585 
	`pcib_c⁄f_ªad8
(
sc
->
pci_sig«tuª
, 60, &
öãºu±
);

586 
	`DBGLVL_PRINTK
(3,"fxp_©èch: i¡îru± = 0x%x\n",
öãºu±
);

587 
sc
->
úqInfo
.
«me
 = (
πems_úq_numbî
)
öãºu±
;

592 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_PORT
, 
FXP_PORT_SOFTWARE_RESET
);

593 
	`DELAY
(10);

595 
sc
->
cbl_ba£
 = 
	`mÆloc
((
fxp_cb_tx
Ë* 
FXP_NTXCB
,

596 
M_DEVBUF
, 
M_NOWAIT
);

597 
	`DBGLVL_PRINTK
(3,"fxp_©èch: sc->cbl_ba£ = 0x%x\n",
sc
->
cbl_ba£
);

598 i‡(
sc
->
cbl_ba£
 =
NULL
)

599 
Áûmem
;

601 
	`mem£t
(
sc
->
cbl_ba£
, 0, (
fxp_cb_tx
Ë* 
FXP_NTXCB
);

603 
sc
->
fxp_°©s
 = 
	`mÆloc
((fxp_°©s), 
M_DEVBUF
,

604 
M_NOWAIT
);

605 
	`DBGLVL_PRINTK
(3,"fxp_©èch: sc->fxp_°©†0x%x\n",
sc
->
fxp_°©s
);

606 i‡(
sc
->
fxp_°©s
 =
NULL
)

607 
Áûmem
;

609 
	`mem£t
(
sc
->
fxp_°©s
, 0, (fxp_stats));

611 
sc
->
mc•
 = 
	`mÆloc
((
fxp_cb_mcs
), 
M_DEVBUF
, 
M_NOWAIT
);

612 
	`DBGLVL_PRINTK
(3,"fxp_©èch: sc->mc• = 0x%x\n",
sc
->
mc•
);

613 i‡(
sc
->
mc•
 =
NULL
)

614 
Áûmem
;

619 
i
 = 0; i < 
FXP_NRFABUFS
; i++) {

620 i‡(
	`fxp_add_rÁbuf
(
sc
, 
NULL
) != 0) {

621 
Áûmem
;

628 
	`DBGLVL_PRINTK
(3,"fxp_attach: calling fxp_autosize_eeprom\n");

629 
	`fxp_autosize_ì¥om
(
sc
);

634 
	`fxp_ªad_ì¥om
(
sc
, &
d©a
, 6, 1);

635 i‡((
d©a
 & 
FXP_PHY_DEVICE_MASK
) != 0 &&

636 (
d©a
 & 
FXP_PHY_SERIAL_ONLY
))

637 
sc
->
Êags
 |
FXP_FLAG_SERIAL_MEDIA
;

643 
	`fxp_ªad_ì¥om
(
sc
, &
d©a
, 5, 1);

644 i‡((
d©a
 >> 8) == 1)

645 
sc
->
chù
 = 
FXP_CHIP_82557
;

646 
	`DBGLVL_PRINTK
(3,"fxp_©èch: sc->chù = %d\n",
sc
->
chù
);

659 #ifde‡
NOTUSED


660 
i
 = 
	`pci_gë_devi˚
(
dev
);

662 
	`pcib_c⁄f_ªad16
(
sc
->
pci_sig«tuª
,2,&
dev_id
);

663 
	`DBGLVL_PRINTK
(3,"fxp_©èch: devi˚ id = 0x%x\n",
dev_id
);

665 i‡(
dev_id
 == 0x2449 || (dev_id > 0x1030 && dev_id < 0x1039)) {

666 
	`devi˚_¥ötf
(
dev
, "*** See Intel 82801BA/82801BAM Specification Update, Errata #30. ***\n");

667 
	`fxp_ªad_ì¥om
(
sc
, &
d©a
, 10, 1);

668 i‡(
d©a
 & 0x02) {

669 
u_öt16_t
 
cksum
;

670 
i
;

672 
	`devi˚_¥ötf
(
dev
,

674 
d©a
 &= ~0x02;

675 
	`fxp_wrôe_ì¥om
(
sc
, &
d©a
, 10, 1);

676 
	`devi˚_¥ötf
(
dev
, "New EEPROM ID: 0x%x\n", 
d©a
);

677 
cksum
 = 0;

678 
i
 = 0; i < (1 << 
sc
->
ì¥om_size
) - 1; i++) {

679 
	`fxp_ªad_ì¥om
(
sc
, &
d©a
, 
i
, 1);

680 
cksum
 +
d©a
;

682 
i
 = (1 << 
sc
->
ì¥om_size
) - 1;

683 
cksum
 = 0xBABA - cksum;

684 
	`fxp_ªad_ì¥om
(
sc
, &
d©a
, 
i
, 1);

685 
	`fxp_wrôe_ì¥om
(
sc
, &
cksum
, 
i
, 1);

686 
	`devi˚_¥ötf
(
dev
,

688 
i
, 
d©a
, 
cksum
);

694 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_PORT
, 
FXP_PORT_SOFTWARE_RESET
);

695 
	`DELAY
(50);

696 
	`devi˚_¥ötf
(
dev
,

703 
sc
->
Êags
 |
FXP_FLAG_CU_RESUME_BUG
;

711 i‡(
sc
->
chù
 !
FXP_CHIP_82557
) {

712 
u_öt8_t
 
tmp_vÆ
;

718 
	`pcib_c⁄f_ªad8
(
sc
->
pci_sig«tuª
,

719 
PCI_CACHE_LINE_SIZE
,&
tmp_vÆ
);

720 
	`DBGLVL_PRINTK
(3,"fxp_©èch: CACHE_LINE_SIZE = %d\n",
tmp_vÆ
);

721 i‡(
vÆ16
 & 
PCI_COMMAND_MEMORY
 &&

722 
tmp_vÆ
 != 0)

723 
sc
->
Êags
 |
FXP_FLAG_MWI_ENABLE
;

726 
sc
->
Êags
 |
FXP_FLAG_EXT_TXCB
;

729 
sc
->
Êags
 |
FXP_FLAG_LONG_PKT_EN
;

730 
	`DBGLVL_PRINTK
(3,"fxp_attach: sc->flags = 0x%x\n",

731 
sc
->
Êags
);

737 
	`fxp_ªad_ì¥om
(
sc
, (
u_öt16_t
*)sc->
¨pcom
.
ac_íaddr
, 0, 3);

738 i‡(
fxp_is_vîbo£
) {

739 
	`devi˚_¥ötf
(
dev
, "Ethernetáddress %x:%x:%x:%x:%x:%x %s \n",

740 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[0],

741 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[1],

742 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[2],

743 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[3],

744 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[4],

745 ((
u_öt8_t
*)
sc
->
¨pcom
.
ac_íaddr
)[5],

746 
sc
->
Êags
 & 
FXP_FLAG_SERIAL_MEDIA
 ? ", 10Mbps" : "");

747 
	`devi˚_¥ötf
(
dev
, "PCI IDs: 0x%x 0x%x 0x%x 0x%x 0x%x\n",

748 
	`pci_gë_víd‹
(
sc
), 
	`pci_gë_devi˚
(sc),

749 
	`pci_gë_subvíd‹
(
sc
), 
	`pci_gë_subdevi˚
(sc),

750 
	`pci_gë_ªvid
(
sc
));

751 
	`devi˚_¥ötf
(
dev
, "Chù Ty≥: %d\n", 
sc
->
chù
);

754 #ifde‡
NOTUSED


764 i‡(
sc
->
Êags
 & 
FXP_FLAG_SERIAL_MEDIA
) {

765 
	`ifmedü_öô
(&
sc
->
sc_medü
, 0, 
fxp_£rül_ifmedü_upd
,

766 
fxp_£rül_ifmedü_°s
);

767 
	`ifmedü_add
(&
sc
->
sc_medü
, 
IFM_ETHER
|
IFM_MANUAL
, 0, 
NULL
);

768 
	`ifmedü_£t
(&
sc
->
sc_medü
, 
IFM_ETHER
|
IFM_MANUAL
);

770 i‡(
	`mii_phy_¥obe
(
dev
, &
sc
->
miibus
, 
fxp_ifmedü_upd
,

771 
fxp_ifmedü_°s
)) {

772 
	`devi˚_¥ötf
(
dev
, "MII withoutány PHY!\n");

773 
îr‹
 = 
ENXIO
;

774 
Áû
;

778 i‡(
c⁄fig
->
mtu
)

779 
mtu
 = 
c⁄fig
->mtu;

781 
mtu
 = 
ETHERMTU
;

783 
iÂ
->
if_so·c
 = 
sc
;

784 
iÂ
->
if_unô
 = 
unôNumbî
;

785 
iÂ
->
if_«me
 = 
unôName
;

786 
iÂ
->
if_mtu
 = 
mtu
;

787 
iÂ
->
if_baudøã
 = 100000000;

788 
iÂ
->
if_öô
 = 
fxp_öô
;

789 
iÂ
->
if_io˘l
 = 
fxp_io˘l
;

790 
iÂ
->
if_°¨t
 = 
fxp_°¨t
;

791 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

792 
iÂ
->
if_w©chdog
 = 
fxp_w©chdog
;

793 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
 ;

794 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

795 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

800 
	`DBGLVL_PRINTK
(3,"fxp_attach: calling if_attach\n");

801 
	`if_©èch
 (
iÂ
);

802 
	`DBGLVL_PRINTK
(3,"fxp_attach: callingÉther_if_attach\n");

803 
	`ëhî_iÁâach
(
iÂ
);

804 
	`DBGLVL_PRINTK
(3,"fxp_attach:Ñeturn fromÉther_if_attach\n");

806 #ifde‡
NOTUSED


810 
iÂ
->
if_d©a
.
ifi_hdæí
 = (
ëhî_vœn_hódî
);

816 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
FXP_NTXCB
 - 1;

818 
	`•lx
(
s
);

821 
Áûmem
:

822 
	`devi˚_¥ötf
(
dev
, "FailedÅo malloc memory\n");

823 
îr‹
 = 
ENOMEM
;

824 #ifde‡
NOTUSED


825 
Áû
:

827 
	`•lx
(
s
);

828 
	`fxp_ªÀa£
(
sc
);

829  (
îr‹
);

830 
	}
}

836 
	$fxp_ªÀa£
(
fxp_so·c
 *
sc
)

839 #ifde‡
NOTUSED


840 
	`bus_gíîic_dëach
(
sc
->
dev
);

841 i‡(
sc
->
miibus
)

842 
	`devi˚_dñëe_chûd
(
sc
->
dev
, sc->
miibus
);

844 i‡(
sc
->
cbl_ba£
)

845 
	`‰ì
(
sc
->
cbl_ba£
, 
M_DEVBUF
);

846 i‡(
sc
->
fxp_°©s
)

847 
	`‰ì
(
sc
->
fxp_°©s
, 
M_DEVBUF
);

848 i‡(
sc
->
mc•
)

849 
	`‰ì
(
sc
->
mc•
, 
M_DEVBUF
);

850 i‡(
sc
->
rÁ_hódm
)

851 
	`m_‰ìm
(
sc
->
rÁ_hódm
);

853 #ifde‡
NOTUSED


854 i‡(
sc
->
ih
)

855 
	`bus_ã¨down_öå
(
sc
->
dev
, sc->
úq
, sc->
ih
);

856 i‡(
sc
->
úq
)

857 
	`bus_ªÀa£_ªsour˚
(
sc
->
dev
, 
SYS_RES_IRQ
, 0, sc->
úq
);

858 i‡(
sc
->
mem
)

859 
	`bus_ªÀa£_ªsour˚
(
sc
->
dev
, sc->
πp
, sc->
rgd
, sc->
mem
);

860 
	`mtx_de°roy
(&
sc
->
sc_mtx
);

862 
	}
}

864 #i‡
NOTUSED


869 
	$fxp_dëach
(
devi˚_t
 
dev
)

871 
fxp_so·c
 *
sc
 = 
	`devi˚_gë_so·c
(
dev
);

872 
s
;

875 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_INTRCNTL
, 
FXP_SCB_INTR_DISABLE
);

877 
s
 = 
	`•limp
();

882 
	`fxp_°›
(
sc
);

887 
	`ëhî_ifdëach
(&
sc
->
¨pcom
.
ac_if
, 
ETHER_BPF_SUPPORTED
);

892 
	`ifmedü_ªmovóŒ
(&
sc
->
sc_medü
);

894 
	`•lx
(
s
);

897 
	`fxp_ªÀa£
(
sc
);

900 
	}
}

908 
	$fxp_shutdown
(
devi˚_t
 
dev
)

915 
	`fxp_°›
((
fxp_so·c
 *Ë
	`devi˚_gë_so·c
(
dev
));

917 
	}
}

924 
	$fxp_°©s
(
fxp_so·c
 *
sc
)

926 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

928 
	`¥ötf
 (" Ouçuà∑ckës:%-8lu", 
iÂ
->
if_›ackës
);

929 
	`¥ötf
 (" Cﬁlisi⁄s:%-8lu", 
iÂ
->
if_cﬁlisi⁄s
);

930 
	`¥ötf
 (" Ouçuàîr‹s:%-8lu\n", 
iÂ
->
if_€º‹s
);

931 
	`¥ötf
 (" I≈uà∑ckës:%-8lu", 
iÂ
->
if_ùackës
);

932 
	`¥ötf
 (" I≈uàîr‹s:%-8lu\n", 
iÂ
->
if_õº‹s
);

933 
	}
}

936 
	$fxp_ì¥om_shi·ö
(
fxp_so·c
 *
sc
, 
d©a
, 
Àngth
)

938 
u_öt16_t
 
ªg
;

939 
x
;

944 
x
 = 1 << (
Àngth
 - 1); x; x >>= 1) {

945 i‡(
d©a
 & 
x
)

946 
ªg
 = 
FXP_EEPROM_EECS
 | 
FXP_EEPROM_EEDI
;

948 
ªg
 = 
FXP_EEPROM_EECS
;

949 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
);

950 
	`DELAY
(1);

951 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
 | 
FXP_EEPROM_EESK
);

952 
	`DELAY
(1);

953 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
);

954 
	`DELAY
(1);

956 
	}
}

965 
u_öt16_t


966 
	$fxp_ì¥om_gëw‹d
(
fxp_so·c
 *
sc
, 
off£t
, 
autosize
)

968 
u_öt16_t
 
ªg
, 
d©a
;

969 
x
;

971 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
FXP_EEPROM_EECS
);

975 
	`fxp_ì¥om_shi·ö
(
sc
, 
FXP_EEPROM_OPC_READ
, 3);

979 
d©a
 = 0;

980 
x
 = 1 << (
sc
->
ì¥om_size
 - 1); x; x >>= 1) {

981 i‡(
off£t
 & 
x
)

982 
ªg
 = 
FXP_EEPROM_EECS
 | 
FXP_EEPROM_EEDI
;

984 
ªg
 = 
FXP_EEPROM_EECS
;

985 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
);

986 
	`DELAY
(1);

987 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
 | 
FXP_EEPROM_EESK
);

988 
	`DELAY
(1);

989 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
);

990 
	`DELAY
(1);

991 
ªg
 = 
	`CSR_READ_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
Ë& 
FXP_EEPROM_EEDO
;

992 
d©a
++;

993 i‡(
autosize
 && 
ªg
 == 0) {

994 
sc
->
ì¥om_size
 = 
d©a
;

1001 
d©a
 = 0;

1002 
ªg
 = 
FXP_EEPROM_EECS
;

1003 
x
 = 1 << 15; x; x >>= 1) {

1004 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
 | 
FXP_EEPROM_EESK
);

1005 
	`DELAY
(1);

1006 i‡(
	`CSR_READ_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
Ë& 
FXP_EEPROM_EEDO
)

1007 
d©a
 |
x
;

1008 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
ªg
);

1009 
	`DELAY
(1);

1011 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 0);

1012 
	`DELAY
(1);

1014  (
d©a
);

1015 
	}
}

1018 
	$fxp_ì¥om_putw‹d
(
fxp_so·c
 *
sc
, 
off£t
, 
u_öt16_t
 
d©a
)

1020 
i
;

1025 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
FXP_EEPROM_EECS
);

1026 
	`fxp_ì¥om_shi·ö
(
sc
, 0x4, 3);

1027 
	`fxp_ì¥om_shi·ö
(
sc
, 0x03 << (sc->
ì¥om_size
 - 2), sc->eeprom_size);

1028 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 0);

1029 
	`DELAY
(1);

1033 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
FXP_EEPROM_EECS
);

1034 
	`fxp_ì¥om_shi·ö
(
sc
, 
FXP_EEPROM_OPC_WRITE
, 3);

1035 
	`fxp_ì¥om_shi·ö
(
sc
, 
off£t
, sc->
ì¥om_size
);

1036 
	`fxp_ì¥om_shi·ö
(
sc
, 
d©a
, 16);

1037 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 0);

1038 
	`DELAY
(1);

1042 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
FXP_EEPROM_EECS
);

1043 
	`DELAY
(1);

1044 
i
 = 0; i < 1000; i++) {

1045 i‡(
	`CSR_READ_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
Ë& 
FXP_EEPROM_EEDO
)

1047 
	`DELAY
(50);

1049 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 0);

1050 
	`DELAY
(1);

1054 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 
FXP_EEPROM_EECS
);

1055 
	`fxp_ì¥om_shi·ö
(
sc
, 0x4, 3);

1056 
	`fxp_ì¥om_shi·ö
(
sc
, 0, sc->
ì¥om_size
);

1057 
	`CSR_WRITE_2
(
sc
, 
FXP_CSR_EEPROMCONTROL
, 0);

1058 
	`DELAY
(1);

1059 
	}
}

1082 
	$fxp_autosize_ì¥om
(
fxp_so·c
 *
sc
)

1086 
sc
->
ì¥om_size
 = 8;

1089 (Ë
	`fxp_ì¥om_gëw‹d
(
sc
, 0, 1);

1090 
	}
}

1093 
	$fxp_ªad_ì¥om
(
fxp_so·c
 *
sc
, 
u_sh‹t
 *
d©a
, 
off£t
, 
w‹ds
)

1095 
i
;

1097 
i
 = 0; i < 
w‹ds
; i++) {

1098 
d©a
[
i
] = 
	`fxp_ì¥om_gëw‹d
(
sc
, 
off£t
 + i, 0);

1099 
	`DBGLVL_PRINTK
(4,"fxp_eeprom_read(off=0x%x)=0x%x\n",

1100 
off£t
+
i
,
d©a
[i]);

1102 
	}
}

1105 
	$fxp_wrôe_ì¥om
(
fxp_so·c
 *
sc
, 
u_sh‹t
 *
d©a
, 
off£t
, 
w‹ds
)

1107 
i
;

1109 
i
 = 0; i < 
w‹ds
; i++)

1110 
	`fxp_ì¥om_putw‹d
(
sc
, 
off£t
 + 
i
, 
d©a
[i]);

1111 
	`DBGLVL_PRINTK
(4,"fxp_eeprom_write(off=0x%x,0x%x)\n",

1112 
off£t
+
i
,
d©a
[i]);

1113 
	}
}

1119 
	$fxp_°¨t
(
i‚ë
 *
iÂ
)

1121 
fxp_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1122 
fxp_cb_tx
 *
txp
;

1124 
	`DBGLVL_PRINTK
(3,"fxp_start called\n");

1131 i‡(
sc
->
√ed_mc£tup
) {

1135 
txp
 = 
NULL
;

1143 
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
 && 
sc
->
tx_queued
 < 
FXP_NTXCB
 - 1) {

1144 
mbuf
 *
m
, *
mb_hód
;

1145 
£gmít
;

1150 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
mb_hód
);

1155 
txp
 = 
sc
->
cbl_œ°
->
√xt
;

1162 
tbdöô
:

1163 
m
 = 
mb_hód
, 
£gmít
 = 0; m !
NULL
; m = m->
m_√xt
) {

1164 i‡(
m
->
m_Àn
 != 0) {

1165 i‡(
£gmít
 =
FXP_NTXSEG
)

1167 
txp
->
tbd
[
£gmít
].
tb_addr
 =

1168 
	`vt›hys
(
	`mtod
(
m
, 
vm_off£t_t
));

1169 
txp
->
tbd
[
£gmít
].
tb_size
 = 
m
->
m_Àn
;

1170 
£gmít
++;

1173 i‡(
m
 !
NULL
) {

1174 
mbuf
 *
mn
;

1181 
	`MGETHDR
(
mn
, 
M_DONTWAIT
, 
MT_DATA
);

1182 i‡(
mn
 =
NULL
) {

1183 
	`m_‰ìm
(
mb_hód
);

1186 i‡(
mb_hód
->
m_pkthdr
.
Àn
 > 
MHLEN
) {

1187 
	`MCLGET
(
mn
, 
M_DONTWAIT
);

1188 i‡((
mn
->
m_Êags
 & 
M_EXT
) == 0) {

1189 
	`m_‰ìm
(
mn
);

1190 
	`m_‰ìm
(
mb_hód
);

1194 
	`m_c›yd©a
(
mb_hód
, 0, mb_hód->
m_pkthdr
.
Àn
,

1195 
	`mtod
(
mn
, 
ˇddr_t
));

1196 
mn
->
m_pkthdr
.
Àn
 = mn->
m_Àn
 = 
mb_hód
->m_pkthdr.len;

1197 
	`m_‰ìm
(
mb_hód
);

1198 
mb_hód
 = 
mn
;

1199 
tbdöô
;

1202 
txp
->
tbd_numbî
 = 
£gmít
;

1203 
txp
->
mb_hód
 = mb_head;

1204 
txp
->
cb_°©us
 = 0;

1205 i‡(
sc
->
tx_queued
 !
FXP_CXINT_THRESH
 - 1) {

1206 
txp
->
cb_comm™d
 =

1207 
FXP_CB_COMMAND_XMIT
 | 
FXP_CB_COMMAND_SF
 |

1208 
FXP_CB_COMMAND_S
;

1210 
txp
->
cb_comm™d
 =

1211 
FXP_CB_COMMAND_XMIT
 | 
FXP_CB_COMMAND_SF
 |

1212 
FXP_CB_COMMAND_S
 | 
FXP_CB_COMMAND_I
;

1217 
iÂ
->
if_timî
 = 5;

1219 
txp
->
tx_thªshﬁd
 =Åx_threshold;

1225 #ifde‡
__Æpha__


1232 
	`©omic_˛ór_sh‹t
(&
sc
->
cbl_œ°
->
cb_comm™d
,

1233 
FXP_CB_COMMAND_S
);

1235 
sc
->
cbl_œ°
->
cb_comm™d
 &~
FXP_CB_COMMAND_S
;

1237 
sc
->
cbl_œ°
 = 
txp
;

1244 i‡(
sc
->
tx_queued
 == 0)

1245 
sc
->
cbl_fú°
 = 
txp
;

1247 
sc
->
tx_queued
++;

1249 #ifde‡
NOTUSED


1253 i‡(
iÂ
->
if_bpf
)

1254 
	`bpf_mèp
(
iÂ
, 
mb_hód
);

1262 i‡(
txp
 !
NULL
) {

1263 
	`fxp_scb_waô
(
sc
);

1264 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_RESUME
);

1266 
	}
}

1271 
πems_i§
 
	$fxp_öå
(
πems_ve˘‹_numbî
 
v
)

1276 
fxp_so·c
 *
sc
 = &(fxp_softc[0]);

1281 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_INTRCNTL
, 
FXP_SCB_INTR_DISABLE
);

1285 
	`πems_bsd√t_evít_£nd
 (
sc
->
d´m⁄Tid
, 
INTERRUPT_EVENT
);

1286 
	}
}

1288 
	$fxp_d´m⁄
(*
xsc
)

1290 
fxp_so·c
 *
sc
 = 
xsc
;

1291 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

1292 
u_öt8_t
 
°©ack
;

1293 
πems_evít_£t
 
evíts
;

1294 
πems_öãºu±_Àvñ
 
Àvñ
;

1296 #ifde‡
NOTUSED


1297 i‡(
sc
->
su•íded
) {

1303 
	`DBGLVL_PRINTK
(4,"fxp_daemon waiting forÉvent\n");

1307 
	`πems_bsd√t_evít_ª˚ive
 (
INTERRUPT_EVENT
,

1308 
RTEMS_WAIT
|
RTEMS_EVENT_ANY
,

1309 
RTEMS_NO_TIMEOUT
,

1310 &
evíts
);

1311 (
°©ack
 = 
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_STATACK
)) != 0) {

1312 
	`DBGLVL_PRINTK
(4,"fxp_daemon:ÖrocessingÉvent, statack = 0x%x\n",

1313 
°©ack
);

1314 #ifde‡
NOTUSED


1321 i‡(
°©ack
 == 0xff)

1328 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_STATACK
, 
°©ack
);

1343 i‡(
°©ack
 & (
FXP_SCB_STATACK_CXTNO
 | 
FXP_SCB_STATACK_CNA
)) {

1344 
fxp_cb_tx
 *
txp
;

1346 
txp
 = 
sc
->
cbl_fú°
; sc->
tx_queued
 &&

1347 (
txp
->
cb_°©us
 & 
FXP_CB_STATUS_C
) != 0;

1348 
txp
 =Åxp->
√xt
) {

1349 i‡(
txp
->
mb_hód
 !
NULL
) {

1350 
	`m_‰ìm
(
txp
->
mb_hód
);

1351 
txp
->
mb_hód
 = 
NULL
;

1353 
sc
->
tx_queued
--;

1355 
sc
->
cbl_fú°
 = 
txp
;

1356 
iÂ
->
if_timî
 = 0;

1357 i‡(
sc
->
tx_queued
 == 0) {

1358 i‡(
sc
->
√ed_mc£tup
)

1359 
	`fxp_mc_£tup
(
sc
);

1364 i‡(
iÂ
->
if_¢d
.
ifq_hód
 !
NULL
)

1365 
	`fxp_°¨t
(
iÂ
);

1372 i‡(
°©ack
 & (
FXP_SCB_STATACK_FR
 | 
FXP_SCB_STATACK_RNR
)) {

1373 
mbuf
 *
m
;

1374 
fxp_rÁ
 *
rÁ
;

1375 
rcvlo›
:

1376 
m
 = 
sc
->
rÁ_hódm
;

1377 
rÁ
 = (
fxp_rÁ
 *)(
m
->
m_ext
.
ext_buf
 +

1378 
RFA_ALIGNMENT_FUDGE
);

1380 i‡(
rÁ
->
rÁ_°©us
 & 
FXP_RFA_STATUS_C
) {

1384 
sc
->
rÁ_hódm
 = 
m
->
m_√xt
;

1385 
m
->
m_√xt
 = 
NULL
;

1392 i‡(
	`fxp_add_rÁbuf
(
sc
, 
m
) == 0) {

1393 
ëhî_hódî
 *
eh
;

1394 
tŸÆ_Àn
;

1396 
tŸÆ_Àn
 = 
rÁ
->
a˘uÆ_size
 &

1397 (
MCLBYTES
 - 1);

1398 i‡(
tŸÆ_Àn
 <

1399 (
ëhî_hódî
)) {

1400 
	`m_‰ìm
(
m
);

1401 
rcvlo›
;

1410 i‡(
rÁ
->
rÁ_°©us
 &

1411 
FXP_RFA_STATUS_CRC
) {

1412 
	`m_‰ìm
(
m
);

1413 
rcvlo›
;

1416 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

1417 
m
->
m_pkthdr
.
Àn
 = m->
m_Àn
 = 
tŸÆ_Àn
;

1418 
eh
 = 
	`mtod
(
m
, 
ëhî_hódî
 *);

1419 
m
->
m_d©a
 +=

1420 (
ëhî_hódî
);

1421 
m
->
m_Àn
 -=

1422 (
ëhî_hódî
);

1423 
m
->
m_pkthdr
.
Àn
 = m->
m_Àn
;

1424 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

1426 
rcvlo›
;

1428 i‡(
°©ack
 & 
FXP_SCB_STATACK_RNR
) {

1429 
	`fxp_scb_waô
(
sc
);

1430 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
,

1431 
	`vt›hys
(
sc
->
rÁ_hódm
->
m_ext
.
ext_buf
) +

1432 
RFA_ALIGNMENT_FUDGE
);

1433 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_RU_START
);

1440 
	`πems_öãºu±_dißbÀ
 (
Àvñ
);

1441 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_INTRCNTL
,0);

1442 
	`πems_öãºu±_íabÀ
 (
Àvñ
);

1444 
	}
}

1458 
	$fxp_tick
(*
xsc
)

1460 
fxp_so·c
 *
sc
 = 
xsc
;

1461 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

1462 
fxp_°©s
 *
•
 = 
sc
->fxp_stats;

1463 
fxp_cb_tx
 *
txp
;

1464 
s
;

1466 
	`DBGLVL_PRINTK
(4,"fxp_tick called\n");

1468 
iÂ
->
if_›ackës
 +
•
->
tx_good
;

1469 
iÂ
->
if_cﬁlisi⁄s
 +
•
->
tx_tŸÆ_cﬁlisi⁄s
;

1470 i‡(
•
->
rx_good
) {

1471 
iÂ
->
if_ùackës
 +
•
->
rx_good
;

1472 
sc
->
rx_idÀ_£cs
 = 0;

1477 
sc
->
rx_idÀ_£cs
++;

1479 
iÂ
->
if_õº‹s
 +=

1480 
•
->
rx_¸c_îr‹s
 +

1481 
•
->
rx_Æignmít_îr‹s
 +

1482 
•
->
rx_∫r_îr‹s
 +

1483 
•
->
rx_ovîrun_îr‹s
;

1488 i‡(
•
->
tx_undîruns
) {

1489 
iÂ
->
if_€º‹s
 +
•
->
tx_undîruns
;

1490 i‡(
tx_thªshﬁd
 < 192)

1491 
tx_thªshﬁd
 += 64;

1493 
s
 = 
	`•limp
();

1501 
txp
 = 
sc
->
cbl_fú°
; sc->
tx_queued
 &&

1502 (
txp
->
cb_°©us
 & 
FXP_CB_STATUS_C
) != 0;

1503 
txp
 =Åxp->
√xt
) {

1504 i‡(
txp
->
mb_hód
 !
NULL
) {

1505 
	`m_‰ìm
(
txp
->
mb_hód
);

1506 
txp
->
mb_hód
 = 
NULL
;

1508 
sc
->
tx_queued
--;

1510 
sc
->
cbl_fú°
 = 
txp
;

1521 i‡(
sc
->
rx_idÀ_£cs
 > 
FXP_MAX_RX_IDLE
) {

1522 
sc
->
rx_idÀ_£cs
 = 0;

1523 
	`fxp_mc_£tup
(
sc
);

1529 i‡(
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_COMMAND
) == 0) {

1533 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_DUMPRESET
);

1540 
•
->
tx_good
 = 0;

1541 
•
->
tx_undîruns
 = 0;

1542 
•
->
tx_tŸÆ_cﬁlisi⁄s
 = 0;

1544 
•
->
rx_good
 = 0;

1545 
•
->
rx_¸c_îr‹s
 = 0;

1546 
•
->
rx_Æignmít_îr‹s
 = 0;

1547 
•
->
rx_∫r_îr‹s
 = 0;

1548 
•
->
rx_ovîrun_îr‹s
 = 0;

1550 #ifde‡
NOTUSED


1551 i‡(
sc
->
miibus
 !
NULL
)

1552 
	`mii_tick
(
	`devi˚_gë_so·c
(
sc
->
miibus
));

1554 
	`•lx
(
s
);

1558 i‡(
sc
->
°©_ch
 =
fxp_timeout_ru¬ög
) {

1559 
	`timeout
(
fxp_tick
, 
sc
, 
hz
);

1561 i‡(
sc
->
°©_ch
 =
fxp_timeout_°›_rq
) {

1562 
sc
->
°©_ch
 = 
fxp_timeout_°›≥d
;

1564 
	}
}

1571 
	$fxp_°›
(
fxp_so·c
 *
sc
)

1573 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

1574 
fxp_cb_tx
 *
txp
;

1575 
i
;

1577 
	`DBGLVL_PRINTK
(2,"fxp_stop called\n");

1579 
iÂ
->
if_Êags
 &~(
IFF_RUNNING
 | 
IFF_OACTIVE
);

1580 
iÂ
->
if_timî
 = 0;

1585 i‡(
sc
->
°©_ch
 =
fxp_timeout_ru¬ög
) {

1586 
	`DBGLVL_PRINTK
(3,"fxp_stop:ÅryingÅo stop stat updateÅick\n");

1587 
sc
->
°©_ch
 = 
fxp_timeout_°›_rq
;

1588 
sc
->
°©_ch
 !
fxp_timeout_°›≥d
) {

1589 
	`πems_bsd√t_£m≠h‹e_ªÀa£
();

1590 
	`πems_èsk_wake_a·î
(
fxp_ticksPîSec⁄d
);

1591 
	`πems_bsd√t_£m≠h‹e_obèö
();

1593 
	`DBGLVL_PRINTK
(3,"fxp_stop: stat updateÅick stopped\n");

1598 
	`DBGLVL_PRINTK
(3,"fxp_stop: issue softwareÑeset\n");

1599 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_PORT
, 
FXP_PORT_SELECTIVE_RESET
);

1600 
	`DELAY
(10);

1605 
	`DBGLVL_PRINTK
(3,"fxp_stop:Ñeleasing xmit buffers\n");

1606 
txp
 = 
sc
->
cbl_ba£
;

1607 i‡(
txp
 !
NULL
) {

1608 
i
 = 0; i < 
FXP_NTXCB
; i++) {

1609 i‡(
txp
[
i
].
mb_hód
 !
NULL
) {

1610 
	`m_‰ìm
(
txp
[
i
].
mb_hód
);

1611 
txp
[
i
].
mb_hód
 = 
NULL
;

1615 
sc
->
tx_queued
 = 0;

1620 
	`DBGLVL_PRINTK
(3,"fxp_stop: freeándÑeinitállÑeceive buffers\n");

1621 i‡(
sc
->
rÁ_hódm
 !
NULL
)

1622 
	`m_‰ìm
(
sc
->
rÁ_hódm
);

1623 
sc
->
rÁ_hódm
 = 
NULL
;

1624 
sc
->
rÁ_èûm
 = 
NULL
;

1625 
i
 = 0; i < 
FXP_NRFABUFS
; i++) {

1626 i‡(
	`fxp_add_rÁbuf
(
sc
, 
NULL
) != 0) {

1632 
	`∑nic
("fxp_stop:Ço buffers!");

1635 
	`DBGLVL_PRINTK
(2,"fxp_stop: finished\n");

1636 
	}
}

1645 
	$fxp_w©chdog
(
i‚ë
 *
iÂ
)

1647 
fxp_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1649 
	`devi˚_¥ötf
(
sc
->
dev
, "deviceÅimeout\n");

1650 
iÂ
->
if_€º‹s
++;

1652 
	`fxp_öô
(
sc
);

1653 
	}
}

1656 
	$fxp_öô
(*
xsc
)

1658 
fxp_so·c
 *
sc
 = 
xsc
;

1659 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

1660 
fxp_cb_c⁄fig
 *
cbp
;

1661 
fxp_cb_üs
 *
cb_üs
;

1662 
fxp_cb_tx
 *
txp
;

1663 
i
, 
¥m
, 
s
, 
rv
;

1665 
	`πems_èsk_wake_a·î
(100);

1666 
	`DBGLVL_PRINTK
(2,"fxp_init called\n");

1668 
s
 = 
	`•limp
();

1677 
sc
->
°©_ch
 = 
fxp_timeout_°›≥d
;

1678 
	`fxp_°›
(
sc
);

1680 
¥m
 = (
iÂ
->
if_Êags
 & 
IFF_PROMISC
) ? 1 : 0;

1682 
	`DBGLVL_PRINTK
(5,"fxp_init: Initializing base of CBLánd RFA memory\n");

1687 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
, 0);

1688 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_BASE
);

1690 
	`fxp_scb_waô
(
sc
);

1691 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_RU_BASE
);

1696 
	`DBGLVL_PRINTK
(5,"fxp_init: Initializing base of dump-stats buffer\n");

1697 
	`fxp_scb_waô
(
sc
);

1698 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
, 
	`vt›hys
(sc->
fxp_°©s
));

1699 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_DUMP_ADR
);

1706 
cbp
 = (
fxp_cb_c⁄fig
 *Ë
sc
->
cbl_ba£
;

1707 
	`DBGLVL_PRINTK
(5,"fxp_öô: cb∞0x%x\n",
cbp
);

1714 
	`mem˝y
–(*)(
u_öt32_t
*)(vﬁ©ûê*)&
cbp
->
cb_°©us
,

1715 
fxp_cb_c⁄fig_ãm∂©e
,

1716 (
fxp_cb_c⁄fig_ãm∂©e
));

1718 
cbp
->
cb_°©us
 = 0;

1719 
cbp
->
cb_comm™d
 = 
FXP_CB_COMMAND_CONFIG
 | 
FXP_CB_COMMAND_EL
;

1720 
cbp
->
lök_addr
 = -1;

1721 
cbp
->
byã_cou¡
 = 22;

1722 
cbp
->
rx_fifo_limô
 = 8;

1723 
cbp
->
tx_fifo_limô
 = 0;

1724 
cbp
->
ad≠tive_ifs
 = 0;

1725 
cbp
->
mwi_íabÀ
 = 
sc
->
Êags
 & 
FXP_FLAG_MWI_ENABLE
 ? 1 : 0;

1726 
cbp
->
ty≥_íabÀ
 = 0;

1727 
cbp
->
ªad_Æign_í
 = 
sc
->
Êags
 & 
FXP_FLAG_READ_ALIGN
 ? 1 : 0;

1728 
cbp
->
íd_wr_⁄_˛
 = 
sc
->
Êags
 & 
FXP_FLAG_WRITE_ALIGN
 ? 1 : 0;

1729 
cbp
->
rx_dma_byãcou¡
 = 0;

1730 
cbp
->
tx_dma_byãcou¡
 = 0;

1731 
cbp
->
dma_mb˚
 = 0;

1732 
cbp
->
œã_scb
 = 0;

1733 
cbp
->
dúe˘_dma_dis
 = 1;

1734 
cbp
->
äo_öt_‹_tco_í
 =0;

1735 
cbp
->
ci_öt
 = 1;

1736 
cbp
->
ext_txcb_dis
 = 
sc
->
Êags
 & 
FXP_FLAG_EXT_TXCB
 ? 0 : 1;

1737 
cbp
->
ext_°©s_dis
 = 1;

1738 
cbp
->
kìp_ovîrun_rx
 = 0;

1739 
cbp
->
ßve_bf
 = 
sc
->
chù
 =
FXP_CHIP_82557
 ? 1 : 
¥m
;

1740 
cbp
->
disc_sh‹t_rx
 = !
¥m
;

1741 
cbp
->
undîrun_ªåy
 = 1;

1742 
cbp
->
two_‰ames
 = 0;

1743 
cbp
->
dyn_tbd
 = 0;

1744 
cbp
->
medüty≥
 = 
sc
->
Êags
 & 
FXP_FLAG_SERIAL_MEDIA
 ? 0 : 1;

1745 
cbp
->
csma_dis
 = 0;

1746 
cbp
->
t˝_udp_cksum
 = 0;

1747 
cbp
->
vœn_tco
 = 0;

1748 
cbp
->
lök_wake_í
 = 0;

1749 
cbp
->
¨p_wake_í
 = 0;

1750 
cbp
->
mc_wake_í
 = 0;

1751 
cbp
->
nßi
 = 1;

1752 
cbp
->
¥ómbÀ_Àngth
 = 2;

1753 
cbp
->
lo›back
 = 0;

1754 
cbp
->
löór_¥i‹ôy
 = 0;

1755 
cbp
->
löór_¥i_mode
 = 0;

1756 
cbp
->
öãr‰m_•acög
 = 6;

1757 
cbp
->
¥omiscuous
 = 
¥m
;

1758 
cbp
->
bˇ°_dißbÀ
 = 0;

1759 
cbp
->
waô_a·î_wö
 = 0;

1760 
cbp
->
ign‹e_ul
 = 0;

1761 
cbp
->
¸c16_í
 = 0;

1762 
cbp
->
¸scdt
 = 
sc
->
Êags
 & 
FXP_FLAG_SERIAL_MEDIA
 ? 1 : 0;

1764 
cbp
->
°rùpög
 = !
¥m
;

1765 
cbp
->
∑ddög
 = 1;

1766 
cbp
->
rcv_¸c_x„r
 = 0;

1767 
cbp
->
l⁄g_rx_í
 = 
sc
->
Êags
 & 
FXP_FLAG_LONG_PKT_EN
 ? 1 : 0;

1768 
cbp
->
ü_wake_í
 = 0;

1769 
cbp
->
magic_pkt_dis
 = 0;

1771 
cbp
->
f‹˚_fdx
 = 0;

1772 
cbp
->
fdx_pö_í
 = 1;

1773 
cbp
->
mu…i_ü
 = 0;

1774 
cbp
->
mc_Æl
 = 
sc
->
Êags
 & 
FXP_FLAG_ALL_MCAST
 ? 1 : 0;

1776 
	`DBGLVL_PRINTK
(5,"fxp_init: cbp initialized\n");

1777 i‡(
sc
->
chù
 =
FXP_CHIP_82557
) {

1782 
cbp
->
fc_dñay_lsb
 = 0;

1783 
cbp
->
fc_dñay_msb
 = 0x40;

1784 
cbp
->
¥i_fc_thªsh
 = 3;

1785 
cbp
->
tx_fc_dis
 = 0;

1786 
cbp
->
rx_fc_ª°›
 = 0;

1787 
cbp
->
rx_fc_ª°¨t
 = 0;

1788 
cbp
->
fc_fûãr
 = 0;

1789 
cbp
->
¥i_fc_loc
 = 1;

1791 
cbp
->
fc_dñay_lsb
 = 0x1f;

1792 
cbp
->
fc_dñay_msb
 = 0x01;

1793 
cbp
->
¥i_fc_thªsh
 = 3;

1794 
cbp
->
tx_fc_dis
 = 0;

1795 
cbp
->
rx_fc_ª°›
 = 1;

1796 
cbp
->
rx_fc_ª°¨t
 = 1;

1797 
cbp
->
fc_fûãr
 = !
¥m
;

1798 
cbp
->
¥i_fc_loc
 = 1;

1804 
	`DBGLVL_PRINTK
(5,"fxp_init: starting config command/DMA\n");

1805 
	`fxp_scb_waô
(
sc
);

1806 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
, 
	`vt›hys
(&
cbp
->
cb_°©us
));

1807 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_START
);

1809 
	`fxp_dma_waô
(&
cbp
->
cb_°©us
, 
sc
);

1815 
	`DBGLVL_PRINTK
(5,"fxp_init: initialize stationáddress\n");

1816 
cb_üs
 = (
fxp_cb_üs
 *Ë
sc
->
cbl_ba£
;

1817 
cb_üs
->
cb_°©us
 = 0;

1818 
cb_üs
->
cb_comm™d
 = 
FXP_CB_COMMAND_IAS
 | 
FXP_CB_COMMAND_EL
;

1819 
cb_üs
->
lök_addr
 = -1;

1820 
	`mem˝y
((*)(
u_öt32_t
*)(vﬁ©ûê*)
cb_üs
->
maˇddr
,

1821 
sc
->
¨pcom
.
ac_íaddr
,

1822 (
sc
->
¨pcom
.
ac_íaddr
));

1827 
	`DBGLVL_PRINTK
(5,"fxp_init: start IAS command/DMA\n");

1828 
	`fxp_scb_waô
(
sc
);

1829 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_START
);

1831 
	`fxp_dma_waô
(&
cb_üs
->
cb_°©us
, 
sc
);

1837 
	`DBGLVL_PRINTK
(5,"fxp_init: initialize TxCBÜist\n");

1838 
txp
 = 
sc
->
cbl_ba£
;

1839 
	`mem£t
(
txp
, 0, (
fxp_cb_tx
Ë* 
FXP_NTXCB
);

1840 
i
 = 0; i < 
FXP_NTXCB
; i++) {

1841 
txp
[
i
].
cb_°©us
 = 
FXP_CB_STATUS_C
 | 
FXP_CB_STATUS_OK
;

1842 
txp
[
i
].
cb_comm™d
 = 
FXP_CB_COMMAND_NOP
;

1843 
txp
[
i
].
lök_addr
 =

1844 
	`vt›hys
(&
txp
[(
i
 + 1Ë& 
FXP_TXCB_MASK
].
cb_°©us
);

1845 i‡(
sc
->
Êags
 & 
FXP_FLAG_EXT_TXCB
)

1846 
txp
[
i
].
tbd_¨øy_addr
 = 
	`vt›hys
(&txp[i].
tbd
[2]);

1848 
txp
[
i
].
tbd_¨øy_addr
 = 
	`vt›hys
(&txp[i].
tbd
[0]);

1849 
txp
[
i
].
√xt
 = &txp[(ò+ 1Ë& 
FXP_TXCB_MASK
];

1855 
	`DBGLVL_PRINTK
(5,"fxp_init: setup suspend flag\n");

1856 
txp
->
cb_comm™d
 = 
FXP_CB_COMMAND_NOP
 | 
FXP_CB_COMMAND_S
;

1857 
sc
->
cbl_fú°
 = sc->
cbl_œ°
 = 
txp
;

1858 
sc
->
tx_queued
 = 1;

1860 
	`fxp_scb_waô
(
sc
);

1861 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_START
);

1866 
	`DBGLVL_PRINTK
(5,"fxp_init: initialize RFA\n");

1867 
	`fxp_scb_waô
(
sc
);

1868 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
,

1869 
	`vt›hys
(
sc
->
rÁ_hódm
->
m_ext
.
ext_buf
Ë+ 
RFA_ALIGNMENT_FUDGE
);

1870 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_RU_START
);

1872 #ifde‡
NOTUSED


1876 i‡(
sc
->
miibus
 !
NULL
)

1877 
	`mii_medüchg
(
	`devi˚_gë_so·c
(
sc
->
miibus
));

1880 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1881 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

1883 i‡(
sc
->
d´m⁄Tid
 == 0) {

1887 
sc
->
d´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("FXPd", 4096, 
fxp_d´m⁄
, sc);

1892 
sc
->
úqInfo
.
hdl
 = (
πems_úq_hdl
)
fxp_öå
;

1893 
sc
->
úqInfo
.
⁄
 = 
n›On
;

1894 
sc
->
úqInfo
.
off
 = 
n›On
;

1895 
sc
->
úqInfo
.
isOn
 = 
fxpIsOn
;

1896 
rv
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
 (&
sc
->
úqInfo
);

1897 i‡(
rv
 != 1) {

1898 
	`πems_∑nic
 ("Can'táttach fxp interrupt handler for irq %d\n",

1899 
sc
->
úqInfo
.
«me
);

1906 
	`CSR_WRITE_1
(
sc
, 
FXP_CSR_SCB_INTRCNTL
, 0);

1907 
	`•lx
(
s
);

1912 
sc
->
°©_ch
 = 
fxp_timeout_ru¬ög
;

1913 
	`DBGLVL_PRINTK
(2,"fxp_öô: sèt†upd©îÅimeouàˇŒed wôh hz=%d\n", 
hz
);

1914 
	`timeout
(
fxp_tick
, 
sc
, 
hz
);

1915 
	`DBGLVL_PRINTK
(2,"fxp_init finished\n");

1916 
	}
}

1918 #ifde‡
NOTUSED


1920 
	$fxp_£rül_ifmedü_upd
(
i‚ë
 *
iÂ
)

1924 
	}
}

1927 
	$fxp_£rül_ifmedü_°s
(
i‚ë
 *
iÂ
, 
ifmedüªq
 *
ifmr
)

1930 
ifmr
->
ifm_a˘ive
 = 
IFM_ETHER
|
IFM_MANUAL
;

1931 
	}
}

1937 
	$fxp_ifmedü_upd
(
i‚ë
 *
iÂ
)

1939 
fxp_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1940 
mii_d©a
 *
mii
;

1942 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
miibus
);

1943 
	`mii_medüchg
(
mii
);

1945 
	}
}

1951 
	$fxp_ifmedü_°s
(
i‚ë
 *
iÂ
, 
ifmedüªq
 *
ifmr
)

1953 
fxp_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1954 
mii_d©a
 *
mii
;

1956 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
miibus
);

1957 
	`mii_pﬁl°©
(
mii
);

1958 
ifmr
->
ifm_a˘ive
 = 
mii
->
mii_medü_a˘ive
;

1959 
ifmr
->
ifm_°©us
 = 
mii
->
mii_medü_°©us
;

1961 i‡(
ifmr
->
ifm_°©us
 & 
IFM_10_T
 && 
sc
->
Êags
 & 
FXP_FLAG_CU_RESUME_BUG
)

1962 
sc
->
cu_ªsume_bug
 = 1;

1964 
sc
->
cu_ªsume_bug
 = 0;

1965 
	}
}

1977 
	$fxp_add_rÁbuf
(
fxp_so·c
 *
sc
, 
mbuf
 *
ﬁdm
)

1979 
u_öt32_t
 
v
;

1980 
mbuf
 *
m
;

1981 
fxp_rÁ
 *
rÁ
, *
p_rÁ
;

1983 
	`DBGLVL_PRINTK
(4,"fxp_add_rfabuf called\n");

1985 
	`MGETHDR
(
m
, 
M_DONTWAIT
, 
MT_DATA
);

1986 i‡(
m
 !
NULL
) {

1987 
	`MCLGET
(
m
, 
M_DONTWAIT
);

1988 i‡((
m
->
m_Êags
 & 
M_EXT
) == 0) {

1989 
	`m_‰ìm
(
m
);

1990 i‡(
ﬁdm
 =
NULL
)

1992 
m
 = 
ﬁdm
;

1993 
m
->
m_d©a
 = m->
m_ext
.
ext_buf
;

1996 i‡(
ﬁdm
 =
NULL
)

1998 
m
 = 
ﬁdm
;

1999 
m
->
m_d©a
 = m->
m_ext
.
ext_buf
;

2006 
m
->
m_d©a
 +
RFA_ALIGNMENT_FUDGE
;

2012 
rÁ
 = 
	`mtod
(
m
, 
fxp_rÁ
 *);

2013 
m
->
m_d©a
 +(
fxp_rÁ
);

2014 
rÁ
->
size
 = (
u_öt16_t
)(
MCLBYTES
 - (
fxp_rÁ
Ë- 
RFA_ALIGNMENT_FUDGE
);

2022 
rÁ
->
rÁ_°©us
 = 0;

2023 
rÁ
->
rÁ_c⁄åﬁ
 = 
FXP_RFA_CONTROL_EL
;

2024 
rÁ
->
a˘uÆ_size
 = 0;

2026 
v
 = -1;

2027 
	`fxp_lwc›y
(&
v
, (vﬁ©ûê
u_öt32_t
*Ë
rÁ
->
lök_addr
);

2028 
	`fxp_lwc›y
(&
v
, (vﬁ©ûê
u_öt32_t
*Ë
rÁ
->
rbd_addr
);

2034 i‡(
sc
->
rÁ_hódm
 !
NULL
) {

2035 
p_rÁ
 = (
fxp_rÁ
 *Ë(
sc
->
rÁ_èûm
->
m_ext
.
ext_buf
 +

2036 
RFA_ALIGNMENT_FUDGE
);

2037 
sc
->
rÁ_èûm
->
m_√xt
 = 
m
;

2038 
v
 = 
	`vt›hys
(
rÁ
);

2039 
	`fxp_lwc›y
(&
v
, (vﬁ©ûê
u_öt32_t
*Ë
p_rÁ
->
lök_addr
);

2040 
p_rÁ
->
rÁ_c⁄åﬁ
 = 0;

2042 
sc
->
rÁ_hódm
 = 
m
;

2044 
sc
->
rÁ_èûm
 = 
m
;

2046  (
m
 =
ﬁdm
);

2047 
	}
}

2049 #ifde‡
NOTUSED


2051 
	$fxp_miibus_ªadªg
(
devi˚_t
 
dev
, 
phy
, 
ªg
)

2053 
fxp_so·c
 *
sc
 = 
	`devi˚_gë_so·c
(
dev
);

2054 
cou¡
 = 10000;

2055 
vÆue
;

2057 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_MDICONTROL
,

2058 (
FXP_MDI_READ
 << 26Ë| (
ªg
 << 16Ë| (
phy
 << 21));

2060 ((
vÆue
 = 
	`CSR_READ_4
(
sc
, 
FXP_CSR_MDICONTROL
)) & 0x10000000) == 0

2061 && 
cou¡
--)

2062 
	`DELAY
(10);

2064 i‡(
cou¡
 <= 0)

2065 
	`devi˚_¥ötf
(
dev
, "fxp_miibus_readreg:Åimed out\n");

2067  (
vÆue
 & 0xffff);

2068 
	}
}

2071 
	$fxp_miibus_wrôîeg
(
devi˚_t
 
dev
, 
phy
, 
ªg
, 
vÆue
)

2073 
fxp_so·c
 *
sc
 = 
	`devi˚_gë_so·c
(
dev
);

2074 
cou¡
 = 10000;

2076 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_MDICONTROL
,

2077 (
FXP_MDI_WRITE
 << 26Ë| (
ªg
 << 16Ë| (
phy
 << 21) |

2078 (
vÆue
 & 0xffff));

2080 (
	`CSR_READ_4
(
sc
, 
FXP_CSR_MDICONTROL
) & 0x10000000) == 0 &&

2081 
cou¡
--)

2082 
	`DELAY
(10);

2084 i‡(
cou¡
 <= 0)

2085 
	`devi˚_¥ötf
(
dev
, "fxp_miibus_writereg:Åimed out\n");

2086 
	}
}

2090 
	$fxp_io˘l
(
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

2092 
fxp_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

2093 #ifde‡
NOTUSED


2094 
i‰eq
 *
i‰
 = (i‰eq *)
d©a
;

2095 
mii_d©a
 *
mii
;

2097 
s
, 
îr‹
 = 0;

2099 
	`DBGLVL_PRINTK
(2,"fxp_ioctl called\n");

2101 
s
 = 
	`•limp
();

2103 
comm™d
) {

2104 
SIOCSIFADDR
:

2105 
SIOCGIFADDR
:

2106 
SIOCSIFMTU
:

2107 
îr‹
 = 
	`ëhî_io˘l
(
iÂ
, 
comm™d
, 
d©a
);

2110 
SIOCSIFFLAGS
:

2111 i‡(
iÂ
->
if_Êags
 & 
IFF_ALLMULTI
)

2112 
sc
->
Êags
 |
FXP_FLAG_ALL_MCAST
;

2114 
sc
->
Êags
 &~
FXP_FLAG_ALL_MCAST
;

2122 i‡(
iÂ
->
if_Êags
 & 
IFF_UP
) {

2123 
	`fxp_öô
(
sc
);

2125 i‡(
iÂ
->
if_Êags
 & 
IFF_RUNNING
)

2126 
	`fxp_°›
(
sc
);

2130 
SIOCADDMULTI
:

2131 
SIOCDELMULTI
:

2132 i‡(
iÂ
->
if_Êags
 & 
IFF_ALLMULTI
)

2133 
sc
->
Êags
 |
FXP_FLAG_ALL_MCAST
;

2135 
sc
->
Êags
 &~
FXP_FLAG_ALL_MCAST
;

2140 i‡((
sc
->
Êags
 & 
FXP_FLAG_ALL_MCAST
) == 0)

2141 
	`fxp_mc_£tup
(
sc
);

2146 i‡(
sc
->
Êags
 & 
FXP_FLAG_ALL_MCAST
)

2147 
	`fxp_öô
(
sc
);

2148 
îr‹
 = 0;

2151 #ifde‡
NOTUSED


2152 
SIOCSIFMEDIA
:

2153 
SIOCGIFMEDIA
:

2154 i‡(
sc
->
miibus
 !
NULL
) {

2155 
mii
 = 
	`devi˚_gë_so·c
(
sc
->
miibus
);

2156 
îr‹
 = 
	`ifmedü_io˘l
(
iÂ
, 
i‰
,

2157 &
mii
->
mii_medü
, 
comm™d
);

2159 
îr‹
 = 
	`ifmedü_io˘l
(
iÂ
, 
i‰
, &
sc
->
sc_medü
, 
comm™d
);

2164 
SIO_RTEMS_SHOW_STATS
:

2165 
	`fxp_°©s
(
sc
);

2169 
îr‹
 = 
EINVAL
;

2171 
	`•lx
(
s
);

2172  (
îr‹
);

2173 
	}
}

2190 
	$fxp_mc_£tup
(
fxp_so·c
 *
sc
)

2192 
fxp_cb_mcs
 *
mc•
 = 
sc
->mcsp;

2193 
i‚ë
 *
iÂ
 = &
sc
->
sc_if
;

2194 #ifde‡
NOTUSED


2195 
ifmu…üddr
 *
ifma
;

2197 
nmˇ°s
;

2198 
cou¡
;

2200 
	`DBGLVL_PRINTK
(2,"fxp_mc_setup called\n");

2209 i‡(
sc
->
tx_queued
) {

2210 
fxp_cb_tx
 *
txp
;

2216 i‡(
sc
->
√ed_mc£tup
)

2218 
sc
->
√ed_mc£tup
 = 1;

2224 
txp
 = 
sc
->
cbl_œ°
->
√xt
;

2225 
txp
->
mb_hód
 = 
NULL
;

2226 
txp
->
cb_°©us
 = 0;

2227 
txp
->
cb_comm™d
 = 
FXP_CB_COMMAND_NOP
 |

2228 
FXP_CB_COMMAND_S
 | 
FXP_CB_COMMAND_I
;

2232 
sc
->
cbl_œ°
->
cb_comm™d
 &~
FXP_CB_COMMAND_S
;

2233 
sc
->
cbl_œ°
 = 
txp
;

2234 
sc
->
tx_queued
++;

2238 
	`fxp_scb_waô
(
sc
);

2239 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_RESUME
);

2244 
iÂ
->
if_timî
 = 5;

2248 
sc
->
√ed_mc£tup
 = 0;

2253 
mc•
->
√xt
 = 
sc
->
cbl_ba£
;

2254 
mc•
->
mb_hód
 = 
NULL
;

2255 
mc•
->
cb_°©us
 = 0;

2256 
mc•
->
cb_comm™d
 = 
FXP_CB_COMMAND_MCAS
 |

2257 
FXP_CB_COMMAND_S
 | 
FXP_CB_COMMAND_I
;

2258 
mc•
->
lök_addr
 = 
	`vt›hys
(&
sc
->
cbl_ba£
->
cb_°©us
);

2260 
nmˇ°s
 = 0;

2261 #ifde‡
NOTUSED


2262 i‡((
sc
->
Êags
 & 
FXP_FLAG_ALL_MCAST
) == 0) {

2263 #i‡
__FªeBSD_vîsi⁄
 < 500000

2264 
	`LIST_FOREACH
(
ifma
, &
iÂ
->
if_mu…üddrs
, 
ifma_lök
) {

2266 
	`TAILQ_FOREACH
(
ifma
, &
iÂ
->
if_mu…üddrs
, 
ifma_lök
) {

2268 i‡(
ifma
->
ifma_addr
->
ß_Ámûy
 !
AF_LINK
)

2270 i‡(
nmˇ°s
 >
MAXMCADDR
) {

2271 
sc
->
Êags
 |
FXP_FLAG_ALL_MCAST
;

2272 
nmˇ°s
 = 0;

2275 
	`mem˝y
((*)(
uöçå_t
)(volatile *)

2276 &
sc
->
mc•
->
mc_addr
[
nmˇ°s
][0],

2277 
	`LLADDR
((
sockaddr_dl
 *)
ifma
->
ifma_addr
), 6);

2278 
nmˇ°s
++;

2282 
mc•
->
mc_˙t
 = 
nmˇ°s
 * 6;

2283 
sc
->
cbl_fú°
 = sc->
cbl_œ°
 = (
fxp_cb_tx
 *Ë
mc•
;

2284 
sc
->
tx_queued
 = 1;

2290 
cou¡
 = 100;

2291 (
	`CSR_READ_1
(
sc
, 
FXP_CSR_SCB_RUSCUS
) >> 6) ==

2292 
FXP_SCB_CUS_ACTIVE
 && --
cou¡
)

2293 
	`DELAY
(10);

2294 i‡(
cou¡
 == 0) {

2295 
	`devi˚_¥ötf
(
sc
->
dev
, "command queueÅimeout\n");

2302 
	`fxp_scb_waô
(
sc
);

2303 
	`CSR_WRITE_4
(
sc
, 
FXP_CSR_SCB_GENERAL
, 
	`vt›hys
(&
mc•
->
cb_°©us
));

2304 
	`fxp_scb_cmd
(
sc
, 
FXP_SCB_COMMAND_CU_START
);

2306 
iÂ
->
if_timî
 = 2;

2308 
	}
}

	@src/libchip/network/if_fxpreg.h

31 
	#FXP_VENDORID_INTEL
 0x8086

	)

33 
	#FXP_PCI_MMBA
 0x10

	)

34 
	#FXP_PCI_IOBA
 0x14

	)

39 
	#FXP_CSR_SCB_RUSCUS
 0

	)

40 
	#FXP_CSR_SCB_STATACK
 1

	)

41 
	#FXP_CSR_SCB_COMMAND
 2

	)

42 
	#FXP_CSR_SCB_INTRCNTL
 3

	)

43 
	#FXP_CSR_SCB_GENERAL
 4

	)

44 
	#FXP_CSR_PORT
 8

	)

45 
	#FXP_CSR_FLASHCONTROL
 12

	)

46 
	#FXP_CSR_EEPROMCONTROL
 14

	)

47 
	#FXP_CSR_MDICONTROL
 16

	)

48 
	#FXP_CSR_FLOWCONTROL
 0x19

	)

49 
	#FXP_CSR_GENCONTROL
 0x1C

	)

59 
	#FXP_PORT_SOFTWARE_RESET
 0

	)

60 
	#FXP_PORT_SELFTEST
 1

	)

61 
	#FXP_PORT_SELECTIVE_RESET
 2

	)

62 
	#FXP_PORT_DUMP
 3

	)

64 
	#FXP_SCB_RUS_IDLE
 0

	)

65 
	#FXP_SCB_RUS_SUSPENDED
 1

	)

66 
	#FXP_SCB_RUS_NORESOURCES
 2

	)

67 
	#FXP_SCB_RUS_READY
 4

	)

68 
	#FXP_SCB_RUS_SUSP_NORBDS
 9

	)

69 
	#FXP_SCB_RUS_NORES_NORBDS
 10

	)

70 
	#FXP_SCB_RUS_READY_NORBDS
 12

	)

72 
	#FXP_SCB_CUS_IDLE
 0

	)

73 
	#FXP_SCB_CUS_SUSPENDED
 1

	)

74 
	#FXP_SCB_CUS_ACTIVE
 2

	)

76 
	#FXP_SCB_INTR_DISABLE
 0x01

	)

77 
	#FXP_SCB_INTR_SWI
 0x02

	)

78 
	#FXP_SCB_INTMASK_FCP
 0x04

	)

79 
	#FXP_SCB_INTMASK_ER
 0x08

	)

80 
	#FXP_SCB_INTMASK_RNR
 0x10

	)

81 
	#FXP_SCB_INTMASK_CNA
 0x20

	)

82 
	#FXP_SCB_INTMASK_FR
 0x40

	)

83 
	#FXP_SCB_INTMASK_CXTNO
 0x80

	)

85 
	#FXP_SCB_STATACK_FCP
 0x01

	)

86 
	#FXP_SCB_STATACK_ER
 0x02

	)

87 
	#FXP_SCB_STATACK_SWI
 0x04

	)

88 
	#FXP_SCB_STATACK_MDI
 0x08

	)

89 
	#FXP_SCB_STATACK_RNR
 0x10

	)

90 
	#FXP_SCB_STATACK_CNA
 0x20

	)

91 
	#FXP_SCB_STATACK_FR
 0x40

	)

92 
	#FXP_SCB_STATACK_CXTNO
 0x80

	)

94 
	#FXP_SCB_COMMAND_CU_NOP
 0x00

	)

95 
	#FXP_SCB_COMMAND_CU_START
 0x10

	)

96 
	#FXP_SCB_COMMAND_CU_RESUME
 0x20

	)

97 
	#FXP_SCB_COMMAND_CU_DUMP_ADR
 0x40

	)

98 
	#FXP_SCB_COMMAND_CU_DUMP
 0x50

	)

99 
	#FXP_SCB_COMMAND_CU_BASE
 0x60

	)

100 
	#FXP_SCB_COMMAND_CU_DUMPRESET
 0x70

	)

102 
	#FXP_SCB_COMMAND_RU_NOP
 0

	)

103 
	#FXP_SCB_COMMAND_RU_START
 1

	)

104 
	#FXP_SCB_COMMAND_RU_RESUME
 2

	)

105 
	#FXP_SCB_COMMAND_RU_ABORT
 4

	)

106 
	#FXP_SCB_COMMAND_RU_LOADHDS
 5

	)

107 
	#FXP_SCB_COMMAND_RU_BASE
 6

	)

108 
	#FXP_SCB_COMMAND_RU_RBDRESUME
 7

	)

113 
	sfxp_cb_n›
 {

114 *
	mfûl
[2];

115 vﬁ©ûê
u_öt16_t
 
	mcb_°©us
;

116 vﬁ©ûê
u_öt16_t
 
	mcb_comm™d
;

117 vﬁ©ûê
u_öt32_t
 
	mlök_addr
;

119 
	sfxp_cb_üs
 {

120 *
	mfûl
[2];

121 vﬁ©ûê
u_öt16_t
 
	mcb_°©us
;

122 vﬁ©ûê
u_öt16_t
 
	mcb_comm™d
;

123 vﬁ©ûê
u_öt32_t
 
	mlök_addr
;

124 vﬁ©ûê
u_öt8_t
 
	mmaˇddr
[6];

127 
	sfxp_cb_c⁄fig
 {

128 *
	mfûl
[2];

129 vﬁ©ûê
u_öt16_t
 
	mcb_°©us
;

130 vﬁ©ûê
u_öt16_t
 
	mcb_comm™d
;

131 vﬁ©ûê
u_öt32_t
 
	mlök_addr
;

132 vﬁ©ûê
u_öt
 
	mbyã_cou¡
:6,

134 vﬁ©ûê
u_öt
 
	mrx_fifo_limô
:4,

135 
	mtx_fifo_limô
:3,

137 vﬁ©ûê
u_öt8_t
 
	mad≠tive_ifs
;

138 vﬁ©ûê
u_öt
 
	mmwi_íabÀ
:1,

139 
	mty≥_íabÀ
:1,

140 
	mªad_Æign_í
:1,

141 
	míd_wr_⁄_˛
:1,

143 vﬁ©ûê
u_öt
 
	mrx_dma_byãcou¡
:7,

145 vﬁ©ûê
u_öt
 
	mtx_dma_byãcou¡
:7,

146 
	mdma_mb˚
:1;

147 vﬁ©ûê
u_öt
 
	mœã_scb
:1,

148 
	mdúe˘_dma_dis
:1,

149 
	mäo_öt_‹_tco_í
:1,

150 
	mci_öt
:1,

151 
	mext_txcb_dis
:1,

152 
	mext_°©s_dis
:1,

153 
	mkìp_ovîrun_rx
:1,

154 
	mßve_bf
:1;

155 vﬁ©ûê
u_öt
 
	mdisc_sh‹t_rx
:1,

156 
	mundîrun_ªåy
:2,

158 
	mtwo_‰ames
:1,

159 
	mdyn_tbd
:1;

160 vﬁ©ûê
u_öt
 
	mmedüty≥
:1,

162 
	mcsma_dis
:1;

163 vﬁ©ûê
u_öt
 
	mt˝_udp_cksum
:1,

165 
	mvœn_tco
:1,

166 
	mlök_wake_í
:1,

167 
	m¨p_wake_í
:1,

168 
	mmc_wake_í
:1;

169 vﬁ©ûê
	mu_öt
 :3,

170 
	mnßi
:1,

171 
	m¥ómbÀ_Àngth
:2,

172 
	mlo›back
:2;

173 vﬁ©ûê
u_öt
 
	mlöór_¥i‹ôy
:3,

175 vﬁ©ûê
u_öt
 
	mlöór_¥i_mode
:1,

177 
	möãr‰m_•acög
:4;

178 vﬁ©ûê
	mu_öt
 :8;

179 vﬁ©ûê
	mu_öt
 :8;

180 vﬁ©ûê
u_öt
 
	m¥omiscuous
:1,

181 
	mbˇ°_dißbÀ
:1,

182 
	mwaô_a·î_wö
:1,

184 
	mign‹e_ul
:1,

185 
	m¸c16_í
:1,

187 
	m¸scdt
:1;

188 vﬁ©ûê
u_öt
 
	mfc_dñay_lsb
:8;

189 vﬁ©ûê
u_öt
 
	mfc_dñay_msb
:8;

190 vﬁ©ûê
u_öt
 
	m°rùpög
:1,

191 
	m∑ddög
:1,

192 
	mrcv_¸c_x„r
:1,

193 
	ml⁄g_rx_í
:1,

194 
	m¥i_fc_thªsh
:3,

196 vﬁ©ûê
u_öt
 
	mü_wake_í
:1,

197 
	mmagic_pkt_dis
:1,

198 
	mtx_fc_dis
:1,

199 
	mrx_fc_ª°›
:1,

200 
	mrx_fc_ª°¨t
:1,

201 
	mfc_fûãr
:1,

202 
	mf‹˚_fdx
:1,

203 
	mfdx_pö_í
:1;

204 vﬁ©ûê
	mu_öt
 :5,

205 
	m¥i_fc_loc
:1,

206 
	mmu…i_ü
:1,

208 vﬁ©ûê
	mu_öt
 :3,

209 
	mmc_Æl
:1,

213 
	#MAXMCADDR
 80

	)

214 
	sfxp_cb_mcs
 {

215 
fxp_cb_tx
 *
	m√xt
;

216 
mbuf
 *
	mmb_hód
;

217 vﬁ©ûê
u_öt16_t
 
	mcb_°©us
;

218 vﬁ©ûê
u_öt16_t
 
	mcb_comm™d
;

219 vﬁ©ûê
u_öt32_t
 
	mlök_addr
;

220 vﬁ©ûê
u_öt16_t
 
	mmc_˙t
;

221 vﬁ©ûê
u_öt8_t
 
	mmc_addr
[
MAXMCADDR
][6];

231 #ifde‡
__Æpha__


232 
	#FXP_NTXSEG
 28

	)

234 
	#FXP_NTXSEG
 29

	)

237 
	sfxp_tbd
 {

238 vﬁ©ûê
u_öt32_t
 
	mtb_addr
;

239 vﬁ©ûê
u_öt32_t
 
	mtb_size
;

241 
	sfxp_cb_tx
 {

242 
fxp_cb_tx
 *
	m√xt
;

243 
mbuf
 *
	mmb_hód
;

244 vﬁ©ûê
u_öt16_t
 
	mcb_°©us
;

245 vﬁ©ûê
u_öt16_t
 
	mcb_comm™d
;

246 vﬁ©ûê
u_öt32_t
 
	mlök_addr
;

247 vﬁ©ûê
u_öt32_t
 
	mtbd_¨øy_addr
;

248 vﬁ©ûê
u_öt16_t
 
	mbyã_cou¡
;

249 vﬁ©ûê
u_öt8_t
 
	mtx_thªshﬁd
;

250 vﬁ©ûê
u_öt8_t
 
	mtbd_numbî
;

257 vﬁ©ûê
fxp_tbd
 
	mtbd
[
FXP_NTXSEG
];

265 
	#FXP_CB_STATUS_OK
 0x2000

	)

266 
	#FXP_CB_STATUS_C
 0x8000

	)

268 
	#FXP_CB_COMMAND_NOP
 0x0

	)

269 
	#FXP_CB_COMMAND_IAS
 0x1

	)

270 
	#FXP_CB_COMMAND_CONFIG
 0x2

	)

271 
	#FXP_CB_COMMAND_MCAS
 0x3

	)

272 
	#FXP_CB_COMMAND_XMIT
 0x4

	)

273 
	#FXP_CB_COMMAND_RESRV
 0x5

	)

274 
	#FXP_CB_COMMAND_DUMP
 0x6

	)

275 
	#FXP_CB_COMMAND_DIAG
 0x7

	)

277 
	#FXP_CB_COMMAND_SF
 0x0008

	)

278 
	#FXP_CB_COMMAND_I
 0x2000

	)

279 
	#FXP_CB_COMMAND_S
 0x4000

	)

280 
	#FXP_CB_COMMAND_EL
 0x8000

	)

286 
	sfxp_rÁ
 {

287 vﬁ©ûê
u_öt16_t
 
	mrÁ_°©us
;

288 vﬁ©ûê
u_öt16_t
 
	mrÁ_c⁄åﬁ
;

289 vﬁ©ûê
u_öt8_t
 
	mlök_addr
[4];

290 vﬁ©ûê
u_öt8_t
 
	mrbd_addr
[4];

291 vﬁ©ûê
u_öt16_t
 
	ma˘uÆ_size
;

292 vﬁ©ûê
u_öt16_t
 
	msize
;

294 
	#FXP_RFA_STATUS_RCOL
 0x0001

	)

295 
	#FXP_RFA_STATUS_IAMATCH
 0x0002

	)

296 
	#FXP_RFA_STATUS_S4
 0x0010

	)

297 
	#FXP_RFA_STATUS_TL
 0x0020

	)

298 
	#FXP_RFA_STATUS_FTS
 0x0080

	)

299 
	#FXP_RFA_STATUS_OVERRUN
 0x0100

	)

300 
	#FXP_RFA_STATUS_RNR
 0x0200

	)

301 
	#FXP_RFA_STATUS_ALIGN
 0x0400

	)

302 
	#FXP_RFA_STATUS_CRC
 0x0800

	)

303 
	#FXP_RFA_STATUS_OK
 0x2000

	)

304 
	#FXP_RFA_STATUS_C
 0x8000

	)

305 
	#FXP_RFA_CONTROL_SF
 0x08

	)

306 
	#FXP_RFA_CONTROL_H
 0x10

	)

307 
	#FXP_RFA_CONTROL_S
 0x4000

	)

308 
	#FXP_RFA_CONTROL_EL
 0x8000

	)

313 
	sfxp_°©s
 {

314 vﬁ©ûê
u_öt32_t
 
	mtx_good
;

315 vﬁ©ûê
u_öt32_t
 
	mtx_maxcﬁs
;

316 vﬁ©ûê
u_öt32_t
 
	mtx_œãcﬁs
;

317 vﬁ©ûê
u_öt32_t
 
	mtx_undîruns
;

318 vﬁ©ûê
u_öt32_t
 
	mtx_lo°¸s
;

319 vﬁ©ûê
u_öt32_t
 
	mtx_def„ªd
;

320 vﬁ©ûê
u_öt32_t
 
	mtx_sögÀ_cﬁlisi⁄s
;

321 vﬁ©ûê
u_öt32_t
 
	mtx_mu…ùÀ_cﬁlisi⁄s
;

322 vﬁ©ûê
u_öt32_t
 
	mtx_tŸÆ_cﬁlisi⁄s
;

323 vﬁ©ûê
u_öt32_t
 
	mrx_good
;

324 vﬁ©ûê
u_öt32_t
 
	mrx_¸c_îr‹s
;

325 vﬁ©ûê
u_öt32_t
 
	mrx_Æignmít_îr‹s
;

326 vﬁ©ûê
u_öt32_t
 
	mrx_∫r_îr‹s
;

327 vﬁ©ûê
u_öt32_t
 
	mrx_ovîrun_îr‹s
;

328 vﬁ©ûê
u_öt32_t
 
	mrx_cdt_îr‹s
;

329 vﬁ©ûê
u_öt32_t
 
	mrx_sh‹t‰ames
;

330 vﬁ©ûê
u_öt32_t
 
	mcom∂ëi⁄_°©us
;

332 
	#FXP_STATS_DUMP_COMPLETE
 0xa005

	)

333 
	#FXP_STATS_DR_COMPLETE
 0xa007

	)

338 
	#FXP_EEPROM_EESK
 0x01

	)

339 
	#FXP_EEPROM_EECS
 0x02

	)

340 
	#FXP_EEPROM_EEDI
 0x04

	)

341 
	#FXP_EEPROM_EEDO
 0x08

	)

346 
	#FXP_EEPROM_OPC_ERASE
 0x4

	)

347 
	#FXP_EEPROM_OPC_WRITE
 0x5

	)

348 
	#FXP_EEPROM_OPC_READ
 0x6

	)

353 
	#FXP_MDI_WRITE
 0x1

	)

354 
	#FXP_MDI_READ
 0x2

	)

359 
	#FXP_PHY_DEVICE_MASK
 0x3f00

	)

360 
	#FXP_PHY_SERIAL_ONLY
 0x8000

	)

361 
	#FXP_PHY_NONE
 0

	)

362 
	#FXP_PHY_82553A
 1

	)

363 
	#FXP_PHY_82553C
 2

	)

364 
	#FXP_PHY_82503
 3

	)

365 
	#FXP_PHY_DP83840
 4

	)

366 
	#FXP_PHY_80C240
 5

	)

367 
	#FXP_PHY_80C24
 6

	)

368 
	#FXP_PHY_82555
 7

	)

369 
	#FXP_PHY_DP83840A
 10

	)

370 
	#FXP_PHY_82555B
 11

	)

	@src/libchip/network/if_fxpvar.h

40 
	#FXP_NTXCB
 128

	)

49 
	#FXP_CXINT_THRESH
 120

	)

54 
	#FXP_TXCB_MASK
 (
FXP_NTXCB
 - 1)

	)

61 
	#FXP_NRFABUFS
 64

	)

63 
	#FXP_NRFABUFS
 16

	)

71 
	#FXP_MAX_RX_IDLE
 15

	)

73 #i‡
__FªeBSD_vîsi⁄
 < 500000

74 
	#FXP_LOCK
(
_sc
)

	)

75 
	#FXP_UNLOCK
(
_sc
)

	)

76 
	#mtx_öô
(
a
, 
b
, 
c
)

	)

77 
	#mtx_de°roy
(
a
)

	)

78 
	smtx
 { 
	mdummy
; };

80 
	#FXP_LOCK
(
_sc
Ë
	`mtx_lock
(&(_sc)->
sc_mtx
)

	)

81 
	#FXP_UNLOCK
(
_sc
Ë
	`mtx_u∆ock
(&(_sc)->
sc_mtx
)

	)

84 #ifde‡
__Æpha__


85 #unde‡
vt›hys


86 
	#vt›hys
(
va
Ë
	`Æpha_XXX_dmam≠
((
vm_off£t_t
)(va))

	)

93 
	sfxp_so·c
 {

94 
¨pcom
 
	m¨pcom
;

95 #ifde‡
NOTUSED


96 
ªsour˚
 *
	mmem
;

97 
	mπp
;

98 
	mrgd
;

99 
ªsour˚
 *
	múq
;

101 *
	mih
;

102 
mtx
 
	msc_mtx
;

103 #ifde‡
NOTUSED


104 
bus_•a˚_èg_t
 
	msc_°
;

105 
bus_•a˚_h™dÀ_t
 
	msc_sh
;

107 
	mpci_sig«tuª
;

108 
boﬁ
 
	mpci_ªgs_¨e_io
;

109 
u_öt32_t
 
	mpci_ªgs_ba£
;

110 
πems_id
 
	md´m⁄Tid
;

111 
πems_úq_c⁄√˘_d©a
 
	múqInfo
;

114 
mbuf
 *
	mrÁ_hódm
;

115 
mbuf
 *
	mrÁ_èûm
;

116 
fxp_cb_tx
 *
	mcbl_fú°
;

117 
	mtx_queued
;

118 
	m√ed_mc£tup
;

119 
fxp_cb_tx
 *
	mcbl_œ°
;

120 
fxp_°©s
 *
	mfxp_°©s
;

121 
	mrx_idÀ_£cs
;

122 íum {
	mfxp_timeout_°›≥d
,
	mfxp_timeout_ru¬ög
,
	mfxp_timeout_°›_rq
}

123 
	m°©_ch
;

124 
fxp_cb_tx
 *
	mcbl_ba£
;

125 
fxp_cb_mcs
 *
	mmc•
;

126 #ifde‡
NOTUSED


127 
ifmedü
 
	msc_medü
;

128 
devi˚_t
 
	mmiibus
;

129 
devi˚_t
 
	mdev
;

131 
	mì¥om_size
;

132 
	msu•íded
;

133 
	mcu_ªsume_bug
;

134 
	mchù
;

135 
	mÊags
;

136 
u_öt32_t
 
	mßved_m≠s
[5];

137 
u_öt32_t
 
	mßved_bioßddr
;

138 
u_öt8_t
 
	mßved_öéöe
;

139 
u_öt8_t
 
	mßved_ˇchñnsz
;

140 
u_öt8_t
 
	mßved_œâimî
;

143 
	#FXP_CHIP_82557
 1

	)

145 
	#FXP_FLAG_MWI_ENABLE
 0x0001

	)

146 
	#FXP_FLAG_READ_ALIGN
 0x0002

	)

147 
	#FXP_FLAG_WRITE_ALIGN
 0x0004

	)

148 
	#FXP_FLAG_EXT_TXCB
 0x0008

	)

149 
	#FXP_FLAG_SERIAL_MEDIA
 0x0010

	)

150 
	#FXP_FLAG_LONG_PKT_EN
 0x0020

	)

151 
	#FXP_FLAG_ALL_MCAST
 0x0040

	)

152 
	#FXP_FLAG_CU_RESUME_BUG
 0x0080

	)

156 
	#CSR_READ_1
(
sc
, 
ªg
) \

157 
	`bus_•a˚_ªad_1
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
))

	)

158 
	#CSR_READ_2
(
sc
, 
ªg
) \

159 
	`bus_•a˚_ªad_2
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
))

	)

160 
	#CSR_READ_4
(
sc
, 
ªg
) \

161 
	`bus_•a˚_ªad_4
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
))

	)

162 
	#CSR_WRITE_1
(
sc
, 
ªg
, 
vÆ
) \

163 
	`bus_•a˚_wrôe_1
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
), (
vÆ
))

	)

164 
	#CSR_WRITE_2
(
sc
, 
ªg
, 
vÆ
) \

165 
	`bus_•a˚_wrôe_2
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
), (
vÆ
))

	)

166 
	#CSR_WRITE_4
(
sc
, 
ªg
, 
vÆ
) \

167 
	`bus_•a˚_wrôe_4
((
sc
)->
sc_°
, (sc)->
sc_sh
, (
ªg
), (
vÆ
))

	)

169 
	#CSR_READ_1
(
sc
, 
ªg
Ë
	`fxp_c§_ªad_1
(sc,ªg)

	)

170 
	#CSR_READ_2
(
sc
, 
ªg
Ë
	`fxp_c§_ªad_2
(sc,ªg)

	)

171 
	#CSR_READ_4
(
sc
, 
ªg
Ë
	`fxp_c§_ªad_4
(sc,ªg)

	)

173 
	#CSR_WRITE_1
(
sc
, 
ªg
, 
vÆ
) \

175 i‡((
sc
)->
pci_ªgs_¨e_io
) \

176 
	`ouç‹t_byã
((
sc
)->
pci_ªgs_ba£
+(
ªg
),
vÆ
); \

178 *((
u_öt8_t
*)((
sc
)->
pci_ªgs_ba£
)+(
ªg
)Ë
vÆ
; \

179 }0)

	)

181 
	#CSR_WRITE_2
(
sc
, 
ªg
, 
vÆ
) \

183 i‡((
sc
)->
pci_ªgs_¨e_io
) \

184 
	`ouç‹t_w‹d
((
sc
)->
pci_ªgs_ba£
+(
ªg
),
vÆ
); \

186 *((
u_öt16_t
*)((
u_öt8_t
*)((
sc
)->
pci_ªgs_ba£
)+(
ªg
))Ë
vÆ
; \

187 }0)

	)

189 
	#CSR_WRITE_4
(
sc
, 
ªg
, 
vÆ
) \

191 i‡((
sc
)->
pci_ªgs_¨e_io
) \

192 
	`ouç‹t_l⁄g
((
sc
)->
pci_ªgs_ba£
+(
ªg
),
vÆ
); \

194 *((
u_öt32_t
*)((
u_öt8_t
*)((
sc
)->
pci_ªgs_ba£
)+(
ªg
))Ë
vÆ
; \

195 }0)

	)

199 
	#sc_if
 
¨pcom
.
ac_if


	)

201 
	#FXP_UNIT
(
_sc
Ë(_sc)->
¨pcom
.
ac_if
.
if_unô


	)

	@src/libchip/network/open_eth.c

22 #i‡
deföed
(
__i386__
Ë|| deföed(
__¨m__
Ë|| deföed(
__PPC__
)

23 
	#OPENETH_NOT_SUPPORTED


	)

26 #i‡!
deföed
(
OPENETH_NOT_SUPPORTED
)

27 
	~<b•.h
>

28 
	~<πems.h
>

30 
	~<b•.h
>

32 
	~<öây≥s.h
>

33 
	~<°dlib.h
>

34 
	~<°dio.h
>

35 
	~<°d¨g.h
>

36 
	~<î∫o.h
>

38 
	~<πems/îr‹.h
>

39 
	~<πems/πems_bsd√t.h
>

40 
	~<libchù/›í_ëh.h
>

42 
	~<sys/∑øm.h
>

43 
	~<sys/mbuf.h
>

45 
	~<sys/sockë.h
>

46 
	~<sys/sockio.h
>

47 
	~<√t/if.h
>

48 
	~<√töë/ö.h
>

49 
	~<√töë/if_ëhî.h
>

51 #ifde‡
mÆloc


52 #unde‡
mÆloc


54 #ifde‡
‰ì


55 #unde‡
‰ì


58 
πems_i§_íåy
 
£t_ve˘‹
–πems_i§_íåy, 
πems_ve˘‹_numbî
, );

64 #ifde‡
CPU_U32_FIX


65 
ùÆign
(
mbuf
 *
m
);

69 
	sMDTX


71 *
	mbuf
;

74 
	sMDRX


76 
mbuf
 *
	mm
;

82 
	#NOCDRIVER
 1

	)

87 
	#RBUF_SIZE
 1536

	)

89 
	#ET_MINLEN
 64

	)

95 
	#INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

101 
	#START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

104 
	#OPEN_ETH_TX_WAIT_EVENT
 
RTEMS_EVENT_3


	)

111 #i‡(
MCLBYTES
 < 
RBUF_SIZE
)

118 
	s›í_ëh_so·c


121 
¨pcom
 
	m¨pcom
;

123 
€th_ªgs
 *
	mªgs
;

125 
	mac˚±Brﬂdˇ°
;

126 
πems_id
 
	mrxD´m⁄Tid
;

127 
πems_id
 
	mtxD´m⁄Tid
;

129 
	mtx_±r
;

130 
	mrx_±r
;

131 
	mtxbufs
;

132 
	mrxbufs
;

133 
MDTX
 *
	mtxdesc
;

134 
MDRX
 *
	mrxdesc
;

135 
πems_ve˘‹_numbî
 
	mve˘‹
;

136 
	mí100MHz
;

141 
	mrxI¡îru±s
;

142 
	mrxPackës
;

143 
	mrxLígthEº‹
;

144 
	mrxN⁄O˘ë
;

145 
	mrxBadCRC
;

146 
	mrxOvîrun
;

147 
	mrxMiss
;

148 
	mrxCﬁlisi⁄
;

150 
	mtxI¡îru±s
;

151 
	mtxDe„ºed
;

152 
	mtxHóπbót
;

153 
	mtxL©eCﬁlisi⁄
;

154 
	mtxRëryLimô
;

155 
	mtxUndîrun
;

156 
	mtxLo°C¨rõr
;

157 
	mtxRawWaô
;

160 
›í_ëh_so·c
 
	goc
;

164 
πems_i§


165 
	$›í_ëh_öãºu±_h™dÀr
 (
πems_ve˘‹_numbî
 
v
)

167 
uöt32_t
 
°©us
;

171 
°©us
 = 
oc
.
ªgs
->
öt_§c
;

172 
oc
.
ªgs
->
öt_§c
 = 
°©us
;

176 i‡(
°©us
 & (
OETH_INT_RXF
 | 
OETH_INT_RXE
))

178 
oc
.
rxI¡îru±s
++;

179 
	`πems_bsd√t_evít_£nd
 (
oc
.
rxD´m⁄Tid
, 
INTERRUPT_EVENT
);

181 #ifde‡
OETH_SUSPEND_NOTXBUF


182 i‡(
°©us
 & (
OETH_INT_MASK_TXB
 | 
OETH_INT_MASK_TXC
 | 
OETH_INT_MASK_TXE
))

184 
oc
.
txI¡îru±s
++;

185 
	`πems_bsd√t_evít_£nd
 (
oc
.
txD´m⁄Tid
, 
OPEN_ETH_TX_WAIT_EVENT
);

193 
	}
}

195 
uöt32_t
 
	$ªad_mii
(
uöt32_t
 
addr
)

197 
oc
.
ªgs
->
mii°©us
 & 
OETH_MIISTATUS_BUSY
) {}

198 
oc
.
ªgs
->
miüddªss
 = 
addr
 << 8;

199 
oc
.
ªgs
->
miicomm™d
 = 
OETH_MIICOMMAND_RSTAT
;

200 
oc
.
ªgs
->
mii°©us
 & 
OETH_MIISTATUS_BUSY
) {}

201 i‡(!(
oc
.
ªgs
->
mii°©us
 & 
OETH_MIISTATUS_NVALID
))

202 (
oc
.
ªgs
->
miúx_d©a
);

204 
	`¥ötf
("open_eth: failedÅoÑead mii\n");

207 
	}
}

209 
	$wrôe_mii
(
uöt32_t
 
addr
, uöt32_à
d©a
)

211 
oc
.
ªgs
->
mii°©us
 & 
OETH_MIISTATUS_BUSY
) {}

212 
oc
.
ªgs
->
miüddªss
 = 
addr
 << 8;

213 
oc
.
ªgs
->
miôx_d©a
 = 
d©a
;

214 
oc
.
ªgs
->
miicomm™d
 = 
OETH_MIICOMMAND_WCTRLDATA
;

215 
oc
.
ªgs
->
mii°©us
 & 
OETH_MIISTATUS_BUSY
) {}

216 
	}
}

221 
	$›í_ëh_öôülize_h¨dw¨e
 (
›í_ëh_so·c
 *
sc
)

223 
mbuf
 *
m
;

224 
i
;

225 
mii_¸
 = 0;

227 
€th_ªgs
 *
ªgs
;

229 
ªgs
 = 
sc
->regs;

233 
ªgs
->
˘æmodî
 = 0;

234 
ªgs
->
modî
 = 
OETH_MODER_RST
;

235 
ªgs
->
modî
 = 0;

238 
mii_¸
 = 0x3300;

239 i‡(!
sc
->
í100MHz
Ë
mii_¸
 = 0;

240 
	`wrôe_mii
(0, 
mii_¸
 | 0x8000);

241 
	`ªad_mii
(0) & 0x8000) {}

242 i‡(!
sc
->
í100MHz
Ë
	`wrôe_mii
(0, 0);

243 
mii_¸
 = 
	`ªad_mii
(0);

244 
	`¥ötf
("›í_ëh: drivîáâached, PHY c⁄fig : 0x%04" 
PRIx32
 "\n", 
	`ªad_mii
(0));

246 #ifde‡
OPEN_ETH_DEBUG


247 
	`¥ötf
("mii_¸: %04x\n", 
mii_¸
);

248 
i
=0;i<21;i++)

249 
	`¥ötf
("mii_ªg %2d : 0x%04x\n", 
i
, 
	`ªad_mii
(i));

254 
ªgs
->
tx_bd_num
 = 
sc
->
txbufs
;

258 
sc
->
rx_±r
 = 0;

259 
sc
->
tx_±r
 = 0;

262 
ªgs
->
∑ckë_Àn
 = 0x00400600;

265 
ªgs
->
ùgt
 = 0x00000015;

268 
ªgs
->
ùgr1
 = 0x0000000c;

271 
ªgs
->
ùgr2
 = 0x00000012;

274 
ªgs
->
cﬁlc⁄f
 = 0x000f003f;

278 
sc
->
txdesc
 = 
	`ˇŒoc
(sc->
txbufs
, (*sc->txdesc));

279 
i
 = 0; i < 
sc
->
txbufs
; i++)

281 
sc
->
ªgs
->
xd
[
i
].
Àn_°©us
 = 
OETH_TX_BD_PAD
 | 
OETH_TX_BD_CRC
;

282 
sc
->
txdesc
[
i
].
buf
 = 
	`ˇŒoc
(1, 
OETH_MAXBUF_LEN
);

283 #ifde‡
OPEN_ETH_DEBUG


284 
	`¥ötf
("TXBUF: %08x\n", (Ë
sc
->
txdesc
[
i
].
buf
);

287 
sc
->
ªgs
->
xd
[sc->
txbufs
 - 1].
Àn_°©us
 |
OETH_TX_BD_WRAP
;

291 
sc
->
rxdesc
 = 
	`ˇŒoc
(sc->
rxbufs
, (*sc->rxdesc));

292 
i
 = 0; i < 
sc
->
rxbufs
; i++)

295 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

296 
	`MCLGET
 (
m
, 
M_WAIT
);

297 
m
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

298 
sc
->
rxdesc
[
i
].
m
 = m;

299 
sc
->
ªgs
->
xd
[
i
 + sc->
txbufs
].
addr
 = 
	`mtod
 (
m
, 
uöt32_t
*);

300 
sc
->
ªgs
->
xd
[
i
 + sc->
txbufs
].
Àn_°©us
 =

301 
OETH_RX_BD_EMPTY
 | 
OETH_RX_BD_IRQ
;

302 #ifde‡
OPEN_ETH_DEBUG


303 
	`¥ötf
("RXBUF: %08x\n", (Ë
sc
->
rxdesc
[
i
].
m
);

306 
sc
->
ªgs
->
xd
[sc->
rxbufs
 + sc->
txbufs
 - 1].
Àn_°©us
 |
OETH_RX_BD_WRAP
;

311 
ªgs
->
mac_addr1
 = 
sc
->
¨pcom
.
ac_íaddr
[0] << 8 | sc->arpcom.ac_enaddr[1];

313 
uöt32_t
 
mac_addr0
;

314 
mac_addr0
 = 
sc
->
¨pcom
.
ac_íaddr
[2];

315 
mac_addr0
 <<= 8;

316 
mac_addr0
 |
sc
->
¨pcom
.
ac_íaddr
[3];

317 
mac_addr0
 <<= 8;

318 
mac_addr0
 |
sc
->
¨pcom
.
ac_íaddr
[4];

319 
mac_addr0
 <<= 8;

320 
mac_addr0
 |
sc
->
¨pcom
.
ac_íaddr
[5];

322 
ªgs
->
mac_addr0
 = mac_addr0;

325 
	`£t_ve˘‹
 (
›í_ëh_öãºu±_h™dÀr
, 
sc
->
ve˘‹
, 1);

329 
ªgs
->
öt_§c
 = 0xffffffff;

333 
ªgs
->
modî
 = 
OETH_MODER_PAD
 | 
OETH_MODER_CRCEN
 | ((
mii_¸
 & 0x100) << 2);

337 
ªgs
->
öt_mask
 = 
OETH_INT_MASK_RXF
 | 
OETH_INT_MASK_RXE
 | 
OETH_INT_MASK_RXC
;

339 #ifde‡
OETH_SUSPEND_NOTXBUF


340 
ªgs
->
öt_mask
 |
OETH_INT_MASK_TXB
 | 
OETH_INT_MASK_TXC
 | 
OETH_INT_MASK_TXE
 | 
OETH_INT_BUSY
;*/

341 
sc
->
ªgs
->
xd
[(sc->
txbufs
 - 1)/2].
Àn_°©us
 |
OETH_TX_BD_IRQ
;

342 
sc
->
ªgs
->
xd
[sc->
txbufs
 - 1].
Àn_°©us
 |
OETH_TX_BD_IRQ
;

345 
ªgs
->
modî
 |
OETH_MODER_RXEN
 | 
OETH_MODER_TXEN
;

346 
	}
}

349 
	$›í_ëh_rxD´m⁄
 (*
¨g
)

351 
ëhî_hódî
 *
eh
;

352 
›í_ëh_so·c
 *
dp
 = (›í_ëh_so·¯*Ë&
oc
;

353 
i‚ë
 *
iÂ
 = &
dp
->
¨pcom
.
ac_if
;

354 
mbuf
 *
m
;

355 
Àn
;

356 
uöt32_t
 
Àn_°©us
;

357 
bad
;

358 
πems_evít_£t
 
evíts
;

364 
	`πems_bsd√t_evít_ª˚ive
 (
INTERRUPT_EVENT
,

365 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

366 
RTEMS_NO_TIMEOUT
, &
evíts
);

367 #ifde‡
OPEN_ETH_DEBUG


368 
	`¥ötf
 ("r\n");

372 ((
Àn_°©us
 =

373 
dp
->
ªgs
->
xd
[dp->
rx_±r
+dp->
txbufs
].
Àn_°©us
Ë& 
OETH_RX_BD_EMPTY
))

375 
bad
 = 0;

376 i‡(
Àn_°©us
 & (
OETH_RX_BD_TOOLONG
 | 
OETH_RX_BD_SHORT
))

378 
dp
->
rxLígthEº‹
++;

379 
bad
 = 1;

381 i‡(
Àn_°©us
 & 
OETH_RX_BD_DRIBBLE
)

383 
dp
->
rxN⁄O˘ë
++;

384 
bad
 = 1;

386 i‡(
Àn_°©us
 & 
OETH_RX_BD_CRCERR
)

388 
dp
->
rxBadCRC
++;

389 
bad
 = 1;

391 i‡(
Àn_°©us
 & 
OETH_RX_BD_OVERRUN
)

393 
dp
->
rxOvîrun
++;

394 
bad
 = 1;

396 i‡(
Àn_°©us
 & 
OETH_RX_BD_MISS
)

398 
dp
->
rxMiss
++;

399 
bad
 = 1;

401 i‡(
Àn_°©us
 & 
OETH_RX_BD_LATECOL
)

403 
dp
->
rxCﬁlisi⁄
++;

404 
bad
 = 1;

407 i‡(!
bad
)

410 
Àn
 = 
Àn_°©us
 >> 16;

411 
m
 = (
mbuf
 *Ë(
dp
->
rxdesc
[dp->
rx_±r
].m);

412 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 =

413 
Àn
 -  (
ëhî_hódî
);

414 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

415 
m
->
m_d©a
 + (
ëhî_hódî
);

416 #ifde‡
CPU_U32_FIX


417 
	`ùÆign
(
m
);

420 
	`ëhî_öput
 (
iÂ
, 
eh
, 
m
);

423 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

424 
	`MCLGET
 (
m
, 
M_WAIT
);

425 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

426 
dp
->
rxdesc
[dp->
rx_±r
].
m
 = m;

427 
dp
->
ªgs
->
xd
[dp->
rx_±r
 + dp->
txbufs
].
addr
 =

428 (
uöt32_t
*Ë
	`mtod
 (
m
, *);

429 
dp
->
rxPackës
++;

432 
dp
->
ªgs
->
xd
[dp->
rx_±r
+dp->
txbufs
].
Àn_°©us
 =

433 (
dp
->
ªgs
->
xd
[dp->
rx_±r
+dp->
txbufs
].
Àn_°©us
 &

434 ~
OETH_TX_BD_STATS
Ë| 
OETH_TX_BD_READY
;

435 
dp
->
rx_±r
 = (dp->rx_±∏+ 1Ë% dp->
rxbufs
;

438 
	}
}

440 
	göside
 = 0;

442 
	$£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

444 
›í_ëh_so·c
 *
dp
 = 
iÂ
->
if_so·c
;

445 *
ãmp
;

446 
mbuf
 *
n
;

447 
uöt32_t
 
Àn
, 
Àn_°©us
;

449 i‡(
öside
Ë
	`¥ötf
 ("error: sendpacketÑe-entered!!\n");

450 
öside
 = 1;

454 
n
 = 
m
;

456 
dp
->
ªgs
->
xd
[dp->
tx_±r
].
Àn_°©us
 & 
OETH_TX_BD_READY
)

458 #ifde‡
OETH_SUSPEND_NOTXBUF


459 
πems_evít_£t
 
evíts
;

460 
	`πems_bsd√t_evít_ª˚ive
 (
OPEN_ETH_TX_WAIT_EVENT
,

461 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

462 
	`RTEMS_MILLISECONDS_TO_TICKS
(500), &
evíts
);

466 
Àn
 = 0;

467 
ãmp
 = (*Ë
dp
->
txdesc
[dp->
tx_±r
].
buf
;

468 
dp
->
ªgs
->
xd
[dp->
tx_±r
].
addr
 = (
uöt32_t
*Ë
ãmp
;

470 #ifde‡
OPEN_ETH_DEBUG


471 
	`¥ötf
("TXD: 0x%08x\n", (Ë
m
->
m_d©a
);

475 #ifde‡
OPEN_ETH_DEBUG


476 
i
;

477 
	`¥ötf
("MBUF: 0x%08x : ", (Ë
m
->
m_d©a
);

478 
i
=0;i<
m
->
m_Àn
;i++)

479 
	`¥ötf
("%x%x", (
m
->
m_d©a
[
i
] >> 4) & 0x0ff, m->m_data[i] & 0x0ff);

480 
	`¥ötf
("\n");

482 
Àn
 +
m
->
m_Àn
;

483 i‡(
Àn
 <
RBUF_SIZE
)

484 
	`mem˝y
 ((*Ë
ãmp
, (*Ë
m
->
m_d©a
, m->
m_Àn
);

485 
ãmp
 +
m
->
m_Àn
;

486 i‡((
m
 = m->
m_√xt
Ë=
NULL
)

490 
	`m_‰ìm
 (
n
);

494 i‡(
Àn
 <
RBUF_SIZE
) {

497 
Àn_°©us
 = 
dp
->
ªgs
->
xd
[dp->
tx_±r
].Àn_°©u†& ~
OETH_TX_BD_STATS
;

500 i‡(
Àn
 < 
ET_MINLEN
) {

501 
Àn_°©us
 |
OETH_TX_BD_PAD
;

502 
Àn
 = 
ET_MINLEN
;

505 
Àn_°©us
 &~
OETH_TX_BD_PAD
;

508 
Àn_°©us
 &= 0x0000ffff;

509 
Àn_°©us
 |(
Àn
 << 16Ë| (
OETH_TX_BD_READY
 | 
OETH_TX_BD_CRC
);

510 
dp
->
ªgs
->
xd
[dp->
tx_±r
].
Àn_°©us
 =Üen_status;

511 
dp
->
tx_±r
 = (dp->tx_±∏+ 1Ë% dp->
txbufs
;

514 
öside
 = 0;

515 
	}
}

521 
	$›í_ëh_txD´m⁄
 (*
¨g
)

523 
›í_ëh_so·c
 *
sc
 = (›í_ëh_so·¯*Ë
¨g
;

524 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

525 
mbuf
 *
m
;

526 
πems_evít_£t
 
evíts
;

534 
	`πems_bsd√t_evít_ª˚ive
 (
START_TRANSMIT_EVENT
,

535 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

536 
RTEMS_NO_TIMEOUT
, &
evíts
);

537 #ifde‡
OPEN_ETH_DEBUG


538 
	`¥ötf
 ("t\n");

549 
	`IF_DEQUEUE
 (&
iÂ
->
if_¢d
, 
m
);

550 i‡(!
m
)

552 
	`£nd∑ckë
 (
iÂ
, 
m
);

554 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

556 
	}
}

560 
	$›í_ëh_°¨t
 (
i‚ë
 *
iÂ
)

562 
›í_ëh_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

564 
	`πems_bsd√t_evít_£nd
 (
sc
->
txD´m⁄Tid
, 
START_TRANSMIT_EVENT
);

565 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

566 
	}
}

572 
	$›í_ëh_öô
 (*
¨g
)

574 
›í_ëh_so·c
 *
sc
 = 
¨g
;

575 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

577 i‡(
sc
->
txD´m⁄Tid
 == 0)

583 
	`›í_ëh_öôülize_h¨dw¨e
 (
sc
);

588 
sc
->
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("DCrx", 4096,

589 
›í_ëh_rxD´m⁄
, 
sc
);

590 
sc
->
txD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("DCtx", 4096,

591 
›í_ëh_txD´m⁄
, 
sc
);

597 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

599 
	}
}

605 
	$›í_ëh_°›
 (
›í_ëh_so·c
 *
sc
)

607 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

609 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

611 
sc
->
ªgs
->
modî
 = 0;

612 
sc
->
ªgs
->
modî
 = 
OETH_MODER_RST
;

613 
sc
->
ªgs
->
modî
 = 0;

614 
	}
}

621 
	$›í_ëh_°©s
 (
›í_ëh_so·c
 *
sc
)

623 
	`¥ötf
 (" Rx Packës:%-8lu", 
sc
->
rxPackës
);

624 
	`¥ötf
 (" Rx I¡îru±s:%-8lu", 
sc
->
rxI¡îru±s
);

625 
	`¥ötf
 (" Lígth:%-8lu", 
sc
->
rxLígthEº‹
);

626 
	`¥ötf
 (" N⁄-o˘ë:%-8lu\n", 
sc
->
rxN⁄O˘ë
);

627 
	`¥ötf
 (" Bad CRC:%-8lu", 
sc
->
rxBadCRC
);

628 
	`¥ötf
 (" Ovîrun:%-8lu", 
sc
->
rxOvîrun
);

629 
	`¥ötf
 (" Miss:%-8lu", 
sc
->
rxMiss
);

630 
	`¥ötf
 (" Cﬁlisi⁄:%-8lu\n", 
sc
->
rxCﬁlisi⁄
);

632 
	`¥ötf
 (" Tx I¡îru±s:%-8lu", 
sc
->
txI¡îru±s
);

633 
	`¥ötf
 (" De„ºed:%-8lu", 
sc
->
txDe„ºed
);

634 
	`¥ötf
 (" Mis£d Hórbót:%-8lu\n", 
sc
->
txHóπbót
);

635 
	`¥ötf
 (" NÿC¨rõr:%-8lu", 
sc
->
txLo°C¨rõr
);

636 
	`¥ötf
 ("Rëønsmô Limô:%-8lu", 
sc
->
txRëryLimô
);

637 
	`¥ötf
 (" L©êCﬁlisi⁄:%-8lu\n", 
sc
->
txL©eCﬁlisi⁄
);

638 
	`¥ötf
 (" Undîrun:%-8lu", 
sc
->
txUndîrun
);

639 
	`¥ötf
 (" Raw ouçuàwaô:%-8lu\n", 
sc
->
txRawWaô
);

640 
	}
}

646 
	$›í_ëh_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

648 
›í_ëh_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

649 
îr‹
 = 0;

651 
comm™d
)

653 
SIOCGIFADDR
:

654 
SIOCSIFADDR
:

655 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

658 
SIOCSIFFLAGS
:

659 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
))

661 
IFF_RUNNING
:

662 
	`›í_ëh_°›
 (
sc
);

665 
IFF_UP
:

666 
	`›í_ëh_öô
 (
sc
);

669 
IFF_UP
 | 
IFF_RUNNING
:

670 
	`›í_ëh_°›
 (
sc
);

671 
	`›í_ëh_öô
 (
sc
);

679 
SIO_RTEMS_SHOW_STATS
:

680 
	`›í_ëh_°©s
 (
sc
);

687 
îr‹
 = 
EINVAL
;

691  
îr‹
;

692 
	}
}

698 
	$πems_›í_ëh_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

699 
›í_ëh_c⁄figuøti⁄_t
 * 
chù
)

701 
›í_ëh_so·c
 *
sc
;

702 
i‚ë
 *
iÂ
;

703 
mtu
;

704 
unôNumbî
;

705 *
unôName
;

708 i‡((
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
unôName
)) < 0)

711 
sc
 = &
oc
;

712 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

713 
	`mem£t
 (
sc
, 0,  (*sc));

715 i‡(
c⁄fig
->
h¨dw¨e_addªss
)

717 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
,

718 
ETHER_ADDR_LEN
);

722 
	`mem£t
 (
sc
->
¨pcom
.
ac_íaddr
, 0x08, 
ETHER_ADDR_LEN
);

725 i‡(
c⁄fig
->
mtu
)

726 
mtu
 = 
c⁄fig
->mtu;

728 
mtu
 = 
ETHERMTU
;

730 
sc
->
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

731 
sc
->
ªgs
 = 
chù
->
ba£_addªss
;

732 
sc
->
ve˘‹
 = 
chù
->vector;

733 
sc
->
txbufs
 = 
chù
->
txd_cou¡
;

734 
sc
->
rxbufs
 = 
chù
->
rxd_cou¡
;

735 
sc
->
í100MHz
 = 
chù
->en100MHz;

741 
iÂ
->
if_so·c
 = 
sc
;

742 
iÂ
->
if_unô
 = 
unôNumbî
;

743 
iÂ
->
if_«me
 = 
unôName
;

744 
iÂ
->
if_mtu
 = 
mtu
;

745 
iÂ
->
if_öô
 = 
›í_ëh_öô
;

746 
iÂ
->
if_io˘l
 = 
›í_ëh_io˘l
;

747 
iÂ
->
if_°¨t
 = 
›í_ëh_°¨t
;

748 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

749 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

750 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

751 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

756 
	`if_©èch
 (
iÂ
);

757 
	`ëhî_iÁâach
 (
iÂ
);

759 #ifde‡
OPEN_ETH_DEBUG


760 
	`¥ötf
 ("OPEN_ETH : driver has beenáttached\n");

763 
	}
};

	@src/libchip/network/open_eth.h

4 #i‚de‡
_OPEN_ETH_


5 
	#_OPEN_ETH_


	)

11 *
	mba£_addªss
;

12 
uöt32_t
 
	mve˘‹
;

13 
uöt32_t
 
	mtxd_cou¡
;

14 
uöt32_t
 
	mrxd_cou¡
;

15 
uöt32_t
 
	mí100MHz
;

16 } 
	t›í_ëh_c⁄figuøti⁄_t
;

21 
	s_€th_rxtxdesc
 {

22 vﬁ©ûê
uöt32_t
 
	mÀn_°©us
;

23 vﬁ©ûê
uöt32_t
 *
	maddr
;

24 } 
	t€th_rxtxdesc
;

28 
	s_€th_ªgs
 {

29 vﬁ©ûê
uöt32_t
 
	mmodî
;

30 vﬁ©ûê
uöt32_t
 
	möt_§c
;

31 vﬁ©ûê
uöt32_t
 
	möt_mask
;

32 vﬁ©ûê
uöt32_t
 
	mùgt
;

33 vﬁ©ûê
uöt32_t
 
	mùgr1
;

34 vﬁ©ûê
uöt32_t
 
	mùgr2
;

35 vﬁ©ûê
uöt32_t
 
	m∑ckë_Àn
;

36 vﬁ©ûê
uöt32_t
 
	mcﬁlc⁄f
;

37 vﬁ©ûê
uöt32_t
 
	mtx_bd_num
;

38 vﬁ©ûê
uöt32_t
 
	m˘æmodî
;

39 vﬁ©ûê
uöt32_t
 
	mmiimodî
;

40 vﬁ©ûê
uöt32_t
 
	mmiicomm™d
;

41 vﬁ©ûê
uöt32_t
 
	mmiüddªss
;

42 vﬁ©ûê
uöt32_t
 
	mmiôx_d©a
;

43 vﬁ©ûê
uöt32_t
 
	mmiúx_d©a
;

44 vﬁ©ûê
uöt32_t
 
	mmii°©us
;

45 vﬁ©ûê
uöt32_t
 
	mmac_addr0
;

46 vﬁ©ûê
uöt32_t
 
	mmac_addr1
;

47 vﬁ©ûê
uöt32_t
 
	mhash_addr0
;

48 vﬁ©ûê
uöt32_t
 
	mhash_addr1
;

49 vﬁ©ûê
uöt32_t
 
	mtx˘æ
;

50 
uöt32_t
 
	mem±y
[235];

51 
€th_rxtxdesc
 
	mxd
[128];

52 } 
	t€th_ªgs
;

54 
	#OETH_TOTAL_BD
 128

	)

55 
	#OETH_MAXBUF_LEN
 0x610

	)

58 
	#OETH_TX_BD_READY
 0x8000

	)

59 
	#OETH_TX_BD_IRQ
 0x4000

	)

60 
	#OETH_TX_BD_WRAP
 0x2000

	)

61 
	#OETH_TX_BD_PAD
 0x1000

	)

62 
	#OETH_TX_BD_CRC
 0x0800

	)

64 
	#OETH_TX_BD_UNDERRUN
 0x0100

	)

65 
	#OETH_TX_BD_RETRY
 0x00F0

	)

66 
	#OETH_TX_BD_RETLIM
 0x0008

	)

67 
	#OETH_TX_BD_LATECOL
 0x0004

	)

68 
	#OETH_TX_BD_DEFER
 0x0002

	)

69 
	#OETH_TX_BD_CARRIER
 0x0001

	)

70 
	#OETH_TX_BD_STATS
 (
OETH_TX_BD_UNDERRUN
 | \

71 
OETH_TX_BD_RETRY
 | \

72 
OETH_TX_BD_RETLIM
 | \

73 
OETH_TX_BD_LATECOL
 | \

74 
OETH_TX_BD_DEFER
 | \

75 
OETH_TX_BD_CARRIER
)

	)

78 
	#OETH_RX_BD_EMPTY
 0x8000

	)

79 
	#OETH_RX_BD_IRQ
 0x4000

	)

80 
	#OETH_RX_BD_WRAP
 0x2000

	)

82 
	#OETH_RX_BD_MISS
 0x0080

	)

83 
	#OETH_RX_BD_OVERRUN
 0x0040

	)

84 
	#OETH_RX_BD_INVSIMB
 0x0020

	)

85 
	#OETH_RX_BD_DRIBBLE
 0x0010

	)

86 
	#OETH_RX_BD_TOOLONG
 0x0008

	)

87 
	#OETH_RX_BD_SHORT
 0x0004

	)

88 
	#OETH_RX_BD_CRCERR
 0x0002

	)

89 
	#OETH_RX_BD_LATECOL
 0x0001

	)

90 
	#OETH_RX_BD_STATS
 (
OETH_RX_BD_MISS
 | \

91 
OETH_RX_BD_OVERRUN
 | \

92 
OETH_RX_BD_INVSIMB
 | \

93 
OETH_RX_BD_DRIBBLE
 | \

94 
OETH_RX_BD_TOOLONG
 | \

95 
OETH_RX_BD_SHORT
 | \

96 
OETH_RX_BD_CRCERR
 | \

97 
OETH_RX_BD_LATECOL
)

	)

100 
	#OETH_MODER_RXEN
 0x00000001

	)

101 
	#OETH_MODER_TXEN
 0x00000002

	)

102 
	#OETH_MODER_NOPRE
 0x00000004

	)

103 
	#OETH_MODER_BRO
 0x00000008

	)

104 
	#OETH_MODER_IAM
 0x00000010

	)

105 
	#OETH_MODER_PRO
 0x00000020

	)

106 
	#OETH_MODER_IFG
 0x00000040

	)

107 
	#OETH_MODER_LOOPBCK
 0x00000080

	)

108 
	#OETH_MODER_NOBCKOF
 0x00000100

	)

109 
	#OETH_MODER_EXDFREN
 0x00000200

	)

110 
	#OETH_MODER_FULLD
 0x00000400

	)

111 
	#OETH_MODER_RST
 0x00000800

	)

112 
	#OETH_MODER_DLYCRCEN
 0x00001000

	)

113 
	#OETH_MODER_CRCEN
 0x00002000

	)

114 
	#OETH_MODER_HUGEN
 0x00004000

	)

115 
	#OETH_MODER_PAD
 0x00008000

	)

116 
	#OETH_MODER_RECSMALL
 0x00010000

	)

119 
	#OETH_INT_TXB
 0x00000001

	)

120 
	#OETH_INT_TXE
 0x00000002

	)

121 
	#OETH_INT_RXF
 0x00000004

	)

122 
	#OETH_INT_RXE
 0x00000008

	)

123 
	#OETH_INT_BUSY
 0x00000010

	)

124 
	#OETH_INT_TXC
 0x00000020

	)

125 
	#OETH_INT_RXC
 0x00000040

	)

128 
	#OETH_INT_MASK_TXB
 0x00000001

	)

129 
	#OETH_INT_MASK_TXE
 0x00000002

	)

130 
	#OETH_INT_MASK_RXF
 0x00000004

	)

131 
	#OETH_INT_MASK_RXE
 0x00000008

	)

132 
	#OETH_INT_MASK_BUSY
 0x00000010

	)

133 
	#OETH_INT_MASK_TXC
 0x00000020

	)

134 
	#OETH_INT_MASK_RXC
 0x00000040

	)

137 
	#OETH_CTRLMODER_PASSALL
 0x00000001

	)

138 
	#OETH_CTRLMODER_RXFLOW
 0x00000002

	)

139 
	#OETH_CTRLMODER_TXFLOW
 0x00000004

	)

142 
	#OETH_MIIMODER_CLKDIV
 0x000000FF

	)

143 
	#OETH_MIIMODER_NOPRE
 0x00000100

	)

144 
	#OETH_MIIMODER_RST
 0x00000200

	)

147 
	#OETH_MIICOMMAND_SCANSTAT
 0x00000001

	)

148 
	#OETH_MIICOMMAND_RSTAT
 0x00000002

	)

149 
	#OETH_MIICOMMAND_WCTRLDATA
 0x00000004

	)

152 
	#OETH_MIIADDRESS_FIAD
 0x0000001F

	)

153 
	#OETH_MIIADDRESS_RGAD
 0x00001F00

	)

156 
	#OETH_MIISTATUS_LINKFAIL
 0x00000001

	)

157 
	#OETH_MIISTATUS_BUSY
 0x00000002

	)

158 
	#OETH_MIISTATUS_NVALID
 0x00000004

	)

162 
πems_›í_ëh_drivî_©èch
 (

163 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

164 
›í_ëh_c⁄figuøti⁄_t
 *
chù


	@src/libchip/network/smc91111.c

1 
	~<πems.h
>

2 
	~<î∫o.h
>

4 
	~<b•.h
>

14 #i‡
deföed
(
HAS_SMC91111
)

15 
	#SMC91111_SUPPORTED


	)

18 #i‡
deföed
(
HAS_SMC91111
)

20 
	~<°dlib.h
>

21 
	~<°dio.h
>

22 
	~<°d¨g.h
>

23 
	~<πems/îr‹.h
>

24 
	~<πems/πems_bsd√t.h
>

25 
	~<πems/úq-exãnsi⁄.h
>

27 
	~<sys/∑øm.h
>

28 
	~<sys/mbuf.h
>

30 
	~<sys/sockë.h
>

31 
	~<sys/sockio.h
>

32 
	~<√t/if.h
>

33 
	~<√töë/ö.h
>

34 
	~<√töë/if_ëhî.h
>

36 
	#SMC91111_INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

37 
	#SMC91111_START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

38 
	#SMC91111_TX_WAIT_EVENT
 
RTEMS_EVENT_3


	)

52 
	#DEBUG
 (0)

	)

55 
	~"smc91111c⁄fig.h
"

56 
	~<libchù/smc91111.h
>

58 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


59 
	~<πems/úq-exãnsi⁄.h
>

62 
œn91cxx_¥iv_d©a
 
	gsmc91111
;

64 
œn91cxx_h¨dw¨e_öô
(
œn91cxx_¥iv_d©a
 *
˝d
);

65 
uöt16_t
 
œn91cxx_ªad_phy
(
œn91cxx_¥iv_d©a
 *
˝d
,

66 
uöt8_t
 
phyaddr
, uöt8_à
phyªg
);

67 
œn91cxx_wrôe_phy
(
œn91cxx_¥iv_d©a
 *
˝d
,

68 
uöt8_t
 
phyaddr
, uöt8_à
phyªg
,

69 
uöt16_t
 
vÆue
);

70 
œn91cxx_°¨t
(
i‚ë
 *
iÂ
);

71 
smc91111_°¨t
(
i‚ë
 *
iÂ
);

72 
smc_¥obe
(
œn91cxx_¥iv_d©a
 *
˝d
);

73 
smc91111_°›
(
œn91cxx_¥iv_d©a
 *
˝d
);

74 
smc91111_öô
(*
¨g
);

75 
œn91cxx_föish_£¡
(
œn91cxx_¥iv_d©a
 *
˝d
);

77 
œn91cxx_phy_fixed
(
œn91cxx_¥iv_d©a
 *
˝d
);

78 
œn91cxx_phy_c⁄figuª
(
œn91cxx_¥iv_d©a
 *
˝d
);

81 
	#mö
(
l
,
r
Ë(÷Ë< (rË? (lË: (r))

	)

82 
	#max
(
l
,
r
Ë(÷Ë> (rË? (lË: (r))

	)

85 
	$œn91cxx_öãºu±_h™dÀr
(*
¨g
)

87 
œn91cxx_¥iv_d©a
 *
˝d
 = 
¨g
;

88 
úq
, 
evít
;

89 
ﬁdba£
;

90 
ﬁdpoöãr
;

91 
	`INCR_STAT
(
˝d
, 
öãºu±s
);

92 
	`DEBUG_FUNCTION
();

94 
	`HAL_READ_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
ﬁdba£
);

95 
ﬁdpoöãr
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_POINTER
);

98 
úq
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
);

99 
evít
 = 
úq
 & (irq >> 8) & 0xff;

100 i‡(0 =
evít
)

105 i‡(
evít
 & 
LAN91CXX_INTERRUPT_ERCV_INT
) {

106 
	`db_¥ötf
("EarlyÑeceive interrupt");

107 } i‡(
evít
 & 
LAN91CXX_INTERRUPT_EPH_INT
) {

108 
	`db_¥ötf
("ethernetÖrotocol handler failures");

109 } i‡(
evít
 & 
LAN91CXX_INTERRUPT_RX_OVRN_INT
) {

110 
	`db_¥ötf
("receive overrun");

111 } i‡(
evít
 & 
LAN91CXX_INTERRUPT_ALLOC_INT
) {

112 
	`db_¥ötf
("allocation interrupt");

115 i‡(
evít
 & 
LAN91CXX_INTERRUPT_TX_SET
) {

116 
	`db_¥ötf
("#*tx irq\n");

117 
	`œn91cxx_föish_£¡
(
˝d
);

118 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
,

119 (
úq
 & 0xff00Ë| 
LAN91CXX_INTERRUPT_TX_INT
);

125 i‡(
evít
 & 
LAN91CXX_INTERRUPT_RCV_INT
) {

126 
	`db_¥ötf
("#*rx irq\n");

127 
	`πems_bsd√t_evít_£nd
(
˝d
->
rxD´m⁄Tid
,

128 
SMC91111_INTERRUPT_EVENT
);

130 i‡(
evít
 &

131 ~(
LAN91CXX_INTERRUPT_TX_SET
 | 
LAN91CXX_INTERRUPT_RCV_INT
))

132 
	`db_¥ötf
("Unknown interrupt\n");

134 
	`db_¥ötf
("ouà%s\n", 
__FUNCTION__
);

136 
	`put_ªg
(
˝d
, 
LAN91CXX_POINTER
, 
ﬁdpoöãr
);

137 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
ﬁdba£
);

138 
	}
}

147 
	$œn91cxx_ªcv
(
œn91cxx_¥iv_d©a
 *
˝d
, 
mbuf
 *
m
)

149 
i‚ë
 *
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

150 
ëhî_hódî
 *
eh
;

151 
mÀn
 = 0, 
∂í
;

152 *
°¨t
;

153 
rxd_t
 *
d©a
 = 
NULL
, 
vÆ
;

154 #i‡
DEBUG
 & 64

155 
rxd_t
 
Õ
 = 0;

158 ()
°¨t
;

160 
mbuf
 *
n
;

161 
dbg_¥efix
 = "<";

163 
	`DEBUG_FUNCTION
();

164 
	`INCR_STAT
(
˝d
, 
rx_dñivî
);

168 
	`put_ªg
(
˝d
, 
LAN91CXX_POINTER
,

169 (
LAN91CXX_POINTER_RCV
 | 
LAN91CXX_POINTER_READ
 |

170 
LAN91CXX_POINTER_AUTO_INCR
));

171 
vÆ
 = 
	`gë_d©a
(
˝d
);

174 #ifde‡
LAN91CXX_32BIT_RX


175 
vÆ
 = 
	`CYG_LE32_TO_CPU
(val);

176 
∂í
 = (
vÆ
 >> 16) - 6;

178 
vÆ
 = 
	`CYG_LE16_TO_CPU
(val);

179 
∂í
 = 
	`gë_d©a
(
˝d
);

180 
∂í
 = 
	`CYG_LE16_TO_CPU
(plen) - 6;

183 i‡–
˝d
->
c111_ªva
 || 
	`LAN91CXX_RX_STATUS_IS_ODD
(˝d, 
vÆ
) )

184 
∂í
++;

186 
n
 = 
m
;Ç;Ç =Ç->
m_√xt
) {

187 #ifde‡
LAN91CXX_32BIT_RX


188 i‡(
mÀn
 == 2) {

189 #i‡
DEBUG
 & 64

190 
	`db_¥ötf
("AppendingÅoÜastápacket\n");

193 
vÆ
 = 
	`gë_d©a
(
˝d
);

194 *((*)
d©a
Ë(
vÆ
 >> 16) & 0xffff;

195 
∂í
 -= 2;

196 
d©a
 = (
rxd_t
 *Ë
n
->
m_d©a
;

197 
°¨t
 = (*)
d©a
;

198 
mÀn
 = 
n
->
m_Àn
;

199 i‡((
d©a
Ë&& (
mÀn
 > 1)) {

200 *(*)
d©a
 = (
vÆ
 & 0xffff);

201 
d©a
 = (
rxd_t
 *)((*)data + 1);

202 
∂í
 -= 2;

203 
mÀn
 -= 2;

206 
d©a
 = (
rxd_t
 *Ë
n
->
m_d©a
;

207 
°¨t
 = (*)
d©a
;

208 
mÀn
 = 
n
->
m_Àn
;

211 
d©a
 = (
rxd_t
 *Ë
n
->
m_d©a
;

212 
°¨t
 = (*)
d©a
;

213 
mÀn
 = 
n
->
m_Àn
;

216 
	`db1_¥ötf
("<[∑ckë : mÀ¿0x%x,ÖÀ¿0x%x]\n", 
mÀn
, 
∂í
);

218 i‡(
d©a
) {

219 
mÀn
 >(*
d©a
)) {

220 #ifde‡
LAN91CXX_32BIT_RX


221 
vÆ
 = 
	`gë_d©a
(
˝d
);

222 *(*)
d©a
 = (
vÆ
 >> 16) & 0xffff;

223 
d©a
 = (
rxd_t
 *)((*)data + 1);

224 *(*)
d©a
 = (
vÆ
 & 0xffff);

225 
d©a
 = (
rxd_t
 *)((*)data + 1);

227 *
d©a
++ = 
	`gë_d©a
(
˝d
);

229 
mÀn
 -(*
d©a
);

230 
∂í
 -(*
d©a
);

233 
mÀn
 >(*
d©a
)) {

234 ()
	`gë_d©a
(
˝d
);

235 
mÀn
 -(*
d©a
);

236 
∂í
 -(*
d©a
);

240 #i‡
DEBUG
 & 64

241 
Õ
 = 0;

242 (()
°¨t
Ë< (()
d©a
)) {

243 
a
 = *(
°¨t
++);

244 
b
 = *(
°¨t
++);

245 
	`db64_¥ötf
("%02x %02x ", 
a
, 
b
);

246 
Õ
 += 2;

247 i‡(
Õ
 >= 16) {

248 
	`db64_¥ötf
("\n");

249 
Õ
 = 0;

252 
	`db64_¥ötf
(" \n");

255 
vÆ
 = 
	`gë_d©a
(
˝d
);

256 #ifde‡
LAN91CXX_32BIT_RX


257 i‡(
∂í
 & 2) {

258 i‡(
d©a
 && (
mÀn
>1) ) {

259 *(*)
d©a
 = (
vÆ
 >> 16) & 0xffff;

260 
d©a
 = (
rxd_t
 *)((*)data + 1);

261 
vÆ
 <<= 16;

262 
mÀn
-=2;

265 i‡–(
∂í
 & 1Ë&& 
d©a
 && (
mÀn
>0) )

266 *(*)
d©a
 = 
vÆ
 >> 24;

268 
vÆ
 = 
	`CYG_LE16_TO_CPU
(val);

269 
˝
 = (*)
d©a
;

271 
	`CYG_ASSERT
(
vÆ
 & 
LAN91CXX_CONTROLBYTE_RX
, "Controlbyte isÇot for Rx");

272 
	`CYG_ASSERT
((1 =
mÀn
Ë=(0 !
	`LAN91CXX_CONTROLBYTE_IS_ODD
(
˝d
, 
vÆ
)),

274 i‡(
d©a
 && (1 =
mÀn
Ë&& 
	`LAN91CXX_CONTROLBYTE_IS_ODD
(
˝d
, 
vÆ
)) {

275 
cvÆ
 = 
vÆ
 & 0x00ff;

276 *
˝
 = 
cvÆ
;

280 
vÆ
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_FIFO_PORTS
);

281 i‡(0x8000 & 
vÆ
) {

282 
db4_¥ötf


284 
vÆ
, 
˝d
->
rx∑ckë
);

286 
	`db4_¥ötf
("<+RxÖacket freed %x (expected %x)\n",

287 0xf‡& (
vÆ
 >> 8), 
˝d
->
rx∑ckë
);

290 
	`CYG_ASSERT
((0xf‡& (
vÆ
 >> 8)Ë=
˝d
->
rx∑ckë
,

295 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_ªmªl_rx_‰ame
);

297 
dbg_¥efix
 = "";

300 
eh
 = 
	`mtod
(
m
, 
ëhî_hódî
 *);

301 
m
->
m_d©a
 +(
ëhî_hódî
);

302 
m
->
m_Àn
 -(
ëhî_hódî
);

303 
m
->
m_pkthdr
.
Àn
 -(
ëhî_hódî
);

305 
	`ëhî_öput
(
iÂ
, 
eh
, 
m
);

307 
	}
}

310 
mbuf
 *
	$smc91111_Ælocmbufchaö
(
tŸÀn
, 
i‚ë
 *
iÂ
)

313 
mbuf
 *
m
, *
m0
, *
√wm
;

314 
Àn
;

316 
	`MGETHDR
(
m0
, 
M_DONTWAIT
, 
MT_DATA
);

317 i‡(
m0
 == 0)

319 
m0
->
m_pkthdr
.
rcvif
 = 
iÂ
;

320 
m0
->
m_pkthdr
.
Àn
 = 
tŸÀn
;

321 
Àn
 = 
MHLEN
;

322 
m
 = 
m0
;

325 
tŸÀn
 > 0) {

326 i‡(
tŸÀn
 >
MINCLSIZE
) {

327 
	`MCLGET
(
m
, 
M_DONTWAIT
);

328 i‡((
m
->
m_Êags
 & 
M_EXT
) == 0)

329 
bad
;

330 
Àn
 = 
MCLBYTES
;

333 i‡(
m
 =
m0
) {

334 
ˇddr_t
 
√wd©a
 = (caddr_t)

335 
	`ALIGN
(
m
->
m_d©a
 +

336 (
ëhî_hódî
)) -

337 (
ëhî_hódî
);

338 
Àn
 -
√wd©a
 - 
m
->
m_d©a
;

339 
m
->
m_d©a
 = 
√wd©a
;

342 
m
->
m_Àn
 = 
Àn
 = 
	`mö
(
tŸÀn
,Üen);

344 
tŸÀn
 -
Àn
;

345 i‡(
tŸÀn
 > 0) {

346 
	`MGET
(
√wm
, 
M_DONTWAIT
, 
MT_DATA
);

347 i‡(
√wm
 == 0)

348 
bad
;

349 
Àn
 = 
MLEN
;

350 
m
 = m->
m_√xt
 = 
√wm
;

353  (
m0
);

355 
bad
:

356 
	`m_‰ìm
(
m0
);

358 
	}
}

360 
	$ªad∑ckë
(
œn91cxx_¥iv_d©a
 *
˝d
)

362 
mbuf
 *
m
;

363 
°©
, 
com∂í
;

364 
i‚ë
 *
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

365 #ifde‡
LAN91CXX_32BIT_RX


366 
uöt32_t
 
vÆ
;

369 
	`DEBUG_FUNCTION
();

372 
°©
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_FIFO_PORTS
);

373 
	`db1_¥ötf
("+LAN91CXX_FIFO_PORTS: 0x%04x\n", 
°©
);

375 i‡(0x8000 & 
°©
) {

377 
	`db4_¥ötf
("!RxEvent withÉmpty fifo\n");

381 
	`INCR_STAT
(
˝d
, 
rx_cou¡
);

383 
	`db4_¥ötf
("+RxÖacketállocated %x (previous %x)\n",

384 0xf‡& (
°©
 >> 8), 
˝d
->
rx∑ckë
);

387 
˝d
->
rx∑ckë
 = 0xf‡& (
°©
 >> 8);

391 
	`put_ªg
(
˝d
, 
LAN91CXX_POINTER
,

392 (
LAN91CXX_POINTER_RCV
 | 
LAN91CXX_POINTER_READ
 |

393 
LAN91CXX_POINTER_AUTO_INCR
 | 0x0000));

394 #ifde‡
LAN91CXX_32BIT_RX


395 
vÆ
 = 
	`gë_d©a
(
˝d
);

396 
vÆ
 = 
	`CYG_LE32_TO_CPU
(val);

397 
°©
 = 
vÆ
 & 0xffff;

398 
com∂í
 = ((
vÆ
 >> 16) & 0xffff) - 6;

400 
°©
 = 
	`gë_d©a
(
˝d
);

401 
°©
 = 
	`CYG_LE16_TO_CPU
(stat);

402 
com∂í
 = 
	`gë_d©a
(
˝d
);

403 
com∂í
 = 
	`CYG_LE16_TO_CPU
(
Àn
) - 6;

406 #ifde‡
KEEP_STATISTICS


407 i‡(
°©
 & 
LAN91CXX_RX_STATUS_ALIGNERR
)

408 
	`INCR_STAT
(
˝d
, 
rx_Æign_îr‹s
);

410 i‡(
°©
 & 
LAN91CXX_RX_STATUS_BADCRC
)

411 
	`INCR_STAT
(
˝d
, 
rx_¸c_îr‹s
);

412 i‡(
°©
 & 
LAN91CXX_RX_STATUS_TOOLONG
)

413 
	`INCR_STAT
(
˝d
, 
rx_too_l⁄g_‰ames
);

414 i‡(
°©
 & 
LAN91CXX_RX_STATUS_TOOSHORT
)

415 
	`INCR_STAT
(
˝d
, 
rx_sh‹t_‰ames
);

419 i‡((
°©
 & 
LAN91CXX_RX_STATUS_BAD
) == 0) {

420 
	`INCR_STAT
(
˝d
, 
rx_good
);

423 i‡(
˝d
->
c111_ªva
 || 
	`LAN91CXX_RX_STATUS_IS_ODD
(˝d, 
°©
))

424 
com∂í
++;

426 #i‡
DEBUG
 & 1

427 
	`db_¥ötf
("goodÑx - sèt: 0x%04x,Üí: 0x%04x\n", 
°©
,

428 
com∂í
);

432 i‡(
com∂í
 > (
ëhî_hódî
)) {

435 
com∂í
 = ((complen + 3) & ~3);

437 
m
 = 
	`smc91111_Ælocmbufchaö
(
com∂í
, 
iÂ
);

439 
mbuf
 *
n
 = 
m
;

440 
	`db_¥ötf
("mbuf-chain:");

441 
n
) {

442 
	`db_¥ötf
("[%" 
PRIxPTR
 ":%x]",

443 
n
->
m_d©a
,

444 ()(
n
->
m_Àn
));

445 
n
 =Ç->
m_√xt
;

447 
	`db_¥ötf
("\n");

450 i‡(
m
) {

452 
	`œn91cxx_ªcv
(
˝d
, 
m
);

460 
	`db1_¥ötf
("!badÑx: sèt: 0x%04x,Üí: 0x%04x\n", 
°©
, 
com∂í
);

464 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_ªmªl_rx_‰ame
);

467 
	}
}

469 
	$smc91111_rxD´m⁄
(*
¨g
)

471 
œn91cxx_¥iv_d©a
 *
˝d
 = 
¨g
;

472 
πems_evít_£t
 
evíts
;

473 
	`DEBUG_FUNCTION
();

476 
	`πems_bsd√t_evít_ª˚ive
(
INTERRUPT_EVENT
,

477 
RTEMS_WAIT
 | 
RTEMS_EVENT_ANY
,

478 
RTEMS_NO_TIMEOUT
, &
evíts
);

481 !(
	`gë_ªg
(
˝d
, 
LAN91CXX_FIFO_PORTS
) & 0x8000)) {

482 
	`ªad∑ckë
(
˝d
);

485 
	}
}

489 
	$£nd∑ckë
(
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

491 
œn91cxx_¥iv_d©a
 *
˝d
 = 
iÂ
->
if_so·c
;

492 
i
, 
Àn
, 
∂í
, 
t¸
, 
odd
;

493 
mbuf
 *
n
 = 
m
;

494 *
sd©a
 = 
NULL
;

495 
öts
, 
c⁄åﬁ
;

496 
uöt16_t
 
∑ckë
, 
°©us
;

497 
dbg_¥efix
 = ">";

498 
	`DEBUG_FUNCTION
();

500 
˝d
->
txbusy
 = 1;

503 
t¸
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_TCR
);

504 i‡(0 =(
LAN91CXX_TCR_TXENA
 & 
t¸
)) {

505 
	`db1_¥ötf
("> ENGINE RESTART:Å¸ %x\n", 
t¸
);

506 
t¸
 |
LAN91CXX_TCR_TXENA
;

507 
	`put_ªg
(
˝d
, 
LAN91CXX_TCR
, 
t¸
);

513 
∂í
 = 0;

514 
n
) {

515 
∂í
 +
n
->
m_Àn
;

516 
n
 =Ç->
m_√xt
;

521 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
,

522 
LAN91CXX_MMU_Æloc_f‹_tx
 | ((
∂í
 >> 8) & 0x07));

524 
i
 = 1024 * 1024;

526 
°©us
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
);

527 } 0 =(
°©us
 & 
LAN91CXX_INTERRUPT_ALLOC_INT
)

528 && (--
i
 > 0));

529 i‡(
i
)

530 
∑ckë
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_PNR
);

532 
∑ckë
 = 0xffff;

533 
	`db1_¥ötf
(">+ÆloˇãdÖackë %04x\n", 
∑ckë
);

535 
∑ckë
 =Öacket >> 8;

536 i‡(
∑ckë
 & 0x80) {

538 
	`db1_¥ötf
("Allocation failed! Retrying...\n");

543 
	`db4_¥ötf
(">+TxÖacketállocated %x (previous %x)\n",

544 
∑ckë
, 
˝d
->
tx∑ckë
);

546 
˝d
->
tx∑ckë
 = 
∑ckë
;

551 
	`put_ªg
(
˝d
, 
LAN91CXX_PNR
, 
∑ckë
);

553 
	`put_ªg
(
˝d
, 
LAN91CXX_POINTER
, 
LAN91CXX_POINTER_AUTO_INCR
 | 0x0000);

558 
	`put_d©a
(
˝d
, 
	`CYG_CPU_TO_LE16
(0));

560 
	`put_d©a
(
˝d
, 
	`CYG_CPU_TO_LE16
(0x7FE & (
∂í
 + 6)));

563 
odd
 = 0;

564 
n
 = 
m
;

565 
n
) {

566 
sd©a
 = (*)
n
->
m_d©a
;

567 
Àn
 = 
n
->
m_Àn
;

569 
	`CYG_ASSERT
(
sd©a
, "!No sg dataÖointer here");

575 i‡–(()
sd©a
 & 1Ë&& (
Àn
>1) ){

576 
	`put_d©a8
(
˝d
,*(*)
sd©a
);

577 
sd©a
 = (*)(()sdata + 1);

578 
odd
 = ~odd;

579 
Àn
--;

583 
Àn
 >= 17){

584 
	`put_d©a
(
˝d
, *(
sd©a
));

585 
	`put_d©a
(
˝d
, *(
sd©a
+1));

586 
	`put_d©a
(
˝d
, *(
sd©a
+2));

587 
	`put_d©a
(
˝d
, *(
sd©a
+3));

588 
	`put_d©a
(
˝d
, *(
sd©a
+4));

589 
	`put_d©a
(
˝d
, *(
sd©a
+5));

590 
	`put_d©a
(
˝d
, *(
sd©a
+6));

591 
	`put_d©a
(
˝d
, *(
sd©a
+7));

592 
sd©a
 += 8;

593 
Àn
 -= 16;

597 
Àn
 >= 3) {

598 
	`put_d©a
(
˝d
, *
sd©a
++);

599 
Àn
 -(*
sd©a
);

603 i‡–
Àn
 > 1 ){

605 i‡–!
odd
 || 
n
->
m_√xt
 ){

606 
	`put_d©a
(
˝d
, *
sd©a
++);

607 
Àn
 -(*
sd©a
);

612 
	`put_d©a8
(
˝d
,*(*)
sd©a
);

613 
sd©a
 = (*)(()sdata + 1);

614 
odd
 = 0;

615 
Àn
--;

618 }i‡–(
Àn
>0Ë&& (
n
->
m_√xt
) ){

620 
	`put_d©a8
(
˝d
,*(*)
sd©a
);

621 
odd
 = ~odd;

624 
n
 =Ç->
m_√xt
;

629 
c⁄åﬁ
 = 0;

630 i‡–
Àn
 > 0 ){

631 i‡–!
odd
 ) {

633 
⁄ebyã
 = *(*)
sd©a
;

634 
c⁄åﬁ
 = 
⁄ebyã
;

635 
c⁄åﬁ
 |
LAN91CXX_CONTROLBYTE_ODD
;

637 
	`put_d©a8
(
˝d
,*(*)
sd©a
);

640 
c⁄åﬁ
 |
LAN91CXX_CONTROLBYTE_CRC
;

641 
	`put_d©a
(
˝d
, 
	`CYG_CPU_TO_LE16
(
c⁄åﬁ
));

643 
	`m_‰ìm
(
m
);

644 
	`CYG_ASSERT
(
sd©a
, "!No sg dataÖointer outside");

649 
öts
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
) & 0xff00;

650 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
,

651 
öts
 | 
LAN91CXX_INTERRUPT_TX_EMPTY_INT
);

652 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
, 
öts
 | 
LAN91CXX_INTERRUPT_TX_INT_M
);

655 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_íq_∑ckë
);

657 
öts
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
);

658 
	`db1_¥ötf
(">END: i¡†© TX: %04x\n", 
öts
);

659 
dbg_¥efix
 = "";

660 
	}
}

662 
	$smc91111_txD´m⁄
(*
¨g
)

664 
œn91cxx_¥iv_d©a
 *
˝d
 = 
¨g
;

665 
i‚ë
 *
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

666 
mbuf
 *
m
;

667 
πems_evít_£t
 
evíts
;

668 
	`DEBUG_FUNCTION
();

675 
πems_bsd√t_evít_ª˚ive


676 (
SMC91111_START_TRANSMIT_EVENT
,

677 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
, 
RTEMS_NO_TIMEOUT
, &
evíts
);

685 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

686 i‡(!
m
)

688 
	`£nd∑ckë
(
iÂ
, 
m
);

690 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

694 
	}
}

697 
	$smc91111_°¨t
(
i‚ë
 *
iÂ
)

699 
œn91cxx_¥iv_d©a
 *
˝d
 = 
iÂ
->
if_so·c
;

701 i‡((
iÂ
->
if_Êags
 & (
IFF_RUNNING
 | 
IFF_OACTIVE
)) != IFF_RUNNING)

704 
	`πems_bsd√t_evít_£nd
(
˝d
->
txD´m⁄Tid
, 
START_TRANSMIT_EVENT
);

705 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

707 
	}
}

710 
	$œn91cxx_föish_£¡
(
œn91cxx_¥iv_d©a
 *
˝d
)

712 
∑ckë
, 
t¸
;

713 
ßved_∑ckë
;

715 
	`DEBUG_FUNCTION
();

717 
	`INCR_STAT
(
˝d
, 
tx_com∂ëe
);

719 
ßved_∑ckë
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_PNR
);

728 
∑ckë
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_FIFO_PORTS
);

729 
	`db1_¥ötf
("%s:START: fifÿ%04x \n", 
__FUNCTION__
, 
∑ckë
);

732 
ªg
;

734 
ªg
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_EPH_STATUS
);

737 i‡(
ªg
 & 
LAN91CXX_STATUS_TX_UNRN
)

738 
	`INCR_STAT
(
˝d
, 
tx_undîrun
);

739 i‡(
ªg
 & 
LAN91CXX_STATUS_LOST_CARR
)

740 
	`INCR_STAT
(
˝d
, 
tx_ˇºõr_loss
);

741 i‡(
ªg
 & 
LAN91CXX_STATUS_LATCOL
)

742 
	`INCR_STAT
(
˝d
, 
tx_œã_cﬁlisi⁄s
);

743 i‡(
ªg
 & 
LAN91CXX_STATUS_TX_DEFR
)

744 
	`INCR_STAT
(
˝d
, 
tx_de„ºed
);

745 i‡(
ªg
 & 
LAN91CXX_STATUS_SQET
)

746 
	`INCR_STAT
(
˝d
, 
tx_sqëe°îr‹s
);

747 i‡(
ªg
 & 
LAN91CXX_STATUS_16COL
)

748 
	`INCR_STAT
(
˝d
, 
tx_max_cﬁlisi⁄s
);

749 i‡(
ªg
 & 
LAN91CXX_STATUS_MUL_COL
)

750 
	`INCR_STAT
(
˝d
, 
tx_mu…_cﬁlisi⁄s
);

751 i‡(
ªg
 & 
LAN91CXX_STATUS_SNGL_COL
)

752 
	`INCR_STAT
(
˝d
, 
tx_sögÀ_cﬁlisi⁄s
);

753 i‡(
ªg
 & 
LAN91CXX_STATUS_TX_SUC
)

754 
	`INCR_STAT
(
˝d
, 
tx_good
);

756 
˝d
->
°©s
.
tx_tŸÆ_cﬁlisi⁄s
 =

757 
˝d
->
°©s
.
tx_œã_cﬁlisi⁄s
 +

758 
˝d
->
°©s
.
tx_max_cﬁlisi⁄s
 +

759 
˝d
->
°©s
.
tx_mu…_cﬁlisi⁄s
 +

760 
˝d
->
°©s
.
tx_sögÀ_cﬁlisi⁄s
;

768 
t¸
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_TCR
);

769 i‡(0 =(
LAN91CXX_TCR_TXENA
 & 
t¸
)) {

770 
	`db1_¥ötf
("%s: ENGINE RESTART:Å¸ %x \n", 
__FUNCTION__
, 
t¸
);

771 
t¸
 |
LAN91CXX_TCR_TXENA
;

772 
	`put_ªg
(
˝d
, 
LAN91CXX_TCR
, 
t¸
);

775 
∑ckë
 &= 0xff;

778 
	`put_ªg
(
˝d
, 
LAN91CXX_PNR
, cpd->
tx∑ckë
);

779 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_ªl_∑ckë
);

781 
	`gë_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
Ë& 
LAN91CXX_MMU_COMMAND_BUSY
) ;

784 
	`put_ªg
(
˝d
, 
LAN91CXX_PNR
, 
ßved_∑ckë
);

786 
	}
}

793 
	$smc91111_°©s
(
œn91cxx_¥iv_d©a
 *
¥iv
)

795 
	`¥ötf
("tx_good :%-8d\n", 
¥iv
->
°©s
.
tx_good
);

796 
	`¥ötf
("tx_max_cﬁlisi⁄† :%-8d\n", 
¥iv
->
°©s
.
tx_max_cﬁlisi⁄s
);

797 
	`¥ötf
("tx_œã_cﬁlisi⁄† :%-8d\n", 
¥iv
->
°©s
.
tx_œã_cﬁlisi⁄s
);

798 
	`¥ötf
("tx_undîru¿ :%-8d\n", 
¥iv
->
°©s
.
tx_undîrun
);

799 
	`¥ötf
("tx_ˇºõr_los† :%-8d\n", 
¥iv
->
°©s
.
tx_ˇºõr_loss
);

800 
	`¥ötf
("tx_de„ºed :%-8d\n", 
¥iv
->
°©s
.
tx_de„ºed
);

801 
	`¥ötf
("tx_sqëe°îr‹† :%-8d\n", 
¥iv
->
°©s
.
tx_sqëe°îr‹s
);

802 
	`¥ötf
("tx_sögÀ_cﬁlisi⁄s:%-8d\n", 
¥iv
->
°©s
.
tx_sögÀ_cﬁlisi⁄s
);

803 
	`¥ötf
("tx_mu…_cﬁlisi⁄† :%-8d\n", 
¥iv
->
°©s
.
tx_mu…_cﬁlisi⁄s
);

804 
	`¥ötf
("tx_tŸÆ_cﬁlisi⁄†:%-8d\n", 
¥iv
->
°©s
.
tx_tŸÆ_cﬁlisi⁄s
);

805 
	`¥ötf
("rx_good :%-8d\n", 
¥iv
->
°©s
.
rx_good
);

806 
	`¥ötf
("rx_¸c_îr‹† :%-8d\n", 
¥iv
->
°©s
.
rx_¸c_îr‹s
);

807 
	`¥ötf
("rx_Æign_îr‹† :%-8d\n", 
¥iv
->
°©s
.
rx_Æign_îr‹s
);

808 
	`¥ötf
("rx_ªsour˚_îr‹† :%-8d\n", 
¥iv
->
°©s
.
rx_ªsour˚_îr‹s
);

809 
	`¥ötf
("rx_ovîrun_îr‹† :%-8d\n", 
¥iv
->
°©s
.
rx_ovîrun_îr‹s
);

810 
	`¥ötf
("rx_cﬁlisi⁄† :%-8d\n", 
¥iv
->
°©s
.
rx_cﬁlisi⁄s
);

811 
	`¥ötf
("rx_sh‹t_‰ame† :%-8d\n", 
¥iv
->
°©s
.
rx_sh‹t_‰ames
);

812 
	`¥ötf
("rx_too_l⁄g_‰ame† :%-8d\n", 
¥iv
->
°©s
.
rx_too_l⁄g_‰ames
);

813 
	`¥ötf
("rx_symbﬁ_îr‹† :%-8d\n", 
¥iv
->
°©s
.
rx_symbﬁ_îr‹s
);

814 
	`¥ötf
("öãºu±† :%-8d\n", 
¥iv
->
°©s
.
öãºu±s
);

815 
	`¥ötf
("rx_cou¡ :%-8d\n", 
¥iv
->
°©s
.
rx_cou¡
);

816 
	`¥ötf
("rx_dñivî :%-8d\n", 
¥iv
->
°©s
.
rx_dñivî
);

817 
	`¥ötf
("rx_ªsour˚ :%-8d\n", 
¥iv
->
°©s
.
rx_ªsour˚
);

818 
	`¥ötf
("rx_ª°¨à :%-8d\n", 
¥iv
->
°©s
.
rx_ª°¨t
);

819 
	`¥ötf
("tx_cou¡ :%-8d\n", 
¥iv
->
°©s
.
tx_cou¡
);

820 
	`¥ötf
("tx_com∂ëê :%-8d\n", 
¥iv
->
°©s
.
tx_com∂ëe
);

821 
	`¥ötf
("tx_dr›≥d :%-8d\n", 
¥iv
->
°©s
.
tx_dr›≥d
);

822 
	}
}

827 
	$smc91111_io˘l
(
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

829 
œn91cxx_¥iv_d©a
 *
˝d
 = 
iÂ
->
if_so·c
;

830 
îr‹
 = 0;

831 
	`DEBUG_FUNCTION
();

833 
comm™d
) {

834 
SIOCGIFADDR
:

835 
SIOCSIFADDR
:

836 
	`db_¥ötf
("SIOCSIFADDR\n");

837 
	`ëhî_io˘l
(
iÂ
, 
comm™d
, 
d©a
);

840 
SIOCSIFFLAGS
:

841 
	`db_¥ötf
("SIOCSIFFLAGS\n");

842 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
)) {

843 
IFF_RUNNING
:

844 
	`smc91111_°›
(
˝d
);

847 
IFF_UP
:

848 
	`smc91111_öô
(
˝d
);

851 
IFF_UP
 | 
IFF_RUNNING
:

852 
	`smc91111_°›
(
˝d
);

853 
	`smc91111_öô
(
˝d
);

861 
SIO_RTEMS_SHOW_STATS
:

862 
	`db_¥ötf
("SIO_RTEMS_SHOW_STATS\n");

863 
	`smc91111_°©s
(
˝d
);

870 
îr‹
 = 
EINVAL
;

874  
îr‹
;

875 
	}
}

880 
	$_πems_smc91111_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

881 
scmv91111_c⁄figuøti⁄
 * 
chù
)

883 
i‚ë
 *
iÂ
;

884 
œn91cxx_¥iv_d©a
 *
˝d
;

885 
unôNumbî
;

886 *
unôName
;

887 
mtu
;

888 
	`DEBUG_FUNCTION
();

891 i‡((
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
(
c⁄fig
, &
unôName
)) < 0) {

892 
	`db_¥ötf
("Unônumbî < 0: %d\n", 
unôNumbî
);

896 
	`db_¥ötf
("Unônumbî: %d, ba£addr: 0x%p\n", 
unôNumbî
, 
chù
->
ba£addr
);

898 
˝d
 = &
smc91111
;

899 
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

900 
	`mem£t
(
˝d
, 0, (*cpd));

902 
˝d
->
c⁄fig
 = *
chù
;

903 
˝d
->
ba£
 = 
chù
->
ba£addr
;

905 i‡(
	`smc_¥obe
(
˝d
)) {

909 i‡(
c⁄fig
->
h¨dw¨e_addªss
) {

910 
	`mem˝y
(
˝d
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

912 #ifde‡
SMC91111_ENADDR_IS_SETUP


914 
i
;

915 
i
 = 0; i < (
˝d
->
íaddr
); i += 2) {

916 
r
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_IA01
 + 
i
 / 2);

917 
˝d
->
¨pcom
.
ac_íaddr
[
i
] = 
r
;

918 
˝d
->
¨pcom
.
ac_íaddr
[
i
+1] = 
r
 >> 8;

922 
˝d
->
¨pcom
.
ac_íaddr
[0] = 0x12;

923 
˝d
->
¨pcom
.
ac_íaddr
[1] = 0x13;

924 
˝d
->
¨pcom
.
ac_íaddr
[2] = 0x14;

925 
˝d
->
¨pcom
.
ac_íaddr
[3] = 0x15;

926 
˝d
->
¨pcom
.
ac_íaddr
[4] = 0x16;

927 
˝d
->
¨pcom
.
ac_íaddr
[5] = 0x17;

931 
˝d
->
íaddr
[0] = cpd->
¨pcom
.
ac_íaddr
[0];

932 
˝d
->
íaddr
[1] = cpd->
¨pcom
.
ac_íaddr
[1];

933 
˝d
->
íaddr
[2] = cpd->
¨pcom
.
ac_íaddr
[2];

934 
˝d
->
íaddr
[3] = cpd->
¨pcom
.
ac_íaddr
[3];

935 
˝d
->
íaddr
[4] = cpd->
¨pcom
.
ac_íaddr
[4];

936 
˝d
->
íaddr
[5] = cpd->
¨pcom
.
ac_íaddr
[5];

937 
˝d
->
Ωc_cur_mode
 =

938 
LAN91CXX_RPCR_LEDA_RX
 | 
LAN91CXX_RPCR_LEDB_LINK
 |

939 
LAN91CXX_RPCR_ANEG
;

941 i‡(
c⁄fig
->
mtu
)

942 
mtu
 = 
c⁄fig
->mtu;

944 
mtu
 = 
ETHERMTU
;

949 
iÂ
->
if_so·c
 = 
˝d
;

950 
iÂ
->
if_unô
 = 
unôNumbî
;

951 
iÂ
->
if_«me
 = 
unôName
;

952 
iÂ
->
if_mtu
 = 
mtu
;

953 
iÂ
->
if_öô
 = 
smc91111_öô
;

954 
iÂ
->
if_io˘l
 = 
smc91111_io˘l
;

955 
iÂ
->
if_°¨t
 = 
smc91111_°¨t
;

956 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

957 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

958 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

959 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

964 
	`if_©èch
(
iÂ
);

965 
	`ëhî_iÁâach
(
iÂ
);

967 #i‡
DEBUG


968 
	`¥ötf
("SMC91111 : driver has beenáttached\n");

972 
	}
};

979 
	$smc91111_öô
(*
¨g
)

981 
œn91cxx_¥iv_d©a
 *
˝d
 = 
¨g
;

982 
i‚ë
 *
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

983 
	`DEBUG_FUNCTION
();

985 i‡(
˝d
->
txD´m⁄Tid
 == 0) {

987 
	`œn91cxx_h¨dw¨e_öô
(
˝d
);

988 
	`œn91cxx_°¨t
(
iÂ
);

990 
˝d
->
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
("DCrx", 4096,

991 
smc91111_rxD´m⁄
, 
˝d
);

992 
˝d
->
txD´m⁄Tid
 =

993 
	`πems_bsd√t_√w¥oc
("DCtx", 4096, 
smc91111_txD´m⁄
, 
˝d
);

995 
	`œn91cxx_°¨t
(
iÂ
);

1001 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1002 
	}
}

1007 
	$smc91111_°›
(
œn91cxx_¥iv_d©a
 *
˝d
)

1009 
i‚ë
 *
iÂ
 = &
˝d
->
¨pcom
.
ac_if
;

1010 
	`DEBUG_FUNCTION
();

1012 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

1015 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 
LAN91CXX_RCR_SOFT_RST
);

1016 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 0);

1017 
˝d
->
txbusy
 = cpd->
wôhö_£nd
 = 0;

1019 
	}
}

1021 
	$œn91cxx_h¨dw¨e_öô
(
œn91cxx_¥iv_d©a
 *
˝d
)

1023 
vÆ
;

1024 
i
, 
rc
;

1026 
	`DEBUG_FUNCTION
();

1028 
˝d
->
txbusy
 = cpd->
wôhö_£nd
 = 0;

1031 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


1033 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

1035 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

1036 
˝d
->
c⁄fig
.
ve˘‹
,

1037 
˝d
->
c⁄fig
.
öfo
,

1038 
˝d
->
c⁄fig
.
›ti⁄s
,

1039 
˝d
->
c⁄fig
.
öãºu±_wøµî
,

1040 
˝d


1042 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

1043 
	`¥ötf
("πems_öãºu±_h™dÀr_ö°Æ»ªtu∫ed %d.\n", 
sc
);

1048 
	`db_¥ötf
("In°Æ»œn91cxx i§áàvec/úq %d\n", 
˝d
->
c⁄fig
.
ve˘‹
);

1049 
rc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(
˝d
->
c⁄fig
.
ve˘‹
, "smc91cxx",

1050 
RTEMS_INTERRUPT_SHARED
, 
œn91cxx_öãºu±_h™dÀr
, 
˝d
);

1051 i‡(
rc
 !
RTEMS_SUCCESSFUL
)

1056 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 
LAN91CXX_RCR_SOFT_RST
);

1057 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 0);

1058 
	`HAL_DELAY_US
(100000);

1059 
	`put_ªg
(
˝d
, 
LAN91CXX_CONFIG
, 0x9000);

1060 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 0);

1061 
	`put_ªg
(
˝d
, 
LAN91CXX_TCR
, 0);

1062 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_ª£t_mmu
);

1064 
vÆ
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_EPH_STATUS
);

1066 
vÆ
 = 
	`gë_b™k£l
(
˝d
);

1067 
	`db9_¥ötf
("LAN91CXX - supposed BankReg @ %x = %04x\n",

1068 ()(
˝d
->
ba£
 + 
LAN91CXX_BS
), 
vÆ
);

1070 i‡((0xff00 & 
vÆ
) != 0x3300) {

1071 
	`¥ötf
("No 91Cxx signature");

1072 
	`¥ötf
("smsc_lan91cxx_init: No 91Cxx signature found\n");

1076 
vÆ
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_REVISION
);

1078 
	`db9_¥ötf
("LAN91CXX -Åype: %01x,Ñev: %01x\n",

1079 (
vÆ
 >> 4) & 0xf, val & 0xf);

1082 
˝d
->
c111_ªva
 = (
vÆ
 == 0x3390);

1085 i‡(
˝d
->
c⁄fig_íaddr
)

1086 (*
˝d
->
c⁄fig_íaddr
) (cpd);

1088 
	`db9_¥ötf
("LAN91CXX - sètus: %04x\n", 
vÆ
);

1090 
db9_¥ötf


1092 
˝d
->
íaddr
[0], cpd->enaddr[1], cpd->enaddr[2],

1093 
˝d
->
íaddr
[3], cpd->enaddr[4], cpd->enaddr[5]);

1095 
i
 = 0; i < (
˝d
->
íaddr
); i += 2)

1096 
	`put_ªg
(
˝d
, 
LAN91CXX_IA01
 + 
i
 / 2,

1097 
˝d
->
íaddr
[
i
] | (cpd->enaddr[i + 1] << 8));

1100 
	}
}

1108 
	$œn91cxx_°¨t
(
i‚ë
 *
iÂ
)

1110 
œn91cxx_¥iv_d©a
 *
˝d
 = 
iÂ
->
if_so·c
;

1112 
uöt16_t
 
öå
;

1113 
uöt16_t
 
phy_˘l
;

1114 
dñay
;

1115 
	`DEBUG_FUNCTION
();

1117 
	`HAL_DELAY_US
(100000);

1120 
phy_˘l
 = 
	`œn91cxx_ªad_phy
(
˝d
, 0, 
LAN91CXX_PHY_CTRL
);

1121 
phy_˘l
 &~
LAN91CXX_PHY_CTRL_MII_DIS
;

1122 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
LAN91CXX_PHY_CTRL
, 
phy_˘l
);

1125 
	`put_ªg
(
˝d
, 
LAN91CXX_RPCR
,

1126 
LAN91CXX_RPCR_LEDA_RX
 | 
LAN91CXX_RPCR_LEDB_LINK
 |

1127 
LAN91CXX_RPCR_ANEG
);

1128 
˝d
->
Ωc_cur_mode
 =

1129 
LAN91CXX_RPCR_LEDA_RX
 | 
LAN91CXX_RPCR_LEDB_LINK
 |

1130 
LAN91CXX_RPCR_ANEG
;

1134 
dñay
 = 50;

1135 !(
	`œn91cxx_ªad_phy
(
˝d
, 0, 
LAN91CXX_PHY_STAT
) & 0x20)) {

1136 i‡(--
dñay
 <= 0) {

1137 
	`¥ötf
("Timeoutáutonegotiation\n");

1140 
	`HAL_DELAY_US
(100000);

1143 
	`put_ªg
(
˝d
, 
LAN91CXX_MMU_COMMAND
, 
LAN91CXX_MMU_ª£t_mmu
);

1145 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
, 0);

1146 
öå
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
);

1147 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
, 
öå
 &

1148 (
LAN91CXX_INTERRUPT_TX_INT
 |

1149 
LAN91CXX_INTERRUPT_TX_EMPTY_INT
 |

1150 
LAN91CXX_INTERRUPT_RX_OVRN_INT
 | 
LAN91CXX_INTERRUPT_ERCV_INT
));

1151 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
,

1152 
LAN91CXX_RCR_STRIP_CRC
 | 
LAN91CXX_RCR_RXEN
 |

1153 
LAN91CXX_RCR_ALMUL
);

1154 
	`put_ªg
(
˝d
, 
LAN91CXX_TCR
, 
LAN91CXX_TCR_TXENA
 | 
LAN91CXX_TCR_PAD_EN
);

1155 
	`put_ªg
(
˝d
, 
LAN91CXX_CONTROL
, 
LAN91CXX_CONTROL_AUTO_RELEASE
);

1156 
	`put_ªg
(
˝d
, 
LAN91CXX_INTERRUPT
,

1157 
LAN91CXX_INTERRUPT_RCV_INT_M
);

1160 #ifde‡
ETH_DRV_FLAGS_PROMISC_MODE


1161 !(
Êags
 & 
ETH_DRV_FLAGS_PROMISC_MODE
)

1163 Ë|| (
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1166 
r¸
;

1167 
r¸
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_RCR
);

1168 
r¸
 |
LAN91CXX_RCR_PRMS
;

1169 
	`put_ªg
(
˝d
, 
LAN91CXX_RCR
, 
r¸
);

1171 
	}
}

1175 c⁄° *
	gchù_ids
[15] = {

1176 
NULL
, NULL, NULL,

1184 
NULL
, NULL,

1185 
NULL
, NULL, NULL

1188 
	$smc_¥obe
(
œn91cxx_¥iv_d©a
 *
˝d
)

1190 
b™k
;

1191 
ªvisi⁄_ªgi°î
;

1193 
	`DEBUG_FUNCTION
();

1196 
	`HAL_READ_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
b™k
);

1197 
b™k
 = 
	`CYG_LE16_TO_CPU
(bank);

1198 i‡((
b™k
 & 0xFF00) != 0x3300) {

1199 
	`db_¥ötf
("<1>SmcÖrobe bank check 1 failed.\n");

1200  -
ENODEV
;

1204 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
	`CYG_CPU_TO_LE16
(0 >> 3));

1205 
	`HAL_READ_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
b™k
);

1206 
b™k
 = 
	`CYG_LE16_TO_CPU
(bank);

1207 i‡((
b™k
 & 0xFF00) != 0x3300) {

1208 
	`db_¥ötf
("<1>SmcÖrobe bank check 2 failed.\n");

1209  -
ENODEV
;

1211 #i‡
SMC_DEBUG
 > 3

1213 
b™k16
, 
b™k16_0
, 
b™k16_1
;

1214 
	`HAL_READ_UINT16
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
b™k16
);

1215 
b™k
 = 
	`CYG_LE16_TO_CPU
(bank);

1216 
	`HAL_READ_UINT8
(
˝d
->
ba£
 + (
LAN91CXX_BS
), 
b™k16_0
);

1217 
	`HAL_READ_UINT8
(
˝d
->
ba£
 + (
LAN91CXX_BS
 + 1), 
b™k16_1
);

1219 
db_¥ötf


1220 ("smc_¥obe:B™kÑódá†®16 bô vÆue:0x%04x\n", 
b™k16
);

1221 
db_¥ötf


1223 
b™k16_0
);

1224 
db_¥ötf


1226 
b™k16_1
);

1233 
ªvisi⁄_ªgi°î
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_REVISION
);

1234 i‡(!
chù_ids
[(
ªvisi⁄_ªgi°î
 >> 4) & 0xF]) {

1236 
db_¥ötf


1237 ("smc_¥obe: IO %" 
PRIxPTR
 ": UnrecognizedÑevisionÑegister:"

1238 " %x, C⁄è˘áuth‹. \n", 
˝d
->
ba£
,

1239 
ªvisi⁄_ªgi°î
);

1241  -
ENODEV
;

1243 
	`db_¥ötf
("LAN91CXX(0x%x) -Åype: %s,Ñev: %01x\n",

1244 
ªvisi⁄_ªgi°î
,

1245 
chù_ids
[(
ªvisi⁄_ªgi°î
 >> 4) & 0xF],

1246 
ªvisi⁄_ªgi°î
 & 0xf);

1249 i‡(
ªvisi⁄_ªgi°î
 == 0x3390) {

1250 
	`db_¥ötf
("!Revision A\n");

1254 
	}
}

1259 
	$œn91cxx_phy_fixed
(
œn91cxx_¥iv_d©a
 *
˝d
)

1261 
my_fixed_ˇps
;

1262 
cfg1
;

1264 
	`DEBUG_FUNCTION
();

1265 
	`db4_¥ötf
("lan91cxx_phy_fixed: full duplex: %d, speed: %d\n",

1266 
˝d
->
c⁄fig
.
˘l_rfdu∂x
, cpd->c⁄fig.
˘l_r•ìd
);

1269 
cfg1
 = 
	`œn91cxx_ªad_phy
(
˝d
, 0, 
LAN91CXX_PHY_CONFIG1
);

1270 
cfg1
 |
PHY_CFG1_LNKDIS
;

1271 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
LAN91CXX_PHY_CONFIG1
, 
cfg1
);

1274 
my_fixed_ˇps
 = 0;

1276 i‡(
˝d
->
c⁄fig
.
˘l_rfdu∂x
)

1277 
my_fixed_ˇps
 |
LAN91CXX_PHY_CTRL_DPLX
;

1279 i‡(
˝d
->
c⁄fig
.
˘l_r•ìd
 == 100)

1280 
my_fixed_ˇps
 |
LAN91CXX_PHY_CTRL_SPEED
;

1283 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
LAN91CXX_PHY_CTRL
, 
my_fixed_ˇps
);

1286 
	`put_ªg
(
˝d
, 
LAN91CXX_RPCR
, cpd->
Ωc_cur_mode
);

1289 
	}
}

1294 
	$œn91cxx_phy_c⁄figuª
(
œn91cxx_¥iv_d©a
 *
˝d
)

1297 
phyaddr
;

1298 
my_phy_ˇps
;

1299 
my_ad_ˇps
;

1300 
°©us
 = 0;

1301 
Áûed
 = 0, 
dñay
;

1303 
	`DEBUG_FUNCTION
();

1306 
˝d
->
aut⁄eg_a˘ive
 = 1;

1309 
phyaddr
 = 
˝d
->phyaddr;

1312 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
PHY_CNTL_REG
, 
PHY_CNTL_RST
);

1315 
dñay
 = 50;

1316 
dñay
--) {

1317 i‡(!(
	`œn91cxx_ªad_phy
(
˝d
, 0, 
PHY_CNTL_REG
)

1318 & 
PHY_CNTL_RST
)) {

1321 
	`HAL_DELAY_US
(100000);

1324 i‡(
dñay
 < 1) {

1325 
	`db_¥ötf
("smc91111:!PHYÑesetÅimed out\n");

1326 
smc_phy_c⁄figuª_exô
;

1330 
˝d
->
œ°Phy18
 = 
	`œn91cxx_ªad_phy
(˝d, 0, 
PHY_INT_REG
);

1334 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
PHY_MASK_REG
,

1335 
PHY_INT_LOSSSYNC
 | 
PHY_INT_CWRD
 | 
PHY_INT_SSD


1336 | 
PHY_INT_ESD
 | 
PHY_INT_RPOL
 | 
PHY_INT_JAB
 |

1337 
PHY_INT_SPDDET
 | 
PHY_INT_DPLXDET
);

1340 
	`put_ªg
(
˝d
, 
LAN91CXX_RPCR
, cpd->
Ωc_cur_mode
);

1343 
my_phy_ˇps
 = 
	`œn91cxx_ªad_phy
(
˝d
, 
phyaddr
, 
PHY_STAT_REG
);

1344 
my_ad_ˇps
 = 
PHY_AD_CSMA
;

1346 i‡(
my_phy_ˇps
 & 
PHY_STAT_CAP_T4
)

1347 
my_ad_ˇps
 |
PHY_AD_T4
;

1349 i‡(
my_phy_ˇps
 & 
PHY_STAT_CAP_TXF
)

1350 
my_ad_ˇps
 |
PHY_AD_TX_FDX
;

1352 i‡(
my_phy_ˇps
 & 
PHY_STAT_CAP_TXH
)

1353 
my_ad_ˇps
 |
PHY_AD_TX_HDX
;

1355 i‡(
my_phy_ˇps
 & 
PHY_STAT_CAP_TF
)

1356 
my_ad_ˇps
 |
PHY_AD_10_FDX
;

1358 i‡(
my_phy_ˇps
 & 
PHY_STAT_CAP_TH
)

1359 
my_ad_ˇps
 |
PHY_AD_10_HDX
;

1362 i‡(
˝d
->
c⁄fig
.
˘l_r•ìd
 != 100) {

1363 
my_ad_ˇps
 &~(
PHY_AD_T4
 | 
PHY_AD_TX_FDX
 | 
PHY_AD_TX_HDX
);

1366 i‡(!
˝d
->
c⁄fig
.
˘l_rfdu∂x
) {

1367 
my_ad_ˇps
 &~(
PHY_AD_TX_FDX
 | 
PHY_AD_10_FDX
);

1371 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
PHY_AD_REG
, 
my_ad_ˇps
);

1373 
	`db4_¥ötf
("smc91111:phy c≠s=%x\n", 
my_phy_ˇps
);

1374 
	`db4_¥ötf
("smc91111:phyádvîti£d c≠s=%x\n", 
my_ad_ˇps
);

1377 i‡(!(
˝d
->
c⁄fig
.
˘l_aut⁄eg
)) {

1378 
	`œn91cxx_phy_fixed
(
˝d
);

1380 
smc_phy_c⁄figuª_exô
;

1384 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
PHY_CNTL_REG
,

1385 
PHY_CNTL_ANEG_EN
 | 
PHY_CNTL_ANEG_RST
);

1389 
dñay
 = 50;

1391 ((
°©us
 =

1392 
	`œn91cxx_ªad_phy
(
˝d
, 0, 
LAN91CXX_PHY_STAT
)) & 0x20)) {

1393 i‡(--
dñay
 <= 0) {

1394 
	`¥ötf
("Timeoutáutonegotiation\n");

1395 
Áûed
 = 1;

1400 i‡(
°©us
 & 
PHY_STAT_REM_FLT
) {

1401 
	`db_¥ötf
("smc91111:PHYÑemote fault detected\n");

1404 
	`db_¥ötf
("smc91111:PHYÑestartingáuto-negotiation\n");

1405 
	`œn91cxx_wrôe_phy
(
˝d
, 0, 
PHY_CNTL_REG
,

1406 
PHY_CNTL_ANEG_EN
 |

1407 
PHY_CNTL_ANEG_RST
 |

1408 
PHY_CNTL_SPEED
 | 
PHY_CNTL_DPLX
);

1410 
	`HAL_DELAY_US
(100000);

1414 i‡(
°©us
 & 
PHY_STAT_REM_FLT
) {

1415 
	`db_¥ötf
("smc91111:PHYÑemote fault detected\n");

1416 
Áûed
 = 1;

1422 i‡(
˝d
->
œ°Phy18
 & 
PHY_INT_SPDDET
) {

1423 
	`db_¥ötf
("smc91111:PHY 100BaseT\n");

1424 
˝d
->
Ωc_cur_mode
 |
LAN91CXX_RPCR_SPEED
;

1426 
	`db_¥ötf
("smc91111:PHY 10BaseT\n");

1427 
˝d
->
Ωc_cur_mode
 &~
LAN91CXX_RPCR_SPEED
;

1430 i‡(
˝d
->
œ°Phy18
 & 
PHY_INT_DPLXDET
) {

1431 
	`db_¥ötf
("smc91111:PHY Full Duplex\n");

1432 
˝d
->
Ωc_cur_mode
 |
LAN91CXX_RPCR_DPLX
;

1434 
	`db_¥ötf
("smc91111:PHY Half Duplex\n");

1435 
˝d
->
Ωc_cur_mode
 &~
LAN91CXX_RPCR_DPLX
;

1439 
	`put_ªg
(
˝d
, 
LAN91CXX_RPCR
, cpd->
Ωc_cur_mode
);

1441 
smc_phy_c⁄figuª_exô
:

1444 
˝d
->
aut⁄eg_a˘ive
 = 0;

1445 
	}
}

1448 
uöt16_t


1449 
	$œn91cxx_ªad_phy
(
œn91cxx_¥iv_d©a
 *
˝d
, 
uöt8_t
 
phyaddr
,

1450 
uöt8_t
 
phyªg
)

1452 
i
, 
mask
, 
öput_idx
, 
˛k_idx
 = 0;

1453 
uöt16_t
 
mii_ªg
, 
vÆue
;

1454 
uöt8_t
 
bôs
[64];

1457 
i
 = 0; i < 32; ++i)

1458 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1461 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1462 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1465 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1466 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1469 
mask
 = 0x10; mask; mask >>= 1) {

1470 i‡(
phyaddr
 & 
mask
)

1471 
bôs
[
˛k_idx
++] =

1472 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1474 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1478 
mask
 = 0x10; mask; mask >>= 1) {

1479 i‡(
phyªg
 & 
mask
)

1480 
bôs
[
˛k_idx
++] =

1481 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1483 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1487 
bôs
[
˛k_idx
++] = 0;

1490 
öput_idx
 = 
˛k_idx
;

1493 
i
 = 0; i < 16; ++i)

1494 
bôs
[
˛k_idx
++] = 0;

1497 
bôs
[
˛k_idx
++] = 0;

1500 
mii_ªg
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_MGMT
);

1503 
mii_ªg
 &~(
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MCLK
 |

1504 
LAN91CXX_MGMT_MDI
 | 
LAN91CXX_MGMT_MDO
);

1505 
	`HAL_DELAY_US
(50);

1508 
i
 = 0; i < (
bôs
); ++i) {

1510 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
, 
mii_ªg
 | 
bôs
[
i
]);

1511 
	`HAL_DELAY_US
(50);

1514 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
,

1515 
mii_ªg
 | 
bôs
[
i
] | 
LAN91CXX_MGMT_MCLK
);

1516 
	`HAL_DELAY_US
(50);

1518 
bôs
[
i
] |
	`gë_ªg
(
˝d
, 
LAN91CXX_MGMT
Ë& 
LAN91CXX_MGMT_MDI
;

1522 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
, 
mii_ªg
);

1523 
	`HAL_DELAY_US
(50);

1526 
vÆue
 = 0, 
i
 = 0; i < 16; ++i) {

1527 
vÆue
 <<= 1;

1528 i‡(
bôs
[
öput_idx
++] & 
LAN91CXX_MGMT_MDI
)

1529 
vÆue
 |= 1;

1532 
	`db16_¥ötf
("phy_ªad : %d : %04x\n", 
phyªg
, 
vÆue
);

1533  
vÆue
;

1534 
	}
}

1537 
	$œn91cxx_wrôe_phy
(
œn91cxx_¥iv_d©a
 *
˝d
, 
uöt8_t
 
phyaddr
,

1538 
uöt8_t
 
phyªg
, 
uöt16_t
 
vÆue
)

1540 
i
, 
mask
, 
˛k_idx
 = 0;

1541 
uöt16_t
 
mii_ªg
;

1542 
uöt8_t
 
bôs
[65];

1545 
i
 = 0; i < 32; ++i)

1546 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1549 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1550 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1553 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1554 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1557 
mask
 = 0x10; mask; mask >>= 1) {

1558 i‡(
phyaddr
 & 
mask
)

1559 
bôs
[
˛k_idx
++] =

1560 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1562 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1566 
mask
 = 0x10; mask; mask >>= 1) {

1567 i‡(
phyªg
 & 
mask
)

1568 
bôs
[
˛k_idx
++] =

1569 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1571 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1575 
bôs
[
˛k_idx
++] = 0;

1576 
bôs
[
˛k_idx
++] = 0;

1579 
mask
 = 0x8000; mask; mask >>= 1) {

1580 i‡(
vÆue
 & 
mask
)

1581 
bôs
[
˛k_idx
++] =

1582 
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MDO
;

1584 
bôs
[
˛k_idx
++] = 
LAN91CXX_MGMT_MDOE
;

1588 
bôs
[
˛k_idx
++] = 0;

1591 
mii_ªg
 = 
	`gë_ªg
(
˝d
, 
LAN91CXX_MGMT
);

1594 
mii_ªg
 &~(
LAN91CXX_MGMT_MDOE
 | 
LAN91CXX_MGMT_MCLK
 |

1595 
LAN91CXX_MGMT_MDI
 | 
LAN91CXX_MGMT_MDO
);

1596 
	`HAL_DELAY_US
(50);

1599 
i
 = 0; i < (
bôs
); ++i) {

1601 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
, 
mii_ªg
 | 
bôs
[
i
]);

1602 
	`HAL_DELAY_US
(50);

1605 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
,

1606 
mii_ªg
 | 
bôs
[
i
] | 
LAN91CXX_MGMT_MCLK
);

1607 
	`HAL_DELAY_US
(50);

1613 
	`put_ªg
(
˝d
, 
LAN91CXX_MGMT
, 
mii_ªg
);

1614 
	`HAL_DELAY_US
(50);

1616 
	`db16_¥ötf
("phy_wrôe: %d : %04x\n", 
phyªg
, 
vÆue
);

1617 
	}
}

1620 
	$œn91cxx_¥öt_b™k
(
b™k
){

1621 
œn91cxx_¥iv_d©a
 *
˝d
 = &
smc91111
;

1622 
ªgno
;

1623 
ªgvÆ
[8];

1624 
i
;

1626 i‡–
b™k
 >= 4 )

1628 
i
=0; i<8; i++){

1629 
ªgno
=
i
+
b™k
<<3;

1630 
ªgvÆ
[
i
] = 
	`gë_ªg
(
˝d
, 
ªgno
);

1632 
	`¥ötk
("---- BANK %d ----\n\r",
b™k
);

1633 
i
=0; i<8; i++){

1634 
	`¥ötk
("0x%x: 0x%x\n\r",
i
,
ªgvÆ
[i]);

1637 
	}
}

	@src/libchip/network/smc91111.h

1 #i‚de‡
_SMC91111_H_


2 
	#_SMC91111_H_


	)

4 
	~<libchù/smc91111exp.h
>

5 
	~<πems/b•Io.h
>

7 
	#LAN91CXX_TCR
 0x00

	)

8 
	#LAN91CXX_EPH_STATUS
 0x01

	)

9 
	#LAN91CXX_RCR
 0x02

	)

10 
	#LAN91CXX_COUNTER
 0x03

	)

11 
	#LAN91CXX_MIR
 0x04

	)

12 
	#LAN91CXX_MCR
 0x05

	)

13 
	#LAN91CXX_RPCR
 0x05

	)

14 
	#LAN91CXX_RESERVED_0
 0x06

	)

15 
	#LAN91CXX_BS
 0x07

	)

16 
	#LAN91CXX_CONFIG
 0x08

	)

17 
	#LAN91CXX_BASE_REG
 0x09

	)

18 
	#LAN91CXX_IA01
 0x0a

	)

19 
	#LAN91CXX_IA23
 0x0b

	)

20 
	#LAN91CXX_IA45
 0x0c

	)

21 
	#LAN91CXX_GENERAL
 0x0d

	)

22 
	#LAN91CXX_CONTROL
 0x0e

	)

23 
	#LAN91CXX_BS2
 0x0f

	)

24 
	#LAN91CXX_MMU_COMMAND
 0x10

	)

25 
	#LAN91CXX_PNR
 0x11

	)

26 
	#LAN91CXX_FIFO_PORTS
 0x12

	)

27 
	#LAN91CXX_POINTER
 0x13

	)

28 
	#LAN91CXX_DATA_HIGH
 0x14

	)

29 
	#LAN91CXX_DATA
 0x15

	)

30 
	#LAN91CXX_INTERRUPT
 0x16

	)

31 
	#LAN91CXX_BS3
 0x17

	)

32 
	#LAN91CXX_MT01
 0x18

	)

33 
	#LAN91CXX_MT23
 0x19

	)

34 
	#LAN91CXX_MT45
 0x1a

	)

35 
	#LAN91CXX_MT67
 0x1b

	)

36 
	#LAN91CXX_MGMT
 0x1c

	)

37 
	#LAN91CXX_REVISION
 0x1d

	)

38 
	#LAN91CXX_ERCV
 0x1e

	)

39 
	#LAN91CXX_BS4
 0x1f

	)

41 
	#LAN91CXX_RCR_SOFT_RST
 0x8000

	)

42 
	#LAN91CXX_RCR_FILT_CAR
 0x4000

	)

43 
	#LAN91CXX_RCR_ABORT_ENB
 0x2000

	)

44 
	#LAN91CXX_RCR_STRIP_CRC
 0x0200

	)

45 
	#LAN91CXX_RCR_RXEN
 0x0100

	)

46 
	#LAN91CXX_RCR_ALMUL
 0x0004

	)

47 
	#LAN91CXX_RCR_PRMS
 0x0002

	)

48 
	#LAN91CXX_RCR_RX_ABORT
 0x0001

	)

50 
	#LAN91CXX_TCR_SWFDUP
 0x8000

	)

51 
	#LAN91CXX_TCR_ETEN_TYPE
 0x4000

	)

52 
	#LAN91CXX_TCR_EPH_LOOP
 0x2000

	)

53 
	#LAN91CXX_TCR_STP_SQET
 0x1000

	)

54 
	#LAN91CXX_TCR_FDUPLX
 0x0800

	)

55 
	#LAN91CXX_TCR_MON_CSN
 0x0400

	)

56 
	#LAN91CXX_TCR_NOCRC
 0x0100

	)

57 
	#LAN91CXX_TCR_PAD_EN
 0x0080

	)

58 
	#LAN91CXX_TCR_FORCOL
 0x0004

	)

59 
	#LAN91CXX_TCR_LLOOP
 0x0002

	)

60 
	#LAN91CXX_TCR_TXENA
 0x0001

	)

62 
	#LAN91CXX_POINTER_RCV
 0x8000

	)

63 
	#LAN91CXX_POINTER_AUTO_INCR
 0x4000

	)

64 
	#LAN91CXX_POINTER_READ
 0x2000

	)

65 
	#LAN91CXX_POINTER_ETEN
 0x1000

	)

66 
	#LAN91CXX_POINTER_NOT_EMPTY
 0x0800

	)

69 
	#LAN91CXX_INTERRUPT_TX_IDLE_M
 0x8000

	)

70 
	#LAN91CXX_INTERRUPT_ERCV_INT_M
 0x4000

	)

71 
	#LAN91CXX_INTERRUPT_EPH_INT_M
 0x2000

	)

72 
	#LAN91CXX_INTERRUPT_RX_OVRN_INT_M
 0x1000

	)

73 
	#LAN91CXX_INTERRUPT_ALLOC_INT_M
 0x0800

	)

74 
	#LAN91CXX_INTERRUPT_TX_EMPTY_INT_M
 0x0400

	)

75 
	#LAN91CXX_INTERRUPT_TX_INT_M
 0x0200

	)

76 
	#LAN91CXX_INTERRUPT_RCV_INT_M
 0x0100

	)

77 
	#LAN91CXX_INTERRUPT_TX_IDLE
 0x0080

	)

78 
	#LAN91CXX_INTERRUPT_ERCV_INT
 0x0040

	)

79 
	#LAN91CXX_INTERRUPT_EPH_INT
 0x0020

	)

80 
	#LAN91CXX_INTERRUPT_RX_OVRN_INT
 0x0010

	)

81 
	#LAN91CXX_INTERRUPT_ALLOC_INT
 0x0008

	)

82 
	#LAN91CXX_INTERRUPT_TX_EMPTY_INT
 0x0004

	)

83 
	#LAN91CXX_INTERRUPT_TX_INT
 0x0002

	)

84 
	#LAN91CXX_INTERRUPT_RCV_INT
 0x0001

	)

86 
	#LAN91CXX_INTERRUPT_TX_SET
 0x0006

	)

87 
	#LAN91CXX_INTERRUPT_TX_SET_ACK
 0x0004

	)

88 
	#LAN91CXX_INTERRUPT_TX_FIFO_ACK
 0x0002

	)

89 
	#LAN91CXX_INTERRUPT_TX_SET_M
 0x0600

	)

91 
	#LAN91CXX_CONTROL_RCV_BAD
 0x4000

	)

92 
	#LAN91CXX_CONTROL_AUTO_RELEASE
 0x0800

	)

93 
	#LAN91CXX_CONTROL_LE_ENABLE
 0x0080

	)

94 
	#LAN91CXX_CONTROL_CR_ENABLE
 0x0040

	)

95 
	#LAN91CXX_CONTROL_TE_ENABLE
 0x0020

	)

98 
	#LAN91CXX_CONTROL_EEPROM_SELECT
 0x0004

	)

99 
	#LAN91CXX_CONTROL_RELOAD
 0x0002

	)

100 
	#LAN91CXX_CONTROL_STORE
 0x0001

	)

101 
	#LAN91CXX_CONTROL_EEPROM_BUSY
 0x0003

	)

102 
	#LAN91CXX_ESA_EEPROM_OFFSET
 0x0020

	)

104 
	#LAN91CXX_STATUS_TX_UNRN
 0x8000

	)

105 
	#LAN91CXX_STATUS_LINK_OK
 0x4000

	)

106 
	#LAN91CXX_STATUS_CTR_ROL
 0x1000

	)

107 
	#LAN91CXX_STATUS_EXC_DEF
 0x0800

	)

108 
	#LAN91CXX_STATUS_LOST_CARR
 0x0400

	)

109 
	#LAN91CXX_STATUS_LATCOL
 0x0200

	)

110 
	#LAN91CXX_STATUS_WAKEUP
 0x0100

	)

111 
	#LAN91CXX_STATUS_TX_DEFR
 0x0080

	)

112 
	#LAN91CXX_STATUS_LTX_BRD
 0x0040

	)

113 
	#LAN91CXX_STATUS_SQET
 0x0020

	)

114 
	#LAN91CXX_STATUS_16COL
 0x0010

	)

115 
	#LAN91CXX_STATUS_LTX_MULT
 0x0008

	)

116 
	#LAN91CXX_STATUS_MUL_COL
 0x0004

	)

117 
	#LAN91CXX_STATUS_SNGL_COL
 0x0002

	)

118 
	#LAN91CXX_STATUS_TX_SUC
 0x0001

	)

120 
	#LAN91CXX_MMU_COMMAND_BUSY
 0x0001

	)

122 
	#LAN91CXX_MMU_no›
 0x0000

	)

123 
	#LAN91CXX_MMU_Æloc_f‹_tx
 0x0020

	)

124 
	#LAN91CXX_MMU_ª£t_mmu
 0x0040

	)

125 
	#LAN91CXX_MMU_ªm_rx_‰ame
 0x0060

	)

126 
	#LAN91CXX_MMU_ªm_tx_‰ame
 0x0070

	)

127 
	#LAN91CXX_MMU_ªmªl_rx_‰ame
 0x0080

	)

128 
	#LAN91CXX_MMU_ªl_∑ckë
 0x00a0

	)

129 
	#LAN91CXX_MMU_íq_∑ckë
 0x00c0

	)

130 
	#LAN91CXX_MMU_ª£t_tx_fifo
 0x00e0

	)

132 
	#LAN91CXX_CONTROLBYTE_CRC
 0x1000

	)

133 
	#LAN91CXX_CONTROLBYTE_ODD
 0x2000

	)

134 
	#LAN91CXX_CONTROLBYTE_RX
 0x4000

	)

136 
	#LAN91CXX_RX_STATUS_ALIGNERR
 0x8000

	)

137 
	#LAN91CXX_RX_STATUS_BCAST
 0x4000

	)

138 
	#LAN91CXX_RX_STATUS_BADCRC
 0x2000

	)

139 
	#LAN91CXX_RX_STATUS_ODDFRM
 0x1000

	)

140 
	#LAN91CXX_RX_STATUS_TOOLONG
 0x0800

	)

141 
	#LAN91CXX_RX_STATUS_TOOSHORT
 0x0400

	)

142 
	#LAN91CXX_RX_STATUS_HASHVALMASK
 0x007ê

	)

143 
	#LAN91CXX_RX_STATUS_MCAST
 0x0001

	)

144 
	#LAN91CXX_RX_STATUS_BAD
 \

145 (
LAN91CXX_RX_STATUS_ALIGNERR
 | \

146 
LAN91CXX_RX_STATUS_BADCRC
 | \

147 
LAN91CXX_RX_STATUS_TOOLONG
 | \

148 
LAN91CXX_RX_STATUS_TOOSHORT
)

	)

150 
	#LAN91CXX_RX_STATUS_IS_ODD
(
__˝d
,
__°©
Ë((__°©Ë& 
LAN91CXX_RX_STATUS_ODDFRM
)

	)

151 
	#LAN91CXX_CONTROLBYTE_IS_ODD
(
__˝d
,
__vÆ
Ë((__vÆË& 
LAN91CXX_CONTROLBYTE_ODD
)

	)

154 
	#LAN91CXX_ECOR
 0x8000

	)

155 
	#LAN91CXX_ECOR_RESET
 (1<<7)

	)

156 
	#LAN91CXX_ECOR_LEVIRQ
 (1<<6)

	)

157 
	#LAN91CXX_ECOR_ATTWR
 (1<<2)

	)

158 
	#LAN91CXX_ECOR_ENABLE
 (1<<0)

	)

160 
	#LAN91CXX_ECSR
 0x8002

	)

161 
	#LAN91CXX_ECSR_IOIS8
 (1<<5)

	)

162 
	#LAN91CXX_ECSR_PWRDWN
 (1<<2)

	)

163 
	#LAN91CXX_ECSR_INTR
 (1<<1)

	)

166 
	#LAN91CXX_MGMT_MDO
 0x0001

	)

167 
	#LAN91CXX_MGMT_MDI
 0x0002

	)

168 
	#LAN91CXX_MGMT_MCLK
 0x0004

	)

169 
	#LAN91CXX_MGMT_MDOE
 0x0008

	)

172 
	#LAN91CXX_PHY_CTRL
 0

	)

173 
	#LAN91CXX_PHY_STAT
 1

	)

174 
	#LAN91CXX_PHY_ID1
 2

	)

175 
	#LAN91CXX_PHY_ID2
 3

	)

176 
	#LAN91CXX_PHY_AUTO_AD
 4

	)

177 
	#LAN91CXX_PHY_AUTO_CAP
 5

	)

178 
	#LAN91CXX_PHY_CONFIG1
 16

	)

179 
	#LAN91CXX_PHY_CONFIG2
 17

	)

180 
	#LAN91CXX_PHY_STATUS_OUT
 18

	)

181 
	#LAN91CXX_PHY_MASK
 19

	)

184 
	#LAN91CXX_PHY_CTRL_COLTST
 (1 << 7)

	)

185 
	#LAN91CXX_PHY_CTRL_DPLX
 (1 << 8)

	)

186 
	#LAN91CXX_PHY_CTRL_ANEG_RST
 (1 << 9)

	)

187 
	#LAN91CXX_PHY_CTRL_MII_DIS
 (1 << 10)

	)

188 
	#LAN91CXX_PHY_CTRL_PDN
 (1 << 11)

	)

189 
	#LAN91CXX_PHY_CTRL_ANEG_EN
 (1 << 12)

	)

190 
	#LAN91CXX_PHY_CTRL_SPEED
 (1 << 13)

	)

191 
	#LAN91CXX_PHY_CTRL_LPBK
 (1 << 14)

	)

192 
	#LAN91CXX_PHY_CTRL_RST
 (1 << 15)

	)

195 
	#PHY_CFG1_LNKDIS
 0x8000

	)

196 
	#PHY_CFG1_XMTDIS
 0x4000

	)

197 
	#PHY_CFG1_XMTPDN
 0x2000

	)

198 
	#PHY_CFG1_BYPSCR
 0x0400

	)

199 
	#PHY_CFG1_UNSCDS
 0x0200

	)

200 
	#PHY_CFG1_EQLZR
 0x0100

	)

201 
	#PHY_CFG1_CABLE
 0x0080

	)

202 
	#PHY_CFG1_RLVL0
 0x0040

	)

203 
	#PHY_CFG1_TLVL_SHIFT
 2

	)

204 
	#PHY_CFG1_TLVL_MASK
 0x003C

	)

205 
	#PHY_CFG1_TRF_MASK
 0x0003

	)

208 
	#PHY_CFG2_REG
 0x11

	)

209 
	#PHY_CFG2_APOLDIS
 0x0020

	)

210 
	#PHY_CFG2_JABDIS
 0x0010

	)

211 
	#PHY_CFG2_MREG
 0x0008

	)

212 
	#PHY_CFG2_INTMDIO
 0x0004

	)

215 
	#PHY_INT_REG
 0x12

	)

216 
	#PHY_INT_INT
 0x8000

	)

217 
	#PHY_INT_LNKFAIL
 0x4000

	)

218 
	#PHY_INT_LOSSSYNC
 0x2000

	)

219 
	#PHY_INT_CWRD
 0x1000

	)

220 
	#PHY_INT_SSD
 0x0800

	)

221 
	#PHY_INT_ESD
 0x0400

	)

222 
	#PHY_INT_RPOL
 0x0200

	)

223 
	#PHY_INT_JAB
 0x0100

	)

224 
	#PHY_INT_SPDDET
 0x0080

	)

225 
	#PHY_INT_DPLXDET
 0x0040

	)

228 
	#PHY_MASK_REG
 0x13

	)

230 
	#LAN91CXX_RPCR_LEDA_LINK
 (0 << 2)

	)

231 
	#LAN91CXX_RPCR_LEDA_TXRX
 (4 << 2)

	)

232 
	#LAN91CXX_RPCR_LEDA_RX
 (6 << 2)

	)

233 
	#LAN91CXX_RPCR_LEDA_TX
 (7 << 2)

	)

234 
	#LAN91CXX_RPCR_LEDB_LINK
 (0 << 5)

	)

235 
	#LAN91CXX_RPCR_LEDB_TXRX
 (4 << 5)

	)

236 
	#LAN91CXX_RPCR_LEDB_RX
 (6 << 5)

	)

237 
	#LAN91CXX_RPCR_LEDB_TX
 (7 << 5)

	)

238 
	#LAN91CXX_RPCR_ANEG
 (1 << 11)

	)

239 
	#LAN91CXX_RPCR_DPLX
 (1 << 12)

	)

240 
	#LAN91CXX_RPCR_SPEED
 (1 << 13)

	)

243 
	#PHY_CNTL_REG
 0x00

	)

244 
	#PHY_CNTL_RST
 0x8000

	)

245 
	#PHY_CNTL_LPBK
 0x4000

	)

246 
	#PHY_CNTL_SPEED
 0x2000

	)

247 
	#PHY_CNTL_ANEG_EN
 0x1000

	)

248 
	#PHY_CNTL_PDN
 0x0800

	)

249 
	#PHY_CNTL_MII_DIS
 0x0400

	)

250 
	#PHY_CNTL_ANEG_RST
 0x0200

	)

251 
	#PHY_CNTL_DPLX
 0x0100

	)

252 
	#PHY_CNTL_COLTST
 0x0080

	)

255 
	#PHY_STAT_REG
 0x01

	)

256 
	#PHY_STAT_CAP_T4
 0x8000

	)

257 
	#PHY_STAT_CAP_TXF
 0x4000

	)

258 
	#PHY_STAT_CAP_TXH
 0x2000

	)

259 
	#PHY_STAT_CAP_TF
 0x1000

	)

260 
	#PHY_STAT_CAP_TH
 0x0800

	)

261 
	#PHY_STAT_CAP_SUPR
 0x0040

	)

262 
	#PHY_STAT_ANEG_ACK
 0x0020

	)

263 
	#PHY_STAT_REM_FLT
 0x0010

	)

264 
	#PHY_STAT_CAP_ANEG
 0x0008

	)

265 
	#PHY_STAT_LINK
 0x0004

	)

266 
	#PHY_STAT_JAB
 0x0002

	)

267 
	#PHY_STAT_EXREG
 0x0001

	)

268 
	#PHY_STAT_RESERVED
 0x0780

	)

271 
	#PHY_ID1_REG
 0x02

	)

272 
	#PHY_ID2_REG
 0x03

	)

275 
	#PHY_AD_REG
 0x04

	)

276 
	#PHY_AD_NP
 0x8000

	)

277 
	#PHY_AD_ACK
 0x4000

	)

278 
	#PHY_AD_RF
 0x2000

	)

279 
	#PHY_AD_T4
 0x0200

	)

280 
	#PHY_AD_TX_FDX
 0x0100

	)

281 
	#PHY_AD_TX_HDX
 0x0080

	)

282 
	#PHY_AD_10_FDX
 0x0040

	)

283 
	#PHY_AD_10_HDX
 0x0020

	)

284 
	#PHY_AD_CSMA
 0x0001

	)

287 
	gdebugÊag_out
 = 0;

289 
	#dbc_¥ötf
(
lvl
,
f‹m©
, 
¨gs
...) do { \

290 i‡(!
debugÊag_out
) { \

291 i‡(
lvl
 & 
DEBUG
) { \

292 
	`¥ötk
(
f‹m©
,##
¨gs
); \

295 } 0)

	)

297 
	#db64_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(64,f‹m©,##¨gs);

	)

298 
	#db16_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(16,f‹m©,##¨gs);

	)

299 
	#db9_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(9,f‹m©,##¨gs);

	)

300 
	#db4_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(4,f‹m©,##¨gs);

	)

301 
	#db2_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(2,f‹m©,##¨gs);

	)

302 
	#db1_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(1,f‹m©,##¨gs);

	)

303 
	#db_¥ötf
(
f‹m©
, 
¨gs
...Ë
	`dbc_¥ötf
(0xffff,f‹m©,##¨gs);

	)

305 #i‡
DEBUG
 & 1

306 
	#DEBUG_FUNCTION
(Ëdÿ{ 
	`db_¥ötf
("# %s\n", 
__FUNCTION__
); } 0)

	)

308 
	#DEBUG_FUNCTION
(Ëdÿ{} 0)

	)

314 
	ssmsc_œn91cxx_°©s
 {

315 
	mtx_good
 ;

316 
	mtx_max_cﬁlisi⁄s
 ;

317 
	mtx_œã_cﬁlisi⁄s
 ;

318 
	mtx_undîrun
 ;

319 
	mtx_ˇºõr_loss
 ;

320 
	mtx_de„ºed
 ;

321 
	mtx_sqëe°îr‹s
 ;

322 
	mtx_sögÀ_cﬁlisi⁄s
;

323 
	mtx_mu…_cﬁlisi⁄s
 ;

324 
	mtx_tŸÆ_cﬁlisi⁄s
 ;

325 
	mrx_good
 ;

326 
	mrx_¸c_îr‹s
 ;

327 
	mrx_Æign_îr‹s
 ;

328 
	mrx_ªsour˚_îr‹s
 ;

329 
	mrx_ovîrun_îr‹s
 ;

330 
	mrx_cﬁlisi⁄s
 ;

331 
	mrx_sh‹t_‰ames
 ;

332 
	mrx_too_l⁄g_‰ames
 ;

333 
	mrx_symbﬁ_îr‹s
 ;

334 
	möãºu±s
 ;

335 
	mrx_cou¡
 ;

336 
	mrx_dñivî
 ;

337 
	mrx_ªsour˚
 ;

338 
	mrx_ª°¨t
 ;

339 
	mtx_cou¡
 ;

340 
	mtx_com∂ëe
 ;

341 
	mtx_dr›≥d
 ;

343 
	#INCR_STAT
(
c
,
n
Ë(((c)->
°©s
.n)++)

	)

345 
	gœn91cxx_¥iv_d©a
;

347 
	sœn91cxx_¥iv_d©a
 {

350 
¨pcom
 
	m¨pcom
;

351 
πems_id
 
	mrxD´m⁄Tid
;

352 
πems_id
 
	mtxD´m⁄Tid
;

354 
scmv91111_c⁄figuøti⁄_t
 
	mc⁄fig
;

357 
	mΩc_cur_mode
;

358 
	maut⁄eg_a˘ive
;

359 
	mphyaddr
;

360 
	mœ°Phy18
;

362 
	mtxbusy
;

363 
	mtxkey
;

364 * 
	mba£
;

366 
	möãºu±
;

367 
	míaddr
[6];

372 (*
	mc⁄fig_íaddr
)(
œn91cxx_¥iv_d©a
* 
	m˝d
);

373 
	mh¨dwúed_eß
;

374 
	mtx∑ckë
;

375 
	mrx∑ckë
;

376 
	mwôhö_£nd
;

377 
	mc111_ªva
;

378 
smsc_œn91cxx_°©s
 
	m°©s
;

379 } 
	tœn91cxx_¥iv_d©a
;

383 #ifde‡
LAN91CXX_32BIT_RX


384 
	trxd_t
;

386 
	trxd_t
;

389 
	s_debug_ªgs_∑ú
 {

390 
	mªg
; *
	m«me
; 
_debug_ªgs_∑ú
 *
	mbôs
;

391 } 
	tdebug_ªgs_∑ú
;

393 
debug_ªgs_∑ú
 
	gdebug_ªgs
[] = {

394 {
LAN91CXX_TCR
 , "LAN91CXX_TCR" ,0},

395 {
LAN91CXX_EPH_STATUS
 , "LAN91CXX_EPH_STATUS",0},

396 {
LAN91CXX_RCR
 , "LAN91CXX_RCR" ,0},

397 {
LAN91CXX_COUNTER
 , "LAN91CXX_COUNTER" ,0},

398 {
LAN91CXX_MIR
 , "LAN91CXX_MIR" ,0},

399 {
LAN91CXX_MCR
 , "LAN91CXX_MCR" ,0},

400 {
LAN91CXX_RPCR
 , "LAN91CXX_RPCR" ,0},

401 {
LAN91CXX_RESERVED_0
 , "LAN91CXX_RESERVED_0",0},

402 {
LAN91CXX_BS
 , "LAN91CXX_BS" ,0},

403 {
LAN91CXX_CONFIG
 , "LAN91CXX_CONFIG" ,0},

404 {
LAN91CXX_BASE_REG
 , "LAN91CXX_BASE_REG" ,0},

405 {
LAN91CXX_IA01
 , "LAN91CXX_IA01" ,0},

406 {
LAN91CXX_IA23
 , "LAN91CXX_IA23" ,0},

407 {
LAN91CXX_IA45
 , "LAN91CXX_IA45" ,0},

408 {
LAN91CXX_GENERAL
 , "LAN91CXX_GENERAL" ,0},

409 {
LAN91CXX_CONTROL
 , "LAN91CXX_CONTROL" ,0},

410 {
LAN91CXX_BS2
 , "LAN91CXX_BS2" ,0},

411 {
LAN91CXX_MMU_COMMAND
, "LAN91CXX_MMU_COMMAND",0},

412 {
LAN91CXX_PNR
 , "LAN91CXX_PNR" ,0},

413 {
LAN91CXX_FIFO_PORTS
 , "LAN91CXX_FIFO_PORTS" ,0},

414 {
LAN91CXX_POINTER
 , "LAN91CXX_POINTER" ,0},

415 {
LAN91CXX_DATA_HIGH
 , "LAN91CXX_DATA_HIGH" ,0},

416 {
LAN91CXX_DATA
 , "LAN91CXX_DATA" ,0},

417 {
LAN91CXX_INTERRUPT
 , "LAN91CXX_INTERRUPT" ,0},

418 {
LAN91CXX_BS3
 , "LAN91CXX_BS3" ,0},

419 {
LAN91CXX_MT01
 , "LAN91CXX_MT01" ,0},

420 {
LAN91CXX_MT23
 , "LAN91CXX_MT23" ,0},

421 {
LAN91CXX_MT45
 , "LAN91CXX_MT45" ,0},

422 {
LAN91CXX_MT67
 , "LAN91CXX_MT67" ,0},

424 {
LAN91CXX_REVISION
 , "LAN91CXX_REVISION" ,0},

425 {
LAN91CXX_ERCV
 , "LAN91CXX_ERCV" ,0},

426 {
LAN91CXX_BS4
 , "LAN91CXX_BS4" ,0},

433 *
	gdbg_¥efix
 = "";

435 #i‚de‡
SMSC_PLATFORM_DEFINED_GET_REG


436 
__ölöe__
 

437 
	$gë_ªg
(
œn91cxx_¥iv_d©a
 *
˝d
, 
ªgno
)

439 
vÆ
; 
debug_ªgs_∑ú
 *
dbg
 = 
debug_ªgs
; 
c
;

440 
uöt32_t
 
Irql
;

444 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
+(
LAN91CXX_BS
), 
	`CYG_CPU_TO_LE16
(
ªgno
>>3));

445 
	`HAL_READ_UINT16
(
˝d
->
ba£
+((
ªgno
&0x7)), 
vÆ
);

446 
vÆ
 = 
	`CYG_LE16_TO_CPU
(val);

450 #i‡
DEBUG
 & 32

451 (
c
 = 
dbg
->
ªg
) != -1) {

452 i‡(
c
 =
ªgno
) {

453 
	`db_¥ötf
("%§ódÑeg [%d:%x] -> 0x%04x (%-20s)\n", 
dbg_¥efix
, 
ªgno
>>3,‘egno&0x7)*2, 
vÆ
, 
dbg
->
«me
);

456 
dbg
++;

459 
	`db2_¥ötf
("%§ódÑeg %d:%x -> 0x%04x\n", 
dbg_¥efix
, 
ªgno
>>3,‘egno&0x7)*2, 
vÆ
);

462  
vÆ
;

463 
	}
}

466 #i‚de‡
SMSC_PLATFORM_DEFINED_PUT_REG


467 
__ölöe__
 

468 
	$put_ªg
(
œn91cxx_¥iv_d©a
 *
˝d
, 
ªgno
, 
vÆ
)

470 
debug_ªgs_∑ú
 *
dbg
 = 
debug_ªgs
; 
c
;

471 
uöt32_t
 
Irql
;

473 #i‡
DEBUG
 & 32

474 (
c
 = 
dbg
->
ªg
) != -1) {

475 i‡(
c
 =
ªgno
) {

476 
	`db_¥ötf
("%swrôêªg [%d:%x] <- 0x%04x (%-20s)\n", 
dbg_¥efix
, 
ªgno
>>3, (ªgno&0x07)*2, 
vÆ
, 
dbg
->
«me
);

479 
dbg
++;

482 
	`db2_¥ötf
("%swrôêªg %d:%x <- 0x%04x\n", 
dbg_¥efix
, 
ªgno
>>3,‘egno&0x7)*2, 
vÆ
);

487 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
+(
LAN91CXX_BS
), 
	`CYG_CPU_TO_LE16
(
ªgno
>>3));

488 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
+((
ªgno
&0x7)), 
	`CYG_CPU_TO_LE16
(
vÆ
));

492 
	}
}

495 #i‚de‡
SMSC_PLATFORM_DEFINED_PUT_DATA


498 
__ölöe__
 

499 
	$put_d©a
(
œn91cxx_¥iv_d©a
 *
˝d
, 
vÆ
)

501 
	`db2_¥ötf
("%s[wd©a] <- 0x%04x\n", 
dbg_¥efix
, 
vÆ
);

503 
	`HAL_WRITE_UINT16
(
˝d
->
ba£
+((
LAN91CXX_DATA
 & 0x7)), 
vÆ
);

505 
	}
}

508 
__ölöe__
 

509 
	$put_d©a8
(
œn91cxx_¥iv_d©a
 *
˝d
, 
vÆ
)

511 
	`db2_¥ötf
("%s[bd©a] <- 0x%02x\n", 
dbg_¥efix
, 
vÆ
);

513 
	`HAL_WRITE_UINT8
(((*)(
˝d
->
ba£
+((
LAN91CXX_DATA
 & 0x7))))+1, 
vÆ
);

515 
	}
}

519 #i‚de‡
SMSC_PLATFORM_DEFINED_GET_DATA


521 
__ölöe__
 
rxd_t


522 
	$gë_d©a
(
œn91cxx_¥iv_d©a
 *
˝d
)

524 
rxd_t
 
vÆ
;

526 #ifde‡
LAN91CXX_32BIT_RX


527 
	`HAL_READ_UINT32
(
˝d
->
ba£
+((
LAN91CXX_DATA_HIGH
 & 0x7)), 
vÆ
);

529 
	`HAL_READ_UINT16
(
˝d
->
ba£
+((
LAN91CXX_DATA
 & 0x7)), 
vÆ
);

532 
	`db2_¥ötf
("%s[rd©a] -> 0x%08x\n", 
dbg_¥efix
, 
vÆ
);

533  
vÆ
;

534 
	}
}

539 #i‚de‡
SMSC_PLATFORM_DEFINED_GET_BANKSEL


540 
__ölöe__
 

541 
	$gë_b™k£l
(
œn91cxx_¥iv_d©a
 *
˝d
)

543 
vÆ
;

545 
	`HAL_READ_UINT16
(
˝d
->
ba£
+(
LAN91CXX_BS
), 
vÆ
);

546 
vÆ
 = 
	`CYG_LE16_TO_CPU
(val);

547 
	`db2_¥ötf
("ªad b™k sñ vÆ 0x%04x\n", 
vÆ
);

548  
vÆ
;

549 
	}
}

	@src/libchip/network/smc91111config.h

1 #i‚de‡
_SMC91111_CONFIG_H_


2 
	#_SMC91111_CONFIG_H_


	)

8 
	#INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

14 
	#START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

17 
	#SMC91111_TX_WAIT_EVENT
 
RTEMS_EVENT_3


	)

21 
	#NOCDRIVER
 1

	)

24 
	#RBUF_SIZE
 1536

	)

26 
	#ET_MINLEN
 64

	)

28 #i‡(
MCLBYTES
 < 
RBUF_SIZE
)

34 
	#LAN91CXX_32BIT_RX


	)

35 
	#LAN91CXX_IS_LAN91C111


	)

39 
	~<°döt.h
>

41 
uöt32_t
 
	tCYG_WORD
;

42 
uöt8_t
 
	tCYG_BYTE
;

43 
uöt16_t
 
	tCYG_WORD16
;

44 
uöt32_t
 
	tCYG_WORD32
;

46 #i‚de‡
CYG_SWAP16


47 
	#CYG_SWAP16
(
_x_
) \

48 ({ 
uöt16_t
 
_x
 = (
_x_
); ((_x << 8Ë| (_x >> 8)); })

	)

51 #i‚de‡
CYG_SWAP32


52 
	#CYG_SWAP32
(
_x_
) \

53 ({ 
uöt32_t
 
_x
 = (
_x_
); \

54 ((
_x
 << 24) | \

55 ((0x0000FF00UL & 
_x
) << 8) | \

56 ((0x00FF0000UL & 
_x
) >> 8) | \

57 (
_x
 >> 24)); })

	)

60 
	#CYG_CPU_TO_BE16
(
_x_
Ë(_x_)

	)

61 
	#CYG_CPU_TO_BE32
(
_x_
Ë(_x_)

	)

62 
	#CYG_BE16_TO_CPU
(
_x_
Ë(_x_)

	)

63 
	#CYG_BE32_TO_CPU
(
_x_
Ë(_x_)

	)

65 
	#CYG_CPU_TO_LE16
(
_x_
Ë
	`CYG_SWAP16
((_x_))

	)

66 
	#CYG_CPU_TO_LE32
(
_x_
Ë
	`CYG_SWAP32
((_x_))

	)

67 
	#CYG_LE16_TO_CPU
(
_x_
Ë
	`CYG_SWAP16
((_x_))

	)

68 
	#CYG_LE32_TO_CPU
(
_x_
Ë
	`CYG_SWAP32
((_x_))

	)

70 
	#CYG_MACRO_START
 dÿ{

	)

71 
	#CYG_MACRO_END
 } 0)

	)

72 
	#HAL_IO_BARRIER
() \

73 
__asm__
 vﬁ©ûê–"" : : : "mem‹y" )

	)

75 
	#HAL_READ_UINT8
–
_ªgi°î_
, 
_vÆue_
 ) \

76 
CYG_MACRO_START
 \

77 ((
_vÆue_
Ë*((vﬁ©ûê
CYG_BYTE
 *)(
_ªgi°î_
))); \

78 
	`HAL_IO_BARRIER
 (); \

79 
CYG_MACRO_END


	)

81 
	#HAL_WRITE_UINT8
–
_ªgi°î_
, 
_vÆue_
 ) \

82 
CYG_MACRO_START
 \

83 (*((vﬁ©ûê
CYG_BYTE
 *)(
_ªgi°î_
)Ë(
_vÆue_
)); \

84 
	`HAL_IO_BARRIER
 (); \

85 
CYG_MACRO_END


	)

87 
	#HAL_READ_UINT16
–
_ªgi°î_
, 
_vÆue_
 ) \

88 
CYG_MACRO_START
 \

89 ((
_vÆue_
Ë*((vﬁ©ûê
CYG_WORD16
 *)(
_ªgi°î_
))); \

90 
	`HAL_IO_BARRIER
 (); \

91 
CYG_MACRO_END


	)

93 
	#HAL_WRITE_UINT16
–
_ªgi°î_
, 
_vÆue_
 ) \

94 
CYG_MACRO_START
 \

95 (*((vﬁ©ûê
CYG_WORD16
 *)(
_ªgi°î_
)Ë(
_vÆue_
)); \

96 
	`HAL_IO_BARRIER
 (); \

97 
CYG_MACRO_END


	)

99 
	#HAL_READ_UINT32
–
_ªgi°î_
, 
_vÆue_
 ) \

100 
CYG_MACRO_START
 \

101 ((
_vÆue_
Ë*((vﬁ©ûê
CYG_WORD32
 *)(
_ªgi°î_
))); \

102 
	`HAL_IO_BARRIER
 (); \

103 
CYG_MACRO_END


	)

105 
	#HAL_READ_UINT16
–
_ªgi°î_
, 
_vÆue_
 ) \

106 
CYG_MACRO_START
 \

107 ((
_vÆue_
Ë*((vﬁ©ûê
CYG_WORD16
 *)(
_ªgi°î_
))); \

108 
	`HAL_IO_BARRIER
 (); \

109 
CYG_MACRO_END


	)

111 
	#CYG_ASSERT
(
c
,
p
Ëdÿ{ i‡(!(c)Ë{ 1Ë{ 
	`¥ötf
’);} }; } 0)

	)

113 
	#HAL_DELAY_US
(
p
Ë
	`πems_èsk_wake_a·î
 (
	`RTEMS_MICROSECONDS_TO_TICKS
 (p))

	)

	@src/libchip/network/smc91111exp.h

1 #i‚de‡
_SMC91111_EXP_H_


2 
	#_SMC91111_EXP_H_


	)

4 
	~<b•.h
>

6 
	sscmv91111_c⁄figuøti⁄
 {

7 *
	mba£addr
;

8 
πems_ve˘‹_numbî
 
	mve˘‹
;

9 
	mpio
;

10 
	m˘l_r•ìd
;

11 
	m˘l_rfdu∂x
;

12 
	m˘l_aut⁄eg
;

13 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


14 c⁄° * 
	möfo
;

15 
πems_›ti⁄
 
	m›ti⁄s
;

16 
πems_öãºu±_h™dÀr
 
	möãºu±_wøµî
;

17 * 
	m¨g
;

19 } 
	tscmv91111_c⁄figuøti⁄_t
;

21 
_πems_smc91111_drivî_©èch
 (
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

22 
scmv91111_c⁄figuøti⁄_t
 * 
scm_c⁄fig
);

	@src/libchip/network/sonic.c

34 
	~<πems.h
>

35 
	~<πems/πems_bsd√t.h
>

36 
	~<libchù/s⁄ic.h
>

38 
	~<°dio.h
>

39 
	~<°rög.h
>

41 
	~<î∫o.h
>

42 
	~<πems/îr‹.h
>

44 
	~<sys/∑øm.h
>

45 
	~<sys/mbuf.h
>

46 
	~<sys/sockë.h
>

47 
	~<sys/sockio.h
>

48 
	~<sys/sockio.h
>

50 
	~<√t/if.h
>

52 
	~<√töë/ö.h
>

53 
	~<√töë/if_ëhî.h
>

55 
πems_i§_íåy
 
£t_ve˘‹
–πems_i§_íåy, 
πems_ve˘‹_numbî
, );

57 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DUMP_MBUFS
)

58 
	~<πems/dumpbuf.h
>

65 
	#SONIC_STATIC
 

	)

70 #i‚de‡
NSONIC


71 
	#NSONIC
 1

	)

82 
	#RRA_EXTRA_COUNT
 0

	)

87 
	#INTERRUPT_EVENT
 
RTEMS_EVENT_1


	)

93 
	#START_TRANSMIT_EVENT
 
RTEMS_EVENT_2


	)

98 
	#MAXIMUM_FRAME_SIZE
 1518

	)

105 
	#RBUF_SIZE
 (( (*Ë+ (
MAXIMUM_FRAME_SIZE
Ë+ 3Ë& ~3)

	)

107 
	#RBUF_WC
 (
RBUF_SIZE
 / 2)

	)

112 
	#LSW
(
p
Ë((
uöt16_t
)((
uöçå_t
)’)))

	)

113 
	#MSW
(
p
Ë((
uöt16_t
)((
uöçå_t
)’Ë>> 16))

	)

114 
	#PTR
(
m
,
l
Ë((*)(((
uöt16_t
)(m)<<16)|(uöt16_t)÷)))

	)

119 
	ss⁄ic_so·c
 {

124 
¨pcom
 
	m¨pcom
;

131 *
	ms⁄ic
;

136 
s⁄ic_wrôe_ªgi°î_t
 
	mwrôe_ªgi°î
;

137 
s⁄ic_ªad_ªgi°î_t
 
	mªad_ªgi°î
;

142 
πems_ve˘‹_numbî
 
	mve˘‹
;

147 
uöt32_t
 
	md¸_vÆue
;

148 
uöt32_t
 
	mdc2_vÆue
;

153 
	mac˚±Brﬂdˇ°
;

158 
πems_id
 
	mrxD´m⁄Tid
;

159 
πems_id
 
	mtxD´m⁄Tid
;

164 
	mrdaCou¡
;

165 
Re˚iveResour˚Poöãr_t
 
	mrß
;

166 
Re˚iveResour˚Poöãr_t
 
	mªa
;

167 
CamDes¸ùt‹Poöãr_t
 
	mcdp
;

168 
Re˚iveDes¸ùt‹Poöãr_t
 
	mrda
;

169 
Re˚iveDes¸ùt‹Poöãr_t
 
	mrdp_œ°
;

174 
	mtdaCou¡
;

175 
TønsmôDes¸ùt‹Poöãr_t
 
	mtdaHód
;

176 
TønsmôDes¸ùt‹Poöãr_t
 
	mtdaTaû
;

181 
	mI¡îru±s
;

182 
	mrxI¡îru±s
;

183 
	mrxMis£d
;

184 
	mrxGü¡
;

185 
	mrxN⁄O˘ë
;

186 
	mrxBadCRC
;

187 
	mrxCﬁlisi⁄
;

189 
	mtxI¡îru±s
;

190 
	mtxSögÀCﬁlisi⁄
;

191 
	mtxMu…ùÀCﬁlisi⁄
;

192 
	mtxCﬁlisi⁄
;

193 
	mtxDe„ºed
;

194 
	mtxUndîrun
;

195 
	mtxL©eCﬁlisi⁄
;

196 
	mtxEx˚ssiveCﬁlisi⁄
;

197 
	mtxEx˚ssiveDe„ºÆ
;

198 
	mtxLo°C¨rõr
;

199 
	mtxRawWaô
;

201 
SONIC_STATIC
 
s⁄ic_so·c
 
	gs⁄ic_so·c
[
NSONIC
];

212 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY_DESCRIPTORS
)

213 
	$s⁄ic_¥öt_tx_des¸ùt‹
(

214 
TønsmôDes¸ùt‹Poöãr_t
 
tdp


217 
	`¥ötf
–"TXD ==> %p", 
tdp
 );

218 
	`¥ötf
–"Ökt_c⁄fig = 0x%04x", 
tdp
->
pkt_c⁄fig
 & 0xffff);

219 
	`¥ötf
–"Ökt_sizê0x%04x\n", 
tdp
->
pkt_size
 & 0xffff );

220 
	`¥ötf
–" føg_cou¡ = %d", 
tdp
->
‰ag_cou¡
 & 0xffff );

222 
	`¥ötf
–"Çexà%p", 
tdp
->
√xt
 );

223 
	`¥ötf
–"Üök∞%p\n", 
tdp
->
lökp
 );

224 
	`¥ötf
–" mbuÂ = %p", 
tdp
->
mbuÂ
 );

225 i‡–
tdp
->
mbuÂ
 )

226 
	`¥ötf
–" mbuÂ->d©®%p", 
	`mtod
 ( 
tdp
->
mbuÂ
, *) );

227 
	`puts
("");

228 
	}
}

230 
	$s⁄ic_¥öt_rx_des¸ùt‹
(

231 
Re˚iveDes¸ùt‹Poöãr_t
 
rdp


234 
	`¥ötf
–"RXD ==> %p\n", 
rdp
 );

235 
	`¥ötf
–" sètu†0x%04x", 
rdp
->
°©us
 & 0xffff );

236 
	`¥ötf
–" byã_cou¡ = 0x%04x\n", 
rdp
->
byã_cou¡
 & 0xffff );

237 
	`¥ötf
–"Ökà0x%04x%04x", 
rdp
->
pkt_msw
,Ñdp->
pkt_lsw
 );

238 
	`¥ötf
–" seq_nÿ%d", 
rdp
->
£q_no
 );

239 
	`¥ötf
–"Üök = %d\n", 
rdp
->
lök
 );

240 
	`¥ötf
–" in_u£ = %d", 
rdp
->
ö_u£
 );

241 
	`¥ötf
–"Çexà%p", 
rdp
->
√xt
 );

242 
	`¥ötf
–" mbuÂ = %p", 
rdp
->
mbuÂ
 );

243 i‡–
rdp
->
mbuÂ
 )

244 
	`¥ötf
–" mbuÂ->d©®%p", 
	`mtod
 ( 
rdp
->
mbuÂ
, *) );

245 
	`puts
("");

246 
	}
}

257 
	$s⁄ic_íabÀ_öãºu±s
(

258 
s⁄ic_so·c
 *
sc
,

259 
uöt32_t
 
mask


262 *
Ω
 = 
sc
->
s⁄ic
;

263 
πems_öãºu±_Àvñ
 
Àvñ
;

265 
	`πems_öãºu±_dißbÀ
–
Àvñ
 );

266 (*
sc
->
wrôe_ªgi°î
)(

267 
Ω
,

268 
SONIC_REG_IMR
,

269 (*
sc
->
ªad_ªgi°î
)(
Ω
, 
SONIC_REG_IMR
Ë| 
mask


271 
	`πems_öãºu±_íabÀ
–
Àvñ
 );

272 
	}
}

274 
	$s⁄ic_dißbÀ_öãºu±s
(

275 
s⁄ic_so·c
 *
sc
,

276 
uöt32_t
 
mask


279 *
Ω
 = 
sc
->
s⁄ic
;

280 
πems_öãºu±_Àvñ
 
Àvñ
;

282 
	`πems_öãºu±_dißbÀ
–
Àvñ
 );

283 (*
sc
->
wrôe_ªgi°î
)(

284 
Ω
,

285 
SONIC_REG_IMR
,

286 (*
sc
->
ªad_ªgi°î
)(
Ω
, 
SONIC_REG_IMR
Ë& ~
mask


288 
	`πems_öãºu±_íabÀ
–
Àvñ
 );

289 
	}
}

291 
	$s⁄ic_˛ór_öãºu±s
(

292 
s⁄ic_so·c
 *
sc
,

293 
uöt32_t
 
mask


296 *
Ω
 = 
sc
->
s⁄ic
;

297 
πems_öãºu±_Àvñ
 
Àvñ
;

299 
	`πems_öãºu±_dißbÀ
–
Àvñ
 );

300 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
, 
mask
);

301 
	`πems_öãºu±_íabÀ
–
Àvñ
 );

302 
	}
}

304 
	$s⁄ic_comm™d
(

305 
s⁄ic_so·c
 *
sc
,

306 
uöt32_t
 
mask


309 *
Ω
 = 
sc
->
s⁄ic
;

310 
πems_öãºu±_Àvñ
 
Àvñ
;

312 
	`πems_öãºu±_dißbÀ
–
Àvñ
 );

313 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
mask
);

314 
	`πems_öãºu±_íabÀ
–
Àvñ
 );

315 
	}
}

321 
SONIC_STATIC
 * 
	$s⁄ic_Æloˇã
(
nbyãs
)

323 *
p
;

324 
a1
, 
a2
;

331 
p
 = 
	`mÆloc
–
nbyãs
, 
M_MBUF
, 
M_NOWAIT
 );

332 i‡(
p
 =
NULL
)

333 
	`πems_∑nic
 ("No memory!");

334 
	`mem£t
 (
p
, '\0', 
nbyãs
);

335 
a1
 = ()
p
;

336 
a2
 = 
a1
 + 
nbyãs
 - 1;

337 i‡((
a1
 >> 16Ë=(
a2
 >> 16))

340 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY_ALLOCATE
)

341 
	`¥ötf
–"s⁄ic_Æloˇã %d byã†© %p\n", 
nbyãs
, 
p
 );

343  
p
;

344 
	}
}

350 
SONIC_STATIC
 
	$s⁄ic_°›
 (
s⁄ic_so·c
 *
sc
)

352 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

354 
iÂ
->
if_Êags
 &~
IFF_RUNNING
;

359 
	`s⁄ic_comm™d
(
sc
, 
CR_HTX
 | 
CR_RXDIS
 );

360 
	}
}

365 
SONIC_STATIC
 
	$s⁄ic_°©s
 (
s⁄ic_so·c
 *
sc
)

367 
	`¥ötf
 (" TŸÆ I¡îru±s:%-8lu", 
sc
->
I¡îru±s
);

368 
	`¥ötf
 (" Rx I¡îru±s:%-8lu", 
sc
->
rxI¡îru±s
);

369 
	`¥ötf
 (" Gü¡:%-8lu", 
sc
->
rxGü¡
);

370 
	`¥ötf
 (" N⁄-o˘ë:%-8lu\n", 
sc
->
rxN⁄O˘ë
);

371 
	`¥ötf
 (" Bad CRC:%-8lu", 
sc
->
rxBadCRC
);

372 
	`¥ötf
 (" Cﬁlisi⁄:%-8lu", 
sc
->
rxCﬁlisi⁄
);

373 
	`¥ötf
 (" Mis£d:%-8lu\n", 
sc
->
rxMis£d
);

375 
	`¥ötf
 ( " Tx I¡îru±s:%-8lu", 
sc
->
txI¡îru±s
);

376 
	`¥ötf
 ( " De„ºed:%-8lu", 
sc
->
txDe„ºed
);

377 
	`¥ötf
 (" Lo° C¨rõr:%-8lu\n", 
sc
->
txLo°C¨rõr
);

378 
	`¥ötf
 ( "SögÀ Cﬁlisi⁄s:%-8lu", 
sc
->
txSögÀCﬁlisi⁄
);

379 
	`¥ötf
 ( "Mu…ùÀ Cﬁlisi⁄s:%-8lu", 
sc
->
txMu…ùÀCﬁlisi⁄
);

380 
	`¥ötf
 ("Ex˚ssivêCﬁlisi⁄s:%-8lu\n", 
sc
->
txEx˚ssiveCﬁlisi⁄
);

381 
	`¥ötf
 ( " TŸÆ Cﬁlisi⁄s:%-8lu", 
sc
->
txCﬁlisi⁄
);

382 
	`¥ötf
 ( " L©êCﬁlisi⁄:%-8lu", 
sc
->
txL©eCﬁlisi⁄
);

383 
	`¥ötf
 (" Undîrun:%-8lu\n", 
sc
->
txUndîrun
);

384 
	`¥ötf
 ( " Raw ouçuàwaô:%-8lu\n", 
sc
->
txRawWaô
);

385 
	}
}

395 
SONIC_STATIC
 
πems_i§
 
	$s⁄ic_öãºu±_h™dÀr
 (
πems_ve˘‹_numbî
 
v
)

397 
s⁄ic_so·c
 *
sc
 = sonic_softc;

398 
uöt32_t
 
i§
, 
imr
;

399 *
Ω
;

401 #i‡(
NSONIC
 > 1)

406 i‡(
sc
->
ve˘‹
 =
v
)

408 i‡(++
sc
 =&
s⁄ic
[
NSONIC
])

416 
Ω
 = 
sc
->
s⁄ic
;

418 
sc
->
I¡îru±s
++;

420 
i§
 = (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
 );

421 
imr
 = (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_IMR
 );

426 i‡(
imr
 & 
i§
 & (
IMR_PRXEN
 | 
IMR_RBAEEN
)) {

427 
imr
 &~(
IMR_PRXEN
 | 
IMR_RBAEEN
);

428 
sc
->
rxI¡îru±s
++;

429 
	`πems_bsd√t_evít_£nd
 (
sc
->
rxD´m⁄Tid
, 
INTERRUPT_EVENT
);

430 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_IMR
, 
imr
 );

431 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
, 
i§
 & 
ISR_PKTRX
 );

439 i‡(
imr
 & 
i§
 & (
IMR_PINTEN
 | 
IMR_TXEREN
)) {

440 
sc
->
txI¡îru±s
++;

441 
	`πems_bsd√t_evít_£nd
 (
sc
->
txD´m⁄Tid
, 
INTERRUPT_EVENT
);

442 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
, 
ISR_PINT
 | 
ISR_TXDN
 | 
ISR_TXER
 );

445 
	}
}

459 
SONIC_STATIC
 
	$s⁄ic_ªtúe_tda
 (
s⁄ic_so·c
 *
sc
)

461 
uöt16_t
 
°©us
;

462 
cﬁlisi⁄s
;

463 
mbuf
 *
m
, *
n
;

468 (
°©us
 = 
sc
->
tdaTaû
->status) != 0) {

470 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DESCRIPTORS
)

471 
	`¥ötf
–"ªtúêTDA %∞(0x%04x)\n", 
sc
->
tdaTaû
, 
°©us
 );

474 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

480 i‡–(
°©us
 & ~(
TDA_STATUS_COLLISION_MASK
|
TDA_STATUS_DEF
)) != 0x0001 )

481 
	`¥ötf
( "ERROR:Ñetire TDA %p (0x%08x)\n",

482 
sc
->
tdaTaû
, sc->tdaTaû->
°©us
 );

488 i‡(
°©us
 & (
TDA_STATUS_EXD
 |

489 
TDA_STATUS_EXC
 |

490 
TDA_STATUS_FU
 |

491 
TDA_STATUS_BCM
)) {

496 
uöt16_t
 
lök
;

497 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

498 
	`¥ötf
("restarting sonicáfterÉrror\n");

501 
lök
 = *(
sc
->
tdaTaû
->
lökp
);

503 i‡((
lök
 & 
TDA_LINK_EOL
) == 0) {

504 *
Ω
 = 
sc
->
s⁄ic
;

506 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CTDA
, 
lök
 );

507 
	`s⁄ic_comm™d
(
sc
, 
CR_TXP
 );

514 
cﬁlisi⁄s
 = (
°©us
 & 
TDA_STATUS_COLLISION_MASK
Ë>> 
TDA_STATUS_COLLISION_SHIFT
;

515 i‡(
cﬁlisi⁄s
) {

516 i‡(
cﬁlisi⁄s
 == 1)

517 
sc
->
txSögÀCﬁlisi⁄
++;

519 
sc
->
txMu…ùÀCﬁlisi⁄
++;

520 
sc
->
txCﬁlisi⁄
 +
cﬁlisi⁄s
;

522 i‡(
°©us
 & 
TDA_STATUS_EXC
)

523 
sc
->
txEx˚ssiveCﬁlisi⁄
++;

524 i‡(
°©us
 & 
TDA_STATUS_OWC
)

525 
sc
->
txL©eCﬁlisi⁄
++;

526 i‡(
°©us
 & 
TDA_STATUS_EXD
)

527 
sc
->
txEx˚ssiveDe„ºÆ
++;

528 i‡(
°©us
 & 
TDA_STATUS_DEF
)

529 
sc
->
txDe„ºed
++;

530 i‡(
°©us
 & 
TDA_STATUS_FU
)

531 
sc
->
txUndîrun
++;

532 i‡(
°©us
 & 
TDA_STATUS_CRSL
)

533 
sc
->
txLo°C¨rõr
++;

538 
m
 = 
sc
->
tdaTaû
->
mbuÂ
;

539  
m
 ) {

540 
	`MFREE
(
m
, 
n
);

541 
m
 = 
n
;

548 
sc
->
tdaTaû
->
°©us
 = 0;

553 
sc
->
tdaTaû
 = sc->tdaTaû->
√xt
;

554 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DESCRIPTORS
)

555 
	`¥ötf
–"√xàTDA %p\n", 
sc
->
tdaTaû
 );

558 
	}
}

563 
SONIC_STATIC
 
	$s⁄ic_£nd∑ckë
 (
i‚ë
 *
iÂ
, 
mbuf
 *
m
)

565 
s⁄ic_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

566 
mbuf
 *
l
 = 
NULL
;

567 
TønsmôDes¸ùt‹Poöãr_t
 
tdp
;

568 vﬁ©ûê
TønsmôDes¸ùt‹FøgLök
 *
Â
;

569 
∑ckëSize
;

570 
i
;

571 
πems_evít_£t
 
evíts
;

572 
∑dBuf
[64];

583 
sc
->
tdaHód
->
√xt
->
°©us
 != 0) {

588 
	`s⁄ic_ªtúe_tda
 (
sc
);

590 i‡(
sc
->
tdaHód
->
√xt
->
°©us
 == 0)

593 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

594 
	`¥ötf
("blocking until TDAsáreávailable\n");

605 
	`πems_bsd√t_evít_ª˚ive
 (
INTERRUPT_EVENT
,

606 
RTEMS_WAIT
|
RTEMS_EVENT_ANY
,

607 
RTEMS_NO_TIMEOUT
,

608 &
evíts
);

609 
	`s⁄ic_dißbÀ_öãºu±s
–
sc
, 
IMR_PINTEN
 );

610 
	`s⁄ic_ªtúe_tda
 (
sc
);

619 
tdp
 = 
sc
->
tdaHód
->
√xt
;

620 
tdp
->
mbuÂ
 = 
m
;

621 
∑ckëSize
 = 0;

622 
Â
 = 
tdp
->
‰ag
;

623 
i
 = 0 ; i < 
MAXIMUM_FRAGS_PER_DESCRIPTOR
 ; i++, 
Â
++) {

627 i‡(
m
->
m_Àn
) {

628 *
p
 = 
	`mtod
 (
m
, *);

629 
Â
->
‰ag_lsw
 = 
	`LSW
(
p
);

630 
Â
->
‰ag_msw
 = 
	`MSW
(
p
);

631 
Â
->
‰ag_size
 = 
m
->
m_Àn
;

632 
∑ckëSize
 +
m
->
m_Àn
;

633 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_FRAGMENTS
)

634 
	`¥ötf
( "fp %p 0x%04x%04x %d=%d .. %d\n",

635 
Â
, fp->
‰ag_msw
, fp->
‰ag_lsw
, fp->
‰ag_size
, 
m
->
m_Àn
, 
∑ckëSize
 );

637 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DUMP_TX_MBUFS
)

638 
	`πems_¥öt_buf„r
(

639 
p
,

640 (
Â
->
‰ag_size
 > 
MAXIMUM_FRAME_SIZE
) ? MAXIMUM_FRAME_SIZE : fp->frag_size

643 
l
 = 
m
;

644 
m
 = m->
m_√xt
;

647 
mbuf
 *
n
;

648 
	`MFREE
 (
m
, 
n
);

649 
m
 = 
n
;

650 i‡(
l
 !
NULL
)

651 
l
->
m_√xt
 = 
m
;

656 i‡(
m
 =
NULL
)

663 i‡((
∑ckëSize
 < 64Ë&& (
i
 < 
MAXIMUM_FRAGS_PER_DESCRIPTOR
)) {

664 
∑dSize
 = 64 - 
∑ckëSize
;

665 
Â
++;

666 
Â
->
‰ag_lsw
 = 
	`LSW
(
∑dBuf
);

667 
Â
->
‰ag_msw
 = 
	`MSW
(
∑dBuf
);

668 
Â
->
‰ag_size
 = 
∑dSize
;

669 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_FRAGMENTS
)

670 
	`¥ötf
( "PAD fp %p 0x%04x%04x %d\n",

671 
Â
, fp->
‰ag_msw
, fp->
‰ag_lsw
, fp->
‰ag_size
 );

673 
∑ckëSize
 +
∑dSize
;

674 
i
++;

680 
tdp
->
pkt_size
 = 
∑ckëSize
;

681 
tdp
->
‰ag_cou¡
 = 
i
 + 1;

682 
tdp
->
°©us
 = 0;

688 
tdp
->
lökp
 = &(
Â
+1)->
‰ag_lök
;

689 *
tdp
->
lökp
 = 
	`LSW
—dp->
√xt
Ë| 
TDA_LINK_EOL
;

690 i‡–
sc
->
tdaHód
->
‰ag_cou¡
 )

691 *
sc
->
tdaHód
->
lökp
 &~
TDA_LINK_EOL
;

692 
sc
->
tdaHód
 = 
tdp
;

696 
	`s⁄ic_comm™d
(
sc
, 
CR_TXP
 );

701 
	`s⁄ic_ªtúe_tda
 (
sc
);

702 
	}
}

707 
SONIC_STATIC
 
	$s⁄ic_txD´m⁄
 (*
¨g
)

709 
s⁄ic_so·c
 *
sc
 = (s⁄ic_so·¯*)
¨g
;

710 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

711 
mbuf
 *
m
;

712 
πems_evít_£t
 
evíts
;

718 
	`πems_bsd√t_evít_ª˚ive
 (

719 
START_TRANSMIT_EVENT
,

720 
RTEMS_EVENT_ANY
 | 
RTEMS_WAIT
,

721 
RTEMS_NO_TIMEOUT
,

722 &
evíts


732 
	`IF_DEQUEUE
(&
iÂ
->
if_¢d
, 
m
);

733 i‡(!
m
)

735 
	`s⁄ic_£nd∑ckë
 (
iÂ
, 
m
);

737 
iÂ
->
if_Êags
 &~
IFF_OACTIVE
;

739 
	}
}

753 
SONIC_STATIC
 
	$s⁄ic_rda_waô
(

754 
s⁄ic_so·c
 *
sc
,

755 
Re˚iveDes¸ùt‹Poöãr_t
 
rdp


758 
i
;

759 *
Ω
 = 
sc
->
s⁄ic
;

760 
πems_evít_£t
 
evíts
;

790 i‡((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
 ) & 
ISR_RBAE
) {

792 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

793 
	`¥ötf
( "ERROR:ÜooksÜikeá giantÖacket -- RBAE\n" );

800 i‡(
rdp
->
ö_u£
 =
RDA_IN_USE
) {

801 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

802 
	`¥ötf
( "ERROR:Çope justán RBAE\n" );

810 i‡((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CR
 ) & 
CR_RXEN
)

811 
	`πems_∑nic
 ("SONIC RBAE/RXEN");

816 
sc
->
rxGü¡
++;

829 
i
 = 0 ; i < 2 ; i++) {

830 i‡((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_RRP
 ) ==

831 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_RSA
 ))

832 (*
sc
->
wrôe_ªgi°î
)(

833 
Ω
,

834 
SONIC_REG_RRP
,

835 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_REA
 )

837 (*
sc
->
wrôe_ªgi°î
)(

838 
Ω
,

839 
SONIC_REG_RRP
,

840 (*
sc
->
ªad_ªgi°î
)(
Ω
, 
SONIC_REG_RRP
Ë- (
Re˚iveResour˚_t
)

847 
	`s⁄ic_˛ór_öãºu±s
–
sc
, 
ISR_RBAE
 );

848 
	`s⁄ic_comm™d
–
sc
, 
CR_RXEN
 );

854 i‡(
rdp
->
ö_u£
 =
RDA_IN_USE
)

860 
	`s⁄ic_íabÀ_öãºu±s
–
sc
, (
IMR_PRXEN
 | 
IMR_RBAEEN
) );

865 
	`πems_bsd√t_evít_ª˚ive
(

866 
INTERRUPT_EVENT
,

867 
RTEMS_WAIT
|
RTEMS_EVENT_ANY
,

868 
RTEMS_NO_TIMEOUT
,

869 &
evíts


872 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DESCRIPTORS
)

873 
	`¥ötf
–"RDA %p\n", 
rdp
 );

876 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_ERRORS
)

877 i‡(
rdp
->
°©us
 & 0x000E)

878 
	`¥ötf
–"ERROR: RDA %∞(0x%04x)\n", 
rdp
,Ñdp->
°©us
 );

881 
	}
}

883 #ifde‡
CPU_U32_FIX


895 
	$ùÆign
(
mbuf
 *
m
)

897 *
fú°
, *
œ°
, 
d©a
;

898 
tmp
 = 0;

900 i‡((((Ë
m
->
m_d©a
Ë& 2Ë&& (m->
m_Àn
)) {

901 
œ°
 = (*Ë((((Ë
m
->
m_d©a
Ë+ m->
m_Àn
 + 8) & ~3);

902 
fú°
 = (*Ë(((Ë
m
->
m_d©a
) & ~3);

903 
tmp
 = *
fú°
 << 16;

904 
fú°
++;

906 
d©a
 = *
fú°
;

907 *
fú°
 = 
tmp
 | (
d©a
 >> 16);

908 
tmp
 = 
d©a
 << 16;

909 
fú°
++;

910 } 
fú°
 <
œ°
);

912 
m
->
m_d©a
 = (
ˇddr_t
)((() m->m_data) + 2);

914 
	}
}

920 
SONIC_STATIC
 
	$s⁄ic_rxD´m⁄
 (*
¨g
)

922 
s⁄ic_so·c
 *
sc
 = (s⁄ic_so·¯*)
¨g
;

923 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

924 *
Ω
 = 
sc
->
s⁄ic
;

925 
mbuf
 *
m
;

926 
uöt16_t
 
°©us
;

927 
Re˚iveDes¸ùt‹Poöãr_t
 
rdp
;

928 
Re˚iveResour˚Poöãr_t
 
rwp
, 
ªa
;

929 
uöt16_t
 
√wMis£dTÆly
, 
ﬁdMis£dTÆly
;

931 
rwp
 = 
sc
->
rß
;

932 
ªa
 = 
sc
->rea;

933 
rdp
 = 
sc
->
rda
;

938 
ﬁdMis£dTÆly
 = (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_MPT
 );

947 i‡(
rdp
->
ö_u£
 =
RDA_FREE
) {

948 
	`s⁄ic_rda_waô
 (
sc
, 
rdp
);

951 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DESCRIPTORS
)

952 
	`¥ötf
–"IncomögÖackë %∞°©us=0x%04x\n", 
rdp
,Ñdp->
°©us
 );

958 
°©us
 = 
rdp
->status;

959 i‡(
°©us
 & 
RDA_STATUS_PRX
) {

960 
ëhî_hódî
 *
eh
;

961 *
p
;

971 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY_DESCRIPTORS
)

972 
	`s⁄ic_¥öt_rx_des¸ùt‹
–
rdp
 );

973 i‡((
	`LSW
(
rdp
->
mbuÂ
->
m_d©a
Ë!rdp->
pkt_lsw
)

974 || (
	`MSW
(
rdp
->
mbuÂ
->
m_d©a
Ë!rdp->
pkt_msw
))

975 
	`¥ötf
 ("SONIC RDA/RRA %p, %08x\n",
rdp
->
mbuÂ
->
m_d©a
,‘dp->
pkt_msw
 << 16) |

976 (
rdp
->
pkt_lsw
 & 0x0ffff));

978 
rdp
->
byã_cou¡
 &= 0x0ffff;

979 
m
 = 
rdp
->
mbuÂ
;

980 
m
->
m_Àn
 = m->
m_pkthdr
.
Àn
 = 
rdp
->
byã_cou¡
 -

981 (
uöt32_t
) -

982 (
ëhî_hódî
);

983 
eh
 = 
	`mtod
 (
m
, 
ëhî_hódî
 *);

984 
m
->
m_d©a
 +(
ëhî_hódî
);

986 #ifde‡
CPU_U32_FIX


987 
	`ùÆign
(
m
);

990 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_DUMP_RX_MBUFS
)

991 
	`πems_¥öt_buf„r
–(*Ë
eh
, (
ëhî_hódî
) );

992 
	`πems_¥öt_buf„r
–(*Ë
m
, 96 );

1000 
	`ëhî_öput
 (
iÂ
, 
eh
, 
m
);

1013 i‡((
	`LSW
(
p
Ë!
rwp
->
buff_±r_lsw
)

1014 || (
	`MSW
(
p
Ë!
rwp
->
buff_±r_msw
))

1015 
	`πems_∑nic
 ("SONIC RDA/RRA");

1022 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

1023 
	`MCLGET
 (
m
, 
M_WAIT
);

1024 
m
->
m_pkthdr
.
rcvif
 = 
iÂ
;

1025 
rdp
->
mbuÂ
 = 
m
;

1026 
p
 = 
	`mtod
 (
m
, *);

1032 
rwp
->
buff_±r_lsw
 = 
	`LSW
(
p
);

1033 
rwp
->
buff_±r_msw
 = 
	`MSW
(
p
);

1034 
rwp
->
buff_wc_lsw
 = 
RBUF_WC
;

1035 
rwp
->
buff_wc_msw
 = 0;

1036 
rwp
++;

1038 i‡(
rwp
 =
ªa
) {

1039 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY
)

1040 
	`¥ötf
–"Wøµög RWP from %∞tÿ%p\n", 
rwp
, 
sc
->
rß
 );

1042 
rwp
 = 
sc
->
rß
;

1044 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RWP
 , 
	`LSW
(
rwp
) );

1049 i‡((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
 ) & 
ISR_RBE
)

1050 
	`s⁄ic_˛ór_öãºu±s
–
sc
, 
ISR_RBE
 );

1053 i‡(
°©us
 & 
RDA_STATUS_COL
)

1054 
sc
->
rxCﬁlisi⁄
++;

1055 i‡(
°©us
 & 
RDA_STATUS_FAER
)

1056 
sc
->
rxN⁄O˘ë
++;

1057 i‡(
°©us
 & 
RDA_STATUS_CRCR
)

1058 
sc
->
rxBadCRC
++;

1064 
√wMis£dTÆly
 = (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_MPT
 );

1065 i‡(
√wMis£dTÆly
 !
ﬁdMis£dTÆly
) {

1066 
sc
->
rxMis£d
 +(
√wMis£dTÆly
 - 
ﬁdMis£dTÆly
) & 0xFFFF;

1067 
√wMis£dTÆly
 = 
ﬁdMis£dTÆly
;

1074 
rdp
->
lök
 |
RDA_LINK_EOL
;

1075 
rdp
->
ö_u£
 = 
RDA_FREE
;

1076 
sc
->
rdp_œ°
->
lök
 &~
RDA_LINK_EOL
;

1077 
sc
->
rdp_œ°
 = 
rdp
;

1078 
rdp
 =Ñdp->
√xt
;

1081 
	}
}

1094 
SONIC_STATIC
 
	$s⁄ic_öôülize_h¨dw¨e
(
s⁄ic_so·c
 *
sc
)

1096 *
Ω
 = 
sc
->
s⁄ic
;

1097 
i
;

1098 *
hwaddr
;

1099 
TønsmôDes¸ùt‹Poöãr_t
 
tdp
;

1100 
Re˚iveDes¸ùt‹Poöãr_t
 
‹dp
, 
rdp
;

1101 
Re˚iveResour˚Poöãr_t
 
rwp
;

1102 
mbuf
 *
m
;

1103 *
p
;

1104 
CamDes¸ùt‹Poöãr_t
 
cdp
;

1114 i‡–(*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_SR
 ) <
SONIC_REVISION_B
 ) {

1115 
	`πems_Áèl_îr‹_occuºed
( 0x0BADF00D );

1126 
sc
->
tdaTaû
 = 
	`s⁄ic_Æloˇã
(sc->
tdaCou¡
 *  *
tdp
);

1127 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY
)

1128 
	`¥ötf
–"tdaTaû = %p\n", 
sc
->
tdaTaû
 );

1130 
tdp
 = 
sc
->
tdaTaû
;

1131 
i
 = 0 ; i < 
sc
->
tdaCou¡
 ; i++) {

1144 i‡(
i
 & 3)

1145 
tdp
->
pkt_c⁄fig
 = 
TDA_CONFIG_PINT
;

1147 
tdp
->
°©us
 = 0;

1148 
tdp
->
‰ag_cou¡
 = 0;

1149 
tdp
->
lök_∑d
 = 
	`LSW
—d∞+ 1Ë| 
TDA_LINK_EOL
;

1150 
tdp
->
lökp
 = &(—d∞+ 1)->
‰ag
[0].
‰ag_lök
);

1151 
tdp
->
√xt
 = (
TønsmôDes¸ùt‹_t
 *)(tdp + 1);

1152 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY_DESCRIPTORS
)

1153 
	`s⁄ic_¥öt_tx_des¸ùt‹
–
tdp
 );

1155 
tdp
++;

1157 
tdp
--;

1158 
sc
->
tdaHód
 = 
tdp
;

1159 
tdp
->
lök_∑d
 = 
	`LSW
(
sc
->
tdaTaû
Ë| 
TDA_LINK_EOL
;

1160 
tdp
->
√xt
 = (
TønsmôDes¸ùt‹_t
 *)
sc
->
tdaTaû
;

1161 
tdp
->
lökp
 = &
sc
->
tdaTaû
->
‰ag
[0].
‰ag_lök
;

1170 
sc
->
rda
 = 
	`s⁄ic_Æloˇã
(

1171 (
sc
->
rdaCou¡
 * (
Re˚iveDes¸ùt‹_t
)) +

1172 (
CamDes¸ùt‹_t
) );

1173 
sc
->
cdp
 = (
CamDes¸ùt‹Poöãr_t
Ë((*)sc->
rda
 +

1174 (
sc
->
rdaCou¡
 * (
Re˚iveDes¸ùt‹_t
)));

1175 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY
)

1176 
	`¥ötf
–"rd®¨ó = %p\n", 
sc
->
rda
 );

1177 
	`¥ötf
–"cd∞¨ó = %p\n", 
sc
->
cdp
 );

1180 
‹dp
 = 
rdp
 = 
sc
->
rda
;

1181 
i
 = 0 ; i < 
sc
->
rdaCou¡
 ; i++) {

1186 
rdp
->
lök
 = 
	`LSW
(rdp + 1);

1187 
rdp
->
ö_u£
 = 
RDA_FREE
;

1188 
rdp
->
√xt
 = (
Re˚iveDes¸ùt‹_t
 *)(rdp + 1);

1189 
‹dp
 = 
rdp
;

1190 
rdp
++;

1196 
‹dp
->
√xt
 = 
sc
->
rda
;

1197 
‹dp
->
lök
 = 
	`LSW
(
sc
->
rda
Ë| 
RDA_LINK_EOL
;

1198 
sc
->
rdp_œ°
 = 
‹dp
;

1208 
sc
->
rß
 = 
	`s⁄ic_Æloˇã
((sc->
rdaCou¡
 + 
RRA_EXTRA_COUNT
) *  *sc->rsa);

1209 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY
)

1210 
	`¥ötf
–"rßáª®%p\n", 
sc
->
rß
 );

1218 
rwp
 = 
sc
->
rß
;

1219 
i
 = 0 ; i < (
sc
->
rdaCou¡
 + 
RRA_EXTRA_COUNT
Ë; i++, 
rwp
++) {

1228 
	`MGETHDR
 (
m
, 
M_WAIT
, 
MT_DATA
);

1229 
	`MCLGET
 (
m
, 
M_WAIT
);

1230 
m
->
m_pkthdr
.
rcvif
 = &
sc
->
¨pcom
.
ac_if
;

1231 
sc
->
rda
[
i
].
mbuÂ
 = 
m
;

1233 
p
 = 
	`mtod
 (
m
, *);

1238 
rwp
->
buff_±r_lsw
 = 
	`LSW
(
p
);

1239 
rwp
->
buff_±r_msw
 = 
	`MSW
(
p
);

1240 
rwp
->
buff_wc_lsw
 = 
RBUF_WC
;

1241 
rwp
->
buff_wc_msw
 = 0;

1242 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY_DESCRIPTORS
)

1243 
	`s⁄ic_¥öt_rx_des¸ùt‹
–&
sc
->
rda
[
i
] );

1246 
sc
->
ªa
 = 
rwp
;

1247 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_MEMORY
)

1248 
	`¥ötf
–"ª®¨ó = %p\n", 
sc
->
ªa
 );

1255 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
CR_RST
 | 
CR_STP
 | 
CR_RXDIS
 | 
CR_HTX
 );

1260 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_DCR
, sc->
d¸_vÆue
 );

1261 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_DCR2
, sc->
dc2_vÆue
 );

1263 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
CR_STP
 | 
CR_RXDIS
 | 
CR_HTX
 );

1268 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_IMR
, 0x0 );

1273 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_ISR
, 0x7FFF );

1279 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CRCT
, 0xFFFF );

1280 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_FAET
, 0xFFFF );

1281 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_MPT
, 0xFFFF );

1282 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RSC
, 0 );

1290 i‡(
sc
->
ac˚±Brﬂdˇ°
)

1291 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RCR
, 
RCR_BRD
 );

1293 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RCR
, 0 );

1299 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_URRA
, 
	`MSW
(sc->
rß
) );

1300 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RSA
, 
	`LSW
(sc->
rß
) );

1302 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_REA
, 
	`LSW
(sc->
ªa
) );

1304 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RRP
, 
	`LSW
(sc->
rß
) );

1305 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RWP
, 
	`LSW
(sc->
rß
) );

1307 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_URDA
, 
	`MSW
(sc->
rda
) );

1308 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CRDA
, 
	`LSW
(sc->
rda
) );

1310 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_UTDA
, 
	`MSW
(sc->
tdaTaû
) );

1311 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CTDA
, 
	`LSW
(sc->
tdaTaû
) );

1318 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_EOBC
, 
RBUF_WC
 - 2 );

1324 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
CR_RRRA
 );

1325 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CR
 ) & 
CR_RRRA
)

1332 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 0 );

1338 
hwaddr
 = 
sc
->
¨pcom
.
ac_íaddr
;

1339 
cdp
 = 
sc
->cdp;

1341 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_CAM
)

1342 
	`¥ötf
( "hwaddr: %2x:%2x:%2x:%2x:%2x:%2x\n",

1343 
hwaddr
[0], hwaddr[1], hwaddr[2], hwaddr[3], hwaddr[4], hwaddr[5] );

1346 
cdp
->
˚p
 = 0;

1347 
cdp
->
ˇp0
 = 
hwaddr
[1] << 8 | hwaddr[0];

1348 
cdp
->
ˇp1
 = 
hwaddr
[3] << 8 | hwaddr[2];

1349 
cdp
->
ˇp2
 = 
hwaddr
[5] << 8 | hwaddr[4];

1350 
cdp
->
˚
 = 0x0001;

1352 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CDC
, 1 );

1353 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CDP
, 
	`LSW
(
cdp
) );

1354 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
CR_LCAM
 );

1356 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CR
 ) & 
CR_LCAM
)

1363 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CR
, 
CR_RST
 | 
CR_STP
 | 
CR_RXDIS
 | 
CR_HTX
 );

1365 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_CAM
)

1366 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CEP
, 0 );

1367 
	`¥ötf
 ("Loaded Ethernetáddress into SONIC CAM.\n"

1370 
cdp
->
ˇp2
, cdp->
ˇp1
, cdp->
ˇp0
, cdp->
˚
,

1371 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP2
 ),

1372 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP1
 ),

1373 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP0
 ),

1374 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CE
 ));

1376 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_CEP
, 0 );

1377 i‡(((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP2
 ) !
cdp
->
ˇp2
)

1378 || ((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP1
 ) !
cdp
->
ˇp1
)

1379 || ((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP0
 ) !
cdp
->
ˇp0
)

1380 || ((*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CE
 ) !
cdp
->
˚
)) {

1381 
	`¥ötf
 ("FailedÅoÜoad Ethernetáddress into SONIC CAM.\n"

1384 
cdp
->
ˇp2
, cdp->
ˇp1
, cdp->
ˇp0
, cdp->
˚
,

1385 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP2
 ),

1386 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP1
 ),

1387 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CAP0
 ),

1388 (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_CE
 ));

1389 
	`πems_∑nic
 ("SONIC LCAM");

1393 (*
sc
->
wrôe_ªgi°î
)(
Ω
, 
SONIC_REG_CR
, 
CR_RXEN
 | 
CR_STP
);

1403 (Ë
	`£t_ve˘‹
(
s⁄ic_öãºu±_h™dÀr
, 
sc
->
ve˘‹
, 1);

1409 
	}
}

1415 
SONIC_STATIC
 
	$s⁄ic_°¨t
(
i‚ë
 *
iÂ
)

1417 
s⁄ic_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1419 
	`πems_bsd√t_evít_£nd
(
sc
->
txD´m⁄Tid
, 
START_TRANSMIT_EVENT
);

1420 
iÂ
->
if_Êags
 |
IFF_OACTIVE
;

1421 
	}
}

1427 
SONIC_STATIC
 
	$s⁄ic_öô
 (*
¨g
)

1429 
s⁄ic_so·c
 *
sc
 = 
¨g
;

1430 
i‚ë
 *
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1431 *
Ω
 = 
sc
->
s⁄ic
;

1432 
r¸
;

1434 i‡(
sc
->
txD´m⁄Tid
 == 0) {

1439 
	`s⁄ic_öôülize_h¨dw¨e
 (
sc
);

1444 
sc
->
rxD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("SNrx", 4096, 
s⁄ic_rxD´m⁄
, sc);

1445 
sc
->
txD´m⁄Tid
 = 
	`πems_bsd√t_√w¥oc
 ("SNtx", 4096, 
s⁄ic_txD´m⁄
, sc);

1451 
r¸
 = (*
sc
->
ªad_ªgi°î
)–
Ω
, 
SONIC_REG_RCR
 );

1452 i‡(
iÂ
->
if_Êags
 & 
IFF_PROMISC
)

1453 
r¸
 |
RCR_PRO
;

1455 
r¸
 &~
RCR_PRO
;

1456 (*
sc
->
wrôe_ªgi°î
)–
Ω
, 
SONIC_REG_RCR
, 
r¸
);

1461 
iÂ
->
if_Êags
 |
IFF_RUNNING
;

1466 
	`s⁄ic_íabÀ_öãºu±s
–
sc
, 
IMR_TXEREN
 | (
IMR_PRXEN
 | 
IMR_RBAEEN
) );

1467 
	`s⁄ic_comm™d
–
sc
, 
CR_RXEN
 );

1468 
	}
}

1474 
	$s⁄ic_io˘l
 (
i‚ë
 *
iÂ
, 
io˘l_comm™d_t
 
comm™d
, 
ˇddr_t
 
d©a
)

1476 
s⁄ic_so·c
 *
sc
 = 
iÂ
->
if_so·c
;

1477 
îr‹
 = 0;

1479 
comm™d
) {

1480 
SIOCGIFADDR
:

1481 
SIOCSIFADDR
:

1482 
	`ëhî_io˘l
 (
iÂ
, 
comm™d
, 
d©a
);

1485 
SIOCSIFFLAGS
:

1486 
iÂ
->
if_Êags
 & (
IFF_UP
 | 
IFF_RUNNING
)) {

1487 
IFF_RUNNING
:

1488 
	`s⁄ic_°›
 (
sc
);

1491 
IFF_UP
:

1492 
	`s⁄ic_öô
 (
sc
);

1495 
IFF_UP
 | 
IFF_RUNNING
:

1496 
	`s⁄ic_°›
 (
sc
);

1497 
	`s⁄ic_öô
 (
sc
);

1505 
SIO_RTEMS_SHOW_STATS
:

1506 
	`s⁄ic_°©s
 (
sc
);

1513 
îr‹
 = 
EINVAL
;

1516  
îr‹
;

1517 
	}
}

1525 
	$πems_s⁄ic_drivî_©èch
 (

1526 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

1527 
s⁄ic_c⁄figuøti⁄_t
 *
chù


1530 
s⁄ic_so·c
 *
sc
;

1531 
i‚ë
 *
iÂ
;

1532 
mtu
;

1533 
unôNumbî
;

1534 *
unôName
;

1539 i‡((
unôNumbî
 = 
	`πems_bsd√t_∑r£_drivî_«me
 (
c⁄fig
, &
unôName
)) < 0)

1545 i‡((
unôNumbî
 <0Ë|| (unôNumbî > 
NSONIC
)) {

1546 
	`¥ötf
 ("Bad SONIC unitÇumber.\n");

1549 
sc
 = &
s⁄ic_so·c
[
unôNumbî
 - 1];

1550 
iÂ
 = &
sc
->
¨pcom
.
ac_if
;

1551 i‡(
iÂ
->
if_so·c
 !
NULL
) {

1552 
	`¥ötf
 ("Driverálready in use.\n");

1560 
	`mem£t
–
sc
, 0, (*sc) );

1566 i‡(
c⁄fig
->
h¨dw¨e_addªss
) {

1567 
	`mem˝y
 (
sc
->
¨pcom
.
ac_íaddr
, 
c⁄fig
->
h¨dw¨e_addªss
, 
ETHER_ADDR_LEN
);

1570 
	`mem£t
 (
sc
->
¨pcom
.
ac_íaddr
, 0x08, 
ETHER_ADDR_LEN
);

1572 i‡(
c⁄fig
->
mtu
)

1573 
mtu
 = 
c⁄fig
->mtu;

1575 
mtu
 = 
ETHERMTU
;

1576 i‡(
c⁄fig
->
rbuf_cou¡
)

1577 
sc
->
rdaCou¡
 = 
c⁄fig
->
rbuf_cou¡
;

1579 
sc
->
rdaCou¡
 = 
chù
->
rda_cou¡
;

1580 i‡(
c⁄fig
->
xbuf_cou¡
)

1581 
sc
->
tdaCou¡
 = 
c⁄fig
->
xbuf_cou¡
;

1583 
sc
->
tdaCou¡
 = 
chù
->
tda_cou¡
;

1584 
sc
->
ac˚±Brﬂdˇ°
 = !
c⁄fig
->
ign‹e_brﬂdˇ°
;

1586 
sc
->
s⁄ic
 = 
chù
->
ba£_addªss
;

1587 
sc
->
ve˘‹
 = 
chù
->vector;

1588 
sc
->
d¸_vÆue
 = 
chù
->dcr_value;

1589 
sc
->
dc2_vÆue
 = 
chù
->dc2_value;

1590 
sc
->
wrôe_ªgi°î
 = 
chù
->write_register;

1591 
sc
->
ªad_ªgi°î
 = 
chù
->read_register;

1596 
iÂ
->
if_so·c
 = 
sc
;

1597 
iÂ
->
if_unô
 = 
unôNumbî
;

1598 
iÂ
->
if_«me
 = 
unôName
;

1599 
iÂ
->
if_mtu
 = 
mtu
;

1600 
iÂ
->
if_öô
 = 
s⁄ic_öô
;

1601 
iÂ
->
if_io˘l
 = 
s⁄ic_io˘l
;

1602 
iÂ
->
if_°¨t
 = 
s⁄ic_°¨t
;

1603 
iÂ
->
if_ouçut
 = 
ëhî_ouçut
;

1604 
iÂ
->
if_Êags
 = 
IFF_BROADCAST
 | 
IFF_SIMPLEX
;

1605 i‡(
iÂ
->
if_¢d
.
ifq_maxÀn
 == 0)

1606 
iÂ
->
if_¢d
.
ifq_maxÀn
 = 
ifqmaxÀn
;

1611 
	`if_©èch
 (
iÂ
);

1612 
	`ëhî_iÁâach
 (
iÂ
);

1614 
	}
}

1616 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_PRINT_REGISTERS
)

1617 
	~<°dio.h
>

1619 
	gSONIC_Reg_«me
[64][6]= {

	@src/libchip/network/sonic.h

25 #i‚de‡
_SONIC_DP83932_


26 
	#_SONIC_DP83932_


	)

34 
	#SONIC_DEBUG_NONE
 0x0000

	)

35 
	#SONIC_DEBUG_ALL
 0xFFFF

	)

36 
	#SONIC_DEBUG_PRINT_REGISTERS
 0x0001

	)

37 
	#SONIC_DEBUG_MEMORY
 0x0002

	)

38 
	#SONIC_DEBUG_MEMORY_ALLOCATE
 0x0004

	)

39 
	#SONIC_DEBUG_MEMORY_DESCRIPTORS
 0x0008

	)

40 
	#SONIC_DEBUG_FRAGMENTS
 0x0008

	)

41 
	#SONIC_DEBUG_CAM
 0x0010

	)

42 
	#SONIC_DEBUG_DESCRIPTORS
 0x0020

	)

43 
	#SONIC_DEBUG_ERRORS
 0x0040

	)

44 
	#SONIC_DEBUG_DUMP_TX_MBUFS
 0x0080

	)

45 
	#SONIC_DEBUG_DUMP_RX_MBUFS
 0x0100

	)

47 
	#SONIC_DEBUG_DUMP_MBUFS
 \

48 (
SONIC_DEBUG_DUMP_TX_MBUFS
|
SONIC_DEBUG_DUMP_RX_MBUFS
)

	)

50 
	#SONIC_DEBUG
 (
SONIC_DEBUG_NONE
)

	)

61 #i‡(
SONIC_DEBUG
 & 
SONIC_DEBUG_PRINT_REGISTERS
)

62 
SONIC_Reg_«me
[64][6];

70 (*
	ts⁄ic_wrôe_ªgi°î_t
)(

71 *
	tba£
,

72 
	tuöt32_t
 
	tªgno
,

73 
	tuöt32_t
 
	tvÆue


76 
	$uöt32_t
 (*
	ts⁄ic_ªad_ªgi°î_t
)(

77 *
	tba£
,

78 
	tuöt32_t
 
	tªgno


82 *
ba£_addªss
;

83 
uöt32_t
 
ve˘‹
;

84 
uöt32_t
 
d¸_vÆue
;

85 
uöt32_t
 
dc2_vÆue
;

86 
uöt32_t
 
tda_cou¡
;

87 
uöt32_t
 
rda_cou¡
;

88 
s⁄ic_wrôe_ªgi°î_t
 
wrôe_ªgi°î
;

89 
s⁄ic_ªad_ªgi°î_t
 
ªad_ªgi°î
;

90 } 
	ts⁄ic_c⁄figuøti⁄_t
;

99 
	#SONIC_REG_CR
 0x00

	)

100 
	#SONIC_REG_DCR
 0x01

	)

101 
	#SONIC_REG_RCR
 0x02

	)

102 
	#SONIC_REG_TCR
 0x03

	)

103 
	#SONIC_REG_IMR
 0x04

	)

104 
	#SONIC_REG_ISR
 0x05

	)

105 
	#SONIC_REG_UTDA
 0x06

	)

106 
	#SONIC_REG_CTDA
 0x07

	)

107 
	#SONIC_REG_URDA
 0x0D

	)

108 
	#SONIC_REG_CRDA
 0x0E

	)

109 
	#SONIC_REG_EOBC
 0x13

	)

110 
	#SONIC_REG_URRA
 0x14

	)

111 
	#SONIC_REG_RSA
 0x15

	)

112 
	#SONIC_REG_REA
 0x16

	)

113 
	#SONIC_REG_RRP
 0x17

	)

114 
	#SONIC_REG_RWP
 0x18

	)

115 
	#SONIC_REG_CEP
 0x21

	)

116 
	#SONIC_REG_CAP2
 0x22

	)

117 
	#SONIC_REG_CAP1
 0x23

	)

118 
	#SONIC_REG_CAP0
 0x24

	)

119 
	#SONIC_REG_CE
 0x25

	)

120 
	#SONIC_REG_CDP
 0x26

	)

121 
	#SONIC_REG_CDC
 0x27

	)

122 
	#SONIC_REG_SR
 0x28

	)

123 
	#SONIC_REG_WT0
 0x29

	)

124 
	#SONIC_REG_WT1
 0x2A

	)

125 
	#SONIC_REG_RSC
 0x2B

	)

126 
	#SONIC_REG_CRCT
 0x2C

	)

127 
	#SONIC_REG_FAET
 0x2D

	)

128 
	#SONIC_REG_MPT
 0x2E

	)

129 
	#SONIC_REG_MDT
 0x2F

	)

130 
	#SONIC_REG_DCR2
 0x3F

	)

135 
	#CR_LCAM
 0x0200

	)

136 
	#CR_RRRA
 0x0100

	)

137 
	#CR_RST
 0x0080

	)

138 
	#CR_ST
 0x0020

	)

139 
	#CR_STP
 0x0010

	)

140 
	#CR_RXEN
 0x0008

	)

141 
	#CR_RXDIS
 0x0004

	)

142 
	#CR_TXP
 0x0002

	)

143 
	#CR_HTX
 0x0001

	)

148 
	#DCR_EXBUS
 0x8000

	)

149 
	#DCR_LBR
 0x2000

	)

150 
	#DCR_PO1
 0x1000

	)

151 
	#DCR_PO0
 0x0800

	)

152 
	#DCR_SBUS
 0x0400

	)

153 
	#DCR_USR1
 0x0200

	)

154 
	#DCR_USR0
 0x0100

	)

155 
	#DCR_WC1
 0x0080

	)

156 
	#DCR_WC0
 0x0040

	)

157 
	#DCR_DW
 0x0020

	)

158 
	#DCR_BMS
 0x0010

	)

159 
	#DCR_RFT1
 0x0008

	)

160 
	#DCR_RFT0
 0x0004

	)

161 
	#DCR_TFT1
 0x0002

	)

162 
	#DCR_TFT0
 0x0001

	)

165 
	#DCR_SYNC
 
DCR_SBUS


	)

166 
	#DCR_ASYNC
 0

	)

168 
	#DCR_WAIT0
 0

	)

169 
	#DCR_WAIT1
 
DCR_WC0


	)

170 
	#DCR_WAIT2
 
DCR_WC1


	)

171 
	#DCR_WAIT3
 (
DCR_WC1
|
DCR_WC0
Ë

	)

173 
	#DCR_DW16
 0

	)

174 
	#DCR_DW32
 
DCR_DW


	)

176 
	#DCR_DMAEF
 0

	)

177 
	#DCR_DMABLOCK
 
DCR_BMS


	)

179 
	#DCR_RFT4
 0

	)

180 
	#DCR_RFT8
 
DCR_RFT0


	)

181 
	#DCR_RFT16
 
DCR_RFT1


	)

182 
	#DCR_RFT24
 (
DCR_RFT1
|
DCR_RFT0
Ë

	)

184 
	#DCR_TFT8
 0

	)

185 
	#DCR_TFT16
 
DCR_TFT0


	)

186 
	#DCR_TFT24
 
DCR_TFT1


	)

187 
	#DCR_TFT28
 (
DCR_TFT1
|
DCR_TFT0
Ë

	)

192 
	#RCR_ERR
 0x8000

	)

193 
	#RCR_RNT
 0x4000

	)

194 
	#RCR_BRD
 0x2000

	)

195 
	#RCR_PRO
 0x1000

	)

196 
	#RCR_AMC
 0x0800

	)

197 
	#RCR_LB1
 0x0400

	)

198 
	#RCR_LB0
 0x0200

	)

199 
	#RCR_MC
 0x0100

	)

200 
	#RCR_BC
 0x0080

	)

201 
	#RCR_LPKT
 0x0040

	)

202 
	#RCR_CRS
 0x0020

	)

203 
	#RCR_COL
 0x0010

	)

204 
	#RCR_CRCR
 0x0008

	)

205 
	#RCR_FAER
 0x0004

	)

206 
	#RCR_LBK
 0x0002

	)

207 
	#RCR_PRX
 0x0001

	)

212 
	#TCR_PINT
 0x8000

	)

213 
	#TCR_POWC
 0x4000

	)

214 
	#TCR_CRCI
 0x2000

	)

215 
	#TCR_EXDIS
 0x1000

	)

216 
	#TCR_EXD
 0x0400

	)

217 
	#TCR_DEF
 0x0200

	)

218 
	#TCR_NCRS
 0x0100

	)

219 
	#TCR_CRSL
 0x0080

	)

220 
	#TCR_EXC
 0x0040

	)

221 
	#TCR_OWC
 0x0020

	)

222 
	#TCR_PMB
 0x0008

	)

223 
	#TCR_FU
 0x0004

	)

224 
	#TCR_BCM
 0x0002

	)

225 
	#TCR_PTX
 0x0001

	)

230 
	#IMR_BREN
 0x4000

	)

231 
	#IMR_HBLEN
 0x2000

	)

232 
	#IMR_LCDEN
 0x1000

	)

233 
	#IMR_PINTEN
 0x0800

	)

234 
	#IMR_PRXEN
 0x0400

	)

235 
	#IMR_PTXEN
 0x0200

	)

236 
	#IMR_TXEREN
 0x0100

	)

237 
	#IMR_TCEN
 0x0080

	)

238 
	#IMR_RDEEN
 0x0040

	)

239 
	#IMR_RBEEN
 0x0020

	)

240 
	#IMR_RBAEEN
 0x0010

	)

241 
	#IMR_CRCEN
 0x0008

	)

242 
	#IMR_FAEEN
 0x0004

	)

243 
	#IMR_MPEN
 0x0002

	)

244 
	#IMR_RFOEN
 0x0001

	)

249 
	#ISR_BR
 0x4000

	)

250 
	#ISR_HBL
 0x2000

	)

251 
	#ISR_LCD
 0x1000

	)

252 
	#ISR_PINT
 0x0800

	)

253 
	#ISR_PKTRX
 0x0400

	)

254 
	#ISR_TXDN
 0x0200

	)

255 
	#ISR_TXER
 0x0100

	)

256 
	#ISR_TC
 0x0080

	)

257 
	#ISR_RDE
 0x0040

	)

258 
	#ISR_RBE
 0x0020

	)

259 
	#ISR_RBAE
 0x0010

	)

260 
	#ISR_CRC
 0x0008

	)

261 
	#ISR_FAE
 0x0004

	)

262 
	#ISR_MP
 0x0002

	)

263 
	#ISR_RFO
 0x0001

	)

268 
	#DCR2_EXPO3
 0x8000

	)

269 
	#DCR2_EXPO2
 0x4000

	)

270 
	#DCR2_EXPO1
 0x2000

	)

271 
	#DCR2_EXPO0
 0x1000

	)

272 
	#DCR2_HBDIS
 0x0800

	)

273 
	#DCR2_PH
 0x0010

	)

274 
	#DCR2_PCM
 0x0004

	)

275 
	#DCR2_PCNM
 0x0002

	)

276 
	#DCR2_RJCM
 0x0001

	)

283 
	#SONIC_REVISION_B
 4

	)

284 
	#SONIC_REVISION_DP83934
 5

	)

285 
	#SONIC_REVISION_C
 6

	)

301 
	#MAXIMUM_FRAGS_PER_DESCRIPTOR
 6

	)

302 
	sTønsmôDes¸ùt‹
 {

303 
uöt32_t
 
°©us
;

304 
uöt32_t
 
pkt_c⁄fig
;

305 
uöt32_t
 
pkt_size
;

306 
uöt32_t
 
‰ag_cou¡
;

311 
	sTønsmôDes¸ùt‹FøgLök
 {

312 
uöt32_t
 
‰ag_lsw
;

313 
	#‰ag_lök
 
‰ag_lsw


	)

314 
uöt32_t
 
‰ag_msw
;

315 
uöt32_t
 
‰ag_size
;

316 } 
‰ag
[
MAXIMUM_FRAGS_PER_DESCRIPTOR
];

321 
uöt32_t
 
lök_∑d
;

326 
TønsmôDes¸ùt‹
 *
√xt
;

327 
mbuf
 *
mbuÂ
;

328 vﬁ©ûê
uöt32_t
 *
lökp
;

330 
TønsmôDes¸ùt‹
 
	tTønsmôDes¸ùt‹_t
;

331 vﬁ©ûê
	tTønsmôDes¸ùt‹_t
 *
	tTønsmôDes¸ùt‹Poöãr_t
;

338 
	#TDA_CONFIG_PINT
 0x8000

	)

339 
	#TDA_CONFIG_POWC
 0x4000

	)

340 
	#TDA_CONFIG_CRCI
 0x2000

	)

341 
	#TDA_CONFIG_EXDIS
 0x1000

	)

346 
	#TDA_STATUS_COLLISION_MASK
 0xF800

	)

347 
	#TDA_STATUS_COLLISION_SHIFT
 11

	)

348 
	#TDA_STATUS_EXD
 0x0400

	)

349 
	#TDA_STATUS_DEF
 0x0200

	)

350 
	#TDA_STATUS_NCRS
 0x0100

	)

351 
	#TDA_STATUS_CRSL
 0x0080

	)

352 
	#TDA_STATUS_EXC
 0x0040

	)

353 
	#TDA_STATUS_OWC
 0x0020

	)

354 
	#TDA_STATUS_PMB
 0x0008

	)

355 
	#TDA_STATUS_FU
 0x0004

	)

356 
	#TDA_STATUS_BCM
 0x0002

	)

357 
	#TDA_STATUS_PTX
 0x0001

	)

359 
	#TDA_LINK_EOL
 0x0001

	)

360 
	#TDA_LINK_EOL_MASK
 0xFFFE

	)

378 
	sRe˚iveResour˚
 {

379 
uöt32_t
 
buff_±r_lsw
;

380 
uöt32_t
 
buff_±r_msw
;

381 
uöt32_t
 
buff_wc_lsw
;

382 
uöt32_t
 
buff_wc_msw
;

384 
Re˚iveResour˚
 
	tRe˚iveResour˚_t
;

385 vﬁ©ûê
	tRe˚iveResour˚_t
 *
	tRe˚iveResour˚Poöãr_t
;

391 
	sRe˚iveDes¸ùt‹
 {

392 
uöt32_t
 
°©us
;

393 
uöt32_t
 
byã_cou¡
;

394 
uöt32_t
 
pkt_lsw
;

395 
uöt32_t
 
pkt_msw
;

396 
uöt32_t
 
£q_no
;

397 
uöt32_t
 
lök
;

398 
uöt32_t
 
ö_u£
;

403 vﬁ©ûê
Re˚iveDes¸ùt‹
 *
√xt
;

404 
mbuf
 *
mbuÂ
;

406 
Re˚iveDes¸ùt‹
 
	tRe˚iveDes¸ùt‹_t
;

407 vﬁ©ûê
	tRe˚iveDes¸ùt‹_t
 *
	tRe˚iveDes¸ùt‹Poöãr_t
;

410 
uöt32_t
 
˚p
;

411 
uöt32_t
 
ˇp0
;

412 
uöt32_t
 
ˇp1
;

413 
uöt32_t
 
ˇp2
;

414 
uöt32_t
 
˚
;

415 } 
	tCamDes¸ùt‹_t
;

417 vﬁ©ûê
	tCamDes¸ùt‹_t
 *
	tCamDes¸ùt‹Poöãr_t
;

422 
	#RDA_STATUS_ERR
 0x8800

	)

423 
	#RDA_STATUS_RNT
 0x4000

	)

424 
	#RDA_STATUS_BRD
 0x2000

	)

425 
	#RDA_STATUS_PRO
 0x1000

	)

426 
	#RDA_STATUS_AMC
 0x0800

	)

427 
	#RDA_STATUS_LB1
 0x0400

	)

428 
	#RDA_STATUS_LB0
 0x0200

	)

429 
	#RDA_STATUS_MC
 0x0100

	)

430 
	#RDA_STATUS_BC
 0x0080

	)

431 
	#RDA_STATUS_LPKT
 0x0040

	)

432 
	#RDA_STATUS_CRS
 0x0020

	)

433 
	#RDA_STATUS_COL
 0x0010

	)

434 
	#RDA_STATUS_CRCR
 0x0008

	)

435 
	#RDA_STATUS_FAER
 0x0004

	)

436 
	#RDA_STATUS_LBK
 0x0002

	)

437 
	#RDA_STATUS_PRX
 0x0001

	)

439 
	#RDA_LINK_EOL
 0x0001

	)

440 
	#RDA_LINK_EOL_MASK
 0xFFFE

	)

441 
	#RDA_IN_USE
 0x0000

	)

443 
	#RDA_FREE
 0xFFFF

	)

449 
	`πems_s⁄ic_drivî_©èch
 (

450 
πems_bsd√t_ifc⁄fig
 *
c⁄fig
,

451 
s⁄ic_c⁄figuøti⁄_t
 *
chù


454 #ifde‡
CPU_U32_FIX


455 
	`ùÆign
(
mbuf
 *
m
);

	@src/libchip/rtc/ds1375-rtc.h

1 #i‚de‡
DS1375_I2C_RTC_H


2 
	#DS1375_I2C_RTC_H


	)

52 
	~<πems.h
>

53 
	~<libchù/πc.h
>

54 
	~<°döt.h
>

56 #ifde‡
__˝lu•lus


60 
πc_‚s
 
πc_ds1375_‚s
;

62 
boﬁ


63 
πc_ds1375_devi˚_¥obe
–
mö‹
 );

65 
uöt32_t


66 
πc_ds1375_gë_ªgi°î
–
uöçå_t
 
p‹t
, 
uöt8_t
 
ªg
 );

69 
πc_ds1375_£t_ªgi°î
–
uöçå_t
 
p‹t
, 
uöt8_t
 
ªg
, 
uöt32_t
 
vÆue
 );

83 
	#DS1375_RTC_TBL_ENTRY
(
i2˙ame
) \

85 
sDevi˚Name
: "/dev/rtc", \

86 
devi˚Ty≥
: 
RTC_CUSTOM
, \

87 
pDevi˚Fns
: &
πc_ds1375_‚s
, \

88 
devi˚Probe
: 
πc_ds1375_devi˚_¥obe
, \

89 
ulCålP‹t1
: (
uöçå_t
)(
i2˙ame
), \

90 
ulD©aP‹t
: 0, \

91 
gëRegi°î
: 
πc_ds1375_gë_ªgi°î
, \

92 
£tRegi°î
: 
πc_ds1375_£t_ªgi°î
, \

93 }

	)

95 #ifde‡
__˝lu•lus


	@src/libchip/rtc/ds1375.c

51 
	~<uni°d.h
>

53 
	~<πems.h
>

54 
	~<πems/πc.h
>

55 
	~<πems/sc‹e/sys°©e.h
>

56 
	~<libchù/πc.h
>

57 
	~<libchù/ds1375-πc.h
>

59 
	~<sys/f˙é.h
>

60 
	~<î∫o.h
>

61 
	~<°dio.h
>

62 
	~<°rög.h
>

63 
	~<öây≥s.h
>

66 
	#STATIC
 

	)

67 #unde‡
DEBUG


75 
	#STDIOSAFE
(
fmt
,
¨gs
...) \

77 i‡–
	`_Sy°em_°©e_Is_up
–
	`_Sy°em_°©e_Gë
() ) ) { \

78 
	`Ârötf
(
°dîr
,
fmt
,
¨gs
); \

80 
	`¥ötk
(
fmt
,
¨gs
); \

82 } 0)

	)

85 
STATIC
 
uöt8_t
 
	$ds1375_bcd2bö
(
uöt8_t
 
x
)

87 
uöt8_t
 
h
 = 
x
 & 0xf0;

90  ( 
h
 >> 1 ) + ( h >> 3 ) + ( 
x
 & 0xf );

91 
	}
}

93 
STATIC
 
uöt8_t
 
	$ds1375_bö2bcd
(
uöt8_t
 
x
)

95 
uöt8_t
 
h
 = 
x
/10;

97  ( 
h
 << 4 ) + ( 
x
 - ( ( h << 3 ) + ( h << 1 ) ) );

98 
	}
}

108 
	#DS1375_SEC_REG
 0x0

	)

109 
	#DS1375_SEC_OFF
 (
DS1375_SEC_REG
-DS1375_SEC_REG)

	)

111 
	#DS1375_SEC
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_SEC_OFF
]Ë& 0x7‡)

	)

113 
	#DS1375_MIN_REG
 0x1

	)

114 
	#DS1375_MIN_OFF
 (
DS1375_MIN_REG
-
DS1375_SEC_REG
)

	)

116 
	#DS1375_MIN
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_MIN_OFF
]Ë& 0x7‡)

	)

118 
	#DS1375_HR_REG
 0x2

	)

119 
	#DS1375_HR_OFF
 (
DS1375_HR_REG
-
DS1375_SEC_REG
)

	)

120 
	#DS1375_HR_1224
 (1<<6)

	)

121 
	#DS1375_HR_AMPM
 (1<<5)

	)

123 
	#DS1375_IS_AMPM
(
x
Ë(
DS1375_HR_1224
 & ((x)[
DS1375_HR_OFF
]))

	)

125 
	#DS1375_IS_PM
(
x
Ë(
DS1375_HR_AMPM
 & ((x)[
DS1375_HR_OFF
]))

	)

127 
	#DS1375_HR_12
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_HR_OFF
]Ë& 0x1‡)

	)

129 
	#DS1375_HR_24
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_HR_OFF
]Ë& 0x3‡)

	)

131 
	#DS1375_DAY_REG
 0x3

	)

132 
	#DS1375_DAY_OFF
 (
DS1375_DAY_REG
-
DS1375_SEC_REG
)

	)

133 
	#DS1375_DAT_REG
 0x4

	)

134 
	#DS1375_DAT_OFF
 (
DS1375_DAT_REG
-
DS1375_SEC_REG
)

	)

136 
	#DS1375_DAT
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_DAT_OFF
]Ë& 0x3‡)

	)

137 
	#DS1375_MON_REG
 0x5

	)

138 
	#DS1375_MON_OFF
 (
DS1375_MON_REG
-
DS1375_SEC_REG
)

	)

139 
	#DS1375_MON_CTRY
 (1<<7)

	)

141 
	#DS1375_IS_CTRY
(
x
Ë(((x)[
DS1375_MON_OFF
]Ë& 
DS1375_MON_CTRY
)

	)

143 
	#DS1375_MON
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_MON_OFF
]Ë& 0x1‡)

	)

145 
	#DS1375_YR_REG
 0x6

	)

146 
	#DS1375_YR_OFF
 (
DS1375_YR_REG
-
DS1375_SEC_REG
)

	)

148 
	#DS1375_YR
(
x
Ë
	`ds1375_bcd2bö
–((x)[
DS1375_YR_OFF
]Ë& 0xf‡)

	)

151 
	#DS1375_CR_REG
 0xe

	)

152 
	#DS1375_CR_ECLK
 (1<<7)

	)

153 
	#DS1375_CR_CLKSEL1
 (1<<6)

	)

154 
	#DS1375_CR_CLKSEL0
 (1<<5)

	)

155 
	#DS1375_CR_RS2
 (1<<4)

	)

156 
	#DS1375_CR_RS1
 (1<<3)

	)

157 
	#DS1375_CR_INTCN
 (1<<2)

	)

158 
	#DS1375_CR_A2IE
 (1<<1)

	)

159 
	#DS1375_CR_A1IE
 (1<<0)

	)

161 
	#DS1375_CSR_REG
 0xf

	)

164 
	#DS1375_RAM
 0x10

	)

168 
STATIC
 
	$rd_byãs
(

169 
fd
,

170 
uöt32_t
 
off
,

171 
uöt8_t
 *
buf
,

172 
Àn


175 
uöt8_t
 
±r
 = 
off
;

177  1 =
	`wrôe
–
fd
, &
±r
, 1 ) && 
Àn
 =
	`ªad
–fd, 
buf
,Üen ) ? 0 : -1;

178 
	}
}

180 
STATIC
 
	$wr_byãs
(

181 
fd
,

182 
uöt32_t
 
off
,

183 
uöt8_t
 *
buf
,

184 
Àn


187 
uöt8_t
 
d
[ 
Àn
 + 1 ];

196 
d
[0] = 
off
;

197 
	`mem˝y
–
d
 + 1, 
buf
, 
Àn
 );

199  
Àn
 + 1 =
	`wrôe
–
fd
, 
d
,Üen + 1 ) ? 0 : -1;

200 
	}
}

204 
	$gëfd
(

205 
mö‹


208  
	`›í
–(c⁄° *)
RTC_TabÀ
[
mö‹
].
ulCålP‹t1
, 
O_RDWR
 );

209 
	}
}

213 
STATIC
 
	$ds1375_öôülize
(

214 
mö‹


217 
fd
;

218 
uöt8_t
 
¸
;

220 i‡––
fd
 = 
	`gëfd
–
mö‹
 ) ) >= 0 ) {

221 i‡–0 =
	`rd_byãs
–
fd
, 
DS1375_CR_REG
, &
¸
, 1 ) ) {

223 i‡–! ( 
DS1375_CR_ECLK
 & 
¸
 ) ) {

224 
¸
 |
DS1375_CR_ECLK
;

225 
	`wr_byãs
–
fd
, 
DS1375_CR_REG
, &
¸
, 1 );

228 
	`˛o£
–
fd
 );

231 
	}
}

233 
STATIC
 
	$ds1375_gë_time
(

234 
mö‹
,

235 
πems_time_of_day
 *
time


238 
rvÆ
 = -1;

239 
fd
;

240 
uöt8_t
 
buf
[
DS1375_YR_REG
 + 1 - 
DS1375_SEC_REG
];

242 i‡–
time
 && ( ( 
fd
 = 
	`gëfd
–
mö‹
 ) ) >= 0 ) ) {

243 i‡–0 =
	`rd_byãs
–
fd
, 
DS1375_SEC_REG
, 
buf
, (buf) ) ) {

244 
time
->
yór
 = 
	`DS1375_IS_CTRY
–
buf
 ) ? 2000 : 1900;

245 
time
->
yór
 +
	`DS1375_YR
 ( 
buf
 );

246 
time
->
m⁄th
 = 
	`DS1375_MON
–
buf
 );

247 
time
->
day
 = 
	`DS1375_DAT
–
buf
 );

249 i‡–
	`DS1375_IS_AMPM
–
buf
 ) ) {

250 
time
->
hour
 = 
	`DS1375_HR_12
 ( 
buf
 );

251 i‡–
	`DS1375_IS_PM
–
buf
 ) )

252 
time
->
hour
 += 12;

254 
time
->
hour
 = 
	`DS1375_HR_24
 ( 
buf
 );

257 
time
->
möuã
 = 
	`DS1375_MIN
–
buf
 );

258 
time
->
£c⁄d
 = 
	`DS1375_SEC
–
buf
 );

259 
time
->
ticks
 = 0;

260 
rvÆ
 = 0;

262 
	`˛o£
–
fd
 );

264  
rvÆ
;

265 
	}
}

267 
STATIC
 
	$ds1375_£t_time
(

268 
mö‹
,

269 c⁄° 
πems_time_of_day
 *
time


272 
rvÆ
 = -1;

273 
fd
 = -1;

274 
time_t
 
£cs
;

275 
tm
Åm;

276 
uöt8_t
 
buf
[
DS1375_YR_REG
 + 1 - 
DS1375_SEC_REG
];

277 
uöt8_t
 
¸
 = 0xff;

284 
£cs
 = 
	`_TOD_To_£c⁄ds
–
time
 );

286 
	`gmtime_r
–&
£cs
, &
tm
 );

288 
buf
[
DS1375_SEC_OFF
] = 
	`ds1375_bö2bcd
–
time
->
£c⁄d
 );

289 
buf
[
DS1375_MIN_OFF
] = 
	`ds1375_bö2bcd
–
time
->
möuã
 );

291 
buf
[
DS1375_HR_OFF
] = 
	`ds1375_bö2bcd
–
time
->
hour
 );

292 
buf
[
DS1375_DAY_OFF
] = 
tm
.
tm_wday
 + 1;

293 
buf
[
DS1375_DAT_OFF
] = 
	`ds1375_bö2bcd
–
time
->
day
 );

294 
buf
[
DS1375_MON_OFF
] = 
	`ds1375_bö2bcd
–
time
->
m⁄th
 );

296 i‡–
time
->
yór
 >= 2000 ) {

297 
buf
[
DS1375_YR_OFF
] = 
	`ds1375_bö2bcd
–
time
->
yór
 - 2000 );

298 
buf
[
DS1375_MON_OFF
] |
DS1375_MON_CTRY
;

300 
buf
[
DS1375_YR_OFF
] = 
	`ds1375_bö2bcd
–
time
->
yór
 - 1900 );

310 i‡––
fd
 = 
	`gëfd
–
mö‹
 ) ) < 0 ) {

311 
˛ónup
;

314 i‡–
	`rd_byãs
–
fd
, 
DS1375_CR_REG
, &
¸
, 1 ) )

315 
˛ónup
;

317 
¸
 &~
DS1375_CR_ECLK
;

320 i‡–
	`wr_byãs
–
fd
, 
DS1375_CR_REG
, &
¸
, 1 ) )

321 
˛ónup
;

324 i‡–
	`wr_byãs
–
fd
, 
DS1375_SEC_REG
, 
buf
, (buf) ) )

325 
˛ónup
;

327 
rvÆ
 = 0;

329 
˛ónup
:

330 i‡–
fd
 >= 0 ) {

331 i‡–! ( 
DS1375_CR_ECLK
 & 
¸
 ) ) {

335 
¸
 |
DS1375_CR_ECLK
;

336 i‡–
	`wr_byãs
–
fd
, 
DS1375_CR_REG
, &
¸
, 1 ) )

337 
rvÆ
 = -1;

339 
	`˛o£
–
fd
 );

341  
rvÆ
;

342 
	}
}

346 #ifde‡
DEBUG


352 
uöt32_t


353 
	$ds1375_gë_time_t°
()

355 
πems_time_of_day
 
πod
;

356 
time_t
 
£cs
;

358 
	`ds1375_gë_time
–0, &
πod
 );

359 
£cs
 = 
	`_TOD_To_£c⁄ds
–&
πod
 );

360 
	`¥ötf
–"%s\n", 
	`˘ime
–&
£cs
 ) );

361  
£cs
;

362 
	}
}

365 
	$ds1375_£t_time_t°
–c⁄° *
d©°r
, 
πems_time_of_day
 *
¥t
 )

367 
tm
Åm;

368 
time_t
 
£cs
;

369 
πems_time_of_day
 
π
;

371 i‡–!
d©°r
 )

374 i‡–! 
	`°Ωtime
–
d©°r
, "%Y-%m-%d/%T", &
tm
 ) )

377 i‡–! 
¥t
 )

378 
¥t
 = &
π
;

380 
£cs
 = 
	`mktime
–&
tm
 );

383 
	`gmtime_r
–&
£cs
, &
tm
 );

385 
	`¥ötf
("Y: %"
PRIu32
" ", (
¥t
->
yór
 = 
tm
.
tm_yór
 + 1900) );

386 
	`¥ötf
("M: %"
PRIu32
" ", (
¥t
->
m⁄th
 = 
tm
.
tm_m⁄
 + 1) );

387 
	`¥ötf
("D: %"
PRIu32
" ", (
¥t
->
day
 = 
tm
.
tm_mday
 ) );

388 
	`¥ötf
("h: %"
PRIu32
" ", (
¥t
->
hour
 = 
tm
.
tm_hour
 ) );

389 
	`¥ötf
("m: %"
PRIu32
" ", (
¥t
->
möuã
 = 
tm
.
tm_mö
 ) );

390 
	`¥ötf
("s: %"
PRIu32
"\n", (
¥t
->
£c⁄d
 = 
tm
.
tm_£c
 ) );

391 
¥t
->
ticks
 = 0;

393  ( 
¥t
 =&
π
 ) ? 
	`ds1375_£t_time
( 0, &rt ) : 0;

394 
	}
}

399 
uöt32_t


400 
	$πc_ds1375_gë_ªgi°î
–
uöçå_t
 
p‹t
, 
uöt8_t
 
ªg
 )

402 
fd
;

403 
uöt8_t
 
v
;

404 
uöt32_t
 
rvÆ
 = -1;

406 i‡––
fd
 = 
	`›í
–(c⁄° *)
p‹t
, 
O_RDWR
 ) ) >= 0 ) {

408 i‡–0 =
	`rd_byãs
–
fd
, 
ªg
, &
v
, 1 ) ) {

409 
rvÆ
 = 
v
;

411 
	`˛o£
–
fd
 );

414  
rvÆ
;

415 
	}
}

418 
	$πc_ds1375_£t_ªgi°î
–
uöçå_t
 
p‹t
, 
uöt8_t
 
ªg
, 
uöt32_t
 
vÆue
 )

420 
fd
;

421 
uöt8_t
 
v
 = 
vÆue
;

423 i‡––
fd
 = 
	`›í
–(c⁄° *)
p‹t
, 
O_RDWR
 ) ) >= 0 ) {

424 
	`wr_byãs
–
fd
, 
ªg
, &
v
, 1 );

425 
	`˛o£
–
fd
 );

428 
	}
}

430 
boﬁ
 
	$πc_ds1375_devi˚_¥obe
(

431 
mö‹


434 
fd
;

436 i‡––
fd
 = 
	`gëfd
–
mö‹
 ) ) < 0 ) {

437 
	`STDIOSAFE
–"ds1375_¥obê(›í): %s\n", 
	`°ªº‹
–
î∫o
 ) );

438  
Ál£
;

442 i‡–0 !
	`wr_byãs
–
fd
, 
DS1375_SEC_REG
, 0, 0 ) ) {

443 
	`STDIOSAFE
–"ds1375_¥obê(wr_byãs): %s\n", 
	`°ªº‹
–
î∫o
 ) );

444 
	`˛o£
–
fd
 );

445  
Ál£
;

448 i‡–
	`˛o£
–
fd
 ) ) {

449 
	`STDIOSAFE
–"ds1375_¥obê(˛o£): %s\n", 
	`°ªº‹
–
î∫o
 ) );

450  
Ál£
;

453  
åue
;

454 
	}
}

456 
πc_‚s
 
	gπc_ds1375_‚s
 = {

457 .
devi˚Inôülize
 = 
ds1375_öôülize
,

458 .
	gdevi˚GëTime
 = 
ds1375_gë_time
,

459 .
	gdevi˚SëTime
 = 
ds1375_£t_time
,

	@src/libchip/rtc/icm7170.c

24 
	~<πems.h
>

25 
	~<libchù/πc.h
>

26 
	~<libchù/icm7170.h
>

38 
	$icm7170_öôülize
(

39 
mö‹


42 
uöçå_t
 
icm7170
;

43 
£tRegi°î_f
 
£tReg
;

44 
uöçå_t
 
˛ock
;

46 
icm7170
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

47 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

53 
˛ock
 = (
uöçå_t
Ë
RTC_TabÀ
[ 
mö‹
 ].
pDevi˚P¨ams
;

54 (*
£tReg
)–
icm7170
, 
ICM7170_CONTROL
, 0x0¯| 
˛ock
 );

55 
	}
}

61 
	$icm7170_gë_time
(

62 
mö‹
,

63 
πems_time_of_day
 *
time


66 
uöt32_t
 
icm7170
;

67 
gëRegi°î_f
 
gëReg
;

68 
uöt32_t
 
yór
;

70 
icm7170
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

71 
gëReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
gëRegi°î
;

77 (Ë(*
gëReg
)–
icm7170
, 
ICM7170_COUNTER_HUNDREDTHS
 );

84 
yór
 = (*
gëReg
)–
icm7170
, 
ICM7170_YEAR
 );

85 i‡–
yór
 < 88 )

86 
yór
 += 2000;

88 
yór
 += 1900;

90 
time
->
yór
 = year;

91 
time
->
m⁄th
 = (*
gëReg
)–
icm7170
, 
ICM7170_MONTH
 );

92 
time
->
day
 = (*
gëReg
)–
icm7170
, 
ICM7170_DATE
 );

93 
time
->
hour
 = (*
gëReg
)–
icm7170
, 
ICM7170_HOUR
 );

94 
time
->
möuã
 = (*
gëReg
)–
icm7170
, 
ICM7170_MINUTE
 );

95 
time
->
£c⁄d
 = (*
gëReg
)–
icm7170
, 
ICM7170_SECOND
 );

97 
time
->
ticks
 = 0;

103 (Ë(*
gëReg
)–
icm7170
, 
ICM7170_COUNTER_HUNDREDTHS
 );

106 
	}
}

112 
	$icm7170_£t_time
(

113 
mö‹
,

114 c⁄° 
πems_time_of_day
 *
time


117 
uöçå_t
 
icm7170
;

118 
£tRegi°î_f
 
£tReg
;

119 
uöt32_t
 
yór
;

120 
uöçå_t
 
˛ock
;

122 
icm7170
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

123 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

124 
˛ock
 = (
uöçå_t
Ë
RTC_TabÀ
[ 
mö‹
 ].
pDevi˚P¨ams
;

126 
yór
 = 
time
->year;

128 i‡–
yór
 >= 2088 )

129 
	`πems_Áèl_îr‹_occuºed
–
RTEMS_INVALID_NUMBER
 );

131 i‡–
yór
 >= 2000 )

132 
yór
 -= 2000;

134 
yór
 -= 1900;

136 (*
£tReg
)–
icm7170
, 
ICM7170_CONTROL
, 0x04 | 
˛ock
 );

138 (*
£tReg
)–
icm7170
, 
ICM7170_YEAR
, 
yór
 );

139 (*
£tReg
)–
icm7170
, 
ICM7170_MONTH
, 
time
->
m⁄th
 );

140 (*
£tReg
)–
icm7170
, 
ICM7170_DATE
, 
time
->
day
 );

141 (*
£tReg
)–
icm7170
, 
ICM7170_HOUR
, 
time
->
hour
 );

142 (*
£tReg
)–
icm7170
, 
ICM7170_MINUTE
, 
time
->
möuã
 );

143 (*
£tReg
)–
icm7170
, 
ICM7170_SECOND
, 
time
->
£c⁄d
 );

149 (*
£tReg
)–
icm7170
, 
ICM7170_DAY_OF_WEEK
, 1 );

155 (*
£tReg
)–
icm7170
, 
ICM7170_CONTROL
, 0x0¯| 
˛ock
 );

158 
	}
}

164 
πc_‚s
 
	gicm7170_‚s
 = {

165 
icm7170_öôülize
,

166 
icm7170_gë_time
,

167 
icm7170_£t_time


	@src/libchip/rtc/icm7170.h

14 #i‚de‡
__LIBCHIP_ICM7170_h


15 
	#__LIBCHIP_ICM7170_h


	)

21 
	#ICM7170_CONTROL
 0x11

	)

24 
	#ICM7170_COUNTER_HUNDREDTHS
 0x00

	)

25 
	#ICM7170_HOUR
 0x01

	)

26 
	#ICM7170_MINUTE
 0x02

	)

27 
	#ICM7170_SECOND
 0x03

	)

28 
	#ICM7170_MONTH
 0x04

	)

29 
	#ICM7170_DATE
 0x05

	)

30 
	#ICM7170_YEAR
 0x06

	)

31 
	#ICM7170_DAY_OF_WEEK
 0x07

	)

37 
	#ICM7170_AT_32_KHZ
 0x00

	)

38 
	#ICM7170_AT_1_MHZ
 0x01

	)

39 
	#ICM7170_AT_2_MHZ
 0x02

	)

40 
	#ICM7170_AT_4_MHZ
 0x03

	)

46 
πc_‚s
 
icm7170_‚s
;

52 
uöt32_t
 
icm7170_gë_ªgi°î
(

53 
uöçå_t
 
ulCålP‹t
,

54 
uöt8_t
 
ucRegNum


57 
icm7170_£t_ªgi°î
(

58 
uöçå_t
 
ulCålP‹t
,

59 
uöt8_t
 
ucRegNum
,

60 
uöt32_t
 
ucD©a


63 
uöt32_t
 
icm7170_gë_ªgi°î_2
(

64 
uöçå_t
 
ulCålP‹t
,

65 
uöt8_t
 
ucRegNum


68 
icm7170_£t_ªgi°î_2
(

69 
uöçå_t
 
ulCålP‹t
,

70 
uöt8_t
 
ucRegNum
,

71 
uöt32_t
 
ucD©a


74 
uöt32_t
 
icm7170_gë_ªgi°î_4
(

75 
uöçå_t
 
ulCålP‹t
,

76 
uöt8_t
 
ucRegNum


79 
icm7170_£t_ªgi°î_4
(

80 
uöçå_t
 
ulCålP‹t
,

81 
uöt8_t
 
ucRegNum
,

82 
uöt32_t
 
ucD©a


85 
uöt32_t
 
icm7170_gë_ªgi°î_8
(

86 
uöçå_t
 
ulCålP‹t
,

87 
uöt8_t
 
ucRegNum


90 
icm7170_£t_ªgi°î_8
(

91 
uöçå_t
 
ulCålP‹t
,

92 
uöt8_t
 
ucRegNum
,

93 
uöt32_t
 
ucD©a


	@src/libchip/rtc/icm7170_reg.c

16 
	~<πems.h
>

17 
	~<libchù/πc.h
>

18 
	~<libchù/icm7170.h
>

20 #i‚de‡
_ICM7170_MULTIPLIER


21 
	#_ICM7170_MULTIPLIER
 1

	)

22 
	#_ICM7170_NAME
(
_X
Ë
	)
_X

23 
	#_ICM7170_TYPE
 
uöt8_t


	)

26 
	#CALCULATE_REGISTER_ADDRESS
–
_ba£
, 
_ªg
 ) \

27 (
_ICM7170_TYPE
 *)((
_ba£
Ë+ ((
_ªg
Ë* 
_ICM7170_MULTIPLIER
 ))

	)

33 
uöt32_t
 
	$_ICM7170_NAME
(
icm7170_gë_ªgi°î
)(

34 
uöçå_t
 
ulCålP‹t
,

35 
uöt8_t
 
ucRegNum


38 
_ICM7170_TYPE
 *
p‹t
;

40 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

42  *
p‹t
;

43 
	}
}

49 
	$_ICM7170_NAME
(
icm7170_£t_ªgi°î
)(

50 
uöçå_t
 
ulCålP‹t
,

51 
uöt8_t
 
ucRegNum
,

52 
uöt32_t
 
ucD©a


55 
_ICM7170_TYPE
 *
p‹t
;

57 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

59 *
p‹t
 = 
ucD©a
;

60 
	}
}

	@src/libchip/rtc/icm7170_reg2.c

16 
	#_ICM7170_MULTIPLIER
 2

	)

17 
	#_ICM7170_NAME
(
_X
Ë_X##
_2


	)

18 
	#_ICM7170_TYPE
 
uöt8_t


	)

20 
	~"icm7170_ªg.c
"

	@src/libchip/rtc/icm7170_reg4.c

16 
	#_ICM7170_MULTIPLIER
 4

	)

17 
	#_ICM7170_NAME
(
_X
Ë_X##
_4


	)

18 
	#_ICM7170_TYPE
 
uöt8_t


	)

20 
	~"icm7170_ªg.c
"

	@src/libchip/rtc/icm7170_reg8.c

16 
	#_ICM7170_MULTIPLIER
 8

	)

17 
	#_ICM7170_NAME
(
_X
Ë_X##
_8


	)

18 
	#_ICM7170_TYPE
 
uöt8_t


	)

20 
	~"icm7170_ªg.c
"

	@src/libchip/rtc/m48t08.c

24 
	~<πems.h
>

25 
	~<libchù/πc.h
>

26 
	~<libchù/m48t08.h
>

32 
	#M48T08_CONTROL_WRITE
 0x80

	)

33 
	#M48T08_CONTROL_READ
 0x40

	)

34 
	#M48T08_CONTROL_SIGN
 0x20

	)

40 
	$m48t08_öôülize
(

41 
mö‹


44 
	}
}

50 
	#From_BCD
–
_x
 ) ((((_xË>> 4Ë* 10Ë+ ((_xË& 0x0F))

	)

51 
	#To_BCD
–
_x
 ) ((((_xË/ 10Ë<< 4Ë+ ((_xË% 10))

	)

53 
	$m48t08_gë_time
(

54 
mö‹
,

55 
πems_time_of_day
 *
time


58 
uöt32_t
 
m48t08
;

59 
gëRegi°î_f
 
gëReg
;

60 
£tRegi°î_f
 
£tReg
;

61 
uöt8_t
 
c⁄åﬁReg
;

62 
uöt32_t
 
vÆue1
;

63 
uöt32_t
 
vÆue2
;

65 
m48t08
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

66 
gëReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
gëRegi°î
;

67 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

73 
c⁄åﬁReg
 = (*
gëReg
)–
m48t08
, 
M48T08_CONTROL
 );

74 (*
£tReg
)–
m48t08
, 
M48T08_CONTROL
, 
c⁄åﬁReg
 | 
M48T08_CONTROL_READ
 );

76 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_YEAR
 );

77 
vÆue2
 = 
	`From_BCD
–
vÆue1
 );

78 i‡–
vÆue2
 < 88 )

79 
time
->
yór
 = 2000 + 
vÆue2
;

81 
time
->
yór
 = 1900 + 
vÆue2
;

83 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_MONTH
 );

84 
time
->
m⁄th
 = 
	`From_BCD
–
vÆue1
 );

86 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_DATE
 );

87 
time
->
day
 = 
	`From_BCD
–
vÆue1
 );

89 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_HOUR
 );

90 
time
->
hour
 = 
	`From_BCD
–
vÆue1
 );

92 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_MINUTE
 );

93 
time
->
möuã
 = 
	`From_BCD
–
vÆue1
 );

95 
vÆue1
 = (*
gëReg
)–
m48t08
, 
M48T08_SECOND
 );

96 
time
->
£c⁄d
 = 
	`From_BCD
–
vÆue1
 );

98 
time
->
ticks
 = 0;

104 (*
£tReg
)–
m48t08
, 
M48T08_CONTROL
, 
c⁄åﬁReg
 );

107 
	}
}

113 
	$m48t08_£t_time
(

114 
mö‹
,

115 c⁄° 
πems_time_of_day
 *
time


118 
uöt32_t
 
m48t08
;

119 
gëRegi°î_f
 
gëReg
;

120 
£tRegi°î_f
 
£tReg
;

121 
uöt8_t
 
c⁄åﬁReg
;

123 
m48t08
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

124 
gëReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
gëRegi°î
;

125 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

131 
c⁄åﬁReg
 = (*
gëReg
)–
m48t08
, 
M48T08_CONTROL
 );

132 (*
£tReg
)–
m48t08
, 
M48T08_CONTROL
, 
c⁄åﬁReg
 | 
M48T08_CONTROL_WRITE
 );

134 i‡–
time
->
yór
 >= 2088 )

135 
	`πems_Áèl_îr‹_occuºed
–
RTEMS_INVALID_NUMBER
 );

137 (*
£tReg
)–
m48t08
, 
M48T08_YEAR
, 
	`To_BCD
(
time
->
yór
 % 100) );

138 (*
£tReg
)–
m48t08
, 
M48T08_MONTH
, 
	`To_BCD
(
time
->
m⁄th
) );

139 (*
£tReg
)–
m48t08
, 
M48T08_DATE
, 
	`To_BCD
(
time
->
day
) );

140 (*
£tReg
)–
m48t08
, 
M48T08_HOUR
, 
	`To_BCD
(
time
->
hour
) );

141 (*
£tReg
)–
m48t08
, 
M48T08_MINUTE
, 
	`To_BCD
(
time
->
möuã
) );

142 (*
£tReg
)–
m48t08
, 
M48T08_SECOND
, 
	`To_BCD
(
time
->
£c⁄d
) );

148 (*
£tReg
)–
m48t08
, 
M48T08_CONTROL
, 
c⁄åﬁReg
 );

151 
	}
}

157 
πc_‚s
 
	gm48t08_‚s
 = {

158 
m48t08_öôülize
,

159 
m48t08_gë_time
,

160 
m48t08_£t_time


	@src/libchip/rtc/m48t08.h

16 #i‚de‡
__LIBCHIP_M48T08_h


17 
	#__LIBCHIP_M48T08_h


	)

23 
	#M48T08_CONTROL
 0

	)

24 
	#M48T08_SECOND
 1

	)

25 
	#M48T08_MINUTE
 2

	)

26 
	#M48T08_HOUR
 3

	)

27 
	#M48T08_DAY_OF_WEEK
 4

	)

28 
	#M48T08_DATE
 5

	)

29 
	#M48T08_MONTH
 6

	)

30 
	#M48T08_YEAR
 7

	)

36 
πc_‚s
 
m48t08_‚s
;

42 
uöt32_t
 
m48t08_gë_ªgi°î
(

43 
uöçå_t
 
ulCålP‹t
,

44 
uöt8_t
 
ucRegNum


47 
m48t08_£t_ªgi°î
(

48 
uöçå_t
 
ulCålP‹t
,

49 
uöt8_t
 
ucRegNum
,

50 
uöt32_t
 
ucD©a


53 
uöt32_t
 
m48t08_gë_ªgi°î_2
(

54 
uöçå_t
 
ulCålP‹t
,

55 
uöt8_t
 
ucRegNum


58 
m48t08_£t_ªgi°î_2
(

59 
uöçå_t
 
ulCålP‹t
,

60 
uöt8_t
 
ucRegNum
,

61 
uöt32_t
 
ucD©a


64 
uöt32_t
 
m48t08_gë_ªgi°î_4
(

65 
uöçå_t
 
ulCålP‹t
,

66 
uöt8_t
 
ucRegNum


69 
m48t08_£t_ªgi°î_4
(

70 
uöçå_t
 
ulCålP‹t
,

71 
uöt8_t
 
ucRegNum
,

72 
uöt32_t
 
ucD©a


75 
uöt32_t
 
m48t08_gë_ªgi°î_8
(

76 
uöçå_t
 
ulCålP‹t
,

77 
uöt8_t
 
ucRegNum


80 
m48t08_£t_ªgi°î_8
(

81 
uöçå_t
 
ulCålP‹t
,

82 
uöt8_t
 
ucRegNum
,

83 
uöt32_t
 
ucD©a


	@src/libchip/rtc/m48t08_reg.c

16 
	~<πems.h
>

17 
	~<libchù/πc.h
>

18 
	~<libchù/m48t08.h
>

20 #i‚de‡
_M48T08_MULTIPLIER


21 
	#_M48T08_MULTIPLIER
 1

	)

22 
	#_M48T08_NAME
(
_X
Ë
	)
_X

23 
	#_M48T08_TYPE
 
uöt8_t


	)

26 
	#CALCULATE_REGISTER_ADDRESS
–
_ba£
, 
_ªg
 ) \

27 (
_M48T08_TYPE
 *)((
_ba£
Ë+ ((
_ªg
Ë* 
_M48T08_MULTIPLIER
 ))

	)

33 
uöt32_t
 
	$_M48T08_NAME
(
m48t08_gë_ªgi°î
)(

34 
uöçå_t
 
ulCålP‹t
,

35 
uöt8_t
 
ucRegNum


38 
_M48T08_TYPE
 *
p‹t
;

40 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

42  *
p‹t
;

43 
	}
}

49 
	$_M48T08_NAME
(
m48t08_£t_ªgi°î
)(

50 
uöçå_t
 
ulCålP‹t
,

51 
uöt8_t
 
ucRegNum
,

52 
uöt32_t
 
ucD©a


55 
_M48T08_TYPE
 *
p‹t
;

57 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

59 *
p‹t
 = 
ucD©a
;

60 
	}
}

	@src/libchip/rtc/m48t08_reg2.c

16 
	#_M48T08_MULTIPLIER
 2

	)

17 
	#_M48T08_NAME
(
_X
Ë_X##
_2


	)

18 
	#_M48T08_TYPE
 
uöt8_t


	)

20 
	~"m48t08_ªg.c
"

	@src/libchip/rtc/m48t08_reg4.c

16 
	#_M48T08_MULTIPLIER
 4

	)

17 
	#_M48T08_NAME
(
_X
Ë_X##
_4


	)

18 
	#_M48T08_TYPE
 
uöt8_t


	)

20 
	~"m48t08_ªg.c
"

	@src/libchip/rtc/m48t08_reg8.c

16 
	#_M48T08_MULTIPLIER
 8

	)

17 
	#_M48T08_NAME
(
_X
Ë_X##
_8


	)

18 
	#_M48T08_TYPE
 
uöt8_t


	)

20 
	~"m48t08_ªg.c
"

	@src/libchip/rtc/mc146818a.c

23 
	~<πems.h
>

24 
	~<libchù/πc.h
>

25 
	~<libchù/mc146818a.h
>

27 
	#From_BCD
–
_x
 ) ((((_xË>> 4Ë* 10Ë+ ((_xË& 0x0F))

	)

28 
	#To_BCD
–
_x
 ) ((((_xË/ 10Ë<< 4Ë+ ((_xË% 10))

	)

33 
boﬁ
 
	$mc146818a_¥obe
(

34 
mö‹


37 
uöt32_t
 
mc146818a
;

38 
gëRegi°î_f
 
gëReg
;

39 
uöt32_t
 
vÆue
;

44 
mc146818a
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

45 
gëReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
gëRegi°î
;

46 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_STATUSD
 );

47 i‡((
vÆue
 == 0) || (value == 0xFF))

48  
Ál£
;

49  
åue
;

50 
	}
}

55 
	$mc146818a_öôülize
(

56 
mö‹


59 
uöçå_t
 
mc146818a
;

60 
£tRegi°î_f
 
£tReg
;

62 
mc146818a
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

63 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

65 (*
£tReg
)(

66 
mc146818a
,

67 
MC146818A_STATUSA
,

68 
MC146818ASA_DIVIDER
|
MC146818ASA_1024


70 (*
£tReg
)(

71 
mc146818a
,

72 
MC146818A_STATUSB
,

73 
MC146818ASB_24HR


75 
	}
}

80 
	$mc146818a_gë_time
(

81 
mö‹
,

82 
πems_time_of_day
 *
time


85 
uöçå_t
 
mc146818a
;

86 
gëRegi°î_f
 
gëReg
;

87 
uöt32_t
 
vÆue
;

88 
πems_öãºu±_Àvñ
 
Àvñ
;

90 
mc146818a
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

91 
gëReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
gëRegi°î
;

96 i‡(((*
gëReg
)–
mc146818a
, 
MC146818A_STATUSD
 ) & 
MC146818ASD_PWR
) == 0)

102 
	`πems_öãºu±_dißbÀ
–
Àvñ
 );

103 ((*
gëReg
)–
mc146818a
, 
MC146818A_STATUSA
 ) & 
MC146818ASA_TUP
) != 0) {

104 
	`πems_öãºu±_Êash
–
Àvñ
 );

110 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_YEAR
 );

111 
vÆue
 = 
	`From_BCD
( value );

112 i‡–
vÆue
 < 88 )

113 
time
->
yór
 = 2000 + 
vÆue
;

115 
time
->
yór
 = 1900 + 
vÆue
;

117 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_MONTH
 );

118 
time
->
m⁄th
 = 
	`From_BCD
–
vÆue
 );

120 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_DAY
 );

121 
time
->
day
 = 
	`From_BCD
–
vÆue
 );

123 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_HRS
 );

124 
time
->
hour
 = 
	`From_BCD
–
vÆue
 );

126 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_MIN
 );

127 
time
->
möuã
 = 
	`From_BCD
–
vÆue
 );

129 
vÆue
 = (*
gëReg
)–
mc146818a
, 
MC146818A_SEC
 );

130 
	`πems_öãºu±_íabÀ
–
Àvñ
 );

131 
time
->
£c⁄d
 = 
	`From_BCD
–
vÆue
 );

132 
time
->
ticks
 = 0;

135 
	}
}

140 
	$mc146818a_£t_time
(

141 
mö‹
,

142 c⁄° 
πems_time_of_day
 *
time


145 
uöt32_t
 
mc146818a
;

146 
£tRegi°î_f
 
£tReg
;

148 
mc146818a
 = 
RTC_TabÀ
[ 
mö‹
 ].
ulCålP‹t1
;

149 
£tReg
 = 
RTC_TabÀ
[ 
mö‹
 ].
£tRegi°î
;

154 (*
£tReg
)–
mc146818a
, 
MC146818A_STATUSB
, 
MC146818ASB_HALT
|
MC146818ASB_24HR
 );

156 i‡–
time
->
yór
 >= 2088 )

157 
	`πems_Áèl_îr‹_occuºed
–
RTEMS_INVALID_NUMBER
 );

159 (*
£tReg
)–
mc146818a
, 
MC146818A_YEAR
, 
	`To_BCD
(
time
->
yór
 % 100) );

160 (*
£tReg
)–
mc146818a
, 
MC146818A_MONTH
, 
	`To_BCD
(
time
->
m⁄th
) );

161 (*
£tReg
)–
mc146818a
, 
MC146818A_DAY
, 
	`To_BCD
(
time
->
day
) );

162 (*
£tReg
)–
mc146818a
, 
MC146818A_HRS
, 
	`To_BCD
(
time
->
hour
) );

163 (*
£tReg
)–
mc146818a
, 
MC146818A_MIN
, 
	`To_BCD
(
time
->
möuã
) );

164 (*
£tReg
)–
mc146818a
, 
MC146818A_SEC
, 
	`To_BCD
(
time
->
£c⁄d
) );

169 (*
£tReg
)–
mc146818a
, 
MC146818A_STATUSB
, 
MC146818ASB_24HR
 );

171 
	}
}

176 
πc_‚s
 
	gmc146818a_‚s
 = {

177 
mc146818a_öôülize
,

178 
mc146818a_gë_time
,

179 
mc146818a_£t_time


	@src/libchip/rtc/mc146818a.h

14 #i‚de‡
__LIBCHIP_MC146818A_h


15 
	#__LIBCHIP_MC146818A_h


	)

20 
	#MC146818A_SEC
 0x00

	)

21 
	#MC146818A_SECALRM
 0x01

	)

22 
	#MC146818A_MIN
 0x02

	)

23 
	#MC146818A_MINALRM
 0x03

	)

24 
	#MC146818A_HRS
 0x04

	)

25 
	#MC146818A_HRSALRM
 0x05

	)

26 
	#MC146818A_WDAY
 0x06

	)

27 
	#MC146818A_DAY
 0x07

	)

28 
	#MC146818A_MONTH
 0x08

	)

29 
	#MC146818A_YEAR
 0x09

	)

31 
	#MC146818A_STATUSA
 0x0®

	)

32 
	#MC146818ASA_TUP
 0x80

	)

33 
	#MC146818ASA_DIVIDER
 0x20

	)

34 
	#MC146818ASA_1024
 0x06

	)

36 
	#MC146818A_STATUSB
 0x0b

	)

37 
	#MC146818ASB_DST
 0x01

	)

38 
	#MC146818ASB_24HR
 0x02

	)

39 
	#MC146818ASB_HALT
 0x80

	)

41 
	#MC146818A_STATUSD
 0x0d

	)

42 
	#MC146818ASD_PWR
 0x80

	)

48 
πc_‚s
 
mc146818a_‚s
;

49 
boﬁ
 
mc146818a_¥obe
(

50 
mö‹


56 
uöt32_t
 
mc146818a_gë_ªgi°î
(

57 
uöçå_t
 
ulCålP‹t
,

58 
uöt8_t
 
ucRegNum


61 
mc146818a_£t_ªgi°î
(

62 
uöçå_t
 
ulCålP‹t
,

63 
uöt8_t
 
ucRegNum
,

64 
uöt32_t
 
ucD©a


	@src/libchip/rtc/mc146818a_ioreg.c

19 
	~<πems.h
>

20 
	~<b•.h
>

21 
	~<libchù/πc.h
>

22 
	~<libchù/mc146818a.h
>

27 #i‡
deföed
(
__i386__
Ë|| deföed(
__PPC__
)

28 #i‡
deföed
(
öp‹t_byã
)

29 
uöt32_t
 
	$mc146818a_gë_ªgi°î
(

30 
uöçå_t
 
ulCålP‹t
,

31 
uöt8_t
 
ucRegNum


34 
uöt8_t
 
vÆ
;

35 
uöt8_t
 
tmp
;

37 (Ë
tmp
;

39 
	`ouç‹t_byã
–
ulCålP‹t
, 
ucRegNum
 );

40 
	`öp‹t_byã
–0x84, 
tmp
 );

41 
	`öp‹t_byã
–
ulCålP‹t
+1, 
vÆ
 );

42 
	`öp‹t_byã
–0x84, 
tmp
 );

43  
vÆ
;

44 
	}
}

46 
	$mc146818a_£t_ªgi°î
(

47 
uöçå_t
 
ulCålP‹t
,

48 
uöt8_t
 
ucRegNum
,

49 
uöt32_t
 
ucD©a


52 
	`ouç‹t_byã
–
ulCålP‹t
, 
ucRegNum
 );

53 
	`ouç‹t_byã
–
ulCålP‹t
+1, (
uöt8_t
)
ucD©a
 );

54 
	}
}

	@src/libchip/rtc/rtc.h

12 #i‚de‡
__LIBCHIP_RTC_h


13 
	#__LIBCHIP_RTC_h


	)

15 
	~<°dboﬁ.h
>

16 
	~<°döt.h
>

18 
	~<πems.h
>

24 
	$uöt32_t
 (*
	tgëRegi°î_f
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
);

25 (*
	t£tRegi°î_f
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
, 
	tuöt32_t
 
	tvÆue
);

27 
	s_πc_‚s
 {

28 (*
devi˚Inôülize
)(
mö‹
);

29 (*
devi˚GëTime
)(
mö‹
, 
πems_time_of_day
 *
time
);

30 (*
devi˚SëTime
)(
mö‹
, c⁄° 
πems_time_of_day
 *
time
);

31 } 
	tπc_‚s
;

34 
RTC_M48T08
,

35 
RTC_ICM7170
,

36 
RTC_CUSTOM
,

37 
RTC_MC146818A


38 } 
	tπc_devs
;

61 
	s_πc_tbl
 {

62 c⁄° *
sDevi˚Name
;

63 
πc_devs
 
devi˚Ty≥
;

64 c⁄° 
πc_‚s
 *
pDevi˚Fns
;

65 
	`boﬁ
 (*
devi˚Probe
)(
mö‹
);

66 *
pDevi˚P¨ams
;

67 
uöçå_t
 
ulCålP‹t1
;

68 
uöçå_t
 
ulD©aP‹t
;

69 
gëRegi°î_f
 
gëRegi°î
;

70 
£tRegi°î_f
 
£tRegi°î
;

71 } 
	tπc_tbl
;

73 
πc_tbl
 
RTC_TabÀ
[];

74 
size_t
 
RTC_Cou¡
;

77 
boﬁ
 
	`πc_¥obe
–
mö‹
 );

	@src/libchip/rtc/rtcprobe.c

12 
	~<πems.h
>

13 
	~<libchù/πc.h
>

16 
boﬁ
 
	$πc_¥obe
(

17 
mö‹


20  
åue
;

21 
	}
}

	@src/libchip/sensor/ov9712.c

18 
	~<πems.h
>

19 
	~<πems/libi2c.h
>

21 
	~<libchù/ov9712.h
>

22 
	~<i2c.h
>

24 
	~<πems/libio.h
>

26 
	#ARRAY_SIZE
(
¨øy
Ë(◊ºayË/ ◊ºay[0]))

	)

28 
SENSOR_DATA_S
 
	gov9712_öô_∑ø_1280_720
[] = {

40 
SENSOR_DATA_S
 
	gov9712_öô_∑ø_640_400
[] = {

53 
	$ov9712_dow∆ﬂd_fúmw¨e
(
SENSOR_DATA_S
 *
pModeSëtög
, 
ArySize
)

55 
i
, 
ªt
;

56 
uöt32_t
 
ªg_addr
, 
vÆ
;

58 
i
 = 0; i < 
ArySize
; ++i, ++
pModeSëtög
){

59 
ªg_addr
 = 
pModeSëtög
->reg_addr;

60 
vÆ
 = 
pModeSëtög
->
d©a
;

61 
ªt
 = 
	`hi_i2c_wrôe
(
SENSOR_I2C_ADDR
, 
ªg_addr
, 1, 
vÆ
, 1);

62 if(
ªt
 < 0){

63 
	`¥ötk
("i2¯wrôêaddr=0x%x vÆ=0x%xÉº‹!\n", 
ªg_addr
, 
vÆ
);

68  
ªt
;

69 
	}
}

71 
πems_°©us_code


72 
	$£ns‹_ov9712_öô
 (
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
,

73 *
¨g
)

75 
SENSOR_DATA_S
 *
pModeSëtög
 = 
NULL
;

76 
ArySize
 = 0, 
ªt
 = 0;

78 
	`hi_i2c_öô
();

80 
pModeSëtög
 = 
ov9712_öô_∑ø_1280_720
;

81 
ArySize
 = 
	`ARRAY_SIZE
(
ov9712_öô_∑ø_1280_720
);

82 
ªt
 = 
	`ov9712_dow∆ﬂd_fúmw¨e
(
pModeSëtög
, 
ArySize
);

83 i‡(
ªt
 < 0){

84 
	`¥ötk
("ov9712_download_firmware failed!Åryágain\n");

85  
RTEMS_IO_ERROR
;

88  
RTEMS_SUCCESSFUL
;

89 
	}
}

91 
πems_°©us_code


92 
	$£ns‹_ov9712_ªad
 (
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
,

93 *
¨g
)

95 
SENSOR_DATA_S
 *
¨gs
 = 
¨g
;

97 
	`hi_i2c_ªad
(
SENSOR_I2C_ADDR
, 
¨gs
->
ªg_addr
, 1, &¨gs->
d©a
, 1);

99  
RTEMS_SUCCESSFUL
;

100 
	}
}

102 
πems_°©us_code


103 
	$£ns‹_ov9712_wrôe
 (
πems_devi˚_maj‹_numbî
 
maj‹
, 
πems_devi˚_mö‹_numbî
 
mö‹
,

104 *
¨g
)

106 
SENSOR_DATA_S
 *
¨gs
 = 
¨g
;

108 
	`hi_i2c_wrôe
(
SENSOR_I2C_ADDR
, 
¨gs
->
ªg_addr
, 1,árgs->
d©a
, 1);

110  
RTEMS_SUCCESSFUL
;

111 
	}
}

113 
πems_drivî_addªss_èbÀ
 
	gov9712_›s
 = {

114 .
öôüliz©i⁄_íåy
 = 
£ns‹_ov9712_öô
,

115 .
	gªad_íåy
 = 
£ns‹_ov9712_ªad
,

116 .
	gwrôe_íåy
 = 
£ns‹_ov9712_wrôe
,

119 
πems_libi2c_drv_t
 
	gov9712_drv_tbl
 = {

120 .
›s
 = &
ov9712_›s
,

121 .
	gsize
 =  (
ov9712_drv_tbl
),

124 
πems_libi2c_drv_t
 *
	gi2c_ov9712_drivî_des¸ùt‹
 = &
ov9712_drv_tbl
;

	@src/libchip/sensor/ov9712.h

1 #i‚de‡
_OV9712_H


2 
	#_OV9712_H


	)

4 
	~<πems.h
>

5 
	~<πems/libi2c.h
>

7 #ifde‡
__˝lu•lus


11 
	#SENSOR_I2C_ADDR
 0x60

	)

13 
	sSENSOR_DATA_S


15 
ªg_addr
;

16 
d©a
;

18 }
	tSENSOR_DATA_S
 ;

21 
πems_libi2c_drv_t
 *
i2c_ov9712_drivî_des¸ùt‹
;

23 #ifde‡
__˝lu•lus


	@src/libchip/serial/mc68681.c

17 
	~<πems.h
>

18 
	~<πems/libio.h
>

19 
	~<πems/sc‹e/sys°©e.h
>

20 
	~<°dlib.h
>

22 
	~<libchù/£rül.h
>

23 
	~<libchù/mc68681.h
>

24 
	~<libchù/£rsuµ.h
>

25 
	~"mc68681_p.h
"

31 c⁄° 
c⁄sﬁe_‚s
 
	gmc68681_‚s
 =

33 
libchù_£rül_deÁu…_¥obe
,

34 
mc68681_›í
,

35 
NULL
,

36 
NULL
,

37 
mc68681_wrôe_suµ‹t_öt
,

38 
mc68681_öôülize_öãºu±s
,

39 
mc68681_wrôe_pﬁÀd
,

40 
mc68681_£t_©åibuãs
,

41 
åue


44 c⁄° 
c⁄sﬁe_‚s
 
	gmc68681_‚s_pﬁÀd
 =

46 
libchù_£rül_deÁu…_¥obe
,

47 
mc68681_›í
,

48 
mc68681_˛o£
,

49 
mc68681_öbyã_n⁄blockög_pﬁÀd
,

50 
mc68681_wrôe_suµ‹t_pﬁÀd
,

51 
mc68681_öô
,

52 
mc68681_wrôe_pﬁÀd
,

53 
mc68681_£t_©åibuãs
,

54 
Ál£
,

58 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

59 
£t_ve˘‹
–
πems_i§_íåy
, 
πems_ve˘‹_numbî
, );

74 
MC68681_STATIC
 
mc68681_baud_øã
(

75 
mö‹
,

76 
baud
,

77 *
baud_mask_p
,

78 *
a¸_bô_p
,

79 *
comm™d


89 
MC68681_STATIC
 
	$mc68681_£t_©åibuãs
(

90 
mö‹
,

91 c⁄° 
ãrmios
 *
t


94 
uöt32_t
 
pMC68681_p‹t
;

95 
uöt32_t
 
pMC68681
;

96 
mode1
;

97 
mode2
;

98 
baud_mask
;

99 
a¸_bô
;

100 
cmd
 = 0;

101 
£tRegi°î_f
 
£tReg
;

102 
πems_öãºu±_Àvñ
 
Irql
;

104 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

105 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

106 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

112 i‡(
	`mc68681_baud_øã
–
mö‹
, 
t
->
c_cÊag
, &
baud_mask
, &
a¸_bô
, &
cmd
 ) == -1)

115 
baud_mask
 |= baud_mask << 4;

116 
a¸_bô
 <<= 7;

122 
mode1
 = 0;

123 
mode2
 = 0;

125 i‡(
t
->
c_cÊag
 & 
PARENB
) {

126 i‡(
t
->
c_cÊag
 & 
PARODD
)

127 
mode1
 |= 0x04;

131 
mode1
 |= 0x10;

138 i‡(
t
->
c_cÊag
 & 
CSIZE
) {

139 
t
->
c_cÊag
 & 
CSIZE
) {

140 
CS5
: ;

141 
CS6
: 
mode1
 |= 0x01; ;

142 
CS7
: 
mode1
 |= 0x02; ;

143 
CS8
: 
mode1
 |= 0x03; ;

146 
mode1
 |= 0x03;

153 i‡(
t
->
c_cÊag
 & 
CSTOPB
) {

154 
mode2
 |= 0x0F;

156 i‡((
t
->
c_cÊag
 & 
CSIZE
Ë=
CS5
)

158 
mode2
 |= 0x07;

165 if(
t
->
c_cÊag
 & 
CRTSCTS
) {

166 
mode1
 |= 0x80;

167 
mode2
 |= 0x10;

171 
	`πems_öãºu±_dißbÀ
(
Irql
);

172 (*
£tReg
)–
pMC68681
, 
MC68681_AUX_CTRL_REG
, 
a¸_bô
 );

173 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_CLOCK_SELECT
, 
baud_mask
 );

174 i‡–
cmd
 ) {

175 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
cmd
 );

176 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
cmd
 | 0x20 );

178 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_MR_PTR
 );

179 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE
, 
mode1
 );

180 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE
, 
mode2
 );

181 
	`πems_öãºu±_íabÀ
(
Irql
);

183 
	}
}

191 
MC68681_STATIC
 
	$mc68681_öôülize_c⁄ãxt
(

192 
mö‹
,

193 
mc68681_c⁄ãxt
 *
pmc68681C⁄ãxt


196 
p‹t
;

197 
pMC68681
;

198 
pMC68681_p‹t
;

200 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

201 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

203 
pmc68681C⁄ãxt
->
m©e
 = -1;

205 
p‹t
=0 ;Ö‹t<
C⁄sﬁe_P‹t_Cou¡
 ;Öort++ ) {

206 i‡–
C⁄sﬁe_P‹t_Tbl
[
p‹t
]->
ulCålP‹t1
 =
pMC68681
 &&

207 
C⁄sﬁe_P‹t_Tbl
[
p‹t
]->
ulCålP‹t2
 !
pMC68681_p‹t
 ) {

208 
pmc68681C⁄ãxt
->
m©e
 = 
p‹t
;

209 
pmc68681C⁄ãxt
->
imr
 = 0;

214 
	}
}

222 
MC68681_STATIC
 
	$mc68681_öô
(
mö‹
)

224 
uöt32_t
 
pMC68681_p‹t
;

225 
mc68681_c⁄ãxt
 *
pmc68681C⁄ãxt
;

226 
£tRegi°î_f
 
£tReg
;

228 
pmc68681C⁄ãxt
 = (
mc68681_c⁄ãxt
 *Ë
	`mÆloc
((mc68681_context));

230 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
 = (*)
pmc68681C⁄ãxt
;

232 
	`mc68681_öôülize_c⁄ãxt
–
mö‹
, 
pmc68681C⁄ãxt
 );

234 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

235 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

241 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_RX
 );

242 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_TX
 );

243 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_ERROR
 );

244 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_BREAK
 );

245 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_STOP_BREAK
 );

246 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_DISABLE_TX
 );

247 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_DISABLE_RX
 );

250 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE_REG_1A
, 0x00 );

251 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE_REG_2A
, 0x02 );

257 
	`mc68681_íabÀ_öãºu±s
–
mö‹
, 
MC68681_IMR_DISABLE_ALL
 );

258 
	}
}

268 
MC68681_STATIC
 
	$mc68681_›í
(

269 
maj‹
,

270 
mö‹
,

271 *
¨g


274 
uöt32_t
 
pMC68681
;

275 
uöt32_t
 
pMC68681_p‹t
;

276 
baud
;

277 
a¸_bô
;

278 
ve˘‹
;

279 
comm™d
 = 0;

280 
πems_öãºu±_Àvñ
 
Irql
;

281 
£tRegi°î_f
 
£tReg
;

282 
°©us
;

285 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

286 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

287 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

288 
ve˘‹
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulI¡Ve˘‹
;

292 
°©us
 = 
	`mc68681_baud_øã
–
mö‹
, 
B9600
, &
baud
, &
a¸_bô
, &
comm™d
 );

293 i‡(
°©us
 < 0Ë
	`πems_Áèl_îr‹_occuºed
 (
RTEMS_NOT_DEFINED
);

299 
	`πems_öãºu±_dißbÀ
(
Irql
);

300 (*
£tReg
)–
pMC68681
, 
MC68681_AUX_CTRL_REG
, 
a¸_bô
 << 7 );

301 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_CLOCK_SELECT
, 
baud
 );

302 i‡–
comm™d
 ) {

303 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
comm™d
 );

304 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
comm™d
 | 0x20 );

306 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_MR_PTR
 );

307 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE
, 0x13 );

308 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_MODE
, 0x07 );

309 
	`πems_öãºu±_íabÀ
(
Irql
);

311 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_ENABLE_TX
 );

312 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_ENABLE_RX
 );

314 (*
£tReg
)–
pMC68681
, 
MC68681_INTERRUPT_VECTOR_REG
, 
ve˘‹
 );

316  
RTEMS_SUCCESSFUL
;

317 
	}
}

325 
MC68681_STATIC
 
	$mc68681_˛o£
(

326 
maj‹
,

327 
mö‹
,

328 *
¨g


331 
uöt32_t
 
pMC68681_p‹t
;

332 
£tRegi°î_f
 
£tReg
;

334 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

335 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

340 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_DISABLE_TX
 );

341 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_DISABLE_RX
 );

343 (
RTEMS_SUCCESSFUL
);

344 
	}
}

352 
MC68681_STATIC
 
	$mc68681_wrôe_pﬁÀd
(

353 
mö‹
,

354 
cCh¨


357 
uöt32_t
 
pMC68681_p‹t
;

358 
ucLöeSètus
;

359 
iTimeout
;

360 
gëRegi°î_f
 
gëReg
;

361 
£tRegi°î_f
 
£tReg
;

363 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

364 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

365 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

370 
iTimeout
 = 1000;

371 
ucLöeSètus
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_STATUS
);

372 (
ucLöeSètus
 & (
MC68681_TX_READY
|
MC68681_TX_EMPTY
)) == 0) {

374 i‡((
ucLöeSètus
 & 0xF0))

375 (*
£tReg
)–
pMC68681_p‹t
, 
MC68681_COMMAND
, 
MC68681_MODE_REG_RESET_ERROR
 );

382 if(
	`_Sy°em_°©e_Is_up
(
	`_Sy°em_°©e_Gë
())) {

383 
	`πems_èsk_wake_a·î
(
RTEMS_YIELD_PROCESSOR
);

386 
ucLöeSètus
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_STATUS
);

387 if(!--
iTimeout
) {

396 (*
£tReg
)(
pMC68681_p‹t
, 
MC68681_TX_BUFFER
, 
cCh¨
);

397 
	}
}

406 
MC68681_STATIC
 
πems_i§
 
	$mc68681_i§
(

407 
πems_ve˘‹_numbî
 
ve˘‹


410 
mö‹
;

412 
mö‹
=0 ; mö‹<
C⁄sﬁe_P‹t_Cou¡
 ; minor++) {

413 if(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulI¡Ve˘‹
 =
ve˘‹
 &&

414 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
devi˚Ty≥
 =
SERIAL_MC68681
 ) {

415 
	`mc68681_¥o˚ss
(
mö‹
);

418 
	}
}

427 
MC68681_STATIC
 
	$mc68681_öôülize_öãºu±s
(
mö‹
)

429 
	`mc68681_öô
(
mö‹
);

431 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 = 
FALSE
;

433 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

434 
	`£t_ve˘‹
(
mc68681_i§
, 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulI¡Ve˘‹
, 1);

437 
	`mc68681_íabÀ_öãºu±s
(
mö‹
,
MC68681_IMR_ENABLE_ALL_EXCEPT_TX
);

438 
	}
}

446 
MC68681_STATIC
 
ssize_t
 
	$mc68681_wrôe_suµ‹t_öt
(

447 
mö‹
,

448 c⁄° *
buf
,

449 
size_t
 
Àn


452 
uöt32_t
 
Irql
;

453 
uöt32_t
 
pMC68681_p‹t
;

454 
£tRegi°î_f
 
£tReg
;

456 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

457 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

464 i‡–!
Àn
 )

471 
	`πems_öãºu±_dißbÀ
(
Irql
);

472 i‡–
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 =
FALSE
 ) {

473 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 = 
TRUE
;

474 
	`mc68681_íabÀ_öãºu±s
(
mö‹
, 
MC68681_IMR_ENABLE_ALL
);

476 (*
£tReg
)(
pMC68681_p‹t
, 
MC68681_TX_BUFFER
, *
buf
);

477 
	`πems_öãºu±_íabÀ
(
Irql
);

480 
	}
}

489 
MC68681_STATIC
 
ssize_t
 
	$mc68681_wrôe_suµ‹t_pﬁÀd
(

490 
mö‹
,

491 c⁄° *
buf
,

492 
size_t
 
Àn


495 
nwrôe
 = 0;

500 
nwrôe
 < 
Àn
) {

504 
	`mc68681_wrôe_pﬁÀd
(
mö‹
, *
buf
++);

505 
nwrôe
++;

511  
nwrôe
;

512 
	}
}

520 
MC68681_STATIC
 
	$mc68681_öbyã_n⁄blockög_pﬁÀd
(

521 
mö‹


524 
uöt32_t
 
pMC68681_p‹t
;

525 
ucLöeSètus
;

526 
cCh¨
;

527 
gëRegi°î_f
 
gëReg
;

529 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

530 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

532 
ucLöeSètus
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_STATUS
);

533 if(
ucLöeSètus
 & 
MC68681_RX_READY
) {

534 
cCh¨
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_RX_BUFFER
);

535  ()
cCh¨
;

539 
	}
}

545 
MC68681_STATIC
 
	$mc68681_baud_øã
(

546 
mö‹
,

547 
baud
,

548 *
baud_mask_p
,

549 *
a¸_bô_p
,

550 *
comm™d


553 
baud_mask
;

554 
a¸_bô
;

555 
°©us
;

556 
is_exãnded
;

557 
baud_ªque°ed
;

558 
mc68681_baud_èbÀ_t
 *
baud_tbl
;

560 
baud_mask
 = 0;

561 
a¸_bô
 = 0;

562 
°©us
 = 0;

564 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulD©aP‹t
 & 
MC68681_DATA_BAUD_RATE_SET_2
)

566 
a¸_bô
 = 1;

569 
is_exãnded
 = 0;

571 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulD©aP‹t
 & 
MC68681_XBRG_MASK
) {

572 
MC68681_XBRG_IGNORED
:

573 *
comm™d
 = 0x00;

575 
MC68681_XBRG_ENABLED
:

576 *
comm™d
 = 0x80;

577 
is_exãnded
 = 1;

579 
MC68681_XBRG_DISABLED
:

580 *
comm™d
 = 0x90;

584 
baud_ªque°ed
 = 
baud
 & 
CBAUD
;

585 i‡(!
baud_ªque°ed
)

586 
baud_ªque°ed
 = 
B9600
;

588 
baud_ªque°ed
 = 
	`πems_ãrmios_baud_to_ödex
( baud_requested );

590 
baud_tbl
 = (
mc68681_baud_èbÀ_t
 *)

591 ((
uöçå_t
)
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulClock
);

592 i‡(!
baud_tbl
)

593 
	`πems_Áèl_îr‹_occuºed
(
RTEMS_INVALID_ADDRESS
);

595 i‡–
is_exãnded
 )

596 
baud_mask
 = ()
baud_tbl
[ 
a¸_bô
 + 2 ][ 
baud_ªque°ed
 ];

598 
baud_mask
 = 
baud_tbl
[ 
a¸_bô
 ][ 
baud_ªque°ed
 ];

600 i‡–
baud_mask
 =
MC68681_BAUD_NOT_VALID
 )

601 
°©us
 = -1;

607 *
baud_mask_p
 = (
baud_mask
 << 4) | baud_mask;

608 *
a¸_bô_p
 = 
a¸_bô
;

609  
°©us
;

610 
	}
}

618 
MC68681_STATIC
 
	$mc68681_¥o˚ss
(

619 
mö‹


622 
uöt32_t
 
pMC68681
;

623 
uöt32_t
 
pMC68681_p‹t
;

624 vﬁ©ûê
uöt8_t
 
ucLöeSètus
;

625 vﬁ©ûê
uöt8_t
 
ucISRSètus
;

626 
cCh¨
;

627 
gëRegi°î_f
 
gëReg
;

629 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

630 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

631 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

634 
ucISRSètus
 = (*
gëReg
)(
pMC68681
, 
MC68681_INTERRUPT_STATUS_REG
);

637 i‡(
pMC68681
 !
pMC68681_p‹t
){

638 
ucISRSètus
 >>= 4;

642 if(
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 =
FALSE
) {

643 
ucISRSètus
 = ucISRSètu†& ~
MC68681_IR_TX_READY
;

649 
åue
) {

650 
ucLöeSètus
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_STATUS
);

651 if(!(
ucLöeSètus
 & 
MC68681_RX_READY
)) {

657 i‡–
ucLöeSètus
 & 
MC68681_RX_ERRORS
 ) {

659 
cCh¨
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_RX_BUFFER
);

660 
ucLöeSètus
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_STATUS
);

661 }  
ucLöeSètus
 & 
MC68681_RX_READY
 );

664 
cCh¨
 = (*
gëReg
)(
pMC68681_p‹t
, 
MC68681_RX_BUFFER
);

665 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(

666 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
,

667 &
cCh¨
,

676 i‡(
ucISRSètus
 & 
MC68681_IR_TX_READY
) {

677 i‡(!
	`πems_ãrmios_dequeue_ch¨a˘îs
(

678 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
, 1)) {

680 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 = 
FALSE
;

681 
	`mc68681_íabÀ_öãºu±s
(
mö‹
, 
MC68681_IMR_ENABLE_ALL_EXCEPT_TX
);

684 
	}
}

694 
MC68681_STATIC
 
	$mc68681_buûd_imr
(

695 
mö‹
,

696 
íabÀ_Êag


699 
m©e
;

700 
is_a
;

701 
mask
;

702 
m©e_mask
;

703 
pMC68681
;

704 
pMC68681_p‹t
;

705 
mc68681_c⁄ãxt
 *
pmc68681C⁄ãxt
;

706 
mc68681_c⁄ãxt
 *
m©eC⁄ãxt
;

708 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

709 
pMC68681_p‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

710 
pmc68681C⁄ãxt
 = (
mc68681_c⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

711 
m©e
 = 
pmc68681C⁄ãxt
->mate;

713 
mask
 = 0;

714 
m©e_mask
 = 0;

716 
is_a
 = (
pMC68681
 =
pMC68681_p‹t
);

722 i‡–
m©e
 != -1 ) {

723 
m©eC⁄ãxt
 = 
C⁄sﬁe_P‹t_D©a
[
m©e
].
pDevi˚C⁄ãxt
;

725 i‡(
m©eC⁄ãxt
)

726 
m©e_mask
 = 
m©eC⁄ãxt
->
imr
;

733 i‡–
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Fns
->
devi˚OuçutU£sI¡îru±s
 )

734 
mask
 = 
íabÀ_Êag
;

736 
pmc68681C⁄ãxt
->
imr
 = 
mask
;

742 i‡(
is_a
)

743  (
m©e_mask
 << 4Ë| 
mask
;

745  (
mask
 << 4Ë| 
m©e_mask
;

746 
	}
}

754 
MC68681_STATIC
 
	$mc68681_íabÀ_öãºu±s
(

755 
mö‹
,

756 
imr_mask


759 
uöt32_t
 
pMC68681
;

760 
£tRegi°î_f
 
£tReg
;

762 
pMC68681
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

763 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

769 (*
£tReg
)(

770 
pMC68681
,

771 
MC68681_INTERRUPT_MASK_REG
,

772 
	`mc68681_buûd_imr
(
mö‹
, 
imr_mask
)

774 
	}
}

	@src/libchip/serial/mc68681.h

11 #i‚de‡
_MC68681_H_


12 
	#_MC68681_H_


	)

14 #ifde‡
__˝lu•lus


24 
	#MC68681_STATUS
 1

	)

25 
	#MC68681_RX_BUFFER
 3

	)

27 
	#MC68681_MODE
 0

	)

28 
	#MC68681_CLOCK_SELECT
 1

	)

29 
	#MC68681_COMMAND
 2

	)

30 
	#MC68681_TX_BUFFER
 3

	)

39 
	#MC68681_DATA_BAUD_RATE_SET_1
 0

	)

40 
	#MC68681_DATA_BAUD_RATE_SET_2
 1

	)

42 
	#MC68681_XBRG_IGNORED
 (0 << 1)

	)

43 
	#MC68681_XBRG_ENABLED
 (1 << 1)

	)

44 
	#MC68681_XBRG_DISABLED
 (2 << 1)

	)

45 
	#MC68681_XBRG_MASK
 (3 << 1)

	)

51 
	tmc68681_baud_t
;

52 
mc68681_baud_t
 
	tmc68681_baud_èbÀ_t
[
RTEMS_TERMIOS_NUMBER_BAUD_RATES
];

54 
	#MC68681_BAUD_NOT_VALID
 0xFF

	)

56 
mc68681_baud_t


57 
mc68681_baud_øã_èbÀ
[4][
RTEMS_TERMIOS_NUMBER_BAUD_RATES
];

64 c⁄° 
c⁄sﬁe_‚s
 
mc68681_‚s
;

65 c⁄° 
c⁄sﬁe_‚s
 
mc68681_‚s_pﬁÀd
;

71 
uöt8_t
 
mc68681_gë_ªgi°î
(

72 
uöçå_t
 
ulCålP‹t
,

73 
uöt8_t
 
ucRegNum


76 
mc68681_£t_ªgi°î
(

77 
uöçå_t
 
ulCålP‹t
,

78 
uöt8_t
 
ucRegNum
,

79 
uöt8_t
 
ucD©a


82 
uöt8_t
 
mc68681_gë_ªgi°î_2
(

83 
uöçå_t
 
ulCålP‹t
,

84 
uöt8_t
 
ucRegNum


87 
mc68681_£t_ªgi°î_2
(

88 
uöçå_t
 
ulCålP‹t
,

89 
uöt8_t
 
ucRegNum
,

90 
uöt8_t
 
ucD©a


93 
uöt8_t
 
mc68681_gë_ªgi°î_4
(

94 
uöçå_t
 
ulCålP‹t
,

95 
uöt8_t
 
ucRegNum


98 
mc68681_£t_ªgi°î_4
(

99 
uöçå_t
 
ulCålP‹t
,

100 
uöt8_t
 
ucRegNum
,

101 
uöt8_t
 
ucD©a


104 
uöt8_t
 
mc68681_gë_ªgi°î_8
(

105 
uöçå_t
 
ulCålP‹t
,

106 
uöt8_t
 
ucRegNum


109 
mc68681_£t_ªgi°î_8
(

110 
uöçå_t
 
ulCålP‹t
,

111 
uöt8_t
 
ucRegNum
,

112 
uöt8_t
 
ucD©a


116 #ifde‡
__˝lu•lus


	@src/libchip/serial/mc68681_baud.c

5 
	~<πems.h
>

6 
	~<libchù/£rül.h
>

7 
	~<libchù/mc68681.h
>

15 
mc68681_baud_t
 
	gmc68681_baud_øã_èbÀ
[4][
RTEMS_TERMIOS_NUMBER_BAUD_RATES
] = {

17 
MC68681_BAUD_NOT_VALID
,

19 
MC68681_BAUD_NOT_VALID
,

22 
MC68681_BAUD_NOT_VALID
,

27 
MC68681_BAUD_NOT_VALID
,

31 
MC68681_BAUD_NOT_VALID
,

33 
MC68681_BAUD_NOT_VALID
,

34 
MC68681_BAUD_NOT_VALID
,

35 
MC68681_BAUD_NOT_VALID
,

36 
MC68681_BAUD_NOT_VALID


39 
MC68681_BAUD_NOT_VALID
,

40 
MC68681_BAUD_NOT_VALID
,

45 
MC68681_BAUD_NOT_VALID
,

54 
MC68681_BAUD_NOT_VALID
,

55 
MC68681_BAUD_NOT_VALID
,

56 
MC68681_BAUD_NOT_VALID
,

57 
MC68681_BAUD_NOT_VALID
,

58 
MC68681_BAUD_NOT_VALID


61 
MC68681_BAUD_NOT_VALID
,

62 
MC68681_BAUD_NOT_VALID
,

67 
MC68681_BAUD_NOT_VALID
,

68 
MC68681_BAUD_NOT_VALID
,

69 
MC68681_BAUD_NOT_VALID
,

70 
MC68681_BAUD_NOT_VALID
,

72 
MC68681_BAUD_NOT_VALID
,

76 
MC68681_BAUD_NOT_VALID
,

79 
MC68681_BAUD_NOT_VALID
,

80 
MC68681_BAUD_NOT_VALID


83 
MC68681_BAUD_NOT_VALID
,

85 
MC68681_BAUD_NOT_VALID
,

88 
MC68681_BAUD_NOT_VALID
,

90 
MC68681_BAUD_NOT_VALID
,

91 
MC68681_BAUD_NOT_VALID
,

92 
MC68681_BAUD_NOT_VALID
,

93 
MC68681_BAUD_NOT_VALID
,

94 
MC68681_BAUD_NOT_VALID
,

97 
MC68681_BAUD_NOT_VALID
,

101 
MC68681_BAUD_NOT_VALID
,

102 
MC68681_BAUD_NOT_VALID


	@src/libchip/serial/mc68681_p.h

11 #i‚de‡
_MC68681_P_H_


12 
	#_MC68681_P_H_


	)

14 #ifde‡
__˝lu•lus


23 
	#MC68681_STATIC


	)

31 
	#MC68681_MODE_REG_1A
 0

	)

32 
	#MC68681_MODE_REG_2A
 0

	)

34 
	#MC68681_COUNT_MODE_CURRENT_MSB
 6

	)

35 
	#MC68681_COUNTER_TIMER_UPPER_REG
 6

	)

36 
	#MC68681_COUNT_MODE_CURRENT_LSB
 7

	)

37 
	#MC68681_COUNTER_TIMER_LOWER_REG
 7

	)

38 
	#MC68681_INTERRUPT_VECTOR_REG
 12

	)

40 
	#MC68681_MODE_REG_1B
 8

	)

41 
	#MC68681_MODE_REG_2B
 8

	)

47 
	#MC68681_STATUS_REG_A
 1

	)

48 
	#MC68681_MASK_ISR_REG
 2

	)

49 
	#MC68681_RECEIVE_BUFFER_A
 3

	)

50 
	#MC68681_INPUT_PORT_CHANGE_REG
 4

	)

51 
	#MC68681_INTERRUPT_STATUS_REG
 5

	)

52 
	#MC68681_STATUS_REG_B
 9

	)

53 
	#MC68681_RECEIVE_BUFFER_B
 11

	)

54 
	#MC68681_INPUT_PORT
 13

	)

55 
	#MC68681_START_COUNT_CMD
 14

	)

56 
	#MC68681_STOP_COUNT_CMD
 15

	)

62 
	#MC68681_CLOCK_SELECT_REG_A
 1

	)

63 
	#MC68681_COMMAND_REG_A
 2

	)

64 
	#MC68681_TRANSMIT_BUFFER_A
 3

	)

65 
	#MC68681_AUX_CTRL_REG
 4

	)

66 
	#MC68681_INTERRUPT_MASK_REG
 5

	)

67 
	#MC68681_CLOCK_SELECT_REG_B
 9

	)

68 
	#MC68681_COMMAND_REG_B
 10

	)

69 
	#MC68681_TRANSMIT_BUFFER_B
 11

	)

70 
	#MC68681_OUTPUT_PORT_CONFIG_REG
 13

	)

71 
	#MC68681_OUTPUT_PORT_SET_REG
 14

	)

72 
	#MC68681_OUTPUT_PORT_RESET_BITS
 15

	)

80 
	#MC68681_MODE_REG_ENABLE_RX
 0x01

	)

81 
	#MC68681_MODE_REG_DISABLE_RX
 0x02

	)

82 
	#MC68681_MODE_REG_ENABLE_TX
 0x04

	)

83 
	#MC68681_MODE_REG_DISABLE_TX
 0x08

	)

84 
	#MC68681_MODE_REG_RESET_MR_PTR
 0x10

	)

85 
	#MC68681_MODE_REG_RESET_RX
 0x20

	)

86 
	#MC68681_MODE_REG_RESET_TX
 0x30

	)

87 
	#MC68681_MODE_REG_RESET_ERROR
 0x40

	)

88 
	#MC68681_MODE_REG_RESET_BREAK
 0x50

	)

89 
	#MC68681_MODE_REG_START_BREAK
 0x60

	)

90 
	#MC68681_MODE_REG_STOP_BREAK
 0x70

	)

91 
	#MC68681_MODE_REG_SET_RX_BRG
 0x80

	)

92 
	#MC68681_MODE_REG_CLEAR_RX_BRG
 0x90

	)

93 
	#MC68681_MODE_REG_SET_TX_BRG
 0xa0

	)

94 
	#MC68681_MODE_REG_CLEAR_TX_BRG
 0xb0

	)

95 
	#MC68681_MODE_REG_SET_STANDBY
 0xc0

	)

96 
	#MC68681_MODE_REG_SET_ACTIVE
 0xd0

	)

105 
	#MC68681_5BIT_CHARS
 0x00

	)

106 
	#MC68681_6BIT_CHARS
 0x01

	)

107 
	#MC68681_7BIT_CHARS
 0x02

	)

108 
	#MC68681_8BIT_CHARS
 0x03

	)

110 
	#MC68681_ODD_PARITY
 0x00

	)

111 
	#MC68681_EVEN_PARITY
 0x04

	)

113 
	#MC68681_WITH_PARITY
 0x00

	)

114 
	#MC68681_FORCE_PARITY
 0x08

	)

115 
	#MC68681_NO_PARITY
 0x10

	)

116 
	#MC68681_MULTI_DROP
 0x18

	)

118 
	#MC68681_ERR_MODE_CHAR
 0x00

	)

119 
	#MC68681_ERR_MODE_BLOCK
 0x20

	)

121 
	#MC68681_RX_INTR_RX_READY
 0x00

	)

122 
	#MC68681_RX_INTR_FFULL
 0x40

	)

124 
	#MC68681_NO_RX_RTS_CTL
 0x00

	)

125 
	#MC68681_RX_RTS_CTRL
 0x80

	)

134 
	#MC68681_STOP_BIT_LENGTH__563
 0x00

	)

135 
	#MC68681_STOP_BIT_LENGTH__625
 0x01

	)

136 
	#MC68681_STOP_BIT_LENGTH__688
 0x02

	)

137 
	#MC68681_STOP_BIT_LENGTH__75
 0x03

	)

138 
	#MC68681_STOP_BIT_LENGTH__813
 0x04

	)

139 
	#MC68681_STOP_BIT_LENGTH__875
 0x05

	)

140 
	#MC68681_STOP_BIT_LENGTH__938
 0x06

	)

141 
	#MC68681_STOP_BIT_LENGTH_1
 0x07

	)

142 
	#MC68681_STOP_BIT_LENGTH_1_563
 0x08

	)

143 
	#MC68681_STOP_BIT_LENGTH_1_625
 0x09

	)

144 
	#MC68681_STOP_BIT_LENGTH_1_688
 0x0a

	)

145 
	#MC68681_STOP_BIT_LENGTH_1_75
 0x0b

	)

146 
	#MC68681_STOP_BIT_LENGTH_1_813
 0x0c

	)

147 
	#MC68681_STOP_BIT_LENGTH_1_875
 0x0d

	)

148 
	#MC68681_STOP_BIT_LENGTH_1_938
 0x0e

	)

149 
	#MC68681_STOP_BIT_LENGTH_2
 0x0f

	)

151 
	#MC68681_CTS_ENABLE_TX
 0x10

	)

152 
	#MC68681_TX_RTS_CTRL
 0x20

	)

154 
	#MC68681_CHANNEL_MODE_NORMAL
 0x00

	)

155 
	#MC68681_CHANNEL_MODE_ECHO
 0x40

	)

156 
	#MC68681_CHANNEL_MODE_LOCAL_LOOP
 0x80

	)

157 
	#MC68681_CHANNEL_MODE_REMOTE_LOOP
 0xc0

	)

165 
	#MC68681_RX_READY
 0x01

	)

166 
	#MC68681_FFULL
 0x02

	)

167 
	#MC68681_TX_READY
 0x04

	)

168 
	#MC68681_TX_EMPTY
 0x08

	)

169 
	#MC68681_OVERRUN_ERROR
 0x10

	)

170 
	#MC68681_PARITY_ERROR
 0x20

	)

171 
	#MC68681_FRAMING_ERROR
 0x40

	)

172 
	#MC68681_RECEIVED_BREAK
 0x80

	)

174 
	#MC68681_RX_ERRORS
 \

175 (
MC68681_OVERRUN_ERROR
|
MC68681_PARITY_ERROR
| \

176 
MC68681_FRAMING_ERROR
|
MC68681_RECEIVED_BREAK
)

	)

191 
	#MC68681_IR_TX_READY
 0x01

	)

192 
	#MC68681_IR_RX_READY
 0x02

	)

193 
	#MC68681_IR_BREAK
 0x04

	)

194 
	#MC68681_IMR_ENABLE_ALL
 0x07

	)

195 
	#MC68681_IMR_DISABLE_ALL
 0x00

	)

196 
	#MC68681_IMR_ENABLE_ALL_EXCEPT_TX
 0x06

	)

198 
	#MC68681_IR_TX_READY_A
 0x01

	)

199 
	#MC68681_IR_RX_READY_A
 0x02

	)

200 
	#MC68681_IR_BREAK_A
 0x04

	)

201 
	#MC68681_IR_COUNTER_READY
 0x08

	)

202 
	#MC68681_IR_TX_READY_B
 0x10

	)

203 
	#MC68681_IR_RX_READY_B
 0x20

	)

204 
	#MC68681_IR_BREAK_B
 0x40

	)

205 
	#MC68681_IR_INPUT_PORT_CHANGE
 0x80

	)

213 
	#MC68681_STATUS_RXRDY
 0x01

	)

214 
	#MC68681_STATUS_FFULL
 0x02

	)

215 
	#MC68681_STATUS_TXRDY
 0x04

	)

216 
	#MC68681_STATUS_TXEMT
 0x08

	)

217 
	#MC68681_STATUS_OVERRUN_ERROR
 0x10

	)

218 
	#MC68681_STATUS_PARITY_ERROR
 0x20

	)

219 
	#MC68681_STATUS_FRAMING_ERROR
 0x40

	)

220 
	#MC68681_STATUS_RECEIVED_BREAK
 0x80

	)

228 
	#MC68681_INTERRUPT_VECTOR_INIT
 0x0f

	)

236 
	#MC68681_AUX_BRG_SET1
 0x00

	)

237 
	#MC68681_AUX_BRG_SET2
 0x80

	)

243 
	s_mc68681_c⁄ãxt


245 
m©e
;

246 
imr
;

247 } 
	tmc68681_c⁄ãxt
;

252 
MC68681_STATIC
 
mc68681_öôülize_c⁄ãxt
(

253 
mö‹
,

254 
mc68681_c⁄ãxt
 *
pmc68681C⁄ãxt


257 
MC68681_STATIC
 
boﬁ
 
mc68681_¥obe
(
mö‹
);

259 
MC68681_STATIC
 
mc68681_£t_©åibuãs
(

260 
mö‹
,

261 c⁄° 
ãrmios
 *
t


264 
MC68681_STATIC
 
mc68681_öô
(
mö‹
);

266 
MC68681_STATIC
 
mc68681_›í
(

267 
maj‹
,

268 
mö‹
,

269 * 
¨g


272 
MC68681_STATIC
 
mc68681_˛o£
(

273 
maj‹
,

274 
mö‹
,

275 * 
¨g


278 
MC68681_STATIC
 
mc68681_wrôe_pﬁÀd
(

279 
mö‹
,

280 
cCh¨


283 
MC68681_STATIC
 
mc68681_öôülize_öãºu±s
(
mö‹
);

285 
MC68681_STATIC
 
ssize_t
 
mc68681_wrôe_suµ‹t_öt
(

286 
mö‹
,

287 c⁄° *
buf
,

288 
size_t
 
Àn


291 
MC68681_STATIC
 
ssize_t
 
mc68681_wrôe_suµ‹t_pﬁÀd
(

292 
mö‹
,

293 c⁄° *
buf
,

294 
size_t
 
Àn


297 
MC68681_STATIC
 
mc68681_öbyã_n⁄blockög_pﬁÀd
(

298 
mö‹


301 
MC68681_STATIC
 
mc68681_buûd_imr
(

302 
mö‹
,

303 
íabÀ_Êag


306 
MC68681_STATIC
 
mc68681_¥o˚ss
(

307 
mö‹


310 
MC68681_STATIC
 
mc68681_íabÀ_öãºu±s
(

311 
mö‹
,

312 
imr_mask


315 
MC68681_STATIC
 
πems_i§
 
mc68681_i§
(

316 
πems_ve˘‹_numbî
 
ve˘‹


319 #ifde‡
__˝lu•lus


	@src/libchip/serial/mc68681_reg.c

16 
	~<πems.h
>

18 
	~<libchù/£rül.h
>

19 
	~<libchù/mc68681.h
>

21 #i‚de‡
_MC68681_MULTIPLIER


22 
	#_MC68681_MULTIPLIER
 1

	)

23 
	#_MC68681_NAME
(
_X
Ë
	)
_X

24 
	#_MC68681_TYPE
 
uöt8_t


	)

27 
	#CALCULATE_REGISTER_ADDRESS
–
_ba£
, 
_ªg
 ) \

28 (
_MC68681_TYPE
 *)((
_ba£
Ë+ ((
_ªg
Ë* 
_MC68681_MULTIPLIER
 ))

	)

34 
uöt8_t
 
	$_MC68681_NAME
(
mc68681_gë_ªgi°î
)(

35 
uöçå_t
 
ulCålP‹t
,

36 
uöt8_t
 
ucRegNum


39 
_MC68681_TYPE
 *
p‹t
;

41 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

43  *
p‹t
;

44 
	}
}

50 
	$_MC68681_NAME
(
mc68681_£t_ªgi°î
)(

51 
uöçå_t
 
ulCålP‹t
,

52 
uöt8_t
 
ucRegNum
,

53 
uöt8_t
 
ucD©a


56 
_MC68681_TYPE
 *
p‹t
;

58 
p‹t
 = 
	`CALCULATE_REGISTER_ADDRESS
–
ulCålP‹t
, 
ucRegNum
 );

60 *
p‹t
 = 
ucD©a
;

61 
	}
}

	@src/libchip/serial/mc68681_reg2.c

16 
	#_MC68681_MULTIPLIER
 2

	)

17 
	#_MC68681_NAME
(
_X
Ë_X##
_2


	)

18 
	#_MC68681_TYPE
 
uöt8_t


	)

20 
	~"mc68681_ªg.c
"

	@src/libchip/serial/mc68681_reg4.c

16 
	#_MC68681_MULTIPLIER
 4

	)

17 
	#_MC68681_NAME
(
_X
Ë_X##
_4


	)

18 
	#_MC68681_TYPE
 
uöt8_t


	)

20 
	~"mc68681_ªg.c
"

	@src/libchip/serial/mc68681_reg8.c

16 
	#_MC68681_MULTIPLIER
 8

	)

17 
	#_MC68681_NAME
(
_X
Ë_X##
_8


	)

18 
	#_MC68681_TYPE
 
uöt8_t


	)

20 
	~"mc68681_ªg.c
"

	@src/libchip/serial/ns16550-context.c

33 
	~<°dlib.h
>

35 
	~<πems/b•Io.h
>

37 
	~<b•.h
>

39 
	~"ns16550.h
"

40 
	~"ns16550_p.h
"

42 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
)

43 
	~<b•/úq.h
>

44 #ñi‡
deföed
(
BSP_FEATURE_IRQ_LEGACY
)

45 
	~<b•/úq.h
>

46 #ñi‡
deföed
(
__PPC__
Ë|| deföed(
__i386__
)

47 
	~<b•/úq.h
>

48 
	#BSP_FEATURE_IRQ_LEGACY


	)

49 #ifde‡
BSP_SHARED_HANDLER_SUPPORT


50 
	#BSP_FEATURE_IRQ_LEGACY_SHARED_HANDLER_SUPPORT


	)

54 
uöt32_t
 
	$NS16550_GëBaudDivis‹
(
ns16550_c⁄ãxt
 *
˘x
, 
uöt32_t
 
baud
)

56 
uöt32_t
 
˛ock
 = 
˘x
->clock;

57 
uöt32_t
 
baudDivis‹
 = (
˛ock
 !0 ? clock : 115200Ë/ (
baud
 * 16);

59 i‡(
˘x
->
has_‰a˘i⁄Æ_dividî_ªgi°î
) {

60 
uöt32_t
 
‰a˘i⁄ÆDividî
 = 0x10;

61 
uöt32_t
 
îr
 = 
baud
;

62 
uöt32_t
 
mulVÆ
;

63 
uöt32_t
 
divAddVÆ
;

65 
˛ock
 /16 * 
baudDivis‹
;

66 
mulVÆ
 = 1; mulVal < 16; ++mulVal) {

67 
divAddVÆ
 = 0; divAddVÆ < 
mulVÆ
; ++divAddVal) {

68 
uöt32_t
 
a˘uÆ
 = (
mulVÆ
 * 
˛ock
Ë/ (mulVÆ + 
divAddVÆ
);

69 
uöt32_t
 
√wEº
 = 
a˘uÆ
 > 
baud
 ?áctual - baud : baud -áctual;

71 i‡(
√wEº
 < 
îr
) {

72 
îr
 = 
√wEº
;

73 
‰a˘i⁄ÆDividî
 = (
mulVÆ
 << 4Ë| 
divAddVÆ
;

78 (*
˘x
->
£t_ªg
)(

79 
˘x
->
p‹t
,

80 
NS16550_FRACTIONAL_DIVIDER
,

81 
‰a˘i⁄ÆDividî


85  
baudDivis‹
;

86 
	}
}

93 
	$ns16550_íabÀ_öãºu±s
(

94 
ns16550_c⁄ãxt
 *
˘x
,

95 
mask


98 (*
˘x
->
£t_ªg
)(˘x->
p‹t
, 
NS16550_INTERRUPT_ENABLE
, 
mask
);

99 
	}
}

101 
	$ns16550_˛ór_™d_£t_öãºu±s
(

102 
ns16550_c⁄ãxt
 *
˘x
,

103 
uöt8_t
 
˛ór
,

104 
uöt8_t
 
£t


107 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

108 
ns16550_gë_ªg
 
gë_ªg
 = 
˘x
->get_reg;

109 
ns16550_£t_ªg
 
£t_ªg
 = 
˘x
->set_reg;

110 
uöçå_t
 
p‹t
 = 
˘x
->port;

111 
uöt8_t
 
vÆ
;

113 
	`πems_ãrmios_devi˚_lock_acquúe
(&
˘x
->
ba£
, &
lock_c⁄ãxt
);

114 
vÆ
 = (*
gë_ªg
)(
p‹t
, 
NS16550_INTERRUPT_ENABLE
);

115 
vÆ
 &~
˛ór
;

116 
vÆ
 |
£t
;

117 (*
£t_ªg
)(
p‹t
, 
NS16550_INTERRUPT_ENABLE
, 
vÆ
);

118 
	`πems_ãrmios_devi˚_lock_ªÀa£
(&
˘x
->
ba£
, &
lock_c⁄ãxt
);

119 
	}
}

125 
boﬁ
 
	$ns16550_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

127 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

128 
uöçå_t
 
pNS16550
;

129 
uöt8_t
 
ucD©aByã
;

130 
uöt32_t
 
ulBaudDivis‹
;

131 
ns16550_£t_ªg
 
£tReg
;

132 
ns16550_gë_ªg
 
gëReg
;

134 
˘x
->
modem_c⁄åﬁ
 = 
SP_MODEM_IRQ
;

136 
pNS16550
 = 
˘x
->
p‹t
;

137 
£tReg
 = 
˘x
->
£t_ªg
;

138 
gëReg
 = 
˘x
->
gë_ªg
;

145 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 0x0);

146 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_DISABLE_ALL_INTR
 );

150 
ulBaudDivis‹
 = 
	`NS16550_GëBaudDivis‹
(
˘x
, ctx->
öôül_baud
);

151 
ucD©aByã
 = 
SP_LINE_DLAB
;

152 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucD©aByã
);

155 (*
£tReg
)(
pNS16550
,
NS16550_TRANSMIT_BUFFER
,(
uöt8_t
)(
ulBaudDivis‹
 & 0xffU));

156 (*
£tReg
)(

157 
pNS16550
,
NS16550_INTERRUPT_ENABLE
,

158 (
uöt8_t
)(–
ulBaudDivis‹
 >> 8 ) & 0xffU )

163 
ucD©aByã
 = 
EIGHT_BITS
;

164 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucD©aByã
);

167 
ucD©aByã
 = 
SP_FIFO_ENABLE
;

168 (*
£tReg
)(
pNS16550
, 
NS16550_FIFO_CONTROL
, 
ucD©aByã
);

170 
ucD©aByã
 = 
SP_FIFO_ENABLE
 | 
SP_FIFO_RXRST
 | 
SP_FIFO_TXRST
;

171 (*
£tReg
)(
pNS16550
, 
NS16550_FIFO_CONTROL
, 
ucD©aByã
);

173 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_DISABLE_ALL_INTR
);

177 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
,
˘x
->
modem_c⁄åﬁ
);

179 (*
gëReg
)(
pNS16550
, 
NS16550_LINE_STATUS
 );

180 (*
gëReg
)(
pNS16550
, 
NS16550_RECEIVE_BUFFER
 );

182  
åue
;

183 
	}
}

185 
size_t
 
	$ns16550_wrôe_to_fifo
(

186 c⁄° 
ns16550_c⁄ãxt
 *
˘x
,

187 c⁄° *
buf
,

188 
size_t
 
Àn


191 
uöt32_t
 
p‹t
 = 
˘x
->port;

192 
ns16550_£t_ªg
 
£t
 = 
˘x
->
£t_ªg
;

193 
size_t
 
out
 = 
Àn
 > 
SP_FIFO_SIZE
 ? SP_FIFO_SIZE :Üen;

194 
size_t
 
i
;

196 
i
 = 0; i < 
out
; ++i) {

197 (*
£t
)(
p‹t
, 
NS16550_TRANSMIT_BUFFER
, 
buf
[
i
]);

200  
out
;

201 
	}
}

206 
	$ns16550_i§
(*
¨g
)

208 
πems_ãrmios_ây
 *
ây
 = 
¨g
;

209 
ns16550_c⁄ãxt
 *
˘x
 = 
	`πems_ãrmios_gë_devi˚_c⁄ãxt
(
ây
);

210 
uöt32_t
 
p‹t
 = 
˘x
->port;

211 
ns16550_gë_ªg
 
gë
 = 
˘x
->
gë_ªg
;

212 
i
 = 0;

213 
buf
 [
SP_FIFO_SIZE
];

218 
i
 = 0; i < 
SP_FIFO_SIZE
; ++i) {

219 i‡((
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
Ë& 
SP_LSR_RDY
) != 0) {

220 
buf
 [
i
] = (Ë
	`gë
(
p‹t
, 
NS16550_RECEIVE_BUFFER
);

227 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
ây
, 
buf
, 
i
);

230 i‡(
˘x
->
out_tŸÆ
 > 0

231 && (
	`gë
(
p‹t
, 
NS16550_LINE_STATUS
Ë& 
SP_LSR_THOLD
) != 0) {

232 
size_t
 
cuºít
 = 
˘x
->
out_cuºít
;

234 
˘x
->
out_buf
 +
cuºít
;

235 
˘x
->
out_ªmaöög
 -
cuºít
;

237 i‡(
˘x
->
out_ªmaöög
 > 0) {

238 
˘x
->
out_cuºít
 =

239 
	`ns16550_wrôe_to_fifo
(
˘x
, ctx->
out_buf
, ctx->
out_ªmaöög
);

241 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ây
, 
˘x
->
out_tŸÆ
);

244 } (
	`gë
–
p‹t
, 
NS16550_INTERRUPT_ID
Ë& 
SP_IID_0
) == 0);

245 
	}
}

247 
	$ns16550_i§_èsk
(*
¨g
)

249 
πems_ãrmios_ây
 *
ây
 = 
¨g
;

250 
ns16550_c⁄ãxt
 *
˘x
 = 
	`πems_ãrmios_gë_devi˚_c⁄ãxt
(
ây
);

251 
uöt8_t
 
°©us
 = (*
˘x
->
gë_ªg
)(˘x->
p‹t
, 
NS16550_LINE_STATUS
);

253 i‡((
°©us
 & 
SP_LSR_RDY
) != 0) {

254 
	`ns16550_˛ór_™d_£t_öãºu±s
(
˘x
, 
SP_INT_RX_ENABLE
, 0);

255 
	`πems_ãrmios_rxúq_occuªd
(
ây
);

258 i‡(
˘x
->
out_tŸÆ
 > 0 && (
°©us
 & 
SP_LSR_THOLD
) != 0) {

259 
size_t
 
cuºít
 = 
˘x
->
out_cuºít
;

261 
˘x
->
out_buf
 +
cuºít
;

262 
˘x
->
out_ªmaöög
 -
cuºít
;

264 i‡(
˘x
->
out_ªmaöög
 > 0) {

265 
˘x
->
out_cuºít
 =

266 
	`ns16550_wrôe_to_fifo
(
˘x
, ctx->
out_buf
, ctx->
out_ªmaöög
);

268 
size_t
 
d⁄e
 = 
˘x
->
out_tŸÆ
;

270 
˘x
->
out_tŸÆ
 = 0;

271 
	`ns16550_˛ór_™d_£t_öãºu±s
(
˘x
, 
SP_INT_TX_ENABLE
, 0);

272 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
ây
, 
d⁄e
);

275 
	}
}

277 
	$ns16550_ªad_èsk
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

279 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

280 
uöt32_t
 
p‹t
 = 
˘x
->port;

281 
ns16550_gë_ªg
 
gë
 = 
˘x
->
gë_ªg
;

282 
buf
[
SP_FIFO_SIZE
];

283 
i
;

285 
i
 = 0; i < 
SP_FIFO_SIZE
; ++i) {

286 i‡((
	`gë
(
p‹t
, 
NS16550_LINE_STATUS
Ë& 
SP_LSR_RDY
) != 0) {

287 
buf
[
i
] = (Ë
	`gë
(
p‹t
, 
NS16550_RECEIVE_BUFFER
);

293 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(
˘x
->
ây
, 
buf
, 
i
);

294 
	`ns16550_˛ór_™d_£t_öãºu±s
(
˘x
, 0, 
SP_INT_RX_ENABLE
);

297 
	}
}

304 
ns16550_öôülize_öãºu±s
(

305 
πems_ãrmios_ây
 *
ây
,

306 
ns16550_c⁄ãxt
 *
˘x
,

307 (*
i§
)(*)

310 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


312 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

313 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

314 
˘x
->
úq
,

316 
RTEMS_INTERRUPT_SHARED
,

317 
i§
,

318 
ây


320 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

322 
	`¥ötk
–"%s: Eº‹: In°Æ»öãºu± h™dÀr\n", 
__func__
);

323 
	`πems_Áèl_îr‹_occuºed
( 0xdeadbeef);

326 #ñi‡
	`deföed
(
BSP_FEATURE_IRQ_LEGACY
)

328 
rv
 = 0;

329 #ifde‡
BSP_FEATURE_IRQ_LEGACY_SHARED_HANDLER_SUPPORT


330 
πems_úq_c⁄√˘_d©a
 
cd
 = {

331 
˘x
->
úq
,

332 
i§
,

333 
ây
,

334 
NULL
,

335 
NULL
,

336 
NULL
,

337 
NULL


339 
rv
 = 
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
–&
cd
);

341 
πems_úq_c⁄√˘_d©a
 
cd
 = {

342 
˘x
->
úq
,

343 
i§
,

344 
ây
,

345 
NULL
,

346 
NULL
,

347 
NULL


349 
rv
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
–&
cd
);

351 i‡(
rv
 == 0) {

353 
	`¥ötk
–"%s: Eº‹: In°Æ»öãºu± h™dÀr\n", 
__func__
);

354 
	`πems_Áèl_îr‹_occuºed
( 0xdeadbeef);

358 
	}
}

364 
boﬁ
 
	$ns16550_›í
(

365 
πems_ãrmios_ây
 *
ây
,

366 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

367 
ãrmios
 *
ãrm
,

368 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


371 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

373 
˘x
->
ây
 =Åty;

376 
	`πems_ãrmios_£t_öôül_baud
(
ây
, 
˘x
->
öôül_baud
);

378 i‡(
ây
->
h™dÀr
.
mode
 =
TERMIOS_IRQ_DRIVEN
) {

379 
	`ns16550_öôülize_öãºu±s
(
ây
, 
˘x
, 
ns16550_i§
);

380 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_ENABLE_ALL_INTR_EXCEPT_TX
);

381 } i‡(
ây
->
h™dÀr
.
mode
 =
TERMIOS_TASK_DRIVEN
) {

382 
	`ns16550_öôülize_öãºu±s
(
ây
, 
˘x
, 
ns16550_i§_èsk
);

383 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_ENABLE_ALL_INTR_EXCEPT_TX
);

386  
åue
;

387 
	}
}

389 
ns16550_˛ónup_öãºu±s
(

390 
πems_ãrmios_ây
 *
ây
,

391 
ns16550_c⁄ãxt
 *
˘x
,

392 (*
i§
)(*)

395 #i‡
	`deföed
(
BSP_FEATURE_IRQ_EXTENSION
)

396 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

397 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

398 
˘x
->
úq
,

399 
i§
,

400 
ây


402 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

404 
	`¥ötk
("%s: Eº‹: Removêöãºu± h™dÀr\n", 
__func__
);

405 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

407 #ñi‡
	`deföed
(
BSP_FEATURE_IRQ_LEGACY
)

408 
rv
 = 0;

409 
πems_úq_c⁄√˘_d©a
 
cd
 = {

410 .
«me
 = 
˘x
->
úq
,

411 .
hdl
 = 
i§
,

412 .
h™dÀ
 = 
ây


414 
rv
 = 
	`BSP_ªmove_πems_úq_h™dÀr
(&
cd
);

415 i‡(
rv
 == 0) {

417 
	`¥ötk
("%s: Eº‹: Removêöãºu± h™dÀr\n", 
__func__
);

418 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

421 
	}
}

427 
	$ns16550_˛o£
(

428 
πems_ãrmios_ây
 *
ây
,

429 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

430 
πems_libio_›í_˛o£_¨gs_t
 *
¨gs


433 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

435 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_DISABLE_ALL_INTR
);

437 i‡(
ây
->
h™dÀr
.
mode
 =
TERMIOS_IRQ_DRIVEN
) {

438 
	`ns16550_˛ónup_öãºu±s
(
ây
, 
˘x
, 
ns16550_i§
);

439 } i‡(
ây
->
h™dÀr
.
mode
 =
TERMIOS_TASK_DRIVEN
) {

440 
	`ns16550_˛ónup_öãºu±s
(
ây
, 
˘x
, 
ns16550_i§_èsk
);

442 
	}
}

447 
	$ns16550_pﬁÀd_putch¨
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
, 
out
)

449 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

450 
uöçå_t
 
p‹t
 = 
˘x
->port;

451 
ns16550_gë_ªg
 
gë
 = 
˘x
->
gë_ªg
;

452 
ns16550_£t_ªg
 
£t
 = 
˘x
->
£t_ªg
;

453 
uöt32_t
 
°©us
 = 0;

454 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

457 
uöt32_t
 
öãºu±_mask
 = 
	`gë
–
p‹t
, 
NS16550_INTERRUPT_ENABLE
);

460 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_DISABLE_ALL_INTR
);

462 
åue
) {

464 
	`πems_ãrmios_devi˚_lock_acquúe
(&
˘x
->
ba£
, &
lock_c⁄ãxt
);

467 
°©us
 = 
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
);

468 i‡((
°©us
 & 
SP_LSR_THOLD
) != 0) {

470 
	`£t
–
p‹t
, 
NS16550_TRANSMIT_BUFFER
, 
out
);

473 
	`πems_ãrmios_devi˚_lock_ªÀa£
(&
˘x
->
ba£
, &
lock_c⁄ãxt
);

476 
	`πems_ãrmios_devi˚_lock_ªÀa£
(&
˘x
->
ba£
, &
lock_c⁄ãxt
);

481 
°©us
 = 
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
);

482 } (
°©us
 & 
SP_LSR_THOLD
) == 0);

486 
	`£t
–
p‹t
, 
NS16550_INTERRUPT_ENABLE
, 
öãºu±_mask
);

487 
	}
}

497 
	$ns16550_as£π_RTS
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

499 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

500 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

505 
	`πems_ãrmios_devi˚_lock_acquúe
(
ba£
, &
lock_c⁄ãxt
);

506 
˘x
->
modem_c⁄åﬁ
 |
SP_MODEM_RTS
;

507 (*
˘x
->
£t_ªg
)(˘x->
p‹t
, 
NS16550_MODEM_CONTROL
, ctx->
modem_c⁄åﬁ
);

508 
	`πems_ãrmios_devi˚_lock_ªÀa£
(
ba£
, &
lock_c⁄ãxt
);

509 
	}
}

515 
	$ns16550_√g©e_RTS
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

517 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

518 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

523 
	`πems_ãrmios_devi˚_lock_acquúe
(
ba£
, &
lock_c⁄ãxt
);

524 
˘x
->
modem_c⁄åﬁ
 &~
SP_MODEM_RTS
;

525 (*
˘x
->
£t_ªg
)(˘x->
p‹t
, 
NS16550_MODEM_CONTROL
, ctx->
modem_c⁄åﬁ
);

526 
	`πems_ãrmios_devi˚_lock_ªÀa£
(
ba£
, &
lock_c⁄ãxt
);

527 
	}
}

538 
	$ns16550_as£π_DTR
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

540 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

541 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

546 
	`πems_ãrmios_devi˚_lock_acquúe
(
ba£
, &
lock_c⁄ãxt
);

547 
˘x
->
modem_c⁄åﬁ
 |
SP_MODEM_DTR
;

548 (*
˘x
->
£t_ªg
)(˘x->
p‹t
, 
NS16550_MODEM_CONTROL
, ctx->
modem_c⁄åﬁ
);

549 
	`πems_ãrmios_devi˚_lock_ªÀa£
(
ba£
, &
lock_c⁄ãxt
);

550 
	}
}

556 
	$ns16550_√g©e_DTR
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

558 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

559 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

564 
	`πems_ãrmios_devi˚_lock_acquúe
(
ba£
, &
lock_c⁄ãxt
);

565 
˘x
->
modem_c⁄åﬁ
 &=~
SP_MODEM_DTR
;

566 (*
˘x
->
£t_ªg
)(˘x->
p‹t
, 
NS16550_MODEM_CONTROL
,˘x->
modem_c⁄åﬁ
);

567 
	`πems_ãrmios_devi˚_lock_ªÀa£
(
ba£
, &
lock_c⁄ãxt
);

568 
	}
}

577 
boﬁ
 
	$ns16550_£t_©åibuãs
(

578 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

579 c⁄° 
ãrmios
 *
t


582 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

583 
uöt32_t
 
pNS16550
;

584 
uöt32_t
 
ulBaudDivis‹
;

585 
uöt8_t
 
ucLöeC⁄åﬁ
;

586 
uöt32_t
 
baud_ªque°ed
;

587 
ns16550_£t_ªg
 
£tReg
;

588 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

590 
pNS16550
 = 
˘x
->
p‹t
;

591 
£tReg
 = 
˘x
->
£t_ªg
;

599 
baud_ªque°ed
 = 
	`πems_ãrmios_baud_to_numbî
(
t
->
c_cÊag
);

600 
	`_As£π
–
baud_ªque°ed
 != 0 );

602 
ulBaudDivis‹
 = 
	`NS16550_GëBaudDivis‹
(
˘x
, 
baud_ªque°ed
);

604 
ucLöeC⁄åﬁ
 = 0;

610 i‡(
t
->
c_cÊag
 & 
PARENB
) {

611 
ucLöeC⁄åﬁ
 |
SP_LINE_PAR
;

612 i‡(!(
t
->
c_cÊag
 & 
PARODD
))

613 
ucLöeC⁄åﬁ
 |
SP_LINE_ODD
;

620 i‡(
t
->
c_cÊag
 & 
CSIZE
) {

621 
t
->
c_cÊag
 & 
CSIZE
) {

622 
CS5
: 
ucLöeC⁄åﬁ
 |
FIVE_BITS
; ;

623 
CS6
: 
ucLöeC⁄åﬁ
 |
SIX_BITS
; ;

624 
CS7
: 
ucLöeC⁄åﬁ
 |
SEVEN_BITS
; ;

625 
CS8
: 
ucLöeC⁄åﬁ
 |
EIGHT_BITS
; ;

628 
ucLöeC⁄åﬁ
 |
EIGHT_BITS
;

635 i‡(
t
->
c_cÊag
 & 
CSTOPB
) {

636 
ucLöeC⁄åﬁ
 |
SP_LINE_STOP
;

645 
	`πems_ãrmios_devi˚_lock_acquúe
(
ba£
, &
lock_c⁄ãxt
);

655 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
SP_LINE_DLAB
);

656 (*
£tReg
)(
pNS16550
, 
NS16550_TRANSMIT_BUFFER
, 
ulBaudDivis‹
&0xff);

657 (*
£tReg
)(
pNS16550
, 
NS16550_INTERRUPT_ENABLE
, (
ulBaudDivis‹
>>8)&0xff);

662 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucLöeC⁄åﬁ
 );

664 
	`πems_ãrmios_devi˚_lock_ªÀa£
(
ba£
, &
lock_c⁄ãxt
);

666  
åue
;

667 
	}
}

678 
	$ns16550_wrôe_suµ‹t_öt
(

679 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

680 c⁄° *
buf
,

681 
size_t
 
Àn


684 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

686 
˘x
->
out_tŸÆ
 = 
Àn
;

688 i‡(
Àn
 > 0) {

689 
˘x
->
out_ªmaöög
 = 
Àn
;

690 
˘x
->
out_buf
 = 
buf
;

691 
˘x
->
out_cuºít
 = 
	`ns16550_wrôe_to_fifo
(˘x, 
buf
, 
Àn
);

693 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_ENABLE_ALL_INTR
);

695 
	`ns16550_íabÀ_öãºu±s
(
˘x
, 
NS16550_ENABLE_ALL_INTR_EXCEPT_TX
);

697 
	}
}

699 
	$ns16550_wrôe_suµ‹t_èsk
(

700 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

701 c⁄° *
buf
,

702 
size_t
 
Àn


705 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

707 
˘x
->
out_tŸÆ
 = 
Àn
;

709 i‡(
Àn
 > 0) {

710 
˘x
->
out_ªmaöög
 = 
Àn
;

711 
˘x
->
out_buf
 = 
buf
;

712 
˘x
->
out_cuºít
 = 
	`ns16550_wrôe_to_fifo
(˘x, 
buf
, 
Àn
);

714 
	`ns16550_˛ór_™d_£t_öãºu±s
(
˘x
, 0, 
SP_INT_TX_ENABLE
);

716 
	}
}

725 
	$ns16550_wrôe_suµ‹t_pﬁÀd
(

726 
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
,

727 c⁄° *
buf
,

728 
size_t
 
Àn


731 
size_t
 
nwrôe
 = 0;

736 
nwrôe
 < 
Àn
) {

740 
	`ns16550_pﬁÀd_putch¨
(
ba£
, *
buf
++);

741 
nwrôe
++;

743 
	}
}

748 
	$ns16550_pﬁÀd_gëch¨
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
)

750 
ns16550_c⁄ãxt
 *
˘x
 = (ns16550_c⁄ãxà*Ë
ba£
;

751 
uöt32_t
 
pNS16550
;

752 
ucLöeSètus
;

753 
uöt8_t
 
cCh¨
;

754 
ns16550_gë_ªg
 
gëReg
;

756 
pNS16550
 = 
˘x
->
p‹t
;

757 
gëReg
 = 
˘x
->
gë_ªg
;

759 
ucLöeSètus
 = (*
gëReg
)(
pNS16550
, 
NS16550_LINE_STATUS
);

760 i‡(
ucLöeSètus
 & 
SP_LSR_RDY
) {

761 
cCh¨
 = (*
gëReg
)(
pNS16550
, 
NS16550_RECEIVE_BUFFER
);

762  ()
cCh¨
;

765 
	}
}

771 c⁄° 
πems_ãrmios_devi˚_Êow
 
	gns16550_Êow_πs˘s
 = {

772 .
°›_ªmŸe_tx
 = 
ns16550_√g©e_RTS
,

773 .
	g°¨t_ªmŸe_tx
 = 
ns16550_as£π_RTS


776 c⁄° 
πems_ãrmios_devi˚_Êow
 
	gns16550_Êow_då˘s
 = {

777 .
°›_ªmŸe_tx
 = 
ns16550_√g©e_DTR
,

778 .
	g°¨t_ªmŸe_tx
 = 
ns16550_as£π_DTR


781 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	gns16550_h™dÀr_öãºu±
 = {

782 .
fú°_›í
 = 
ns16550_›í
,

783 .
	gœ°_˛o£
 = 
ns16550_˛o£
,

784 .
	gpﬁl_ªad
 = 
NULL
,

785 .
	gwrôe
 = 
ns16550_wrôe_suµ‹t_öt
,

786 .
	g£t_©åibuãs
 = 
ns16550_£t_©åibuãs
,

787 .
	gmode
 = 
TERMIOS_IRQ_DRIVEN


790 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	gns16550_h™dÀr_pﬁÀd
 = {

791 .
fú°_›í
 = 
ns16550_›í
,

792 .
	gœ°_˛o£
 = 
ns16550_˛o£
,

793 .
	gpﬁl_ªad
 = 
ns16550_pﬁÀd_gëch¨
,

794 .
	gwrôe
 = 
ns16550_wrôe_suµ‹t_pﬁÀd
,

795 .
	g£t_©åibuãs
 = 
ns16550_£t_©åibuãs
,

796 .
	gmode
 = 
TERMIOS_POLLED


799 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
	gns16550_h™dÀr_èsk
 = {

800 .
fú°_›í
 = 
ns16550_›í
,

801 .
	gœ°_˛o£
 = 
ns16550_˛o£
,

802 .
	gpﬁl_ªad
 = 
ns16550_ªad_èsk
,

803 .
	gwrôe
 = 
ns16550_wrôe_suµ‹t_èsk
,

804 .
	g£t_©åibuãs
 = 
ns16550_£t_©åibuãs
,

805 .
	gmode
 = 
TERMIOS_TASK_DRIVEN


	@src/libchip/serial/ns16550.c

33 
	~<°dlib.h
>

35 
	~<πems.h
>

36 
	~<πems/libio.h
>

37 
	~<πems/rögbuf.h
>

38 
	~<πems/b•Io.h
>

39 
	~<πems/ãrmio°y≥s.h
>

41 
	~<libchù/£rül.h
>

42 
	~<libchù/£rsuµ.h
>

44 
	~<b•.h
>

46 
	~"ns16550_p.h
"

47 
	~"ns16550.h
"

49 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
)

50 
	~<b•/úq.h
>

51 #ñi‡
deföed
(
BSP_FEATURE_IRQ_LEGACY
)

52 
	~<b•/úq.h
>

53 #ñi‡
deföed
(
__PPC__
Ë|| deföed(
__i386__
)

54 
	~<b•/úq.h
>

55 
	#BSP_FEATURE_IRQ_LEGACY


	)

56 #ifde‡
BSP_SHARED_HANDLER_SUPPORT


57 
	#BSP_FEATURE_IRQ_LEGACY_SHARED_HANDLER_SUPPORT


	)

62 
uöt8_t
 
	mucModemCål
;

63 
	må™smôFifoCh¨s
;

64 } 
	tNS16550C⁄ãxt
;

70 
NS16550_STATIC
 
ns16550_öô
(
mö‹
);

72 
NS16550_STATIC
 
ns16550_›í
(

73 
maj‹
,

74 
mö‹
,

75 * 
¨g


78 
NS16550_STATIC
 
ns16550_˛o£
(

79 
maj‹
,

80 
mö‹
,

81 * 
¨g


84 
NS16550_STATIC
 
ns16550_wrôe_pﬁÀd
(

85 
mö‹
,

86 
cCh¨


89 
NS16550_STATIC
 
ns16550_as£π_RTS
(

90 
mö‹


93 
NS16550_STATIC
 
ns16550_√g©e_RTS
(

94 
mö‹


97 
NS16550_STATIC
 
ns16550_as£π_DTR
(

98 
mö‹


101 
NS16550_STATIC
 
ns16550_√g©e_DTR
(

102 
mö‹


105 
NS16550_STATIC
 
ns16550_öôülize_öãºu±s
(
mö‹
);

107 
NS16550_STATIC
 
ns16550_˛ónup_öãºu±s
(
mö‹
);

109 
NS16550_STATIC
 
ssize_t
 
ns16550_wrôe_suµ‹t_öt
(

110 
mö‹
,

111 c⁄° *
buf
,

112 
size_t
 
Àn


115 
NS16550_STATIC
 
ssize_t
 
ns16550_wrôe_suµ‹t_pﬁÀd
(

116 
mö‹
,

117 c⁄° *
buf
,

118 
size_t
 
Àn


121 
ns16550_öbyã_n⁄blockög_pﬁÀd
(

122 
mö‹


125 
NS16550_STATIC
 
ns16550_íabÀ_öãºu±s
(

126 
c⁄sﬁe_tbl
 *
c
,

127 
mask


130 
NS16550_STATIC
 
ns16550_£t_©åibuãs
(

131 
mö‹
,

132 c⁄° 
ãrmios
 *
t


135 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
Ë|| deföed(
BSP_FEATURE_IRQ_LEGACY
)

136 
NS16550_STATIC
 
ns16550_i§
(*
¨g
);

139 
RTEMS_INTERRUPT_LOCK_DEFINE
(, 
ns16550_lock
, "NS16550")

145 c⁄° 
c⁄sﬁe_Êow
 
	gns16550_Êow_RTSCTS
 = {

146 
ns16550_√g©e_RTS
,

147 
ns16550_as£π_RTS


150 c⁄° 
c⁄sﬁe_Êow
 
	gns16550_Êow_DTRCTS
 = {

151 
ns16550_√g©e_DTR
,

152 
ns16550_as£π_DTR


155 c⁄° 
c⁄sﬁe_‚s
 
	gns16550_‚s
 = {

156 
libchù_£rül_deÁu…_¥obe
,

157 
ns16550_›í
,

158 
ns16550_˛o£
,

159 
NULL
,

160 
ns16550_wrôe_suµ‹t_öt
,

161 
ns16550_öô
,

162 
ns16550_wrôe_pﬁÀd
,

163 
ns16550_£t_©åibuãs
,

164 
åue


167 c⁄° 
c⁄sﬁe_‚s
 
	gns16550_‚s_pﬁÀd
 = {

168 
libchù_£rül_deÁu…_¥obe
,

169 
ns16550_›í
,

170 
ns16550_˛o£
,

171 
ns16550_öbyã_n⁄blockög_pﬁÀd
,

172 
ns16550_wrôe_suµ‹t_pﬁÀd
,

173 
ns16550_öô
,

174 
ns16550_wrôe_pﬁÀd
,

175 
ns16550_£t_©åibuãs
,

176 
Ál£


179 
uöt32_t
 
	$NS16550_GëBaudDivis‹
(c⁄° 
c⁄sﬁe_tbl
 *
c
, 
uöt32_t
 
baud
)

181 
uöt32_t
 
˛ock
 = 
c
->
ulClock
;

182 
uöt32_t
 
baudDivis‹
 = (
˛ock
 !0 ? clock : 115200Ë/ (
baud
 * 16);

184 i‡(
c
->
devi˚Ty≥
 =
SERIAL_NS16550_WITH_FDR
) {

185 
uöt32_t
 
‰a˘i⁄ÆDividî
 = 0x10;

186 
uöt32_t
 
îr
 = 
baud
;

187 
uöt32_t
 
mulVÆ
;

188 
uöt32_t
 
divAddVÆ
;

190 
˛ock
 /16 * 
baudDivis‹
;

191 
mulVÆ
 = 1; mulVal < 16; ++mulVal) {

192 
divAddVÆ
 = 0; divAddVÆ < 
mulVÆ
; ++divAddVal) {

193 
uöt32_t
 
a˘uÆ
 = (
mulVÆ
 * 
˛ock
Ë/ (mulVÆ + 
divAddVÆ
);

194 
uöt32_t
 
√wEº
 = 
a˘uÆ
 > 
baud
 ?áctual - baud : baud -áctual;

196 i‡(
√wEº
 < 
îr
) {

197 
îr
 = 
√wEº
;

198 
‰a˘i⁄ÆDividî
 = (
mulVÆ
 << 4Ë| 
divAddVÆ
;

203 (*
c
->
£tRegi°î
)(

204 
c
->
ulCålP‹t1
,

205 
NS16550_FRACTIONAL_DIVIDER
,

206 
‰a˘i⁄ÆDividî


210  
baudDivis‹
;

211 
	}
}

217 
	$ns16550_öô
(
mö‹
)

219 
uöçå_t
 
pNS16550
;

220 
uöt8_t
 
ucD©aByã
;

221 
uöt32_t
 
ulBaudDivis‹
;

222 
NS16550C⁄ãxt
 *
≤s16550C⁄ãxt
;

223 
£tRegi°î_f
 
£tReg
;

224 
gëRegi°î_f
 
gëReg
;

225 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

227 
≤s16550C⁄ãxt
=(
NS16550C⁄ãxt
 *)
	`mÆloc
((NS16550Context));

229 i‡(
≤s16550C⁄ãxt
 =
NULL
) {

230 
	`¥ötk
–"%s: Eº‹: NŸÉnough mem‹y\n", 
__func__
);

231 
	`πems_Áèl_îr‹_occuºed
( 0xdeadbeef);

234 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
=(*)
≤s16550C⁄ãxt
;

235 
≤s16550C⁄ãxt
->
ucModemCål
=
SP_MODEM_IRQ
;

237 
pNS16550
 = 
c
->
ulCålP‹t1
;

238 
£tReg
 = 
c
->
£tRegi°î
;

239 
gëReg
 = 
c
->
gëRegi°î
;

246 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 0x0);

247 
	`ns16550_íabÀ_öãºu±s
–
c
, 
NS16550_DISABLE_ALL_INTR
 );

251 
ulBaudDivis‹
 = 
	`NS16550_GëBaudDivis‹
(
c
, (
uöçå_t
Ëc->
pDevi˚P¨ams
);

252 
ucD©aByã
 = 
SP_LINE_DLAB
;

253 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucD©aByã
);

256 (*
£tReg
)(
pNS16550
,
NS16550_TRANSMIT_BUFFER
,(
uöt8_t
)(
ulBaudDivis‹
 & 0xffU));

257 (*
£tReg
)(

258 
pNS16550
,
NS16550_INTERRUPT_ENABLE
,

259 (
uöt8_t
)(–
ulBaudDivis‹
 >> 8 ) & 0xffU )

264 
ucD©aByã
 = 
EIGHT_BITS
;

265 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucD©aByã
);

268 
ucD©aByã
 = 
SP_FIFO_ENABLE
;

269 (*
£tReg
)(
pNS16550
, 
NS16550_FIFO_CONTROL
, 
ucD©aByã
);

271 
ucD©aByã
 = 
SP_FIFO_ENABLE
 | 
SP_FIFO_RXRST
 | 
SP_FIFO_TXRST
;

272 (*
£tReg
)(
pNS16550
, 
NS16550_FIFO_CONTROL
, 
ucD©aByã
);

274 
	`ns16550_íabÀ_öãºu±s
(
c
, 
NS16550_DISABLE_ALL_INTR
);

278 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
,
≤s16550C⁄ãxt
->
ucModemCål
);

280 (*
gëReg
)(
pNS16550
, 
NS16550_LINE_STATUS
 );

281 (*
gëReg
)(
pNS16550
, 
NS16550_RECEIVE_BUFFER
 );

282 
	}
}

288 
	$ns16550_›í
(

289 
maj‹
,

290 
mö‹
,

291 *
¨g


294 
πems_libio_›í_˛o£_¨gs_t
 *
oc
 = (πems_libio_›í_˛o£_¨gs_à*Ë
¨g
;

295 
πems_ãrmios_ây
 *
ây
 = (πems_ãrmios_ây *Ë
oc
->
i›
->
d©a1
;

296 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

297 
c⁄sﬁe_d©a
 *
d
 = &
C⁄sﬁe_P‹t_D©a
 [
mö‹
];

299 
d
->
ãrmios_d©a
 = 
ây
;

302 i‡(
c
->
pDevi˚Flow
 !&
ns16550_Êow_DTRCTS
) {

303 
	`ns16550_as£π_DTR
–
mö‹
);

307 
	`πems_ãrmios_£t_öôül_baud
–
ây
, (
öçå_t
Ë
c
->
pDevi˚P¨ams
);

309 i‡(
c
->
pDevi˚Fns
->
devi˚OuçutU£sI¡îru±s
) {

310 
	`ns16550_öôülize_öãºu±s
–
mö‹
);

311 
	`ns16550_íabÀ_öãºu±s
–
c
, 
NS16550_ENABLE_ALL_INTR_EXCEPT_TX
);

314  
RTEMS_SUCCESSFUL
;

315 
	}
}

321 
	$ns16550_˛o£
(

322 
maj‹
,

323 
mö‹
,

324 * 
¨g


327 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

332 i‡(
c
->
pDevi˚Flow
 !&
ns16550_Êow_DTRCTS
) {

333 
	`ns16550_√g©e_DTR
(
mö‹
);

336 
	`ns16550_íabÀ_öãºu±s
(
c
, 
NS16550_DISABLE_ALL_INTR
);

338 i‡(
c
->
pDevi˚Fns
->
devi˚OuçutU£sI¡îru±s
) {

339 
	`ns16550_˛ónup_öãºu±s
(
mö‹
);

342 (
RTEMS_SUCCESSFUL
);

343 
	}
}

348 
	$ns16550_outch_pﬁÀd
(
c⁄sﬁe_tbl
 *
c
, 
out
)

350 
uöçå_t
 
p‹t
 = 
c
->
ulCålP‹t1
;

351 
gëRegi°î_f
 
gë
 = 
c
->
gëRegi°î
;

352 
£tRegi°î_f
 
£t
 = 
c
->
£tRegi°î
;

353 
uöt32_t
 
°©us
 = 0;

354 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

357 
uöt32_t
 
öãºu±_mask
 = 
	`gë
–
p‹t
, 
NS16550_INTERRUPT_ENABLE
);

360 
	`ns16550_íabÀ_öãºu±s
–
c
, 
NS16550_DISABLE_ALL_INTR
);

362 
åue
) {

364 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

367 
°©us
 = 
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
);

368 i‡((
°©us
 & 
SP_LSR_THOLD
) != 0) {

370 
	`£t
–
p‹t
, 
NS16550_TRANSMIT_BUFFER
, 
out
);

373 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

376 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

381 
°©us
 = 
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
);

382 } (
°©us
 & 
SP_LSR_THOLD
) == 0);

386 
	`£t
–
p‹t
, 
NS16550_INTERRUPT_ENABLE
, 
öãºu±_mask
);

387 
	}
}

389 
	$ns16550_wrôe_pﬁÀd
(
mö‹
, 
out
)

391 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

393 
	`ns16550_outch_pﬁÀd
–
c
, 
out
 );

394 
	}
}

404 
NS16550_STATIC
 
	$ns16550_as£π_RTS
(
mö‹
)

406 
uöt32_t
 
pNS16550
;

407 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

408 
NS16550C⁄ãxt
 *
≤s16550C⁄ãxt
;

409 
£tRegi°î_f
 
£tReg
;

411 
≤s16550C⁄ãxt
=(
NS16550C⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

413 
pNS16550
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

414 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

419 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

420 
≤s16550C⁄ãxt
->
ucModemCål
|=
SP_MODEM_RTS
;

421 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
, 
≤s16550C⁄ãxt
->
ucModemCål
);

422 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

424 
	}
}

430 
NS16550_STATIC
 
	$ns16550_√g©e_RTS
(
mö‹
)

432 
uöt32_t
 
pNS16550
;

433 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

434 
NS16550C⁄ãxt
 *
≤s16550C⁄ãxt
;

435 
£tRegi°î_f
 
£tReg
;

437 
≤s16550C⁄ãxt
=(
NS16550C⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

439 
pNS16550
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

440 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

445 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

446 
≤s16550C⁄ãxt
->
ucModemCål
&=~
SP_MODEM_RTS
;

447 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
, 
≤s16550C⁄ãxt
->
ucModemCål
);

448 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

450 
	}
}

461 
NS16550_STATIC
 
	$ns16550_as£π_DTR
(
mö‹
)

463 
uöt32_t
 
pNS16550
;

464 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

465 
NS16550C⁄ãxt
 *
≤s16550C⁄ãxt
;

466 
£tRegi°î_f
 
£tReg
;

468 
≤s16550C⁄ãxt
=(
NS16550C⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

470 
pNS16550
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

471 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

476 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

477 
≤s16550C⁄ãxt
->
ucModemCål
|=
SP_MODEM_DTR
;

478 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
, 
≤s16550C⁄ãxt
->
ucModemCål
);

479 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

481 
	}
}

487 
NS16550_STATIC
 
	$ns16550_√g©e_DTR
(
mö‹
)

489 
uöt32_t
 
pNS16550
;

490 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

491 
NS16550C⁄ãxt
 *
≤s16550C⁄ãxt
;

492 
£tRegi°î_f
 
£tReg
;

494 
≤s16550C⁄ãxt
=(
NS16550C⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

496 
pNS16550
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

497 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

502 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

503 
≤s16550C⁄ãxt
->
ucModemCål
&=~
SP_MODEM_DTR
;

504 (*
£tReg
)(
pNS16550
, 
NS16550_MODEM_CONTROL
,
≤s16550C⁄ãxt
->
ucModemCål
);

505 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

507 
	}
}

516 
	$ns16550_£t_©åibuãs
(

517 
mö‹
,

518 c⁄° 
ãrmios
 *
t


521 
uöt32_t
 
pNS16550
;

522 
uöt32_t
 
ulBaudDivis‹
;

523 
uöt8_t
 
ucLöeC⁄åﬁ
;

524 
uöt32_t
 
baud_ªque°ed
;

525 
£tRegi°î_f
 
£tReg
;

526 
πems_öãºu±_lock_c⁄ãxt
 
lock_c⁄ãxt
;

527 c⁄° 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

529 
pNS16550
 = 
c
->
ulCålP‹t1
;

530 
£tReg
 = 
c
->
£tRegi°î
;

538 
baud_ªque°ed
 = 
	`πems_ãrmios_baud_to_numbî
(
t
->
c_cÊag
);

539 
	`_As£π
–
baud_ªque°ed
 != 0 );

540 
ulBaudDivis‹
 = 
	`NS16550_GëBaudDivis‹
(
c
, 
baud_ªque°ed
);

542 
ucLöeC⁄åﬁ
 = 0;

548 i‡(
t
->
c_cÊag
 & 
PARENB
) {

549 
ucLöeC⁄åﬁ
 |
SP_LINE_PAR
;

550 i‡(!(
t
->
c_cÊag
 & 
PARODD
))

551 
ucLöeC⁄åﬁ
 |
SP_LINE_ODD
;

558 i‡(
t
->
c_cÊag
 & 
CSIZE
) {

559 
t
->
c_cÊag
 & 
CSIZE
) {

560 
CS5
: 
ucLöeC⁄åﬁ
 |
FIVE_BITS
; ;

561 
CS6
: 
ucLöeC⁄åﬁ
 |
SIX_BITS
; ;

562 
CS7
: 
ucLöeC⁄åﬁ
 |
SEVEN_BITS
; ;

563 
CS8
: 
ucLöeC⁄åﬁ
 |
EIGHT_BITS
; ;

566 
ucLöeC⁄åﬁ
 |
EIGHT_BITS
;

573 i‡(
t
->
c_cÊag
 & 
CSTOPB
) {

574 
ucLöeC⁄åﬁ
 |
SP_LINE_STOP
;

583 
	`πems_öãºu±_lock_acquúe
(&
ns16550_lock
, &
lock_c⁄ãxt
);

593 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
SP_LINE_DLAB
);

594 (*
£tReg
)(
pNS16550
, 
NS16550_TRANSMIT_BUFFER
, 
ulBaudDivis‹
&0xff);

595 (*
£tReg
)(
pNS16550
, 
NS16550_INTERRUPT_ENABLE
, (
ulBaudDivis‹
>>8)&0xff);

600 (*
£tReg
)(
pNS16550
, 
NS16550_LINE_CONTROL
, 
ucLöeC⁄åﬁ
 );

602 
	`πems_öãºu±_lock_ªÀa£
(&
ns16550_lock
, &
lock_c⁄ãxt
);

605 
	}
}

607 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
Ë|| deföed(
BSP_FEATURE_IRQ_LEGACY
)

612 
NS16550_STATIC
 
	$ns16550_¥o˚ss
–
mö‹
)

614 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

615 
c⁄sﬁe_d©a
 *
d
 = &
C⁄sﬁe_P‹t_D©a
 [
mö‹
];

616 
NS16550C⁄ãxt
 *
˘x
 = 
d
->
pDevi˚C⁄ãxt
;

617 
uöt32_t
 
p‹t
 = 
c
->
ulCålP‹t1
;

618 
gëRegi°î_f
 
gë
 = 
c
->
gëRegi°î
;

619 
i
 = 0;

620 
buf
 [
SP_FIFO_SIZE
];

625 
i
 = 0; i < 
SP_FIFO_SIZE
; ++i) {

626 i‡((
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
Ë& 
SP_LSR_RDY
) != 0) {

627 
buf
 [
i
] = (Ë
	`gë
(
p‹t
, 
NS16550_RECEIVE_BUFFER
);

634 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
–
d
->
ãrmios_d©a
, 
buf
, 
i
);

637 i‡(
˘x
->
å™smôFifoCh¨s
 > 0

638 && (
	`gë
–
p‹t
, 
NS16550_LINE_STATUS
Ë& 
SP_LSR_THOLD
) != 0) {

641 
	`πems_ãrmios_dequeue_ch¨a˘îs
(

642 
d
->
ãrmios_d©a
,

643 
˘x
->
å™smôFifoCh¨s


646 } (
	`gë
–
p‹t
, 
NS16550_INTERRUPT_ID
Ë& 
SP_IID_0
) == 0);

647 
	}
}

659 
ssize_t
 
	$ns16550_wrôe_suµ‹t_öt
(

660 
mö‹
,

661 c⁄° *
buf
,

662 
size_t
 
Àn


665 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

666 
c⁄sﬁe_d©a
 *
d
 = &
C⁄sﬁe_P‹t_D©a
 [
mö‹
];

667 
NS16550C⁄ãxt
 *
˘x
 = 
d
->
pDevi˚C⁄ãxt
;

668 
uöt32_t
 
p‹t
 = 
c
->
ulCålP‹t1
;

669 
£tRegi°î_f
 
£t
 = 
c
->
£tRegi°î
;

670 
i
 = 0;

671 
out
 = 
Àn
 > 
SP_FIFO_SIZE
 ? SP_FIFO_SIZE :Üen;

673 
i
 = 0; i < 
out
; ++i) {

674 
	`£t
–
p‹t
, 
NS16550_TRANSMIT_BUFFER
, 
buf
 [
i
]);

677 
˘x
->
å™smôFifoCh¨s
 = 
out
;

679 i‡(
out
 > 0) {

680 
	`ns16550_íabÀ_öãºu±s
–
c
, 
NS16550_ENABLE_ALL_INTR
);

682 
	`ns16550_íabÀ_öãºu±s
–
c
, 
NS16550_ENABLE_ALL_INTR_EXCEPT_TX
);

686 
	}
}

693 
NS16550_STATIC
 
	$ns16550_íabÀ_öãºu±s
(

694 
c⁄sﬁe_tbl
 *
c
,

695 
mask


698 
uöt32_t
 
pNS16550
;

699 
£tRegi°î_f
 
£tReg
;

701 
pNS16550
 = 
c
->
ulCålP‹t1
;

702 
£tReg
 = 
c
->
£tRegi°î
;

704 (*
£tReg
)(
pNS16550
, 
NS16550_INTERRUPT_ENABLE
, 
mask
);

705 
	}
}

707 #i‡
deföed
(
BSP_FEATURE_IRQ_EXTENSION
Ë|| deföed(
BSP_FEATURE_IRQ_LEGACY
)

708 
	$ns16550_i§
(*
¨g
)

710 
mö‹
 = (Ë
¨g
;

712 
	`ns16550_¥o˚ss
–
mö‹
);

713 
	}
}

721 
NS16550_STATIC
 
	$ns16550_öôülize_öãºu±s
–
mö‹
)

723 #i‡
	`deföed
(
BSP_FEATURE_IRQ_EXTENSION
Ë|| deföed(
BSP_FEATURE_IRQ_LEGACY
)

724 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

727 #ifde‡
BSP_FEATURE_IRQ_EXTENSION


729 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

730 
sc
 = 
	`πems_öãºu±_h™dÀr_ö°Æl
(

731 
c
->
ulI¡Ve˘‹
,

733 
RTEMS_INTERRUPT_SHARED
,

734 
ns16550_i§
,

735 (*Ë
mö‹


737 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

739 
	`¥ötk
–"%s: Eº‹: In°Æ»öãºu± h™dÀr\n", 
__func__
);

740 
	`πems_Áèl_îr‹_occuºed
( 0xdeadbeef);

743 #ñi‡
	`deföed
(
BSP_FEATURE_IRQ_LEGACY
)

745 
rv
 = 0;

746 #ifde‡
BSP_FEATURE_IRQ_LEGACY_SHARED_HANDLER_SUPPORT


747 
πems_úq_c⁄√˘_d©a
 
cd
 = {

748 
c
->
ulI¡Ve˘‹
,

749 
ns16550_i§
,

750 (*Ë
mö‹
,

751 
NULL
,

752 
NULL
,

753 
NULL
,

754 
NULL


756 
rv
 = 
	`BSP_ö°Æl_πems_sh¨ed_úq_h™dÀr
–&
cd
);

758 
πems_úq_c⁄√˘_d©a
 
cd
 = {

759 
c
->
ulI¡Ve˘‹
,

760 
ns16550_i§
,

761 (*Ë
mö‹
,

762 
NULL
,

763 
NULL
,

764 
NULL


766 
rv
 = 
	`BSP_ö°Æl_πems_úq_h™dÀr
–&
cd
);

768 i‡(
rv
 == 0) {

770 
	`¥ötk
–"%s: Eº‹: In°Æ»öãºu± h™dÀr\n", 
__func__
);

771 
	`πems_Áèl_îr‹_occuºed
( 0xdeadbeef);

775 
	}
}

777 
NS16550_STATIC
 
	$ns16550_˛ónup_öãºu±s
(
mö‹
)

779 #i‡
	`deföed
(
BSP_FEATURE_IRQ_EXTENSION
)

780 
πems_°©us_code
 
sc
 = 
RTEMS_SUCCESSFUL
;

781 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

782 
sc
 = 
	`πems_öãºu±_h™dÀr_ªmove
(

783 
c
->
ulI¡Ve˘‹
,

784 
ns16550_i§
,

785 (*Ë
mö‹


787 i‡(
sc
 !
RTEMS_SUCCESSFUL
) {

789 
	`¥ötk
("%s: Eº‹: Removêöãºu± h™dÀr\n", 
__func__
);

790 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

792 #ñi‡
	`deföed
(
BSP_FEATURE_IRQ_LEGACY
)

793 
rv
 = 0;

794 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

795 
πems_úq_c⁄√˘_d©a
 
cd
 = {

796 .
«me
 = 
c
->
ulI¡Ve˘‹
,

797 .
hdl
 = 
ns16550_i§
,

798 .
h™dÀ
 = (*Ë
mö‹


800 
rv
 = 
	`BSP_ªmove_πems_úq_h™dÀr
(&
cd
);

801 i‡(
rv
 == 0) {

803 
	`¥ötk
("%s: Eº‹: Removêöãºu± h™dÀr\n", 
__func__
);

804 
	`πems_Áèl_îr‹_occuºed
(0xdeadbeef);

807 
	}
}

816 
ssize_t
 
	$ns16550_wrôe_suµ‹t_pﬁÀd
(

817 
mö‹
,

818 c⁄° *
buf
,

819 
size_t
 
Àn


822 
nwrôe
 = 0;

827 
nwrôe
 < 
Àn
) {

831 
	`ns16550_wrôe_pﬁÀd
(
mö‹
, *
buf
++);

832 
nwrôe
++;

838  
nwrôe
;

839 
	}
}

844 
	$ns16550_öch_pﬁÀd
(

845 
c⁄sﬁe_tbl
 *
c


848 
uöt32_t
 
pNS16550
;

849 
ucLöeSètus
;

850 
uöt8_t
 
cCh¨
;

851 
gëRegi°î_f
 
gëReg
;

853 
pNS16550
 = 
c
->
ulCålP‹t1
;

854 
gëReg
 = 
c
->
gëRegi°î
;

856 
ucLöeSètus
 = (*
gëReg
)(
pNS16550
, 
NS16550_LINE_STATUS
);

857 i‡(
ucLöeSètus
 & 
SP_LSR_RDY
) {

858 
cCh¨
 = (*
gëReg
)(
pNS16550
, 
NS16550_RECEIVE_BUFFER
);

859  ()
cCh¨
;

862 
	}
}

869 
	$ns16550_öbyã_n⁄blockög_pﬁÀd
(
mö‹
)

871 
c⁄sﬁe_tbl
 *
c
 = 
C⁄sﬁe_P‹t_Tbl
 [
mö‹
];

873  
	`ns16550_öch_pﬁÀd
–
c
 );

874 
	}
}

	@src/libchip/serial/ns16550.h

27 #i‚de‡
_NS16550_H_


28 
	#_NS16550_H_


	)

30 
	~<πems/ãrmio°y≥s.h
>

31 
	~<libchù/£rül.h
>

33 #ifde‡
__˝lu•lus


41 c⁄° 
c⁄sﬁe_‚s
 
ns16550_‚s
;

42 c⁄° 
c⁄sﬁe_‚s
 
ns16550_‚s_pﬁÀd
;

48 c⁄° 
c⁄sﬁe_Êow
 
ns16550_Êow_RTSCTS
;

49 c⁄° 
c⁄sﬁe_Êow
 
ns16550_Êow_DTRCTS
;

54 
ns16550_outch_pﬁÀd
(
c⁄sﬁe_tbl
 *
c
, 
out
);

55 
ns16550_öch_pﬁÀd
(
c⁄sﬁe_tbl
 *
c
);

59 
uöt8_t
 (*
	tns16550_gë_ªg
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
);

61 (*
	gns16550_£t_ªg
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
, uöt8_à
	tvÆue
);

64 
πems_ãrmios_devi˚_c⁄ãxt
 
	gba£
;

65 
ns16550_gë_ªg
 
	ggë_ªg
;

66 
ns16550_£t_ªg
 
	g£t_ªg
;

67 
uöçå_t
 
	gp‹t
;

68 
πems_ve˘‹_numbî
 
	gúq
;

69 
uöt32_t
 
	g˛ock
;

70 
uöt32_t
 
	göôül_baud
;

71 
boﬁ
 
	ghas_‰a˘i⁄Æ_dividî_ªgi°î
;

72 
uöt8_t
 
	gmodem_c⁄åﬁ
;

73 
size_t
 
	gout_tŸÆ
;

74 
size_t
 
	gout_ªmaöög
;

75 
size_t
 
	gout_cuºít
;

76 c⁄° *
	gout_buf
;

77 
πems_ãrmios_ây
 *
	gây
;

78 } 
	tns16550_c⁄ãxt
;

80 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
ns16550_h™dÀr_öãºu±
;

81 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
ns16550_h™dÀr_pﬁÀd
;

82 c⁄° 
πems_ãrmios_devi˚_h™dÀr
 
ns16550_h™dÀr_èsk
;

84 c⁄° 
πems_ãrmios_devi˚_Êow
 
ns16550_Êow_πs˘s
;

85 c⁄° 
πems_ãrmios_devi˚_Êow
 
ns16550_Êow_då˘s
;

87 
ns16550_pﬁÀd_putch¨
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
, 
out
);

89 
ns16550_pﬁÀd_gëch¨
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
);

91 
boﬁ
 
ns16550_¥obe
(
πems_ãrmios_devi˚_c⁄ãxt
 *
ba£
);

93 #ifde‡
__˝lu•lus


	@src/libchip/serial/ns16550_p.h

28 #i‚de‡
_NS16550_P_H_


29 
	#_NS16550_P_H_


	)

31 
	~<libchù/£rül.h
>

33 #ifde‡
__˝lu•lus


42 
	#NS16550_STATIC
 

	)

44 
	#NS16550_RECEIVE_BUFFER
 0

	)

45 
	#NS16550_TRANSMIT_BUFFER
 0

	)

46 
	#NS16550_INTERRUPT_ENABLE
 1

	)

47 
	#NS16550_INTERRUPT_ID
 2

	)

48 
	#NS16550_FIFO_CONTROL
 2

	)

49 
	#NS16550_LINE_CONTROL
 3

	)

50 
	#NS16550_MODEM_CONTROL
 4

	)

51 
	#NS16550_LINE_STATUS
 5

	)

52 
	#NS16550_MODEM_STATUS
 6

	)

53 
	#NS16550_SCRATCH_PAD
 7

	)

54 
	#NS16550_FRACTIONAL_DIVIDER
 10

	)

60 
	#SP_INT_RX_ENABLE
 0x01

	)

61 
	#SP_INT_TX_ENABLE
 0x02

	)

62 
	#SP_INT_LS_ENABLE
 0x04

	)

63 
	#SP_INT_MS_ENABLE
 0x08

	)

65 
	#NS16550_ENABLE_ALL_INTR
 (
SP_INT_RX_ENABLE
 | 
SP_INT_TX_ENABLE
)

	)

66 
	#NS16550_DISABLE_ALL_INTR
 0x00

	)

67 
	#NS16550_ENABLE_ALL_INTR_EXCEPT_TX
 (
SP_INT_RX_ENABLE
)

	)

73 
	#SP_IID_0
 0x01

	)

74 
	#SP_IID_1
 0x02

	)

75 
	#SP_IID_2
 0x04

	)

76 
	#SP_IID_3
 0x08

	)

82 
	#SP_FIFO_ENABLE
 0x01

	)

83 
	#SP_FIFO_RXRST
 0x02

	)

84 
	#SP_FIFO_TXRST
 0x04

	)

85 
	#SP_FIFO_DMA
 0x08

	)

86 
	#SP_FIFO_RXLEVEL
 0xc0

	)

88 
	#SP_FIFO_SIZE
 16

	)

94 
	#SP_LINE_SIZE
 0x03

	)

95 
	#SP_LINE_STOP
 0x04

	)

96 
	#SP_LINE_PAR
 0x08

	)

97 
	#SP_LINE_ODD
 0x10

	)

98 
	#SP_LINE_STICK
 0x20

	)

99 
	#SP_LINE_BREAK
 0x40

	)

100 
	#SP_LINE_DLAB
 0x80

	)

106 
	#FIVE_BITS
 0x0

	)

107 
	#SIX_BITS
 0x1

	)

108 
	#SEVEN_BITS
 0x2

	)

109 
	#EIGHT_BITS
 0x3

	)

115 
	#SP_MODEM_DTR
 0x01

	)

116 
	#SP_MODEM_RTS
 0x02

	)

117 
	#SP_MODEM_IRQ
 0x08

	)

118 
	#SP_MODEM_LOOP
 0x10

	)

119 
	#SP_MODEM_DIV4
 0x80

	)

125 
	#SP_LSR_RDY
 0x01

	)

126 
	#SP_LSR_EOVRUN
 0x02

	)

127 
	#SP_LSR_EPAR
 0x04

	)

128 
	#SP_LSR_EFRAME
 0x08

	)

129 
	#SP_LSR_BREAK
 0x10

	)

130 
	#SP_LSR_THOLD
 0x20

	)

131 
	#SP_LSR_TX
 0x40

	)

132 
	#SP_LSR_EFIFO
 0x80

	)

134 #ifde‡
__˝lu•lus


	@src/libchip/serial/serial.h

21 #i‚de‡
__LIBCHIP_SERIAL_h


22 
	#__LIBCHIP_SERIAL_h


	)

24 
	~<ãrmios.h
>

26 
	~<πems.h
>

28 #ifde‡
__˝lu•lus


42 
uöt8_t
 (*
	tgëRegi°î_f
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
);

51 (*
£tRegi°î_f
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tªg
, uöt8_à
	tvÆue
);

59 
uöt8_t
 (*
	tgëD©a_f
)(
	tuöçå_t
 
	tp‹t
);

67 (*
£tD©a_f
)(
	tuöçå_t
 
	tp‹t
, 
	tuöt8_t
 
	tvÆue
);

76 
	s_c⁄sﬁe_‚s
 {

77 
boﬁ
 (*
devi˚Probe
)(
mö‹
);

78 (*
devi˚Fú°O≥n
)(
maj‹
, 
mö‹
, *
¨g
);

79 (*
devi˚La°Clo£
)(
maj‹
, 
mö‹
, *
¨g
);

80 (*
devi˚Ród
)(
mö‹
);

81 
ssize_t
 (*
devi˚Wrôe
)(
mö‹
, c⁄° *
buf
, 
size_t
 
Àn
);

82 (*
devi˚Inôülize
)(
mö‹
);

83 (*
devi˚WrôePﬁÀd
)(
mö‹
, 
cCh¨
);

84 (*
devi˚SëAâribuãs
)(
mö‹
, c⁄° 
ãrmios
 *
t
);

85 
boﬁ
 
devi˚OuçutU£sI¡îru±s
;

86 } 
	tc⁄sﬁe_‚s
;

94 
	s_c⁄sﬁe_Êow
 {

95 (*
devi˚St›RemŸeTx
)(
mö‹
);

96 (*
devi˚SèπRemŸeTx
)(
mö‹
);

97 } 
	tc⁄sﬁe_Êow
;

105 
SERIAL_MC68681
,

106 
SERIAL_NS16550
,

107 
SERIAL_NS16550_WITH_FDR
,

109 
SERIAL_Z85C30
,

110 
SERIAL_CUSTOM


111 } 
	tc⁄sﬁe_devs
;

117 
	s_c⁄sﬁe_tbl
 {

119 c⁄° *
sDevi˚Name
;

124 
c⁄sﬁe_devs
 
devi˚Ty≥
;

126 c⁄° 
c⁄sﬁe_‚s
 *
pDevi˚Fns
;

130 
boﬁ
 (*
devi˚Probe
)(
mö‹
);

138 c⁄° 
c⁄sﬁe_Êow
 *
pDevi˚Flow
;

149 
uöt32_t
 
ulM¨gö
;

157 
uöt32_t
 
ulHy°îesis
;

162 *
pDevi˚P¨ams
;

166 
uöt32_t
 
ulCålP‹t1
;

170 
uöt32_t
 
ulCålP‹t2
;

172 
uöt32_t
 
ulD©aP‹t
;

174 
gëRegi°î_f
 
gëRegi°î
;

176 
£tRegi°î_f
 
£tRegi°î
;

178 
gëD©a_f
 
gëD©a
;

180 
£tD©a_f
 
£tD©a
;

182 
uöt32_t
 
ulClock
;

184 
ulI¡Ve˘‹
;

185 } 
	tc⁄sﬁe_tbl
;

190 
	s_c⁄sﬁe_d©a
 {

191 *
ãrmios_d©a
;

192 vﬁ©ûê
boﬁ
 
bA˘ive
;

194 *
pDevi˚C⁄ãxt
;

195 } 
	tc⁄sﬁe_d©a
;

201 
c⁄sﬁe_tbl
 **
C⁄sﬁe_P‹t_Tbl
;

205 
C⁄sﬁe_P‹t_Cou¡
;

211 
c⁄sﬁe_tbl
 
C⁄sﬁe_C⁄figuøti⁄_P‹ts
[];

215 
C⁄sﬁe_C⁄figuøti⁄_Cou¡
;

220 
c⁄sﬁe_d©a
 *
C⁄sﬁe_P‹t_D©a
;

222 
πems_devi˚_mö‹_numbî
 
C⁄sﬁe_P‹t_Mö‹
;

229 
b•_c⁄sﬁe_£À˘
();

231 #ifde‡
__˝lu•lus


	@src/libchip/serial/serprobe.c

1 
	~<πems.h
>

2 
	~<libchù/£rül.h
>

3 
	~<libchù/£rsuµ.h
>

5 
boﬁ
 
	$libchù_£rül_deÁu…_¥obe
(
mö‹
)

12  
åue
;

13 
	}
}

	@src/libchip/serial/sersupp.h

1 #i‚de‡
__LIBCHIP_SERIAL_SUPPORT_h


2 
	#__LIBCHIP_SERIAL_SUPPORT_h


	)

4 
	~<πems/ãrmio°y≥s.h
>

6 #ifde‡
__˝lu•lus


10 
boﬁ
 
libchù_£rül_deÁu…_¥obe
(

11 
mö‹


14 #ifde‡
__˝lu•lus


	@src/libchip/serial/z85c30.c

31 
	~<πems.h
>

32 
	~<πems/libio.h
>

33 
	~<πems/sc‹e/sys°©e.h
>

34 
	~<°dlib.h
>

36 
	~<libchù/£rül.h
>

37 
	~<libchù/£rsuµ.h
>

38 
	~"z85c30_p.h
"

44 c⁄° 
c⁄sﬁe_Êow
 
	gz85c30_Êow_RTSCTS
 = {

45 
z85c30_√g©e_RTS
,

46 
z85c30_as£π_RTS


49 c⁄° 
c⁄sﬁe_Êow
 
	gz85c30_Êow_DTRCTS
 = {

50 
z85c30_√g©e_DTR
,

51 
z85c30_as£π_DTR


58 c⁄° 
c⁄sﬁe_‚s
 
	gz85c30_‚s
 = {

59 
libchù_£rül_deÁu…_¥obe
,

60 
z85c30_›í
,

61 
NULL
,

62 
NULL
,

63 
z85c30_wrôe_suµ‹t_öt
,

64 
z85c30_öôülize_öãºu±s
,

65 
z85c30_wrôe_pﬁÀd
,

66 
NULL
,

67 
åue


70 c⁄° 
c⁄sﬁe_‚s
 
	gz85c30_‚s_pﬁÀd
 = {

71 
libchù_£rül_deÁu…_¥obe
,

72 
z85c30_›í
,

73 
z85c30_˛o£
,

74 
z85c30_öbyã_n⁄blockög_pﬁÀd
,

75 
z85c30_wrôe_suµ‹t_pﬁÀd
,

76 
z85c30_öô
,

77 
z85c30_wrôe_pﬁÀd
,

78 
NULL
,

79 
Ál£


82 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

83 
£t_ve˘‹
–
πems_i§_íåy
, 
πems_ve˘‹_numbî
, );

92 
Z85C30_STATIC
 
	$z85c30_öôülize_p‹t
(

93 
mö‹


96 
uöçå_t
 
ulCålP‹t
;

97 
uöçå_t
 
ulBaudDivis‹
;

98 
£tRegi°î_f
 
£tReg
;

100 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

101 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

109 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR4
, 
SCC_WR4_1_STOP
 | 
SCC_WR4_16_CLOCK
 );

115 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR3
, 
SCC_WR3_RX_8_BITS
 );

121 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR5
, 
SCC_WR5_TX_8_BITS
 );

126 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR10
, 0x00 );

133 (*
£tReg
)(

134 
ulCålP‹t
,

135 
SCC_WR0_SEL_WR11
,

136 
SCC_WR11_OUT_BR_GEN
 | 
SCC_WR11_TRXC_OI
 |

137 
SCC_WR11_TX_BR_GEN
 | 
SCC_WR11_RX_BR_GEN


140 
ulBaudDivis‹
 = 
	`Z85C30_Baud
(

141 (
uöt32_t
Ë
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulClock
,

142 (
uöt32_t
Ë((
uöçå_t
)
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚P¨ams
)

150 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR12
, 
ulBaudDivis‹
 & 0xff );

156 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR13
, (
ulBaudDivis‹
>>8) & 0xff );

162 (*
£tReg
)(

163 
ulCålP‹t
,

164 
SCC_WR0_SEL_WR14
,

165 
SCC_WR14_BR_EN
 | 
SCC_WR14_BR_SRC
 | 
SCC_WR14_NULL


171 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR15
, 
SCC_WR15_CTS_IE
 );

176 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_INT
 );

178 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_ERR_RST
 );

183 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR3
, 
SCC_WR3_RX_8_BITS
 | 
SCC_WR3_RX_EN
 );

188 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR5
, 
SCC_WR5_TX_8_BITS
 | 
SCC_WR5_TX_EN
 );

193 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR1
, 0 );

198 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_TX_CRC
 );

203 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_INT
 );

204 
	}
}

210 
Z85C30_STATIC
 
	$z85c30_›í
(

211 
maj‹
,

212 
mö‹
,

213 *
¨g


217 
	`z85c30_öôülize_p‹t
(
mö‹
);

223 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Flow
 !=&
z85c30_Êow_DTRCTS
) {

224 
	`z85c30_as£π_DTR
(
mö‹
);

227 (
RTEMS_SUCCESSFUL
);

228 
	}
}

234 
Z85C30_STATIC
 
	$z85c30_˛o£
(

235 
maj‹
,

236 
mö‹
,

237 *
¨g


244 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Flow
 !=&
z85c30_Êow_DTRCTS
) {

245 
	`z85c30_√g©e_DTR
(
mö‹
);

248 (
RTEMS_SUCCESSFUL
);

249 
	}
}

255 
Z85C30_STATIC
 
	$z85c30_öô
(
mö‹
)

257 
uöçå_t
 
ulCålP‹t
;

258 
z85c30_c⁄ãxt
 *
pz85c30C⁄ãxt
;

259 
£tRegi°î_f
 
£tReg
;

260 
gëRegi°î_f
 
gëReg
;

262 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

263 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

264 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

266 
pz85c30C⁄ãxt
 = (
z85c30_c⁄ãxt
 *)
	`mÆloc
((z85c30_context));

268 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
 = (*)
pz85c30C⁄ãxt
;

270 
pz85c30C⁄ãxt
->
ucModemCål
 = 
SCC_WR5_TX_8_BITS
 | 
SCC_WR5_TX_EN
;

272 i‡–
ulCålP‹t
 =
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
 ) {

279 (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

281 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR9
, 
SCC_WR9_CH_A_RST
);

290 (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

292 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR9
, 
SCC_WR9_CH_B_RST
);

294 
	}
}

304 
Z85C30_STATIC
 
	$z85c30_as£π_RTS
(
mö‹
)

306 
πems_öãºu±_Àvñ
 
Irql
;

307 
z85c30_c⁄ãxt
 *
pz85c30C⁄ãxt
;

308 
£tRegi°î_f
 
£tReg
;

310 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

312 
pz85c30C⁄ãxt
 = (
z85c30_c⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

318 
	`πems_öãºu±_dißbÀ
(
Irql
);

319 
pz85c30C⁄ãxt
->
ucModemCål
|=
SCC_WR5_RTS
;

320 (*
£tReg
)(

321 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
,

322 
SCC_WR0_SEL_WR5
,

323 
pz85c30C⁄ãxt
->
ucModemCål


325 
	`πems_öãºu±_íabÀ
(
Irql
);

327 
	}
}

333 
Z85C30_STATIC
 
	$z85c30_√g©e_RTS
(
mö‹
)

335 
πems_öãºu±_Àvñ
 
Irql
;

336 
z85c30_c⁄ãxt
 *
pz85c30C⁄ãxt
;

337 
£tRegi°î_f
 
£tReg
;

339 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

341 
pz85c30C⁄ãxt
 = (
z85c30_c⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

347 
	`πems_öãºu±_dißbÀ
(
Irql
);

348 
pz85c30C⁄ãxt
->
ucModemCål
&=~
SCC_WR5_RTS
;

349 (*
£tReg
)(

350 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
,

351 
SCC_WR0_SEL_WR5
,

352 
pz85c30C⁄ãxt
->
ucModemCål


354 
	`πems_öãºu±_íabÀ
(
Irql
);

356 
	}
}

367 
Z85C30_STATIC
 
	$z85c30_as£π_DTR
(
mö‹
)

369 
πems_öãºu±_Àvñ
 
Irql
;

370 
z85c30_c⁄ãxt
 *
pz85c30C⁄ãxt
;

371 
£tRegi°î_f
 
£tReg
;

373 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

375 
pz85c30C⁄ãxt
 = (
z85c30_c⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

381 
	`πems_öãºu±_dißbÀ
(
Irql
);

382 
pz85c30C⁄ãxt
->
ucModemCål
|=
SCC_WR5_DTR
;

383 (*
£tReg
)(

384 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
,

385 
SCC_WR0_SEL_WR5
,

386 
pz85c30C⁄ãxt
->
ucModemCål


388 
	`πems_öãºu±_íabÀ
(
Irql
);

390 
	}
}

396 
Z85C30_STATIC
 
	$z85c30_√g©e_DTR
(
mö‹
)

398 
πems_öãºu±_Àvñ
 
Irql
;

399 
z85c30_c⁄ãxt
 *
pz85c30C⁄ãxt
;

400 
£tRegi°î_f
 
£tReg
;

402 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

404 
pz85c30C⁄ãxt
 = (
z85c30_c⁄ãxt
 *Ë
C⁄sﬁe_P‹t_D©a
[
mö‹
].
pDevi˚C⁄ãxt
;

410 
	`πems_öãºu±_dißbÀ
(
Irql
);

411 
pz85c30C⁄ãxt
->
ucModemCål
&=~
SCC_WR5_DTR
;

412 (*
£tReg
)(

413 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
,

414 
SCC_WR0_SEL_WR5
,

415 
pz85c30C⁄ãxt
->
ucModemCål


417 
	`πems_öãºu±_íabÀ
(
Irql
);

419 
	}
}

428 
Z85C30_STATIC
 
	$z85c30_£t_©åibuãs
(

429 
mö‹
,

430 c⁄° 
ãrmios
 *
t


433 
uöçå_t
 
ulCålP‹t
;

434 
uöt32_t
 
ulBaudDivis‹
;

435 
uöt32_t
 
wr3
;

436 
uöt32_t
 
wr4
;

437 
uöt32_t
 
wr5
;

438 
baud_ªque°ed
;

439 
uöt32_t
 
baud_numbî
;

440 
£tRegi°î_f
 
£tReg
;

441 
πems_öãºu±_Àvñ
 
Irql
;

443 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

444 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

452 
baud_ªque°ed
 = 
t
->
c_cÊag
 & 
CBAUD
;

453 i‡(!
baud_ªque°ed
)

454 
baud_ªque°ed
 = 
B9600
;

456 
baud_numbî
 = (
uöt32_t
Ë
	`πems_ãrmios_baud_to_numbî
–
baud_ªque°ed
 );

457 
	`_As£π
–
baud_numbî
 != 0 );

459 
ulBaudDivis‹
 = 
	`Z85C30_Baud
(

460 (
uöt32_t
Ë
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulClock
,

461 
baud_numbî


464 
wr3
 = 
SCC_WR3_RX_EN
;

465 
wr4
 = 
SCC_WR4_16_CLOCK
;

466 
wr5
 = 
SCC_WR5_TX_EN
;

472 i‡(
t
->
c_cÊag
 & 
PARENB
) {

473 
wr4
 |
SCC_WR4_PAR_EN
;

474 i‡(!(
t
->
c_cÊag
 & 
PARODD
))

475 
wr4
 |
SCC_WR4_PAR_EVEN
;

482 i‡(
t
->
c_cÊag
 & 
CSIZE
) {

483 
t
->
c_cÊag
 & 
CSIZE
) {

484 
CS5
: ;

485 
CS6
: 
wr3
 |
SCC_WR3_RX_6_BITS
; 
wr5
 |
SCC_WR5_TX_6_BITS
; ;

486 
CS7
: 
wr3
 |
SCC_WR3_RX_7_BITS
; 
wr5
 |
SCC_WR5_TX_7_BITS
; ;

487 
CS8
: 
wr3
 |
SCC_WR3_RX_8_BITS
; 
wr5
 |
SCC_WR5_TX_8_BITS
; ;

490 
wr3
 |
SCC_WR3_RX_8_BITS
;

491 
wr5
 |
SCC_WR5_TX_8_BITS
;

498 i‡(
t
->
c_cÊag
 & 
CSTOPB
) {

499 
wr4
 |
SCC_WR4_2_STOP
;

501 
wr4
 |
SCC_WR4_1_STOP
;

508 
	`πems_öãºu±_dißbÀ
(
Irql
);

509 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR4
, 
wr4
 );

510 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR3
, 
wr3
 );

511 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR5
, 
wr5
 );

519 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR12
, 
ulBaudDivis‹
 & 0xff );

526 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR13
, (
ulBaudDivis‹
>>8) & 0xff );

528 
	`πems_öãºu±_íabÀ
(
Irql
);

531 
	}
}

539 
Z85C30_STATIC
 
	$z85c30_¥o˚ss
(

540 
mö‹
,

541 
uöt8_t
 
ucI¡Píd


544 
uöt32_t
 
ulCålP‹t
;

545 vﬁ©ûê
uöt8_t
 
z85c30_°©us
;

546 
cCh¨
;

547 
£tRegi°î_f
 
£tReg
;

548 
gëRegi°î_f
 
gëReg
;

550 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

551 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

552 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

558 
ucI¡Píd
&
SCC_RR3_B_RX_IP
)

560 
z85c30_°©us
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

561 i‡(!
	`Z85C30_Sètus_Is_RX_ch¨a˘î_avaûabÀ
(
z85c30_°©us
)) {

569 
cCh¨
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD8
);

571 
	`πems_ãrmios_íqueue_øw_ch¨a˘îs
(

572 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
,

573 &
cCh¨
,

587 
åue
) {

588 
z85c30_°©us
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

589 i‡(!
	`Z85C30_Sètus_Is_TX_buf„r_em±y
(
z85c30_°©us
)) {

599 i‡(!
	`Z85C30_Sètus_Is_CTS_as£πed
(
z85c30_°©us
)) {

603 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_TX_INT
);

611 
	`πems_ãrmios_dequeue_ch¨a˘îs
(
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
, 1);

612 i‡(
	`πems_ãrmios_dequeue_ch¨a˘îs
(

613 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
ãrmios_d©a
, 1)) {

614 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Flow
 !&
z85c30_Êow_RTSCTS
) {

615 
	`z85c30_√g©e_RTS
(
mö‹
);

617 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 = 
FALSE
;

618 
	`z85c30_íabÀ_öãºu±s
(
mö‹
, 
SCC_ENABLE_ALL_INTR_EXCEPT_TX
);

619 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_TX_INT
);

625 i‡(
ucI¡Píd
 & 
SCC_RR3_B_EXT_IP
) {

629 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_INT
);

630 
z85c30_°©us
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

636 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_HI_IUS
);

637 
	}
}

645 
Z85C30_STATIC
 
πems_i§
 
	$z85c30_i§
(

646 
πems_ve˘‹_numbî
 
ve˘‹


649 
mö‹
;

650 
uöt32_t
 
ulCålP‹t
;

651 vﬁ©ûê
uöt8_t
 
ucI¡Píd
;

652 vﬁ©ûê
uöt8_t
 
ucI¡PídP‹t
;

653 
gëRegi°î_f
 
gëReg
;

655 
mö‹
=0;mö‹<
C⁄sﬁe_P‹t_Cou¡
;minor++) {

656 if(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulI¡Ve˘‹
 =
ve˘‹
 &&

657 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
devi˚Ty≥
 =
SERIAL_Z85C30
 ) {

658 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t2
;

659 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

661 
ucI¡Píd
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD3
);

667 i‡(
ulCålP‹t
 =
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
) {

668 
ucI¡PídP‹t
 = 
ucI¡Píd
 >> 3;

669 
ucI¡PídP‹t
 &= 7;

671 
ucI¡PídP‹t
 = 
ucI¡Píd
 &= 7;

674 i‡(
ucI¡PídP‹t
) {

675 
	`z85c30_¥o˚ss
(
mö‹
, 
ucI¡PídP‹t
);

677 } 
ucI¡PídP‹t
);

680 
	}
}

688 
Z85C30_STATIC
 
	$z85c30_íabÀ_öãºu±s
(

689 
mö‹
,

690 
öãºu±_mask


693 
uöt32_t
 
ulCålP‹t
;

694 
£tRegi°î_f
 
£tReg
;

696 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

697 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

699 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR1
, 
öãºu±_mask
);

700 
	}
}

708 
Z85C30_STATIC
 
	$z85c30_öôülize_öãºu±s
(

709 
mö‹


712 
uöt32_t
 
ulCålP‹t1
;

713 
£tRegi°î_f
 
£tReg
;

715 
ulCålP‹t1
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->ulCtrlPort1;

716 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

719 
	`z85c30_öô
(
mö‹
);

721 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
=
FALSE
;

723 
	`z85c30_öôülize_p‹t
–
mö‹
 );

725 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Flow
 !&
z85c30_Êow_RTSCTS
) {

726 
	`z85c30_√g©e_RTS
(
mö‹
);

729 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

730 
	`£t_ve˘‹
(
z85c30_i§
, 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulI¡Ve˘‹
, 1);

733 
	`z85c30_íabÀ_öãºu±s
(
mö‹
, 
SCC_ENABLE_ALL_INTR_EXCEPT_TX
);

735 (*
£tReg
)(
ulCålP‹t1
, 
SCC_WR0_SEL_WR2
, 0);

736 (*
£tReg
)(
ulCålP‹t1
, 
SCC_WR0_SEL_WR9
, 
SCC_WR9_MIE
);

742 (*
£tReg
)(
ulCålP‹t1
, 
SCC_WR0_SEL_WR0
, 
SCC_WR0_RST_INT
);

743 
	}
}

752 
Z85C30_STATIC
 
ssize_t
 
	$z85c30_wrôe_suµ‹t_öt
(

753 
mö‹
,

754 c⁄° *
buf
,

755 
size_t
 
Àn
)

757 
uöt32_t
 
Irql
;

758 
uöt32_t
 
ulCålP‹t
;

759 
£tRegi°î_f
 
£tReg
;

761 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

762 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

769 i‡–!
Àn
 )

776 i‡(
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
pDevi˚Flow
 !&
z85c30_Êow_RTSCTS
) {

777 
	`z85c30_as£π_RTS
(
mö‹
);

779 
	`πems_öãºu±_dißbÀ
(
Irql
);

780 i‡–
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 =
FALSE
) {

781 
C⁄sﬁe_P‹t_D©a
[
mö‹
].
bA˘ive
 = 
TRUE
;

782 
	`z85c30_íabÀ_öãºu±s
(
mö‹
, 
SCC_ENABLE_ALL_INTR
);

784 (*
£tReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_WR8
, *
buf
);

785 
	`πems_öãºu±_íabÀ
(
Irql
);

788 
	}
}

796 
Z85C30_STATIC
 
	$z85c30_öbyã_n⁄blockög_pﬁÀd
(

797 
mö‹


800 vﬁ©ûê
uöt8_t
 
z85c30_°©us
;

801 
uöt32_t
 
ulCålP‹t
;

802 
gëRegi°î_f
 
gëReg
;

804 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

805 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

810 
z85c30_°©us
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

811 i‡(!
	`Z85C30_Sètus_Is_RX_ch¨a˘î_avaûabÀ
(
z85c30_°©us
)) {

819  (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD8
);

820 
	}
}

829 
Z85C30_STATIC
 
ssize_t
 
	$z85c30_wrôe_suµ‹t_pﬁÀd
(

830 
mö‹
,

831 c⁄° *
buf
,

832 
size_t
 
Àn
)

834 
nwrôe
=0;

839 
nwrôe
 < 
Àn
) {

840 
	`z85c30_wrôe_pﬁÀd
(
mö‹
, *
buf
++);

841 
nwrôe
++;

847  
nwrôe
;

848 
	}
}

856 
Z85C30_STATIC
 
	$z85c30_wrôe_pﬁÀd
(

857 
mö‹
,

858 
cCh¨


861 vﬁ©ûê
uöt8_t
 
z85c30_°©us
;

862 
uöt32_t
 
ulCålP‹t
;

863 
gëRegi°î_f
 
gëReg
;

864 
£tRegi°î_f
 
£tReg
;

866 
ulCålP‹t
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
ulCålP‹t1
;

867 
gëReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
gëRegi°î
;

868 
£tReg
 = 
C⁄sﬁe_P‹t_Tbl
[
mö‹
]->
£tRegi°î
;

874 
z85c30_°©us
 = (*
gëReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_RD0
 );

876 !
	`Z85C30_Sètus_Is_TX_buf„r_em±y
(
z85c30_°©us
)) {

881 i‡(
	`_Sy°em_°©e_Is_up
(
	`_Sy°em_°©e_Gë
())) {

882 
	`πems_èsk_wake_a·î
(
RTEMS_YIELD_PROCESSOR
);

885 
z85c30_°©us
 = (*
gëReg
)(
ulCålP‹t
, 
SCC_WR0_SEL_RD0
);

892 (*
£tReg
)–
ulCålP‹t
, 
SCC_WR0_SEL_WR8
, 
cCh¨
 );

893 
	}
}

	@src/libchip/serial/z85c30.h

30 #i‚de‡
__Z85C30_H


31 
	#__Z85C30_H


	)

33 
	~<°döt.h
>

35 
	~<libchù/£rül.h
>

37 #ifde‡
__˝lu•lus


45 c⁄° 
c⁄sﬁe_‚s
 
z85c30_‚s
;

46 c⁄° 
c⁄sﬁe_‚s
 
z85c30_‚s_pﬁÀd
;

52 c⁄° 
c⁄sﬁe_Êow
 
z85c30_Êow_RTSCTS
;

53 c⁄° 
c⁄sﬁe_Êow
 
z85c30_Êow_DTRCTS
;

59 
uöt8_t
 
z85c30_gë_ªgi°î
(

60 
uöçå_t
 
ulCålP‹t
,

61 
uöt8_t
 
ucRegNum


64 
z85c30_£t_ªgi°î
(

65 
uöçå_t
 
ulCålP‹t
,

66 
uöt8_t
 
ucRegNum
,

67 
uöt8_t
 
ucD©a


70 
uöt8_t
 
z85c30_gë_d©a
(

71 
uöt32_t
 
ulD©aP‹t


74 
z85c30_£t_d©a
(

75 
uöt32_t
 
ulD©aP‹t
,

76 
uöt8_t
 
ucD©a


79 #ifde‡
__˝lu•lus


	@src/libchip/serial/z85c30_p.h

26 #i‚de‡
__Z85C30_P_H


27 
	#__Z85C30_P_H


	)

29 #ifde‡
__˝lu•lus


38 
	#Z85C30_STATIC


	)

45 
	#SCC_WR0_SEL_WR0
 0x00

	)

46 
	#SCC_WR0_SEL_WR1
 0x01

	)

47 
	#SCC_WR0_SEL_WR2
 0x02

	)

48 
	#SCC_WR0_SEL_WR3
 0x03

	)

49 
	#SCC_WR0_SEL_WR4
 0x04

	)

50 
	#SCC_WR0_SEL_WR5
 0x05

	)

51 
	#SCC_WR0_SEL_WR6
 0x06

	)

52 
	#SCC_WR0_SEL_WR7
 0x07

	)

53 
	#SCC_WR0_SEL_WR8
 0x08

	)

54 
	#SCC_WR0_SEL_WR9
 0x09

	)

55 
	#SCC_WR0_SEL_WR10
 0x0a

	)

56 
	#SCC_WR0_SEL_WR11
 0x0b

	)

57 
	#SCC_WR0_SEL_WR12
 0x0c

	)

58 
	#SCC_WR0_SEL_WR13
 0x0d

	)

59 
	#SCC_WR0_SEL_WR14
 0x0e

	)

60 
	#SCC_WR0_SEL_WR15
 0x0f

	)

61 
	#SCC_WR0_SEL_RD0
 0x00

	)

62 
	#SCC_WR0_SEL_RD1
 0x01

	)

63 
	#SCC_WR0_SEL_RD2
 0x02

	)

64 
	#SCC_WR0_SEL_RD3
 0x03

	)

65 
	#SCC_WR0_SEL_RD4
 0x04

	)

66 
	#SCC_WR0_SEL_RD5
 0x05

	)

67 
	#SCC_WR0_SEL_RD6
 0x06

	)

68 
	#SCC_WR0_SEL_RD7
 0x07

	)

69 
	#SCC_WR0_SEL_RD8
 0x08

	)

70 
	#SCC_WR0_SEL_RD9
 0x09

	)

71 
	#SCC_WR0_SEL_RD10
 0x0a

	)

72 
	#SCC_WR0_SEL_RD11
 0x0b

	)

73 
	#SCC_WR0_SEL_RD12
 0x0c

	)

74 
	#SCC_WR0_SEL_RD13
 0x0d

	)

75 
	#SCC_WR0_SEL_RD14
 0x0e

	)

76 
	#SCC_WR0_SEL_RD15
 0x0f

	)

77 
	#SCC_WR0_NULL_CODE
 0x00

	)

78 
	#SCC_WR0_RST_INT
 0x10

	)

79 
	#SCC_WR0_SEND_ABORT
 0x18

	)

80 
	#SCC_WR0_EN_INT_RX
 0x20

	)

81 
	#SCC_WR0_RST_TX_INT
 0x28

	)

82 
	#SCC_WR0_ERR_RST
 0x30

	)

83 
	#SCC_WR0_RST_HI_IUS
 0x38

	)

84 
	#SCC_WR0_RST_RX_CRC
 0x40

	)

85 
	#SCC_WR0_RST_TX_CRC
 0x80

	)

86 
	#SCC_WR0_RST_TX_UND
 0xc0

	)

94 
	#SCC_WR1_EXT_INT_EN
 0x01

	)

95 
	#SCC_WR1_TX_INT_EN
 0x02

	)

96 
	#SCC_WR1_PARITY
 0x04

	)

97 
	#SCC_WR1_RX_INT_DIS
 0x00

	)

98 
	#SCC_WR1_RX_INT_FIR
 0x08

	)

99 
	#SCC_WR1_INT_ALL_RX
 0x10

	)

100 
	#SCC_WR1_RX_INT_SPE
 0x18

	)

101 
	#SCC_WR1_RDMA_RECTR
 0x20

	)

102 
	#SCC_WR1_RDMA_FUNC
 0x40

	)

103 
	#SCC_WR1_RDMA_EN
 0x80

	)

105 
	#SCC_ENABLE_ALL_INTR
 \

106 (
SCC_WR1_EXT_INT_EN
 | 
SCC_WR1_TX_INT_EN
 | 
SCC_WR1_INT_ALL_RX
)

	)

108 
	#SCC_DISABLE_ALL_INTR
 0x00

	)

110 
	#SCC_ENABLE_ALL_INTR_EXCEPT_TX
 \

111 (
SCC_WR1_EXT_INT_EN
 | 
SCC_WR1_INT_ALL_RX
)

	)

116 
	#SCC_WR3_RX_EN
 0x01

	)

117 
	#SCC_WR3_SYNC_CHAR
 0x02

	)

118 
	#SCC_WR3_ADR_SEARCH
 0x04

	)

119 
	#SCC_WR3_RX_CRC_EN
 0x08

	)

120 
	#SCC_WR3_ENTER_HUNT
 0x10

	)

121 
	#SCC_WR3_AUTO_EN
 0x20

	)

122 
	#SCC_WR3_RX_5_BITS
 0x00

	)

123 
	#SCC_WR3_RX_7_BITS
 0x40

	)

124 
	#SCC_WR3_RX_6_BITS
 0x80

	)

125 
	#SCC_WR3_RX_8_BITS
 0xc0

	)

130 
	#SCC_WR4_PAR_EN
 0x01

	)

131 
	#SCC_WR4_PAR_EVEN
 0x02

	)

132 
	#SCC_WR4_SYNC_EN
 0x00

	)

133 
	#SCC_WR4_1_STOP
 0x04

	)

134 
	#SCC_WR4_2_STOP
 0x0c

	)

135 
	#SCC_WR4_8_SYNC
 0x00

	)

136 
	#SCC_WR4_16_SYNC
 0x10

	)

137 
	#SCC_WR4_SDLC
 0x20

	)

138 
	#SCC_WR4_EXT_SYNC
 0x30

	)

139 
	#SCC_WR4_1_CLOCK
 0x00

	)

140 
	#SCC_WR4_16_CLOCK
 0x40

	)

141 
	#SCC_WR4_32_CLOCK
 0x80

	)

142 
	#SCC_WR4_64_CLOCK
 0xc0

	)

147 
	#SCC_WR5_TX_CRC_EN
 0x01

	)

148 
	#SCC_WR5_RTS
 0x02

	)

149 
	#SCC_WR5_SDLC
 0x04

	)

150 
	#SCC_WR5_TX_EN
 0x08

	)

151 
	#SCC_WR5_SEND_BRK
 0x10

	)

153 
	#SCC_WR5_TX_5_BITS
 0x00

	)

154 
	#SCC_WR5_TX_7_BITS
 0x20

	)

155 
	#SCC_WR5_TX_6_BITS
 0x40

	)

156 
	#SCC_WR5_TX_8_BITS
 0x60

	)

157 
	#SCC_WR5_DTR
 0x80

	)

171 
	#SCC_WR9_VIS
 0x01

	)

172 
	#SCC_WR9_NV
 0x02

	)

173 
	#SCC_WR9_DLC
 0x04

	)

174 
	#SCC_WR9_MIE
 0x08

	)

175 
	#SCC_WR9_STATUS_HI
 0x10

	)

176 
	#SCC_WR9_NO_RST
 0x00

	)

177 
	#SCC_WR9_CH_B_RST
 0x40

	)

178 
	#SCC_WR9_CH_A_RST
 0x80

	)

179 
	#SCC_WR9_HDWR_RST
 0xc0

	)

184 
	#SCC_WR10_6_BIT_SYNC
 0x01

	)

185 
	#SCC_WR10_LOOP_MODE
 0x02

	)

186 
	#SCC_WR10_ABORT_UND
 0x04

	)

187 
	#SCC_WR10_MARK_IDLE
 0x08

	)

188 
	#SCC_WR10_ACT_POLL
 0x10

	)

189 
	#SCC_WR10_NRZ
 0x00

	)

190 
	#SCC_WR10_NRZI
 0x20

	)

191 
	#SCC_WR10_FM1
 0x40

	)

192 
	#SCC_WR10_FM0
 0x60

	)

193 
	#SCC_WR10_CRC_PRESET
 0x80

	)

198 
	#SCC_WR11_OUT_XTAL
 0x00

	)

199 
	#SCC_WR11_OUT_TX_CLK
 0x01

	)

200 
	#SCC_WR11_OUT_BR_GEN
 0x02

	)

201 
	#SCC_WR11_OUT_DPLL
 0x03

	)

202 
	#SCC_WR11_TRXC_OI
 0x04

	)

203 
	#SCC_WR11_TX_RTXC
 0x00

	)

204 
	#SCC_WR11_TX_TRXC
 0x08

	)

205 
	#SCC_WR11_TX_BR_GEN
 0x10

	)

206 
	#SCC_WR11_TX_DPLL
 0x18

	)

207 
	#SCC_WR11_RX_RTXC
 0x00

	)

208 
	#SCC_WR11_RX_TRXC
 0x20

	)

209 
	#SCC_WR11_RX_BR_GEN
 0x40

	)

210 
	#SCC_WR11_RX_DPLL
 0x60

	)

211 
	#SCC_WR11_RTXC_XTAL
 0x80

	)

222 
	#SCC_WR14_BR_EN
 0x01

	)

223 
	#SCC_WR14_BR_SRC
 0x02

	)

224 
	#SCC_WR14_DTR_FUNC
 0x04

	)

225 
	#SCC_WR14_AUTO_ECHO
 0x08

	)

226 
	#SCC_WR14_LCL_LOOP
 0x10

	)

227 
	#SCC_WR14_NULL
 0x00

	)

228 
	#SCC_WR14_SEARCH
 0x20

	)

229 
	#SCC_WR14_RST_CLK
 0x40

	)

230 
	#SCC_WR14_DIS_DPLL
 0x60

	)

231 
	#SCC_WR14_SRC_BR
 0x80

	)

232 
	#SCC_WR14_SRC_RTXC
 0xa0

	)

233 
	#SCC_WR14_FM_MODE
 0xc0

	)

234 
	#SCC_WR14_NRZI
 0xe0

	)

239 
	#SCC_WR15_ZERO_CNT
 0x02

	)

240 
	#SCC_WR15_CD_IE
 0x08

	)

241 
	#SCC_WR15_SYNC_IE
 0x10

	)

242 
	#SCC_WR15_CTS_IE
 0x20

	)

243 
	#SCC_WR15_TX_UND_IE
 0x40

	)

244 
	#SCC_WR15_BREAK_IE
 0x80

	)

249 
	#SCC_RR0_RX_AVAIL
 0x01

	)

250 
	#SCC_RR0_ZERO_CNT
 0x02

	)

251 
	#SCC_RR0_TX_EMPTY
 0x04

	)

252 
	#SCC_RR0_CD
 0x08

	)

253 
	#SCC_RR0_SYNC
 0x10

	)

254 
	#SCC_RR0_CTS
 0x20

	)

255 
	#SCC_RR0_TX_UND
 0x40

	)

256 
	#SCC_RR0_BREAK
 0x80

	)

260 
	#SCC_RR1_ALL_SENT
 0x01

	)

261 
	#SCC_RR1_RES_CD_2
 0x02

	)

262 
	#SCC_RR1_RES_CD_1
 0x01

	)

263 
	#SCC_RR1_RES_CD_0
 0x08

	)

264 
	#SCC_RR1_PAR_ERR
 0x10

	)

265 
	#SCC_RR1_RX_OV_ERR
 0x20

	)

266 
	#SCC_RR1_CRC_ERR
 0x40

	)

267 
	#SCC_RR1_END_FRAME
 0x80

	)

275 
	#SCC_RR3_B_EXT_IP
 0x01

	)

276 
	#SCC_RR3_B_TX_IP
 0x02

	)

277 
	#SCC_RR3_B_RX_IP
 0x04

	)

278 
	#SCC_RR3_A_EXT_IP
 0x08

	)

279 
	#SCC_RR3_A_TX_IP
 0x10

	)

280 
	#SCC_RR3_A_RX_IP
 0x20

	)

288 
	#SCC_RR10_ON_LOOP
 0x02

	)

289 
	#SCC_RR10_LOOP_SEND
 0x10

	)

290 
	#SCC_RR10_2_CLK_MIS
 0x40

	)

291 
	#SCC_RR10_1_CLK_MIS
 0x80

	)

302 
	#SCC_RR15_ZERO_CNT
 0x02

	)

303 
	#SCC_RR15_CD_IE
 0x08

	)

304 
	#SCC_RR15_SYNC_IE
 0x10

	)

305 
	#SCC_RR15_CTS_IE
 0x20

	)

306 
	#SCC_RR15_TX_UND_IE
 0x40

	)

307 
	#SCC_RR15_BREAK_IE
 0x80

	)

309 
	s_z85c30_c⁄ãxt


311 
uöt8_t
 
ucModemCål
;

312 } 
	tz85c30_c⁄ãxt
;

321 
	#Z85C30_Baud
–
_˛ock
, 
_baud_øã
 ) \

322 –((
_˛ock
Ë/–16 * 2 * 
_baud_øã
)Ë- 2)

	)

324 
	#Z85C30_Sètus_Is_RX_ch¨a˘î_avaûabÀ
(
_°©us
) \

325 ((
_°©us
Ë& 
SCC_RR0_RX_AVAIL
)

	)

327 
	#Z85C30_Sètus_Is_TX_buf„r_em±y
(
_°©us
) \

328 ((
_°©us
Ë& 
SCC_RR0_TX_EMPTY
)

	)

330 
	#Z85C30_Sètus_Is_CTS_as£πed
(
_°©us
) \

331 ((
_°©us
Ë& 
SCC_RR0_CTS
)

	)

333 
	#Z85C30_Sètus_Is_bªak_ab‹t
(
_°©us
) \

334 ((
_°©us
Ë& 
SCC_RR0_BREAK
)

	)

340 
Z85C30_STATIC
 
z85c30_öôülize_p‹t
(

341 
mö‹


344 
Z85C30_STATIC
 
z85c30_öô
(
mö‹
);

346 
Z85C30_STATIC
 
z85c30_£t_©åibuãs
(

347 
mö‹
,

348 c⁄° 
ãrmios
 *
t


351 
Z85C30_STATIC
 
z85c30_›í
(

352 
maj‹
,

353 
mö‹
,

354 * 
¨g


357 
Z85C30_STATIC
 
z85c30_˛o£
(

358 
maj‹
,

359 
mö‹
,

360 * 
¨g


363 
Z85C30_STATIC
 
z85c30_wrôe_pﬁÀd
(

364 
mö‹
,

365 
cCh¨


368 
Z85C30_STATIC
 
z85c30_as£π_RTS
(

369 
mö‹


372 
Z85C30_STATIC
 
z85c30_√g©e_RTS
(

373 
mö‹


376 
Z85C30_STATIC
 
z85c30_as£π_DTR
(

377 
mö‹


380 
Z85C30_STATIC
 
z85c30_√g©e_DTR
(

381 
mö‹


384 
Z85C30_STATIC
 
z85c30_öôülize_öãºu±s
(
mö‹
);

386 
Z85C30_STATIC
 
ssize_t
 
z85c30_wrôe_suµ‹t_öt
(

387 
mö‹
,

388 c⁄° *
buf
,

389 
size_t
 
Àn


392 
Z85C30_STATIC
 
ssize_t
 
z85c30_wrôe_suµ‹t_pﬁÀd
(

393 
mö‹
,

394 c⁄° *
buf
,

395 
size_t
 
Àn


398 
Z85C30_STATIC
 
z85c30_öbyã_n⁄blockög_pﬁÀd
(

399 
mö‹


402 
Z85C30_STATIC
 
z85c30_íabÀ_öãºu±s
(

403 
mö‹
,

404 
öãºu±_mask


407 
Z85C30_STATIC
 
z85c30_¥o˚ss
(

408 
mö‹
,

409 
uöt8_t
 
ucI¡Píd


412 
Z85C30_STATIC
 
πems_i§
 
z85c30_i§
(

413 
πems_ve˘‹_numbî
 
ve˘‹


416 #ifde‡
__˝lu•lus


	@src/libchip/serial/z85c30_reg.c

15 
	~<πems.h
>

17 
	~<libchù/z85c30.h
>

19 #i‚de‡
_Z85C30_MULTIPLIER


20 
	#_Z85C30_MULTIPLIER
 1

	)

21 
	#_Z85C30_NAME
(
_X
Ë
	)
_X

22 
	#_Z85C30_TYPE
 
uöt8_t


	)

29 
uöt8_t
 
	$_Z85C30_NAME
(
z85c30_gë_ªgi°î
)(

30 
uöçå_t
 
ulCålP‹t
,

31 
uöt8_t
 
ucRegNum


34 
_Z85C30_TYPE
 *
p‹t
;

35 
uöt8_t
 
d©a
;

36 
πems_öãºu±_Àvñ
 
Àvñ
;

38 
p‹t
 = (
_Z85C30_TYPE
 *)
ulCålP‹t
;

40 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

42 if(
ucRegNum
) {

43 *
p‹t
 = 
ucRegNum
;

45 
d©a
 = *
p‹t
;

46 
	`πems_öãºu±_íabÀ
(
Àvñ
);

48  
d©a
;

49 
	}
}

55 
	$_Z85C30_NAME
(
z85c30_£t_ªgi°î
)(

56 
uöçå_t
 
ulCålP‹t
,

57 
uöt8_t
 
ucRegNum
,

58 
uöt8_t
 
ucD©a


61 
_Z85C30_TYPE
 *
p‹t
;

62 
πems_öãºu±_Àvñ
 
Àvñ
;

64 
p‹t
 = (
_Z85C30_TYPE
 *)
ulCålP‹t
;

66 
	`πems_öãºu±_dißbÀ
(
Àvñ
);

67 if(
ucRegNum
) {

68 *
p‹t
 = 
ucRegNum
;

70 *
p‹t
 = 
ucD©a
;

71 
	`πems_öãºu±_íabÀ
(
Àvñ
);

72 
	}
}

	@src/libchip/shmdr/addlq.c

19 
	~<πems.h
>

20 
	~"shm_drivî.h
"

22 
	$Shm_Locked_queue_Add
(

23 
Shm_Locked_queue_C⁄åﬁ
 *
lq_cb
,

24 
Shm_Envñ›e_c⁄åﬁ
 *
ecb


27 
uöt32_t
 
ödex
;

29 
ecb
->
√xt
 = 
Shm_Locked_queue_End_of_li°
;

30 
ecb
->
queue
 = 
lq_cb
->
ow√r
;

31 
ödex
 = 
ecb
->index;

33 
	`Shm_Lock
–
lq_cb
 );

34 i‡–
	`Shm_C⁄vît
(
lq_cb
->
‰⁄t
Ë!
Shm_Locked_queue_End_of_li°
 )

35 
Shm_Envñ›es
[ 
	`Shm_C⁄vît
(
lq_cb
->
ª¨
Ë].
√xt
 = 
ödex
;

37 
lq_cb
->
‰⁄t
 = 
ödex
;

38 
lq_cb
->
ª¨
 = 
ödex
;

39 
	`Shm_U∆ock
–
lq_cb
 );

40 
	}
}

	@src/libchip/shmdr/cnvpkt.c

24 
	~<πems.h
>

25 
	~"shm_drivî.h
"

27 
	$Shm_C⁄vît_∑ckë
(

28 
πems_∑ckë_¥efix
 *
∑ckë


31 
uöt32_t
 *
pkt
, 
i
;

33 
pkt
 = (
uöt32_t
*Ë
∑ckë
;

34  
i
=
RTEMS_MINIMUN_HETERO_CONVERSION
 ; i ; i--, 
pkt
++ )

35 *
pkt
 = 
	`CPU_sw≠_u32
( *pkt );

37  
i
=
∑ckë
->
to_c⁄vît
 ; i ; i--, 
pkt
++ )

38 *
pkt
 = 
	`CPU_sw≠_u32
( *pkt );

39 
	}
}

	@src/libchip/shmdr/dump.c

17 
	~<πems.h
>

18 
	~<°dio.h
>

19 
	~<öây≥s.h
>

20 
	~<πems/b•Io.h
>

22 
	~"shm_drivî.h
"

25 
	$Shm_Pröt_°©i°ics
()

27 
uöt32_t
 
ticks
;

28 
uöt32_t
 
ticks_≥r_£c⁄d
;

29 
uöt32_t
 
£c⁄ds
;

30 
∑ckës_≥r_£c⁄d
;

32 
ticks
 = 
	`πems_˛ock_gë_ticks_sö˚_boŸ
();

33 
ticks_≥r_£c⁄d
 = 
	`πems_˛ock_gë_ticks_≥r_£c⁄d
();

35 
£c⁄ds
 = 
ticks
 / 
ticks_≥r_£c⁄d
;

36 i‡–
£c⁄ds
 == 0 )

37 
£c⁄ds
 = 1;

39 
∑ckës_≥r_£c⁄d
 = 
Shm_Re˚ive_mesßge_cou¡
 / 
£c⁄ds
;

40 i‡–(
Shm_Re˚ive_mesßge_cou¡
 % 
£c⁄ds
) >= (seconds / 2) )

41 
∑ckës_≥r_£c⁄d
++;

43 
	`¥ötk
–"\n\nSHMDR STATISTICS (NODE %" 
PRId32
 ")\n",

44 
Mu…ùro˚ssög_c⁄figuøti⁄
.
node
 );

45 
	`¥ötk
–"TICKS SINCE BOOT = %" 
PRId32
 "\n", 
ticks
 );

46 
	`¥ötk
–"TICKS PER SECOND = %" 
PRId32
 "\n", 
ticks_≥r_£c⁄d
 );

47 
	`¥ötk
–"ISRs=%" 
PRId32
 "\n", 
Shm_I¡îru±_cou¡
 );

48 
	`¥ötk
–"RECV=%" 
PRId32
 "\n", 
Shm_Re˚ive_mesßge_cou¡
 );

49 
	`¥ötk
–"NULL=%" 
PRId32
 "\n", 
Shm_NuŒ_mesßge_cou¡
 );

50 
	`¥ötk
–"PKTS/SEC=%" 
PRId32
 "\n", 
∑ckës_≥r_£c⁄d
 );

51 
	}
}

	@src/libchip/shmdr/fatal.c

18 
	~<πems.h
>

19 
	~"shm_drivî.h
"

21 
	$MPCI_F©Æ
(

22 
I¡î«l_îr‹s_Sour˚
 
sour˚
,

23 
boﬁ
 
is_öã∫Æ
,

24 
uöt32_t
 
îr‹


35 
Shm_Loˇl_node_°©us
->
îr‹
 = 
	`Shm_C⁄vît
(error);

36 
	}
}

	@src/libchip/shmdr/getlq.c

21 
	~<πems.h
>

22 
	~<shm_drivî.h
>

24 
Shm_Envñ›e_c⁄åﬁ
 *
	$Shm_Locked_queue_Gë
(

25 
Shm_Locked_queue_C⁄åﬁ
 *
lq_cb


28 
Shm_Envñ›e_c⁄åﬁ
 *
tmp_ecb
;

29 
uöt32_t
 
tmp‰⁄t
;

31 
tmp_ecb
 = 
NULL
;

32 
	`Shm_Lock
–
lq_cb
 );

34 
tmp‰⁄t
 = 
	`Shm_C⁄vît
(
lq_cb
->
‰⁄t
);

35 i‡–
tmp‰⁄t
 !
Shm_Locked_queue_End_of_li°
 ) {

36 
tmp_ecb
 = &
Shm_Envñ›es
[ 
tmp‰⁄t
 ];

37 
lq_cb
->
‰⁄t
 = 
tmp_ecb
->
√xt
;

38 i‡–
tmp_ecb
->
√xt
 =
Shm_Locked_queue_End_of_li°
 )

39 
lq_cb
->
ª¨
 = 
Shm_Locked_queue_End_of_li°
;

40 
tmp_ecb
->
√xt
 = 
Shm_Locked_queue_NŸ_⁄_li°
;

43 
	`Shm_U∆ock
–
lq_cb
 );

44 –
tmp_ecb
 );

45 
	}
}

	@src/libchip/shmdr/getpkt.c

20 
	~<πems.h
>

21 
	~"shm_drivî.h
"

23 
πems_mpci_íåy
 
	$Shm_Gë_∑ckë
(

24 
πems_∑ckë_¥efix
 **
∑ckë


27 
Shm_Envñ›e_c⁄åﬁ
 *
ecb
;

29 
ecb
 = 
	`Shm_AŒoˇã_ívñ›e
();

30 i‡–!
ecb
 )

31 
	`πems_Áèl_îr‹_occuºed
 ( 
SHM_NO_FREE_PKTS
 );

32 *
∑ckë
 = 
	`Shm_Envñ›e_c⁄åﬁ_to_∑ckë_¥efix_poöãr
–
ecb
 );

33 
	}
}

	@src/libchip/shmdr/init.c

18 
	#_SHM_INIT


	)

20 
	~<πems.h
>

21 
	~<shm_drivî.h
>

23 
	~<°rög.h
>

24 
	~<°dlib.h
>

25 
	~<as£π.h
>

32 
πems_exãnsi⁄s_èbÀ
 
	gMPCI_Shm_exãnsi⁄s
;

38 
πems_mpci_íåy
 
	$Shm_Inôüliz©i⁄
( )

41 
uöt32_t
 
i
, 
Æl_öôülized
;

42 
uöt32_t
 
öãºu±_ˇu£
, 
öãºu±_vÆue
;

43 *
öãºu±_addªss
;

44 
Shm_Node_°©us_c⁄åﬁ
 *
nscb
;

45 
uöt32_t
 
exãnsi⁄_id
;

46 
uöt32_t
 
ªmaöög_mem‹y
;

47 
uöt32_t
 
loˇl_node
;

49 
loˇl_node
 = 
_C⁄figuøti⁄_MP_èbÀ
->
node
;

51 
	`Shm_Gë_c⁄figuøti⁄
–
loˇl_node
, &
Shm_C⁄figuøti⁄
 );

53 
Shm_I¡îru±_èbÀ
 = (
Shm_I¡îru±_öf‹m©i⁄
 *Ë
	`mÆloc
(

54 (
Shm_I¡îru±_öf‹m©i⁄
Ë* (
SHM_MAXIMUM_NODES
 + 1)

57 
	`as£π
–
Shm_I¡îru±_èbÀ
 );

59 
Shm_Re˚ive_mesßge_cou¡
 = 0;

60 
Shm_NuŒ_mesßge_cou¡
 = 0;

61 
Shm_I¡îru±_cou¡
 = 0;

67 
Shm_Pídög_öôüliz©i⁄
 =

68 
	`Shm_C⁄vît
(
	`πems_buûd_«me
( 'P', 'E', 'N', 'D' ));

69 
Shm_Inôüliz©i⁄_com∂ëe
 =

70 
	`Shm_C⁄vît
(
	`πems_buûd_«me
( 'C', 'O', 'M', 'P' ));

71 
Shm_A˘ive_node
 =

72 
	`Shm_C⁄vît
(
	`πems_buûd_«me
( 'A', 'C', 'T', 'V' ));

78 
Shm_Locked_queue_End_of_li°
 = 
	`Shm_C⁄vît
( 0xffffffff );

79 
Shm_Locked_queue_NŸ_⁄_li°
 = 
	`Shm_C⁄vît
( 0xfffffffe );

88 
Shm_Node_°©u£s
 = (
Shm_Node_°©us_c⁄åﬁ
 *Ë
START_NS_CBS
;

89 
Shm_Locked_queues
 = (
Shm_Locked_queue_C⁄åﬁ
 *Ë
START_LQ_CBS
;

90 
Shm_Envñ›es
 = (
Shm_Envñ›e_c⁄åﬁ
 *Ë
START_ENVELOPES
;

97 
ªmaöög_mem‹y
 =

98 ((*)
Shm_C⁄figuøti⁄
->
ba£
 + Shm_C⁄figuøti⁄->
Àngth
) -

99 ((*)
Shm_Envñ›es
);

101 
Shm_Maximum_ívñ›es
 = 
ªmaöög_mem‹y
 / –
Shm_Envñ›e_c⁄åﬁ
 );

102 
Shm_Maximum_ívñ›es
 -= 1;

110 
Shm_Loˇl_ª˚ive_queue
 = &
Shm_Locked_queues
[ 
loˇl_node
 ];

111 
Shm_Loˇl_node_°©us
 = &
Shm_Node_°©u£s
[ 
loˇl_node
 ];

119 
öãºu±_addªss
 =

120 (*Ë
	`Shm_C⁄vît
–(
uöt32_t
)
Shm_C⁄figuøti⁄
->
I¡r
.
addªss
 );

121 
öãºu±_vÆue
 = 
	`Shm_C⁄vît
–
Shm_C⁄figuøti⁄
->
I¡r
.
vÆue
 );

122 
öãºu±_ˇu£
 = 
	`Shm_C⁄vît
–
Shm_C⁄figuøti⁄
->
I¡r
.
Àngth
 );

124 i‡–
Shm_C⁄figuøti⁄
->
pﬁl_öå
 =
POLLED_MODE
 ) 
	`Shm_ö°Æl_timî
();

125 
	`Shm_£tvec
();

127 i‡–
	`Shm_Is_ma°î_node
() ) {

133 (Ë
	`mem£t
(

134 (*Ë
Shm_C⁄figuøti⁄
->
ba£
,

136 
Shm_C⁄figuøti⁄
->
Àngth


146 
	`Shm_Locked_queue_Inôülize
–
FREE_ENV_CB
, 
FREE_ENV_POOL
 );

148  
i
=
SHM_FIRST_NODE
 ; i<=
SHM_MAXIMUM_NODES
 ; i++ ) {

149 
	`Shm_Inôülize_ª˚ive_queue
–
i
 );

151 
Shm_Node_°©u£s
[ 
i
 ].
°©us
 = 
Shm_Pídög_öôüliz©i⁄
;

152 
Shm_Node_°©u£s
[ 
i
 ].
îr‹
 = 0;

160  
i
=0 ; i<
Shm_Maximum_ívñ›es
 ; i++ ) {

161 
Shm_Envñ›es
[ 
i
 ].
ödex
 = 
	`Shm_C⁄vît
(i);

162 
	`Shm_Fªe_ívñ›e
–&
Shm_Envñ›es
[ 
i
 ] );

170 
Shm_Loˇl_node_°©us
->
öt_addªss
 = (
uöt32_t
Ë
öãºu±_addªss
;

171 
Shm_Loˇl_node_°©us
->
öt_vÆue
 = 
öãºu±_vÆue
;

172 
Shm_Loˇl_node_°©us
->
öt_Àngth
 = 
öãºu±_ˇu£
;

174 
Shm_Loˇl_node_°©us
->
°©us
 = 
Shm_Inôüliz©i⁄_com∂ëe
;

181 
Æl_öôülized
 = 1;

183  
i
 = 
SHM_FIRST_NODE
 ; i <
SHM_MAXIMUM_NODES
 ; i++ )

184 i‡–
Shm_Node_°©u£s
[ 
i
 ].
°©us
 !
Shm_Inôüliz©i⁄_com∂ëe
 )

185 
Æl_öôülized
 = 0;

187 }  
Æl_öôülized
 == 0 );

193  
i
 = 
SHM_FIRST_NODE
 ; i <
SHM_MAXIMUM_NODES
 ; i++ )

194 
Shm_Node_°©u£s
[ 
i
 ].
°©us
 = 
Shm_A˘ive_node
;

206 
Shm_Loˇl_node_°©us
->
°©us
 = 
Shm_Pídög_öôüliz©i⁄
;

210 i‡–
Shm_Loˇl_node_°©us
->
°©us
 =
Shm_Pídög_öôüliz©i⁄
 ) {

217 
Shm_Loˇl_node_°©us
->
öt_addªss
 =

218 (
uöt32_t
Ë
öãºu±_addªss
;

219 
Shm_Loˇl_node_°©us
->
öt_vÆue
 = 
öãºu±_vÆue
;

220 
Shm_Loˇl_node_°©us
->
öt_Àngth
 = 
öãºu±_ˇu£
;

222 
Shm_Loˇl_node_°©us
->
°©us
 = 
Shm_Inôüliz©i⁄_com∂ëe
;

224 }  
Shm_Loˇl_node_°©us
->
°©us
 !
Shm_A˘ive_node
 ) ;

231  
i
 = 
SHM_FIRST_NODE
 ; i <
SHM_MAXIMUM_NODES
 ; i++ ) {

232 
nscb
 = &
Shm_Node_°©u£s
[ 
i
 ];

234 
Shm_I¡îru±_èbÀ
[
i
].
addªss
 = 
	`Shm_C⁄vît_addªss
(

235 (*)
	`Shm_C⁄vît
(((
vﬁ_u32
Ë
nscb
->
öt_addªss
))

237 
Shm_I¡îru±_èbÀ
[
i
].
vÆue
 = 
	`Shm_C⁄vît
–
nscb
->
öt_vÆue
 );

238 
Shm_I¡îru±_èbÀ
[
i
].
Àngth
 = 
	`Shm_C⁄vît
–
nscb
->
öt_Àngth
 );

241 
MPCI_Shm_exãnsi⁄s
.
Áèl
 = 
MPCI_F©Æ
;

243 (Ë
	`πems_exãnsi⁄_¸óã
(

244 
	`πems_buûd_«me
( 'M', 'P', 'E', 'X' ),

245 &
MPCI_Shm_exãnsi⁄s
,

246 &
exãnsi⁄_id


248 
	}
}

	@src/libchip/shmdr/initlq.c

20 
	~<πems.h
>

21 
	~"shm_drivî.h
"

23 
	$Shm_Locked_queue_Inôülize
(

24 
Shm_Locked_queue_C⁄åﬁ
 *
lq_cb
,

25 
uöt32_t
 
ow√r


28 
	`Shm_Inôülize_lock
–
lq_cb
 );

29 
lq_cb
->
‰⁄t
 = 
Shm_Locked_queue_End_of_li°
;

30 
lq_cb
->
ª¨
 = 
Shm_Locked_queue_End_of_li°
;

31 
lq_cb
->
ow√r
 = 
	`Shm_C⁄vît
(owner);

32 
	}
}

	@src/libchip/shmdr/intr.c

23 
	~<πems.h
>

24 
	~"shm_drivî.h
"

26 
	$Shm_Cau£_öãºu±
(

27 
uöt32_t
 
node


30 
Shm_I¡îru±_öf‹m©i⁄
 *
öå
;

31 
uöt8_t
 *
u8
;

32 
uöt16_t
 *
u16
;

33 
uöt32_t
 *
u32
;

34 
uöt32_t
 
vÆue
;

36 
öå
 = &
Shm_I¡îru±_èbÀ
[
node
];

37 
vÆue
 = 
öå
->value;

39  
öå
->
Àngth
 ) {

40 
NO_INTERRUPT
:

42 
BYTE
:

43 
u8
 = (
uöt8_t
*)
öå
->
addªss
;

44 *
u8
 = (
uöt8_t
Ë
vÆue
;

46 
WORD
:

47 
u16
 = (
uöt16_t
*)
öå
->
addªss
;

48 *
u16
 = (
uöt16_t
Ë
vÆue
;

50 
LONG
:

51 
u32
 = (
uöt32_t
*)
öå
->
addªss
;

52 *
u32
 = (
uöt32_t
Ë
vÆue
;

55 
	}
}

	@src/libchip/shmdr/mpci.h

15 #i‚de‡
__SHM_MPCI_h


16 
	#__SHM_MPCI_h


	)

18 #ifde‡
__˝lu•lus


22 
	~<shm_drivî.h
>

24 
	#MPCI_Inôüliz©i⁄
–
_c⁄figuøti⁄
 ) \

25 
	`Shm_Inôüliz©i⁄
–
_c⁄figuøti⁄
 )

	)

27 
	#MPCI_Gë_∑ckë
–
_the_∑ckë
 ) \

28 
	`Shm_Gë_∑ckë
–
_the_∑ckë
 )

	)

30 
	#MPCI_Rëu∫_∑ckë
–
_the_∑ckë
 ) \

31 
	`Shm_Rëu∫_∑ckë
–
_the_∑ckë
 )

	)

33 
	#MPCI_Re˚ive_∑ckë
–
_the_∑ckë
 ) \

34 
	`Shm_Re˚ive_∑ckë
–
_the_∑ckë
 )

	)

36 
	#MPCI_Síd_∑ckë
–
_de°ö©i⁄
, 
_the_∑ckë
 ) \

37 
	`Shm_Síd_∑ckë
–
_de°ö©i⁄
, 
_the_∑ckë
 )

	)

44 
	#MPCI_E«bÀ_°©i°ics
()

	)

46 
	#MPCI_Pröt_°©i°ics
() \

47 
	`Shm_Pröt_°©i°ics
()

	)

51 #ifde‡
__˝lu•lus


	@src/libchip/shmdr/mpisr.c

11 
	~<πems.h
>

12 
	~"shm_drivî.h
"

14 
	$Shm_i§
()

16 
Shm_I¡îru±_cou¡
 += 1;

17 
	`πems_mu…ùro˚ssög_™noun˚
();

18 
	}
}

	@src/libchip/shmdr/poll.c

13 
	~<πems.h
>

14 
	~<πems/sc‹e/sys°©e.h
>

15 
	~<πems/libio.h
>

17 
	~<as£π.h
>

19 
	~"shm_drivî.h
"

21 
πems_timî_£rvi˚_routöe
 
	$Shm_Pﬁl_TSR
(

22 
πems_id
 
id
,

23 *
ign‹ed_addªss


26 
uöt32_t
 
tmp‰⁄t
;

31 i‡(!
	`_Sy°em_°©e_Is_up
(
	`_Sy°em_°©e_Gë
()))

34 
tmp‰⁄t
 = 
Shm_Loˇl_ª˚ive_queue
->
‰⁄t
;

35 i‡–
	`Shm_C⁄vît
(
tmp‰⁄t
Ë!
Shm_Locked_queue_End_of_li°
 ) {

36 
	`πems_mu…ùro˚ssög_™noun˚
();

37 
Shm_I¡îru±_cou¡
++;

40 (Ë
	`πems_timî_ª£t
–
id
 );

41 
	}
}

43 
	$Shm_ö°Æl_timî
()

45 
πems_id
 
id
;

46 
πems_°©us_code
 
°©us
;

48 
°©us
 = 
	`πems_timî_¸óã
–
	`πems_buûd_«me
–'S', 'H', 'P', 'L' ), &
id
 );

49 
	`as£π
–!
°©us
 );

51 
°©us
 = 
	`πems_timî_fúe_a·î
–
id
, 1, 
Shm_Pﬁl_TSR
, 
NULL
 );

52 
	`as£π
–!
°©us
 );

53 
	}
}

	@src/libchip/shmdr/receive.c

22 
	~<πems.h
>

23 
	~"shm_drivî.h
"

25 
πems_mpci_íåy
 
	$Shm_Re˚ive_∑ckë
(

26 
πems_∑ckë_¥efix
 **
∑ckë


29 
Shm_Envñ›e_c⁄åﬁ
 *
ecb
;

31 
ecb
 = 
	`Shm_Locked_queue_Gë
–
Shm_Loˇl_ª˚ive_queue
 );

32 i‡–
ecb
 ) {

33 *(
∑ckë
Ë
	`Shm_Envñ›e_c⁄åﬁ_to_∑ckë_¥efix_poöãr
–
ecb
 );

34 i‡–
ecb
->
PªambÀ
.
ídün
 !
Shm_C⁄figuøti⁄
->
f‹m©
 )

35 
	`Shm_C⁄vît_∑ckë
–*
∑ckë
 );

36 
Shm_Re˚ive_mesßge_cou¡
++;

38 *(
∑ckë
Ë
NULL
;

39 
Shm_NuŒ_mesßge_cou¡
++;

41 
	}
}

	@src/libchip/shmdr/retpkt.c

20 
	~<πems.h
>

21 
	~"shm_drivî.h
"

23 
πems_mpci_íåy
 
	$Shm_Rëu∫_∑ckë
(

24 
πems_∑ckë_¥efix
 *
∑ckë


27 
	`Shm_Fªe_ívñ›e
–
	`Shm_Packë_¥efix_to_ívñ›e_c⁄åﬁ_poöãr
(
∑ckë
) );

28 
	}
}

	@src/libchip/shmdr/send.c

22 
	~<πems.h
>

23 
	~"shm_drivî.h
"

25 
	spkt_˝y
 {

26 
uöt32_t
 
	m∑ckë
[
MAX_PACKET_SIZE
/4];

29 
πems_mpci_íåy
 
	$Shm_Síd_∑ckë
(

30 
uöt32_t
 
node
,

31 
πems_∑ckë_¥efix
 *
∑ckë


34 
Shm_Envñ›e_c⁄åﬁ
 *
ecb
, *
tmp_ecb
;

35 
uöt32_t
 
¬um
;

37 
ecb
 = 
	`Shm_Packë_¥efix_to_ívñ›e_c⁄åﬁ_poöãr
–
∑ckë
 );

38 i‡–
node
 ) {

39 
	`Shm_Buûd_¥ómbÀ
–
ecb
, 
node
 );

40 
	`Shm_Buûd_po°ambÀ
–
ecb
 );

41 
	`Shm_Aµíd_to_ª˚ive_queue
–
node
, 
ecb
 );

42 (*
Shm_C⁄figuøti⁄
->
ˇu£_öå
)–
node
 );

45  
¬um
 = 
SHM_FIRST_NODE
 ;Çnum <
SHM_MAXIMUM_NODES
 ;Çnum++ )

46 i‡–
_C⁄figuøti⁄_MP_èbÀ
->
node
 !
¬um
 ) {

47 
tmp_ecb
 = 
	`Shm_AŒoˇã_ívñ›e
();

48 i‡–!
tmp_ecb
 )

49 
	`πems_Áèl_îr‹_occuºed
–
SHM_NO_FREE_PKTS
 );

50 
	`Shm_Buûd_¥ómbÀ
–
tmp_ecb
, 
¬um
 );

51 *((
pkt_˝y
 *)
tmp_ecb
->
∑ckë
) = *((pkt_cpy *)packet);

52 
	`Shm_Buûd_po°ambÀ
–
tmp_ecb
 );

53 
	`Shm_Aµíd_to_ª˚ive_queue
–
¬um
, 
tmp_ecb
 );

54 (*
Shm_C⁄figuøti⁄
->
ˇu£_öå
)–
¬um
 );

56 
	`Shm_Fªe_ívñ›e
–
ecb
 );

58 
	}
}

	@src/libchip/shmdr/shm_driver.h

17 #i‚de‡
__SHM_h


18 
	#__SHM_h


	)

20 
	~<πems/˛ockdrv.h
>

22 #ifde‡
__˝lu•lus


90 
	#NEUTRAL_BIG


	)

92 #ifde‡
NEUTRAL_BIG


93 
	#SHM_BIG
 0x00000001

	)

94 
	#SHM_LITTLE
 0x10000000

	)

97 #ifde‡
NEUTRAL_LITTLE


98 
	#SHM_BIG
 0x01000000

	)

99 
	#SHM_LITTLE
 0x00000010

	)

119 #i‡
deföed
(
__mc68000__
)

120 
	#SHM_LOCK_VALUE
 0x80000000

	)

121 
	#SHM_UNLOCK_VALUE
 0

	)

122 
	#SHM_LOCK_VALUE
 0x80000000

	)

123 
	#SHM_UNLOCK_VALUE
 0

	)

124 #ñi‡
deföed
(
__i386__
)

125 
	#SHM_LOCK_VALUE
 0x80000000

	)

126 
	#SHM_UNLOCK_VALUE
 0

	)

127 #ñi‡
deföed
(
__mùs__
)

128 
	#SHM_LOCK_VALUE
 0x80000000

	)

129 
	#SHM_UNLOCK_VALUE
 0

	)

130 #ñi‡
deföed
(
__hµa__
)

131 
	#SHM_LOCK_VALUE
 0

	)

132 
	#SHM_UNLOCK_VALUE
 1

	)

133 #ñi‡
deföed
(
__PPC__
)

134 
	#SHM_LOCK_VALUE
 1

	)

135 
	#SHM_UNLOCK_VALUE
 0

	)

136 #ñi‡
deföed
(
__unix__
)

137 
	#SHM_LOCK_VALUE
 0

	)

138 
	#SHM_UNLOCK_VALUE
 1

	)

139 #ñi‡
deföed
(
_AM29K
)

140 
	#SHM_LOCK_VALUE
 0

	)

141 
	#SHM_UNLOCK_VALUE
 1

	)

142 #ñi‡
deföed
(
__nios2__
)

143 
	#SHM_LOCK_VALUE
 1

	)

144 
	#SHM_UNLOCK_VALUE
 0

	)

145 #ñi‡
deföed
(
__•¨c__
)

146 
	#SHM_LOCK_VALUE
 1

	)

147 
	#SHM_UNLOCK_VALUE
 0

	)

148 #ñi‡
deföed
(
no_˝u
)

149 
	#SHM_LOCK_VALUE
 1

	)

150 
	#SHM_UNLOCK_VALUE
 0

	)

155 
	#Shm_C⁄vît
–
vÆue
 ) \

156 ((
Shm_C⁄figuøti⁄
->
c⁄vît
) ? \

157 (*
Shm_C⁄figuøti⁄
->
c⁄vît
)(
vÆue
Ë: (vÆue))

	)

161 
	#SHM_MASTER
 1

	)

162 
	#SHM_FIRST_NODE
 1

	)

166 
	#KILOBYTE
 (1024)

	)

167 
	#MEGABYTE
 (1024*1024)

	)

171 
	#NO_INTERRUPT
 0

	)

172 
	#BYTE
 1

	)

173 
	#WORD
 2

	)

174 
	#LONG
 4

	)

177 
	#POLLED_MODE
 0

	)

178 
	#INTR_MODE
 1

	)

182 
	#NO_ERROR
 0

	)

183 
	#SHM_NO_FREE_PKTS
 0xf0000

	)

187 
	#NULL_ENV_CB
 ((
Shm_Envñ›e_c⁄åﬁ
 *Ë0)

	)

188 
	#NULL_CONVERT
 0

	)

195 
	#SHM_ENVELOPE_PREFIX_OVERHEAD
 (4 * (
vﬁ_u32
))

	)

202 #i‚de‡
MAX_ENVELOPE_SIZE


203 
	#MAX_ENVELOPE_SIZE
 0x180

	)

206 
	#MAX_PACKET_SIZE
 (
MAX_ENVELOPE_SIZE
 - \

207 
SHM_ENVELOPE_PREFIX_OVERHEAD
 + \

208 (
Shm_Envñ›e_¥ómbÀ
) + \

209 (
Shm_Envñ›e_po°ambÀ
))

	)

214 
	#LQ_UNLOCKED
 
SHM_UNLOCK_VALUE


	)

215 
	#LQ_LOCKED
 
SHM_LOCK_VALUE


	)

219 
	#FREE_ENV_POOL
 0

	)

220 
	#FREE_ENV_CB
 (&
Shm_Locked_queues
[ 
FREE_ENV_POOL
 ])

	)

229 
	#START_NS_CBS
 ((*)
Shm_C⁄figuøti⁄
->
ba£
)

	)

230 
	#START_LQ_CBS
 ((
START_NS_CBS
) + \

231 –( (
Shm_Node_°©us_c⁄åﬁ
)Ë* (
SHM_MAXIMUM_NODES
 + 1ËË)

	)

232 
	#START_ENVELOPES
 ( ((*Ë
START_LQ_CBS
) + \

233 –( (
Shm_Locked_queue_C⁄åﬁ
)Ë* (
SHM_MAXIMUM_NODES
 + 1ËË)

	)

234 
	#END_SHMCI_AREA
 ( (*Ë
START_ENVELOPES
 + \

235 –( (
Shm_Envñ›e_c⁄åﬁ
)Ë* 
Shm_Maximum_ívñ›es
 ) )

	)

236 
	#END_SHARED_MEM
 (
START_NS_CBS
+
Shm_C⁄figuøti⁄
->
Àngth
)

	)

240 
	#Shm_Is_ma°î_node
() \

241 –
SHM_MASTER
 ==
_C⁄figuøti⁄_MP_èbÀ
-> 
node
 )

	)

243 
	#Shm_Fªe_ívñ›e
–
ecb
 ) \

244 
	`Shm_Locked_queue_Add
–
FREE_ENV_CB
, (
ecb
Ë)

	)

245 
	#Shm_AŒoˇã_ívñ›e
() \

246 
	`Shm_Locked_queue_Gë
(
FREE_ENV_CB
)

	)

248 
	#Shm_Inôülize_ª˚ive_queue
(
node
) \

249 
	`Shm_Locked_queue_Inôülize
–&
Shm_Locked_queues
[
node
],Çodê)

	)

251 
	#Shm_Aµíd_to_ª˚ive_queue
(
node
, 
ecb
) \

252 
	`Shm_Locked_queue_Add
–&
Shm_Locked_queues
[
node
], (
ecb
Ë)

	)

254 
	#Shm_Envñ›e_c⁄åﬁ_to_∑ckë_¥efix_poöãr
(
ecb
) \

255 ((*)(
ecb
)->
∑ckë
)

	)

257 
	#Shm_Packë_¥efix_to_ívñ›e_c⁄åﬁ_poöãr
–
pkt
 ) \

258 ((
Shm_Envñ›e_c⁄åﬁ
 *)((
uöt8_t
*)(
pkt
) - \

259 ((
Shm_Envñ›e_¥ómbÀ
Ë+ 
SHM_ENVELOPE_PREFIX_OVERHEAD
)))

	)

261 
	#Shm_Buûd_¥ómbÀ
(
ecb
, 
node
) \

262 (
ecb
)->
PªambÀ
.
ídün
 = 
Shm_C⁄figuøti⁄
->
f‹m©


	)

264 
	#Shm_Buûd_po°ambÀ
–
ecb
 )

	)

268 vﬁ©ûê
	tuöt8_t
 
	tvﬁ_u8
;

269 vﬁ©ûê
	tuöt32_t
 
	tvﬁ_u32
;

273 
	sshm_öfo
 {

274 
vﬁ_u32
 
nŸ_cuºíéy_u£d_0
;

275 
vﬁ_u32
 
nŸ_cuºíéy_u£d_1
;

276 
vﬁ_u32
 
nŸ_cuºíéy_u£d_2
;

277 
vﬁ_u32
 
nŸ_cuºíéy_u£d_3
;

282 
vﬁ_u32
 
ídün
;

283 
vﬁ_u32
 
nŸ_cuºíéy_u£d_0
;

284 
vﬁ_u32
 
nŸ_cuºíéy_u£d_1
;

285 
vﬁ_u32
 
nŸ_cuºíéy_u£d_2
;

286 } 
	tShm_Envñ›e_¥ómbÀ
;

289 } 
Shm_Envñ›e_po°ambÀ
;

312 
vﬁ_u32
 
√xt
;

313 
vﬁ_u32
 
queue
;

314 
vﬁ_u32
 
ödex
;

315 
vﬁ_u32
 
∑d0
;

316 
Shm_Envñ›e_¥ómbÀ
 
PªambÀ
;

317 
vﬁ_u8
 
∑ckë
[
MAX_PACKET_SIZE
];

318 
Shm_Envñ›e_po°ambÀ
 
Po°ambÀ
;

319 } 
	tShm_Envñ›e_c⁄åﬁ
;

336 
vﬁ_u32
 
lock
;

337 
vﬁ_u32
 
‰⁄t
;

338 
vﬁ_u32
 
ª¨
;

339 
vﬁ_u32
 
ow√r
;

340 } 
	tShm_Locked_queue_C⁄åﬁ
;

358 
vﬁ_u32
 
°©us
;

359 
vﬁ_u32
 
îr‹
;

360 
vﬁ_u32
 
öt_addªss
;

361 
vﬁ_u32
 
öt_vÆue
;

362 
vﬁ_u32
 
öt_Àngth
;

363 
vﬁ_u32
 
nŸ_cuºíéy_u£d_0
;

364 
vﬁ_u32
 
nŸ_cuºíéy_u£d_1
;

365 
vﬁ_u32
 
nŸ_cuºíéy_u£d_2
;

366 } 
	tShm_Node_°©us_c⁄åﬁ
;

387 
vﬁ_u32
 *
addªss
;

388 
vﬁ_u32
 
vÆue
;

389 
vﬁ_u32
 
Àngth
;

390 } 
	tShm_I¡îru±_öf‹m©i⁄
;

423 
	sshm_c⁄fig_öfo
 {

424 
vﬁ_u32
 *
ba£
;

425 
vﬁ_u32
 
Àngth
;

426 
vﬁ_u32
 
f‹m©
;

427 
uöt32_t
 (*
c⁄vît
)( uint32_t );

428 
vﬁ_u32
 
pﬁl_öå
;

429 (*
ˇu£_öå
)–
uöt32_t
);

430 
Shm_I¡îru±_öf‹m©i⁄
 
I¡r
;

433 
shm_c⁄fig_öfo
 
	tshm_c⁄fig_èbÀ
;

435 
	#SHM_MAXIMUM_NODES
 
Mu…ùro˚ssög_c⁄figuøti⁄
.
maximum_nodes


	)

439 #ifde‡
_SHM_INIT


440 
	#SHM_EXTERN


	)

442 
	#SHM_EXTERN
 

	)

445 
SHM_EXTERN
 
shm_c⁄fig_èbÀ
 *
Shm_C⁄figuøti⁄
;

446 
SHM_EXTERN
 
Shm_I¡îru±_öf‹m©i⁄
 *
	gShm_I¡îru±_èbÀ
;

447 
SHM_EXTERN
 
Shm_Node_°©us_c⁄åﬁ
 *
	gShm_Node_°©u£s
;

448 
SHM_EXTERN
 
Shm_Locked_queue_C⁄åﬁ
 *
	gShm_Locked_queues
;

449 
SHM_EXTERN
 
Shm_Envñ›e_c⁄åﬁ
 *
	gShm_Envñ›es
;

450 
SHM_EXTERN
 
uöt32_t
 
	gShm_Re˚ive_mesßge_cou¡
;

451 
SHM_EXTERN
 
uöt32_t
 
	gShm_NuŒ_mesßge_cou¡
;

452 
SHM_EXTERN
 
uöt32_t
 
	gShm_I¡îru±_cou¡
;

453 
SHM_EXTERN
 
Shm_Locked_queue_C⁄åﬁ
 *
	gShm_Loˇl_ª˚ive_queue
;

454 
SHM_EXTERN
 
Shm_Node_°©us_c⁄åﬁ
 *
	gShm_Loˇl_node_°©us
;

455 
SHM_EXTERN
 
uöt32_t
 
	gShm_i§°©
;

458 
SHM_EXTERN
 
uöt32_t
 
	gShm_Pídög_öôüliz©i⁄
;

459 
SHM_EXTERN
 
uöt32_t
 
	gShm_Inôüliz©i⁄_com∂ëe
;

460 
SHM_EXTERN
 
uöt32_t
 
	gShm_A˘ive_node
;

462 
SHM_EXTERN
 
uöt32_t
 
	gShm_Maximum_ívñ›es
;

464 
SHM_EXTERN
 
uöt32_t
 
	gShm_Locked_queue_End_of_li°
;

465 
SHM_EXTERN
 
uöt32_t
 
	gShm_Locked_queue_NŸ_⁄_li°
;

470 
Shm_Locked_queue_Add
(

471 
Shm_Locked_queue_C⁄åﬁ
 *, 
Shm_Envñ›e_c⁄åﬁ
 * );

472 
Shm_Envñ›e_c⁄åﬁ
 *
Shm_Locked_queue_Gë
–
Shm_Locked_queue_C⁄åﬁ
 * );

473 
Shm_Locked_queue_Inôülize
(

474 
Shm_Locked_queue_C⁄åﬁ
 *, 
uöt32_t
);

480 
Inô_ív_poﬁ
( );

481 
Shm_Pröt_°©i°ics
( );

482 
MPCI_F©Æ
–
I¡î«l_îr‹s_Sour˚
, 
boﬁ
, 
uöt32_t
);

483 
πems_èsk
 
Shm_Cau£_öãºu±
–
uöt32_t
 );

484 
Shm_ö°Æl_timî
( );

485 
Shm_C⁄vît_∑ckë
–
πems_∑ckë_¥efix
 * );

490 *
Shm_C⁄vît_addªss
( * );

491 
Shm_Gë_c⁄figuøti⁄
–
uöt32_t
, 
shm_c⁄fig_èbÀ
 ** );

492 
Shm_i§
( );

493 
Shm_£tvec
( );

495 
Shm_Inôülize_lock
–
Shm_Locked_queue_C⁄åﬁ
 * );

496 
Shm_Lock
–
Shm_Locked_queue_C⁄åﬁ
 * );

497 
Shm_U∆ock
–
Shm_Locked_queue_C⁄åﬁ
 * );

500 
πems_mpci_íåy
 
Shm_Gë_∑ckë
(

501 
πems_∑ckë_¥efix
 **

504 
πems_mpci_íåy
 
Shm_Inôüliz©i⁄
( );

506 
πems_mpci_íåy
 
Shm_Re˚ive_∑ckë
(

507 
πems_∑ckë_¥efix
 **

510 
πems_mpci_íåy
 
Shm_Rëu∫_∑ckë
(

511 
πems_∑ckë_¥efix
 *

514 
πems_mpci_íåy
 
Shm_Síd_∑ckë
(

515 
uöt32_t
,

516 
πems_∑ckë_¥efix
 *

519 
πems_mpci_èbÀ
 
MPCI_èbÀ
;

521 #ifde‡
_SHM_INIT


525 
πems_mpci_èbÀ
 
	gMPCI_èbÀ
 = {

527 
MAX_PACKET_SIZE
,

528 
Shm_Inôüliz©i⁄
,

529 
Shm_Gë_∑ckë
,

530 
Shm_Rëu∫_∑ckë
,

531 
Shm_Síd_∑ckë
,

532 
Shm_Re˚ive_∑ckë


537 #ifde‡
__˝lu•lus


	@src/librtems++/include/rtems++/rtemsEvent.h

20 #i‡!
deföed
(
_πemsEvít_h_
)

21 
	#_πemsEvít_h_


	)

23 
	~<πems++/πemsSètusCode.h
>

24 
	~<πems++/πemsTask.h
>

30 ˛as†
	cπemsEvít


31 : 
public
 
πemsSètusCode


33 
public
:

36 
	eWaôMode
 { 
waô
 = 
RTEMS_WAIT
,

37 
	mno_waô
 = 
RTEMS_NO_WAIT
};

38 
	eC⁄dôi⁄
 { 
	g™y
 = 
RTEMS_EVENT_ANY
,

39 
	gÆl
 = 
RTEMS_EVENT_ALL
};

44 
πemsEvít
(c⁄° * 
«me
, 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

47 
πemsEvít
(c⁄°ÑãmsEvít& 
evít
);

48 
πemsEvít
();

50 
	gvútuÆ
 ~
πemsEvít
();

53 c⁄° 
	gπemsEvít
& 
	g›î©‹
=(c⁄° 
πemsEvít
& 
evít
);

54 
vútuÆ
 c⁄° 
πems_°©us_code
 
c⁄√˘
(c⁄° *
«me
,

55 c⁄° 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

58 
ölöe
 c⁄° 
πems_°©us_code
 
£nd
(c⁄° 
πems_id
 
èsk
,

59 c⁄° 
πems_evít_£t
 
evíts
);

60 
ölöe
 c⁄° 
πems_°©us_code
 
£nd
(c⁄° 
πemsTask
& 
èsk
,

61 c⁄° 
πems_evít_£t
 
evíts
) ;

62 
ölöe
 c⁄° 
πems_°©us_code
 
£nd
(c⁄° 
πems_evít_£t
 
evíts
);

65 
ölöe
 c⁄° 
πems_°©us_code
 
ª˚ive
(c⁄° 
πems_evít_£t
 
evít_ö
,

66 
πems_evít_£t
& 
evít_out
,

67 c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
 = 0,

68 c⁄° 
WaôMode
 
waô
 = wait,

69 c⁄° 
C⁄dôi⁄
 
c⁄dôi⁄
 = 
™y
);

72 c⁄° 
πems_id
 
	$èsk_id_is
(Ëc⁄° {  
id
; 
	}
}

73 c⁄° 
πems_«me
 
	$èsk_«me_is
(Ëc⁄° {  
«me
; 
	}
}

75 
	g¥iv©e
:

77 
πems_«me
 
«me
;

80 
πems_id
 
	gid
;

84 c⁄° 
πems_°©us_code
 
	gπemsEvít
::
	$£nd
(c⁄° 
πems_id
 
èsk
,

85 c⁄° 
πems_evít_£t
 
evíts
)

87 
	`£t_°©us_code
(
	`πems_evít_£nd
(
èsk
, 
evíts
));

88  
	`œ°_°©us_code
();

89 
	}
}

91 c⁄° 
πems_°©us_code
 
	gπemsEvít
::
	$£nd
(c⁄° 
πemsTask
& 
èsk
,

92 c⁄° 
πems_evít_£t
 
evíts
)

94 
	`£t_°©us_code
(
	`πems_evít_£nd
(
èsk
.
	`id_is
(), 
evíts
));

95  
	`œ°_°©us_code
();

96 
	}
}

98 c⁄° 
πems_°©us_code
 
	gπemsEvít
::
	$£nd
(c⁄° 
πems_evít_£t
 
evíts
)

100 
	`£t_°©us_code
(
	`πems_evít_£nd
(
id
, 
evíts
));

101  
	`œ°_°©us_code
();

102 
	}
}

104 c⁄° 
πems_°©us_code
 
	gπemsEvít
::
	$ª˚ive
(c⁄° 
πems_evít_£t
 
evít_ö
,

105 
πems_evít_£t
& 
evít_out
,

106 c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
,

107 c⁄° 
WaôMode
 
waô
,

108 c⁄° 
C⁄dôi⁄
 
c⁄dôi⁄
)

110 
πems_öãrvÆ
 
u£cs
 = 
mi¸o_£cs
 &&

111 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

112 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

113 
	`£t_°©us_code
(
	`πems_evít_ª˚ive
(
evít_ö
,

114 
waô
 | 
c⁄dôi⁄
,

115 
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
),

116 &
evít_out
));

117  
	`œ°_°©us_code
();

118 
	}
}

	@src/librtems++/include/rtems++/rtemsInterrupt.h

37 #i‡!
deföed
(
_πemsI¡îru±_h_
)

38 
	#_πemsI¡îru±_h_


	)

40 
	~<πems++/πemsSètusCode.h
>

46 ˛as†
	cπemsI¡îru±


47 : 
public
 
πemsSètusCode


49 
public
:

50 
πemsI¡îru±
();

51 
	mvútuÆ
 ~
πemsI¡îru±
();

54 
vútuÆ
 c⁄° 
πems_°©us_code
 
i§_ˇtch
(c⁄° 
πems_ve˘‹_numbî
 
ve˘‹
);

57 
vútuÆ
 c⁄° 
πems_°©us_code
 
ªÀa£
();

60 c⁄° 
πems_i§_íåy
 
	$ﬁd_i§_h™dÀr
(Ëc⁄° {  
ﬁd_h™dÀr
; }

62 
¥Ÿe˘ed
:

65 
vútuÆ
 
	`h™dÀr
() = 0;

68 
ölöe
 
	$chaö
() const;

70 
¥iv©e
:

71 c⁄° 
πemsI¡îru±
& 
›î©‹
=(constÑtemsInterrupt& );

72 
	`πemsI¡îru±
(c⁄° 
πemsI¡îru±
& );

75 
πems_ve˘‹_numbî
 
ve˘‹
;

78 
boﬁ
 
ˇught
;

81 
πems_i§_íåy
 
ﬁd_h™dÀr
;

84 
πemsI¡îru±
 *
ﬁd_öãºu±
;

87 
	`ªdúe˘‹
(
πems_ve˘‹_numbî
 
ve˘‹
);

88 
	}
};

90 
	gπemsI¡îru±
::
	$chaö
() const

92 i‡(
ﬁd_öãºu±
)

93 
ﬁd_öãºu±
->
	`h™dÀr
();

94 i‡(
ﬁd_h™dÀr
)

95 (((*)()Ë
ﬁd_h™dÀr
)();

96 
	}
}

	@src/librtems++/include/rtems++/rtemsMessageQueue.h

37 #i‡!
deföed
(
_πemsMesßgeQueue_h_
)

38 
	#_πemsMesßgeQueue_h_


	)

40 
	~<πems++/πemsSètusCode.h
>

46 ˛as†
	cπemsMesßgeQueue


47 : 
public
 
πemsSètusCode


49 
public
:

51 
	eWaôMode
 { 
waô_by_fifo
 = 
RTEMS_FIFO
,

52 
	mwaô_by_¥i‹ôy
 = 
RTEMS_PRIORITY
 };

53 
	eSc›e
 { 
	gloˇl
 = 
RTEMS_LOCAL
,

54 
	gglobÆ
 = 
RTEMS_GLOBAL
 };

59 
πemsMesßgeQueue
(c⁄° * 
«me
,

60 c⁄° 
uöt32_t
 
cou¡
,

61 c⁄° 
size_t
 
max_mesßge_size
,

62 c⁄° 
WaôMode
 
waô_mode
 = 
waô_by_fifo
,

63 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
);

66 
πemsMesßgeQueue
(c⁄° *
«me
, c⁄° 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

69 
πemsMesßgeQueue
(c⁄°ÑãmsMesßgeQueue& 
mesßge_queue
);

70 
πemsMesßgeQueue
();

73 
	gvútuÆ
 ~
πemsMesßgeQueue
();

76 
vútuÆ
 c⁄° 
πems_°©us_code
 
¸óã
(c⁄° * 
«me
,

77 c⁄° 
uöt32_t
 
cou¡
,

78 c⁄° 
size_t
 
max_mesßge_size
,

79 c⁄° 
WaôMode
 
waô_mode
 = 
waô_by_fifo
,

80 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
);

81 
vútuÆ
 c⁄° 
πems_°©us_code
 
de°roy
();

84 c⁄° 
	gπemsMesßgeQueue
& 
	g›î©‹
=(c⁄° 
πemsMesßgeQueue
& 
mesßge_queue
);

85 
vútuÆ
 c⁄° 
πems_°©us_code
 
c⁄√˘
(c⁄° *
«me
,

86 c⁄° 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

89 
ölöe
 c⁄° 
πems_°©us_code
 
£nd
(c⁄° *
buf„r
,

90 c⁄° 
size_t
 
size
);

91 
ölöe
 c⁄° 
πems_°©us_code
 
urgít
(c⁄° *
buf„r
,

92 c⁄° 
size_t
 
size
);

93 
ölöe
 c⁄° 
πems_°©us_code
 
brﬂdˇ°
(c⁄° *
buf„r
,

94 c⁄° 
size_t
 
size
,

95 
uöt32_t
& 
cou¡
);

98 
ölöe
 c⁄° 
πems_°©us_code
 
ª˚ive
(c⁄° *
buf„r
,

99 
size_t
& 
size
,

100 
πems_öãrvÆ
 
mi¸o_£cs
 = 
RTEMS_NO_TIMEOUT
,

101 
boﬁ
 
waô
 = 
åue
);

104 
ölöe
 c⁄° 
πems_°©us_code
 
Êush
(
uöt32_t
& 
size
);

107 c⁄° 
πems_id
 
	$id_is
(Ëc⁄° {  
id
; 
	}
}

108 c⁄° 
πems_«me
 
	$«me_is
(Ëc⁄° {  
«me
; 
	}
}

109 c⁄° *
	$«me_°rög
(Ëc⁄° {  
«me_°r
; 
	}
}

111 
	g¥iv©e
:

114 
make_övÆid
();

117 
πems_«me
 
	g«me
;

118 
	g«me_°r
[5];

122 
boﬁ
 
	gow√r
;

125 
πems_id
 
	gid
;

128 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$£nd
(c⁄° *
buf„r
,

129 c⁄° 
size_t
 
size
)

131  
	`£t_°©us_code
(
	`πems_mesßge_queue_£nd
(
id
, (*Ë
buf„r
, 
size
));

132 
	}
}

134 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$urgít
(c⁄° *
buf„r
,

135 c⁄° 
size_t
 
size
)

137  
	`£t_°©us_code
(
	`πems_mesßge_queue_urgít
(
id
, (*Ë
buf„r
, 
size
));

138 
	}
}

140 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$brﬂdˇ°
(c⁄° *
buf„r
,

141 c⁄° 
size_t
 
size
,

142 
uöt32_t
& 
cou¡
)

144  
	`£t_°©us_code
(
	`πems_mesßge_queue_brﬂdˇ°
(
id
,

145 (*Ë
buf„r
,

146 
size
,

147 &
cou¡
));

148 
	}
}

150 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$ª˚ive
(c⁄° *
buf„r
,

151 
size_t
& 
size
,

152 
πems_öãrvÆ
 
mi¸o_£cs
,

153 
boﬁ
 
waô
)

155 
πems_öãrvÆ
 
u£cs
 = 
mi¸o_£cs
 &&

156 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

157 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

158  
	`£t_°©us_code
(
	`πems_mesßge_queue_ª˚ive
(
id
,

159 (*Ë
buf„r
,

160 &
size
,

161 
waô
 ? 
RTEMS_WAIT
 : 
RTEMS_NO_WAIT
,

162 
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
)));

163 
	}
}

165 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$Êush
(
uöt32_t
& 
cou¡
)

167  
	`£t_°©us_code
(
	`πems_mesßge_queue_Êush
(
id
, &
cou¡
));

168 
	}
}

	@src/librtems++/include/rtems++/rtemsSemaphore.h

34 #i‡!
deföed
(
_πemsSem≠h‹e_h_
)

35 
	#_πemsSem≠h‹e_h_


	)

37 
	~<πems++/πemsSètusCode.h
>

43 ˛as†
	cπemsSem≠h‹e


44 : 
public
 
πemsSètusCode


46 
public
:

48 
	eWaôMode
 { 
waô_by_fifo
 = 
RTEMS_FIFO
,

49 
	mwaô_by_¥i‹ôy
 = 
RTEMS_PRIORITY
 };

50 
	eTy≥
 { 
	gbö¨y
 = 
RTEMS_BINARY_SEMAPHORE
,

51 
	gcou¡ög
 = 
RTEMS_COUNTING_SEMAPHORE
 };

52 
	ePri‹ôy
 { 
	gno_¥i‹ôy_öhîô
 = 
RTEMS_NO_INHERIT_PRIORITY
,

53 
	göhîô_¥i‹ôy
 = 
RTEMS_INHERIT_PRIORITY
 };

54 
	eCeûög
 { 
	gno_¥i‹ôy_˚ûög
 = 
RTEMS_NO_PRIORITY_CEILING
,

55 
	g¥i‹ôy_˚ûög
 = 
RTEMS_PRIORITY_CEILING
 };

56 
	eSc›e
 { 
	gloˇl
 = 
RTEMS_LOCAL
,

57 
	gglobÆ
 = 
RTEMS_GLOBAL
 };

63 
πemsSem≠h‹e
(c⁄° * 
«me
,

64 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
,

65 c⁄° 
uöt32_t
 
cou¡î
 = 1,

66 c⁄° 
WaôMode
 
waô_mode
 = 
waô_by_fifo
,

67 c⁄° 
Ty≥
 
ty≥
 = 
bö¨y
,

68 c⁄° 
Pri‹ôy
 
¥i‹ôy
 = 
no_¥i‹ôy_öhîô
,

69 c⁄° 
Ceûög
 
˚ûög
 = 
no_¥i‹ôy_˚ûög
,

70 c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy_˚ûög
 = 0);

73 
πemsSem≠h‹e
(c⁄° *
«me
, c⁄° 
uöt32_t
 
node
);

76 
πemsSem≠h‹e
(c⁄°ÑãmsSem≠h‹e& 
£m≠h‹e
);

77 
πemsSem≠h‹e
();

80 
	gvútuÆ
 ~
πemsSem≠h‹e
();

83 
vútuÆ
 c⁄° 
πems_°©us_code
 
¸óã
(c⁄° * 
«me
,

84 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
,

85 c⁄° 
uöt32_t
 
cou¡î
 = 1,

86 c⁄° 
WaôMode
 
waô_mode
 = 
waô_by_fifo
,

87 c⁄° 
Ty≥
 
ty≥
 = 
bö¨y
,

88 c⁄° 
Pri‹ôy
 
¥i‹ôy
 = 
no_¥i‹ôy_öhîô
,

89 c⁄° 
Ceûög
 
˚ûög
 = 
no_¥i‹ôy_˚ûög
,

90 c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy_˚ûög
 = 0);

91 
vútuÆ
 c⁄° 
πems_°©us_code
 
de°roy
();

94 c⁄° 
	gπemsSem≠h‹e
& 
	g›î©‹
=(c⁄° 
πemsSem≠h‹e
& 
£m≠h‹e
);

95 
vútuÆ
 c⁄° 
πems_°©us_code
 
c⁄√˘
(c⁄° *
«me
, 
uöt32_t
 
node
);

98 
ölöe
 c⁄° 
πems_°©us_code
 
obèö
(
boﬁ
 
waô
 = 
åue
,

99 c⁄° 
uöt32_t
 
mi¸o_£cs
 = 
RTEMS_NO_TIMEOUT
);

102 
ölöe
 c⁄° 
πems_°©us_code
 
ªÀa£
();

105 c⁄° 
πems_id
 
	$id_is
(Ëc⁄° {  
id
; 
	}
}

106 c⁄° 
πems_«me
 
	$«me_is
(Ëc⁄° {  
«me
; 
	}
}

107 c⁄° *
	$«me_°rög
(Ëc⁄° {  
«me_°r
; 
	}
}

109 
	g¥iv©e
:

112 
make_övÆid
();

115 
πems_«me
 
	g«me
;

116 
	g«me_°r
[5];

120 
boﬁ
 
	gow√r
;

123 
πems_id
 
	gid
;

126 c⁄° 
πems_°©us_code
 
	gπemsSem≠h‹e
::
	$obèö
(c⁄° 
boﬁ
 
waô
,

127 c⁄° 
uöt32_t
 
mi¸o_£cs
)

129 
πems_öãrvÆ
 
u£cs
 = 
mi¸o_£cs
 &&

130 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

131 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

134 
	`£t_°©us_code
(
	`πems_£m≠h‹e_obèö
(
id
,

135 
waô
 ? 
RTEMS_WAIT
 : 
RTEMS_NO_WAIT
,

136 
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
)));

137 
	}
}

139 c⁄° 
πems_°©us_code
 
	gπemsSem≠h‹e
::
	$ªÀa£
()

141  
	`£t_°©us_code
(
	`πems_£m≠h‹e_ªÀa£
(
id
));

142 
	}
}

	@src/librtems++/include/rtems++/rtemsStatusCode.h

19 #i‡!
deföed
(
_πemsSètusCode_h_
)

20 
	#_πemsSètusCode_h_


	)

22 
	~<πems.h
>

28 ˛as†
	cπemsSètusCode


30 
	mpublic
:

32 
	$πemsSètusCode
(Ë{ 
œ°_°©us
 = 
RTEMS_NOT_CONFIGURED
; }

34 c⁄° 
boﬁ
 
	$suc˚ssful
(Ë{  
œ°_°©us
 =
RTEMS_SUCCESSFUL
; 
	}
}

35 c⁄° 
boﬁ
 
	$unsuc˚ssful
(Ë{  
œ°_°©us
 !
RTEMS_SUCCESSFUL
; 
	}
}

38 c⁄° 
πems_°©us_code
 
	$œ°_°©us_code
(Ë{  
œ°_°©us
; 
	}
}

41 c⁄° *
œ°_°©us_°rög
();

43 c⁄° *
°©us_°rög
(
πems_°©us_code
 
°©us_code
);

45 
	g¥Ÿe˘ed
:

46 c⁄° 
πems_°©us_code
 
	$£t_°©us_code
(c⁄° 
πems_°©us_code
 
°©us
)

47 {  (
œ°_°©us
 = 
°©us
); 
	}
}

49 
	g¥iv©e
:

52 
πems_°©us_code
 
œ°_°©us
;

	@src/librtems++/include/rtems++/rtemsTask.h

54 #i‡!
deföed
(
_πemsTask_h_
)

55 
	#_πemsTask_h_


	)

57 
	~<πems++/πemsSètusCode.h
>

63 ˛as†
	cπemsTask


64 : 
public
 
πemsSètusCode


66 
public
:

67 
	eFlﬂtögPoöt
 { 
Âoff
 = 
RTEMS_NO_FLOATING_POINT
,

68 
	mÂ⁄
 = 
RTEMS_FLOATING_POINT
 };

69 
	eSc›e
 { 
	gloˇl
 = 
RTEMS_LOCAL
,

70 
	gglobÆ
 = 
RTEMS_GLOBAL
 };

75 
πemsTask
(c⁄° * 
«me
,

76 c⁄° 
πems_èsk_¥i‹ôy
 
öôül_¥i‹ôy
,

77 c⁄° 
uöt32_t
 
°ack_size
,

78 c⁄° 
πems_mode
 
¥ìm±i⁄
 = 
RTEMS_NO_PREEMPT
,

79 c⁄° 
πems_mode
 
time¶i˚
 = 
RTEMS_NO_TIMESLICE
,

80 c⁄° 
πems_mode
 
a§
 = 
RTEMS_NO_ASR
,

81 c⁄° 
πems_öãºu±_Àvñ
 
öãºu±_Àvñ
 = 0,

82 c⁄° 
FlﬂtögPoöt
 
Êﬂtög_poöt
 = 
Âoff
,

83 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
);

86 
πemsTask
(c⁄° *
«me
, c⁄° 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

89 
πemsTask
(c⁄°ÑãmsTask& 
èsk
);

90 
πemsTask
();

93 
	gvútuÆ
 ~
πemsTask
();

96 
vútuÆ
 c⁄° 
πems_°©us_code
 
¸óã
(c⁄° * 
«me
,

97 c⁄° 
πems_èsk_¥i‹ôy
 
öôül_¥i‹ôy
,

98 c⁄° 
uöt32_t
 
°ack_size
,

99 c⁄° 
πems_mode
 
¥ìm±i⁄
 = 
RTEMS_NO_PREEMPT
,

100 c⁄° 
πems_mode
 
time¶i˚
 = 
RTEMS_NO_TIMESLICE
,

101 c⁄° 
πems_mode
 
a§
 = 
RTEMS_NO_ASR
,

102 c⁄° 
πems_öãºu±_Àvñ
 
öãºu±_Àvñ
 = 0,

103 c⁄° 
FlﬂtögPoöt
 
Êﬂtög_poöt
 = 
Âoff
,

104 c⁄° 
Sc›e
 
sc›e
 = 
loˇl
);

105 
vútuÆ
 c⁄° 
πems_°©us_code
 
de°roy
();

108 c⁄° 
	gπemsTask
& 
	g›î©‹
=(c⁄° 
πemsTask
& 
èsk
);

109 
vútuÆ
 c⁄° 
πems_°©us_code
 
c⁄√˘
(c⁄° *
«me
,

110 c⁄° 
uöt32_t
 
node
 = 
RTEMS_SEARCH_ALL_NODES
);

113 
vútuÆ
 c⁄° 
πems_°©us_code
 
°¨t
(c⁄° 
πems_èsk_¨gumít
 
¨gumít
);

114 
vútuÆ
 c⁄° 
πems_°©us_code
 
ª°¨t
(c⁄° 
πems_èsk_¨gumít
 
¨gumít
);

115 
vútuÆ
 c⁄° 
πems_°©us_code
 
su•íd
();

116 
vútuÆ
 c⁄° 
πems_°©us_code
 
ªsume
();

119 
vútuÆ
 c⁄° 
πems_°©us_code
 
wake_a·î
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
);

120 
vútuÆ
 c⁄° 
πems_°©us_code
 
wake_whí
(c⁄° 
πems_time_of_day
& 
tod
);

123 c⁄° 
πems_°©us_code
 
gë_¥i‹ôy
(
πems_èsk_¥i‹ôy
& 
¥i‹ôy
);

124 c⁄° 
πems_°©us_code
 
£t_¥i‹ôy
(c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy
);

125 c⁄° 
πems_°©us_code
 
£t_¥i‹ôy
(c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy
,

126 
πems_èsk_¥i‹ôy
& 
ﬁd_¥i‹ôy
);

129 c⁄° 
πems_°©us_code
 
	$gë_nŸe
(c⁄° 
uöt32_t
 
nŸïad
,

130 
uöt32_t
& 
nŸe
Ë
RTEMS_COMPILER_DEPRECATED_ATTRIBUTE
;

131 c⁄° 
πems_°©us_code
 
	$£t_nŸe
(c⁄° 
uöt32_t
 
nŸïad
,

132 c⁄° 
uöt32_t
 
nŸe
Ë
RTEMS_COMPILER_DEPRECATED_ATTRIBUTE
;

135 c⁄° 
πems_id
 
	$id_is
(Ëc⁄° {  
id
; 
	}
}

136 c⁄° 
πems_«me
 
	$«me_is
(Ëc⁄° {  
«me
; 
	}
}

137 c⁄° *
	$«me_°rög
(Ëc⁄° {  
«me_°r
; 
	}
}

139 
	g¥Ÿe˘ed
:

142 
vútuÆ
 
body
(
πems_èsk_¨gumít
 
¨gumít
);

144 
	g¥iv©e
:

147 
make_£lf
();

150 
πems_«me
 
	g«me
;

151 
	g«me_°r
[5];

155 
boﬁ
 
	gow√r
;

158 
πems_id
 
	gid
;

162 
πems_èsk_¨gumít
 
	g¨gumít
;

165 
πems_èsk
 
‹igö
(
πems_èsk_¨gumít
 
¨gumít
);

	@src/librtems++/include/rtems++/rtemsTaskMode.h

33 #i‡!
deföed
(
_πemsTaskMode_h_
)

34 
	#_πemsTaskMode_h_


	)

36 
	~<πems++/πemsSètusCode.h
>

42 ˛as†
	cπemsTaskMode


43 : 
public
 
πemsSètusCode


45 
public
:

47 
	$πemsTaskMode
() {};

50 
ölöe
 c⁄° 
πems_°©us_code
 
	`gë_mode
(
πems_mode
& 
mode
);

51 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_mode
(c⁄° 
πems_mode
 
mode
,

52 c⁄° 
πems_mode
 
mask
);

53 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_mode
(c⁄° 
πems_mode
 
mode
,

54 c⁄° 
πems_mode
 
mask
,

55 
πems_mode
& 
ﬁd_mode
);

58 
ölöe
 c⁄° 
πems_°©us_code
 
	`gë_¥ìm±i⁄_°©e
(
πems_mode
& 
¥ìm±i⁄
);

59 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_¥ìm±i⁄_°©e
(c⁄° 
πems_mode
 
¥ìm±i⁄
);

60 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_¥ìm±i⁄_°©e
(c⁄° 
πems_mode
 
¥ìm±i⁄
,

61 
πems_mode
& 
ﬁd_¥ìm±i⁄
);

62 
ölöe
 c⁄° 
boﬁ
 
	`¥ìm±i⁄_£t
(c⁄° 
πems_mode
 
¥ìm±i⁄
);

65 
ölöe
 c⁄° 
πems_°©us_code
 
	`gë_time¶i˚_°©e
(
πems_mode
& 
time¶i˚
);

66 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_time¶i˚_°©e
(c⁄° 
πems_mode
 
time¶i˚
);

67 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_time¶i˚_°©e
(c⁄° 
πems_mode
 
time¶i˚
,

68 
πems_mode
& 
ﬁd_time¶i˚
);

69 
ölöe
 c⁄° 
boﬁ
 
	`time¶i˚_£t
(c⁄° 
πems_mode
 
¥ìm±i⁄
);

72 
ölöe
 c⁄° 
πems_°©us_code
 
	`gë_a§_°©e
(
πems_mode
& 
a§
);

73 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_a§_°©e
(c⁄° 
πems_mode
 
a§
);

74 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_a§_°©e
(c⁄° 
πems_mode
 
a§
,

75 
πems_mode
& 
ﬁd_a§
);

76 
ölöe
 c⁄° 
boﬁ
 
	`a§_£t
(c⁄° 
πems_mode
 
¥ìm±i⁄
);

79 
ölöe
 c⁄° 
πems_°©us_code
 
	`gë_öãºu±_Àvñ
(
πems_öãºu±_Àvñ
& 
Àvñ
);

80 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_öãºu±_Àvñ
(c⁄° 
πems_öãºu±_Àvñ
 
Àvñ
);

81 
ölöe
 c⁄° 
πems_°©us_code
 
	`£t_öãºu±_Àvñ
(c⁄° 
πems_öãºu±_Àvñ
 
Àvñ
,

82 
πems_öãºu±_Àvñ
& 
ﬁd_Àvñ
);

83 
	}
};

85 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$gë_mode
(
πems_mode
& 
mode
)

87  
	`£t_°©us_code
(
	`πems_èsk_mode
(0, 
RTEMS_CURRENT_MODE
, &
mode
));

88 
	}
}

90 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_mode
(c⁄° 
πems_mode
 
mode
,

91 c⁄° 
πems_mode
 
mask
)

93 
πems_mode
 
ﬁd_mode
;

94  
	`£t_°©us_code
(
	`πems_èsk_mode
(
mode
, 
mask
, &
ﬁd_mode
));

95 
	}
}

97 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_mode
(c⁄° 
πems_mode
 
mode
,

98 c⁄° 
πems_mode
 
mask
,

99 
πems_mode
& 
ﬁd_mode
)

101  
	`£t_°©us_code
(
	`πems_èsk_mode
(
mode
, 
mask
, &
ﬁd_mode
));

102 
	}
}

104 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$gë_¥ìm±i⁄_°©e
(
πems_mode
& 
¥ìm±i⁄
)

106 
	`£t_°©us_code
(
	`πems_èsk_mode
(0, 
RTEMS_CURRENT_MODE
, &
¥ìm±i⁄
));

107 
¥ìm±i⁄
 &
RTEMS_PREEMPT_MASK
;

108  
	`œ°_°©us_code
();

109 
	}
}

111 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_¥ìm±i⁄_°©e
(c⁄° 
πems_mode
 
¥ìm±i⁄
)

113 
πems_mode
 
ﬁd_mode
;

114  
	`£t_°©us_code
(
	`πems_èsk_mode
(
¥ìm±i⁄
, 
RTEMS_PREEMPT_MASK
, &
ﬁd_mode
));

115 
	}
}

117 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_¥ìm±i⁄_°©e
(c⁄° 
πems_mode
 
¥ìm±i⁄
,

118 
πems_mode
& 
ﬁd_¥ìm±i⁄
)

120 
	`£t_°©us_code
(
	`πems_èsk_mode
(
¥ìm±i⁄
, 
RTEMS_PREEMPT_MASK
, &
ﬁd_¥ìm±i⁄
));

121 
ﬁd_¥ìm±i⁄
 &
RTEMS_PREEMPT_MASK
;

122  
	`œ°_°©us_code
();

123 
	}
}

125 c⁄° 
boﬁ
 
	gπemsTaskMode
::
	$¥ìm±i⁄_£t
(c⁄° 
πems_mode
 
¥ìm±i⁄
)

127  (
¥ìm±i⁄
 & 
RTEMS_PREEMPT_MASK
Ë? 
Ál£
 : 
åue
;

128 
	}
}

130 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$gë_time¶i˚_°©e
(
πems_mode
& 
time¶i˚
)

132 
	`£t_°©us_code
(
	`πems_èsk_mode
(0, 
RTEMS_CURRENT_MODE
, &
time¶i˚
));

133 
time¶i˚
 &
RTEMS_TIMESLICE_MASK
;

134  
	`œ°_°©us_code
();

135 
	}
}

137 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_time¶i˚_°©e
(c⁄° 
πems_mode
 
time¶i˚
)

139 
πems_mode
 
ﬁd_mode
;

140  
	`£t_°©us_code
(
	`πems_èsk_mode
(
time¶i˚
, 
RTEMS_TIMESLICE_MASK
, &
ﬁd_mode
));

141 
	}
}

143 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_time¶i˚_°©e
(c⁄° 
πems_mode
 
time¶i˚
,

144 
πems_mode
& 
ﬁd_time¶i˚
)

146 
	`£t_°©us_code
(
	`πems_èsk_mode
(
time¶i˚
, 
RTEMS_TIMESLICE_MASK
, &
ﬁd_time¶i˚
));

147 
ﬁd_time¶i˚
 &
RTEMS_TIMESLICE_MASK
;

148  
	`œ°_°©us_code
();

149 
	}
}

151 c⁄° 
boﬁ
 
	gπemsTaskMode
::
	$time¶i˚_£t
(c⁄° 
πems_mode
 
time¶i˚
)

153  (
time¶i˚
 & 
RTEMS_TIMESLICE_MASK
Ë? 
åue
 : 
Ál£
;

154 
	}
}

156 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$gë_a§_°©e
(
πems_mode
& 
a§
)

158 
	`£t_°©us_code
(
	`πems_èsk_mode
(0, 
RTEMS_CURRENT_MODE
, &
a§
));

159 
a§
 &
RTEMS_ASR_MASK
;

160  
	`œ°_°©us_code
();

161 
	}
}

163 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_a§_°©e
(c⁄° 
πems_mode
 
a§
)

165 
πems_mode
 
ﬁd_mode
;

166  
	`£t_°©us_code
(
	`πems_èsk_mode
(
a§
, 
RTEMS_ASR_MASK
, &
ﬁd_mode
));

167 
	}
}

169 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_a§_°©e
(c⁄° 
πems_mode
 
a§
,

170 
πems_mode
& 
ﬁd_a§
)

172 
	`£t_°©us_code
(
	`πems_èsk_mode
(
a§
, 
RTEMS_ASR_MASK
, &
ﬁd_a§
));

173 
ﬁd_a§
 &
RTEMS_ASR_MASK
;

174  
	`œ°_°©us_code
();

175 
	}
}

177 c⁄° 
boﬁ
 
	gπemsTaskMode
::
	$a§_£t
(c⁄° 
πems_mode
 
a§
)

179  (
a§
 & 
RTEMS_ASR_MASK
Ë? 
åue
 : 
Ál£
;

180 
	}
}

182 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$gë_öãºu±_Àvñ
(
πems_öãºu±_Àvñ
& 
Àvñ
)

184 
πems_mode
 
mode
;

185 
	`£t_°©us_code
(
	`πems_èsk_mode
(0, 
RTEMS_CURRENT_MODE
, &
mode
));

186 
Àvñ
 = 
mode
 & 
RTEMS_INTERRUPT_MASK
;

187  
	`œ°_°©us_code
();

188 
	}
}

190 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_öãºu±_Àvñ
(c⁄° 
πems_öãºu±_Àvñ
 
Àvñ
)

192 
πems_mode
 
ﬁd_mode
;

193  
	`£t_°©us_code
(
	`πems_èsk_mode
(
Àvñ
, 
RTEMS_INTERRUPT_MASK
, &
ﬁd_mode
));

194 
	}
}

196 c⁄° 
πems_°©us_code
 
	gπemsTaskMode
::
	$£t_öãºu±_Àvñ
(
πems_öãºu±_Àvñ
 
Àvñ
,

197 
πems_öãºu±_Àvñ
& 
ﬁd_Àvñ
)

199 
	`£t_°©us_code
(
	`πems_èsk_mode
(
Àvñ
, 
RTEMS_INTERRUPT_MASK
, &
ﬁd_Àvñ
));

200 
ﬁd_Àvñ
 = old_Àvñ & 
RTEMS_INTERRUPT_MASK
;

201  
	`œ°_°©us_code
();

202 
	}
}

	@src/librtems++/include/rtems++/rtemsTimer.h

26 #i‡!
deföed
(
_πemsTimî_h_
)

27 
	#_πemsTimî_h_


	)

29 
	~<πems++/πemsSètusCode.h
>

35 ˛as†
	cπemsTimî


36 : 
public
 
πemsSètusCode


38 
public
:

42 
πemsTimî
(c⁄° * 
«me
);

43 
πemsTimî
();

46 
	mvútuÆ
 ~
πemsTimî
();

49 
vútuÆ
 c⁄° 
πems_°©us_code
 
¸óã
(c⁄° * 
«me
);

50 
vútuÆ
 c⁄° 
πems_°©us_code
 
de°roy
();

53 
ölöe
 c⁄° 
πems_°©us_code
 
fúe_a·î
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
);

54 
ölöe
 c⁄° 
πems_°©us_code
 
ª≥©_fúe_©
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
);

55 
ölöe
 c⁄° 
πems_°©us_code
 
fúe_whí
(c⁄° 
πems_time_of_day
& 
whí
);

57 
ölöe
 c⁄° 
πems_°©us_code
 
ˇn˚l
();

58 
ölöe
 c⁄° 
πems_°©us_code
 
ª£t
();

61 c⁄° 
πems_id
 
	$id_is
(Ëc⁄° {  
id
; }

62 c⁄° 
πems_«me
 
	$«me_is
(Ëc⁄° {  
«me
; 
	}
}

63 c⁄° *
	$«me_°rög
(Ëc⁄° {  
«me_°r
; 
	}
}

65 
	g¥Ÿe˘ed
:

68 
vútuÆ
 
åiggîed
() = 0;

70 
	g¥iv©e
:

72 
πemsTimî
(c⁄°ÑãmsTimî& 
timî
);

73 
	gπemsTimî
& 
	g›î©‹
=(c⁄° 
πemsTimî
& 
timî
);

76 
make_övÆid
();

79 
πems_«me
 
	g«me
;

80 
	g«me_°r
[5];

83 
boﬁ
 
	gª≥©
;

86 
πems_id
 
	gid
;

89 
comm⁄_h™dÀr
(
πems_id
 
id
, *
u£r_d©a
);

92 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$fúe_a·î
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
)

94 
ª≥©
 = 
Ál£
;

95 
πems_öãrvÆ
 
u£cs
 = 
mi¸o_£cs
 &&

96 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

97 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

98  
	`£t_°©us_code
(
	`πems_timî_fúe_a·î
(
id
,

99 
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
),

100 
comm⁄_h™dÀr
,

101 
this
));

102 
	}
}

104 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$ª≥©_fúe_©
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
)

106 
ª≥©
 = 
åue
;

107 
πems_öãrvÆ
 
u£cs
 = 
mi¸o_£cs
 &&

108 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

109 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

110  
	`£t_°©us_code
(
	`πems_timî_fúe_a·î
(
id
,

111 
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
),

112 
comm⁄_h™dÀr
,

113 
this
));

114 
	}
}

116 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$fúe_whí
(c⁄° 
πems_time_of_day
& 
whí
)

118  
	`£t_°©us_code
(
	`πems_timî_fúe_whí
(
id
,

119 (
πems_time_of_day
*Ë&
whí
,

120 
comm⁄_h™dÀr
,

121 
this
));

122 
	}
}

124 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$ˇn˚l
()

126 
ª≥©
 = 
Ál£
;

127  
	`£t_°©us_code
(
	`πems_timî_ˇn˚l
(
id
));

128 
	}
}

130 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$ª£t
()

132  
	`£t_°©us_code
(
	`πems_timî_ª£t
(
id
));

133 
	}
}

	@src/librtems++/src/rtemsEvent.cc

19 
	~<πems++/πemsEvít.h
>

25 
	gπemsEvít
::
	$πemsEvít
(c⁄° *
«me_°r
, 
uöt32_t
 
node
)

26 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

27 
	$id
(
RTEMS_SELF
)

29 
	`c⁄√˘
(
«me_°r
, 
node
);

30 
	}
}

32 
	gπemsEvít
::
	$πemsEvít
(c⁄° 
πemsEvít
& 
evít
)

34 
«me
 = 
evít
.name;

35 
id
 = 
evít
.id;

36 
	}
}

38 
	gπemsEvít
::
	$πemsEvít
()

39 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

40 
	$id
(
RTEMS_SELF
)

42 
	}
}

44 
	gπemsEvít
::~
	$πemsEvít
()

46 
	}
}

48 c⁄° 
πemsEvít
&ÑãmsEvít::
›î©‹
=(c⁄°ÑãmsEvít& 
evít
)

50 
«me
 = 
evít
.name;

51 
	gid
 = 
evít
.
id
;

53  *
	gthis
;

56 c⁄° 
πems_°©us_code
 
	gπemsEvít
::
	$c⁄√˘
(c⁄° *
«me_°r
,

57 c⁄° 
uöt32_t
 
node
)

59 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

60 
«me_°r
[1],

61 
«me_°r
[2],

62 
«me_°r
[3]);

64 
	`£t_°©us_code
(
	`πems_èsk_idít
(
«me
, 
node
, &
id
));

66 i‡(
	`unsuc˚ssful
())

68 
«me
 = 
	`πems_buûd_«me
('S', 'E', 'L', 'F');

69 
id
 = 
RTEMS_SELF
;

72  
	`œ°_°©us_code
();

73 
	}
}

	@src/librtems++/src/rtemsInterrupt.cc

19 
	~<πems++/πemsI¡îru±.h
>

21 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

30 
πemsI¡îru±
 **
	göãºu±_èbÀ
;

33 
boﬁ
 
	göôüli£d
 = 
Ál£
;

39 
	~<c°dlib
>

41 
	gπemsI¡îru±
::
	$πemsI¡îru±
()

42 : 
	`ve˘‹
(0),

43 
	`ˇught
(
Ál£
),

44 
	`ﬁd_h™dÀr
(0),

45 
	$ﬁd_öãºu±
(0)

47 i‡(!
öôüli£d
)

49 
öãºu±_èbÀ
 = (
πemsI¡îru±
 **)

50 
	`mÆloc
((
πemsI¡îru±
 *Ë* 
CPU_INTERRUPT_NUMBER_OF_VECTORS
);

51 
πems_ve˘‹_numbî
 
vec
 = 0;

52 
vec
 < 
CPU_INTERRUPT_NUMBER_OF_VECTORS
;

53 
vec
++)

55 
öãºu±_èbÀ
[
vec
] = 0;

57 
öôüli£d
 = 
åue
;

59 
	}
}

61 
	gπemsI¡îru±
::~
	$πemsI¡îru±
()

63 
	`ªÀa£
();

64 
	}
}

66 c⁄° 
πems_°©us_code
 
	gπemsI¡îru±
::
	$i§_ˇtch
(c⁄° 
πems_ve˘‹_numbî
 
vec
)

68 i‡(
vec
 >
CPU_INTERRUPT_NUMBER_OF_VECTORS
)

69  
	`£t_°©us_code
(
RTEMS_INVALID_NUMBER
);

71 i‡(
ˇught
)

72  
	`£t_°©us_code
(
RTEMS_RESOURCE_IN_USE
);

74 
ﬁd_öãºu±
 = 
öãºu±_èbÀ
[
vec
];

75 
öãºu±_èbÀ
[
vec
] = 
this
;

76 
ve˘‹
 = 
vec
;

78 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

79 
	`£t_°©us_code
(
	`πems_öãºu±_ˇtch
(
ªdúe˘‹
,

80 
ve˘‹
,

81 &
ﬁd_h™dÀr
));

83 
	`£t_°©us_code
(
RTEMS_NOT_DEFINED
);

85 i‡(
	`suc˚ssful
())

86 
ˇught
 = 
åue
;

89 
öãºu±_èbÀ
[
ve˘‹
] = 
ﬁd_öãºu±
;

90 
ﬁd_öãºu±
 = 0;

91 
ﬁd_h™dÀr
 = 0;

92 
ve˘‹
 = 0;

95  
	`œ°_°©us_code
();

96 
	}
}

98 c⁄° 
πems_°©us_code
 
	gπemsI¡îru±
::
	$ªÀa£
()

100 i‡(
ˇught
)

102 #i‡(
CPU_SIMPLE_VECTORED_INTERRUPTS
 =
TRUE
)

103 
	`£t_°©us_code
(
	`πems_öãºu±_ˇtch
(
ﬁd_h™dÀr
,

104 
ve˘‹
,

105 &
ﬁd_h™dÀr
));

107 
	`£t_°©us_code
(
RTEMS_NOT_DEFINED
);

109 
öãºu±_èbÀ
[
ve˘‹
] = 
ﬁd_öãºu±
;

110 
ﬁd_öãºu±
 = 0;

111 
ﬁd_h™dÀr
 = 0;

112 
ve˘‹
 = 0;

113 
ˇught
 = 
Ál£
;

116 
	`£t_°©us_code
(
RTEMS_SUCCESSFUL
);

118  
	`œ°_°©us_code
();

119 
	}
}

121 
	gπemsI¡îru±
::
	$ªdúe˘‹
(
πems_ve˘‹_numbî
 
ve˘‹
)

123 i‡(
öãºu±_èbÀ
[
ve˘‹
])

124 
öãºu±_èbÀ
[
ve˘‹
]->
	`h™dÀr
();

125 
	}
}

	@src/librtems++/src/rtemsMessageQueue.cc

19 
	~<c°rög
>

20 
	~<πems++/πemsMesßgeQueue.h
>

26 
	gπemsMesßgeQueue
::
	$πemsMesßgeQueue
(c⁄° * 
mq«me
,

27 c⁄° 
uöt32_t
 
cou¡
,

28 c⁄° 
size_t
 
max_mesßge_size
,

29 c⁄° 
WaôMode
 
waô_mode
,

30 c⁄° 
Sc›e
 
sc›e
)

31 : 
	`«me
(0),

32 
	`ow√r
(
åue
),

33 
	$id
(0)

35 
	`°r˝y
(
«me_°r
, "NOID");

36 
	`¸óã
(
mq«me
, 
cou¡
, 
max_mesßge_size
, 
waô_mode
, 
sc›e
);

37 
	}
}

39 
	gπemsMesßgeQueue
::
	$πemsMesßgeQueue
(c⁄° *
mq«me
,

40 c⁄° 
uöt32_t
 
node
)

41 : 
	`«me
(0),

42 
	`ow√r
(
Ál£
),

43 
	$id
(0)

45 
	`°r˝y
(
«me_°r
, "NOID");

46 
	`c⁄√˘
(
mq«me
, 
node
);

47 
	}
}

49 
	gπemsMesßgeQueue
::
	$πemsMesßgeQueue
(c⁄° 
πemsMesßgeQueue
& 
mesßge_queue
)

50 : 
	`«me
(0),

51 
	`ow√r
(
Ál£
),

52 
	$id
(0)

54 
«me
 = 
mesßge_queue
.name;

55 
	`°r˝y
(
«me_°r
, 
mesßge_queue
.name_str);

56 
id
 = 
mesßge_queue
.id;

57 
	}
}

59 
	gπemsMesßgeQueue
::
	$πemsMesßgeQueue
()

60 : 
	`«me
(0),

61 
	`ow√r
(
Ál£
),

62 
	$id
(0)

64 
	`°r˝y
(
«me_°r
, "NOID");

65 
	}
}

67 
	gπemsMesßgeQueue
::~
	$πemsMesßgeQueue
()

69 
	`de°roy
();

70 
	}
}

72 
	gπemsMesßgeQueue
::
	$make_övÆid
()

74 
	`°r˝y
(
«me_°r
, "NOID");

75 
«me
 = 0;

76 
id
 = 0;

77 
ow√r
 = 
Ál£
;

78 
	}
}

80 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$¸óã
(c⁄° * 
mq«me
,

81 c⁄° 
uöt32_t
 
cou¡
,

82 c⁄° 
size_t
 
max_mesßge_size
,

83 c⁄° 
WaôMode
 
waô_mode
,

84 c⁄° 
Sc›e
 
sc›e
)

86 i‡(
id
)

87  
	`£t_°©us_code
(
RTEMS_ILLEGAL_ON_SELF
);

89 
ow√r
 = 
åue
;

91 
	`°r˝y
(
«me_°r
, " ");

92 
c
 = 0; (¯< 4Ë&& (
mq«me
[c] != '\0'); c++)

93 
«me_°r
[
c
] = 
mq«me
[c];

94 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

95 
«me_°r
[1],

96 
«me_°r
[2],

97 
«me_°r
[3]);

99 
	`£t_°©us_code
(
	`πems_mesßge_queue_¸óã
(
«me
,

100 
cou¡
,

101 
max_mesßge_size
,

102 
sc›e
 | 
waô_mode
,

103 &
id
));

105 i‡(
	`unsuc˚ssful
())

107 
	`make_övÆid
();

110  
	`œ°_°©us_code
();

111 
	}
}

113 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$de°roy
()

115 i‡(
id
 && 
ow√r
)

117 
	`£t_°©us_code
(
	`πems_mesßge_queue_dñëe
(
id
));

118 
	`make_övÆid
();

121 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

123  
	`œ°_°©us_code
();

124 
	}
}

126 c⁄° 
	gπemsMesßgeQueue
&ÑãmsMesßgeQueue::
›î©‹
=(c⁄° 
πemsMesßgeQueue
& 
mesßge_queue
)

128 i‡(!
ow√r
)

130 
«me
 = 
mesßge_queue
.name;

131 
°r˝y
(
«me_°r
, 
mesßge_queue
.name_str);

132 
	gid
 = 
mesßge_queue
.
id
;

135  *
	gthis
;

138 c⁄° 
πems_°©us_code
 
	gπemsMesßgeQueue
::
	$c⁄√˘
(c⁄° *
mq«me
,

139 c⁄° 
uöt32_t
 
node
)

141 i‡(
id
 && 
ow√r
)

142  
	`£t_°©us_code
(
RTEMS_UNSATISFIED
);

145 
ow√r
 = 
Ál£
;

147 
	`°r˝y
(
«me_°r
, " ");

148 
c
 = 0; (¯< 4Ë&& (
mq«me
[c] != '\0'); c++)

149 
«me_°r
[
c
] = 
mq«me
[c];

150 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

151 
«me_°r
[1],

152 
«me_°r
[2],

153 
«me_°r
[3]);

155 
	`£t_°©us_code
(
	`πems_mesßge_queue_idít
(
«me
, 
node
, &
id
));

157 i‡(
	`unsuc˚ssful
())

159 
	`make_övÆid
();

162  
	`œ°_°©us_code
();

163 
	}
}

	@src/librtems++/src/rtemsSemaphore.cc

19 
	~<c°rög
>

20 
	~<πems++/πemsSem≠h‹e.h
>

26 
	gπemsSem≠h‹e
::
	$πemsSem≠h‹e
(c⁄° * 
¢ame
,

27 c⁄° 
Sc›e
 
sc›e
,

28 c⁄° 
uöt32_t
 
cou¡î
,

29 c⁄° 
WaôMode
 
waô_mode
,

30 c⁄° 
Ty≥
 
ty≥
,

31 c⁄° 
Pri‹ôy
 
¥i‹ôy
,

32 c⁄° 
Ceûög
 
˚ûög
,

33 c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy_˚ûög
)

34 : 
	`«me
(0),

35 
	`ow√r
(
åue
),

36 
	$id
(0)

38 
	`°r˝y
(
«me_°r
, "NOID");

39 
	`¸óã
(
¢ame
,

40 
sc›e
,

41 
cou¡î
,

42 
waô_mode
,

43 
ty≥
,

44 
¥i‹ôy
,

45 
˚ûög
,

46 
¥i‹ôy_˚ûög
);

47 
	}
}

49 
	gπemsSem≠h‹e
::
	$πemsSem≠h‹e
(c⁄° *
¢ame
, c⁄° 
uöt32_t
 
node
)

50 : 
	`«me
(0),

51 
	`ow√r
(
Ál£
),

52 
	$id
(0)

54 
	`°r˝y
(
«me_°r
, "NOID");

55 
	`c⁄√˘
(
¢ame
, 
node
);

56 
	}
}

58 
	gπemsSem≠h‹e
::
	$πemsSem≠h‹e
(c⁄° 
πemsSem≠h‹e
& 
£m≠h‹e
)

59 : 
	`«me
(0),

60 
	`ow√r
(
Ál£
),

61 
	$id
(0)

63 
«me
 = 
£m≠h‹e
.name;

64 
	`°r˝y
(
«me_°r
, 
£m≠h‹e
.name_str);

65 
id
 = 
£m≠h‹e
.id;

66 
	}
}

68 
	gπemsSem≠h‹e
::
	$πemsSem≠h‹e
()

69 : 
	`«me
(0),

70 
	`ow√r
(
Ál£
),

71 
	$id
(0)

73 
	`°r˝y
(
«me_°r
, "NOID");

74 
	}
}

76 
	gπemsSem≠h‹e
::~
	$πemsSem≠h‹e
()

78 
	`de°roy
();

79 
	}
}

81 
	gπemsSem≠h‹e
::
	$make_övÆid
()

83 
	`°r˝y
(
«me_°r
, "NOID");

84 
«me
 = 0;

85 
id
 = 0;

86 
ow√r
 = 
Ál£
;

87 
	}
}

89 c⁄° 
πems_°©us_code
 
	gπemsSem≠h‹e
::
	$¸óã
(c⁄° * 
¢ame
,

90 c⁄° 
Sc›e
 
sc›e
,

91 c⁄° 
uöt32_t
 
cou¡î
,

92 c⁄° 
WaôMode
 
waô_mode
,

93 c⁄° 
Ty≥
 
ty≥
,

94 c⁄° 
Pri‹ôy
 
¥i‹ôy
,

95 c⁄° 
Ceûög
 
˚ûög
,

96 c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy_˚ûög
)

98 i‡(
id
)

99  
	`£t_°©us_code
(
RTEMS_ILLEGAL_ON_SELF
);

101 
ow√r
 = 
åue
;

103 
	`°r˝y
(
«me_°r
, " ");

104 
c
 = 0; (¯< 4Ë&& (
¢ame
[c] != '\0'); c++)

105 
«me_°r
[
c
] = 
¢ame
[c];

106 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

107 
«me_°r
[1],

108 
«me_°r
[2],

109 
«me_°r
[3]);

111 
	`£t_°©us_code
(
	`πems_£m≠h‹e_¸óã
(
«me
,

112 
cou¡î
,

113 
sc›e
 | 
waô_mode
 | 
ty≥
 | 
¥i‹ôy
 | 
˚ûög
,

114 
¥i‹ôy_˚ûög
,

115 &
id
));

117 i‡(
	`unsuc˚ssful
())

119 
	`make_övÆid
();

122  
	`œ°_°©us_code
();

123 
	}
}

125 c⁄° 
πems_°©us_code
 
	gπemsSem≠h‹e
::
	$de°roy
()

127 i‡(
id
 && 
ow√r
)

129 
	`£t_°©us_code
(
	`πems_£m≠h‹e_dñëe
(
id
));

130 
	`make_övÆid
();

133 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

135  
	`œ°_°©us_code
();

136 
	}
}

138 c⁄° 
	gπemsSem≠h‹e
&ÑãmsSem≠h‹e::
›î©‹
=(c⁄° 
πemsSem≠h‹e
& 
£m≠h‹e
)

140 i‡(!
ow√r
)

142 
«me
 = 
£m≠h‹e
.name;

143 
	gid
 = 
£m≠h‹e
.
id
;

145  *
	gthis
;

148 c⁄° 
πems_°©us_code
 
	gπemsSem≠h‹e
::
	$c⁄√˘
(c⁄° *
¢ame
,

149 c⁄° 
uöt32_t
 
node
)

151 i‡(
id
 && 
ow√r
)

152  
	`£t_°©us_code
(
RTEMS_UNSATISFIED
);

155 
ow√r
 = 
Ál£
;

157 
	`°r˝y
(
«me_°r
, " ");

158 
c
 = 0; (¯< 4Ë&& (
¢ame
[c] != '\0'); c++)

159 
«me_°r
[
c
] = 
¢ame
[c];

160 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

161 
«me_°r
[1],

162 
«me_°r
[2],

163 
«me_°r
[3]);

165 
	`£t_°©us_code
(
	`πems_£m≠h‹e_idít
(
«me
, 
node
, &
id
));

167 i‡(
	`unsuc˚ssful
())

169 
	`make_övÆid
();

172  
	`œ°_°©us_code
();

173 
	}
}

	@src/librtems++/src/rtemsStatusCode.cc

19 
	~<πems++/πemsSètusCode.h
>

25 c⁄° *
	g°©us_°rögs
[
RTEMS_STATUS_CODES_LAST
 + 1] =

60 c⁄° *
	gπemsSètusCode
::
	$œ°_°©us_°rög
()

62  
	`°©us_°rög
(
œ°_°©us
);

63 
	}
}

65 c⁄° *
	gπemsSètusCode
::
	$°©us_°rög
(
πems_°©us_code
 
°©us_code
)

68 i‡(
°©us_code
 <
RTEMS_STATUS_CODES_LAST
)

70  
°©us_°rögs
[
°©us_code
];

74 
	}
}

	@src/librtems++/src/rtemsTask.cc

19 
	~<c°rög
>

20 
	~<πems++/πemsTask.h
>

22 
	~<πems++/πemsTaskMode.h
>

28 
	gπemsTask
::
	$πemsTask
(c⁄° * 
äame
,

29 c⁄° 
πems_èsk_¥i‹ôy
 
öôül_¥i‹ôy
,

30 c⁄° 
uöt32_t
 
°ack_size
,

31 c⁄° 
πems_mode
 
¥ìm±i⁄
,

32 c⁄° 
πems_mode
 
time¶i˚
,

33 c⁄° 
πems_mode
 
a§
,

34 c⁄° 
πems_öãºu±_Àvñ
 
öãºu±_Àvñ
,

35 c⁄° 
FlﬂtögPoöt
 
Êﬂtög_poöt
,

36 c⁄° 
Sc›e
 
sc›e
)

37 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

38 
	`ow√r
(
åue
),

39 
	`id
(
RTEMS_SELF
),

40 
	$¨gumít
(0)

42 
	`°r˝y
(
«me_°r
, "SELF");

43 
	`¸óã
(
äame
,

44 
öôül_¥i‹ôy
,

45 
°ack_size
,

46 
¥ìm±i⁄
,

47 
time¶i˚
,

48 
a§
,

49 
öãºu±_Àvñ
,

50 
Êﬂtög_poöt
,

51 
sc›e
);

52 
	}
}

54 
	gπemsTask
::
	$πemsTask
(c⁄° *
äame
, 
uöt32_t
 
node
)

55 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

56 
	`ow√r
(
Ál£
),

57 
	`id
(
RTEMS_SELF
),

58 
	$¨gumít
(0)

60 
	`°r˝y
(
«me_°r
, "SELF");

61 
	`c⁄√˘
(
äame
, 
node
);

62 
	}
}

64 
	gπemsTask
::
	$πemsTask
(c⁄° 
πemsTask
& 
èsk
)

65 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

66 
	`ow√r
(
Ál£
),

67 
	`id
(
RTEMS_SELF
),

68 
	$¨gumít
(0)

70 
«me
 = 
èsk
.name;

71 
	`°r˝y
(
«me_°r
, 
èsk
.name_str);

72 
¨gumít
 = 
èsk
.argument;

73 
id
 = 
èsk
.id;

74 
	}
}

76 
	gπemsTask
::
	$πemsTask
()

77 : 
	`«me
(
	`πems_buûd_«me
('S', 'E', 'L', 'F')),

78 
	`ow√r
(
Ál£
),

79 
	`id
(
RTEMS_SELF
),

80 
	$¨gumít
(0)

82 
	`°r˝y
(
«me_°r
, "SELF");

83 
	}
}

85 
	gπemsTask
::~
	$πemsTask
()

87 
	`de°roy
();

88 
	}
}

90 
	gπemsTask
::
	$make_£lf
()

92 
	`°r˝y
(
«me_°r
, "SELF");

93 
«me
 = 
	`πems_buûd_«me
('S', 'E', 'L', 'F');

94 
id
 = 
RTEMS_SELF
;

95 
ow√r
 = 
Ál£
;

96 
	}
}

98 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$¸óã
(c⁄° * 
äame
,

99 c⁄° 
πems_èsk_¥i‹ôy
 
öôül_¥i‹ôy
,

100 c⁄° 
uöt32_t
 
°ack_size
,

101 c⁄° 
πems_mode
 
¥ìm±i⁄
,

102 c⁄° 
πems_mode
 
time¶i˚
,

103 c⁄° 
πems_mode
 
a§
,

104 c⁄° 
πems_öãºu±_Àvñ
 
öãºu±_Àvñ
,

105 c⁄° 
FlﬂtögPoöt
 
Êﬂtög_poöt
,

106 c⁄° 
Sc›e
 
sc›e
)

108 i‡(
id
)

109  
	`£t_°©us_code
(
RTEMS_ILLEGAL_ON_SELF
);

111 
ow√r
 = 
åue
;

113 
	`°r˝y
(
«me_°r
, " ");

114 
c
 = 0; (¯< 4Ë&& (
äame
[c] != '\0'); c++)

115 
«me_°r
[
c
] = 
äame
[c];

116 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

117 
«me_°r
[1],

118 
«me_°r
[2],

119 
«me_°r
[3]);

122 
	`£t_°©us_code
(
	`πems_èsk_¸óã
(
«me
,

123 
öôül_¥i‹ôy
,

124 
°ack_size
,

125 (
¥ìm±i⁄
 & 
RTEMS_PREEMPT_MASK
) |

126 (
time¶i˚
 & 
RTEMS_TIMESLICE_MASK
) |

127 (
a§
 & 
RTEMS_ASR_MASK
) |

128 (
öãºu±_Àvñ
 & 
RTEMS_INTERRUPT_MASK
),

129 
Êﬂtög_poöt
 | 
sc›e
,

130 &
id
));

132 i‡(
	`unsuc˚ssful
())

134 
	`make_£lf
();

137  
	`œ°_°©us_code
();

138 
	}
}

140 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$de°roy
()

142 i‡(
id
 && 
ow√r
)

144 
	`£t_°©us_code
(
	`πems_èsk_dñëe
(
id
));

145 
	`make_£lf
();

148 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

150  
	`œ°_°©us_code
();

151 
	}
}

153 c⁄° 
	gπemsTask
&ÑãmsTask::
›î©‹
=(c⁄° 
πemsTask
& 
èsk
)

155 i‡(!
ow√r
)

157 
«me
 = 
èsk
.name;

158 
°r˝y
(
«me_°r
, 
èsk
.name_str);

159 
	g¨gumít
 = 
èsk
.
¨gumít
;

160 
	gid
 = 
èsk
.
id
;

162  *
	gthis
;

165 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$c⁄√˘
(c⁄° *
¢ame
,

166 c⁄° 
uöt32_t
 
node
)

168 i‡(
id
 && 
ow√r
)

169  
	`£t_°©us_code
(
RTEMS_UNSATISFIED
);

172 
ow√r
 = 
Ál£
;

174 
	`°r˝y
(
«me_°r
, " ");

175 
c
 = 0; (¯< 4Ë&& (
¢ame
[c] != '\0'); c++)

176 
«me_°r
[
c
] = 
¢ame
[c];

177 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

178 
«me_°r
[1],

179 
«me_°r
[2],

180 
«me_°r
[3]);

182 
	`£t_°©us_code
(
	`πems_èsk_idít
(
«me
, 
node
, &
id
));

184 i‡(
	`unsuc˚ssful
())

186 
	`make_£lf
();

189  
	`œ°_°©us_code
();

190 
	}
}

192 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$°¨t
(c⁄° 
πems_èsk_¨gumít
 
¨g
)

194 i‡(
ow√r
)

196 
¨gumít
 = 
¨g
;

198 
	`£t_°©us_code
(
	`πems_èsk_°¨t
(
id
,

199 
‹igö
,

200 (
πems_èsk_¨gumít
Ë
this
));

203 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

204  
	`œ°_°©us_code
();

205 
	}
}

207 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$ª°¨t
(c⁄° 
πems_èsk_¨gumít
 
¨g
)

209 i‡(
ow√r
)

211 
¨gumít
 = 
¨g
;

212 
	`£t_°©us_code
(
	`πems_èsk_ª°¨t
(
id
, (
πems_èsk_¨gumít
Ë
this
));

215 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

217  
	`œ°_°©us_code
();

218 
	}
}

220 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$su•íd
()

222  
	`£t_°©us_code
(
	`πems_èsk_su•íd
(
id
));

223 
	}
}

225 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$ªsume
()

227  
	`£t_°©us_code
(
	`πems_èsk_ªsume
(
id
));

228 
	}
}

230 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$wake_a·î
(c⁄° 
πems_öãrvÆ
 
mi¸o_£cs
)

232 
πems_öãrvÆ
 
u£cs
 =

233 (
mi¸o_£cs
 < 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
()) ?

234 
	`πems_c⁄figuøti⁄_gë_mi¸o£c⁄ds_≥r_tick
(Ë: 
mi¸o_£cs
;

235  
	`£t_°©us_code
(
	`πems_èsk_wake_a·î
(
	`RTEMS_MICROSECONDS_TO_TICKS
(
u£cs
)));

236 
	}
}

238 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$wake_whí
(c⁄° 
πems_time_of_day
& 
tod
)

240  
	`£t_°©us_code
(
	`πems_èsk_wake_whí
((
πems_time_of_day
*Ë&
tod
));

241 
	}
}

243 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$gë_¥i‹ôy
(
πems_èsk_¥i‹ôy
& 
¥i‹ôy
)

245  
	`£t_°©us_code
(
	`πems_èsk_£t_¥i‹ôy
(
id
,

246 
RTEMS_CURRENT_PRIORITY
,

247 &
¥i‹ôy
));

248 
	}
}

250 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$£t_¥i‹ôy
(c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy
)

252 
πems_èsk_¥i‹ôy
 
ﬁd_¥i‹ôy
;

253  
	`£t_°©us_code
(
	`πems_èsk_£t_¥i‹ôy
(
id
,

254 
¥i‹ôy
,

255 &
ﬁd_¥i‹ôy
));

256 
	}
}

258 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$£t_¥i‹ôy
(c⁄° 
πems_èsk_¥i‹ôy
 
¥i‹ôy
,

259 
πems_èsk_¥i‹ôy
& 
ﬁd_¥i‹ôy
)

261  
	`£t_°©us_code
(
	`πems_èsk_£t_¥i‹ôy
(
id
,

262 
¥i‹ôy
,

263 &
ﬁd_¥i‹ôy
));

264 
	}
}

266 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$gë_nŸe
(c⁄° 
uöt32_t
 
nŸïad
,

267 
uöt32_t
& 
nŸe
)

269  
	`£t_°©us_code
(
	`πems_èsk_gë_nŸe
(
id
, 
nŸïad
, &
nŸe
));

270 
	}
}

272 c⁄° 
πems_°©us_code
 
	gπemsTask
::
	$£t_nŸe
(c⁄° 
uöt32_t
 
nŸïad
,

273 c⁄° 
uöt32_t
 
nŸe
)

275  
	`£t_°©us_code
(
	`πems_èsk_£t_nŸe
(
id
, 
nŸïad
, 
nŸe
));

276 
	}
}

278 
	gπemsTask
::
	$body
(
πems_èsk_¨gumít
 )

280 
	}
}

282 
πems_èsk
 
πemsTask
::
	$‹igö
(
πems_èsk_¨gumít
 
¨gumít
)

284 
πemsTask
 *
èsk
 = (πemsTask*Ë
¨gumít
;

285 
èsk
->
	`body
—ask->
¨gumít
);

286 
	}
}

	@src/librtems++/src/rtemsTimer.cc

19 
	~<c°rög
>

20 
	~<πems++/πemsTimî.h
>

26 
	gπemsTimî
::
	$πemsTimî
(c⁄° * 
äame
)

27 : 
	`«me
(0),

28 
	`ª≥©
(
Ál£
),

29 
	$id
(0)

31 
	`°r˝y
(
«me_°r
, " ");

32 
	`¸óã
(
äame
);

33 
	}
}

35 
	gπemsTimî
::
	$πemsTimî
()

36 : 
	`«me
(0),

37 
	`ª≥©
(
Ál£
),

38 
	$id
(0)

40 
	`°r˝y
(
«me_°r
, " ");

41 
	}
}

43 
	gπemsTimî
::~
	$πemsTimî
()

45 
	`de°roy
();

46 
	}
}

48 
	gπemsTimî
::
	$make_övÆid
()

50 
	`°r˝y
(
«me_°r
, " ");

51 
«me
 = 0;

52 
id
 = 0;

53 
ª≥©
 = 
Ál£
;

54 
	}
}

55 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$¸óã
(c⁄° * 
äame
)

57 i‡(
id
)

58  
	`£t_°©us_code
(
RTEMS_ILLEGAL_ON_SELF
);

60 
	`°r˝y
(
«me_°r
, " ");

61 
c
 = 0; (¯< 4Ë&& (
äame
[c] != '\0'); c++)

62 
«me_°r
[
c
] = 
äame
[c];

63 
«me
 = 
	`πems_buûd_«me
(
«me_°r
[0],

64 
«me_°r
[1],

65 
«me_°r
[2],

66 
«me_°r
[3]);

68 
	`£t_°©us_code
(
	`πems_timî_¸óã
(
«me
, &
id
));

70 i‡(
	`unsuc˚ssful
())

72 
	`make_övÆid
();

75  
	`œ°_°©us_code
();

76 
	}
}

78 c⁄° 
πems_°©us_code
 
	gπemsTimî
::
	$de°roy
()

80 i‡(
id
)

82 
	`£t_°©us_code
(
	`πems_timî_dñëe
(
id
));

83 
	`make_övÆid
();

86 
	`£t_°©us_code
(
RTEMS_NOT_OWNER_OF_RESOURCE
);

88  
	`œ°_°©us_code
();

89 
	}
}

91 
	gπemsTimî
::
	$comm⁄_h™dÀr
(
πems_id
 , *
u£r_d©a
)

93 
πemsTimî
 *
timî
 = (πemsTimî*Ë
u£r_d©a
;

95 i‡(
timî
->
ª≥©
)

96 
timî
->
	`ª£t
();

98 
timî
->
	`åiggîed
();

99 
	}
}

	@src/support/version.c

10 
	~<πems/sy°em.h
>

12 #i‚de‡
RTEMS_VERSION


15 #i‚de‡
CPU_NAME


18 #i‚de‡
CPU_MODEL_NAME


21 #i‚de‡
RTEMS_BSP


25 c⁄° 
	g_RTEMS_vîsi⁄
[] =

26 "πems-" 
RTEMS_VERSION
 "(" 
CPU_NAME
 "/" 
CPU_MODEL_NAME
 "/" 
RTEMS_BSP
 ")";

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #unde‡
_ASSERT_H


25 #unde‡
as£π


26 #unde‡
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #unde‡
as£π_≥º‹


34 
	#_ASSERT_H
 1

	)

35 
	~<„©uªs.h
>

37 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #i‚de‡
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£π_Áû
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
,

70 
__löe
, c⁄° *
__fun˘i⁄
)

71 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

74 
	$__as£π_≥º‹_Áû
 (
__î∫um
, c⁄° *
__fûe
,

75 
__löe
, c⁄° *
__fun˘i⁄
)

76 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

81 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

82 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

85 
__END_DECLS


88 
	#as£π
(
ex¥
) \

89 ((
ex¥
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£π_Áû
 (
	`__STRING
(
ex¥
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£π_≥º‹
(
î∫um
) \

95 (!(
î∫um
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((c⁄° *Ë0)

	)

118 #i‡
deföed
 
__USE_ISOC11
 && !deföed 
__˝lu•lus


120 #unde‡
°©ic_as£π


121 
	#°©ic_as£π
 
_Sètic_as£π


	)

	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

22 #i‚def 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

35 
	~<bôs/f˙é.h
>

40 #i‚de‡
__mode_t_deföed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_deföed


	)

45 #i‚de‡
__off_t_deföed


46 #i‚de‡
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_deföed


	)

54 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_deföed


	)

59 #i‚de‡
__pid_t_deföed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_deföed


	)

65 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


66 
	#__√ed_time•ec


	)

67 
	~<time.h
>

68 
	~<bôs/°©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifde‡
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifde‡
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #i‚de‡
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
f˙é
 (
__fd
, 
__cmd
, ...);

145 #i‚de‡
__USE_FILE_OFFSET64


146 
	$›í
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

148 #ifde‡
__REDIRECT


149 
	`__REDIRECT
 (
›í
, (c⁄° *
__fûe
, 
__oÊag
, ...), 
›í64
)

150 
	`__n⁄nuŒ
 ((1));

152 
	#›í
 
›í64


	)

155 #ifde‡
__USE_LARGEFILE64


156 
	$›í64
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

159 #ifde‡
__USE_ATFILE


169 #i‚de‡
__USE_FILE_OFFSET64


170 
	$›í©
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

171 
	`__n⁄nuŒ
 ((2));

173 #ifde‡
__REDIRECT


174 
	`__REDIRECT
 (
›í©
, (
__fd
, c⁄° *
__fûe
, 
__oÊag
,

175 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

177 
	#›í©
 
›í©64


	)

180 #ifde‡
__USE_LARGEFILE64


181 
	$›í©64
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

182 
	`__n⁄nuŒ
 ((2));

191 #i‚de‡
__USE_FILE_OFFSET64


192 
	$¸ót
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

194 #ifde‡
__REDIRECT


195 
	`__REDIRECT
 (
¸ót
, (c⁄° *
__fûe
, 
mode_t
 
__mode
),

196 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

198 
	#¸ót
 
¸ót64


	)

201 #ifde‡
__USE_LARGEFILE64


202 
	$¸ót64
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

205 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

206 && !
deföed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #i‚de‡
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Àn
);

223 #ifde‡
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifde‡
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Àn
);

234 #ifde‡
__USE_XOPEN2K


237 #i‚de‡
__USE_FILE_OFFSET64


238 
	$posix_Ádvi£
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
,

239 
__advi£
Ë
__THROW
;

241 #ifde‡
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Àn
, 
__advi£
),

244 
posix_Ádvi£64
);

246 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

249 #ifde‡
__USE_LARGEFILE64


250 
	$posix_Ádvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
,

251 
__advi£
Ë
__THROW
;

259 #i‚de‡
__USE_FILE_OFFSET64


260 
	`posix_ÁŒoˇã
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
);

262 #ifde‡
__REDIRECT


263 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Àn
),

265 
posix_ÁŒoˇã64
);

267 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

270 #ifde‡
__USE_LARGEFILE64


271 
	`posix_ÁŒoˇã64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
);

277 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
 \

278 && 
deföed
 
__va_¨g_∑ck_Àn


279 
	~<bôs/f˙é2.h
>

282 
__END_DECLS


	@/usr/include/inttypes.h

22 #i‚de‡
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<°döt.h
>

30 #i‚de‡
____gwch¨_t_deföed


31 #ifde‡
__˝lu•lus


32 
	#__gwch¨_t
 
wch¨_t


	)

33 #ñi‡
deföed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¨_t
;

36 
	#__√ed_wch¨_t


	)

37 
	~<°ddef.h
>

38 
wch¨_t
 
	t__gwch¨_t
;

40 
	#____gwch¨_t_deföed
 1

	)

43 #i‡
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Œ"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #i‡
__WORDSIZE
 == 64

273 
	mquŸ
;

274 
	mªm
;

275 } 
	timaxdiv_t
;

282 
__exãnsi⁄__
 
	mquŸ
;

283 
__exãnsi⁄__
 
	mªm
;

284 } 
	timaxdiv_t
;

290 
ötmax_t
 
	$imaxabs
 (
ötmax_t
 
__n
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
ötmax_t
 
__numî
, i¡max_à
__díom
)

294 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

297 
ötmax_t
 
	$°πoimax
 (c⁄° *
__ª°ri˘
 
__≈å
,

298 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

301 
uötmax_t
 
	$°πoumax
 (c⁄° *
__ª°ri˘
 
__≈å
,

302 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

305 
ötmax_t
 
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

306 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

307 
__THROW
;

310 
uötmax_t
 
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

311 
__gwch¨_t
 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
)

312 
__THROW
;

314 #ifde‡
__USE_EXTERN_INLINES


316 #i‡
__WORDSIZE
 == 64

318 
	$__°πﬁ_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

319 **
__ª°ri˘
 
__íd±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

323 
__exã∫_ölöe
 
ötmax_t


324 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

325 
ba£
))

327  
	`__°πﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

328 
	}
}

330 
	$__°πoul_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

331 ** 
__ª°ri˘
 
__íd±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

335 
__exã∫_ölöe
 
uötmax_t


336 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

337 
ba£
))

339  
	`__°πoul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc°ﬁ_öã∫Æ
 (c⁄° 
__gwch¨_t
 * 
__ª°ri˘
 
__≈å
,

343 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

347 
__exã∫_ölöe
 
ötmax_t


348 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

349 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

351  
	`__wc°ﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc°oul_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

355 
__ª°ri˘
 
__≈å
,

356 
__gwch¨_t
 **

357 
__ª°ri˘
 
__íd±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

361 
__exã∫_ölöe
 
uötmax_t


362 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

363 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

365  
	`__wc°oul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

366 
	}
}

370 
__exãnsi⁄__


371 
	$__°πﬁl_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

372 **
__ª°ri˘
 
__íd±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

376 
__exã∫_ölöe
 
ötmax_t


377 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

378 
ba£
))

380  
	`__°πﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

381 
	}
}

383 
__exãnsi⁄__


384 
	$__°πouŒ_öã∫Æ
 (const *

385 
__ª°ri˘
 
__≈å
,

387 
__ª°ri˘
 
__íd±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

392 
__exã∫_ölöe
 
uötmax_t


393 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

394 
ba£
))

396  
	`__°πouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

397 
	}
}

399 
__exãnsi⁄__


400 
	$__wc°ﬁl_öã∫Æ
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

401 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

405 
__exã∫_ölöe
 
ötmax_t


406 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

407 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

409  
	`__wc°ﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

410 
	}
}

413 
__exãnsi⁄__


414 
	$__wc°ouŒ_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

415 
__ª°ri˘
 
__≈å
,

416 
__gwch¨_t
 **

417 
__ª°ri˘
 
__íd±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

422 
__exã∫_ölöe
 
uötmax_t


423 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

424 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

426  
	`__wc°ouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/limits.h

22 #i‚de‡
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<„©uªs.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

41 #i‚de‡
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<bôs/w‹dsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifde‡
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #i‡
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #i‡
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifde‡
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


123 #ö˛ude_√xà<
limôs
.
h
>

129 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


130 #i‚de‡
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #i‚de‡
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #i‚de‡
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<bôs/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<bôs/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<bôs/x›í_lim.h
>

	@/usr/include/net/ethernet.h

21 #i‚de‡
__NET_ETHERNET_H


22 
	#__NET_ETHERNET_H
 1

	)

24 
	~<sys/cdefs.h
>

25 
	~<sys/ty≥s.h
>

26 
	~<löux/if_ëhî.h
>

28 
__BEGIN_DECLS


32 
	sëhî_addr


34 
u_öt8_t
 
	mëhî_addr_o˘ë
[
ETH_ALEN
];

35 } 
__©åibuã__
 ((
__∑cked__
));

38 
	sëhî_hódî


40 
u_öt8_t
 
	mëhî_dho°
[
ETH_ALEN
];

41 
u_öt8_t
 
	mëhî_sho°
[
ETH_ALEN
];

42 
u_öt16_t
 
	mëhî_ty≥
;

43 } 
__©åibuã__
 ((
__∑cked__
));

46 
	#ETHERTYPE_PUP
 0x0200

	)

47 
	#ETHERTYPE_SPRITE
 0x0500

	)

48 
	#ETHERTYPE_IP
 0x0800

	)

49 
	#ETHERTYPE_ARP
 0x0806

	)

50 
	#ETHERTYPE_REVARP
 0x8035

	)

51 
	#ETHERTYPE_AT
 0x809B

	)

52 
	#ETHERTYPE_AARP
 0x80F3

	)

53 
	#ETHERTYPE_VLAN
 0x8100

	)

54 
	#ETHERTYPE_IPX
 0x8137

	)

55 
	#ETHERTYPE_IPV6
 0x86dd

	)

56 
	#ETHERTYPE_LOOPBACK
 0x9000

	)

59 
	#ETHER_ADDR_LEN
 
ETH_ALEN


	)

60 
	#ETHER_TYPE_LEN
 2

	)

61 
	#ETHER_CRC_LEN
 4

	)

62 
	#ETHER_HDR_LEN
 
ETH_HLEN


	)

63 
	#ETHER_MIN_LEN
 (
ETH_ZLEN
 + 
ETHER_CRC_LEN
Ë

	)

64 
	#ETHER_MAX_LEN
 (
ETH_FRAME_LEN
 + 
ETHER_CRC_LEN
Ë

	)

67 
	#ETHER_IS_VALID_LEN
(
foo
) \

68 ((
foo
Ë>
ETHER_MIN_LEN
 && (fooË<
ETHER_MAX_LEN
)

	)

75 
	#ETHERTYPE_TRAIL
 0x1000

	)

76 
	#ETHERTYPE_NTRAILER
 16

	)

78 
	#ETHERMTU
 
ETH_DATA_LEN


	)

79 
	#ETHERMIN
 (
ETHER_MIN_LEN
 - 
ETHER_HDR_LEN
 - 
ETHER_CRC_LEN
)

	)

81 
	g__END_DECLS


	@/usr/include/net/if.h

19 #i‚de‡
_NET_IF_H


20 
	#_NET_IF_H
 1

	)

22 
	~<„©uªs.h
>

24 #ifde‡
__USE_MISC


25 
	~<sys/ty≥s.h
>

26 
	~<sys/sockë.h
>

31 
	#IF_NAMESIZE
 16

	)

33 
	sif_«meödex


35 
	mif_ödex
;

36 *
	mif_«me
;

40 #ifde‡
__USE_MISC


44 
	mIFF_UP
 = 0x1,

45 
	#IFF_UP
 
IFF_UP


	)

46 
	mIFF_BROADCAST
 = 0x2,

47 
	#IFF_BROADCAST
 
IFF_BROADCAST


	)

48 
	mIFF_DEBUG
 = 0x4,

49 
	#IFF_DEBUG
 
IFF_DEBUG


	)

50 
	mIFF_LOOPBACK
 = 0x8,

51 
	#IFF_LOOPBACK
 
IFF_LOOPBACK


	)

52 
	mIFF_POINTOPOINT
 = 0x10,

53 
	#IFF_POINTOPOINT
 
IFF_POINTOPOINT


	)

54 
	mIFF_NOTRAILERS
 = 0x20,

55 
	#IFF_NOTRAILERS
 
IFF_NOTRAILERS


	)

56 
	mIFF_RUNNING
 = 0x40,

57 
	#IFF_RUNNING
 
IFF_RUNNING


	)

58 
	mIFF_NOARP
 = 0x80,

59 
	#IFF_NOARP
 
IFF_NOARP


	)

60 
	mIFF_PROMISC
 = 0x100,

61 
	#IFF_PROMISC
 
IFF_PROMISC


	)

64 
	mIFF_ALLMULTI
 = 0x200,

65 
	#IFF_ALLMULTI
 
IFF_ALLMULTI


	)

67 
	mIFF_MASTER
 = 0x400,

68 
	#IFF_MASTER
 
IFF_MASTER


	)

69 
	mIFF_SLAVE
 = 0x800,

70 
	#IFF_SLAVE
 
IFF_SLAVE


	)

72 
	mIFF_MULTICAST
 = 0x1000,

73 
	#IFF_MULTICAST
 
IFF_MULTICAST


	)

75 
	mIFF_PORTSEL
 = 0x2000,

76 
	#IFF_PORTSEL
 
IFF_PORTSEL


	)

77 
	mIFF_AUTOMEDIA
 = 0x4000,

78 
	#IFF_AUTOMEDIA
 
IFF_AUTOMEDIA


	)

79 
	mIFF_DYNAMIC
 = 0x8000

80 
	#IFF_DYNAMIC
 
IFF_DYNAMIC


	)

88 
	siÁddr


90 
sockaddr
 
	miÁ_addr
;

93 
sockaddr
 
	mifu_brﬂdaddr
;

94 
sockaddr
 
	mifu_d°addr
;

95 } 
	miÁ_ifu
;

96 
iÁ˚
 *
	miÁ_iÂ
;

97 
iÁddr
 *
	miÁ_√xt
;

100 
	#iÁ_brﬂdaddr
 
iÁ_ifu
.
ifu_brﬂdaddr


	)

101 
	#iÁ_d°addr
 
iÁ_ifu
.
ifu_d°addr


	)

111 
	sifm≠


113 
	mmem_°¨t
;

114 
	mmem_íd
;

115 
	mba£_addr
;

116 
	múq
;

117 
	mdma
;

118 
	mp‹t
;

126 
	si‰eq


128 
	#IFHWADDRLEN
 6

	)

129 
	#IFNAMSIZ
 
IF_NAMESIZE


	)

132 
	mi‰n_«me
[
IFNAMSIZ
];

133 } 
	mi‰_i‰n
;

137 
sockaddr
 
	mi‰u_addr
;

138 
sockaddr
 
	mi‰u_d°addr
;

139 
sockaddr
 
	mi‰u_brﬂdaddr
;

140 
sockaddr
 
	mi‰u_√tmask
;

141 
sockaddr
 
	mi‰u_hwaddr
;

142 
	mi‰u_Êags
;

143 
	mi‰u_ivÆue
;

144 
	mi‰u_mtu
;

145 
ifm≠
 
	mi‰u_m≠
;

146 
	mi‰u_¶ave
[
IFNAMSIZ
];

147 
	mi‰u_√w«me
[
IFNAMSIZ
];

148 
__ˇddr_t
 
	mi‰u_d©a
;

149 } 
	mi‰_i‰u
;

151 
	#i‰_«me
 
i‰_i‰n
.
i‰n_«me


	)

152 
	#i‰_hwaddr
 
i‰_i‰u
.
i‰u_hwaddr


	)

153 
	#i‰_addr
 
i‰_i‰u
.
i‰u_addr


	)

154 
	#i‰_d°addr
 
i‰_i‰u
.
i‰u_d°addr


	)

155 
	#i‰_brﬂdaddr
 
i‰_i‰u
.
i‰u_brﬂdaddr


	)

156 
	#i‰_√tmask
 
i‰_i‰u
.
i‰u_√tmask


	)

157 
	#i‰_Êags
 
i‰_i‰u
.
i‰u_Êags


	)

158 
	#i‰_mëric
 
i‰_i‰u
.
i‰u_ivÆue


	)

159 
	#i‰_mtu
 
i‰_i‰u
.
i‰u_mtu


	)

160 
	#i‰_m≠
 
i‰_i‰u
.
i‰u_m≠


	)

161 
	#i‰_¶ave
 
i‰_i‰u
.
i‰u_¶ave


	)

162 
	#i‰_d©a
 
i‰_i‰u
.
i‰u_d©a


	)

163 
	#i‰_ifödex
 
i‰_i‰u
.
i‰u_ivÆue


	)

164 
	#i‰_b™dwidth
 
i‰_i‰u
.
i‰u_ivÆue


	)

165 
	#i‰_qÀn
 
i‰_i‰u
.
i‰u_ivÆue


	)

166 
	#i‰_√w«me
 
i‰_i‰u
.
i‰u_√w«me


	)

167 
	#_IOT_i‰eq
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),16,0,0)

	)

168 
	#_IOT_i‰eq_sh‹t
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

169 
	#_IOT_i‰eq_öt
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

176 
	sifc⁄f


178 
	mifc_Àn
;

181 
__ˇddr_t
 
	mifcu_buf
;

182 
i‰eq
 *
	mifcu_ªq
;

183 } 
	mifc_ifcu
;

185 
	#ifc_buf
 
ifc_ifcu
.
ifcu_buf


	)

186 
	#ifc_ªq
 
ifc_ifcu
.
ifcu_ªq


	)

187 
	#_IOT_ifc⁄f
 
	`_IOT
(
	`_IOTS
(
ifc⁄f
),1,0,0,0,0Ë

	)

190 
__BEGIN_DECLS


193 
	$if_«mëoödex
 (c⁄° *
__i‚ame
Ë
__THROW
;

194 *
	$if_ödext⁄ame
 (
__ifödex
, *
__i‚ame
Ë
__THROW
;

197 
if_«meödex
 *
	$if_«meödex
 (Ë
__THROW
;

200 
	$if_‰ì«meödex
 (
if_«meödex
 *
__±r
Ë
__THROW
;

202 
__END_DECLS


	@/usr/include/net/if_arp.h

22 #i‚de‡
_NET_IF_ARP_H


24 
	#_NET_IF_ARP_H
 1

	)

25 
	~<sys/cdefs.h
>

27 
	~<sys/ty≥s.h
>

28 
	~<sys/sockë.h
>

30 
	g__BEGIN_DECLS


33 
	#MAX_ADDR_LEN
 7

	)

39 
	#ARPOP_REQUEST
 1

	)

40 
	#ARPOP_REPLY
 2

	)

41 
	#ARPOP_RREQUEST
 3

	)

42 
	#ARPOP_RREPLY
 4

	)

43 
	#ARPOP_InREQUEST
 8

	)

44 
	#ARPOP_InREPLY
 9

	)

45 
	#ARPOP_NAK
 10

	)

54 
	s¨phdr


56 
	m¨_hrd
;

57 
	m¨_¥o
;

58 
	m¨_h 
;

59 
	m¨_∂n
;

60 
	m¨_›
;

64 
	m__¨_sha
[
ETH_ALEN
];

65 
	m__¨_sù
[4];

66 
	m__¨_tha
[
ETH_ALEN
];

67 
	m__¨_tù
[4];

73 
	#ARPHRD_NETROM
 0

	)

74 
	#ARPHRD_ETHER
 1

	)

75 
	#ARPHRD_EETHER
 2

	)

76 
	#ARPHRD_AX25
 3

	)

77 
	#ARPHRD_PRONET
 4

	)

78 
	#ARPHRD_CHAOS
 5

	)

79 
	#ARPHRD_IEEE802
 6

	)

80 
	#ARPHRD_ARCNET
 7

	)

81 
	#ARPHRD_APPLETLK
 8

	)

82 
	#ARPHRD_DLCI
 15

	)

83 
	#ARPHRD_ATM
 19

	)

84 
	#ARPHRD_METRICOM
 23

	)

85 
	#ARPHRD_IEEE1394
 24

	)

86 
	#ARPHRD_EUI64
 27

	)

87 
	#ARPHRD_INFINIBAND
 32

	)

90 
	#ARPHRD_SLIP
 256

	)

91 
	#ARPHRD_CSLIP
 257

	)

92 
	#ARPHRD_SLIP6
 258

	)

93 
	#ARPHRD_CSLIP6
 259

	)

94 
	#ARPHRD_RSRVD
 260

	)

95 
	#ARPHRD_ADAPT
 264

	)

96 
	#ARPHRD_ROSE
 270

	)

97 
	#ARPHRD_X25
 271

	)

98 
	#ARPHRD_HWX25
 272

	)

99 
	#ARPHRD_PPP
 512

	)

100 
	#ARPHRD_CISCO
 513

	)

101 
	#ARPHRD_HDLC
 
ARPHRD_CISCO


	)

102 
	#ARPHRD_LAPB
 516

	)

103 
	#ARPHRD_DDCMP
 517

	)

104 
	#ARPHRD_RAWHDLC
 518

	)

106 
	#ARPHRD_TUNNEL
 768

	)

107 
	#ARPHRD_TUNNEL6
 769

	)

108 
	#ARPHRD_FRAD
 770

	)

109 
	#ARPHRD_SKIP
 771

	)

110 
	#ARPHRD_LOOPBACK
 772

	)

111 
	#ARPHRD_LOCALTLK
 773

	)

112 
	#ARPHRD_FDDI
 774

	)

113 
	#ARPHRD_BIF
 775

	)

114 
	#ARPHRD_SIT
 776

	)

115 
	#ARPHRD_IPDDP
 777

	)

116 
	#ARPHRD_IPGRE
 778

	)

117 
	#ARPHRD_PIMREG
 779

	)

118 
	#ARPHRD_HIPPI
 780

	)

119 
	#ARPHRD_ASH
 781

	)

120 
	#ARPHRD_ECONET
 782

	)

121 
	#ARPHRD_IRDA
 783

	)

122 
	#ARPHRD_FCPP
 784

	)

123 
	#ARPHRD_FCAL
 785

	)

124 
	#ARPHRD_FCPL
 786

	)

125 
	#ARPHRD_FCFABRIC
 787

	)

126 
	#ARPHRD_IEEE802_TR
 800

	)

127 
	#ARPHRD_IEEE80211
 801

	)

128 
	#ARPHRD_IEEE80211_PRISM
 802

	)

129 
	#ARPHRD_IEEE80211_RADIOTAP
 803

	)

130 
	#ARPHRD_IEEE802154
 804

	)

131 
	#ARPHRD_IEEE802154_PHY
 805

	)

133 
	#ARPHRD_VOID
 0xFFFF

	)

134 
	#ARPHRD_NONE
 0xFFFE

	)

138 
	s¨¥eq


140 
sockaddr
 
	m¨p_∑
;

141 
sockaddr
 
	m¨p_ha
;

142 
	m¨p_Êags
;

143 
sockaddr
 
	m¨p_√tmask
;

144 
	m¨p_dev
[16];

147 
	s¨¥eq_ﬁd


149 
sockaddr
 
	m¨p_∑
;

150 
sockaddr
 
	m¨p_ha
;

151 
	m¨p_Êags
;

152 
sockaddr
 
	m¨p_√tmask
;

156 
	#ATF_COM
 0x02

	)

157 
	#ATF_PERM
 0x04

	)

158 
	#ATF_PUBL
 0x08

	)

159 
	#ATF_USETRAILERS
 0x10

	)

160 
	#ATF_NETMASK
 0x20

	)

162 
	#ATF_DONTPUB
 0x40

	)

163 
	#ATF_MAGIC
 0x80

	)

167 
	#ARPD_UPDATE
 0x01

	)

168 
	#ARPD_LOOKUP
 0x02

	)

169 
	#ARPD_FLUSH
 0x03

	)

171 
	s¨pd_ªque°


173 
	mªq
;

174 
u_öt32_t
 
	mù
;

175 
	mdev
;

176 
	m°amp
;

177 
	mupd©ed
;

178 
	mha
[
MAX_ADDR_LEN
];

181 
	g__END_DECLS


	@/usr/include/netinet/if_ether.h

18 #i‚de‡
__NETINET_IF_ETHER_H


20 
	#__NETINET_IF_ETHER_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<sys/ty≥s.h
>

25 
	~<löux/if_ëhî.h
>

27 #ifde‡
__USE_BSD


60 
	~<√t/ëhî√t.h
>

61 
	~<√t/if_¨p.h
>

63 
__BEGIN_DECLS


71 
	sëhî_¨p
 {

72 
¨phdr
 
	mó_hdr
;

73 
u_öt8_t
 
	m¨p_sha
[
ETH_ALEN
];

74 
u_öt8_t
 
	m¨p_•a
[4];

75 
u_öt8_t
 
	m¨p_tha
[
ETH_ALEN
];

76 
u_öt8_t
 
	m¨p_ça
[4];

78 
	#¨p_hrd
 
ó_hdr
.
¨_hrd


	)

79 
	#¨p_¥o
 
ó_hdr
.
¨_¥o


	)

80 
	#¨p_h 
 
ó_hdr
.
¨_h 


	)

81 
	#¨p_∂n
 
ó_hdr
.
¨_∂n


	)

82 
	#¨p_›
 
ó_hdr
.
¨_›


	)

89 
	#ETHER_MAP_IP_MULTICAST
(
ùaddr
, 
íaddr
) \

93 (
íaddr
)[0] = 0x01; \

94 (
íaddr
)[1] = 0x00; \

95 (
íaddr
)[2] = 0x5e; \

96 (
íaddr
)[3] = ((
u_öt8_t
 *)
ùaddr
)[1] & 0x7f; \

97 (
íaddr
)[4] = ((
u_öt8_t
 *)
ùaddr
)[2]; \

98 (
íaddr
)[5] = ((
u_öt8_t
 *)
ùaddr
)[3]; \

99 }

	)

101 
	g__END_DECLS


	@/usr/include/netinet/in.h

18 #i‚def 
_NETINET_IN_H


19 
	#_NETINET_IN_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<°döt.h
>

23 
	~<sys/sockë.h
>

24 
	~<bôs/ty≥s.h
>

27 
__BEGIN_DECLS


30 
uöt32_t
 
	tö_addr_t
;

31 
	sö_addr


33 
ö_addr_t
 
	ms_addr
;

37 
	~<bôs/ö.h
>

42 
	mIPPROTO_IP
 = 0,

43 
	#IPPROTO_IP
 
IPPROTO_IP


	)

44 
	mIPPROTO_ICMP
 = 1,

45 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

46 
	mIPPROTO_IGMP
 = 2,

47 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

48 
	mIPPROTO_IPIP
 = 4,

49 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

50 
	mIPPROTO_TCP
 = 6,

51 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

52 
	mIPPROTO_EGP
 = 8,

53 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

54 
	mIPPROTO_PUP
 = 12,

55 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

56 
	mIPPROTO_UDP
 = 17,

57 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

58 
	mIPPROTO_IDP
 = 22,

59 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

60 
	mIPPROTO_TP
 = 29,

61 
	#IPPROTO_TP
 
IPPROTO_TP


	)

62 
	mIPPROTO_DCCP
 = 33,

63 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

64 
	mIPPROTO_IPV6
 = 41,

65 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

66 
	mIPPROTO_RSVP
 = 46,

67 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

68 
	mIPPROTO_GRE
 = 47,

69 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

70 
	mIPPROTO_ESP
 = 50,

71 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

72 
	mIPPROTO_AH
 = 51,

73 
	#IPPROTO_AH
 
IPPROTO_AH


	)

74 
	mIPPROTO_MTP
 = 92,

75 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

76 
	mIPPROTO_BEETPH
 = 94,

77 
	#IPPROTO_BEETPH
 
IPPROTO_BEETPH


	)

78 
	mIPPROTO_ENCAP
 = 98,

79 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

80 
	mIPPROTO_PIM
 = 103,

81 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

82 
	mIPPROTO_COMP
 = 108,

83 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

84 
	mIPPROTO_SCTP
 = 132,

85 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

86 
	mIPPROTO_UDPLITE
 = 136,

87 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

88 
	mIPPROTO_RAW
 = 255,

89 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

90 
	mIPPROTO_MAX


96 #i‚de‡
__USE_KERNEL_IPV6_DEFS


99 
	mIPPROTO_HOPOPTS
 = 0,

100 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

101 
	mIPPROTO_ROUTING
 = 43,

102 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

103 
	mIPPROTO_FRAGMENT
 = 44,

104 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

105 
	mIPPROTO_ICMPV6
 = 58,

106 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

107 
	mIPPROTO_NONE
 = 59,

108 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

109 
	mIPPROTO_DSTOPTS
 = 60,

110 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

111 
	mIPPROTO_MH
 = 135

112 
	#IPPROTO_MH
 
IPPROTO_MH


	)

117 
uöt16_t
 
	tö_p‹t_t
;

122 
	mIPPORT_ECHO
 = 7,

123 
	mIPPORT_DISCARD
 = 9,

124 
	mIPPORT_SYSTAT
 = 11,

125 
	mIPPORT_DAYTIME
 = 13,

126 
	mIPPORT_NETSTAT
 = 15,

127 
	mIPPORT_FTP
 = 21,

128 
	mIPPORT_TELNET
 = 23,

129 
	mIPPORT_SMTP
 = 25,

130 
	mIPPORT_TIMESERVER
 = 37,

131 
	mIPPORT_NAMESERVER
 = 42,

132 
	mIPPORT_WHOIS
 = 43,

133 
	mIPPORT_MTP
 = 57,

135 
	mIPPORT_TFTP
 = 69,

136 
	mIPPORT_RJE
 = 77,

137 
	mIPPORT_FINGER
 = 79,

138 
	mIPPORT_TTYLINK
 = 87,

139 
	mIPPORT_SUPDUP
 = 95,

142 
	mIPPORT_EXECSERVER
 = 512,

143 
	mIPPORT_LOGINSERVER
 = 513,

144 
	mIPPORT_CMDSERVER
 = 514,

145 
	mIPPORT_EFSSERVER
 = 520,

148 
	mIPPORT_BIFFUDP
 = 512,

149 
	mIPPORT_WHOSERVER
 = 513,

150 
	mIPPORT_ROUTESERVER
 = 520,

153 
	mIPPORT_RESERVED
 = 1024,

156 
	mIPPORT_USERRESERVED
 = 5000

164 
	#IN_CLASSA
(
a
Ë((((
ö_addr_t
)◊)Ë& 0x80000000Ë=0)

	)

165 
	#IN_CLASSA_NET
 0xff000000

	)

166 
	#IN_CLASSA_NSHIFT
 24

	)

167 
	#IN_CLASSA_HOST
 (0xfffffff‡& ~
IN_CLASSA_NET
)

	)

168 
	#IN_CLASSA_MAX
 128

	)

170 
	#IN_CLASSB
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xc0000000Ë=0x80000000)

	)

171 
	#IN_CLASSB_NET
 0xffff0000

	)

172 
	#IN_CLASSB_NSHIFT
 16

	)

173 
	#IN_CLASSB_HOST
 (0xfffffff‡& ~
IN_CLASSB_NET
)

	)

174 
	#IN_CLASSB_MAX
 65536

	)

176 
	#IN_CLASSC
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xc0000000)

	)

177 
	#IN_CLASSC_NET
 0xffffff00

	)

178 
	#IN_CLASSC_NSHIFT
 8

	)

179 
	#IN_CLASSC_HOST
 (0xfffffff‡& ~
IN_CLASSC_NET
)

	)

181 
	#IN_CLASSD
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xe0000000)

	)

182 
	#IN_MULTICAST
(
a
Ë
	`IN_CLASSD
◊)

	)

184 
	#IN_EXPERIMENTAL
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xe0000000)

	)

185 
	#IN_BADCLASS
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xf0000000)

	)

188 
	#INADDR_ANY
 ((
ö_addr_t
Ë0x00000000)

	)

190 
	#INADDR_BROADCAST
 ((
ö_addr_t
Ë0xffffffff)

	)

192 
	#INADDR_NONE
 ((
ö_addr_t
Ë0xffffffff)

	)

195 
	#IN_LOOPBACKNET
 127

	)

197 #i‚de‡
INADDR_LOOPBACK


198 
	#INADDR_LOOPBACK
 ((
ö_addr_t
Ë0x7f000001Ë

	)

202 
	#INADDR_UNSPEC_GROUP
 ((
ö_addr_t
Ë0xe0000000Ë

	)

203 
	#INADDR_ALLHOSTS_GROUP
 ((
ö_addr_t
Ë0xe0000001Ë

	)

204 
	#INADDR_ALLRTRS_GROUP
 ((
ö_addr_t
Ë0xe0000002Ë

	)

205 
	#INADDR_MAX_LOCAL_GROUP
 ((
ö_addr_t
Ë0xe00000ffË

	)

207 #i‚de‡
__USE_KERNEL_IPV6_DEFS


209 
	sö6_addr


213 
uöt8_t
 
	m__u6_addr8
[16];

214 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


215 
uöt16_t
 
	m__u6_addr16
[8];

216 
uöt32_t
 
	m__u6_addr32
[4];

218 } 
	m__ö6_u
;

219 
	#s6_addr
 
__ö6_u
.
__u6_addr8


	)

220 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


221 
	#s6_addr16
 
__ö6_u
.
__u6_addr16


	)

222 
	#s6_addr32
 
__ö6_u
.
__u6_addr32


	)

227 c⁄° 
ö6_addr
 
ö6addr_™y
;

228 c⁄° 
ö6_addr
 
ö6addr_lo›back
;

229 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

230 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

232 
	#INET_ADDRSTRLEN
 16

	)

233 
	#INET6_ADDRSTRLEN
 46

	)

237 
	ssockaddr_ö


239 
__SOCKADDR_COMMON
 (
sö_
);

240 
ö_p‹t_t
 
	msö_p‹t
;

241 
ö_addr
 
	msö_addr
;

244 
	msö_zîo
[ (
sockaddr
) -

245 
__SOCKADDR_COMMON_SIZE
 -

246  (
ö_p‹t_t
) -

247  (
ö_addr
)];

250 #i‚de‡
__USE_KERNEL_IPV6_DEFS


252 
	ssockaddr_ö6


254 
__SOCKADDR_COMMON
 (
sö6_
);

255 
ö_p‹t_t
 
	msö6_p‹t
;

256 
uöt32_t
 
	msö6_Êowöfo
;

257 
ö6_addr
 
	msö6_addr
;

258 
uöt32_t
 
	msö6_sc›e_id
;

262 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


264 
	sù_mªq


267 
ö_addr
 
	mimr_mu…üddr
;

270 
ö_addr
 
	mimr_öãrÁ˚
;

273 
	sù_mªq_sour˚


276 
ö_addr
 
	mimr_mu…üddr
;

279 
ö_addr
 
	mimr_öãrÁ˚
;

282 
ö_addr
 
	mimr_sour˚addr
;

286 #i‚de‡
__USE_KERNEL_IPV6_DEFS


288 
	sùv6_mªq


291 
ö6_addr
 
	mùv6mr_mu…üddr
;

294 
	mùv6mr_öãrÁ˚
;

298 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


300 
	sgroup_ªq


303 
uöt32_t
 
	mgr_öãrÁ˚
;

306 
sockaddr_°‹age
 
	mgr_group
;

309 
	sgroup_sour˚_ªq


312 
uöt32_t
 
	mg§_öãrÁ˚
;

315 
sockaddr_°‹age
 
	mg§_group
;

318 
sockaddr_°‹age
 
	mg§_sour˚
;

323 
	sù_msfûãr


326 
ö_addr
 
	mimsf_mu…üddr
;

329 
ö_addr
 
	mimsf_öãrÁ˚
;

332 
uöt32_t
 
	mimsf_fmode
;

335 
uöt32_t
 
	mimsf_num§c
;

337 
ö_addr
 
	mimsf_¶i°
[1];

340 
	#IP_MSFILTER_SIZE
(
num§c
Ë( (
ù_msfûãr
) \

341 -  (
ö_addr
) \

342 + (
num§c
Ë*  (
ö_addr
))

	)

344 
	sgroup_fûãr


347 
uöt32_t
 
	mgf_öãrÁ˚
;

350 
sockaddr_°‹age
 
	mgf_group
;

353 
uöt32_t
 
	mgf_fmode
;

356 
uöt32_t
 
	mgf_num§c
;

358 
sockaddr_°‹age
 
	mgf_¶i°
[1];

361 
	#GROUP_FILTER_SIZE
(
num§c
Ë( (
group_fûãr
) \

362 -  (
sockaddr_°‹age
) \

363 + ((
num§c
) \

364 *  (
sockaddr_°‹age
)))

	)

374 
uöt32_t
 
	$¡ohl
 (
uöt32_t
 
__√é⁄g
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

375 
uöt16_t
 
	$¡ohs
 (
uöt16_t
 
__√tsh‹t
)

376 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

377 
uöt32_t
 
	$ht⁄l
 (
uöt32_t
 
__ho°l⁄g
)

378 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

379 
uöt16_t
 
	$ht⁄s
 (
uöt16_t
 
__ho°sh‹t
)

380 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

382 
	~<ídün.h
>

385 
	~<bôs/byãsw≠.h
>

387 #ifde‡
__OPTIMIZE__


391 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


394 
	#¡ohl
(
x
Ë(x)

	)

395 
	#¡ohs
(
x
Ë(x)

	)

396 
	#ht⁄l
(
x
Ë(x)

	)

397 
	#ht⁄s
(
x
Ë(x)

	)

399 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


400 
	#¡ohl
(
x
Ë
	`__bsw≠_32
 (x)

	)

401 
	#¡ohs
(
x
Ë
	`__bsw≠_16
 (x)

	)

402 
	#ht⁄l
(
x
Ë
	`__bsw≠_32
 (x)

	)

403 
	#ht⁄s
(
x
Ë
	`__bsw≠_16
 (x)

	)

408 #ifde‡
__GNUC__


409 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

410 (
__exãnsi⁄__
 \

411 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

412 
__a
->
s6_addr32
[0] == 0 \

413 && 
__a
->
s6_addr32
[1] == 0 \

414 && 
__a
->
s6_addr32
[2] == 0 \

415 && 
__a
->
s6_addr32
[3] =0; 
	}
}))

	)

417 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

418 (
__exãnsi⁄__
 \

419 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

420 
__a
->
s6_addr32
[0] == 0 \

421 && 
__a
->
s6_addr32
[1] == 0 \

422 && 
__a
->
s6_addr32
[2] == 0 \

423 && 
__a
->
s6_addr32
[3] =
	`ht⁄l
 (1); }))

	)

425 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

426 (
__exãnsi⁄__
 \

427 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

428 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„800000); }))

	)

430 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

431 (
__exãnsi⁄__
 \

432 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

433 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„c00000); }))

	)

435 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

436 (
__exãnsi⁄__
 \

437 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

438 
__a
->
s6_addr32
[0] == 0 \

439 && 
__a
->
s6_addr32
[1] == 0 \

440 && 
__a
->
s6_addr32
[2] =
	`ht⁄l
 (0xffff); }))

	)

442 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

443 (
__exãnsi⁄__
 \

444 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

445 
__a
->
s6_addr32
[0] == 0 \

446 && 
__a
->
s6_addr32
[1] == 0 \

447 && 
__a
->
s6_addr32
[2] == 0 \

448 && 
	`¡ohl
 (
__a
->
s6_addr32
[3]Ë> 1; }))

	)

450 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

451 (
__exãnsi⁄__
 \

452 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

453 c⁄° 
ö6_addr
 *
__b
 = (c⁄° ö6_add∏*Ë(
b
); \

454 
__a
->
s6_addr32
[0] =
__b
->s6_addr32[0] \

455 && 
__a
->
s6_addr32
[1] =
__b
->s6_addr32[1] \

456 && 
__a
->
s6_addr32
[2] =
__b
->s6_addr32[2] \

457 && 
__a
->
s6_addr32
[3] =
__b
->s6_addr32[3]; }))

	)

459 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

460 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

461 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

462 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

463 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =0)

	)

465 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

466 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

467 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

468 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

469 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =
	`ht⁄l
 (1))

	)

471 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

472 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

473 =
	`ht⁄l
 (0x„800000))

	)

475 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

476 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

477 =
	`ht⁄l
 (0x„c00000))

	)

479 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

480 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

481 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

482 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =
	`ht⁄l
 (0xffff)))

	)

484 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

485 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

486 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

487 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0) \

488 && (
	`¡ohl
 (((c⁄° 
uöt32_t
 *Ë(
a
))[3]Ë> 1))

	)

490 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

491 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] =((c⁄° uöt32_à*Ë(
b
))[0]) \

492 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] =((c⁄° uöt32_à*Ë(
b
))[1]) \

493 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =((c⁄° uöt32_à*Ë(
b
))[2]) \

494 && (((c⁄° 
uöt32_t
 *Ë(
a
))[3] =((c⁄° uöt32_à*Ë(
b
))[3]))

	)

497 
	#IN6_IS_ADDR_MULTICAST
(
a
Ë(((c⁄° 
uöt8_t
 *Ë◊))[0] =0xff)

	)

499 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


501 
	$bödªsvp‹t
 (
__sockfd
, 
sockaddr_ö
 *
__sock_ö
Ë
__THROW
;

504 
	$bödªsvp‹t6
 (
__sockfd
, 
sockaddr_ö6
 *
__sock_ö
)

505 
__THROW
;

509 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

510 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

511 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x1))

	)

513 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

514 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

515 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x2))

	)

517 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

518 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

519 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x5))

	)

521 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

522 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

523 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x8))

	)

525 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

526 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

527 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0xe))

	)

530 #ifde‡
__USE_GNU


531 
cmsghdr
;

534 
	sö6_pktöfo


536 
ö6_addr
 
ùi6_addr
;

537 
ùi6_ifödex
;

541 
	sù6_mtuöfo


543 
sockaddr_ö6
 
ù6m_addr
;

544 
uöt32_t
 
ù6m_mtu
;

549 
	$öë6_›ti⁄_•a˚
 (
__nbyãs
)

550 
__THROW
 
__©åibuã_dïªˇãd__
;

551 
	$öë6_›ti⁄_öô
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

552 
__ty≥
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

553 
	$öë6_›ti⁄_≠≥nd
 (
cmsghdr
 *
__cmsg
,

554 c⁄° 
uöt8_t
 *
__ty≥p
, 
__mu…x
,

555 
__∂usy
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

556 
uöt8_t
 *
	$öë6_›ti⁄_Æloc
 (
cmsghdr
 *
__cmsg
, 
__d©Æí
,

557 
__mu…x
, 
__∂usy
)

558 
__THROW
 
__©åibuã_dïªˇãd__
;

559 
	$öë6_›ti⁄_√xt
 (c⁄° 
cmsghdr
 *
__cmsg
,

560 
uöt8_t
 **
__çåp
)

561 
__THROW
 
__©åibuã_dïªˇãd__
;

562 
	$öë6_›ti⁄_föd
 (c⁄° 
cmsghdr
 *
__cmsg
,

563 
uöt8_t
 **
__çåp
, 
__ty≥
)

564 
__THROW
 
__©åibuã_dïªˇãd__
;

568 
	$öë6_›t_öô
 (*
__extbuf
, 
sockÀn_t
 
__exéí
Ë
__THROW
;

569 
	$öë6_›t_≠≥nd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

570 
uöt8_t
 
__ty≥
, 
sockÀn_t
 
__Àn
, uöt8_à
__Æign
,

571 **
__d©abuÂ
Ë
__THROW
;

572 
	$öë6_›t_föish
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
)

573 
__THROW
;

574 
	$öë6_›t_£t_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

575 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

576 
	$öë6_›t_√xt
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

577 
uöt8_t
 *
__ty≥p
, 
sockÀn_t
 *
__À≈
,

578 **
__d©abuÂ
Ë
__THROW
;

579 
	$öë6_›t_föd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

580 
uöt8_t
 
__ty≥
, 
sockÀn_t
 *
__À≈
,

581 **
__d©abuÂ
Ë
__THROW
;

582 
	$öë6_›t_gë_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

583 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

587 
sockÀn_t
 
	$öë6_πh_•a˚
 (
__ty≥
, 
__£gmíts
Ë
__THROW
;

588 *
	$öë6_πh_öô
 (*
__bp
, 
sockÀn_t
 
__bp_Àn
, 
__ty≥
,

589 
__£gmíts
Ë
__THROW
;

590 
	$öë6_πh_add
 (*
__bp
, c⁄° 
ö6_addr
 *
__addr
Ë
__THROW
;

591 
	$öë6_πh_ªvî£
 (c⁄° *
__ö
, *
__out
Ë
__THROW
;

592 
	$öë6_πh_£gmíts
 (c⁄° *
__bp
Ë
__THROW
;

593 
ö6_addr
 *
	$öë6_πh_gëaddr
 (c⁄° *
__bp
, 
__ödex
)

594 
__THROW
;

600 
	$gëùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

601 
ö_addr
 
__group
, 
uöt32_t
 *
__fmode
,

602 
uöt32_t
 *
__num§c
, 
ö_addr
 *
__¶i°
)

603 
__THROW
;

606 
	$£tùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

607 
ö_addr
 
__group
, 
uöt32_t
 
__fmode
,

608 
uöt32_t
 
__num§c
,

609 c⁄° 
ö_addr
 *
__¶i°
)

610 
__THROW
;

614 
	$gësour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

615 c⁄° 
sockaddr
 *
__group
,

616 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 *
__fmode
,

617 
uöt32_t
 *
__num§c
,

618 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

621 
	$£tsour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

622 c⁄° 
sockaddr
 *
__group
,

623 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 
__fmode
,

624 
uöt32_t
 
__num§c
,

625 c⁄° 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

628 
__END_DECLS


	@/usr/include/netinet/in_systm.h

19 #i‚de‡
_NETINET_IN_SYSTM_H


20 
	#_NETINET_IN_SYSTM_H
 1

	)

22 
	~<sys/cdefs.h
>

23 
	~<sys/ty≥s.h
>

25 
__BEGIN_DECLS


34 
u_öt16_t
 
	tn_sh‹t
;

35 
u_öt32_t
 
	tn_l⁄g
;

36 
u_öt32_t
 
	tn_time
;

38 
	g__END_DECLS


	@/usr/include/netinet/ip.h

18 #i‚de‡
__NETINET_IP_H


19 
	#__NETINET_IP_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<sys/ty≥s.h
>

24 
	~<√töë/ö.h
>

26 
__BEGIN_DECLS


28 
	stime°amp


30 
u_öt8_t
 
	mÀn
;

31 
u_öt8_t
 
	m±r
;

32 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


33 
	mÊags
:4;

34 
	movîÊow
:4;

35 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


36 
	movîÊow
:4;

37 
	mÊags
:4;

41 
u_öt32_t
 
	md©a
[9];

44 
	sùhdr


46 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


47 
	mihl
:4;

48 
	mvîsi⁄
:4;

49 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


50 
	mvîsi⁄
:4;

51 
	mihl
:4;

55 
u_öt8_t
 
	mtos
;

56 
u_öt16_t
 
	mtŸ_Àn
;

57 
u_öt16_t
 
	mid
;

58 
u_öt16_t
 
	m‰ag_off
;

59 
u_öt8_t
 
	mâl
;

60 
u_öt8_t
 
	m¥Ÿocﬁ
;

61 
u_öt16_t
 
	mcheck
;

62 
u_öt32_t
 
	mßddr
;

63 
u_öt32_t
 
	mdaddr
;

67 #ifde‡
__USE_BSD


107 
	sù


109 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


110 
	mù_hl
:4;

111 
	mù_v
:4;

113 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


114 
	mù_v
:4;

115 
	mù_hl
:4;

117 
u_öt8_t
 
	mù_tos
;

118 
u_sh‹t
 
	mù_Àn
;

119 
u_sh‹t
 
	mù_id
;

120 
u_sh‹t
 
	mù_off
;

121 
	#IP_RF
 0x8000

	)

122 
	#IP_DF
 0x4000

	)

123 
	#IP_MF
 0x2000

	)

124 
	#IP_OFFMASK
 0x1ff‡

	)

125 
u_öt8_t
 
	mù_âl
;

126 
u_öt8_t
 
	mù_p
;

127 
u_sh‹t
 
	mù_sum
;

128 
ö_addr
 
	mù_§c
, 
	mù_d°
;

134 
	sù_time°amp


136 
u_öt8_t
 
	mùt_code
;

137 
u_öt8_t
 
	mùt_Àn
;

138 
u_öt8_t
 
	mùt_±r
;

139 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


140 
	mùt_Êg
:4;

141 
	mùt_oÊw
:4;

143 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


144 
	mùt_oÊw
:4;

145 
	mùt_Êg
:4;

147 
u_öt32_t
 
	md©a
[9];

151 
	#IPVERSION
 4

	)

152 
	#IP_MAXPACKET
 65535

	)

160 
	#IPTOS_ECN_MASK
 0x03

	)

161 
	#IPTOS_ECN
(
x
Ë((xË& 
IPTOS_ECN_MASK
)

	)

162 
	#IPTOS_ECN_NOT_ECT
 0x00

	)

163 
	#IPTOS_ECN_ECT1
 0x01

	)

164 
	#IPTOS_ECN_ECT0
 0x02

	)

165 
	#IPTOS_ECN_CE
 0x03

	)

173 
	#IPTOS_DSCP_MASK
 0xfc

	)

174 
	#IPTOS_DSCP
(
x
Ë((xË& 
IPTOS_DSCP_MASK
)

	)

175 
	#IPTOS_DSCP_AF11
 0x28

	)

176 
	#IPTOS_DSCP_AF12
 0x30

	)

177 
	#IPTOS_DSCP_AF13
 0x38

	)

178 
	#IPTOS_DSCP_AF21
 0x48

	)

179 
	#IPTOS_DSCP_AF22
 0x50

	)

180 
	#IPTOS_DSCP_AF23
 0x58

	)

181 
	#IPTOS_DSCP_AF31
 0x68

	)

182 
	#IPTOS_DSCP_AF32
 0x70

	)

183 
	#IPTOS_DSCP_AF33
 0x78

	)

184 
	#IPTOS_DSCP_AF41
 0x88

	)

185 
	#IPTOS_DSCP_AF42
 0x90

	)

186 
	#IPTOS_DSCP_AF43
 0x98

	)

187 
	#IPTOS_DSCP_EF
 0xb8

	)

194 
	#IPTOS_CLASS_MASK
 0xe0

	)

195 
	#IPTOS_CLASS
(
˛ass
Ë((˛assË& 
IPTOS_CLASS_MASK
)

	)

196 
	#IPTOS_CLASS_CS0
 0x00

	)

197 
	#IPTOS_CLASS_CS1
 0x20

	)

198 
	#IPTOS_CLASS_CS2
 0x40

	)

199 
	#IPTOS_CLASS_CS3
 0x60

	)

200 
	#IPTOS_CLASS_CS4
 0x80

	)

201 
	#IPTOS_CLASS_CS5
 0xa0

	)

202 
	#IPTOS_CLASS_CS6
 0xc0

	)

203 
	#IPTOS_CLASS_CS7
 0xe0

	)

205 
	#IPTOS_CLASS_DEFAULT
 
IPTOS_CLASS_CS0


	)

211 
	#IPTOS_TOS_MASK
 0x1E

	)

212 
	#IPTOS_TOS
(
tos
Ë(—osË& 
IPTOS_TOS_MASK
)

	)

213 
	#IPTOS_LOWDELAY
 0x10

	)

214 
	#IPTOS_THROUGHPUT
 0x08

	)

215 
	#IPTOS_RELIABILITY
 0x04

	)

216 
	#IPTOS_LOWCOST
 0x02

	)

217 
	#IPTOS_MINCOST
 
IPTOS_LOWCOST


	)

222 
	#IPTOS_PREC_MASK
 
IPTOS_CLASS_MASK


	)

223 
	#IPTOS_PREC
(
tos
Ë
	`IPTOS_CLASS
—os)

	)

224 
	#IPTOS_PREC_NETCONTROL
 
IPTOS_CLASS_CS7


	)

225 
	#IPTOS_PREC_INTERNETCONTROL
 
IPTOS_CLASS_CS6


	)

226 
	#IPTOS_PREC_CRITIC_ECP
 
IPTOS_CLASS_CS5


	)

227 
	#IPTOS_PREC_FLASHOVERRIDE
 
IPTOS_CLASS_CS4


	)

228 
	#IPTOS_PREC_FLASH
 
IPTOS_CLASS_CS3


	)

229 
	#IPTOS_PREC_IMMEDIATE
 
IPTOS_CLASS_CS2


	)

230 
	#IPTOS_PREC_PRIORITY
 
IPTOS_CLASS_CS1


	)

231 
	#IPTOS_PREC_ROUTINE
 
IPTOS_CLASS_CS0


	)

236 
	#IPOPT_COPY
 0x80

	)

237 
	#IPOPT_CLASS_MASK
 0x60

	)

238 
	#IPOPT_NUMBER_MASK
 0x1f

	)

240 
	#IPOPT_COPIED
(
o
Ë((oË& 
IPOPT_COPY
)

	)

241 
	#IPOPT_CLASS
(
o
Ë((oË& 
IPOPT_CLASS_MASK
)

	)

242 
	#IPOPT_NUMBER
(
o
Ë((oË& 
IPOPT_NUMBER_MASK
)

	)

244 
	#IPOPT_CONTROL
 0x00

	)

245 
	#IPOPT_RESERVED1
 0x20

	)

246 
	#IPOPT_DEBMEAS
 0x40

	)

247 
	#IPOPT_MEASUREMENT
 
IPOPT_DEBMEAS


	)

248 
	#IPOPT_RESERVED2
 0x60

	)

250 
	#IPOPT_EOL
 0

	)

251 
	#IPOPT_END
 
IPOPT_EOL


	)

252 
	#IPOPT_NOP
 1

	)

253 
	#IPOPT_NOOP
 
IPOPT_NOP


	)

255 
	#IPOPT_RR
 7

	)

256 
	#IPOPT_TS
 68

	)

257 
	#IPOPT_TIMESTAMP
 
IPOPT_TS


	)

258 
	#IPOPT_SECURITY
 130

	)

259 
	#IPOPT_SEC
 
IPOPT_SECURITY


	)

260 
	#IPOPT_LSRR
 131

	)

261 
	#IPOPT_SATID
 136

	)

262 
	#IPOPT_SID
 
IPOPT_SATID


	)

263 
	#IPOPT_SSRR
 137

	)

264 
	#IPOPT_RA
 148

	)

269 
	#IPOPT_OPTVAL
 0

	)

270 
	#IPOPT_OLEN
 1

	)

271 
	#IPOPT_OFFSET
 2

	)

272 
	#IPOPT_MINOFF
 4

	)

274 
	#MAX_IPOPTLEN
 40

	)

277 
	#IPOPT_TS_TSONLY
 0

	)

278 
	#IPOPT_TS_TSANDADDR
 1

	)

279 
	#IPOPT_TS_PRESPEC
 3

	)

282 
	#IPOPT_SECUR_UNCLASS
 0x0000

	)

283 
	#IPOPT_SECUR_CONFID
 0xf135

	)

284 
	#IPOPT_SECUR_EFTO
 0x789a

	)

285 
	#IPOPT_SECUR_MMMM
 0xbc4d

	)

286 
	#IPOPT_SECUR_RESTR
 0xaf13

	)

287 
	#IPOPT_SECUR_SECRET
 0xd788

	)

288 
	#IPOPT_SECUR_TOPSECRET
 0x6bc5

	)

293 
	#MAXTTL
 255

	)

294 
	#IPDEFTTL
 64

	)

295 
	#IPFRAGTTL
 60

	)

296 
	#IPTTLDEC
 1

	)

298 
	#IP_MSS
 576

	)

300 
	g__END_DECLS


	@/usr/include/signal.h

22 #i‚def 
_SIGNAL_H


24 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	~<bôs/sig£t.h
>

36 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


37 #i‚de‡
__sig_©omic_t_deföed


38 
	#__sig_©omic_t_deföed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #unde‡
__√ed_sig_©omic_t


46 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

47 #i‚de‡
__sig£t_t_deföed


48 
	#__sig£t_t_deföed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #unde‡
__√ed_sig£t_t


54 #ifde‡
_SIGNAL_H


56 
	~<bôs/ty≥s.h
>

57 
	~<bôs/signum.h
>

59 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


60 #i‚de‡
__pid_t_deföed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_deföed


	)

64 #ifde‡
__USE_XOPEN


66 #i‚de‡
__uid_t_deföed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_deföed


	)

72 #ifde‡
__USE_POSIX199309


74 
	#__√ed_time•ec


	)

75 
	~<time.h
>

78 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_XOPEN_EXTENDED


80 
	~<bôs/sigöfo.h
>

85 (*
	t__sigh™dÀr_t
) ();

90 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

91 
__THROW
;

92 #ifde‡
__USE_GNU


93 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifde‡
__USE_BSD


102 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

103 
__THROW
;

106 #ifde‡
__REDIRECT_NTH


107 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

108 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

109 
__sysv_sig«l
);

111 
	#sig«l
 
__sysv_sig«l


	)

114 
__END_NAMESPACE_STD


116 #ifde‡
__USE_XOPEN


119 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

120 
__THROW
;

126 #ifde‡
__USE_POSIX


127 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

130 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


134 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$øi£
 (
__sig
Ë
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifde‡
__USE_SVID


144 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

145 
__THROW
;

146 
	$gsig«l
 (
__sig
Ë
__THROW
;

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K


151 
	`psig«l
 (
__sig
, c⁄° *
__s
);

154 #ifde‡
__USE_XOPEN2K


156 
	`psigöfo
 (c⁄° 
sigöfo_t
 *
__pöfo
, c⁄° *
__s
);

167 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

169 #ifde‡
__USE_XOPEN


170 #ifde‡
__GNUC__


171 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

174 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

179 #ifde‡
__USE_BSD


186 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

189 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

192 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

195 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

199 #ifde‡
__USE_MISC


200 
	#NSIG
 
_NSIG


	)

203 #ifde‡
__USE_GNU


204 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

208 #ifde‡
__USE_BSD


209 
__sigh™dÀr_t
 
	tsig_t
;

212 #ifde‡
__USE_POSIX


215 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

218 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

221 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

224 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

227 
	$sigismembî
 (c⁄° 
sig£t_t
 *
__£t
, 
__signo
)

228 
__THROW
 
	`__n⁄nuŒ
 ((1));

230 #ifde‡
__USE_GNU


232 
	$sigi£m±y£t
 (c⁄° 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

235 
	$sig™d£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

236 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

239 
	$sig‹£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

240 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

245 
	~<bôs/siga˘i⁄.h
>

248 
	$sig¥ocmask
 (
__how
, c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

249 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

256 
	$sigsu•íd
 (c⁄° 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

259 
	$siga˘i⁄
 (
__sig
, c⁄° 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

260 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

263 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

270 
	$sigwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

271 
	`__n⁄nuŒ
 ((1, 2));

273 #ifde‡
__USE_POSIX199309


278 
	$sigwaôöfo
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

279 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

286 
	$sigtimedwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

287 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

288 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
)

289 
	`__n⁄nuŒ
 ((1));

293 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, c⁄° 
sigvÆ
 
__vÆ
)

294 
__THROW
;

299 #ifde‡
__USE_BSD


303 c⁄° *c⁄° 
_sys_sigli°
[
_NSIG
];

304 c⁄° *c⁄° 
sys_sigli°
[
_NSIG
];

307 
	ssigvec


309 
__sigh™dÀr_t
 
sv_h™dÀr
;

310 
sv_mask
;

312 
sv_Êags
;

313 
	#sv_⁄°ack
 
sv_Êags


	)

317 
	#SV_ONSTACK
 (1 << 0)

	)

318 
	#SV_INTERRUPT
 (1 << 1)

	)

319 
	#SV_RESETHAND
 (1 << 2)

	)

327 
	$sigvec
 (
__sig
, c⁄° 
sigvec
 *
__vec
,

328 
sigvec
 *
__ovec
Ë
__THROW
;

332 
	~<bôs/sigc⁄ãxt.h
>

335 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

340 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


341 
	#__√ed_size_t


	)

342 
	~<°ddef.h
>

347 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

349 
	~<bôs/sig°ack.h
>

350 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


352 
	~<sys/uc⁄ãxt.h
>

358 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

359 
__THROW
 
__©åibuã_dïªˇãd__
;

363 
	$sigÆt°ack
 (c⁄° 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

364 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

368 #ifde‡
__USE_XOPEN_EXTENDED


372 
	$sighﬁd
 (
__sig
Ë
__THROW
;

375 
	$sigªl£
 (
__sig
Ë
__THROW
;

378 
	$sigign‹e
 (
__sig
Ë
__THROW
;

381 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

384 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


387 
	~<bôs/±hªadty≥s.h
>

388 
	~<bôs/sigthªad.h
>

395 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

397 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

401 
__END_DECLS


	@/usr/include/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

144 #i‡
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
Ë¯## 
L


	)

146 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

148 
	#__INT64_C
(
c
Ë¯## 
LL


	)

149 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #i‡
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #i‡
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #i‡
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #i‡
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #i‡
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #i‡
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 
	#SIZE_MAX
 (4294967295U)

	)

267 #i‚de‡
WCHAR_MIN


269 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

270 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

274 
	#WINT_MIN
 (0u)

	)

275 
	#WINT_MAX
 (4294967295u)

	)

278 
	#INT8_C
(
c
Ë
	)
c

279 
	#INT16_C
(
c
Ë
	)
c

280 
	#INT32_C
(
c
Ë
	)
c

281 #i‡
__WORDSIZE
 == 64

282 
	#INT64_C
(
c
Ë¯## 
L


	)

284 
	#INT64_C
(
c
Ë¯## 
LL


	)

288 
	#UINT8_C
(
c
Ë
	)
c

289 
	#UINT16_C
(
c
Ë
	)
c

290 
	#UINT32_C
(
c
Ë¯## 
U


	)

291 #i‡
__WORDSIZE
 == 64

292 
	#UINT64_C
(
c
Ë¯## 
UL


	)

294 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

298 #i‡
__WORDSIZE
 == 64

299 
	#INTMAX_C
(
c
Ë¯## 
L


	)

300 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

302 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

303 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

868 
deföed
 
__USE_MISC
)

873 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

879 
	`p˛o£
 (
FILE
 *
__°ªam
);

883 #ifdef 
__USE_POSIX


885 *
	$˘îmid
 (*
__s
Ë
__THROW
;

889 #ifde‡
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob°ack
;

899 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

900 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

901 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

902 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

903 c⁄° *
__ª°ri˘
 
__f‹m©
,

904 
_G_va_li°
 
__¨gs
)

905 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

909 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


913 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

917 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

920 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

923 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


927 
	#__√ed_gë›t


	)

928 
	~<gë›t.h
>

933 #ifde‡
__USE_EXTERN_INLINES


934 
	~<bôs/°dio.h
>

936 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


937 
	~<bôs/°dio2.h
>

939 #ifde‡
__LDBL_COMPAT


940 
	~<bôs/°dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_BSD


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifde‡
__USE_BSD


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__exãnsi⁄__
 
__a
;

423 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

424 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

425 
	$î™d48_r
 (
__xsubi
[3],

426 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

427 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

431 *
__ª°ri˘
 
__ªsu…
)

432 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

433 
	$ƒ™d48_r
 (
__xsubi
[3],

434 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

435 *
__ª°ri˘
 
__ªsu…
)

436 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

439 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

442 
	$jønd48_r
 (
__xsubi
[3],

443 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

444 *
__ª°ri˘
 
__ªsu…
)

445 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

448 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

449 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$lc⁄g48_r
 (
__∑øm
[7],

455 
dønd48_d©a
 *
__buf„r
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

462 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


463 
	#__mÆloc_™d_ˇŒoc_deföed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

468 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

469 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

483 
	$‰ì
 (*
__±r
Ë
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$c‰ì
 (*
__±r
Ë
__THROW
;

491 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


492 
	~<Æloˇ.h
>

495 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

496 || 
deföed
 
__USE_BSD


498 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

501 #ifde‡
__USE_XOPEN2K


503 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

504 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

507 #ifde‡
__USE_ISOC11


509 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

510 
__THROW
 
__©åibuã_mÆloc__
 
	`__©åibuã_Æloc_size__
 ((2)Ë
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

519 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

521 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


523 #ifde‡
__˝lu•lus


524 "C++" 
	`©_quick_exô
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

527 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

536 
__THROW
 
	`__n⁄nuŒ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

545 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


549 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

551 
__END_NAMESPACE_STD


553 #ifde‡
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

565 
__END_NAMESPACE_STD


567 #ifde‡
__USE_GNU


570 *
	$£cuª_gëív
 (c⁄° *
__«me
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

574 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


578 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

581 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


584 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

585 
__THROW
 
	`__n⁄nuŒ
 ((2));

588 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$˛óªnv
 (Ë
__THROW
;

599 #i‡
deföed
 
__USE_MISC
 \

600 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

609 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

610 || 
deföed
 
__USE_XOPEN2K8


619 #i‚de‡
__USE_FILE_OFFSET64


620 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

622 #ifde‡
__REDIRECT


623 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

624 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

626 
	#mk°emp
 
mk°emp64


	)

629 #ifde‡
__USE_LARGEFILE64


630 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

634 #ifde‡
__USE_MISC


641 #i‚de‡
__USE_FILE_OFFSET64


642 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

644 #ifde‡
__REDIRECT


645 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

646 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

648 
	#mk°emps
 
mk°emps64


	)

651 #ifde‡
__USE_LARGEFILE64


652 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

653 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

657 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


663 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

666 #ifde‡
__USE_GNU


673 #i‚de‡
__USE_FILE_OFFSET64


674 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

676 #ifde‡
__REDIRECT


677 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

678 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

680 
	#mko°emp
 
mko°emp64


	)

683 #ifde‡
__USE_LARGEFILE64


684 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

693 #i‚de‡
__USE_FILE_OFFSET64


694 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

695 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

697 #ifde‡
__REDIRECT


698 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

699 
__Êags
), 
mko°emps64
)

700 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

702 
	#mko°emps
 
mko°emps64


	)

705 #ifde‡
__USE_LARGEFILE64


706 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

707 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

725 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

728 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


734 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

735 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

740 #i‚de‡
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com∑r_‚_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

748 #ifde‡
__USE_GNU


749 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

756 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

757 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

759 #ifde‡
__USE_EXTERN_INLINES


760 
	~<bôs/°dlib-b£¨ch.h
>

765 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

766 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

767 #ifde‡
__USE_GNU


768 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

769 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

770 
	`__n⁄nuŒ
 ((1, 4));

775 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

776 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

777 
__END_NAMESPACE_STD


779 #ifde‡
__USE_ISOC99


780 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

781 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__numî
, 
__díom
)

790 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

792 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

793 
__END_NAMESPACE_STD


795 #ifde‡
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

798 
__díom
)

799 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

800 
__END_NAMESPACE_C99


804 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

805 || 
deföed
 
__USE_SVID


812 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

813 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

818 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

819 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

824 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

825 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

828 #ifde‡
__USE_MISC


830 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

831 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

832 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

833 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

834 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

835 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

836 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

837 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

842 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

843 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

844 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

846 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

847 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

850 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

851 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

852 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

854 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

855 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

856 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
;

866 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

867 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

870 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
;

874 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

875 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

877 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

878 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifde‡
__USE_SVID


888 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

892 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


899 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

900 *c⁄° *
__ª°ri˘
 
__tokís
,

901 **
__ª°ri˘
 
__vÆuï
)

902 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

906 #ifde‡
__USE_XOPEN


908 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

914 #ifde‡
__USE_XOPEN2KXSI


916 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

919 #ifde‡
__USE_XOPEN


924 
	$gø¡±
 (
__fd
Ë
__THROW
;

928 
	$u∆ock±
 (
__fd
Ë
__THROW
;

933 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

936 #ifde‡
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

941 
__THROW
 
	`__n⁄nuŒ
 ((2));

944 
	`gë±
 ();

947 #ifde‡
__USE_BSD


951 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

952 
__THROW
 
	`__n⁄nuŒ
 ((1));

955 
	~<bôs/°dlib-Êﬂt.h
>

958 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


959 
	~<bôs/°dlib.h
>

961 #ifde‡
__LDBL_COMPAT


962 
	~<bôs/°dlib-ldbl.h
>

966 #unde‡
__√ed_mÆloc_™d_ˇŒoc


968 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

39 #i‡
deföed
 
__˝lu•lus
 && (__˝lu•lu†>199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

47 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

50 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

51 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


58 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

69 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

73 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

78 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

81 #ifde‡
__OPTIMIZE__


82 
__exã∫_Æways_ölöe
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


85  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

88 
__exã∫_Æways_ölöe
 const *

89 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


91  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifde‡
__USE_GNU


104 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

107 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

110 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

111 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

115 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

118 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

121 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

132 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

133 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

137 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

138 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

141 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

144 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

151 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

152 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

154 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

155 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

156 
__THROW
 
	`__n⁄nuŒ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifde‡
__USE_XOPEN2K8


163 
	~<xloˇÀ.h
>

166 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

167 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

169 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

170 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

173 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

174 || 
deföed
 
__USE_XOPEN2K8


176 *
	$°rdup
 (c⁄° *
__s
)

177 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

183 #i‡
deföed
 
__USE_XOPEN2K8


184 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

185 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

188 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


190 
	#°rdu∑
(
s
) \

191 (
__exãnsi⁄__
 \

193 c⁄° *
__ﬁd
 = (
s
); \

194 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

195 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

196 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

197 
	}
}))

	)

200 
	#°∫du∑
(
s
, 
n
) \

201 (
__exãnsi⁄__
 \

203 c⁄° *
__ﬁd
 = (
s
); \

204 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

205 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

206 
__√w
[
__Àn
] = '\0'; \

207 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
°rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

218 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

221 #ifde‡
__OPTIMIZE__


222 
__exã∫_Æways_ölöe
 *

223 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


225  
__buûtö_°rchr
 (
__s
, 
__c
);

228 
__exã∫_Æways_ölöe
 const *

229 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


231  
__buûtö_°rchr
 (
__s
, 
__c
);

236 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

237 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

240 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`°ºchr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

245 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

248 #ifde‡
__OPTIMIZE__


249 
__exã∫_Æways_ölöe
 *

250 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


252  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

255 
__exã∫_Æways_ölöe
 const *

256 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


258  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

264 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifde‡
__USE_GNU


271 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

274 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

277 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

278 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

286 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

289 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

290 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

292 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

296 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

297 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

298 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

300 #ifde‡
__OPTIMIZE__


301 
__exã∫_Æways_ölöe
 *

302 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


304  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

307 
__exã∫_Æways_ölöe
 const *

308 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


310  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

313 
	}
}

315 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

316 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

319 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

323 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

324 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

325 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

327 #ifde‡
__OPTIMIZE__


328 
__exã∫_Æways_ölöe
 *

329 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


331  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

334 
__exã∫_Æways_ölöe
 const *

335 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


337  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

340 
	}
}

342 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

343 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

348 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

349 
__THROW
 
	`__n⁄nuŒ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

355 c⁄° *
__ª°ri˘
 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

358 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


359 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

360 **
__ª°ri˘
 
__ßve_±r
)

361 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

364 #ifde‡
__USE_GNU


366 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

368 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

370 c⁄° *
__√edÀ
)

371 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

374 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

378 #ifde‡
__USE_GNU


382 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

383 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

384 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

388 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

389 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

391 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

392 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

393 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$°æí
 (c⁄° *
__s
)

400 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

407 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

414 
__END_NAMESPACE_STD


415 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


423 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


426 #ifde‡
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

428 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

429 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

431 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

432 
__THROW
 
	`__n⁄nuŒ
 ((2));

433 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

438 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

439 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

443 #ifde‡
__USE_XOPEN2K8


445 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

451 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

453 #ifde‡
__USE_BSD


455 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

459 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

462 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

466 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`ödex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

471 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

474 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__exã∫_Æways_ölöe
 *

476 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


478  
	`__buûtö_ödex
 (
__s
, 
__c
);

481 
__exã∫_Æways_ölöe
 const *

482 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


484  
	`__buûtö_ödex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$ödex
 (c⁄° *
__s
, 
__c
)

490 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`rödex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

499 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

502 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__exã∫_Æways_ölöe
 *

504 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


506  
	`__buûtö_rödex
 (
__s
, 
__c
);

509 
__exã∫_Æways_ölöe
 const *

510 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


512  
	`__buûtö_rödex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$rödex
 (c⁄° *
__s
, 
__c
)

518 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

523 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

527 #ifdef 
__USE_GNU


528 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

530 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

534 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

535 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

538 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

546 
__loˇÀ_t
 
__loc
)

547 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

549 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

550 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

551 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

558 c⁄° *
__ª°ri˘
 
__dñim
)

559 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

567 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

568 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

569 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

574 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

575 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

576 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

577 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

578 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

585 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

588 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

593 #i‚de‡
ba£«me


598 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£«me
 (*
__fûíame
)

600 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

601 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

602 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

604 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

610 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

611 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

612 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


632 
	~<bôs/°rög.h
>

635 
	~<bôs/°rög2.h
>

638 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


640 
	~<bôs/°rög3.h
>

644 
__END_DECLS


	@/usr/include/sys/fcntl.h

1 
	~<f˙é.h
>

	@/usr/include/sys/ioctl.h

18 #i‚def 
_SYS_IOCTL_H


19 
	#_SYS_IOCTL_H
 1

	)

21 
	~<„©uªs.h
>

23 
	g__BEGIN_DECLS


26 
	~<bôs/io˘ls.h
>

29 
	~<bôs/io˘l-ty≥s.h
>

36 
	~<sys/âydeÁu…s.h
>

41 
	$io˘l
 (
__fd
, 
__ªque°
, ...Ë
__THROW
;

43 
__END_DECLS


	@/usr/include/sys/param.h

19 #i‚de‡
_SYS_PARAM_H


20 
	#_SYS_PARAM_H
 1

	)

22 
	#__√ed_NULL


	)

23 
	~<°ddef.h
>

25 
	~<sys/ty≥s.h
>

26 
	~<limôs.h
>

27 
	~<ídün.h
>

28 
	~<sig«l.h
>

31 
	~<bôs/∑øm.h
>

36 
	#NBBY
 
CHAR_BIT


	)

38 #i‡!
deföed
 
NGROUPS
 && deföed 
NGROUPS_MAX


39 
	#NGROUPS
 
NGROUPS_MAX


	)

41 #i‡!
deföed
 
MAXSYMLINKS
 && deföed 
SYMLOOP_MAX


42 
	#MAXSYMLINKS
 
SYMLOOP_MAX


	)

44 #i‡!
deföed
 
CANBSIZ
 && deföed 
MAX_CANON


45 
	#CANBSIZ
 
MAX_CANON


	)

47 #i‡!
deföed
 
MAXPATHLEN
 && deföed 
PATH_MAX


48 
	#MAXPATHLEN
 
PATH_MAX


	)

50 #i‡!
deföed
 
NOFILE
 && deföed 
OPEN_MAX


51 
	#NOFILE
 
OPEN_MAX


	)

53 #i‚de‡
NCARGS


54 #ifde‡
ARG_MAX


55 
	#NCARGS
 
ARG_MAX


	)

59 
	#NCARGS
 
INT_MAX


	)

65 #i‚de‡
NOGROUP


66 
	#NOGROUP
 65535

	)

68 #i‚de‡
NODEV


69 
	#NODEV
 ((
dev_t
Ë-1Ë

	)

74 #i‚de‡
DEV_BSIZE


75 
	#DEV_BSIZE
 512

	)

80 
	#£tbô
(
a
,
i
Ë(◊)[(i)/
NBBY
] |1<<((i)%NBBY))

	)

81 
	#˛rbô
(
a
,
i
Ë(◊)[(i)/
NBBY
] &~(1<<((i)%NBBY)))

	)

82 
	#is£t
(
a
,
i
Ë(◊)[(i)/
NBBY
] & (1<<((i)%NBBY)))

	)

83 
	#is˛r
(
a
,
i
Ë((◊)[(i)/
NBBY
] & (1<<((i)%NBBY))Ë=0)

	)

86 #i‚de‡
howm™y


87 
	#howm™y
(
x
, 
y
Ë(((xË+ ((yË- 1)Ë/ (y))

	)

89 #ifde‡
__GNUC__


90 
	#roundup
(
x
, 
y
Ë(
	`__buûtö_c⁄°™t_p
 (yË&& 
	`powîof2
 (y) \

91 ? (((
x
Ë+ (
y
) - 1) & ~((y) - 1)) \

92 : ((((
x
Ë+ ((
y
Ë- 1)Ë/ (y)Ë* (y)))

	)

94 
	#roundup
(
x
, 
y
Ë((((xË+ ((yË- 1)Ë/ (y)Ë* (y))

	)

96 
	#powîof2
(
x
Ë((((xË- 1Ë& (x)Ë=0)

	)

99 
	#MIN
(
a
,
b
Ë((◊)<(b))?◊):(b))

	)

100 
	#MAX
(
a
,
b
Ë((◊)>(b))?◊):(b))

	)

	@/usr/include/sys/queue.h

32 #i‚def 
_SYS_QUEUE_H_


33 
	#_SYS_QUEUE_H_


	)

84 
	#LIST_HEAD
(
«me
, 
ty≥
) \

85 
	s«me
 { \

86 
ty≥
 *
lh_fú°
; \

87 }

	)

89 
	#LIST_HEAD_INITIALIZER
(
hód
) \

90 { 
NULL
 }

	)

92 
	#LIST_ENTRY
(
ty≥
) \

94 
ty≥
 *
À_√xt
; \

95 
ty≥
 **
À_¥ev
; \

96 }

	)

101 
	#LIST_INIT
(
hód
) do { \

102 (
hód
)->
lh_fú°
 = 
NULL
; \

103 }  0)

	)

105 
	#LIST_INSERT_AFTER
(
li°ñm
, 
ñm
, 
fõld
) do { \

106 i‡(((
ñm
)->
fõld
.
À_√xt
 = (
li°ñm
)->fõld.À_√xtË!
NULL
) \

107 (
li°ñm
)->
fõld
.
À_√xt
->fõld.
À_¥ev
 = \

108 &(
ñm
)->
fõld
.
À_√xt
; \

109 (
li°ñm
)->
fõld
.
À_√xt
 = (
ñm
); \

110 (
ñm
)->
fõld
.
À_¥ev
 = &(
li°ñm
)->fõld.
À_√xt
; \

111 }  0)

	)

113 
	#LIST_INSERT_BEFORE
(
li°ñm
, 
ñm
, 
fõld
) do { \

114 (
ñm
)->
fõld
.
À_¥ev
 = (
li°ñm
)->field.le_prev; \

115 (
ñm
)->
fõld
.
À_√xt
 = (
li°ñm
); \

116 *(
li°ñm
)->
fõld
.
À_¥ev
 = (
ñm
); \

117 (
li°ñm
)->
fõld
.
À_¥ev
 = &(
ñm
)->fõld.
À_√xt
; \

118 }  0)

	)

120 
	#LIST_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

121 i‡(((
ñm
)->
fõld
.
À_√xt
 = (
hód
)->
lh_fú°
Ë!
NULL
) \

122 (
hód
)->
lh_fú°
->
fõld
.
À_¥ev
 = &(
ñm
)->fõld.
À_√xt
;\

123 (
hód
)->
lh_fú°
 = (
ñm
); \

124 (
ñm
)->
fõld
.
À_¥ev
 = &(
hód
)->
lh_fú°
; \

125 }  0)

	)

127 
	#LIST_REMOVE
(
ñm
, 
fõld
) do { \

128 i‡((
ñm
)->
fõld
.
À_√xt
 !
NULL
) \

129 (
ñm
)->
fõld
.
À_√xt
->fõld.
À_¥ev
 = \

130 (
ñm
)->
fõld
.
À_¥ev
; \

131 *(
ñm
)->
fõld
.
À_¥ev
 = (ñm)->fõld.
À_√xt
; \

132 }  0)

	)

134 
	#LIST_FOREACH
(
v¨
, 
hód
, 
fõld
) \

135 (
v¨
Ë((
hód
)->
lh_fú°
); \

136 (
v¨
); \

137 (
v¨
Ë((v¨)->
fõld
.
À_√xt
))

	)

142 
	#LIST_EMPTY
(
hód
Ë((hód)->
lh_fú°
 =
NULL
)

	)

143 
	#LIST_FIRST
(
hód
Ë((hód)->
lh_fú°
)

	)

144 
	#LIST_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
À_√xt
)

	)

150 
	#SLIST_HEAD
(
«me
, 
ty≥
) \

151 
	s«me
 { \

152 
ty≥
 *
¶h_fú°
; \

153 }

	)

155 
	#SLIST_HEAD_INITIALIZER
(
hód
) \

156 { 
NULL
 }

	)

158 
	#SLIST_ENTRY
(
ty≥
) \

160 
ty≥
 *
¶e_√xt
; \

161 }

	)

166 
	#SLIST_INIT
(
hód
) do { \

167 (
hód
)->
¶h_fú°
 = 
NULL
; \

168 }  0)

	)

170 
	#SLIST_INSERT_AFTER
(
¶i°ñm
, 
ñm
, 
fõld
) do { \

171 (
ñm
)->
fõld
.
¶e_√xt
 = (
¶i°ñm
)->field.sle_next; \

172 (
¶i°ñm
)->
fõld
.
¶e_√xt
 = (
ñm
); \

173 }  0)

	)

175 
	#SLIST_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

176 (
ñm
)->
fõld
.
¶e_√xt
 = (
hód
)->
¶h_fú°
; \

177 (
hód
)->
¶h_fú°
 = (
ñm
); \

178 }  0)

	)

180 
	#SLIST_REMOVE_HEAD
(
hód
, 
fõld
) do { \

181 (
hód
)->
¶h_fú°
 = (hód)->¶h_fú°->
fõld
.
¶e_√xt
; \

182 }  0)

	)

184 
	#SLIST_REMOVE
(
hód
, 
ñm
, 
ty≥
, 
fõld
) do { \

185 i‡((
hód
)->
¶h_fú°
 =(
ñm
)) { \

186 
	`SLIST_REMOVE_HEAD
((
hód
), 
fõld
); \

189 
ty≥
 *
cuªlm
 = (
hód
)->
¶h_fú°
; \

190 
cuªlm
->
fõld
.
¶e_√xt
 !(
ñm
)) \

191 
cuªlm
 = cuªlm->
fõld
.
¶e_√xt
; \

192 
cuªlm
->
fõld
.
¶e_√xt
 = \

193 
cuªlm
->
fõld
.
¶e_√xt
->field.sle_next; \

195 }  0)

	)

197 
	#SLIST_FOREACH
(
v¨
, 
hód
, 
fõld
) \

198 (
v¨
Ë(
hód
)->
¶h_fú°
; (v¨); (v¨Ë(v¨)->
fõld
.
¶e_√xt
)

	)

203 
	#SLIST_EMPTY
(
hód
Ë((hód)->
¶h_fú°
 =
NULL
)

	)

204 
	#SLIST_FIRST
(
hód
Ë((hód)->
¶h_fú°
)

	)

205 
	#SLIST_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
¶e_√xt
)

	)

211 
	#STAILQ_HEAD
(
«me
, 
ty≥
) \

212 
	s«me
 { \

213 
ty≥
 *
°qh_fú°
; \

214 
ty≥
 **
°qh_œ°
; \

215 }

	)

217 
	#STAILQ_HEAD_INITIALIZER
(
hód
) \

218 { 
NULL
, &(
hód
).
°qh_fú°
 }

	)

220 
	#STAILQ_ENTRY
(
ty≥
) \

222 
ty≥
 *
°qe_√xt
; \

223 }

	)

228 
	#STAILQ_INIT
(
hód
) do { \

229 (
hód
)->
°qh_fú°
 = 
NULL
; \

230 (
hód
)->
°qh_œ°
 = &(hód)->
°qh_fú°
; \

231 }  0)

	)

233 
	#STAILQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

234 i‡(((
ñm
)->
fõld
.
°qe_√xt
 = (
hód
)->
°qh_fú°
Ë=
NULL
) \

235 (
hód
)->
°qh_œ°
 = &(
ñm
)->
fõld
.
°qe_√xt
; \

236 (
hód
)->
°qh_fú°
 = (
ñm
); \

237 }  0)

	)

239 
	#STAILQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

240 (
ñm
)->
fõld
.
°qe_√xt
 = 
NULL
; \

241 *(
hód
)->
°qh_œ°
 = (
ñm
); \

242 (
hód
)->
°qh_œ°
 = &(
ñm
)->
fõld
.
°qe_√xt
; \

243 }  0)

	)

245 
	#STAILQ_INSERT_AFTER
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

246 i‡(((
ñm
)->
fõld
.
°qe_√xt
 = (
li°ñm
)->fõld.°qe_√xtË=
NULL
)\

247 (
hód
)->
°qh_œ°
 = &(
ñm
)->
fõld
.
°qe_√xt
; \

248 (
li°ñm
)->
fõld
.
°qe_√xt
 = (
ñm
); \

249 }  0)

	)

251 
	#STAILQ_REMOVE_HEAD
(
hód
, 
fõld
) do { \

252 i‡(((
hód
)->
°qh_fú°
 = (hód)->°qh_fú°->
fõld
.
°qe_√xt
Ë=
NULL
) \

253 (
hód
)->
°qh_œ°
 = &(hód)->
°qh_fú°
; \

254 }  0)

	)

256 
	#STAILQ_REMOVE
(
hód
, 
ñm
, 
ty≥
, 
fõld
) do { \

257 i‡((
hód
)->
°qh_fú°
 =(
ñm
)) { \

258 
	`STAILQ_REMOVE_HEAD
((
hód
), 
fõld
); \

260 
ty≥
 *
cuªlm
 = (
hód
)->
°qh_fú°
; \

261 
cuªlm
->
fõld
.
°qe_√xt
 !(
ñm
)) \

262 
cuªlm
 = cuªlm->
fõld
.
°qe_√xt
; \

263 i‡((
cuªlm
->
fõld
.
°qe_√xt
 = \

264 
cuªlm
->
fõld
.
°qe_√xt
->fõld.°qe_√xtË=
NULL
) \

265 (
hód
)->
°qh_œ°
 = &(
cuªlm
)->
fõld
.
°qe_√xt
; \

267 }  0)

	)

269 
	#STAILQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

270 (
v¨
Ë((
hód
)->
°qh_fú°
); \

271 (
v¨
); \

272 (
v¨
Ë((v¨)->
fõld
.
°qe_√xt
))

	)

274 
	#STAILQ_CONCAT
(
hód1
, 
hód2
) do { \

275 i‡(!
	`STAILQ_EMPTY
((
hód2
))) { \

276 *(
hód1
)->
°qh_œ°
 = (
hód2
)->
°qh_fú°
; \

277 (
hód1
)->
°qh_œ°
 = (
hód2
)->stqh_last; \

278 
	`STAILQ_INIT
((
hód2
)); \

280 }  0)

	)

285 
	#STAILQ_EMPTY
(
hód
Ë((hód)->
°qh_fú°
 =
NULL
)

	)

286 
	#STAILQ_FIRST
(
hód
Ë((hód)->
°qh_fú°
)

	)

287 
	#STAILQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
°qe_√xt
)

	)

293 
	#SIMPLEQ_HEAD
(
«me
, 
ty≥
) \

294 
	s«me
 { \

295 
ty≥
 *
sqh_fú°
; \

296 
ty≥
 **
sqh_œ°
; \

297 }

	)

299 
	#SIMPLEQ_HEAD_INITIALIZER
(
hód
) \

300 { 
NULL
, &(
hód
).
sqh_fú°
 }

	)

302 
	#SIMPLEQ_ENTRY
(
ty≥
) \

304 
ty≥
 *
sqe_√xt
; \

305 }

	)

310 
	#SIMPLEQ_INIT
(
hód
) do { \

311 (
hód
)->
sqh_fú°
 = 
NULL
; \

312 (
hód
)->
sqh_œ°
 = &(hód)->
sqh_fú°
; \

313 }  0)

	)

315 
	#SIMPLEQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

316 i‡(((
ñm
)->
fõld
.
sqe_√xt
 = (
hód
)->
sqh_fú°
Ë=
NULL
) \

317 (
hód
)->
sqh_œ°
 = &(
ñm
)->
fõld
.
sqe_√xt
; \

318 (
hód
)->
sqh_fú°
 = (
ñm
); \

319 }  0)

	)

321 
	#SIMPLEQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

322 (
ñm
)->
fõld
.
sqe_√xt
 = 
NULL
; \

323 *(
hód
)->
sqh_œ°
 = (
ñm
); \

324 (
hód
)->
sqh_œ°
 = &(
ñm
)->
fõld
.
sqe_√xt
; \

325 }  0)

	)

327 
	#SIMPLEQ_INSERT_AFTER
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

328 i‡(((
ñm
)->
fõld
.
sqe_√xt
 = (
li°ñm
)->fõld.sqe_√xtË=
NULL
)\

329 (
hód
)->
sqh_œ°
 = &(
ñm
)->
fõld
.
sqe_√xt
; \

330 (
li°ñm
)->
fõld
.
sqe_√xt
 = (
ñm
); \

331 }  0)

	)

333 
	#SIMPLEQ_REMOVE_HEAD
(
hód
, 
fõld
) do { \

334 i‡(((
hód
)->
sqh_fú°
 = (hód)->sqh_fú°->
fõld
.
sqe_√xt
Ë=
NULL
) \

335 (
hód
)->
sqh_œ°
 = &(hód)->
sqh_fú°
; \

336 }  0)

	)

338 
	#SIMPLEQ_REMOVE
(
hód
, 
ñm
, 
ty≥
, 
fõld
) do { \

339 i‡((
hód
)->
sqh_fú°
 =(
ñm
)) { \

340 
	`SIMPLEQ_REMOVE_HEAD
((
hód
), 
fõld
); \

342 
ty≥
 *
cuªlm
 = (
hód
)->
sqh_fú°
; \

343 
cuªlm
->
fõld
.
sqe_√xt
 !(
ñm
)) \

344 
cuªlm
 = cuªlm->
fõld
.
sqe_√xt
; \

345 i‡((
cuªlm
->
fõld
.
sqe_√xt
 = \

346 
cuªlm
->
fõld
.
sqe_√xt
->fõld.sqe_√xtË=
NULL
) \

347 (
hód
)->
sqh_œ°
 = &(
cuªlm
)->
fõld
.
sqe_√xt
; \

349 }  0)

	)

351 
	#SIMPLEQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

352 (
v¨
Ë((
hód
)->
sqh_fú°
); \

353 (
v¨
); \

354 (
v¨
Ë((v¨)->
fõld
.
sqe_√xt
))

	)

359 
	#SIMPLEQ_EMPTY
(
hód
Ë((hód)->
sqh_fú°
 =
NULL
)

	)

360 
	#SIMPLEQ_FIRST
(
hód
Ë((hód)->
sqh_fú°
)

	)

361 
	#SIMPLEQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
sqe_√xt
)

	)

367 
	#_TAILQ_HEAD
(
«me
, 
ty≥
, 
quÆ
) \

368 
	s«me
 { \

369 
quÆ
 
ty≥
 *
tqh_fú°
; \

370 
quÆ
 
ty≥
 *quÆ *
tqh_œ°
; \

371 }

	)

372 
	#TAILQ_HEAD
(
«me
, 
ty≥
Ë
	`_TAILQ_HEAD
“ame, ty≥,)

	)

374 
	#TAILQ_HEAD_INITIALIZER
(
hód
) \

375 { 
NULL
, &(
hód
).
tqh_fú°
 }

	)

377 
	#_TAILQ_ENTRY
(
ty≥
, 
quÆ
) \

379 
quÆ
 
ty≥
 *
tqe_√xt
; \

380 
quÆ
 
ty≥
 *quÆ *
tqe_¥ev
; \

381 }

	)

382 
	#TAILQ_ENTRY
(
ty≥
Ë
	`_TAILQ_ENTRY
(ty≥,)

	)

387 
	#TAILQ_INIT
(
hód
) do { \

388 (
hód
)->
tqh_fú°
 = 
NULL
; \

389 (
hód
)->
tqh_œ°
 = &(hód)->
tqh_fú°
; \

390 }  0)

	)

392 
	#TAILQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

393 i‡(((
ñm
)->
fõld
.
tqe_√xt
 = (
hód
)->
tqh_fú°
Ë!
NULL
) \

394 (
hód
)->
tqh_fú°
->
fõld
.
tqe_¥ev
 = \

395 &(
ñm
)->
fõld
.
tqe_√xt
; \

397 (
hód
)->
tqh_œ°
 = &(
ñm
)->
fõld
.
tqe_√xt
; \

398 (
hód
)->
tqh_fú°
 = (
ñm
); \

399 (
ñm
)->
fõld
.
tqe_¥ev
 = &(
hód
)->
tqh_fú°
; \

400 }  0)

	)

402 
	#TAILQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

403 (
ñm
)->
fõld
.
tqe_√xt
 = 
NULL
; \

404 (
ñm
)->
fõld
.
tqe_¥ev
 = (
hód
)->
tqh_œ°
; \

405 *(
hód
)->
tqh_œ°
 = (
ñm
); \

406 (
hód
)->
tqh_œ°
 = &(
ñm
)->
fõld
.
tqe_√xt
; \

407 }  0)

	)

409 
	#TAILQ_INSERT_AFTER
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

410 i‡(((
ñm
)->
fõld
.
tqe_√xt
 = (
li°ñm
)->fõld.tqe_√xtË!
NULL
)\

411 (
ñm
)->
fõld
.
tqe_√xt
->fõld.
tqe_¥ev
 = \

412 &(
ñm
)->
fõld
.
tqe_√xt
; \

414 (
hód
)->
tqh_œ°
 = &(
ñm
)->
fõld
.
tqe_√xt
; \

415 (
li°ñm
)->
fõld
.
tqe_√xt
 = (
ñm
); \

416 (
ñm
)->
fõld
.
tqe_¥ev
 = &(
li°ñm
)->fõld.
tqe_√xt
; \

417 }  0)

	)

419 
	#TAILQ_INSERT_BEFORE
(
li°ñm
, 
ñm
, 
fõld
) do { \

420 (
ñm
)->
fõld
.
tqe_¥ev
 = (
li°ñm
)->field.tqe_prev; \

421 (
ñm
)->
fõld
.
tqe_√xt
 = (
li°ñm
); \

422 *(
li°ñm
)->
fõld
.
tqe_¥ev
 = (
ñm
); \

423 (
li°ñm
)->
fõld
.
tqe_¥ev
 = &(
ñm
)->fõld.
tqe_√xt
; \

424 }  0)

	)

426 
	#TAILQ_REMOVE
(
hód
, 
ñm
, 
fõld
) do { \

427 i‡(((
ñm
)->
fõld
.
tqe_√xt
Ë!
NULL
) \

428 (
ñm
)->
fõld
.
tqe_√xt
->fõld.
tqe_¥ev
 = \

429 (
ñm
)->
fõld
.
tqe_¥ev
; \

431 (
hód
)->
tqh_œ°
 = (
ñm
)->
fõld
.
tqe_¥ev
; \

432 *(
ñm
)->
fõld
.
tqe_¥ev
 = (ñm)->fõld.
tqe_√xt
; \

433 }  0)

	)

435 
	#TAILQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

436 (
v¨
Ë((
hód
)->
tqh_fú°
); \

437 (
v¨
); \

438 (
v¨
Ë((v¨)->
fõld
.
tqe_√xt
))

	)

440 
	#TAILQ_FOREACH_REVERSE
(
v¨
, 
hód
, 
hód«me
, 
fõld
) \

441 (
v¨
Ë(*(((
hód«me
 *)((
hód
)->
tqh_œ°
))->tqh_last)); \

442 (
v¨
); \

443 (
v¨
Ë(*(((
hód«me
 *)((v¨)->
fõld
.
tqe_¥ev
))->
tqh_œ°
)))

	)

445 
	#TAILQ_CONCAT
(
hód1
, 
hód2
, 
fõld
) do { \

446 i‡(!
	`TAILQ_EMPTY
(
hód2
)) { \

447 *(
hód1
)->
tqh_œ°
 = (
hód2
)->
tqh_fú°
; \

448 (
hód2
)->
tqh_fú°
->
fõld
.
tqe_¥ev
 = (
hód1
)->
tqh_œ°
; \

449 (
hód1
)->
tqh_œ°
 = (
hód2
)->tqh_last; \

450 
	`TAILQ_INIT
((
hód2
)); \

452 }  0)

	)

457 
	#TAILQ_EMPTY
(
hód
Ë((hód)->
tqh_fú°
 =
NULL
)

	)

458 
	#TAILQ_FIRST
(
hód
Ë((hód)->
tqh_fú°
)

	)

459 
	#TAILQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
tqe_√xt
)

	)

461 
	#TAILQ_LAST
(
hód
, 
hód«me
) \

462 (*(((
hód«me
 *)((
hód
)->
tqh_œ°
))->tqh_œ°))

	)

463 
	#TAILQ_PREV
(
ñm
, 
hód«me
, 
fõld
) \

464 (*(((
hód«me
 *)((
ñm
)->
fõld
.
tqe_¥ev
))->
tqh_œ°
))

	)

470 
	#CIRCLEQ_HEAD
(
«me
, 
ty≥
) \

471 
	s«me
 { \

472 
ty≥
 *
cqh_fú°
; \

473 
ty≥
 *
cqh_œ°
; \

474 }

	)

476 
	#CIRCLEQ_HEAD_INITIALIZER
(
hód
) \

477 { (*)&
hód
, (*)&hód }

	)

479 
	#CIRCLEQ_ENTRY
(
ty≥
) \

481 
ty≥
 *
cqe_√xt
; \

482 
ty≥
 *
cqe_¥ev
; \

483 }

	)

488 
	#CIRCLEQ_INIT
(
hód
) do { \

489 (
hód
)->
cqh_fú°
 = (*)(head); \

490 (
hód
)->
cqh_œ°
 = (*)(head); \

491 }  0)

	)

493 
	#CIRCLEQ_INSERT_AFTER
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

494 (
ñm
)->
fõld
.
cqe_√xt
 = (
li°ñm
)->field.cqe_next; \

495 (
ñm
)->
fõld
.
cqe_¥ev
 = (
li°ñm
); \

496 i‡((
li°ñm
)->
fõld
.
cqe_√xt
 =(*)(
hód
)) \

497 (
hód
)->
cqh_œ°
 = (
ñm
); \

499 (
li°ñm
)->
fõld
.
cqe_√xt
->fõld.
cqe_¥ev
 = (
ñm
); \

500 (
li°ñm
)->
fõld
.
cqe_√xt
 = (
ñm
); \

501 }  0)

	)

503 
	#CIRCLEQ_INSERT_BEFORE
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

504 (
ñm
)->
fõld
.
cqe_√xt
 = (
li°ñm
); \

505 (
ñm
)->
fõld
.
cqe_¥ev
 = (
li°ñm
)->field.cqe_prev; \

506 i‡((
li°ñm
)->
fõld
.
cqe_¥ev
 =(*)(
hód
)) \

507 (
hód
)->
cqh_fú°
 = (
ñm
); \

509 (
li°ñm
)->
fõld
.
cqe_¥ev
->fõld.
cqe_√xt
 = (
ñm
); \

510 (
li°ñm
)->
fõld
.
cqe_¥ev
 = (
ñm
); \

511 }  0)

	)

513 
	#CIRCLEQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

514 (
ñm
)->
fõld
.
cqe_√xt
 = (
hód
)->
cqh_fú°
; \

515 (
ñm
)->
fõld
.
cqe_¥ev
 = (*)(
hód
); \

516 i‡((
hód
)->
cqh_œ°
 == (*)(head)) \

517 (
hód
)->
cqh_œ°
 = (
ñm
); \

519 (
hód
)->
cqh_fú°
->
fõld
.
cqe_¥ev
 = (
ñm
); \

520 (
hód
)->
cqh_fú°
 = (
ñm
); \

521 }  0)

	)

523 
	#CIRCLEQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

524 (
ñm
)->
fõld
.
cqe_√xt
 = (*)(
hód
); \

525 (
ñm
)->
fõld
.
cqe_¥ev
 = (
hód
)->
cqh_œ°
; \

526 i‡((
hód
)->
cqh_fú°
 == (*)(head)) \

527 (
hód
)->
cqh_fú°
 = (
ñm
); \

529 (
hód
)->
cqh_œ°
->
fõld
.
cqe_√xt
 = (
ñm
); \

530 (
hód
)->
cqh_œ°
 = (
ñm
); \

531 }  0)

	)

533 
	#CIRCLEQ_REMOVE
(
hód
, 
ñm
, 
fõld
) do { \

534 i‡((
ñm
)->
fõld
.
cqe_√xt
 =(*)(
hód
)) \

535 (
hód
)->
cqh_œ°
 = (
ñm
)->
fõld
.
cqe_¥ev
; \

537 (
ñm
)->
fõld
.
cqe_√xt
->fõld.
cqe_¥ev
 = \

538 (
ñm
)->
fõld
.
cqe_¥ev
; \

539 i‡((
ñm
)->
fõld
.
cqe_¥ev
 =(*)(
hód
)) \

540 (
hód
)->
cqh_fú°
 = (
ñm
)->
fõld
.
cqe_√xt
; \

542 (
ñm
)->
fõld
.
cqe_¥ev
->fõld.
cqe_√xt
 = \

543 (
ñm
)->
fõld
.
cqe_√xt
; \

544 }  0)

	)

546 
	#CIRCLEQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

547 (
v¨
Ë((
hód
)->
cqh_fú°
); \

548 (
v¨
Ë!(c⁄° *)(
hód
); \

549 (
v¨
Ë((v¨)->
fõld
.
cqe_√xt
))

	)

551 
	#CIRCLEQ_FOREACH_REVERSE
(
v¨
, 
hód
, 
fõld
) \

552 (
v¨
Ë((
hód
)->
cqh_œ°
); \

553 (
v¨
Ë!(c⁄° *)(
hód
); \

554 (
v¨
Ë((v¨)->
fõld
.
cqe_¥ev
))

	)

559 
	#CIRCLEQ_EMPTY
(
hód
Ë((hód)->
cqh_fú°
 =(*)(hód))

	)

560 
	#CIRCLEQ_FIRST
(
hód
Ë((hód)->
cqh_fú°
)

	)

561 
	#CIRCLEQ_LAST
(
hód
Ë((hód)->
cqh_œ°
)

	)

562 
	#CIRCLEQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
cqe_√xt
)

	)

563 
	#CIRCLEQ_PREV
(
ñm
, 
fõld
Ë(”lm)->fõld.
cqe_¥ev
)

	)

565 
	#CIRCLEQ_LOOP_NEXT
(
hód
, 
ñm
, 
fõld
) \

566 (((
ñm
)->
fõld
.
cqe_√xt
 =(*)(
hód
)) \

567 ? ((
hód
)->
cqh_fú°
) \

568 : (
ñm
->
fõld
.
cqe_√xt
))

	)

569 
	#CIRCLEQ_LOOP_PREV
(
hód
, 
ñm
, 
fõld
) \

570 (((
ñm
)->
fõld
.
cqe_¥ev
 =(*)(
hód
)) \

571 ? ((
hód
)->
cqh_œ°
) \

572 : (
ñm
->
fõld
.
cqe_¥ev
))

	)

	@/usr/include/sys/socket.h

19 #i‚def 
_SYS_SOCKET_H


20 
	#_SYS_SOCKET_H
 1

	)

22 
	~<„©uªs.h
>

24 
	g__BEGIN_DECLS


26 
	~<sys/uio.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

29 #ifde‡
__USE_GNU


31 
	~<bôs/sig£t.h
>

38 
	~<bôs/sockë.h
>

40 #ifde‡
__USE_BSD


43 
	sosockaddr


45 
	mß_Ámûy
;

46 
	mß_d©a
[14];

54 
	mSHUT_RD
 = 0,

55 
	#SHUT_RD
 
SHUT_RD


	)

56 
	mSHUT_WR
,

57 
	#SHUT_WR
 
SHUT_WR


	)

58 
	mSHUT_RDWR


59 
	#SHUT_RDWR
 
SHUT_RDWR


	)

68 #i‡
deföed
 
__˝lu•lus
 || !
__GNUC_PREREQ
 (2, 7Ë|| !deföed 
__USE_GNU


69 
	#__SOCKADDR_ARG
 
sockaddr
 *
__ª°ri˘


	)

70 
	#__CONST_SOCKADDR_ARG
 c⁄° 
sockaddr
 *

	)

74 
	#__SOCKADDR_ALLTYPES
 \

75 
	`__SOCKADDR_ONETYPE
 (
sockaddr
) \

76 
	`__SOCKADDR_ONETYPE
 (
sockaddr_©
) \

77 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ax25
) \

78 
	`__SOCKADDR_ONETYPE
 (
sockaddr_dl
) \

79 
	`__SOCKADDR_ONETYPE
 (
sockaddr_e⁄
) \

80 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö
) \

81 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö6
) \

82 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö¨p
) \

83 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ùx
) \

84 
	`__SOCKADDR_ONETYPE
 (
sockaddr_iso
) \

85 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ns
) \

86 
	`__SOCKADDR_ONETYPE
 (
sockaddr_un
) \

87 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x25
)

	)

89 
	#__SOCKADDR_ONETYPE
(
ty≥
Ëty≥ *
__ª°ri˘
 
__
##ty≥##__;

	)

90 uni⁄ { 
	m__SOCKADDR_ALLTYPES


91 } 
	t__SOCKADDR_ARG
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

92 #unde‡
__SOCKADDR_ONETYPE


93 
	#__SOCKADDR_ONETYPE
(
ty≥
Ëc⁄° ty≥ *
__ª°ri˘
 
__
##ty≥##__;

	)

94 uni⁄ { 
	m__SOCKADDR_ALLTYPES


95 } 
	t__CONST_SOCKADDR_ARG
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

96 #unde‡
__SOCKADDR_ONETYPE


99 #ifde‡
__USE_GNU


101 
	smmsghdr


103 
msghdr
 
	mmsg_hdr
;

104 
	mmsg_Àn
;

113 
	$sockë
 (
__domaö
, 
__ty≥
, 
__¥Ÿocﬁ
Ë
__THROW
;

119 
	$sockë∑ú
 (
__domaö
, 
__ty≥
, 
__¥Ÿocﬁ
,

120 
__fds
[2]Ë
__THROW
;

123 
	$böd
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 
__Àn
)

124 
__THROW
;

127 
	$gësock«me
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

128 
sockÀn_t
 *
__ª°ri˘
 
__Àn
Ë
__THROW
;

137 
	`c⁄√˘
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 
__Àn
);

141 
	$gë≥î«me
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

142 
sockÀn_t
 *
__ª°ri˘
 
__Àn
Ë
__THROW
;

149 
ssize_t
 
	`£nd
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
, 
__Êags
);

156 
ssize_t
 
	`ªcv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__Êags
);

163 
ssize_t
 
	`£ndto
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

164 
__Êags
, 
__CONST_SOCKADDR_ARG
 
__addr
,

165 
sockÀn_t
 
__addr_Àn
);

174 
ssize_t
 
	`ªcv‰om
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

175 
__Êags
, 
__SOCKADDR_ARG
 
__addr
,

176 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

184 
ssize_t
 
	`£ndmsg
 (
__fd
, c⁄° 
msghdr
 *
__mesßge
,

185 
__Êags
);

187 #ifde‡
__USE_GNU


193 
	`£ndmmsg
 (
__fd
, 
mmsghdr
 *
__vmesßges
,

194 
__vÀn
, 
__Êags
);

202 
ssize_t
 
	`ªcvmsg
 (
__fd
, 
msghdr
 *
__mesßge
, 
__Êags
);

204 #ifde‡
__USE_GNU


210 
	`ªcvmmsg
 (
__fd
, 
mmsghdr
 *
__vmesßges
,

211 
__vÀn
, 
__Êags
,

212 c⁄° 
time•ec
 *
__tmo
);

219 
	$gësock›t
 (
__fd
, 
__Àvñ
, 
__›äame
,

220 *
__ª°ri˘
 
__›tvÆ
,

221 
sockÀn_t
 *
__ª°ri˘
 
__›éí
Ë
__THROW
;

226 
	$£tsock›t
 (
__fd
, 
__Àvñ
, 
__›äame
,

227 c⁄° *
__›tvÆ
, 
sockÀn_t
 
__›éí
Ë
__THROW
;

233 
	$li°í
 (
__fd
, 
__n
Ë
__THROW
;

243 
	`ac˚±
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

244 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

246 #ifde‡
__USE_GNU


251 
	`ac˚±4
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

252 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
, 
__Êags
);

261 
	$shutdown
 (
__fd
, 
__how
Ë
__THROW
;

264 #ifde‡
__USE_XOPEN2K


266 
	$sock©m¨k
 (
__fd
Ë
__THROW
;

270 #ifde‡
__USE_MISC


274 
	$isfdty≥
 (
__fd
, 
__fdty≥
Ë
__THROW
;

279 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


280 
	~<bôs/sockë2.h
>

283 
__END_DECLS


	@/usr/include/sys/types.h

22 #i‚def 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


29 
	~<bôs/ty≥s.h
>

31 #ifdef 
__USE_BSD


32 #i‚de‡
__u_ch¨_deföed


33 
__u_ch¨
 
	tu_ch¨
;

34 
__u_sh‹t
 
	tu_sh‹t
;

35 
__u_öt
 
	tu_öt
;

36 
__u_l⁄g
 
	tu_l⁄g
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¨_deföed


	)

44 
__loff_t
 
	tloff_t
;

46 #i‚de‡
__öo_t_deföed


47 #i‚de‡
__USE_FILE_OFFSET64


48 
__öo_t
 
	töo_t
;

50 
__öo64_t
 
	töo_t
;

52 
	#__öo_t_deföed


	)

54 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


55 
__öo64_t
 
	töo64_t
;

56 
	#__öo64_t_deföed


	)

59 #i‚de‡
__dev_t_deföed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_deföed


	)

64 #i‚de‡
__gid_t_deföed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_deföed


	)

69 #i‚de‡
__mode_t_deföed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_deföed


	)

74 #i‚de‡
__∆ök_t_deföed


75 
__∆ök_t
 
	t∆ök_t
;

76 
	#__∆ök_t_deföed


	)

79 #i‚de‡
__uid_t_deföed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_deföed


	)

84 #i‚de‡
__off_t_deföed


85 #i‚de‡
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_deföed


	)

92 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_deföed


	)

97 #i‚de‡
__pid_t_deföed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_deföed


	)

102 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
) \

103 && !
deföed
 
__id_t_deföed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_deföed


	)

108 #i‚de‡
__ssize_t_deföed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_deföed


	)

113 #ifdef 
__USE_BSD


114 #i‚de‡
__daddr_t_deföed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ˇddr_t
 
	tˇddr_t
;

117 
	#__daddr_t_deföed


	)

121 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__key_t_deföed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_deföed


	)

126 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


127 
	#__√ed_˛ock_t


	)

129 
	#__√ed_time_t


	)

130 
	#__√ed_timî_t


	)

131 
	#__√ed_˛ockid_t


	)

132 
	~<time.h
>

134 #ifde‡
__USE_XOPEN


135 #i‚de‡
__u£c⁄ds_t_deföed


136 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

137 
	#__u£c⁄ds_t_deföed


	)

139 #i‚de‡
__su£c⁄ds_t_deföed


140 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

141 
	#__su£c⁄ds_t_deföed


	)

145 
	#__√ed_size_t


	)

146 
	~<°ddef.h
>

148 #ifde‡
__USE_MISC


150 
	tul⁄g
;

151 
	tush‹t
;

152 
	tuöt
;

157 #i‡!
__GNUC_PREREQ
 (2, 7)

160 #i‚de‡
__öt8_t_deföed


161 
	#__öt8_t_deföed


	)

162 
	töt8_t
;

163 
	töt16_t
;

164 
	töt32_t
;

165 #i‡
__WORDSIZE
 == 64

166 
	töt64_t
;

168 
__exãnsi⁄__
 
	töt64_t
;

173 
	tu_öt8_t
;

174 
	tu_öt16_t
;

175 
	tu_öt32_t
;

176 #i‡
__WORDSIZE
 == 64

177 
	tu_öt64_t
;

179 
__exãnsi⁄__
 
	tu_öt64_t
;

182 
	tªgi°î_t
;

187 
	#__ötN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_ötN_t
(
	tN
, 
	tMODE
) \

190 
	tu_öt
##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #i‚de‡
	t__öt8_t_deföed


193 
	t__öt8_t_deföed


	)

194 
	t__ötN_t
 (8, 
	t__QI__
);

195 
__ötN_t
 (16, 
__HI__
);

196 
__ötN_t
 (32, 
__SI__
);

197 
__ötN_t
 (64, 
__DI__
);

200 
__u_ötN_t
 (8, 
__QI__
);

201 
__u_ötN_t
 (16, 
__HI__
);

202 
__u_ötN_t
 (32, 
__SI__
);

203 
__u_ötN_t
 (64, 
__DI__
);

205 
	tªgi°î_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__w‹d__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<ídün.h
>

219 
	~<sys/£À˘.h
>

222 
	~<sys/sysma¸os.h
>

226 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
) \

227 && !
deföed
 
__blksize_t_deföed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_deföed


	)

233 #i‚de‡
__USE_FILE_OFFSET64


234 #i‚de‡
__blk˙t_t_deföed


235 
__blk˙t_t
 
	tblk˙t_t
;

236 
	#__blk˙t_t_deföed


	)

238 #i‚de‡
__fsblk˙t_t_deföed


239 
__fsblk˙t_t
 
	tfsblk˙t_t
;

240 
	#__fsblk˙t_t_deföed


	)

242 #i‚de‡
__fsfû˙t_t_deföed


243 
__fsfû˙t_t
 
	tfsfû˙t_t
;

244 
	#__fsfû˙t_t_deföed


	)

247 #i‚de‡
__blk˙t_t_deföed


248 
__blk˙t64_t
 
	tblk˙t_t
;

249 
	#__blk˙t_t_deföed


	)

251 #i‚de‡
__fsblk˙t_t_deföed


252 
__fsblk˙t64_t
 
	tfsblk˙t_t
;

253 
	#__fsblk˙t_t_deföed


	)

255 #i‚de‡
__fsfû˙t_t_deföed


256 
__fsfû˙t64_t
 
	tfsfû˙t_t
;

257 
	#__fsfû˙t_t_deföed


	)

261 #ifde‡
__USE_LARGEFILE64


262 
__blk˙t64_t
 
	tblk˙t64_t
;

263 
__fsblk˙t64_t
 
	tfsblk˙t64_t
;

264 
__fsfû˙t64_t
 
	tfsfû˙t64_t
;

269 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


270 
	~<bôs/±hªadty≥s.h
>

273 
	g__END_DECLS


	@/usr/include/termios.h

22 #i‚def 
_TERMIOS_H


23 
	#_TERMIOS_H
 1

	)

25 
	~<„©uªs.h
>

26 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


28 
	~<bôs/ty≥s.h
>

29 #i‚de‡
__pid_t_deföed


30 
__pid_t
 
	tpid_t
;

31 
	#__pid_t_deföed


	)

35 
	g__BEGIN_DECLS


39 
	~<bôs/ãrmios.h
>

41 #ifde‡
__USE_BSD


44 
	#CCEQ
(
vÆ
, 
c
Ë((cË=(vÆË&& (vÆË!
_POSIX_VDISABLE
)

	)

48 
•ìd_t
 
	$cfgëo•ìd
 (c⁄° 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

51 
•ìd_t
 
	$cfgëi•ìd
 (c⁄° 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

54 
	$cf£to•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

57 
	$cf£ti•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

59 #ifdef 
__USE_BSD


61 
	$cf£t•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

66 
	$tcgë©å
 (
__fd
, 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

70 
	$tc£èâr
 (
__fd
, 
__›ti⁄Æ_a˘i⁄s
,

71 c⁄° 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

74 #ifdef 
__USE_BSD


76 
	$cfmakîaw
 (
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

80 
	$tc£ndbªak
 (
__fd
, 
__duøti⁄
Ë
__THROW
;

86 
	`tcdøö
 (
__fd
);

90 
	$tcÊush
 (
__fd
, 
__queue_£À˘‹
Ë
__THROW
;

94 
	$tcÊow
 (
__fd
, 
__a˘i⁄
Ë
__THROW
;

97 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


99 
__pid_t
 
	$tcgësid
 (
__fd
Ë
__THROW
;

103 #ifde‡
__USE_BSD


104 
	~<sys/âydeÁu…s.h
>

107 
__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_SVID


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifde‡
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #ñi‡
deföed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #ñi‡
deföed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<bôs/posix_›t.h
>

205 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


206 
	~<bôs/ívú⁄míts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<bôs/ty≥s.h
>

219 #i‚def 
__ssize_t_deföed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_deföed


	)

224 
	#__√ed_size_t


	)

225 
	#__√ed_NULL


	)

226 
	~<°ddef.h
>

228 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


231 #i‚de‡
__gid_t_deföed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_deföed


	)

236 #i‚de‡
__uid_t_deföed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_deföed


	)

241 #i‚de‡
__off_t_deföed


242 #i‚de‡
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_deföed


	)

249 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_deföed


	)

254 #i‚de‡
__u£c⁄ds_t_deföed


255 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

256 
	#__u£c⁄ds_t_deföed


	)

259 #i‚de‡
__pid_t_deföed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_deföed


	)

265 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


266 #i‚de‡
__öçå_t_deföed


267 
__öçå_t
 
	töçå_t
;

268 
	#__öçå_t_deföed


	)

272 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


273 #i‚de‡
__sockÀn_t_deföed


274 
__sockÀn_t
 
	tsockÀn_t
;

275 
	#__sockÀn_t_deföed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

289 #ifde‡
__USE_GNU


292 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

293 
__THROW
 
	`__n⁄nuŒ
 ((1));

296 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

297 
__THROW
 
	`__n⁄nuŒ
 ((1));

300 #ifde‡
__USE_ATFILE


304 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

305 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

310 #i‚def 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifde‡
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #i‚de‡
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

336 #ifde‡
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifde‡
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

346 
__THROW
;

353 
	`˛o£
 (
__fd
);

360 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

366 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

368 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


369 #i‚de‡
__USE_FILE_OFFSET64


376 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

377 
__off_t
 
__off£t
Ë
__wur
;

384 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
Ë
__wur
;

387 #ifde‡
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

389 
__off64_t
 
__off£t
),

390 
¥ód64
Ë
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

392 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

393 
pwrôe64
Ë
__wur
;

395 
	#¥ód
 
¥ód64


	)

396 
	#pwrôe
 
pwrôe64


	)

400 #ifde‡
__USE_LARGEFILE64


404 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

405 
__off64_t
 
__off£t
Ë
__wur
;

408 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
Ë
__wur
;

417 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

419 #ifde‡
__USE_GNU


422 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

432 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

444 
	`¶ìp
 (
__£c⁄ds
);

446 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

447 || 
deföed
 
__USE_BSD


452 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

453 
__THROW
;

460 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

469 
	`∑u£
 ();

473 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

476 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

483 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

488 #ifde‡
__USE_ATFILE


491 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

492 
__gid_t
 
__group
, 
__Êag
)

493 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

497 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

499 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


501 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

511 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

520 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

521 || 
deföed
 
__USE_BSD


525 *
	$gëwd
 (*
__buf
)

526 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

531 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

536 #ifde‡
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

543 **
__ívú⁄
;

544 #ifde‡
__USE_GNU


545 **
ívú⁄
;

551 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

552 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

554 #ifde‡
__USE_XOPEN2K8


557 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

558 
__THROW
 
	`__n⁄nuŒ
 ((2));

563 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

564 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

568 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

569 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

573 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

578 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

585 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 #ifde‡
__USE_GNU


590 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

591 *c⁄° 
__ívp
[])

592 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

596 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


598 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

603 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

609 
	~<bôs/c⁄‚ame.h
>

612 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

613 
__THROW
 
	`__n⁄nuŒ
 ((1));

616 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

619 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

628 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

631 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

634 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

637 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

638 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


639 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

646 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

648 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


660 
	$£çgΩ
 (Ë
__THROW
;

667 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

669 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


671 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

675 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

678 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

681 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

684 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

689 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

702 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


705 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

708 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


710 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

719 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


722 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

725 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


727 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

730 #ifde‡
__USE_GNU


733 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

734 
__THROW
;

738 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

739 
__THROW
;

743 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

744 
__THROW
 
__wur
;

748 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

758 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

759 || 
deföed
 
__USE_BSD


764 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

770 *
	$ây«me
 (
__fd
Ë
__THROW
;

774 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

775 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

779 
	$ißây
 (
__fd
Ë
__THROW
;

781 #i‡
deföed
 
__USE_BSD
 \

782 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

785 
	$ây¶Ÿ
 (Ë
__THROW
;

790 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

791 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

793 #ifde‡
__USE_ATFILE


796 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

797 c⁄° *
__to
, 
__Êags
)

798 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

801 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


803 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

804 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

809 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

810 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

814 #ifde‡
__USE_ATFILE


816 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

817 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

820 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

821 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

822 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

826 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

828 #ifde‡
__USE_ATFILE


830 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

831 
__THROW
 
	`__n⁄nuŒ
 ((2));

835 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

839 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

842 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

849 *
	`gëlogö
 ();

850 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


857 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__√ed_gë›t


	)

871 
	~<gë›t.h
>

875 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


879 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

883 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

886 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

887 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

891 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

897 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

898 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

899 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

900 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

906 
	$vh™gup
 (Ë
__THROW
;

909 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

917 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sˇÀ
)

919 
__THROW
 
	`__n⁄nuŒ
 ((1));

925 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

929 *
	$gëu£rshñl
 (Ë
__THROW
;

930 
	$ídu£rshñl
 (Ë
__THROW
;

931 
	$£tu£rshñl
 (Ë
__THROW
;

937 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

941 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

944 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

948 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifde‡
__USE_GNU


962 
	$syncfs
 (
__fd
Ë
__THROW
;

966 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


969 
	`gëho°id
 ();

972 
	$sync
 (Ë
__THROW
;

975 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


978 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

983 
	$gëdèbÀsize
 (Ë
__THROW
;

989 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


992 #i‚de‡
__USE_FILE_OFFSET64


993 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

994 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

996 #ifde‡
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
åunˇã
,

998 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

999 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1001 
	#åunˇã
 
åunˇã64


	)

1004 #ifde‡
__USE_LARGEFILE64


1005 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1006 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1011 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_POSIX199309
 \

1012 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1015 #i‚de‡
__USE_FILE_OFFSET64


1016 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1018 #ifde‡
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1020 
·runˇã64
Ë
__wur
;

1022 
	#·runˇã
 
·runˇã64


	)

1025 #ifde‡
__USE_LARGEFILE64


1026 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1032 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1033 || 
deföed
 
__USE_MISC


1037 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1043 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1047 #ifde‡
__USE_MISC


1058 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1063 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #i‚de‡
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1083 #ifde‡
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1085 
lockf64
Ë
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifde‡
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1096 #ifde‡
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1102 (
__exãnsi⁄__
 \

1103 ({ 
__ªsu…
; \

1104 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1105 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1106 
__ªsu…
; 
	}
}))

	)

1109 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1112 
fd©async
 (
__fûdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1121 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1125 
	$í¸y±
 (*
__glibc_block
, 
__edÊag
)

1126 
__THROW
 
	`__n⁄nuŒ
 ((1));

1133 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1134 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1140 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1142 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1147 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1148 
	~<bôs/uni°d.h
>

1151 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/byteswap.h

19 #i‡!
deföed
 
_BYTESWAP_H
 && !deföed 
_NETINET_IN_H
 && !deföed 
_ENDIAN_H


23 #i‚de‡
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

28 
	~<bôs/w‹dsize.h
>

31 
	#__bsw≠_c⁄°™t_16
(
x
) \

32 ((Ë((((
x
Ë>> 8Ë& 0xffË| (((xË& 0xffË<< 8)))

	)

35 
	~<bôs/byãsw≠-16.h
>

38 
	#__bsw≠_c⁄°™t_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
Ë& 0x0000ff00Ë<< 8Ë| (((xË& 0x000000ffË<< 24))

	)

42 #ifde‡
__GNUC__


43 #i‡
__GNUC_PREREQ
 (4, 3)

44 
__ölöe
 

45 
	$__bsw≠_32
 (
__bsx
)

47  
	`__buûtö_bsw≠32
 (
__bsx
);

48 
	}
}

49 #ñi‡
__GNUC__
 >= 2

50 #i‡
__WORDSIZE
 =64 || (
deföed
 
__i486__
 || deföed 
__≥¡ium__
 \

51 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

52 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

53 || 
deföed
 
	g__k6__
 || deföed 
	g__noc⁄a__
 \

54 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__geode__
 \

55 || 
deföed
 
	g__amdÁm10__
)

58 
	#__bsw≠_32
(
x
) \

59 (
__exãnsi⁄__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

62 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

64 
	`__asm__
 ("bsw≠ %0" : "Ù" (
__v
Ë: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw≠_32
(
x
) \

68 (
__exãnsi⁄__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

71 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "Ù" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw≠_32
(
x
) \

83 (
__exãnsi⁄__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_32
 (__x); }))

	)

87 
__ölöe
 

88 
	$__bsw≠_32
 (
__bsx
)

90  
	`__bsw≠_c⁄°™t_32
 (
__bsx
);

91 
	}
}

95 #i‡
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw≠_c⁄°™t_64
(
x
) \

98 (
	`__exãnsi⁄__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
Ë& 0x00000000000000ffuŒË<< 56)))

	)

107 #i‡
__GNUC_PREREQ
 (4, 3)

108 
__ölöe
 
__uöt64_t


109 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

111  
	`__buûtö_bsw≠64
 (
__bsx
);

112 
	}
}

113 #ñi‡
__WORDSIZE
 == 64

114 
	#__bsw≠_64
(
x
) \

115 (
__exãnsi⁄__
 \

116 ({ 
__uöt64_t
 
__v
, 
__x
 = (
x
); \

117 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

118 
__v
 = 
	`__bsw≠_c⁄°™t_64
 (
__x
); \

120 
	`__asm__
 ("bsw≠ %q0" : "Ù" (
__v
Ë: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw≠_64
(
x
) \

124 (
__exãnsi⁄__
 \

125 ({ uni⁄ { 
__exãnsi⁄__
 
__uöt64_t
 
__Œ
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 i‡(
	`__buûtö_c⁄°™t_p
 (
x
)) \

128 
__r
.
__Œ
 = 
	`__bsw≠_c⁄°™t_64
 (
x
); \

131 
__w
.
__Œ
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw≠_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw≠_32
 (
__w
.__l[0]); \

135 
__r
.
__Œ
; }))

	)

138 
	#__bsw≠_c⁄°™t_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
Ë& 0x00000000000000ffuŒË<< 56))

	)

148 
__ölöe
 
__uöt64_t


149 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

151  
	`__bsw≠_c⁄°™t_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/confname.h

19 #i‚de‡
_UNISTD_H


26 
	m_PC_LINK_MAX
,

27 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

28 
	m_PC_MAX_CANON
,

29 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

30 
	m_PC_MAX_INPUT
,

31 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

32 
	m_PC_NAME_MAX
,

33 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

34 
	m_PC_PATH_MAX
,

35 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

36 
	m_PC_PIPE_BUF
,

37 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

38 
	m_PC_CHOWN_RESTRICTED
,

39 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

40 
	m_PC_NO_TRUNC
,

41 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

42 
	m_PC_VDISABLE
,

43 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

44 
	m_PC_SYNC_IO
,

45 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

46 
	m_PC_ASYNC_IO
,

47 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

48 
	m_PC_PRIO_IO
,

49 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

50 
	m_PC_SOCK_MAXBUF
,

51 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

52 
	m_PC_FILESIZEBITS
,

53 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

54 
	m_PC_REC_INCR_XFER_SIZE
,

55 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

56 
	m_PC_REC_MAX_XFER_SIZE
,

57 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

58 
	m_PC_REC_MIN_XFER_SIZE
,

59 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

60 
	m_PC_REC_XFER_ALIGN
,

61 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

62 
	m_PC_ALLOC_SIZE_MIN
,

63 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

64 
	m_PC_SYMLINK_MAX
,

65 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

66 
	m_PC_2_SYMLINKS


67 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

73 
	m_SC_ARG_MAX
,

74 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

75 
	m_SC_CHILD_MAX
,

76 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

77 
	m_SC_CLK_TCK
,

78 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

79 
	m_SC_NGROUPS_MAX
,

80 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

81 
	m_SC_OPEN_MAX
,

82 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

83 
	m_SC_STREAM_MAX
,

84 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

85 
	m_SC_TZNAME_MAX
,

86 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

87 
	m_SC_JOB_CONTROL
,

88 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

89 
	m_SC_SAVED_IDS
,

90 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

91 
	m_SC_REALTIME_SIGNALS
,

92 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

93 
	m_SC_PRIORITY_SCHEDULING
,

94 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

95 
	m_SC_TIMERS
,

96 
	#_SC_TIMERS
 
_SC_TIMERS


	)

97 
	m_SC_ASYNCHRONOUS_IO
,

98 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

99 
	m_SC_PRIORITIZED_IO
,

100 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

101 
	m_SC_SYNCHRONIZED_IO
,

102 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

103 
	m_SC_FSYNC
,

104 
	#_SC_FSYNC
 
_SC_FSYNC


	)

105 
	m_SC_MAPPED_FILES
,

106 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

107 
	m_SC_MEMLOCK
,

108 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

109 
	m_SC_MEMLOCK_RANGE
,

110 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

111 
	m_SC_MEMORY_PROTECTION
,

112 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

113 
	m_SC_MESSAGE_PASSING
,

114 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

115 
	m_SC_SEMAPHORES
,

116 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

117 
	m_SC_SHARED_MEMORY_OBJECTS
,

118 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

119 
	m_SC_AIO_LISTIO_MAX
,

120 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

121 
	m_SC_AIO_MAX
,

122 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

123 
	m_SC_AIO_PRIO_DELTA_MAX
,

124 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

125 
	m_SC_DELAYTIMER_MAX
,

126 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

127 
	m_SC_MQ_OPEN_MAX
,

128 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

129 
	m_SC_MQ_PRIO_MAX
,

130 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

131 
	m_SC_VERSION
,

132 
	#_SC_VERSION
 
_SC_VERSION


	)

133 
	m_SC_PAGESIZE
,

134 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

135 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

136 
	m_SC_RTSIG_MAX
,

137 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

138 
	m_SC_SEM_NSEMS_MAX
,

139 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

140 
	m_SC_SEM_VALUE_MAX
,

141 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

142 
	m_SC_SIGQUEUE_MAX
,

143 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

144 
	m_SC_TIMER_MAX
,

145 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

149 
	m_SC_BC_BASE_MAX
,

150 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

151 
	m_SC_BC_DIM_MAX
,

152 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

153 
	m_SC_BC_SCALE_MAX
,

154 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

155 
	m_SC_BC_STRING_MAX
,

156 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

157 
	m_SC_COLL_WEIGHTS_MAX
,

158 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

159 
	m_SC_EQUIV_CLASS_MAX
,

160 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

161 
	m_SC_EXPR_NEST_MAX
,

162 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

163 
	m_SC_LINE_MAX
,

164 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

165 
	m_SC_RE_DUP_MAX
,

166 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

167 
	m_SC_CHARCLASS_NAME_MAX
,

168 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

170 
	m_SC_2_VERSION
,

171 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

172 
	m_SC_2_C_BIND
,

173 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

174 
	m_SC_2_C_DEV
,

175 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

176 
	m_SC_2_FORT_DEV
,

177 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

178 
	m_SC_2_FORT_RUN
,

179 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

180 
	m_SC_2_SW_DEV
,

181 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

182 
	m_SC_2_LOCALEDEF
,

183 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

185 
	m_SC_PII
,

186 
	#_SC_PII
 
_SC_PII


	)

187 
	m_SC_PII_XTI
,

188 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

189 
	m_SC_PII_SOCKET
,

190 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

191 
	m_SC_PII_INTERNET
,

192 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

193 
	m_SC_PII_OSI
,

194 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

195 
	m_SC_POLL
,

196 
	#_SC_POLL
 
_SC_POLL


	)

197 
	m_SC_SELECT
,

198 
	#_SC_SELECT
 
_SC_SELECT


	)

199 
	m_SC_UIO_MAXIOV
,

200 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

201 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

202 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

203 
	m_SC_PII_INTERNET_STREAM
,

204 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

205 
	m_SC_PII_INTERNET_DGRAM
,

206 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

207 
	m_SC_PII_OSI_COTS
,

208 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

209 
	m_SC_PII_OSI_CLTS
,

210 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

211 
	m_SC_PII_OSI_M
,

212 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

213 
	m_SC_T_IOV_MAX
,

214 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

217 
	m_SC_THREADS
,

218 
	#_SC_THREADS
 
_SC_THREADS


	)

219 
	m_SC_THREAD_SAFE_FUNCTIONS
,

220 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

221 
	m_SC_GETGR_R_SIZE_MAX
,

222 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

223 
	m_SC_GETPW_R_SIZE_MAX
,

224 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

225 
	m_SC_LOGIN_NAME_MAX
,

226 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

227 
	m_SC_TTY_NAME_MAX
,

228 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

229 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

230 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

231 
	m_SC_THREAD_KEYS_MAX
,

232 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

233 
	m_SC_THREAD_STACK_MIN
,

234 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

235 
	m_SC_THREAD_THREADS_MAX
,

236 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

237 
	m_SC_THREAD_ATTR_STACKADDR
,

238 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

239 
	m_SC_THREAD_ATTR_STACKSIZE
,

240 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

241 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

242 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

243 
	m_SC_THREAD_PRIO_INHERIT
,

244 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

245 
	m_SC_THREAD_PRIO_PROTECT
,

246 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

247 
	m_SC_THREAD_PROCESS_SHARED
,

248 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

250 
	m_SC_NPROCESSORS_CONF
,

251 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

252 
	m_SC_NPROCESSORS_ONLN
,

253 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

254 
	m_SC_PHYS_PAGES
,

255 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

256 
	m_SC_AVPHYS_PAGES
,

257 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

258 
	m_SC_ATEXIT_MAX
,

259 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

260 
	m_SC_PASS_MAX
,

261 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

263 
	m_SC_XOPEN_VERSION
,

264 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

265 
	m_SC_XOPEN_XCU_VERSION
,

266 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

267 
	m_SC_XOPEN_UNIX
,

268 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

269 
	m_SC_XOPEN_CRYPT
,

270 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

271 
	m_SC_XOPEN_ENH_I18N
,

272 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

273 
	m_SC_XOPEN_SHM
,

274 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

276 
	m_SC_2_CHAR_TERM
,

277 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

278 
	m_SC_2_C_VERSION
,

279 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

280 
	m_SC_2_UPE
,

281 
	#_SC_2_UPE
 
_SC_2_UPE


	)

283 
	m_SC_XOPEN_XPG2
,

284 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

285 
	m_SC_XOPEN_XPG3
,

286 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

287 
	m_SC_XOPEN_XPG4
,

288 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

290 
	m_SC_CHAR_BIT
,

291 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

292 
	m_SC_CHAR_MAX
,

293 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

294 
	m_SC_CHAR_MIN
,

295 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

296 
	m_SC_INT_MAX
,

297 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

298 
	m_SC_INT_MIN
,

299 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

300 
	m_SC_LONG_BIT
,

301 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

302 
	m_SC_WORD_BIT
,

303 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

304 
	m_SC_MB_LEN_MAX
,

305 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

306 
	m_SC_NZERO
,

307 
	#_SC_NZERO
 
_SC_NZERO


	)

308 
	m_SC_SSIZE_MAX
,

309 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

310 
	m_SC_SCHAR_MAX
,

311 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

312 
	m_SC_SCHAR_MIN
,

313 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

314 
	m_SC_SHRT_MAX
,

315 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

316 
	m_SC_SHRT_MIN
,

317 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

318 
	m_SC_UCHAR_MAX
,

319 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

320 
	m_SC_UINT_MAX
,

321 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

322 
	m_SC_ULONG_MAX
,

323 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

324 
	m_SC_USHRT_MAX
,

325 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

327 
	m_SC_NL_ARGMAX
,

328 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

329 
	m_SC_NL_LANGMAX
,

330 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

331 
	m_SC_NL_MSGMAX
,

332 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

333 
	m_SC_NL_NMAX
,

334 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

335 
	m_SC_NL_SETMAX
,

336 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

337 
	m_SC_NL_TEXTMAX
,

338 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

340 
	m_SC_XBS5_ILP32_OFF32
,

341 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

342 
	m_SC_XBS5_ILP32_OFFBIG
,

343 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

344 
	m_SC_XBS5_LP64_OFF64
,

345 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

346 
	m_SC_XBS5_LPBIG_OFFBIG
,

347 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

349 
	m_SC_XOPEN_LEGACY
,

350 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

351 
	m_SC_XOPEN_REALTIME
,

352 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

353 
	m_SC_XOPEN_REALTIME_THREADS
,

354 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

356 
	m_SC_ADVISORY_INFO
,

357 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

358 
	m_SC_BARRIERS
,

359 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

360 
	m_SC_BASE
,

361 
	#_SC_BASE
 
_SC_BASE


	)

362 
	m_SC_C_LANG_SUPPORT
,

363 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

364 
	m_SC_C_LANG_SUPPORT_R
,

365 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

366 
	m_SC_CLOCK_SELECTION
,

367 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

368 
	m_SC_CPUTIME
,

369 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

370 
	m_SC_THREAD_CPUTIME
,

371 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

372 
	m_SC_DEVICE_IO
,

373 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

374 
	m_SC_DEVICE_SPECIFIC
,

375 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

376 
	m_SC_DEVICE_SPECIFIC_R
,

377 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

378 
	m_SC_FD_MGMT
,

379 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

380 
	m_SC_FIFO
,

381 
	#_SC_FIFO
 
_SC_FIFO


	)

382 
	m_SC_PIPE
,

383 
	#_SC_PIPE
 
_SC_PIPE


	)

384 
	m_SC_FILE_ATTRIBUTES
,

385 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

386 
	m_SC_FILE_LOCKING
,

387 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

388 
	m_SC_FILE_SYSTEM
,

389 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

390 
	m_SC_MONOTONIC_CLOCK
,

391 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

392 
	m_SC_MULTI_PROCESS
,

393 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

394 
	m_SC_SINGLE_PROCESS
,

395 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

396 
	m_SC_NETWORKING
,

397 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

398 
	m_SC_READER_WRITER_LOCKS
,

399 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

400 
	m_SC_SPIN_LOCKS
,

401 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

402 
	m_SC_REGEXP
,

403 
	#_SC_REGEXP
 
_SC_REGEXP


	)

404 
	m_SC_REGEX_VERSION
,

405 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

406 
	m_SC_SHELL
,

407 
	#_SC_SHELL
 
_SC_SHELL


	)

408 
	m_SC_SIGNALS
,

409 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

410 
	m_SC_SPAWN
,

411 
	#_SC_SPAWN
 
_SC_SPAWN


	)

412 
	m_SC_SPORADIC_SERVER
,

413 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

414 
	m_SC_THREAD_SPORADIC_SERVER
,

415 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

416 
	m_SC_SYSTEM_DATABASE
,

417 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

418 
	m_SC_SYSTEM_DATABASE_R
,

419 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

420 
	m_SC_TIMEOUTS
,

421 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

422 
	m_SC_TYPED_MEMORY_OBJECTS
,

423 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

424 
	m_SC_USER_GROUPS
,

425 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

426 
	m_SC_USER_GROUPS_R
,

427 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

428 
	m_SC_2_PBS
,

429 
	#_SC_2_PBS
 
_SC_2_PBS


	)

430 
	m_SC_2_PBS_ACCOUNTING
,

431 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

432 
	m_SC_2_PBS_LOCATE
,

433 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

434 
	m_SC_2_PBS_MESSAGE
,

435 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

436 
	m_SC_2_PBS_TRACK
,

437 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

438 
	m_SC_SYMLOOP_MAX
,

439 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

440 
	m_SC_STREAMS
,

441 
	#_SC_STREAMS
 
_SC_STREAMS


	)

442 
	m_SC_2_PBS_CHECKPOINT
,

443 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

445 
	m_SC_V6_ILP32_OFF32
,

446 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

447 
	m_SC_V6_ILP32_OFFBIG
,

448 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

449 
	m_SC_V6_LP64_OFF64
,

450 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

451 
	m_SC_V6_LPBIG_OFFBIG
,

452 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

454 
	m_SC_HOST_NAME_MAX
,

455 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

456 
	m_SC_TRACE
,

457 
	#_SC_TRACE
 
_SC_TRACE


	)

458 
	m_SC_TRACE_EVENT_FILTER
,

459 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

460 
	m_SC_TRACE_INHERIT
,

461 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

462 
	m_SC_TRACE_LOG
,

463 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

465 
	m_SC_LEVEL1_ICACHE_SIZE
,

466 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

467 
	m_SC_LEVEL1_ICACHE_ASSOC
,

468 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

469 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

470 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

471 
	m_SC_LEVEL1_DCACHE_SIZE
,

472 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

473 
	m_SC_LEVEL1_DCACHE_ASSOC
,

474 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

475 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

476 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

477 
	m_SC_LEVEL2_CACHE_SIZE
,

478 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

479 
	m_SC_LEVEL2_CACHE_ASSOC
,

480 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

481 
	m_SC_LEVEL2_CACHE_LINESIZE
,

482 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

483 
	m_SC_LEVEL3_CACHE_SIZE
,

484 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

485 
	m_SC_LEVEL3_CACHE_ASSOC
,

486 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

487 
	m_SC_LEVEL3_CACHE_LINESIZE
,

488 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

489 
	m_SC_LEVEL4_CACHE_SIZE
,

490 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

491 
	m_SC_LEVEL4_CACHE_ASSOC
,

492 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

493 
	m_SC_LEVEL4_CACHE_LINESIZE
,

494 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

497 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

498 
	#_SC_IPV6
 
_SC_IPV6


	)

499 
	m_SC_RAW_SOCKETS
,

500 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

502 
	m_SC_V7_ILP32_OFF32
,

503 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

504 
	m_SC_V7_ILP32_OFFBIG
,

505 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

506 
	m_SC_V7_LP64_OFF64
,

507 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

508 
	m_SC_V7_LPBIG_OFFBIG
,

509 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

511 
	m_SC_SS_REPL_MAX
,

512 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

514 
	m_SC_TRACE_EVENT_NAME_MAX
,

515 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

516 
	m_SC_TRACE_NAME_MAX
,

517 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

518 
	m_SC_TRACE_SYS_MAX
,

519 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

520 
	m_SC_TRACE_USER_EVENT_MAX
,

521 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

523 
	m_SC_XOPEN_STREAMS
,

524 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

526 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

527 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

528 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


529 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

535 
	m_CS_PATH
,

536 
	#_CS_PATH
 
_CS_PATH


	)

538 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

539 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

540 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	m_CS_GNU_LIBC_VERSION
,

543 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

544 
	m_CS_GNU_LIBPTHREAD_VERSION
,

545 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

547 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

548 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

549 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

552 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

553 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	m_CS_LFS_CFLAGS
 = 1000,

556 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

557 
	m_CS_LFS_LDFLAGS
,

558 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

559 
	m_CS_LFS_LIBS
,

560 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

561 
	m_CS_LFS_LINTFLAGS
,

562 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

563 
	m_CS_LFS64_CFLAGS
,

564 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

565 
	m_CS_LFS64_LDFLAGS
,

566 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

567 
	m_CS_LFS64_LIBS
,

568 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

569 
	m_CS_LFS64_LINTFLAGS
,

570 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

572 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

573 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

575 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

577 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

579 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

580 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

581 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

588 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

589 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LIBS
,

593 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

594 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

595 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

596 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

597 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

605 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

606 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

613 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

621 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

622 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

629 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

630 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

638 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

639 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

646 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

654 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

655 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

662 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

663 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

671 
	m_CS_V6_ENV
,

672 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

673 
	m_CS_V7_ENV


674 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/environments.h

18 #i‚de‡
_UNISTD_H


22 
	~<bôs/w‹dsize.h
>

42 #i‡
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

70 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

71 
	#_XBS5_ILP32_OFFBIG
 1

	)

73 #i‚de‡
__x86_64__


75 
	#_POSIX_V7_ILP32_OFF32
 1

	)

76 
	#_POSIX_V6_ILP32_OFF32
 1

	)

77 
	#_XBS5_ILP32_OFF32
 1

	)

95 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

96 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

97 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


98 
	#__ILP32_OFFBIG_CFLAGS
 "-mx32"

	)

99 
	#__ILP32_OFFBIG_LDFLAGS
 "-mx32"

	)

101 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

102 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

104 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

105 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

19 #ifde‡
_ERRNO_H


21 #unde‡
EDOM


22 #unde‡
EILSEQ


23 #unde‡
ERANGE


24 
	~<löux/î∫o.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #i‚de‡
ECANCELED


31 
	#ECANCELED
 125

	)

35 #i‚de‡
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #i‚de‡
ERFKILL


41 
	#ERFKILL
 132

	)

44 #i‚de‡
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #i‚de‡
__ASSEMBLER__


50 *
	$__î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

52 #i‡!
deföed
 
_LIBC
 || deföed 
_LIBC_REENTRANT


54 
	#î∫o
 (*
	`__î∫o_loˇti⁄
 ())

	)

59 #i‡!
deföed
 
_ERRNO_H
 && deföed 
__√ed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

19 #i‚de‡
_FCNTL_H


23 #ifde‡
__x86_64__


24 
	#__O_LARGEFILE
 0

	)

27 #ifde‡
__x86_64__


29 
	#F_GETLK64
 5

	)

30 
	#F_SETLK64
 6

	)

31 
	#F_SETLKW64
 7

	)

35 
	sÊock


37 
	ml_ty≥
;

38 
	ml_whí˚
;

39 #i‚de‡
__USE_FILE_OFFSET64


40 
__off_t
 
	ml_°¨t
;

41 
__off_t
 
	ml_Àn
;

43 
__off64_t
 
	ml_°¨t
;

44 
__off64_t
 
	ml_Àn
;

46 
__pid_t
 
	ml_pid
;

49 #ifde‡
__USE_LARGEFILE64


50 
	sÊock64


52 
	ml_ty≥
;

53 
	ml_whí˚
;

54 
__off64_t
 
	ml_°¨t
;

55 
__off64_t
 
	ml_Àn
;

56 
__pid_t
 
	ml_pid
;

61 
	~<bôs/f˙é-löux.h
>

	@/usr/include/bits/fcntl2.h

19 #i‚def 
_FCNTL_H


25 #i‚de‡
__USE_FILE_OFFSET64


26 
	$__›í_2
 (c⁄° *
__∑th
, 
__oÊag
Ë
	`__n⁄nuŒ
 ((1));

27 
	`__REDIRECT
 (
__›í_Æüs
, (c⁄° *
__∑th
, 
__oÊag
, ...),

28 
›í
Ë
	`__n⁄nuŒ
 ((1));

30 
	`__REDIRECT
 (
__›í_2
, (c⁄° *
__∑th
, 
__oÊag
),

31 
__›í64_2
Ë
	`__n⁄nuŒ
 ((1));

32 
	`__REDIRECT
 (
__›í_Æüs
, (c⁄° *
__∑th
, 
__oÊag
, ...),

33 
›í64
Ë
	`__n⁄nuŒ
 ((1));

35 
	`__îr‹de˛
 (
__›í_too_m™y_¨gs
,

37 
	`__îr‹de˛
 (
__›í_missög_mode
,

40 
__f‹tify_fun˘i⁄
 

41 
	$›í
 (c⁄° *
__∑th
, 
__oÊag
, ...)

43 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

44 
	`__›í_too_m™y_¨gs
 ();

46 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

48 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

50 
	`__›í_missög_mode
 ();

51  
	`__›í_2
 (
__∑th
, 
__oÊag
);

53  
	`__›í_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

56 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

57  
	`__›í_2
 (
__∑th
, 
__oÊag
);

59  
	`__›í_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

60 
	}
}

63 #ifde‡
__USE_LARGEFILE64


64 
	$__›í64_2
 (c⁄° *
__∑th
, 
__oÊag
Ë
	`__n⁄nuŒ
 ((1));

65 
	`__REDIRECT
 (
__›í64_Æüs
, (c⁄° *
__∑th
, 
__oÊag
,

66 ...), 
›í64
Ë
	`__n⁄nuŒ
 ((1));

67 
	`__îr‹de˛
 (
__›í64_too_m™y_¨gs
,

69 
	`__îr‹de˛
 (
__›í64_missög_mode
,

72 
__f‹tify_fun˘i⁄
 

73 
	$›í64
 (c⁄° *
__∑th
, 
__oÊag
, ...)

75 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

76 
	`__›í64_too_m™y_¨gs
 ();

78 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

80 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

82 
	`__›í64_missög_mode
 ();

83  
	`__›í64_2
 (
__∑th
, 
__oÊag
);

85  
	`__›í64_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

88 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

89  
	`__›í64_2
 (
__∑th
, 
__oÊag
);

91  
	`__›í64_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

92 
	}
}

96 #ifde‡
__USE_ATFILE


97 #i‚de‡
__USE_FILE_OFFSET64


98 
	$__›í©_2
 (
__fd
, c⁄° *
__∑th
, 
__oÊag
)

99 
	`__n⁄nuŒ
 ((2));

100 
	`__REDIRECT
 (
__›í©_Æüs
, (
__fd
, c⁄° *
__∑th
,

101 
__oÊag
, ...), 
›í©
)

102 
	`__n⁄nuŒ
 ((2));

104 
	`__REDIRECT
 (
__›í©_2
, (
__fd
, c⁄° *
__∑th
,

105 
__oÊag
), 
__›í©64_2
)

106 
	`__n⁄nuŒ
 ((2));

107 
	`__REDIRECT
 (
__›í©_Æüs
, (
__fd
, c⁄° *
__∑th
,

108 
__oÊag
, ...), 
›í©64
)

109 
	`__n⁄nuŒ
 ((2));

111 
	`__îr‹de˛
 (
__›í©_too_m™y_¨gs
,

113 
	`__îr‹de˛
 (
__›í©_missög_mode
,

116 
__f‹tify_fun˘i⁄
 

117 
	$›í©
 (
__fd
, c⁄° *
__∑th
, 
__oÊag
, ...)

119 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

120 
	`__›í©_too_m™y_¨gs
 ();

122 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

124 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

126 
	`__›í©_missög_mode
 ();

127  
	`__›í©_2
 (
__fd
, 
__∑th
, 
__oÊag
);

129  
	`__›í©_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

132 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

133  
	`__›í©_2
 (
__fd
, 
__∑th
, 
__oÊag
);

135  
	`__›í©_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

136 
	}
}

139 #ifde‡
__USE_LARGEFILE64


140 
	$__›í©64_2
 (
__fd
, c⁄° *
__∑th
, 
__oÊag
)

141 
	`__n⁄nuŒ
 ((2));

142 
	`__REDIRECT
 (
__›í©64_Æüs
, (
__fd
, c⁄° *
__∑th
,

143 
__oÊag
, ...), 
›í©64
)

144 
	`__n⁄nuŒ
 ((2));

145 
	`__îr‹de˛
 (
__›í©64_too_m™y_¨gs
,

147 
	`__îr‹de˛
 (
__›í©64_missög_mode
,

150 
__f‹tify_fun˘i⁄
 

151 
	$›í©64
 (
__fd
, c⁄° *
__∑th
, 
__oÊag
, ...)

153 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

154 
	`__›í©64_too_m™y_¨gs
 ();

156 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

158 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

160 
	`__›í©64_missög_mode
 ();

161  
	`__›í©64_2
 (
__fd
, 
__∑th
, 
__oÊag
);

163  
	`__›í©64_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

166 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

167  
	`__›í©64_2
 (
__fd
, 
__∑th
, 
__oÊag
);

169  
	`__›í©64_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

170 
	}
}

	@/usr/include/bits/in.h

20 #i‚de‡
_NETINET_IN_H


29 #ifde‡
_UAPI_LINUX_IN6_H


33 
	#__USE_KERNEL_IPV6_DEFS


	)

39 
	#IP_OPTIONS
 4

	)

40 
	#IP_HDRINCL
 3

	)

41 
	#IP_TOS
 1

	)

42 
	#IP_TTL
 2

	)

43 
	#IP_RECVOPTS
 6

	)

45 
	#IP_RECVRETOPTS
 
IP_RETOPTS


	)

46 
	#IP_RETOPTS
 7

	)

47 
	#IP_MULTICAST_IF
 32

	)

48 
	#IP_MULTICAST_TTL
 33

	)

49 
	#IP_MULTICAST_LOOP
 34

	)

50 
	#IP_ADD_MEMBERSHIP
 35

	)

51 
	#IP_DROP_MEMBERSHIP
 36

	)

52 
	#IP_UNBLOCK_SOURCE
 37

	)

53 
	#IP_BLOCK_SOURCE
 38

	)

54 
	#IP_ADD_SOURCE_MEMBERSHIP
 39

	)

55 
	#IP_DROP_SOURCE_MEMBERSHIP
 40

	)

56 
	#IP_MSFILTER
 41

	)

57 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


58 
	#MCAST_JOIN_GROUP
 42

	)

59 
	#MCAST_BLOCK_SOURCE
 43

	)

60 
	#MCAST_UNBLOCK_SOURCE
 44

	)

61 
	#MCAST_LEAVE_GROUP
 45

	)

62 
	#MCAST_JOIN_SOURCE_GROUP
 46

	)

63 
	#MCAST_LEAVE_SOURCE_GROUP
 47

	)

64 
	#MCAST_MSFILTER
 48

	)

65 
	#IP_MULTICAST_ALL
 49

	)

66 
	#IP_UNICAST_IF
 50

	)

68 
	#MCAST_EXCLUDE
 0

	)

69 
	#MCAST_INCLUDE
 1

	)

72 
	#IP_ROUTER_ALERT
 5

	)

73 
	#IP_PKTINFO
 8

	)

74 
	#IP_PKTOPTIONS
 9

	)

75 
	#IP_PMTUDISC
 10

	)

76 
	#IP_MTU_DISCOVER
 10

	)

77 
	#IP_RECVERR
 11

	)

78 
	#IP_RECVTTL
 12

	)

79 
	#IP_RECVTOS
 13

	)

80 
	#IP_MTU
 14

	)

81 
	#IP_FREEBIND
 15

	)

82 
	#IP_IPSEC_POLICY
 16

	)

83 
	#IP_XFRM_POLICY
 17

	)

84 
	#IP_PASSSEC
 18

	)

85 
	#IP_TRANSPARENT
 19

	)

86 
	#IP_MULTICAST_ALL
 49

	)

89 
	#IP_ORIGDSTADDR
 20

	)

90 
	#IP_RECVORIGDSTADDR
 
IP_ORIGDSTADDR


	)

92 
	#IP_MINTTL
 21

	)

96 
	#IP_PMTUDISC_DONT
 0

	)

97 
	#IP_PMTUDISC_WANT
 1

	)

98 
	#IP_PMTUDISC_DO
 2

	)

99 
	#IP_PMTUDISC_PROBE
 3

	)

102 
	#SOL_IP
 0

	)

104 
	#IP_DEFAULT_MULTICAST_TTL
 1

	)

105 
	#IP_DEFAULT_MULTICAST_LOOP
 1

	)

106 
	#IP_MAX_MEMBERSHIPS
 20

	)

108 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


112 
	sù_›ts


114 
ö_addr
 
	mù_d°
;

115 
	mù_›ts
[40];

119 
	sù_mªqn


121 
ö_addr
 
	mimr_mu…üddr
;

122 
ö_addr
 
	mimr_addªss
;

123 
	mimr_ifödex
;

127 
	sö_pktöfo


129 
	mùi_ifödex
;

130 
ö_addr
 
	mùi_•ec_d°
;

131 
ö_addr
 
	mùi_addr
;

138 
	#IPV6_ADDRFORM
 1

	)

139 
	#IPV6_2292PKTINFO
 2

	)

140 
	#IPV6_2292HOPOPTS
 3

	)

141 
	#IPV6_2292DSTOPTS
 4

	)

142 
	#IPV6_2292RTHDR
 5

	)

143 
	#IPV6_2292PKTOPTIONS
 6

	)

144 
	#IPV6_CHECKSUM
 7

	)

145 
	#IPV6_2292HOPLIMIT
 8

	)

147 
	#SCM_SRCRT
 
IPV6_RXSRCRT


	)

149 
	#IPV6_NEXTHOP
 9

	)

150 
	#IPV6_AUTHHDR
 10

	)

151 
	#IPV6_UNICAST_HOPS
 16

	)

152 
	#IPV6_MULTICAST_IF
 17

	)

153 
	#IPV6_MULTICAST_HOPS
 18

	)

154 
	#IPV6_MULTICAST_LOOP
 19

	)

155 
	#IPV6_JOIN_GROUP
 20

	)

156 
	#IPV6_LEAVE_GROUP
 21

	)

157 
	#IPV6_ROUTER_ALERT
 22

	)

158 
	#IPV6_MTU_DISCOVER
 23

	)

159 
	#IPV6_MTU
 24

	)

160 
	#IPV6_RECVERR
 25

	)

161 
	#IPV6_V6ONLY
 26

	)

162 
	#IPV6_JOIN_ANYCAST
 27

	)

163 
	#IPV6_LEAVE_ANYCAST
 28

	)

164 
	#IPV6_IPSEC_POLICY
 34

	)

165 
	#IPV6_XFRM_POLICY
 35

	)

167 
	#IPV6_RECVPKTINFO
 49

	)

168 
	#IPV6_PKTINFO
 50

	)

169 
	#IPV6_RECVHOPLIMIT
 51

	)

170 
	#IPV6_HOPLIMIT
 52

	)

171 
	#IPV6_RECVHOPOPTS
 53

	)

172 
	#IPV6_HOPOPTS
 54

	)

173 
	#IPV6_RTHDRDSTOPTS
 55

	)

174 
	#IPV6_RECVRTHDR
 56

	)

175 
	#IPV6_RTHDR
 57

	)

176 
	#IPV6_RECVDSTOPTS
 58

	)

177 
	#IPV6_DSTOPTS
 59

	)

179 
	#IPV6_RECVTCLASS
 66

	)

180 
	#IPV6_TCLASS
 67

	)

183 
	#IPV6_ADD_MEMBERSHIP
 
IPV6_JOIN_GROUP


	)

184 
	#IPV6_DROP_MEMBERSHIP
 
IPV6_LEAVE_GROUP


	)

185 
	#IPV6_RXHOPOPTS
 
IPV6_HOPOPTS


	)

186 
	#IPV6_RXDSTOPTS
 
IPV6_DSTOPTS


	)

189 
	#IPV6_PMTUDISC_DONT
 0

	)

190 
	#IPV6_PMTUDISC_WANT
 1

	)

191 
	#IPV6_PMTUDISC_DO
 2

	)

192 
	#IPV6_PMTUDISC_PROBE
 3

	)

195 
	#SOL_IPV6
 41

	)

196 
	#SOL_ICMPV6
 58

	)

199 
	#IPV6_RTHDR_LOOSE
 0

	)

200 
	#IPV6_RTHDR_STRICT
 1

	)

202 
	#IPV6_RTHDR_TYPE_0
 0

	)

	@/usr/include/bits/ioctl-types.h

19 #i‚de‡
_SYS_IOCTL_H


24 
	~<asm/io˘ls.h
>

27 
	swösize


29 
	mws_row
;

30 
	mws_cﬁ
;

31 
	mws_xpixñ
;

32 
	mws_ypixñ
;

35 
	#NCC
 8

	)

36 
	sãrmio


38 
	mc_iÊag
;

39 
	mc_oÊag
;

40 
	mc_cÊag
;

41 
	mc_lÊag
;

42 
	mc_löe
;

43 
	mc_cc
[
NCC
];

47 
	#TIOCM_LE
 0x001

	)

48 
	#TIOCM_DTR
 0x002

	)

49 
	#TIOCM_RTS
 0x004

	)

50 
	#TIOCM_ST
 0x008

	)

51 
	#TIOCM_SR
 0x010

	)

52 
	#TIOCM_CTS
 0x020

	)

53 
	#TIOCM_CAR
 0x040

	)

54 
	#TIOCM_RNG
 0x080

	)

55 
	#TIOCM_DSR
 0x100

	)

56 
	#TIOCM_CD
 
TIOCM_CAR


	)

57 
	#TIOCM_RI
 
TIOCM_RNG


	)

62 
	#N_TTY
 0

	)

63 
	#N_SLIP
 1

	)

64 
	#N_MOUSE
 2

	)

65 
	#N_PPP
 3

	)

66 
	#N_STRIP
 4

	)

67 
	#N_AX25
 5

	)

68 
	#N_X25
 6

	)

69 
	#N_6PACK
 7

	)

70 
	#N_MASC
 8

	)

71 
	#N_R3964
 9

	)

72 
	#N_PROFIBUS_FDL
 10

	)

73 
	#N_IRDA
 11

	)

74 
	#N_SMSBLOCK
 12

	)

75 
	#N_HDLC
 13

	)

76 
	#N_SYNC_PPP
 14

	)

77 
	#N_HCI
 15

	)

	@/usr/include/bits/ioctls.h

18 #i‚de‡
_SYS_IOCTL_H


23 
	~<asm/io˘ls.h
>

26 
	#SIOCADDRT
 0x890B

	)

27 
	#SIOCDELRT
 0x890C

	)

28 
	#SIOCRTMSG
 0x890D

	)

31 
	#SIOCGIFNAME
 0x8910

	)

32 
	#SIOCSIFLINK
 0x8911

	)

33 
	#SIOCGIFCONF
 0x8912

	)

34 
	#SIOCGIFFLAGS
 0x8913

	)

35 
	#SIOCSIFFLAGS
 0x8914

	)

36 
	#SIOCGIFADDR
 0x8915

	)

37 
	#SIOCSIFADDR
 0x8916

	)

38 
	#SIOCGIFDSTADDR
 0x8917

	)

39 
	#SIOCSIFDSTADDR
 0x8918

	)

40 
	#SIOCGIFBRDADDR
 0x8919

	)

41 
	#SIOCSIFBRDADDR
 0x891®

	)

42 
	#SIOCGIFNETMASK
 0x891b

	)

43 
	#SIOCSIFNETMASK
 0x891¯

	)

44 
	#SIOCGIFMETRIC
 0x891d

	)

45 
	#SIOCSIFMETRIC
 0x891ê

	)

46 
	#SIOCGIFMEM
 0x891‡

	)

47 
	#SIOCSIFMEM
 0x8920

	)

48 
	#SIOCGIFMTU
 0x8921

	)

49 
	#SIOCSIFMTU
 0x8922

	)

50 
	#SIOCSIFNAME
 0x8923

	)

51 
	#SIOCSIFHWADDR
 0x8924

	)

52 
	#SIOCGIFENCAP
 0x8925

	)

53 
	#SIOCSIFENCAP
 0x8926

	)

54 
	#SIOCGIFHWADDR
 0x8927

	)

55 
	#SIOCGIFSLAVE
 0x8929

	)

56 
	#SIOCSIFSLAVE
 0x8930

	)

57 
	#SIOCADDMULTI
 0x8931

	)

58 
	#SIOCDELMULTI
 0x8932

	)

59 
	#SIOCGIFINDEX
 0x8933

	)

60 
	#SIOGIFINDEX
 
SIOCGIFINDEX


	)

61 
	#SIOCSIFPFLAGS
 0x8934

	)

62 
	#SIOCGIFPFLAGS
 0x8935

	)

63 
	#SIOCDIFADDR
 0x8936

	)

64 
	#SIOCSIFHWBROADCAST
 0x8937

	)

65 
	#SIOCGIFCOUNT
 0x8938

	)

67 
	#SIOCGIFBR
 0x8940

	)

68 
	#SIOCSIFBR
 0x8941

	)

70 
	#SIOCGIFTXQLEN
 0x8942

	)

71 
	#SIOCSIFTXQLEN
 0x8943

	)

76 
	#SIOCDARP
 0x8953

	)

77 
	#SIOCGARP
 0x8954

	)

78 
	#SIOCSARP
 0x8955

	)

81 
	#SIOCDRARP
 0x8960

	)

82 
	#SIOCGRARP
 0x8961

	)

83 
	#SIOCSRARP
 0x8962

	)

87 
	#SIOCGIFMAP
 0x8970

	)

88 
	#SIOCSIFMAP
 0x8971

	)

92 
	#SIOCADDDLCI
 0x8980

	)

93 
	#SIOCDELDLCI
 0x8981

	)

102 
	#SIOCDEVPRIVATE
 0x89F0

	)

108 
	#SIOCPROTOPRIVATE
 0x89E0

	)

	@/usr/include/bits/param.h

19 #i‚de‡
_SYS_PARAM_H


23 #i‚de‡
ARG_MAX


24 
	#__undef_ARG_MAX


	)

27 
	~<löux/limôs.h
>

28 
	~<löux/∑øm.h
>

31 #ifde‡
__undef_ARG_MAX


32 #unde‡
ARG_MAX


33 #unde‡
__undef_ARG_MAX


36 
	#MAXSYMLINKS
 20

	)

41 
	#NOFILE
 256

	)

42 
	#NCARGS
 131072

	)

	@/usr/include/bits/posix1_lim.h

24 #i‚def 
_BITS_POSIX1_LIM_H


25 
	#_BITS_POSIX1_LIM_H
 1

	)

31 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

34 
	#_POSIX_AIO_MAX
 1

	)

37 
	#_POSIX_ARG_MAX
 4096

	)

40 #ifde‡
__USE_XOPEN2K


41 
	#_POSIX_CHILD_MAX
 25

	)

43 
	#_POSIX_CHILD_MAX
 6

	)

47 
	#_POSIX_DELAYTIMER_MAX
 32

	)

51 
	#_POSIX_HOST_NAME_MAX
 255

	)

54 
	#_POSIX_LINK_MAX
 8

	)

57 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

60 
	#_POSIX_MAX_CANON
 255

	)

64 
	#_POSIX_MAX_INPUT
 255

	)

67 
	#_POSIX_MQ_OPEN_MAX
 8

	)

70 
	#_POSIX_MQ_PRIO_MAX
 32

	)

73 
	#_POSIX_NAME_MAX
 14

	)

76 #ifde‡
__USE_XOPEN2K


77 
	#_POSIX_NGROUPS_MAX
 8

	)

79 
	#_POSIX_NGROUPS_MAX
 0

	)

83 #ifde‡
__USE_XOPEN2K


84 
	#_POSIX_OPEN_MAX
 20

	)

86 
	#_POSIX_OPEN_MAX
 16

	)

89 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


92 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

96 
	#_POSIX_PATH_MAX
 256

	)

99 
	#_POSIX_PIPE_BUF
 512

	)

103 
	#_POSIX_RE_DUP_MAX
 255

	)

106 
	#_POSIX_RTSIG_MAX
 8

	)

109 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

112 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

115 
	#_POSIX_SIGQUEUE_MAX
 32

	)

118 
	#_POSIX_SSIZE_MAX
 32767

	)

121 
	#_POSIX_STREAM_MAX
 8

	)

124 
	#_POSIX_SYMLINK_MAX
 255

	)

128 
	#_POSIX_SYMLOOP_MAX
 8

	)

131 
	#_POSIX_TIMER_MAX
 32

	)

134 
	#_POSIX_TTY_NAME_MAX
 9

	)

137 #ifde‡
__USE_XOPEN2K


138 
	#_POSIX_TZNAME_MAX
 6

	)

140 
	#_POSIX_TZNAME_MAX
 3

	)

143 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


145 
	#_POSIX_QLIMIT
 1

	)

149 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

152 
	#_POSIX_UIO_MAXIOV
 16

	)

156 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

160 
	~<bôs/loˇl_lim.h
>

163 #i‚def 
SSIZE_MAX


164 
	#SSIZE_MAX
 
LONG_MAX


	)

171 #i‚def 
NGROUPS_MAX


172 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

22 #i‚def 
_BITS_POSIX2_LIM_H


23 
	#_BITS_POSIX2_LIM_H
 1

	)

27 
	#_POSIX2_BC_BASE_MAX
 99

	)

30 
	#_POSIX2_BC_DIM_MAX
 2048

	)

33 
	#_POSIX2_BC_SCALE_MAX
 99

	)

36 
	#_POSIX2_BC_STRING_MAX
 1000

	)

40 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

44 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

47 
	#_POSIX2_LINE_MAX
 2048

	)

51 
	#_POSIX2_RE_DUP_MAX
 255

	)

55 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

62 #i‚def 
BC_BASE_MAX


63 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

65 #i‚def 
BC_DIM_MAX


66 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

68 #i‚def 
BC_SCALE_MAX


69 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

71 #i‚def 
BC_STRING_MAX


72 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

74 #i‚def 
COLL_WEIGHTS_MAX


75 
	#COLL_WEIGHTS_MAX
 255

	)

77 #i‚def 
EXPR_NEST_MAX


78 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

80 #i‚def 
LINE_MAX


81 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

83 #i‚def 
CHARCLASS_NAME_MAX


84 
	#CHARCLASS_NAME_MAX
 2048

	)

88 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/posix_opt.h

19 #i‚def 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

29 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

32 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

35 
	#_POSIX_FSYNC
 200809L

	)

38 
	#_POSIX_MAPPED_FILES
 200809L

	)

41 
	#_POSIX_MEMLOCK
 200809L

	)

44 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

47 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

50 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

54 
	#_POSIX_VDISABLE
 '\0'

	)

57 
	#_POSIX_NO_TRUNC
 1

	)

60 
	#_XOPEN_REALTIME
 1

	)

63 
	#_XOPEN_REALTIME_THREADS
 1

	)

66 
	#_XOPEN_SHM
 1

	)

69 
	#_POSIX_THREADS
 200809L

	)

72 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

73 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

76 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

79 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

85 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

89 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

91 #ifde‡
__USE_XOPEN2K8


93 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

96 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

100 
	#_POSIX_SEMAPHORES
 200809L

	)

103 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

106 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

107 
	#_POSIX_ASYNC_IO
 1

	)

109 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

111 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

114 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

117 
	#_LFS_LARGEFILE
 1

	)

118 
	#_LFS64_LARGEFILE
 1

	)

119 
	#_LFS64_STDIO
 1

	)

122 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

125 
	#_POSIX_CPUTIME
 0

	)

128 
	#_POSIX_THREAD_CPUTIME
 0

	)

131 
	#_POSIX_REGEXP
 1

	)

134 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

137 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_TIMEOUTS
 200809L

	)

143 
	#_POSIX_SPIN_LOCKS
 200809L

	)

146 
	#_POSIX_SPAWN
 200809L

	)

149 
	#_POSIX_TIMERS
 200809L

	)

152 
	#_POSIX_BARRIERS
 200809L

	)

155 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

158 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

161 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

164 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

167 
	#_POSIX_ADVISORY_INFO
 200809L

	)

170 
	#_POSIX_IPV6
 200809L

	)

173 
	#_POSIX_RAW_SOCKETS
 200809L

	)

176 
	#_POSIX2_CHAR_TERM
 200809L

	)

179 
	#_POSIX_SPORADIC_SERVER
 -1

	)

180 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_TRACE
 -1

	)

184 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

185 
	#_POSIX_TRACE_INHERIT
 -1

	)

186 
	#_POSIX_TRACE_LOG
 -1

	)

189 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

18 #i‚de‡
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<bôs/w‹dsize.h
>

23 #ifde‡
__x86_64__


24 #i‡
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±hªad_t
;

63 
	u±hªad_©å_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__Æign
;

68 #i‚de‡
__have_±hªad_©å_t


69 
±hªad_©å_t
 
	t±hªad_©å_t
;

70 
	#__have_±hªad_©å_t
 1

	)

74 #ifde‡
__x86_64__


75 
	s__±hªad_öã∫Æ_li°


77 
__±hªad_öã∫Æ_li°
 *
	m__¥ev
;

78 
__±hªad_öã∫Æ_li°
 *
	m__√xt
;

79 } 
	t__±hªad_li°_t
;

81 
	s__±hªad_öã∫Æ_¶i°


83 
__±hªad_öã∫Æ_¶i°
 *
	m__√xt
;

84 } 
	t__±hªad_¶i°_t
;

92 
	s__±hªad_muãx_s


94 
	m__lock
;

95 
	m__cou¡
;

96 
	m__ow√r
;

97 #ifde‡
__x86_64__


98 
	m__nu£rs
;

102 
	m__köd
;

103 #ifde‡
__x86_64__


104 
	m__•ös
;

105 
	m__ñisi⁄
;

106 
__±hªad_li°_t
 
	m__li°
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

108 
	#__PTHREAD_MUTEX_HAVE_ELISION
 1

	)

110 
	m__nu£rs
;

111 
__exãnsi⁄__
 union

115 
	m__e•ös
;

116 
	m__ñisi⁄
;

117 
	#__•ös
 
d
.
__e•ös


	)

118 
	#__ñisi⁄
 
d
.
__ñisi⁄


	)

119 
	#__PTHREAD_MUTEX_HAVE_ELISION
 2

	)

120 } 
	md
;

121 
__±hªad_¶i°_t
 
	m__li°
;

124 } 
	m__d©a
;

125 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

126 
	m__Æign
;

127 } 
	t±hªad_muãx_t
;

131 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

132 
	m__Æign
;

133 } 
	t±hªad_muãx©å_t
;

142 
	m__lock
;

143 
	m__fuãx
;

144 
__exãnsi⁄__
 
	m__tŸÆ_£q
;

145 
__exãnsi⁄__
 
	m__wakeup_£q
;

146 
__exãnsi⁄__
 
	m__wokí_£q
;

147 *
	m__muãx
;

148 
	m__nwaôîs
;

149 
	m__brﬂdˇ°_£q
;

150 } 
	m__d©a
;

151 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

152 
__exãnsi⁄__
 
	m__Æign
;

153 } 
	t±hªad_c⁄d_t
;

157 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

158 
	m__Æign
;

159 } 
	t±hªad_c⁄d©å_t
;

163 
	t±hªad_key_t
;

167 
	t±hªad_⁄˚_t
;

170 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


175 #ifde‡
__x86_64__


178 
	m__lock
;

179 
	m__ƒ_ªadîs
;

180 
	m__ªadîs_wakeup
;

181 
	m__wrôî_wakeup
;

182 
	m__ƒ_ªadîs_queued
;

183 
	m__ƒ_wrôîs_queued
;

184 
	m__wrôî
;

185 
	m__sh¨ed
;

186 
	m__∑d1
;

187 
	m__∑d2
;

190 
	m__Êags
;

191 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

192 } 
	m__d©a
;

196 
	m__lock
;

197 
	m__ƒ_ªadîs
;

198 
	m__ªadîs_wakeup
;

199 
	m__wrôî_wakeup
;

200 
	m__ƒ_ªadîs_queued
;

201 
	m__ƒ_wrôîs_queued
;

204 
	m__Êags
;

205 
	m__sh¨ed
;

206 
	m__∑d1
;

207 
	m__∑d2
;

208 
	m__wrôî
;

209 } 
	m__d©a
;

211 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

212 
	m__Æign
;

213 } 
	t±hªad_rwlock_t
;

217 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

218 
	m__Æign
;

219 } 
	t±hªad_rwlock©å_t
;

223 #ifde‡
__USE_XOPEN2K


225 vﬁ©ûê
	t±hªad_•ölock_t
;

232 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

233 
	m__Æign
;

234 } 
	t±hªad_b¨rõr_t
;

238 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

239 
	m__Æign
;

240 } 
	t±hªad_b¨rõøâr_t
;

244 #i‚de‡
__x86_64__


246 
	#__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
	`__ªg∑rm__
 (1)))

	)

	@/usr/include/bits/sigaction.h

19 #i‚de‡
_SIGNAL_H


24 
	ssiga˘i⁄


27 #ifde‡
__USE_POSIX199309


31 
__sigh™dÀr_t
 
	mß_h™dÀr
;

33 (*
	mß_siga˘i⁄
Ë(, 
	msigöfo_t
 *, *);

35 
	m__siga˘i⁄_h™dÀr
;

36 
	#ß_h™dÀr
 
__siga˘i⁄_h™dÀr
.
ß_h™dÀr


	)

37 
	#ß_siga˘i⁄
 
__siga˘i⁄_h™dÀr
.
ß_siga˘i⁄


	)

39 
__sigh™dÀr_t
 
	mß_h™dÀr
;

43 
__sig£t_t
 
	mß_mask
;

46 
	mß_Êags
;

49 (*
	mß_ª°‹î
) ();

53 
	#SA_NOCLDSTOP
 1

	)

54 
	#SA_NOCLDWAIT
 2

	)

55 
	#SA_SIGINFO
 4

	)

57 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_MISC


58 
	#SA_ONSTACK
 0x08000000

	)

60 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


61 
	#SA_RESTART
 0x10000000

	)

62 
	#SA_NODEFER
 0x40000000

	)

64 
	#SA_RESETHAND
 0x80000000

	)

66 #ifde‡
__USE_MISC


67 
	#SA_INTERRUPT
 0x20000000

	)

70 
	#SA_NOMASK
 
SA_NODEFER


	)

71 
	#SA_ONESHOT
 
SA_RESETHAND


	)

72 
	#SA_STACK
 
SA_ONSTACK


	)

76 
	#SIG_BLOCK
 0

	)

77 
	#SIG_UNBLOCK
 1

	)

78 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

18 #i‚de‡
_BITS_SIGCONTEXT_H


19 
	#_BITS_SIGCONTEXT_H
 1

	)

21 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
_SYS_UCONTEXT_H


25 
	#FP_XSTATE_MAGIC1
 0x46505853U

	)

26 
	#FP_XSTATE_MAGIC2
 0x46505845U

	)

27 
	#FP_XSTATE_MAGIC2_SIZE
 (
FP_XSTATE_MAGIC2
)

	)

29 
	s_Âx_sw_byãs


31 
__uöt32_t
 
	mmagic1
;

32 
__uöt32_t
 
	mexãnded_size
;

33 
__uöt64_t
 
	mx°©e_bv
;

34 
__uöt32_t
 
	mx°©e_size
;

35 
__uöt32_t
 
	m∑ddög
[7];

38 
	s_Âªg


40 
	msignifiˇnd
[4];

41 
	mexp⁄ít
;

44 
	s_Âxªg


46 
	msignifiˇnd
[4];

47 
	mexp⁄ít
;

48 
	m∑ddög
[3];

51 
	s_xmmªg


53 
__uöt32_t
 
	mñemít
[4];

58 #i‚de‡
__x86_64__


60 
	s_Â°©e


63 
__uöt32_t
 
	mcw
;

64 
__uöt32_t
 
	msw
;

65 
__uöt32_t
 
	mèg
;

66 
__uöt32_t
 
	mùoff
;

67 
__uöt32_t
 
	mcs£l
;

68 
__uöt32_t
 
	md©aoff
;

69 
__uöt32_t
 
	md©a£l
;

70 
_Âªg
 
	m_°
[8];

71 
	m°©us
;

72 
	mmagic
;

75 
__uöt32_t
 
	m_fx§_ív
[6];

76 
__uöt32_t
 
	mmxc§
;

77 
__uöt32_t
 
	mª£rved
;

78 
_Âxªg
 
	m_fx§_°
[8];

79 
_xmmªg
 
	m_xmm
[8];

80 
__uöt32_t
 
	m∑ddög
[56];

83 #i‚de‡
sigc⁄ãxt_°ru˘


88 
	#sigc⁄ãxt_°ru˘
 
sigc⁄ãxt


	)

91 
	#X86_FXSR_MAGIC
 0x0000

	)

93 
	ssigc⁄ãxt


95 
	mgs
, 
	m__gsh
;

96 
	mfs
, 
	m__fsh
;

97 
	mes
, 
	m__esh
;

98 
	mds
, 
	m__dsh
;

99 
	medi
;

100 
	mesi
;

101 
	mebp
;

102 
	me•
;

103 
	mebx
;

104 
	medx
;

105 
	mecx
;

106 
	móx
;

107 
	må≠no
;

108 
	mîr
;

109 
	meù
;

110 
	mcs
, 
	m__csh
;

111 
	meÊags
;

112 
	me•_©_sig«l
;

113 
	mss
, 
	m__ssh
;

114 
_Â°©e
 * 
	mÂ°©e
;

115 
	mﬁdmask
;

116 
	m¸2
;

121 
	s_Â°©e


124 
__uöt16_t
 
	mcwd
;

125 
__uöt16_t
 
	mswd
;

126 
__uöt16_t
 
	m·w
;

127 
__uöt16_t
 
	mf›
;

128 
__uöt64_t
 
	mrù
;

129 
__uöt64_t
 
	mrdp
;

130 
__uöt32_t
 
	mmxc§
;

131 
__uöt32_t
 
	mmx¸_mask
;

132 
_Âxªg
 
	m_°
[8];

133 
_xmmªg
 
	m_xmm
[16];

134 
__uöt32_t
 
	m∑ddög
[24];

137 
	ssigc⁄ãxt


139 
__uöt64_t
 
	mr8
;

140 
__uöt64_t
 
	mr9
;

141 
__uöt64_t
 
	mr10
;

142 
__uöt64_t
 
	mr11
;

143 
__uöt64_t
 
	mr12
;

144 
__uöt64_t
 
	mr13
;

145 
__uöt64_t
 
	mr14
;

146 
__uöt64_t
 
	mr15
;

147 
__uöt64_t
 
	mrdi
;

148 
__uöt64_t
 
	mrsi
;

149 
__uöt64_t
 
	mrbp
;

150 
__uöt64_t
 
	mrbx
;

151 
__uöt64_t
 
	mrdx
;

152 
__uöt64_t
 
	møx
;

153 
__uöt64_t
 
	mrcx
;

154 
__uöt64_t
 
	mr•
;

155 
__uöt64_t
 
	mrù
;

156 
__uöt64_t
 
	meÊags
;

157 
	mcs
;

158 
	mgs
;

159 
	mfs
;

160 
	m__∑d0
;

161 
__uöt64_t
 
	mîr
;

162 
__uöt64_t
 
	må≠no
;

163 
__uöt64_t
 
	mﬁdmask
;

164 
__uöt64_t
 
	m¸2
;

165 
__exãnsi⁄__
 union

167 
_Â°©e
 * 
	mÂ°©e
;

168 
__uöt64_t
 
	m__Â°©e_w‹d
;

170 
__uöt64_t
 
	m__ª£rved1
 [8];

175 
	s_xßve_hdr


177 
__uöt64_t
 
	mx°©e_bv
;

178 
__uöt64_t
 
	mª£rved1
[2];

179 
__uöt64_t
 
	mª£rved2
[5];

182 
	s_ymmh_°©e


184 
__uöt32_t
 
	mymmh_•a˚
[64];

187 
	s_x°©e


189 
_Â°©e
 
	mÂ°©e
;

190 
_xßve_hdr
 
	mx°©e_hdr
;

191 
_ymmh_°©e
 
	mymmh
;

	@/usr/include/bits/siginfo.h

19 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
__√ed_sigöfo_t
 \

20 && !
deföed
 
	g__√ed_sigevít_t


24 
	~<bôs/w‹dsize.h
>

26 #i‡(!
deföed
 
__have_sigvÆ_t
 \

27 && (
deföed
 
	g_SIGNAL_H
 || deföed 
	g__√ed_sigöfo_t
 \

28 || 
deföed
 
	g__√ed_sigevít_t
))

29 
	#__have_sigvÆ_t
 1

	)

32 
	usigvÆ


34 
	msivÆ_öt
;

35 *
	msivÆ_±r
;

36 } 
	tsigvÆ_t
;

39 #i‡(!
deföed
 
__have_sigöfo_t
 \

40 && (
deföed
 
	g_SIGNAL_H
 || deföed 
	g__√ed_sigöfo_t
))

41 
	#__have_sigöfo_t
 1

	)

43 
	#__SI_MAX_SIZE
 128

	)

44 #i‡
__WORDSIZE
 == 64

45 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()Ë- 4)

	)

47 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()Ë- 3)

	)

50 #i‡
deföed
 
__x86_64__
 && 
__WORDSIZE
 == 32

55 
__˛ock_t
 
	t__©åibuã__
 ((
	t__Æig√d__
 (4))Ë
	t__sigchld_˛ock_t
;

56 
	#__SI_ALIGNMENT
 
	`__©åibuã__
 ((
	`__Æig√d__
 (8)))

	)

58 
__˛ock_t
 
	t__sigchld_˛ock_t
;

59 
	#__SI_ALIGNMENT


	)

64 
si_signo
;

65 
si_î∫o
;

67 
si_code
;

71 
_∑d
[
__SI_PAD_SIZE
];

76 
__pid_t
 
si_pid
;

77 
__uid_t
 
si_uid
;

78 } 
_kûl
;

83 
si_tid
;

84 
si_ovîrun
;

85 
sigvÆ_t
 
si_sigvÆ
;

86 } 
_timî
;

91 
__pid_t
 
si_pid
;

92 
__uid_t
 
si_uid
;

93 
sigvÆ_t
 
si_sigvÆ
;

94 } 
_π
;

99 
__pid_t
 
si_pid
;

100 
__uid_t
 
si_uid
;

101 
si_°©us
;

102 
__sigchld_˛ock_t
 
si_utime
;

103 
__sigchld_˛ock_t
 
si_°ime
;

104 } 
_sigchld
;

109 *
si_addr
;

110 
si_addr_lsb
;

111 } 
_sigÁu…
;

116 
si_b™d
;

117 
si_fd
;

118 } 
_sigpﬁl
;

123 *
_ˇŒ_addr
;

124 
_sysˇŒ
;

125 
_¨ch
;

126 } 
_sigsys
;

127 } 
_sifõlds
;

128 } 
	tsigöfo_t
 
	t__SI_ALIGNMENT
;

132 
	#si_pid
 
_sifõlds
.
_kûl
.
si_pid


	)

133 
	#si_uid
 
_sifõlds
.
_kûl
.
si_uid


	)

134 
	#si_timîid
 
_sifõlds
.
_timî
.
si_tid


	)

135 
	#si_ovîrun
 
_sifõlds
.
_timî
.
si_ovîrun


	)

136 
	#si_°©us
 
_sifõlds
.
_sigchld
.
si_°©us


	)

137 
	#si_utime
 
_sifõlds
.
_sigchld
.
si_utime


	)

138 
	#si_°ime
 
_sifõlds
.
_sigchld
.
si_°ime


	)

139 
	#si_vÆue
 
_sifõlds
.
_π
.
si_sigvÆ


	)

140 
	#si_öt
 
_sifõlds
.
_π
.
si_sigvÆ
.
sivÆ_öt


	)

141 
	#si_±r
 
_sifõlds
.
_π
.
si_sigvÆ
.
sivÆ_±r


	)

142 
	#si_addr
 
_sifõlds
.
_sigÁu…
.
si_addr


	)

143 
	#si_addr_lsb
 
_sifõlds
.
_sigÁu…
.
si_addr_lsb


	)

144 
	#si_b™d
 
_sifõlds
.
_sigpﬁl
.
si_b™d


	)

145 
	#si_fd
 
_sifõlds
.
_sigpﬁl
.
si_fd


	)

146 
	#si_ˇŒ_addr
 
_sifõlds
.
_sigsys
.
_ˇŒ_addr


	)

147 
	#si_sysˇŒ
 
_sifõlds
.
_sigsys
.
_sysˇŒ


	)

148 
	#si_¨ch
 
_sifõlds
.
_sigsys
.
_¨ch


	)

155 
SI_ASYNCNL
 = -60,

156 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

157 
SI_TKILL
 = -6,

158 
	#SI_TKILL
 
SI_TKILL


	)

159 
SI_SIGIO
,

160 
	#SI_SIGIO
 
SI_SIGIO


	)

161 
SI_ASYNCIO
,

162 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

163 
SI_MESGQ
,

164 
	#SI_MESGQ
 
SI_MESGQ


	)

165 
SI_TIMER
,

166 
	#SI_TIMER
 
SI_TIMER


	)

167 
SI_QUEUE
,

168 
	#SI_QUEUE
 
SI_QUEUE


	)

169 
SI_USER
,

170 
	#SI_USER
 
SI_USER


	)

171 
SI_KERNEL
 = 0x80

172 
	#SI_KERNEL
 
SI_KERNEL


	)

179 
ILL_ILLOPC
 = 1,

180 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

181 
ILL_ILLOPN
,

182 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

183 
ILL_ILLADR
,

184 
	#ILL_ILLADR
 
ILL_ILLADR


	)

185 
ILL_ILLTRP
,

186 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

187 
ILL_PRVOPC
,

188 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

189 
ILL_PRVREG
,

190 
	#ILL_PRVREG
 
ILL_PRVREG


	)

191 
ILL_COPROC
,

192 
	#ILL_COPROC
 
ILL_COPROC


	)

193 
ILL_BADSTK


194 
	#ILL_BADSTK
 
ILL_BADSTK


	)

200 
FPE_INTDIV
 = 1,

201 
	#FPE_INTDIV
 
FPE_INTDIV


	)

202 
FPE_INTOVF
,

203 
	#FPE_INTOVF
 
FPE_INTOVF


	)

204 
FPE_FLTDIV
,

205 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

206 
FPE_FLTOVF
,

207 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

208 
FPE_FLTUND
,

209 
	#FPE_FLTUND
 
FPE_FLTUND


	)

210 
FPE_FLTRES
,

211 
	#FPE_FLTRES
 
FPE_FLTRES


	)

212 
FPE_FLTINV
,

213 
	#FPE_FLTINV
 
FPE_FLTINV


	)

214 
FPE_FLTSUB


215 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

221 
SEGV_MAPERR
 = 1,

222 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

223 
SEGV_ACCERR


224 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

230 
BUS_ADRALN
 = 1,

231 
	#BUS_ADRALN
 
BUS_ADRALN


	)

232 
BUS_ADRERR
,

233 
	#BUS_ADRERR
 
BUS_ADRERR


	)

234 
BUS_OBJERR
,

235 
	#BUS_OBJERR
 
BUS_OBJERR


	)

236 
BUS_MCEERR_AR
,

237 
	#BUS_MCEERR_AR
 
BUS_MCEERR_AR


	)

238 
BUS_MCEERR_AO


239 
	#BUS_MCEERR_AO
 
BUS_MCEERR_AO


	)

245 
TRAP_BRKPT
 = 1,

246 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

247 
TRAP_TRACE


248 
	#TRAP_TRACE
 
TRAP_TRACE


	)

254 
CLD_EXITED
 = 1,

255 
	#CLD_EXITED
 
CLD_EXITED


	)

256 
CLD_KILLED
,

257 
	#CLD_KILLED
 
CLD_KILLED


	)

258 
CLD_DUMPED
,

259 
	#CLD_DUMPED
 
CLD_DUMPED


	)

260 
CLD_TRAPPED
,

261 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

262 
CLD_STOPPED
,

263 
	#CLD_STOPPED
 
CLD_STOPPED


	)

264 
CLD_CONTINUED


265 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

271 
POLL_IN
 = 1,

272 
	#POLL_IN
 
POLL_IN


	)

273 
POLL_OUT
,

274 
	#POLL_OUT
 
POLL_OUT


	)

275 
POLL_MSG
,

276 
	#POLL_MSG
 
POLL_MSG


	)

277 
POLL_ERR
,

278 
	#POLL_ERR
 
POLL_ERR


	)

279 
POLL_PRI
,

280 
	#POLL_PRI
 
POLL_PRI


	)

281 
POLL_HUP


282 
	#POLL_HUP
 
POLL_HUP


	)

285 #unde‡
__√ed_sigöfo_t


289 #i‡(
deföed
 
_SIGNAL_H
 || deföed 
__√ed_sigevít_t
) \

290 && !
deföed
 
__have_sigevít_t


291 
	#__have_sigevít_t
 1

	)

294 
	#__SIGEV_MAX_SIZE
 64

	)

295 #i‡
__WORDSIZE
 == 64

296 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()Ë- 4)

	)

298 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()Ë- 3)

	)

302 #i‚de‡
__have_±hªad_©å_t


303 
±hªad_©å_t
 
	t±hªad_©å_t
;

304 
	#__have_±hªad_©å_t
 1

	)

307 
	ssigevít


309 
sigvÆ_t
 
sigev_vÆue
;

310 
sigev_signo
;

311 
sigev_nŸify
;

315 
_∑d
[
__SIGEV_PAD_SIZE
];

319 
__pid_t
 
_tid
;

323 (*
_fun˘i⁄
Ë(
sigvÆ_t
);

324 
±hªad_©å_t
 *
_©åibuã
;

325 } 
_sigev_thªad
;

326 } 
_sigev_un
;

327 } 
	tsigevít_t
;

330 
	#sigev_nŸify_fun˘i⁄
 
_sigev_un
.
_sigev_thªad
.
_fun˘i⁄


	)

331 
	#sigev_nŸify_©åibuãs
 
_sigev_un
.
_sigev_thªad
.
_©åibuã


	)

336 
SIGEV_SIGNAL
 = 0,

337 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

338 
SIGEV_NONE
,

339 
	#SIGEV_NONE
 
SIGEV_NONE


	)

340 
SIGEV_THREAD
,

341 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

343 
SIGEV_THREAD_ID
 = 4

344 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

19 #ifdef 
_SIGNAL_H


22 
	#SIG_ERR
 ((
__sigh™dÀr_t
Ë-1Ë

	)

23 
	#SIG_DFL
 ((
__sigh™dÀr_t
Ë0Ë

	)

24 
	#SIG_IGN
 ((
__sigh™dÀr_t
Ë1Ë

	)

26 #ifde‡
__USE_UNIX98


27 
	#SIG_HOLD
 ((
__sigh™dÀr_t
Ë2Ë

	)

32 
	#SIGHUP
 1

	)

33 
	#SIGINT
 2

	)

34 
	#SIGQUIT
 3

	)

35 
	#SIGILL
 4

	)

36 
	#SIGTRAP
 5

	)

37 
	#SIGABRT
 6

	)

38 
	#SIGIOT
 6

	)

39 
	#SIGBUS
 7

	)

40 
	#SIGFPE
 8

	)

41 
	#SIGKILL
 9

	)

42 
	#SIGUSR1
 10

	)

43 
	#SIGSEGV
 11

	)

44 
	#SIGUSR2
 12

	)

45 
	#SIGPIPE
 13

	)

46 
	#SIGALRM
 14

	)

47 
	#SIGTERM
 15

	)

48 
	#SIGSTKFLT
 16

	)

49 
	#SIGCLD
 
SIGCHLD


	)

50 
	#SIGCHLD
 17

	)

51 
	#SIGCONT
 18

	)

52 
	#SIGSTOP
 19

	)

53 
	#SIGTSTP
 20

	)

54 
	#SIGTTIN
 21

	)

55 
	#SIGTTOU
 22

	)

56 
	#SIGURG
 23

	)

57 
	#SIGXCPU
 24

	)

58 
	#SIGXFSZ
 25

	)

59 
	#SIGVTALRM
 26

	)

60 
	#SIGPROF
 27

	)

61 
	#SIGWINCH
 28

	)

62 
	#SIGPOLL
 
SIGIO


	)

63 
	#SIGIO
 29

	)

64 
	#SIGPWR
 30

	)

65 
	#SIGSYS
 31

	)

66 
	#SIGUNUSED
 31

	)

68 
	#_NSIG
 65

	)

71 
	#SIGRTMIN
 (
	`__libc_cuºít_sigπmö
 ())

	)

72 
	#SIGRTMAX
 (
	`__libc_cuºít_sigπmax
 ())

	)

76 
	#__SIGRTMIN
 32

	)

77 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

19 #i‚def 
_SIGSET_H_ty≥s


20 
	#_SIGSET_H_ty≥s
 1

	)

22 
	t__sig_©omic_t
;

26 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

29 
	m__vÆ
[
_SIGSET_NWORDS
];

30 } 
	t__sig£t_t
;

41 #i‡!
deföed
 
_SIGSET_H_‚s
 && deföed 
_SIGNAL_H


42 
	#_SIGSET_H_‚s
 1

	)

44 #i‚de‡
_EXTERN_INLINE


45 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

49 
	#__sigmask
(
sig
) \

50 (((Ë1Ë<< (((
sig
Ë- 1Ë% (8 *  ())))

	)

53 
	#__sigw‹d
(
sig
Ë(((sigË- 1Ë/ (8 *  ()))

	)

55 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

56 
	#__sigem±y£t
(
£t
) \

57 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

58 
sig£t_t
 *
__£t
 = (
£t
); \

59 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = 0; \

60 0; }))

	)

61 
	#__sigfûl£t
(
£t
) \

62 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

63 
sig£t_t
 *
__£t
 = (
£t
); \

64 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = ~0UL; \

65 0; }))

	)

67 #ifde‡
__USE_GNU


71 
	#__sigi£m±y£t
(
£t
) \

72 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

73 c⁄° 
sig£t_t
 *
__£t
 = (
£t
); \

74 
__ªt
 = 
__£t
->
__vÆ
[--
__˙t
]; \

75 !
__ªt
 && --
__˙t
 >= 0) \

76 
__ªt
 = 
__£t
->
__vÆ
[
__˙t
]; \

77 
__ªt
 =0; }))

	)

78 
	#__sig™d£t
(
de°
, 
À·
, 
right
) \

79 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

80 
sig£t_t
 *
__de°
 = (
de°
); \

81 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

82 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

83 --
__˙t
 >= 0) \

84 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

85 & 
__right
->
__vÆ
[
__˙t
]); \

86 0; }))

	)

87 
	#__sig‹£t
(
de°
, 
À·
, 
right
) \

88 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

89 
sig£t_t
 *
__de°
 = (
de°
); \

90 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

91 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

92 --
__˙t
 >= 0) \

93 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

94 | 
__right
->
__vÆ
[
__˙t
]); \

95 0; }))

	)

102 
__sigismembî
 (c⁄° 
__sig£t_t
 *, );

103 
__sigadd£t
 (
__sig£t_t
 *, );

104 
__sigdñ£t
 (
__sig£t_t
 *, );

106 #ifde‡
__USE_EXTERN_INLINES


107 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

108 
_EXTERN_INLINE
 \

109 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

111 
__mask
 = 
	`__sigmask
 (
__sig
); \

112 
__w‹d
 = 
	`__sigw‹d
 (
__sig
); \

113  
BODY
; \

114 }

	)

116 
__SIGSETFN
 (
__sigismembî
, (
__£t
->
__vÆ
[
__w‹d
] & 
__mask
) ? 1 : 0, const)

117 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__vÆ
[
__w‹d
] |
__mask
), 0), )

118 
__SIGSETFN
 (
__sigdñ£t
, ((
__£t
->
__vÆ
[
__w‹d
] &~
__mask
), 0), )

120 #unde‡
__SIGSETFN


	@/usr/include/bits/sigstack.h

19 #i‚de‡
_SIGNAL_H


25 
	ssig°ack


27 *
	mss_•
;

28 
	mss_⁄°ack
;

35 
	mSS_ONSTACK
 = 1,

36 
	#SS_ONSTACK
 
SS_ONSTACK


	)

37 
	mSS_DISABLE


38 
	#SS_DISABLE
 
SS_DISABLE


	)

42 
	#MINSIGSTKSZ
 2048

	)

45 
	#SIGSTKSZ
 8192

	)

49 
	ssigÆt°ack


51 *
	mss_•
;

52 
	mss_Êags
;

53 
size_t
 
	mss_size
;

54 } 
	t°ack_t
;

	@/usr/include/bits/sigthread.h

19 #i‚de‡
_BITS_SIGTHREAD_H


20 
	#_BITS_SIGTHREAD_H
 1

	)

22 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
_PTHREAD_H


30 
	$±hªad_sigmask
 (
__how
,

31 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__√wmask
,

32 
__sig£t_t
 *
__ª°ri˘
 
__ﬁdmask
)
__THROW
;

35 
	$±hªad_kûl
 (
±hªad_t
 
__thªadid
, 
__signo
Ë
__THROW
;

37 #ifde‡
__USE_GNU


39 
	$±hªad_sigqueue
 (
±hªad_t
 
__thªadid
, 
__signo
,

40 c⁄° 
sigvÆ
 
__vÆue
Ë
__THROW
;

	@/usr/include/bits/socket.h

19 #i‚de‡
__BITS_SOCKET_H


20 
	#__BITS_SOCKET_H


	)

22 #i‚de‡
_SYS_SOCKET_H


26 
	#__√ed_size_t


	)

27 
	~<°ddef.h
>

29 
	~<sys/ty≥s.h
>

32 #i‚de‡
__sockÀn_t_deföed


33 
__sockÀn_t
 
	tsockÀn_t
;

34 
	#__sockÀn_t_deföed


	)

38 
	~<bôs/sockë_ty≥.h
>

41 
	#PF_UNSPEC
 0

	)

42 
	#PF_LOCAL
 1

	)

43 
	#PF_UNIX
 
PF_LOCAL


	)

44 
	#PF_FILE
 
PF_LOCAL


	)

45 
	#PF_INET
 2

	)

46 
	#PF_AX25
 3

	)

47 
	#PF_IPX
 4

	)

48 
	#PF_APPLETALK
 5

	)

49 
	#PF_NETROM
 6

	)

50 
	#PF_BRIDGE
 7

	)

51 
	#PF_ATMPVC
 8

	)

52 
	#PF_X25
 9

	)

53 
	#PF_INET6
 10

	)

54 
	#PF_ROSE
 11

	)

55 
	#PF_DEC√t
 12

	)

56 
	#PF_NETBEUI
 13

	)

57 
	#PF_SECURITY
 14

	)

58 
	#PF_KEY
 15

	)

59 
	#PF_NETLINK
 16

	)

60 
	#PF_ROUTE
 
PF_NETLINK


	)

61 
	#PF_PACKET
 17

	)

62 
	#PF_ASH
 18

	)

63 
	#PF_ECONET
 19

	)

64 
	#PF_ATMSVC
 20

	)

65 
	#PF_RDS
 21

	)

66 
	#PF_SNA
 22

	)

67 
	#PF_IRDA
 23

	)

68 
	#PF_PPPOX
 24

	)

69 
	#PF_WANPIPE
 25

	)

70 
	#PF_LLC
 26

	)

71 
	#PF_CAN
 29

	)

72 
	#PF_TIPC
 30

	)

73 
	#PF_BLUETOOTH
 31

	)

74 
	#PF_IUCV
 32

	)

75 
	#PF_RXRPC
 33

	)

76 
	#PF_ISDN
 34

	)

77 
	#PF_PHONET
 35

	)

78 
	#PF_IEEE802154
 36

	)

79 
	#PF_CAIF
 37

	)

80 
	#PF_ALG
 38

	)

81 
	#PF_NFC
 39

	)

82 
	#PF_VSOCK
 40

	)

83 
	#PF_MAX
 41

	)

86 
	#AF_UNSPEC
 
PF_UNSPEC


	)

87 
	#AF_LOCAL
 
PF_LOCAL


	)

88 
	#AF_UNIX
 
PF_UNIX


	)

89 
	#AF_FILE
 
PF_FILE


	)

90 
	#AF_INET
 
PF_INET


	)

91 
	#AF_AX25
 
PF_AX25


	)

92 
	#AF_IPX
 
PF_IPX


	)

93 
	#AF_APPLETALK
 
PF_APPLETALK


	)

94 
	#AF_NETROM
 
PF_NETROM


	)

95 
	#AF_BRIDGE
 
PF_BRIDGE


	)

96 
	#AF_ATMPVC
 
PF_ATMPVC


	)

97 
	#AF_X25
 
PF_X25


	)

98 
	#AF_INET6
 
PF_INET6


	)

99 
	#AF_ROSE
 
PF_ROSE


	)

100 
	#AF_DEC√t
 
PF_DEC√t


	)

101 
	#AF_NETBEUI
 
PF_NETBEUI


	)

102 
	#AF_SECURITY
 
PF_SECURITY


	)

103 
	#AF_KEY
 
PF_KEY


	)

104 
	#AF_NETLINK
 
PF_NETLINK


	)

105 
	#AF_ROUTE
 
PF_ROUTE


	)

106 
	#AF_PACKET
 
PF_PACKET


	)

107 
	#AF_ASH
 
PF_ASH


	)

108 
	#AF_ECONET
 
PF_ECONET


	)

109 
	#AF_ATMSVC
 
PF_ATMSVC


	)

110 
	#AF_RDS
 
PF_RDS


	)

111 
	#AF_SNA
 
PF_SNA


	)

112 
	#AF_IRDA
 
PF_IRDA


	)

113 
	#AF_PPPOX
 
PF_PPPOX


	)

114 
	#AF_WANPIPE
 
PF_WANPIPE


	)

115 
	#AF_LLC
 
PF_LLC


	)

116 
	#AF_CAN
 
PF_CAN


	)

117 
	#AF_TIPC
 
PF_TIPC


	)

118 
	#AF_BLUETOOTH
 
PF_BLUETOOTH


	)

119 
	#AF_IUCV
 
PF_IUCV


	)

120 
	#AF_RXRPC
 
PF_RXRPC


	)

121 
	#AF_ISDN
 
PF_ISDN


	)

122 
	#AF_PHONET
 
PF_PHONET


	)

123 
	#AF_IEEE802154
 
PF_IEEE802154


	)

124 
	#AF_CAIF
 
PF_CAIF


	)

125 
	#AF_ALG
 
PF_ALG


	)

126 
	#AF_NFC
 
PF_NFC


	)

127 
	#AF_VSOCK
 
PF_VSOCK


	)

128 
	#AF_MAX
 
PF_MAX


	)

134 
	#SOL_RAW
 255

	)

135 
	#SOL_DECNET
 261

	)

136 
	#SOL_X25
 262

	)

137 
	#SOL_PACKET
 263

	)

138 
	#SOL_ATM
 264

	)

139 
	#SOL_AAL
 265

	)

140 
	#SOL_IRDA
 266

	)

143 
	#SOMAXCONN
 128

	)

146 
	~<bôs/sockaddr.h
>

149 
	ssockaddr


151 
__SOCKADDR_COMMON
 (
ß_
);

152 
	mß_d©a
[14];

158 
	#__ss_Æig¡y≥
 

	)

159 
	#_SS_SIZE
 128

	)

160 
	#_SS_PADSIZE
 (
_SS_SIZE
 - (2 *  (
__ss_Æig¡y≥
)))

	)

162 
	ssockaddr_°‹age


164 
__SOCKADDR_COMMON
 (
ss_
);

165 
__ss_Æig¡y≥
 
	m__ss_Æign
;

166 
	m__ss_∑ddög
[
_SS_PADSIZE
];

173 
	mMSG_OOB
 = 0x01,

174 
	#MSG_OOB
 
MSG_OOB


	)

175 
	mMSG_PEEK
 = 0x02,

176 
	#MSG_PEEK
 
MSG_PEEK


	)

177 
	mMSG_DONTROUTE
 = 0x04,

178 
	#MSG_DONTROUTE
 
MSG_DONTROUTE


	)

179 #ifde‡
__USE_GNU


181 
	mMSG_TRYHARD
 = 
MSG_DONTROUTE
,

182 
	#MSG_TRYHARD
 
MSG_DONTROUTE


	)

184 
	mMSG_CTRUNC
 = 0x08,

185 
	#MSG_CTRUNC
 
MSG_CTRUNC


	)

186 
	mMSG_PROXY
 = 0x10,

187 
	#MSG_PROXY
 
MSG_PROXY


	)

188 
	mMSG_TRUNC
 = 0x20,

189 
	#MSG_TRUNC
 
MSG_TRUNC


	)

190 
	mMSG_DONTWAIT
 = 0x40,

191 
	#MSG_DONTWAIT
 
MSG_DONTWAIT


	)

192 
	mMSG_EOR
 = 0x80,

193 
	#MSG_EOR
 
MSG_EOR


	)

194 
	mMSG_WAITALL
 = 0x100,

195 
	#MSG_WAITALL
 
MSG_WAITALL


	)

196 
	mMSG_FIN
 = 0x200,

197 
	#MSG_FIN
 
MSG_FIN


	)

198 
	mMSG_SYN
 = 0x400,

199 
	#MSG_SYN
 
MSG_SYN


	)

200 
	mMSG_CONFIRM
 = 0x800,

201 
	#MSG_CONFIRM
 
MSG_CONFIRM


	)

202 
	mMSG_RST
 = 0x1000,

203 
	#MSG_RST
 
MSG_RST


	)

204 
	mMSG_ERRQUEUE
 = 0x2000,

205 
	#MSG_ERRQUEUE
 
MSG_ERRQUEUE


	)

206 
	mMSG_NOSIGNAL
 = 0x4000,

207 
	#MSG_NOSIGNAL
 
MSG_NOSIGNAL


	)

208 
	mMSG_MORE
 = 0x8000,

209 
	#MSG_MORE
 
MSG_MORE


	)

210 
	mMSG_WAITFORONE
 = 0x10000,

211 
	#MSG_WAITFORONE
 
MSG_WAITFORONE


	)

212 
	mMSG_FASTOPEN
 = 0x20000000,

213 
	#MSG_FASTOPEN
 
MSG_FASTOPEN


	)

215 
	mMSG_CMSG_CLOEXEC
 = 0x40000000

218 
	#MSG_CMSG_CLOEXEC
 
MSG_CMSG_CLOEXEC


	)

224 
	smsghdr


226 *
	mmsg_«me
;

227 
sockÀn_t
 
	mmsg_«mñí
;

229 
iovec
 *
	mmsg_iov
;

230 
size_t
 
	mmsg_iovÀn
;

232 *
	mmsg_c⁄åﬁ
;

233 
size_t
 
	mmsg_c⁄åﬁÀn
;

238 
	mmsg_Êags
;

242 
	scmsghdr


244 
size_t
 
	mcmsg_Àn
;

249 
	mcmsg_Àvñ
;

250 
	mcmsg_ty≥
;

251 #i‡(!
deföed
 
__STRICT_ANSI__
 && 
__GNUC__
 >2Ë|| 
__STDC_VERSION__
 >= 199901L

252 
__exãnsi⁄__
 
__cmsg_d©a
 
	m__Êex¨r
;

257 #i‡(!
deföed
 
__STRICT_ANSI__
 && 
__GNUC__
 >2Ë|| 
__STDC_VERSION__
 >= 199901L

258 
	#CMSG_DATA
(
cmsg
Ë((cmsg)->
__cmsg_d©a
)

	)

260 
	#CMSG_DATA
(
cmsg
Ë((*Ë((
cmsghdr
 *Ë(cmsgË+ 1))

	)

262 
	#CMSG_NXTHDR
(
mhdr
, 
cmsg
Ë
	`__cmsg_nxthdr
 (mhdr, cmsg)

	)

263 
	#CMSG_FIRSTHDR
(
mhdr
) \

264 ((
size_t
Ë(
mhdr
)->
msg_c⁄åﬁÀn
 > (
cmsghdr
) \

265 ? (
cmsghdr
 *Ë(
mhdr
)->
msg_c⁄åﬁ
 : (cmsghd∏*Ë0)

	)

266 
	#CMSG_ALIGN
(
Àn
Ë((÷íË+  (
size_t
) - 1) \

267 & (
size_t
Ë~( (size_tË- 1))

	)

268 
	#CMSG_SPACE
(
Àn
Ë(
	`CMSG_ALIGN
 (len) \

269 + 
	`CMSG_ALIGN
 ( (
cmsghdr
)))

	)

270 
	#CMSG_LEN
(
Àn
Ë(
	`CMSG_ALIGN
 ( (
cmsghdr
)Ë+ (Àn))

	)

272 
cmsghdr
 *
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
,

273 
cmsghdr
 *
__cmsg
Ë
__THROW
;

274 #ifde‡
__USE_EXTERN_INLINES


275 #i‚de‡
_EXTERN_INLINE


276 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

278 
_EXTERN_INLINE
 
cmsghdr
 *

279 
	`__NTH
 (
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
, 
cmsghdr
 *
__cmsg
))

281 i‡((
size_t
Ë
__cmsg
->
cmsg_Àn
 <  (
cmsghdr
))

283  (
cmsghdr
 *) 0;

285 
__cmsg
 = (
cmsghdr
 *) ((*) __cmsg

286 + 
	`CMSG_ALIGN
 (
__cmsg
->
cmsg_Àn
));

287 i‡((*Ë(
__cmsg
 + 1Ë> ((*Ë
__mhdr
->
msg_c⁄åﬁ


288 + 
__mhdr
->
msg_c⁄åﬁÀn
)

289 || ((*Ë
__cmsg
 + 
	`CMSG_ALIGN
 (__cmsg->
cmsg_Àn
)

290 > ((*Ë
__mhdr
->
msg_c⁄åﬁ
 + __mhdr->
msg_c⁄åﬁÀn
)))

292  (
cmsghdr
 *) 0;

293  
__cmsg
;

294 
	}
}

301 
	mSCM_RIGHTS
 = 0x01

302 
	#SCM_RIGHTS
 
SCM_RIGHTS


	)

303 #ifde‡
__USE_GNU


304 , 
	mSCM_CREDENTIALS
 = 0x02

305 
	#SCM_CREDENTIALS
 
SCM_CREDENTIALS


	)

309 #ifde‡
__USE_GNU


311 
	su¸ed


313 
pid_t
 
	mpid
;

314 
uid_t
 
	muid
;

315 
gid_t
 
	mgid
;

320 #i‡!
deföed
 
__USE_MISC
 && !deföed 
__USE_GNU


321 #i‚de‡
FIOGETOWN


322 
	#__SYS_SOCKET_H_undef_FIOGETOWN


	)

324 #i‚de‡
FIOSETOWN


325 
	#__SYS_SOCKET_H_undef_FIOSETOWN


	)

327 #i‚de‡
SIOCATMARK


328 
	#__SYS_SOCKET_H_undef_SIOCATMARK


	)

330 #i‚de‡
SIOCGPGRP


331 
	#__SYS_SOCKET_H_undef_SIOCGPGRP


	)

333 #i‚de‡
SIOCGSTAMP


334 
	#__SYS_SOCKET_H_undef_SIOCGSTAMP


	)

336 #i‚de‡
SIOCGSTAMPNS


337 
	#__SYS_SOCKET_H_undef_SIOCGSTAMPNS


	)

339 #i‚de‡
SIOCSPGRP


340 
	#__SYS_SOCKET_H_undef_SIOCSPGRP


	)

345 
	~<asm/sockë.h
>

347 #i‡!
deföed
 
__USE_MISC
 && !deföed 
__USE_GNU


348 #ifde‡
__SYS_SOCKET_H_undef_FIOGETOWN


349 #unde‡
__SYS_SOCKET_H_undef_FIOGETOWN


350 #unde‡
FIOGETOWN


352 #ifde‡
__SYS_SOCKET_H_undef_FIOSETOWN


353 #unde‡
__SYS_SOCKET_H_undef_FIOSETOWN


354 #unde‡
FIOSETOWN


356 #ifde‡
__SYS_SOCKET_H_undef_SIOCATMARK


357 #unde‡
__SYS_SOCKET_H_undef_SIOCATMARK


358 #unde‡
SIOCATMARK


360 #ifde‡
__SYS_SOCKET_H_undef_SIOCGPGRP


361 #unde‡
__SYS_SOCKET_H_undef_SIOCGPGRP


362 #unde‡
SIOCGPGRP


364 #ifde‡
__SYS_SOCKET_H_undef_SIOCGSTAMP


365 #unde‡
__SYS_SOCKET_H_undef_SIOCGSTAMP


366 #unde‡
SIOCGSTAMP


368 #ifde‡
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


369 #unde‡
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


370 #unde‡
SIOCGSTAMPNS


372 #ifde‡
__SYS_SOCKET_H_undef_SIOCSPGRP


373 #unde‡
__SYS_SOCKET_H_undef_SIOCSPGRP


374 #unde‡
SIOCSPGRP


379 
	slögî


381 
	ml_⁄off
;

382 
	ml_lögî
;

	@/usr/include/bits/socket2.h

19 #i‚de‡
_SYS_SOCKET_H


23 
ssize_t
 
__ªcv_chk
 (
__fd
, *
__buf
, 
size_t
 
__n
, size_à
__buÊí
,

24 
__Êags
);

25 
ssize_t
 
__REDIRECT
 (
__ªcv_Æüs
, (
__fd
, *
__buf
, 
size_t
 
__n
,

26 
__Êags
), 
ªcv
);

27 
ssize_t
 
__REDIRECT
 (
__ªcv_chk_w¨n
,

28 (
__fd
, *
__buf
, 
size_t
 
__n
, size_à
__buÊí
,

29 
__Êags
), 
__ªcv_chk
)

30 
__w¨«âr
 ("recv called with biggerÜengthÅhan size of destination "

33 
__f‹tify_fun˘i⁄
 
ssize_t


34 
	$ªcv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__Êags
)

36 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

38 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

39  
	`__ªcv_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
);

41 i‡(
__n
 > 
	`__bos0
 (
__buf
))

42  
	`__ªcv_chk_w¨n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
);

44  
	`__ªcv_Æüs
 (
__fd
, 
__buf
, 
__n
, 
__Êags
);

45 
	}
}

47 
ssize_t
 
__ªcv‰om_chk
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

48 
size_t
 
__buÊí
, 
__Êags
,

49 
__SOCKADDR_ARG
 
__addr
,

50 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

51 
ssize_t
 
__REDIRECT
 (
__ªcv‰om_Æüs
,

52 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

53 
__Êags
, 
__SOCKADDR_ARG
 
__addr
,

54 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
), 
ªcv‰om
);

55 
ssize_t
 
__REDIRECT
 (
__ªcv‰om_chk_w¨n
,

56 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

57 
size_t
 
__buÊí
, 
__Êags
,

58 
__SOCKADDR_ARG
 
__addr
,

59 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
), 
__ªcv‰om_chk
)

60 
__w¨«âr
 ("recvfrom called with biggerÜengthÅhan size of "

63 
__f‹tify_fun˘i⁄
 
ssize_t


64 
	$ªcv‰om
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
, 
__Êags
,

65 
__SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
)

67 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

69 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

70  
	`__ªcv‰om_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
,

71 
__addr
, 
__addr_Àn
);

72 i‡(
__n
 > 
	`__bos0
 (
__buf
))

73  
	`__ªcv‰om_chk_w¨n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
,

74 
__addr
, 
__addr_Àn
);

76  
	`__ªcv‰om_Æüs
 (
__fd
, 
__buf
, 
__n
, 
__Êags
, 
__addr
, 
__addr_Àn
);

77 
	}
}

	@/usr/include/bits/stat.h

18 #i‡!
deföed
 
_SYS_STAT_H
 && !deföed 
_FCNTL_H


22 #i‚de‡
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #i‚de‡
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s°©


48 
__dev_t
 
	m°_dev
;

49 #i‚de‡
__x86_64__


50 
	m__∑d1
;

52 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


53 
__öo_t
 
	m°_öo
;

55 
__öo_t
 
	m__°_öo
;

57 #i‚de‡
__x86_64__


58 
__mode_t
 
	m°_mode
;

59 
__∆ök_t
 
	m°_∆ök
;

61 
__∆ök_t
 
	m°_∆ök
;

62 
__mode_t
 
	m°_mode
;

64 
__uid_t
 
	m°_uid
;

65 
__gid_t
 
	m°_gid
;

66 #ifde‡
__x86_64__


67 
	m__∑d0
;

69 
__dev_t
 
	m°_rdev
;

70 #i‚de‡
__x86_64__


71 
	m__∑d2
;

73 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m°_size
;

76 
__off64_t
 
	m°_size
;

78 
__blksize_t
 
	m°_blksize
;

79 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


80 
__blk˙t_t
 
	m°_blocks
;

82 
__blk˙t64_t
 
	m°_blocks
;

84 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


91 
time•ec
 
	m°_©im
;

92 
time•ec
 
	m°_mtim
;

93 
time•ec
 
	m°_˘im
;

94 
	#°_©ime
 
°_©im
.
tv_£c


	)

95 
	#°_mtime
 
°_mtim
.
tv_£c


	)

96 
	#°_˘ime
 
°_˘im
.
tv_£c


	)

98 
__time_t
 
	m°_©ime
;

99 
__sysˇŒ_ul⁄g_t
 
	m°_©imí£c
;

100 
__time_t
 
	m°_mtime
;

101 
__sysˇŒ_ul⁄g_t
 
	m°_mtimí£c
;

102 
__time_t
 
	m°_˘ime
;

103 
__sysˇŒ_ul⁄g_t
 
	m°_˘imí£c
;

105 #ifde‡
__x86_64__


106 
__sysˇŒ_¶⁄g_t
 
	m__glibc_ª£rved
[3];

108 #i‚de‡
__USE_FILE_OFFSET64


109 
	m__glibc_ª£rved4
;

110 
	m__glibc_ª£rved5
;

112 
__öo64_t
 
	m°_öo
;

117 #ifde‡
__USE_LARGEFILE64


119 
	s°©64


121 
__dev_t
 
	m°_dev
;

122 #ifde‡
__x86_64__


123 
__öo64_t
 
	m°_öo
;

124 
__∆ök_t
 
	m°_∆ök
;

125 
__mode_t
 
	m°_mode
;

127 
	m__∑d1
;

128 
__öo_t
 
	m__°_öo
;

129 
__mode_t
 
	m°_mode
;

130 
__∆ök_t
 
	m°_∆ök
;

132 
__uid_t
 
	m°_uid
;

133 
__gid_t
 
	m°_gid
;

134 #ifde‡
__x86_64__


135 
	m__∑d0
;

136 
__dev_t
 
	m°_rdev
;

137 
__off_t
 
	m°_size
;

139 
__dev_t
 
	m°_rdev
;

140 
	m__∑d2
;

141 
__off64_t
 
	m°_size
;

143 
__blksize_t
 
	m°_blksize
;

144 
__blk˙t64_t
 
	m°_blocks
;

145 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


152 
time•ec
 
	m°_©im
;

153 
time•ec
 
	m°_mtim
;

154 
time•ec
 
	m°_˘im
;

156 
__time_t
 
	m°_©ime
;

157 
__sysˇŒ_ul⁄g_t
 
	m°_©imí£c
;

158 
__time_t
 
	m°_mtime
;

159 
__sysˇŒ_ul⁄g_t
 
	m°_mtimí£c
;

160 
__time_t
 
	m°_˘ime
;

161 
__sysˇŒ_ul⁄g_t
 
	m°_˘imí£c
;

163 #ifde‡
__x86_64__


164 
__sysˇŒ_¶⁄g_t
 
	m__glibc_ª£rved
[3];

166 
__öo64_t
 
	m°_öo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifde‡
__USE_ATFILE


206 
	#UTIME_NOW
 ((1»<< 30Ë- 1l)

	)

207 
	#UTIME_OMIT
 ((1»<< 30Ë- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

19 #i‚de‡
_STDIO_H


23 
__BEGIN_NAMESPACE_STD


24 
	$__LDBL_REDIR_DECL
 (
Ârötf
)

25 
	$__LDBL_REDIR_DECL
 (
¥ötf
)

26 
	$__LDBL_REDIR_DECL
 (
•rötf
)

27 
	$__LDBL_REDIR_DECL
 (
vÂrötf
)

28 
	$__LDBL_REDIR_DECL
 (
v¥ötf
)

29 
	$__LDBL_REDIR_DECL
 (
v•rötf
)

30 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

31 && !
deföed
 
__REDIRECT
 \

32 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

33 
	$__LDBL_REDIR1_DECL
 (
fsˇnf
, 
__∆dbl___isoc99_fsˇnf
)

34 
	$__LDBL_REDIR1_DECL
 (
sˇnf
, 
__∆dbl___isoc99_sˇnf
)

35 
	$__LDBL_REDIR1_DECL
 (
ssˇnf
, 
__∆dbl___isoc99_ssˇnf
)

37 
	$__LDBL_REDIR_DECL
 (
fsˇnf
)

38 
	$__LDBL_REDIR_DECL
 (
sˇnf
)

39 
	$__LDBL_REDIR_DECL
 (
ssˇnf
)

41 
__END_NAMESPACE_STD


43 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
¢¥ötf
)

46 
	$__LDBL_REDIR_DECL
 (
v¢¥ötf
)

47 
__END_NAMESPACE_C99


50 #ifdef 
__USE_ISOC99


51 
__BEGIN_NAMESPACE_C99


52 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

53 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

54 
	$__LDBL_REDIR1_DECL
 (
vfsˇnf
, 
__∆dbl___isoc99_vfsˇnf
)

55 
	$__LDBL_REDIR1_DECL
 (
vsˇnf
, 
__∆dbl___isoc99_vsˇnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vssˇnf
, 
__∆dbl___isoc99_vssˇnf
)

58 
	$__LDBL_REDIR_DECL
 (
vfsˇnf
)

59 
	$__LDBL_REDIR_DECL
 (
vssˇnf
)

60 
	$__LDBL_REDIR_DECL
 (
vsˇnf
)

62 
__END_NAMESPACE_C99


65 #ifde‡
__USE_XOPEN2K8


66 
	$__LDBL_REDIR_DECL
 (
vd¥ötf
)

67 
	$__LDBL_REDIR_DECL
 (
d¥ötf
)

70 #ifde‡
__USE_GNU


71 
	$__LDBL_REDIR_DECL
 (
va•rötf
)

72 
	$__LDBL_REDIR_DECL
 (
__a•rötf
)

73 
	$__LDBL_REDIR_DECL
 (
a•rötf
)

74 
	$__LDBL_REDIR_DECL
 (
ob°ack_¥ötf
)

75 
	$__LDBL_REDIR_DECL
 (
ob°ack_v¥ötf
)

78 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


79 
	$__LDBL_REDIR_DECL
 (
__•rötf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v•rötf_chk
)

81 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


82 
	$__LDBL_REDIR_DECL
 (
__¢¥ötf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__v¢¥ötf_chk
)

85 #i‡
__USE_FORTIFY_LEVEL
 > 1

86 
	$__LDBL_REDIR_DECL
 (
__Ârötf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__¥ötf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__vÂrötf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__v¥ötf_chk
)

90 #ifde‡
__USE_XOPEN2K8


91 
	$__LDBL_REDIR_DECL
 (
__d¥ötf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd¥ötf_chk
)

94 #ifde‡
__USE_GNU


95 
	$__LDBL_REDIR_DECL
 (
__a•rötf_chk
)

96 
	$__LDBL_REDIR_DECL
 (
__va•rötf_chk
)

97 
	$__LDBL_REDIR_DECL
 (
__ob°ack_¥ötf_chk
)

98 
	$__LDBL_REDIR_DECL
 (
__ob°ack_v¥ötf_chk
)

	@/usr/include/bits/stdio.h

19 #i‚de‡
_STDIO_H


23 #i‚de‡
__exã∫_ölöe


24 
	#__STDIO_INLINE
 
ölöe


	)

26 
	#__STDIO_INLINE
 
__exã∫_ölöe


	)

30 #ifde‡
__USE_EXTERN_INLINES


33 #i‡!(
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
)

35 
__STDIO_INLINE
 

36 
	$v¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

38  
	`vÂrötf
 (
°dout
, 
__fmt
, 
__¨g
);

39 
	}
}

43 
__STDIO_INLINE
 

44 
	$gëch¨
 ()

46  
	`_IO_gëc
 (
°dö
);

47 
	}
}

50 #ifde‡
__USE_MISC


52 
__STDIO_INLINE
 

53 
	$fgëc_u∆ocked
 (
FILE
 *
__Â
)

55  
	`_IO_gëc_u∆ocked
 (
__Â
);

56 
	}
}

60 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


62 
__STDIO_INLINE
 

63 
	$gëc_u∆ocked
 (
FILE
 *
__Â
)

65  
	`_IO_gëc_u∆ocked
 (
__Â
);

66 
	}
}

69 
__STDIO_INLINE
 

70 
	$gëch¨_u∆ocked
 ()

72  
	`_IO_gëc_u∆ocked
 (
°dö
);

73 
	}
}

78 
__STDIO_INLINE
 

79 
	$putch¨
 (
__c
)

81  
	`_IO_putc
 (
__c
, 
°dout
);

82 
	}
}

85 #ifde‡
__USE_MISC


87 
__STDIO_INLINE
 

88 
	$Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

90  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

91 
	}
}

95 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


97 
__STDIO_INLINE
 

98 
	$putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

100  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

101 
	}
}

104 
__STDIO_INLINE
 

105 
	$putch¨_u∆ocked
 (
__c
)

107  
	`_IO_putc_u∆ocked
 (
__c
, 
°dout
);

108 
	}
}

112 #ifdef 
__USE_GNU


114 
__STDIO_INLINE
 
_IO_ssize_t


115 
	$gëlöe
 (**
__löïå
, 
size_t
 *
__n
, 
FILE
 *
__°ªam
)

117  
	`__gëdñim
 (
__löïå
, 
__n
, '\n', 
__°ªam
);

118 
	}
}

122 #ifde‡
__USE_MISC


124 
__STDIO_INLINE
 

125 
__NTH
 (
	$„of_u∆ocked
 (
FILE
 *
__°ªam
))

127  
	`_IO_„of_u∆ocked
 (
__°ªam
);

128 
	}
}

131 
__STDIO_INLINE
 

132 
__NTH
 (
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
))

134  
	`_IO_„º‹_u∆ocked
 (
__°ªam
);

135 
	}
}

141 #i‡
deföed
 
__USE_MISC
 && deföed 
__GNUC__
 && deföed 
__OPTIMIZE__
 \

142 && !
deföed
 
	g__˝lu•lus


144 
	#‰ód_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

145 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

146 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

147 && (
size_t
Ë(
size
) != 0) \

148 ? ({ *
__±r
 = (*Ë(
±r
); \

149 
FILE
 *
__°ªam
 = (
°ªam
); \

150 
size_t
 
__˙t
; \

151 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

152 
__˙t
 > 0; --__cnt) \

154 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
); \

155 i‡(
__c
 =
EOF
) \

157 *
__±r
++ = 
__c
; \

159 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

160 / (
size_t
Ë(
size
); }) \

161 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

162 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

164 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

165 (Ë(
n
), (
size_t
) 0) \

166 : 
	`‰ód_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

168 
	#fwrôe_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

169 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

170 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

171 && (
size_t
Ë(
size
) != 0) \

172 ? ({ c⁄° *
__±r
 = (c⁄° *Ë(
±r
); \

173 
FILE
 *
__°ªam
 = (
°ªam
); \

174 
size_t
 
__˙t
; \

175 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

176 
__˙t
 > 0; --__cnt) \

177 i‡(
	`_IO_putc_u∆ocked
 (*
__±r
++, 
__°ªam
Ë=
EOF
) \

179 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

180 / (
size_t
Ë(
size
); }) \

181 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

182 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

184 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

185 (Ë(
n
), (
size_t
) 0) \

186 : 
	`fwrôe_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

190 #unde‡
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #i‚de‡
_STDIO_H


23 
	$__•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

24 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

25 
	$__v•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

26 c⁄° *
__ª°ri˘
 
__f‹m©
,

27 
_G_va_li°
 
__≠
Ë
__THROW
;

29 #ifde‡
__va_¨g_∑ck


30 
__f‹tify_fun˘i⁄
 

31 
	`__NTH
 (
	$•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__fmt
, ...))

33  
	`__buûtö___•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

34 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

35 
	}
}

36 #ñi‡!
deföed
 
__˝lu•lus


37 
	#•rötf
(
°r
, ...) \

38 
	`__buûtö___•rötf_chk
 (
°r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

39 
__VA_ARGS__
)

	)

42 
__f‹tify_fun˘i⁄
 

43 
__NTH
 (
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__fmt
,

44 
_G_va_li°
 
__≠
))

46  
	`__buûtö___v•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

47 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

48 
	}
}

50 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


52 
	$__¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

53 
size_t
 
__¶í
, c⁄° *
__ª°ri˘
 
__f‹m©
,

54 ...Ë
__THROW
;

55 
	$__v¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

56 
size_t
 
__¶í
, c⁄° *
__ª°ri˘
 
__f‹m©
,

57 
_G_va_li°
 
__≠
Ë
__THROW
;

59 #ifde‡
__va_¨g_∑ck


60 
__f‹tify_fun˘i⁄
 

61 
	`__NTH
 (
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

62 c⁄° *
__ª°ri˘
 
__fmt
, ...))

64  
	`__buûtö___¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

65 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

66 
	}
}

67 #ñi‡!
deföed
 
__˝lu•lus


68 
	#¢¥ötf
(
°r
, 
Àn
, ...) \

69 
	`__buûtö___¢¥ötf_chk
 (
°r
, 
Àn
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

70 
__VA_ARGS__
)

	)

73 
__f‹tify_fun˘i⁄
 

74 
__NTH
 (
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

75 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

77  
	`__buûtö___v¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

78 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

79 
	}
}

83 #i‡
__USE_FORTIFY_LEVEL
 > 1

85 
__Ârötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

86 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

87 
__¥ötf_chk
 (
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

88 
__vÂrötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

89 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__≠
);

90 
__v¥ötf_chk
 (
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
,

91 
_G_va_li°
 
__≠
);

93 #ifde‡
__va_¨g_∑ck


94 
__f‹tify_fun˘i⁄
 

95 
	$Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, c⁄° *__ª°ri˘ 
__fmt
, ...)

97  
	`__Ârötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

98 
	`__va_¨g_∑ck
 ());

99 
	}
}

101 
__f‹tify_fun˘i⁄
 

102 
	$¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, ...)

104  
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

105 
	}
}

106 #ñi‡!
deföed
 
__˝lu•lus


107 
	#¥ötf
(...) \

108 
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

109 
	#Ârötf
(
°ªam
, ...) \

110 
	`__Ârötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

113 
__f‹tify_fun˘i⁄
 

114 
	$v¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

116 #ifde‡
__USE_EXTERN_INLINES


117  
	`__vÂrötf_chk
 (
°dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

119  
	`__v¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

121 
	}
}

123 
__f‹tify_fun˘i⁄
 

124 
	$vÂrötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

125 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

127  
	`__vÂrötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

128 
	}
}

130 #ifde‡
__USE_XOPEN2K8


131 
	$__d¥ötf_chk
 (
__fd
, 
__Êag
, c⁄° *
__ª°ri˘
 
__fmt
,

132 ...Ë
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

133 
	$__vd¥ötf_chk
 (
__fd
, 
__Êag
,

134 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

135 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

137 #ifde‡
__va_¨g_∑ck


138 
__f‹tify_fun˘i⁄
 

139 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

141  
	`__d¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

142 
	`__va_¨g_∑ck
 ());

143 
	}
}

144 #ñi‡!
deföed
 
__˝lu•lus


145 
	#d¥ötf
(
fd
, ...) \

146 
	`__d¥ötf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

149 
__f‹tify_fun˘i⁄
 

150 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

152  
	`__vd¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

153 
	}
}

156 #ifde‡
__USE_GNU


158 
	$__a•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

159 c⁄° *
__ª°ri˘
 
__fmt
, ...)

160 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 4))Ë
__wur
;

161 
	$__va•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

162 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

163 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 0))Ë
__wur
;

164 
	$__ob°ack_¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

165 
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
,

167 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

168 
	$__ob°ack_v¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

169 
__Êag
,

170 c⁄° *
__ª°ri˘
 
__f‹m©
,

171 
_G_va_li°
 
__¨gs
)

172 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

174 #ifde‡
__va_¨g_∑ck


175 
__f‹tify_fun˘i⁄
 

176 
	`__NTH
 (
	$a•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
, ...))

178  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

179 
	`__va_¨g_∑ck
 ());

180 
	}
}

182 
__f‹tify_fun˘i⁄
 

183 
__NTH
 (
	$__a•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
,

186  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

187 
	`__va_¨g_∑ck
 ());

188 
	}
}

190 
__f‹tify_fun˘i⁄
 

191 
__NTH
 (
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

192 c⁄° *
__ª°ri˘
 
__fmt
, ...))

194  
	`__ob°ack_¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

195 
	`__va_¨g_∑ck
 ());

196 
	}
}

197 #ñi‡!
deföed
 
__˝lu•lus


198 
	#a•rötf
(
±r
, ...) \

199 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

200 
	#__a•rötf
(
±r
, ...) \

201 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

202 
	#ob°ack_¥ötf
(
ob°ack
, ...) \

203 
	`__ob°ack_¥ötf_chk
 (
ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

206 
__f‹tify_fun˘i⁄
 

207 
__NTH
 (
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
,

208 
_G_va_li°
 
__≠
))

210  
	`__va•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

211 
	}
}

213 
__f‹tify_fun˘i⁄
 

214 
__NTH
 (
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

215 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

217  
	`__ob°ack_v¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

218 
__≠
);

219 
	}
}

225 #i‡!
deföed
 
__USE_ISOC11
 \

226 || (
deföed
 
	g__˝lu•lus
 && __˝lu•lu†<201103L && !deföed 
__USE_GNU
)

227 *
	$__gës_chk
 (*
__°r
, 
size_t
Ë
__wur
;

228 *
	`__REDIRECT
 (
__gës_w¨n
, (*
__°r
), 
gës
)

229 
__wur
 
	`__w¨«âr
 ("please use fgets or getline instead, gets can't "

232 
__f‹tify_fun˘i⁄
 
__wur
 *

233 
	$gës
 (*
__°r
)

235 i‡(
	`__bos
 (
__°r
Ë!(
size_t
) -1)

236  
	`__gës_chk
 (
__°r
, 
	`__bos
 (__str));

237  
	`__gës_w¨n
 (
__°r
);

238 
	}
}

241 *
	$__fgës_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

242 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

243 *
	`__REDIRECT
 (
__fgës_Æüs
,

244 (*
__ª°ri˘
 
__s
, 
__n
,

245 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës
Ë
__wur
;

246 *
	`__REDIRECT
 (
__fgës_chk_w¨n
,

247 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

248 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_chk
)

249 
__wur
 
	`__w¨«âr
 ("fgets called with bigger sizeÅhanÜength "

252 
__f‹tify_fun˘i⁄
 
__wur
 *

253 
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

255 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

257 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

258  
	`__fgës_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

260 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

261  
	`__fgës_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

263  
	`__fgës_Æüs
 (
__s
, 
__n
, 
__°ªam
);

264 
	}
}

266 
size_t
 
	$__‰ód_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

267 
size_t
 
__size
, size_à
__n
,

268 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

269 
size_t
 
	`__REDIRECT
 (
__‰ód_Æüs
,

270 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

271 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

272 
‰ód
Ë
__wur
;

273 
size_t
 
	`__REDIRECT
 (
__‰ód_chk_w¨n
,

274 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

275 
size_t
 
__size
, size_à
__n
,

276 
FILE
 *
__ª°ri˘
 
__°ªam
),

277 
__‰ód_chk
)

278 
__wur
 
	`__w¨«âr
 ("fread called with bigger size *ÇmembÅhanÜength "

281 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


282 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

283 
FILE
 *
__ª°ri˘
 
__°ªam
)

285 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

287 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

288 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

289 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

290  
	`__‰ód_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

292 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

293  
	`__‰ód_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

295  
	`__‰ód_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

296 
	}
}

298 #ifde‡
__USE_GNU


299 *
	$__fgës_u∆ocked_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
,

300 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

301 *
	`__REDIRECT
 (
__fgës_u∆ocked_Æüs
,

302 (*
__ª°ri˘
 
__s
, 
__n
,

303 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës_u∆ocked
Ë
__wur
;

304 *
	`__REDIRECT
 (
__fgës_u∆ocked_chk_w¨n
,

305 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

306 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_u∆ocked_chk
)

307 
__wur
 
	`__w¨«âr
 ("fgets_unlocked called with bigger sizeÅhanÜength "

310 
__f‹tify_fun˘i⁄
 
__wur
 *

311 
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

313 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

315 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

316  
	`__fgës_u∆ocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

318 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

319  
	`__fgës_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

321  
	`__fgës_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

322 
	}
}

325 #ifde‡
__USE_MISC


326 #unde‡
‰ód_u∆ocked


327 
size_t
 
	$__‰ód_u∆ocked_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

328 
size_t
 
__size
, size_à
__n
,

329 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

330 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_Æüs
,

331 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

332 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

333 
‰ód_u∆ocked
Ë
__wur
;

334 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_chk_w¨n
,

335 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

336 
size_t
 
__size
, size_à
__n
,

337 
FILE
 *
__ª°ri˘
 
__°ªam
),

338 
__‰ód_u∆ocked_chk
)

339 
__wur
 
	`__w¨«âr
 ("fread_unlocked called with bigger size *ÇmembÅhan "

342 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


343 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

344 
FILE
 *
__ª°ri˘
 
__°ªam
)

346 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

348 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

349 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

350 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

351  
	`__‰ód_u∆ocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

352 
__°ªam
);

354 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

355  
	`__‰ód_u∆ocked_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

356 
__°ªam
);

359 #ifde‡
__USE_EXTERN_INLINES


360 i‡(
	`__buûtö_c⁄°™t_p
 (
__size
)

361 && 
	`__buûtö_c⁄°™t_p
 (
__n
)

362 && (
__size
 | 
__n
Ë< (((
size_t
) 1) << (8 *  (size_t) / 2))

363 && 
__size
 * 
__n
 <= 8)

365 
size_t
 
__˙t
 = 
__size
 * 
__n
;

366 *
__˝å
 = (*Ë
__±r
;

367 i‡(
__˙t
 == 0)

370 ; 
__˙t
 > 0; --__cnt)

372 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
);

373 i‡(
__c
 =
EOF
)

375 *
__˝å
++ = 
__c
;

377  (
__˝å
 - (*Ë
__±r
Ë/ 
__size
;

380  
	`__‰ód_u∆ocked_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

381 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #i‡!
deföed
 
_STDIO_H
 && !deföed 
__√ed_FOPEN_MAX
 && !deföed 
__√ed_IOV_MAX


22 #ifde‡
_STDIO_H


23 
	#L_tm≤am
 20

	)

24 
	#TMP_MAX
 238328

	)

25 
	#FILENAME_MAX
 4096

	)

27 #ifde‡
__USE_POSIX


28 
	#L_˘îmid
 9

	)

29 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


30 
	#L_cu£rid
 9

	)

35 #i‡
deföed
 
__√ed_FOPEN_MAX
 || deföed 
_STDIO_H


36 #unde‡
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

40 #i‡
deföed
 
__√ed_IOV_MAX
 && !deföed 
IOV_MAX


41 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-bsearch.h

19 
__exã∫_ölöe
 *

20 
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

21 
__com∑r_‚_t
 
__com∑r
)

23 
size_t
 
__l
, 
__u
, 
__idx
;

24 c⁄° *
__p
;

25 
__com∑ris⁄
;

27 
__l
 = 0;

28 
__u
 = 
__nmemb
;

29 
__l
 < 
__u
)

31 
__idx
 = (
__l
 + 
__u
) / 2;

32 
__p
 = (*Ë(((c⁄° *Ë
__ba£
Ë+ (
__idx
 * 
__size
));

33 
__com∑ris⁄
 = (*
__com∑r
Ë(
__key
, 
__p
);

34 i‡(
__com∑ris⁄
 < 0)

35 
__u
 = 
__idx
;

36 i‡(
__com∑ris⁄
 > 0)

37 
__l
 = 
__idx
 + 1;

39  (*Ë
__p
;

42  
NULL
;

43 
	}
}

	@/usr/include/bits/stdlib-float.h

19 #i‚de‡
_STDLIB_H


23 #ifde‡
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__exã∫_ölöe
 

26 
__NTH
 (
	$©of
 (c⁄° *
__≈å
))

28  
	`°πod
 (
__≈å
, (**Ë
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #i‚de‡
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
°πﬁd
, 
°πod
)

26 
__END_NAMESPACE_C99


29 #ifde‡
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
°πﬁd_l
, 
°πod_l
)

33 #ifde‡
__USE_MISC


34 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

35 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

38 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #i‚de‡
_STDLIB_H


23 *
	$__ªÆ∑th_chk
 (c⁄° *
__ª°ri˘
 
__«me
,

24 *
__ª°ri˘
 
__ªsﬁved
,

25 
size_t
 
__ªsﬁvedÀn
Ë
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_Æüs
,

27 (c⁄° *
__ª°ri˘
 
__«me
,

28 *
__ª°ri˘
 
__ªsﬁved
), 
ªÆ∑th
Ë
__wur
;

29 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_chk_w¨n
,

30 (c⁄° *
__ª°ri˘
 
__«me
,

31 *
__ª°ri˘
 
__ªsﬁved
,

32 
size_t
 
__ªsﬁvedÀn
), 
__ªÆ∑th_chk
Ë
__wur


33 
	`__w¨«âr
 ("secondárgument ofÑealpath must beÉither NULL orát "

36 
__f‹tify_fun˘i⁄
 
__wur
 *

37 
	`__NTH
 (
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
, *__ª°ri˘ 
__ªsﬁved
))

39 i‡(
	`__bos
 (
__ªsﬁved
Ë!(
size_t
) -1)

41 #i‡
deföed
 
_LIBC_LIMITS_H_
 && deföed 
PATH_MAX


42 i‡(
	`__bos
 (
__ªsﬁved
Ë< 
PATH_MAX
)

43  
	`__ªÆ∑th_chk_w¨n
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

45  
	`__ªÆ∑th_chk
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

48  
	`__ªÆ∑th_Æüs
 (
__«me
, 
__ªsﬁved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

53 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_Æüs
, (
__fd
, *
__buf
,

55 
size_t
 
__buÊí
), 
±¢ame_r
)

56 
	`__n⁄nuŒ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¨n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

59 
size_t
 
__ƒól
), 
__±¢ame_r_chk
)

60 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ptsname_r called with buflen biggerÅhan "

63 
__f‹tify_fun˘i⁄
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

66 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

68 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

70 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

74 
	}
}

77 
	$__w˘omb_chk
 (*
__s
, 
wch¨_t
 
__wch¨
, 
size_t
 
__buÊí
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__w˘omb_Æüs
, (*
__s
, 
wch¨_t
 
__wch¨
),

80 
w˘omb
Ë
__wur
;

82 
__f‹tify_fun˘i⁄
 
__wur
 

83 
	`__NTH
 (
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__STDLIB_MB_LEN_MAX


92 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__w˘omb_chk
 (
__s
, 
__wch¨
, 
	`__bos
 (__s));

94  
	`__w˘omb_Æüs
 (
__s
, 
__wch¨
);

95 
	}
}

98 
size_t
 
	$__mb°owcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

99 c⁄° *
__ª°ri˘
 
__§c
,

100 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_Æüs
,

102 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

103 c⁄° *
__ª°ri˘
 
__§c
,

104 
size_t
 
__Àn
), 
mb°owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_chk_w¨n
,

106 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

107 c⁄° *
__ª°ri˘
 
__§c
,

108 
size_t
 
__Àn
, size_à
__d°Àn
), 
__mb°owcs_chk
)

109 
	`__w¨«âr
 ("mbstowcs called with dst buffer smallerÅhanÜen "

112 
__f‹tify_fun˘i⁄
 
size_t


113 
	`__NTH
 (
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° *__ª°ri˘ 
__§c
,

114 
size_t
 
__Àn
))

116 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

118 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

119  
	`__mb°owcs_chk
 (
__d°
, 
__§c
, 
__Àn
,

120 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

122 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

123  
	`__mb°owcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
,

124 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

126  
	`__mb°owcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

127 
	}
}

130 
size_t
 
	$__wc°ombs_chk
 (*
__ª°ri˘
 
__d°
,

131 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

132 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_Æüs
,

134 (*
__ª°ri˘
 
__d°
,

135 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

136 
size_t
 
__Àn
), 
wc°ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_chk_w¨n
,

138 (*
__ª°ri˘
 
__d°
,

139 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

140 
size_t
 
__Àn
, size_à
__d°Àn
), 
__wc°ombs_chk
)

141 
	`__w¨«âr
 ("wcstombs called with dst buffer smallerÅhanÜen");

143 
__f‹tify_fun˘i⁄
 
size_t


144 
	`__NTH
 (
	$wc°ombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 *__ª°ri˘ 
__§c
,

145 
size_t
 
__Àn
))

147 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

149 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

150  
	`__wc°ombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

151 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

152  
	`__wc°ombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

154  
	`__wc°ombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

155 
	}
}

	@/usr/include/bits/string.h

19 #i‚de‡
_STRING_H


24 
	#_STRING_ARCH_u«lig√d
 1

	)

28 #i‡!
deföed
 
__x86_64__
 && (deföed 
__i486__
 || deföed 
__≥¡ium__
 \

29 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

30 || 
deföed
 
	g__noc⁄a__
 || deföed 
	g__©om__
 \

31 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__c‹ei7__
 \

32 || 
deföed
 
	g__k6__
 || deföed 
	g__geode__
 \

33 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

34 || 
deföed
 
	g__amdÁm10__
)

38 #i‡!
deföed
 
__NO_STRING_INLINES
 && deföed 
__USE_STRING_INLINES
 \

39 && 
deföed
 
	g__GNUC__
 && __GNUC__ >= 2

41 #i‚de‡
__STRING_INLINE


42 #i‚de‡
__exã∫_ölöe


43 
	#__STRING_INLINE
 
ölöe


	)

45 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

50 
	#__STRING_SMALL_GET16
(
§c
, 
idx
) \

51 ((((c⁄° *Ë(
§c
))[
idx
 + 1] << 8) \

52 | ((c⁄° *Ë(
§c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
§c
, 
idx
) \

54 (((((c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

55 | ((c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

56 | ((c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

57 | ((c⁄° *Ë(
§c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_mem˝y
 1

	)

62 
	#mem˝y
(
de°
, 
§c
, 
n
) \

63 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

64 ? 
	`__mem˝y_c
 ((
de°
), (
§c
), (
n
)) \

65 : 
	`__mem˝y_g
 ((
de°
), (
§c
), (
n
))))

	)

66 
	#__mem˝y_c
(
de°
, 
§c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de°
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__mem˝y_by4
 (
de°
, 
§c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__mem˝y_by2
 (
de°
, 
§c
, 
n
) \

73 : 
	`__mem˝y_g
 (
de°
, 
§c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__mem˝y_by4
 (*
__de°
, c⁄° *
__§c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__mem˝y_by4
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de°
;

83 
__asm__
 
__vﬁ©ûe__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 4)

94  
__de°
;

95 
	}
}

97 
__STRING_INLINE
 *
__mem˝y_by2
 (*
__de°
, c⁄° *
__§c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__mem˝y_by2
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de°
;

105 
__asm__
 
__vﬁ©ûe__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 2)

121  
__de°
;

122 
	}
}

124 
__STRING_INLINE
 *
__mem˝y_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__mem˝y_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de°
;

131 
__asm__
 
__vﬁ©ûe__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__§c
),

145 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
)

147  
__de°
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #i‚de‡
_FORCE_INLINES


154 
	#memmove
(
de°
, 
§c
, 
n
Ë
	`__memmove_g
 (de°, src,Ç)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, c⁄° *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de°
;

164 i‡(
__de°
 < 
__§c
)

165 
__asm__
 
__vﬁ©ûe__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

170 : "0" (
__n
), "1" (
__§c
), "2" (
__tmp
),

171 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

173 
__asm__
 
__vﬁ©ûe__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

179 : "0" (
__n
), "1" (__¿- 1 + (c⁄° *Ë
__§c
),

180 "2" (
__n
 - 1 + (*Ë
__tmp
),

181 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

182  
__de°
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #i‚de‡
_FORCE_INLINES


189 #i‚de‡
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__ªs
;

196 
__asm__
 
__vﬁ©ûe__


204 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

209  
__ªs
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__buûtö_c⁄°™t_p
 (
c
) \

223 ? (
	`__buûtö_c⁄°™t_p
 (
n
) \

224 ? 
	`__mem£t_c˙
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__buûtö_c⁄°™t_p
 (
n
) \

227 ? 
	`__mem£t_g˙
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
Ë({ *
__s
 = (s); \

231 *((*Ë
__s
Ë(Ë(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((Ë((Ë(
c
))) * 0x01010101; \

247 i‡((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vﬁ©ûe__
 ("" : "Ù" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (Ë
__c
; \

264 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (Ë
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (Ë
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (Ë
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_c˙
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_c˙_by4
 (
s
, ((Ë((Ë(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_c˙_by2
 (
s
, \

317 ((Ë((Ë(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_c˙_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_c˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifde‡
__i686__


330 
__asm__
 
__vﬁ©ûe__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vﬁ©ûe__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_c˙_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_c˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifde‡
__i686__


361 
__asm__
 
__vﬁ©ûe__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vﬁ©ûe__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_g˙
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_g˙_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_g˙_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vﬁ©ûe__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vﬁ©ûe__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #i‚de‡
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifde‡
__i686__


449 
__d1
;

451 *
__ªs
;

452 i‡(
__n
 == 0)

453  
NULL
;

454 #ifde‡
__i686__


455 
__asm__
 
__vﬁ©ûe__


459 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vﬁ©ûe__


470 : "=D" (
__ªs
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

475  
__ªs
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #i‚de‡
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifde‡
__i686__


488 
__d1
;

490 *
__ªs
;

491 i‡(
__n
 == 0)

492  
NULL
;

493 #ifde‡
__i686__


494 
__asm__
 
__vﬁ©ûe__


500 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vﬁ©ûe__


512 : "=D" (
__ªs
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

517  
__ªs
;

518 
	}
}

519 #ifde‡
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
Ë
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_øwmemchr
 1

	)

526 
__STRING_INLINE
 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

528 #i‚de‡
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__øwmemchr
 (c⁄° *
__s
, 
__c
)

532 
__d0
;

533 *
__ªs
;

534 
__asm__
 
__vﬁ©ûe__


537 : "=D" (
__ªs
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

541  
__ªs
 - 1;

542 
	}
}

543 #ifde‡
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

547  
	`__øwmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_°æí
 1

	)

555 
	#°æí
(
°r
) \

556 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
°r
) \

557 ? 
	`__buûtö_°æí
 (
°r
) \

558 : 
	`__°æí_g
 (
°r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__°æí_g
 (c⁄° *
__°r
);

561 
__STRING_INLINE
 
size_t


562 
	$__°æí_g
 (c⁄° *
__°r
)

564 
__dummy
;

565 c⁄° *
__tmp
 = 
__°r
;

566 
__asm__
 
__vﬁ©ûe__


572 : "Ù" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__°r
),

574 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__°r
)

576  
__tmp
 - 
__°r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_°r˝y
 1

	)

582 
	#°r˝y
(
de°
, 
§c
) \

583 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

584 ? ( ((
§c
)[0]Ë=1 && 
	`°æí
 (src) + 1 <= 8 \

585 ? 
	`__°r˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

586 : (*Ë
	`mem˝y
 ((*Ë(
de°
), \

587 (c⁄° *Ë(
§c
), \

588 
	`°æí
 (
§c
) + 1)) \

589 : 
	`__°r˝y_g
 ((
de°
), (
§c
))))

	)

591 
	#__°r˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

592 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*Ë
__de°
; \

599 
§˛í
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

609 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

617 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

622 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

627 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

629 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

634 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

638 (*Ë
__de°
; }))

	)

640 
__STRING_INLINE
 *
__°r˝y_g
 (*
__de°
, c⁄° *
__§c
);

642 
__STRING_INLINE
 *

643 
	$__°r˝y_g
 (*
__de°
, c⁄° *
__§c
)

645 *
__tmp
 = 
__de°
;

646 
__dummy
;

647 
__asm__
 
__vﬁ©ûe__


656 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

658 : "0" (
__§c
), "1" (
__tmp
),

659 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

661  
__de°
;

662 
	}
}

665 #ifde‡
__USE_GNU


666 
	#_HAVE_STRING_ARCH_°p˝y
 1

	)

668 
	#__°p˝y
(
de°
, 
§c
) \

669 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

670 ? (
	`°æí
 (
§c
) + 1 <= 8 \

671 ? 
	`__°p˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

672 : 
	`__°p˝y_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1)) \

673 : 
	`__°p˝y_g
 ((
de°
), (
§c
))))

	)

674 
	#__°p˝y_c
(
de°
, 
§c
, 
§˛í
) \

675 ((
§˛í
) % 4 == 0 \

676 ? 
	`__memp˝y_by4
 (
de°
, 
§c
, 
§˛í
) - 1 \

677 : ((
§˛í
) % 2 == 0 \

678 ? 
	`__memp˝y_by2
 (
de°
, 
§c
, 
§˛í
) - 1 \

679 : 
	`__memp˝y_byn
 (
de°
, 
§c
, 
§˛í
Ë- 1))

	)

682 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 ((de°), (§c))

	)

684 
	#__°p˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

685 (
	`__exãnsi⁄__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*Ë(
de°
); \

691 
§˛í
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

698 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

702 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

707 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

711 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

716 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

718 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

722 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

724 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

729 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

731 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

734 (*Ë
__u
; }))

	)

736 
__STRING_INLINE
 *
__memp˝y_by4
 (*
__de°
, c⁄° *
__§c
,

737 
size_t
 
__§˛í
);

739 
__STRING_INLINE
 *

740 
	$__memp˝y_by4
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

742 *
__tmp
 = 
__de°
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vﬁ©ûe__


752 : "=&r" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__memp˝y_by2
 (*
__de°
, c⁄° *
__§c
,

759 
size_t
 
__§˛í
);

761 
__STRING_INLINE
 *

762 
	$__memp˝y_by2
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

764 *
__tmp
 = 
__de°
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vﬁ©ûe__


779 : "=&q" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
),

780 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

781 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

782 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__memp˝y_byn
 (*
__de°
, c⁄° *
__§c
,

788 
size_t
 
__§˛í
);

790 
__STRING_INLINE
 *

791 
	$__memp˝y_byn
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__§˛í
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de°
;

795 
__asm__
 
__vﬁ©ûe__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

808 : "0" (
__tmp
), "1" (
__§˛í
), "2" (
__§c
),

809 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__°p˝y_g
 (*
__de°
, c⁄° *
__§c
);

816 
__STRING_INLINE
 *

817 
	$__°p˝y_g
 (*
__de°
, c⁄° *
__§c
)

819 *
__tmp
 = 
__de°
;

820 
__dummy
;

821 
__asm__
 
__vﬁ©ûe__


830 : "=&r" (
__§c
), "Ù" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

832 : "0" (
__§c
), "1" (
__tmp
),

833 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_°∫˝y
 1

	)

842 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

843 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

844 ? ((
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

845 ? (*Ë
	`mem˝y
 ((*Ë(
de°
), \

846 (c⁄° *Ë(
§c
), 
n
) \

847 : 
	`__°∫˝y_cg
 ((
de°
), (
§c
), 
	`°æí
 (§cË+ 1, 
n
))) \

848 : 
	`__°∫˝y_gg
 ((
de°
), (
§c
), 
n
)))

	)

849 
	#__°∫˝y_cg
(
de°
, 
§c
, 
§˛í
, 
n
) \

850 (((
§˛í
) % 4 == 0) \

851 ? 
	`__°∫˝y_by4
 (
de°
, 
§c
, 
§˛í
, 
n
) \

852 : (((
§˛í
) % 2 == 0) \

853 ? 
	`__°∫˝y_by2
 (
de°
, 
§c
, 
§˛í
, 
n
) \

854 : 
	`__°∫˝y_byn
 (
de°
, 
§c
, 
§˛í
, 
n
)))

	)

856 
__STRING_INLINE
 *
__°∫˝y_by4
 (*
__de°
, c⁄° 
__§c
[],

857 
size_t
 
__§˛í
, size_à
__n
);

859 
__STRING_INLINE
 *

860 
	$__°∫˝y_by4
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

862 *
__tmp
 = 
__de°
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vﬁ©ûe__


872 : "=&r" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

873 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

874 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4),

875 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

877 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

878  
__de°
;

879 
	}
}

881 
__STRING_INLINE
 *
__°∫˝y_by2
 (*
__de°
, c⁄° 
__§c
[],

882 
size_t
 
__§˛í
, size_à
__n
);

884 
__STRING_INLINE
 *

885 
	$__°∫˝y_by2
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

887 *
__tmp
 = 
__de°
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vﬁ©ûe__


902 : "=&q" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

903 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

904 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

905 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

907 (Ë
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__§˛í
);

908  
__de°
;

909 
	}
}

911 
__STRING_INLINE
 *
__°∫˝y_byn
 (*
__de°
, c⁄° 
__§c
[],

912 
size_t
 
__§˛í
, size_à
__n
);

914 
__STRING_INLINE
 *

915 
	$__°∫˝y_byn
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de°
;

919 
__asm__
 
__vﬁ©ûe__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

932 : "1" (
__§˛í
), "0" (
__tmp
),"2" (
__§c
),

933 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

935 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

936  
__de°
;

937 
	}
}

939 
__STRING_INLINE
 *
__°∫˝y_gg
 (*
__de°
, c⁄° *
__§c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__°∫˝y_gg
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de°
;

946 
__dummy
;

947 i‡(
__n
 > 0)

948 
__asm__
 
__vﬁ©ûe__


964 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__§c
), "1" (
__tmp
), "3" (
__n
)

968  
__de°
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_°rˇt
 1

	)

974 
	#°rˇt
(
de°
, 
§c
) \

975 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

976 ? 
	`__°rˇt_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

977 : 
	`__°rˇt_g
 ((
de°
), (
§c
))))

	)

979 
__STRING_INLINE
 *
__°rˇt_c
 (*
__de°
, c⁄° 
__§c
[],

980 
size_t
 
__§˛í
);

982 
__STRING_INLINE
 *

983 
	$__°rˇt_c
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__§˛í
)

985 #ifde‡
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vﬁ©ûe__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

992 : "0" (
__de°
), "1" (0xffffffff), "a" (0),

993 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de°
 - 1;

998 
__asm__
 
__vﬁ©ûe__


1003 : "Ù" (
__tmp
),

1004 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

1005 : "0" (
__tmp
),

1006 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

1009 (Ë
	`mem˝y
 (
__tmp
, 
__§c
, 
__§˛í
);

1010  
__de°
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__°rˇt_g
 (*
__de°
, c⁄° *
__§c
);

1015 
__STRING_INLINE
 *

1016 
	$__°rˇt_g
 (*
__de°
, c⁄° *
__§c
)

1018 *
__tmp
 = 
__de°
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vﬁ©ûe__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
),

1033 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

1034 : "1" (
__tmp
), "2" (
__§c
),

1035 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

1037  
__de°
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_°∫ˇt
 1

	)

1043 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

1044 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

1045 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

1046 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

1047 ? 
	`°rˇt
 (
__de°
, (
§c
)) \

1048 : (*(*)
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

1049 (c⁄° *Ë(
§c
), \

1050 (
n
)Ë0, 
__de°
)) \

1051 : 
	`__°∫ˇt_g
 (
__de°
, (
§c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__°∫ˇt_g
 (*
__de°
, c⁄° 
__§c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__°∫ˇt_g
 (*
__de°
, c⁄° 
__§c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de°
;

1060 
__dummy
;

1061 #ifde‡
__i686__


1062 
__asm__
 
__vﬁ©ûe__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__§c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__§c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vﬁ©ûe__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
)

1102  
__de°
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_°rcmp
 1

	)

1108 
	#°rcmp
(
s1
, 
s2
) \

1109 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

1110 && ( ((
s1
)[0]Ë!1 || 
	`°æí
 (s1) >= 4) \

1111 && ( ((
s2
)[0]Ë!1 || 
	`°æí
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((c⁄° *Ë(
s1
), (c⁄° *Ë(
s2
), \

1113 (
	`°æí
 (
s1
Ë< såÀ¿(
s2
) \

1114 ? 
	`°æí
 (
s1
Ë: såÀ¿(
s2
)) + 1) \

1115 : (
	`__buûtö_c⁄°™t_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (
s1
) < 4 \

1117 ? (
	`__buûtö_c⁄°™t_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__°rcmp_cc
 ((c⁄° *Ë(
s1
), \

1119 (c⁄° *Ë(
s2
), \

1120 
	`°æí
 (
s1
)) \

1121 : 
	`__°rcmp_cg
 ((c⁄° *Ë(
s1
), \

1122 (c⁄° *Ë(
s2
), \

1123 
	`°æí
 (
s1
))) \

1124 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (s2) < 4 \

1126 ? (
	`__buûtö_c⁄°™t_p
 (
s1
) \

1127 ? 
	`__°rcmp_cc
 ((c⁄° *Ë(
s1
), \

1128 (c⁄° *Ë(
s2
), \

1129 
	`°æí
 (
s2
)) \

1130 : 
	`__°rcmp_gc
 ((c⁄° *Ë(
s1
), \

1131 (c⁄° *Ë(
s2
), \

1132 
	`°æí
 (
s2
))) \

1133 : 
	`__°rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = (
s1
)[0] - (
s2
)[0]; \

1137 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

1139 
__ªsu…
 = (
s1
)[1] - (
s2
)[1]; \

1140 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

1142 
__ªsu…
 = (
s1
)[2] - (
s2
)[2]; \

1143 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

1144 
__ªsu…
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__ªsu…
; }))

	)

1149 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__exãnsi⁄__
 ({ c⁄° *
__s2
 = (
s2
); \

1151 
__ªsu…
 = (
s1
)[0] - 
__s2
[0]; \

1152 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

1154 
__ªsu…
 = (
s1
)[1] - 
__s2
[1]; \

1155 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

1157 
__ªsu…
 = (
s1
)[2] - 
__s2
[2]; \

1158 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

1159 
__ªsu…
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__ªsu…
; }))

	)

1164 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__exãnsi⁄__
 ({ c⁄° *
__s1
 = (
s1
); \

1166 
__ªsu…
 = 
__s1
[0] - (
s2
)[0]; \

1167 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

1169 
__ªsu…
 = 
__s1
[1] - (
s2
)[1]; \

1170 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

1172 
__ªsu…
 = 
__s1
[2] - (
s2
)[2]; \

1173 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

1174 
__ªsu…
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__ªsu…
; }))

	)

1179 
__STRING_INLINE
 
__°rcmp_gg
 (c⁄° *
__s1
, c⁄° *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__°rcmp_gg
 (c⁄° *
__s1
, c⁄° *
__s2
)

1184 
__ªs
;

1185 
__asm__
 
__vﬁ©ûe__


1201 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__ªs
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_°∫cmp
 1

	)

1212 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`°æí
 (s1Ë< ((
size_t
Ë(
n
)) \

1214 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`°æí
 (s2Ë< ((
size_t
Ë(
n
))\

1216 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__°∫cmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__°∫cmp_g
 (c⁄° *
__s1
, c⁄° *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__°∫cmp_g
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

1225 
__ªs
;

1226 
__asm__
 
__vﬁ©ûe__


1245 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

1250  
__ªs
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_°rchr
 1

	)

1256 
	#_USE_STRING_ARCH_°rchr
 1

	)

1257 
	#°rchr
(
s
, 
c
) \

1258 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*Ë
	`__øwmemchr
 ((
s
), (
c
)) \

1261 : 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__°rchr_c
 (c⁄° *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__°rchr_c
 (c⁄° *
__s
, 
__c
)

1269 
__d0
;

1270 *
__ªs
;

1271 
__asm__
 
__vﬁ©ûe__


1281 : "Ù" (
__ªs
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1285  
__ªs
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__°rchr_g
 (c⁄° *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__°rchr_g
 (c⁄° *
__s
, 
__c
)

1293 
__d0
;

1294 *
__ªs
;

1295 
__asm__
 
__vﬁ©ûe__


1306 : "Ù" (
__ªs
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1310  
__ªs
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_°rch∫ul
 1

	)

1316 
	#__°rch∫ul
(
s
, 
c
) \

1317 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*Ë
	`__øwmemchr
 ((
s
), 
c
) \

1320 : 
	`__°rch∫ul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__°rch∫ul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__°rch∫ul_c
 (c⁄° *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__°rch∫ul_c
 (c⁄° *
__s
, 
__c
)

1328 
__d0
;

1329 *
__ªs
;

1330 
__asm__
 
__vﬁ©ûe__


1340 : "Ù" (
__ªs
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1344  
__ªs
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__°rch∫ul_g
 (c⁄° *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__°rch∫ul_g
 (c⁄° *
__s
, 
__c
)

1352 
__d0
;

1353 *
__ªs
;

1354 
__asm__
 
__vﬁ©ûe__


1365 : "Ù" (
__ªs
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1369  
__ªs
;

1370 
	}
}

1371 #ifde‡
__USE_GNU


1372 
	#°rch∫ul
(
s
, 
c
Ë
	`__°rch∫ul
 ((s), (c))

	)

1376 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_ödex
 1

	)

1379 
	#ödex
(
s
, 
c
) \

1380 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1381 ? 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_°ºchr
 1

	)

1388 
	#°ºchr
(
s
, 
c
) \

1389 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1390 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1393 #ifde‡
__i686__


1394 
__STRING_INLINE
 *
__°ºchr_c
 (c⁄° *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__°ºchr_c
 (c⁄° *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__ªs
;

1401 
__asm__
 
__vﬁ©ûe__


1409 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1413  
__ªs
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__°ºchr_g
 (c⁄° *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__°ºchr_g
 (c⁄° *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__ªs
;

1423 
__asm__
 
__vﬁ©ûe__


1432 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1436  
__ªs
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__°ºchr_c
 (c⁄° *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__°ºchr_c
 (c⁄° *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__ªs
;

1446 
__asm__
 
__vﬁ©ûe__


1456 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1460  
__ªs
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__°ºchr_g
 (c⁄° *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__°ºchr_g
 (c⁄° *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__ªs
;

1470 
__asm__
 
__vﬁ©ûe__


1481 : "Ù" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1485  
__ªs
;

1486 
	}
}

1490 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_rödex
 1

	)

1493 
	#rödex
(
s
, 
c
) \

1494 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1495 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_°rc•n
 1

	)

1503 
	#°rc•n
(
s
, 
ªje˘
) \

1504 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
) &&  ((reject)[0]) == 1 \

1505 ? ((
ªje˘
)[0] == '\0' \

1506 ? 
	`°æí
 (
s
) \

1507 : ((
ªje˘
)[1] == '\0' \

1508 ? 
	`__°rc•n_c1
 ((
s
), (((
ªje˘
)[0] << 8) & 0xff00)) \

1509 : 
	`__°rc•n_cg
 ((
s
), (
ªje˘
), 
	`°æí
 (reject)))) \

1510 : 
	`__°rc•n_g
 ((
s
), (
ªje˘
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
);

1514 #i‚de‡
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
)

1518 
__d0
;

1519 *
__ªs
;

1520 
__asm__
 
__vﬁ©ûe__


1529 : "Ù" (
__ªs
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__ªje˘
),

1531 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__ªs
 - 1Ë- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__°rc•n_cg
 (c⁄° *
__s
, c⁄° 
__ªje˘
[],

1538 
size_t
 
__ªje˘_Àn
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__°rc•n_cg
 (c⁄° *
__s
, c⁄° 
__ªje˘
[], 
size_t
 
__ªje˘_Àn
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 c⁄° *
__ªs
;

1545 
__asm__
 
__vﬁ©ûe__


1556 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__ªje˘
), "g" (
__ªje˘_Àn
)

1559  (
__ªs
 - 1Ë- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
);

1563 #ifde‡
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 c⁄° *
__ªs
;

1570 
__asm__
 
__vﬁ©ûe__


1587 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__ªje˘
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__ªs
 - 1Ë- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__°rc•n_g
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 c⁄° *
__ªs
;

1598 
__asm__
 
__vﬁ©ûe__


1612 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ªje˘
), "b" (__reject)

1616  (
__ªs
 - 1Ë- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_°r•n
 1

	)

1624 
	#°r•n
(
s
, 
ac˚±
) \

1625 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1626 ? ((
ac˚±
)[0] == '\0' \

1627 ? ((Ë(
s
), 0) \

1628 : ((
ac˚±
)[1] == '\0' \

1629 ? 
	`__°r•n_c1
 ((
s
), (((
ac˚±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__°r•n_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1631 : 
	`__°r•n_g
 ((
s
), (
ac˚±
))))

	)

1633 #i‚de‡
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
)

1639 
__d0
;

1640 *
__ªs
;

1642 
__asm__
 
__vﬁ©ûe__


1648 : "Ù" (
__ªs
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__ac˚±
),

1650 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__ªs
 - 1Ë- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__°r•n_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[],

1657 
size_t
 
__ac˚±_Àn
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__°r•n_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 c⁄° *
__ªs
;

1664 
__asm__
 
__vﬁ©ûe__


1675 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__ac˚±
), "g" (
__ac˚±_Àn
),

1679 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__ac˚±_Àn
]; } *)
__ac˚±
)

1682  (
__ªs
 - 1Ë- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
);

1686 #ifde‡
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 c⁄° *
__ªs
;

1693 
__asm__
 
__vﬁ©ûe__


1709 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__ªs
 - 1Ë- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__°r•n_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 c⁄° *
__ªs
;

1720 
__asm__
 
__vﬁ©ûe__


1734 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ac˚±
), "b" (__accept)

1737  (
__ªs
 - 1Ë- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_°Ωbrk
 1

	)

1744 
	#°Ωbrk
(
s
, 
ac˚±
) \

1745 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1746 ? ((
ac˚±
)[0] == '\0' \

1747 ? ((Ë(
s
), (*) 0) \

1748 : ((
ac˚±
)[1] == '\0' \

1749 ? 
	`°rchr
 ((
s
), (
ac˚±
)[0]) \

1750 : 
	`__°Ωbrk_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1751 : 
	`__°Ωbrk_g
 ((
s
), (
ac˚±
))))

	)

1753 
__STRING_INLINE
 *
__°Ωbrk_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[],

1754 
size_t
 
__ac˚±_Àn
);

1756 
__STRING_INLINE
 *

1757 
	$__°Ωbrk_cg
 (c⁄° *
__s
, c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__ªs
;

1761 
__asm__
 
__vﬁ©ûe__


1776 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__ac˚±
), "g" (
__ac˚±_Àn
)

1779  
__ªs
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
);

1783 #ifde‡
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__ªs
;

1790 
__asm__
 
__vﬁ©ûe__


1811 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__ªs
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__°Ωbrk_g
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__ªs
;

1822 
__asm__
 
__vﬁ©ûe__


1841 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__ac˚±
)

1844  
__ªs
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_°r°r
 1

	)

1851 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1852 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
) &&  ((needle)[0]) == 1 \

1853 ? ((
√edÀ
)[0] == '\0' \

1854 ? (
hay°ack
) \

1855 : ((
√edÀ
)[1] == '\0' \

1856 ? 
	`°rchr
 ((
hay°ack
), (
√edÀ
)[0]) \

1857 : 
	`__°r°r_cg
 ((
hay°ack
), (
√edÀ
), \

1858 
	`°æí
 (
√edÀ
)))) \

1859 : 
	`__°r°r_g
 ((
hay°ack
), (
√edÀ
))))

	)

1863 
__STRING_INLINE
 *
__°r°r_cg
 (c⁄° *
__hay°ack
,

1864 c⁄° 
__√edÀ
[],

1865 
size_t
 
__√edÀ_Àn
);

1867 
__STRING_INLINE
 *

1868 
	$__°r°r_cg
 (c⁄° *
__hay°ack
, c⁄° 
__√edÀ
[],

1869 
size_t
 
__√edÀ_Àn
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__ªs
;

1873 
__asm__
 
__vﬁ©ûe__


1886 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__√edÀ_Àn
), "1" (
__hay°ack
), "d" (
__√edÀ
)

1889  
__ªs
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__°r°r_g
 (c⁄° *
__hay°ack
,

1893 c⁄° *
__√edÀ
);

1894 #ifde‡
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__°r°r_g
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__ªs
;

1901 
__asm__
 
__vﬁ©ûe__


1920 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1922 "d" (
__√edÀ
)

1924  
__ªs
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__°r°r_g
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__ªs
;

1932 
__asm__
 
__vﬁ©ûe__


1949 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1951 "b" (
__√edÀ
)

1953  
__ªs
;

1954 
	}
}

1960 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1961 #ifde‡
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
w‹d
Ë(
	`__buûtö_c⁄°™t_p
 (word) \

1964 ? 
	`__buûtö_ffs
 (
w‹d
) \

1965 : ({ 
__˙t
, 
__tmp
; \

1966 
__asm__
 
__vﬁ©ûe__
 \

1969 : "=&r" (
__˙t
), "Ù" (
__tmp
) \

1970 : "rm" (
w‹d
), "1" (-1)); \

1971 
__˙t
 + 1; }))

	)

1973 #i‚de‡
ff¶


1974 
	#ff¶
(
w‹d
Ë
	`ffs
(w‹d)

	)

1979 #i‚de‡
_FORCE_INLINES


1980 #unde‡
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #i‚de‡
_STRING_H


24 #i‚de‡
__NO_STRING_INLINES


41 #i‚de‡
__STRING_INLINE


42 #ifde‡
__˝lu•lus


43 
	#__STRING_INLINE
 
ölöe


	)

45 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

49 #i‡
_STRING_ARCH_u«lig√d


51 
	~<ídün.h
>

52 
	~<bôs/ty≥s.h
>

54 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

56 (((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1] << 8 \

57 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

59 (((((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

60 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

61 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

62 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

65 (((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
] << 8 \

66 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

68 (((((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
] << 8 \

69 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

70 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

71 | ((c⁄° *Ë(c⁄° *Ë(
§c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 °ru˘ { 
__¨r
[
N
]; } \

78 
	t__©åibuã__
 ((
	t__∑cked__
)Ë
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #unde‡
__STRING2_COPY_TYPE


92 
	#__°rög2_1b±r_p
(
__x
) \

93 ((
size_t
)(c⁄° *)((
__x
Ë+ 1Ë- (size_t)(c⁄° *)(__xË=1)

	)

96 #i‡!
deföed
 
_HAVE_STRING_ARCH_mem£t


97 #i‡!
__GNUC_PREREQ
 (3, 0)

98 #i‡
_STRING_ARCH_u«lig√d


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
Ë({ *
__s
 = (s); \

109 *((
__uöt8_t
 *Ë
__s
Ë(__uöt8_tË
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__uöt8_t
 
__c
 = (__uöt8_tË(
c
); \

121 (Ë(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

134 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (Ë
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (Ë
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #i‡
__GNUC_PREREQ
 (2, 91)

194 
	#__bzîo
(
s
, 
n
Ë
	`__buûtö_mem£t
 (s, '\0',Ç)

	)

202 #ifde‡
__USE_GNU


203 #i‡!
deföed
 
_HAVE_STRING_ARCH_memp˝y
 || deföed 
_FORCE_INLINES


204 #i‚de‡
_HAVE_STRING_ARCH_memp˝y


205 #i‡
__GNUC_PREREQ
 (3, 4)

206 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_memp˝y
 (de°, src,Ç)

	)

207 #ñi‡
__GNUC_PREREQ
 (3, 0)

208 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

209 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

210 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

211 ? 
	`__buûtö_mem˝y
 (
de°
, 
§c
, 
n
) + (n) \

212 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

214 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

215 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

216 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

217 ? 
	`__memp˝y_smÆl
 (
de°
, 
	`__memp˝y_¨gs
 (
§c
), 
n
) \

218 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

222 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y
 (de°, src,Ç)

	)

225 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


226 #i‡
_STRING_ARCH_u«lig√d


227 #i‚de‡
_FORCE_INLINES


228 
	#__memp˝y_¨gs
(
§c
) \

229 ((c⁄° *Ë(
§c
))[0], ((const *) (src))[2], \

230 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[6], \

231 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

232 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

233 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

234 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

236 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , , , ,

237 
__uöt16_t
, __uöt16_t, 
__uöt32_t
,

238 
__uöt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__memp˝y_smÆl
 (*
__de°1
,

241 
__§c0_1
, 
__§c2_1
, 
__§c4_1
, 
__§c6_1
,

242 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

243 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

244 
size_t
 
__§˛í
)

247 
__uöt32_t
 
__ui
;

248 
__uöt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de°1
;

252 (Ë
__§˛í
)

255 
__u
->
__c
 = 
__§c0_1
;

256 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__§c0_2
;

260 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__§c0_2
;

264 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__§c2_1
;

266 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__§c0_4
;

270 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__§c0_4
;

274 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__§c4_1
;

276 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__§c0_4
;

280 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__§c4_2
;

282 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__§c0_4
;

286 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__§c4_2
;

288 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__§c6_1
;

290 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__§c0_4
;

294 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__§c4_4
;

296 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

299  (*Ë
__u
;

300 
	}
}

302 #i‚de‡
_FORCE_INLINES


303 
	#__memp˝y_¨gs
(
§c
) \

304 ((c⁄° *Ë(
§c
))[0], \

305 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1] } }), \

307 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

309 ((c⁄° *Ë(
§c
))[2] } }), \

310 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

312 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3] } }), \

313 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

315 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

316 ((c⁄° *Ë(
§c
))[4] } }), \

317 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

319 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

320 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5] } }), \

321 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

323 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

324 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

325 ((c⁄° *Ë(
§c
))[6] } }), \

326 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

328 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

329 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

330 ((c⁄° *Ë(
§c
))[6], ((c⁄° *Ë(§c))[7] } })

	)

332 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__memp˝y_smÆl
 (*
__de°
, 
__§c1
,

341 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

342 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

343 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

344 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sˇ2
;

349 
__STRING2_COPY_ARR3
 
__sˇ3
;

350 
__STRING2_COPY_ARR4
 
__sˇ4
;

351 
__STRING2_COPY_ARR5
 
__sˇ5
;

352 
__STRING2_COPY_ARR6
 
__sˇ6
;

353 
__STRING2_COPY_ARR7
 
__sˇ7
;

354 
__STRING2_COPY_ARR8
 
__sˇ8
;

355 } *
__u
 = 
__de°
;

356 (Ë
__§˛í
)

359 
__u
->
__c
 = 
__§c1
;

362 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

365 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

368 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

371 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

374 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

377 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

380 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

383  
	`__exãnsi⁄__
 ((*Ë
__u
 + 
__§˛í
);

384 
	}
}

392 #i‚de‡
_HAVE_STRING_ARCH_°rchr


393 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

394 #i‡
__GNUC_PREREQ
 (3, 2)

395 
	#°rchr
(
s
, 
c
) \

396 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
Ë&& !__buûtö_c⁄°™t_∞(
s
) \

397 && (
c
) == '\0' \

398 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

399 : 
	`__buûtö_°rchr
 (
s
, 
c
)))

	)

401 
	#°rchr
(
s
, 
c
) \

402 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

403 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

404 : 
	`°rchr
 (
s
, 
c
)))

	)

410 #i‡(!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
deföed
 
	g_FORCE_INLINES


412 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#°r˝y
(
de°
, 
§c
) \

414 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

415 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

416 ? 
	`__°r˝y_smÆl
 (
de°
, 
	`__°r˝y_¨gs
 (
§c
), \

417 
	`°æí
 (
§c
) + 1) \

418 : (*Ë
	`mem˝y
 (
de°
, 
§c
, 
	`°æí
 (src) + 1)) \

419 : 
	`°r˝y
 (
de°
, 
§c
)))

	)

422 #i‡
_STRING_ARCH_u«lig√d


423 #i‚de‡
_FORCE_INLINES


424 
	#__°r˝y_¨gs
(
§c
) \

425 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

426 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

427 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

428 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

430 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

431 
__uöt32_t
, __uöt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__°r˝y_smÆl
 (*
__de°
,

434 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

435 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

436 
size_t
 
__§˛í
)

439 
__uöt32_t
 
__ui
;

440 
__uöt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*Ë
__de°
;

443 (Ë
__§˛í
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__§c0_2
;

452 
__u
->
__usi
 = 
__§c0_2
;

453 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__§c0_4
;

460 
__u
->
__ui
 = 
__§c0_4
;

461 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__§c0_4
;

466 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__§c4_2
;

470 
__u
->
__ui
 = 
__§c0_4
;

471 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__§c4_2
;

473 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__§c0_4
;

478 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__§c4_4
;

482  
__de°
;

483 
	}
}

485 #i‚de‡
_FORCE_INLINES


486 
	#__°r˝y_¨gs
(
§c
) \

487 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((c⁄° *Ë(
§c
))[0], '\0' } }), \

489 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

492 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

494 ((c⁄° *Ë(
§c
))[2], '\0' } }), \

495 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

497 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

499 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

501 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

502 ((c⁄° *Ë(
§c
))[4], '\0' } }), \

503 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

505 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

506 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

508 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

510 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

511 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

512 ((c⁄° *Ë(
§c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__°r˝y_smÆl
 (*
__de°
,

523 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

524 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

525 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

526 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sˇ2
;

531 
__STRING2_COPY_ARR3
 
__sˇ3
;

532 
__STRING2_COPY_ARR4
 
__sˇ4
;

533 
__STRING2_COPY_ARR5
 
__sˇ5
;

534 
__STRING2_COPY_ARR6
 
__sˇ6
;

535 
__STRING2_COPY_ARR7
 
__sˇ7
;

536 
__STRING2_COPY_ARR8
 
__sˇ8
;

537 } *
__u
 = (*Ë
__de°
;

538 (Ë
__§˛í
)

541 
__u
->
__c
 = '\0';

544 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

547 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

550 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

553 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

556 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

559 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

562 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

565  
__de°
;

566 
	}
}

572 #ifde‡
__USE_GNU


573 #i‡!
deföed
 
_HAVE_STRING_ARCH_°p˝y
 || deföed 
_FORCE_INLINES


574 #i‚de‡
_HAVE_STRING_ARCH_°p˝y


575 #i‡
__GNUC_PREREQ
 (3, 4)

576 
	#__°p˝y
(
de°
, 
§c
Ë
	`__buûtö_°p˝y
 (de°, src)

	)

577 #ñi‡
__GNUC_PREREQ
 (3, 0)

578 
	#__°p˝y
(
de°
, 
§c
) \

579 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

580 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

581 ? 
	`__buûtö_°r˝y
 (
de°
, 
§c
Ë+ 
	`°æí
 (src) \

582 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

584 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

586 
	#__°p˝y
(
de°
, 
§c
) \

587 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

588 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

589 ? 
	`__°p˝y_smÆl
 (
de°
, 
	`__°p˝y_¨gs
 (
§c
), \

590 
	`°æí
 (
§c
) + 1) \

591 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

593 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

597 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 (de°, src)

	)

600 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


601 #i‡
_STRING_ARCH_u«lig√d


602 #i‚de‡
_FORCE_INLINES


603 
	#__°p˝y_¨gs
(
§c
) \

604 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

605 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

606 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

607 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

609 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

610 
__uöt32_t
, __uöt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__°p˝y_smÆl
 (*
__de°
,

613 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

614 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

615 
size_t
 
__§˛í
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*Ë
__de°
;

623 (Ë
__§˛í
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__§c0_2
;

630 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__§c0_2
;

634 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__§c0_4
;

639 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__§c0_4
;

643 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__§c0_4
;

648 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__§c4_2
;

650 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__§c0_4
;

654 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__§c4_2
;

656 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__§c0_4
;

661 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__§c4_4
;

663 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #i‚de‡
_FORCE_INLINES


670 
	#__°p˝y_¨gs
(
§c
) \

671 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((c⁄° *Ë(
§c
))[0], '\0' } }), \

673 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

676 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

678 ((c⁄° *Ë(
§c
))[2], '\0' } }), \

679 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

681 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

683 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

685 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

686 ((c⁄° *Ë(
§c
))[4], '\0' } }), \

687 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

689 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

690 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

692 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((c⁄° *Ë(
§c
))[0], ((const *) (src))[1], \

694 ((c⁄° *Ë(
§c
))[2], ((const *) (src))[3], \

695 ((c⁄° *Ë(
§c
))[4], ((const *) (src))[5], \

696 ((c⁄° *Ë(
§c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__°p˝y_smÆl
 (*
__de°
,

707 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

708 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

709 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

710 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sˇ2
;

715 
__STRING2_COPY_ARR3
 
__sˇ3
;

716 
__STRING2_COPY_ARR4
 
__sˇ4
;

717 
__STRING2_COPY_ARR5
 
__sˇ5
;

718 
__STRING2_COPY_ARR6
 
__sˇ6
;

719 
__STRING2_COPY_ARR7
 
__sˇ7
;

720 
__STRING2_COPY_ARR8
 
__sˇ8
;

721 } *
__u
 = (*Ë
__de°
;

722 (Ë
__§˛í
)

725 
__u
->
__c
 = '\0';

728 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

731 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

734 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

737 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

740 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

743 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

746 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

749  
__de°
 + 
__§˛í
 - 1;

750 
	}
}

758 #i‚de‡
_HAVE_STRING_ARCH_°∫˝y


759 #i‡
__GNUC_PREREQ
 (3, 2)

760 
	#°∫˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫˝y
 (de°, src,Ç)

	)

762 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

763 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

764 ? (
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

765 ? (*Ë
	`mem˝y
 (
de°
, 
§c
, 
n
) \

766 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)) \

767 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)))

	)

773 #i‚de‡
_HAVE_STRING_ARCH_°∫ˇt


774 #ifde‡
_USE_STRING_ARCH_°rchr


775 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

776 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

777 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

778 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

779 ? 
	`°rˇt
 (
__de°
, 
§c
) \

780 : (*((*Ë
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

781 
§c
, 
n
)Ë'\0', 
__de°
)) \

782 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
); }))

	)

783 #ñi‡
__GNUC_PREREQ
 (3, 2)

784 
	#°∫ˇt
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫ˇt
 (de°, src,Ç)

	)

786 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

787 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

788 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

789 ? 
	`°rˇt
 (
de°
, 
§c
) \

790 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)) \

791 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)))

	)

797 #i‚de‡
_HAVE_STRING_ARCH_°rcmp


798 #i‡
__GNUC_PREREQ
 (3, 2)

799 
	#°rcmp
(
s1
, 
s2
) \

800 
__exãnsi⁄__
 \

801 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

802 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

803 && (
__s1_Àn
 = 
	`__buûtö_°æí
 (
s1
), 
__s2_Àn
 = __buûtö_°æí (
s2
), \

804 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

805 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

806 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

807 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

808 && (
__s1_Àn
 = 
	`__buûtö_°æí
 (
s1
), __s1_len < 4) \

809 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

810 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

811 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

812 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

813 && (
__s2_Àn
 = 
	`__buûtö_°æí
 (
s2
), __s2_len < 4) \

814 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

815 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

816 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

817 : 
	`__buûtö_°rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#°rcmp
(
s1
, 
s2
) \

820 
__exãnsi⁄__
 \

821 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

822 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

823 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

824 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

825 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

826 ? 
	`memcmp
 ((c⁄° *Ë(
s1
), (c⁄° *Ë(
s2
), \

827 (
__s1_Àn
 < 
__s2_Àn
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

829 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

830 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

831 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s1_Àn
) \

832 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

833 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

834 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

835 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

836 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s2_Àn
) \

837 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

838 : 
	`°rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = \

843 (((c⁄° *Ë(c⁄° *Ë(
s1
))[0] \

844 - ((c⁄° *Ë(c⁄° *)(
s2
))[0]); \

845 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

847 
__ªsu…
 = (((const *) \

848 (c⁄° *Ë(
s1
))[1] \

850 (c⁄° *Ë(
s2
))[1]); \

851 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

853 
__ªsu…
 = \

855 (c⁄° *Ë(
s1
))[2] \

857 (c⁄° *Ë(
s2
))[2]); \

858 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

859 
__ªsu…
 = \

861 (c⁄° *Ë(
s1
))[3] \

863 (c⁄° *Ë(
s2
))[3]); \

866 
__ªsu…
; }))

	)

868 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__exãnsi⁄__
 ({ c⁄° *
__s2
 = \

870 (c⁄° *Ë(c⁄° *Ë(
s2
); \

871 
__ªsu…
 = \

872 (((c⁄° *Ë(c⁄° *Ë(
s1
))[0] \

873 - 
__s2
[0]); \

874 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

876 
__ªsu…
 = (((const *) \

877 (c⁄° *Ë(
s1
))[1] - 
__s2
[1]); \

878 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

880 
__ªsu…
 = (((const *) \

881 (c⁄° *Ë(
s1
))[2] - 
__s2
[2]); \

882 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

883 
__ªsu…
 = (((const *) \

884 (c⁄° *Ë(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__ªsu…
; }))

	)

890 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
Ë(- 
	`__°rcmp_cg
 (s2, s1,Ü2))

	)

895 #i‚de‡
_HAVE_STRING_ARCH_°∫cmp


896 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

897 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

898 && ((
	`__buûtö_c⁄°™t_p
 (
s1
) \

899 && 
	`°æí
 (
s1
Ë< ((
size_t
Ë(
n
))) \

900 || (
	`__buûtö_c⁄°™t_p
 (
s2
) \

901 && 
	`°æí
 (
s2
Ë< ((
size_t
Ë(
n
)))) \

902 ? 
	`°rcmp
 (
s1
, 
s2
Ë: 
	`°∫cmp
 (s1, s2, 
n
)))

	)

908 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rc•n
 || deföed 
_FORCE_INLINES


909 #i‚de‡
_HAVE_STRING_ARCH_°rc•n


910 #i‡
__GNUC_PREREQ
 (3, 2)

911 
	#°rc•n
(
s
, 
ªje˘
) \

912 
__exãnsi⁄__
 \

913 ({ 
__r0
, 
__r1
, 
__r2
; \

914 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

915 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

916 ? 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
) \

917 : ((
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], __r0 == '\0') \

918 ? 
	`°æí
 (
s
) \

919 : ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], __r1 == '\0') \

920 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

921 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

922 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

923 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

924 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

925 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)))))) \

926 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)); })

	)

928 
	#°rc•n
(
s
, 
ªje˘
) \

929 
__exãnsi⁄__
 \

930 ({ 
__r0
, 
__r1
, 
__r2
; \

931 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

932 ? ((
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], __r0 == '\0') \

933 ? 
	`°æí
 (
s
) \

934 : ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], __r1 == '\0') \

935 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

936 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

937 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

938 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

939 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

940 : 
	`°rc•n
 (
s
, 
ªje˘
))))) \

941 : 
	`°rc•n
 (
s
, 
ªje˘
)); })

	)

945 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
);

946 
__STRING_INLINE
 
size_t


947 
	$__°rc•n_c1
 (c⁄° *
__s
, 
__ªje˘
)

949 
size_t
 
__ªsu…
 = 0;

950 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘
)

951 ++
__ªsu…
;

952  
__ªsu…
;

953 
	}
}

955 
__STRING_INLINE
 
size_t
 
__°rc•n_c2
 (c⁄° *
__s
, 
__ªje˘1
,

956 
__ªje˘2
);

957 
__STRING_INLINE
 
size_t


958 
	$__°rc•n_c2
 (c⁄° *
__s
, 
__ªje˘1
, 
__ªje˘2
)

960 
size_t
 
__ªsu…
 = 0;

961 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


962 && 
__s
[
__ªsu…
] !
__ªje˘2
)

963 ++
__ªsu…
;

964  
__ªsu…
;

965 
	}
}

967 
__STRING_INLINE
 
size_t
 
__°rc•n_c3
 (c⁄° *
__s
, 
__ªje˘1
,

968 
__ªje˘2
, 
__ªje˘3
);

969 
__STRING_INLINE
 
size_t


970 
	$__°rc•n_c3
 (c⁄° *
__s
, 
__ªje˘1
, 
__ªje˘2
,

971 
__ªje˘3
)

973 
size_t
 
__ªsu…
 = 0;

974 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


975 && 
__s
[
__ªsu…
] !
__ªje˘2
 && __s[__ªsu…] !
__ªje˘3
)

976 ++
__ªsu…
;

977  
__ªsu…
;

978 
	}
}

984 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r•n
 || deföed 
_FORCE_INLINES


985 #i‚de‡
_HAVE_STRING_ARCH_°r•n


986 #i‡
__GNUC_PREREQ
 (3, 2)

987 
	#°r•n
(
s
, 
ac˚±
) \

988 
__exãnsi⁄__
 \

989 ({ 
__a0
, 
__a1
, 
__a2
; \

990 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

991 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

992 ? 
	`__buûtö_°r•n
 (
s
, 
ac˚±
) \

993 : ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

994 ? ((Ë(
s
), (
size_t
) 0) \

995 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

996 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

997 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

998 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

999 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1000 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1001 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)))))) \

1002 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)); })

	)

1004 
	#°r•n
(
s
, 
ac˚±
) \

1005 
__exãnsi⁄__
 \

1006 ({ 
__a0
, 
__a1
, 
__a2
; \

1007 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1008 ? ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1009 ? ((Ë(
s
), (
size_t
) 0) \

1010 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1011 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1012 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1013 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1014 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1015 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1016 : 
	`°r•n
 (
s
, 
ac˚±
))))) \

1017 : 
	`°r•n
 (
s
, 
ac˚±
)); })

	)

1021 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
);

1022 
__STRING_INLINE
 
size_t


1023 
	$__°r•n_c1
 (c⁄° *
__s
, 
__ac˚±
)

1025 
size_t
 
__ªsu…
 = 0;

1027 
__s
[
__ªsu…
] =
__ac˚±
)

1028 ++
__ªsu…
;

1029  
__ªsu…
;

1030 
	}
}

1032 
__STRING_INLINE
 
size_t
 
__°r•n_c2
 (c⁄° *
__s
, 
__ac˚±1
,

1033 
__ac˚±2
);

1034 
__STRING_INLINE
 
size_t


1035 
	$__°r•n_c2
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1037 
size_t
 
__ªsu…
 = 0;

1039 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2
)

1040 ++
__ªsu…
;

1041  
__ªsu…
;

1042 
	}
}

1044 
__STRING_INLINE
 
size_t
 
__°r•n_c3
 (c⁄° *
__s
, 
__ac˚±1
,

1045 
__ac˚±2
, 
__ac˚±3
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__°r•n_c3
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1049 
size_t
 
__ªsu…
 = 0;

1051 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2


1052 || 
__s
[
__ªsu…
] =
__ac˚±3
)

1053 ++
__ªsu…
;

1054  
__ªsu…
;

1055 
	}
}

1060 #i‡!
deföed
 
_HAVE_STRING_ARCH_°Ωbrk
 || deföed 
_FORCE_INLINES


1061 #i‚de‡
_HAVE_STRING_ARCH_°Ωbrk


1062 #i‡
__GNUC_PREREQ
 (3, 2)

1063 
	#°Ωbrk
(
s
, 
ac˚±
) \

1064 
__exãnsi⁄__
 \

1065 ({ 
__a0
, 
__a1
, 
__a2
; \

1066 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1067 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1068 ? 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
) \

1069 : ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1070 ? ((Ë(
s
), (*Ë
NULL
) \

1071 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1072 ? 
	`__buûtö_°rchr
 (
s
, 
__a0
) \

1073 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1074 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1075 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1076 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1077 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)))))) \

1078 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1080 
	#°Ωbrk
(
s
, 
ac˚±
) \

1081 
__exãnsi⁄__
 \

1082 ({ 
__a0
, 
__a1
, 
__a2
; \

1083 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1084 ? ((
__a0
 = ((c⁄° *Ë(
ac˚±
))[0], __a0 == '\0') \

1085 ? ((Ë(
s
), (*Ë
NULL
) \

1086 : ((
__a1
 = ((c⁄° *Ë(
ac˚±
))[1], __a1 == '\0') \

1087 ? 
	`°rchr
 (
s
, 
__a0
) \

1088 : ((
__a2
 = ((c⁄° *Ë(
ac˚±
))[2], __a2 == '\0') \

1089 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1090 : (((c⁄° *Ë(
ac˚±
))[3] == '\0' \

1091 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1092 : 
	`°Ωbrk
 (
s
, 
ac˚±
))))) \

1093 : 
	`°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1097 
__STRING_INLINE
 *
__°Ωbrk_c2
 (c⁄° *
__s
, 
__ac˚±1
,

1098 
__ac˚±2
);

1099 
__STRING_INLINE
 *

1100 
	$__°Ωbrk_c2
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1103 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2
)

1104 ++
__s
;

1105  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1106 
	}
}

1108 
__STRING_INLINE
 *
__°Ωbrk_c3
 (c⁄° *
__s
, 
__ac˚±1
,

1109 
__ac˚±2
, 
__ac˚±3
);

1110 
__STRING_INLINE
 *

1111 
	$__°Ωbrk_c3
 (c⁄° *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1114 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2


1115 && *
__s
 !
__ac˚±3
)

1116 ++
__s
;

1117  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1118 
	}
}

1124 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r°r
 && !
__GNUC_PREREQ
 (2, 97)

1125 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1126 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
Ë&& 
	`__°rög2_1b±r_p
 (needle) \

1127 ? (((c⁄° *Ë(
√edÀ
))[0] == '\0' \

1128 ? (*Ë(
size_t
Ë(
hay°ack
) \

1129 : (((c⁄° *Ë(
√edÀ
))[1] == '\0' \

1130 ? 
	`°rchr
 (
hay°ack
, \

1131 ((c⁄° *Ë(
√edÀ
))[0]) \

1132 : 
	`°r°r
 (
hay°ack
, 
√edÀ
))) \

1133 : 
	`°r°r
 (
hay°ack
, 
√edÀ
)))

	)

1137 #i‡!
deföed
 
_HAVE_STRING_ARCH_°πok_r
 || deföed 
_FORCE_INLINES


1138 #i‚de‡
_HAVE_STRING_ARCH_°πok_r


1139 
	#__°πok_r
(
s
, 
£p
, 
√xç
) \

1140 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
£p
Ë&& 
	`__°rög2_1b±r_p
 (sep) \

1141 && ((c⁄° *Ë(
£p
))[0] != '\0' \

1142 && ((c⁄° *Ë(
£p
))[1] == '\0' \

1143 ? 
	`__°πok_r_1c
 (
s
, ((c⁄° *Ë(
£p
))[0], 
√xç
) \

1144 : 
	`__°πok_r
 (
s
, 
£p
, 
√xç
)))

	)

1147 
__STRING_INLINE
 *
__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
);

1148 
__STRING_INLINE
 *

1149 
	$__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
)

1151 *
__ªsu…
;

1152 i‡(
__s
 =
NULL
)

1153 
__s
 = *
__√xç
;

1154 *
__s
 =
__£p
)

1155 ++
__s
;

1156 
__ªsu…
 = 
NULL
;

1157 i‡(*
__s
 != '\0')

1159 
__ªsu…
 = 
__s
++;

1160 *
__s
 != '\0')

1161 i‡(*
__s
++ =
__£p
)

1163 
__s
[-1] = '\0';

1167 *
__√xç
 = 
__s
;

1168  
__ªsu…
;

1169 
	}
}

1170 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


1171 
	#°πok_r
(
s
, 
£p
, 
√xç
Ë
	`__°πok_r
 (s, sï,Çexç)

	)

1176 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r£p
 || deföed 
_FORCE_INLINES


1177 #i‚de‡
_HAVE_STRING_ARCH_°r£p


1179 *
__°r£p_g
 (**
__°rögp
, c⁄° *
__dñim
);

1180 
	#__°r£p
(
s
, 
ªje˘
) \

1181 
__exãnsi⁄__
 \

1182 ({ 
__r0
, 
__r1
, 
__r2
; \

1183 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

1184 && (
__r0
 = ((c⁄° *Ë(
ªje˘
))[0], \

1185 ((c⁄° *Ë(
ªje˘
))[0] != '\0') \

1186 ? ((
__r1
 = ((c⁄° *Ë(
ªje˘
))[1], \

1187 ((c⁄° *Ë(
ªje˘
))[1] == '\0') \

1188 ? 
	`__°r£p_1c
 (
s
, 
__r0
) \

1189 : ((
__r2
 = ((c⁄° *Ë(
ªje˘
))[2], __r2 == '\0') \

1190 ? 
	`__°r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1191 : (((c⁄° *Ë(
ªje˘
))[3] == '\0' \

1192 ? 
	`__°r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1193 : 
	`__°r£p_g
 (
s
, 
ªje˘
)))) \

1194 : 
	`__°r£p_g
 (
s
, 
ªje˘
)); })

	)

1197 
__STRING_INLINE
 *
__°r£p_1c
 (**
__s
, 
__ªje˘
);

1198 
__STRING_INLINE
 *

1199 
	$__°r£p_1c
 (**
__s
, 
__ªje˘
)

1201 *
__ªtvÆ
 = *
__s
;

1202 i‡(
__ªtvÆ
 !
NULL
 && (*
__s
 = 
	`°rchr
 (__ªtvÆ, 
__ªje˘
)) != NULL)

1203 *(*
__s
)++ = '\0';

1204  
__ªtvÆ
;

1205 
	}
}

1207 
__STRING_INLINE
 *
__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
);

1208 
__STRING_INLINE
 *

1209 
	$__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
)

1211 *
__ªtvÆ
 = *
__s
;

1212 i‡(
__ªtvÆ
 !
NULL
)

1214 *
__˝
 = 
__ªtvÆ
;

1217 i‡(*
__˝
 == '\0')

1219 
__˝
 = 
NULL
;

1222 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
)

1224 *
__˝
++ = '\0';

1227 ++
__˝
;

1229 *
__s
 = 
__˝
;

1231  
__ªtvÆ
;

1232 
	}
}

1234 
__STRING_INLINE
 *
__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
,

1235 
__ªje˘3
);

1236 
__STRING_INLINE
 *

1237 
	$__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
, 
__ªje˘3
)

1239 *
__ªtvÆ
 = *
__s
;

1240 i‡(
__ªtvÆ
 !
NULL
)

1242 *
__˝
 = 
__ªtvÆ
;

1245 i‡(*
__˝
 == '\0')

1247 
__˝
 = 
NULL
;

1250 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
 || *__˝ =
__ªje˘3
)

1252 *
__˝
++ = '\0';

1255 ++
__˝
;

1257 *
__s
 = 
__˝
;

1259  
__ªtvÆ
;

1260 
	}
}

1261 #ifde‡
__USE_BSD


1262 
	#°r£p
(
s
, 
ªje˘
Ë
	`__°r£p
 (s,Ñeje˘)

	)

1269 #ifde‡
__USE_MISC


1271 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rdup
 || !deföed 
_HAVE_STRING_ARCH_°∫dup


1272 
	#__√ed_mÆloc_™d_ˇŒoc


	)

1273 
	~<°dlib.h
>

1276 #i‚de‡
_HAVE_STRING_ARCH_°rdup


1278 *
	$__°rdup
 (c⁄° *
__°rög
Ë
__THROW
 
__©åibuã_mÆloc__
;

1279 
	#__°rdup
(
s
) \

1280 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1281 ? (((c⁄° *Ë(
s
))[0] == '\0' \

1282 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1283 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1284 *
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1285 i‡(
__ªtvÆ
 !
NULL
) \

1286 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, 
__Àn
); \

1287 
__ªtvÆ
; 
	}
})) \

1288 : 
	`__°rdup
 (
s
)))

	)

1290 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1291 
	#°rdup
(
s
Ë
	`__°rdup
 (s)

	)

1295 #i‚de‡
_HAVE_STRING_ARCH_°∫dup


1297 *
	$__°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

1298 
__THROW
 
__©åibuã_mÆloc__
;

1299 
	#__°∫dup
(
s
, 
n
) \

1300 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1301 ? (((c⁄° *Ë(
s
))[0] == '\0' \

1302 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1303 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1304 
size_t
 
__n
 = (
n
); \

1305 *
__ªtvÆ
; \

1306 i‡(
__n
 < 
__Àn
) \

1307 
__Àn
 = 
__n
 + 1; \

1308 
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1309 i‡(
__ªtvÆ
 !
NULL
) \

1311 
__ªtvÆ
[
__Àn
 - 1] = '\0'; \

1312 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, \

1313 
__Àn
 - 1); \

1315 
__ªtvÆ
; 
	}
})) \

1316 : 
	`__°∫dup
 (
s
, 
n
)))

	)

1318 #ifde‡
__USE_GNU


1319 
	#°∫dup
(
s
, 
n
Ë
	`__°∫dup
 (s,Ç)

	)

1325 #i‚de‡
_FORCE_INLINES


1326 #unde‡
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #i‚de‡
_STRING_H


22 
__w¨nde˛
 (
__w¨n_mem£t_zîo_Àn
,

25 #i‚de‡
__˝lu•lus


29 #unde‡
mem˝y


30 #unde‡
memmove


31 #unde‡
mem£t


32 #unde‡
°rˇt


33 #unde‡
°r˝y


34 #unde‡
°∫ˇt


35 #unde‡
°∫˝y


36 #ifde‡
__USE_GNU


37 #unde‡
memp˝y


38 #unde‡
°p˝y


40 #ifde‡
__USE_BSD


41 #unde‡
bc›y


42 #unde‡
bzîo


47 
__f‹tify_fun˘i⁄
 *

48 
__NTH
 (
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

49 
size_t
 
__Àn
))

51  
	`__buûtö___mem˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__f‹tify_fun˘i⁄
 *

55 
__NTH
 (
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__Àn
))

57  
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifde‡
__USE_GNU


61 
__f‹tify_fun˘i⁄
 *

62 
__NTH
 (
	$memp˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

63 
size_t
 
__Àn
))

65  
	`__buûtö___memp˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__f‹tify_fun˘i⁄
 *

76 
__NTH
 (
	$mem£t
 (*
__de°
, 
__ch
, 
size_t
 
__Àn
))

78 i‡(
	`__buûtö_c⁄°™t_p
 (
__Àn
) && __len == 0

79 && (!
	`__buûtö_c⁄°™t_p
 (
__ch
) || __ch != 0))

81 
	`__w¨n_mem£t_zîo_Àn
 ();

82  
__de°
;

84  
	`__buûtö___mem£t_chk
 (
__de°
, 
__ch
, 
__Àn
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifde‡
__USE_BSD


88 
__f‹tify_fun˘i⁄
 

89 
__NTH
 (
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__Àn
))

91 (Ë
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__f‹tify_fun˘i⁄
 

95 
__NTH
 (
	$bzîo
 (*
__de°
, 
size_t
 
__Àn
))

97 (Ë
	`__buûtö___mem£t_chk
 (
__de°
, '\0', 
__Àn
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__f‹tify_fun˘i⁄
 *

102 
__NTH
 (
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

104  
	`__buûtö___°r˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifde‡
__USE_GNU


108 
__f‹tify_fun˘i⁄
 *

109 
__NTH
 (
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

111  
	`__buûtö___°p˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__f‹tify_fun˘i⁄
 *

117 
__NTH
 (
	$°∫˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

118 
size_t
 
__Àn
))

120  
	`__buûtö___°∫˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__°≤˝y_chk
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

125 
size_t
 
__de°Àn
Ë
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__°≤˝y_Æüs
, (*
__de°
, c⁄° *
__§c
,

127 
size_t
 
__n
), 
°≤˝y
);

129 
__f‹tify_fun˘i⁄
 *

130 
	`__NTH
 (
	$°≤˝y
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
))

132 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

133 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿<
	`__bos
 (
__de°
)))

134  
	`__°≤˝y_chk
 (
__de°
, 
__§c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__°≤˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

136 
	}
}

139 
__f‹tify_fun˘i⁄
 *

140 
__NTH
 (
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
))

142  
	`__buûtö___°rˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__f‹tify_fun˘i⁄
 *

147 
__NTH
 (
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

148 
size_t
 
__Àn
))

150  
	`__buûtö___°∫ˇt_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/sys_errlist.h

19 #i‚de‡
_STDIO_H


25 #ifde‡ 
__USE_BSD


26 
sys_√º
;

27 c⁄° *c⁄° 
sys_îæi°
[];

29 #ifde‡ 
__USE_GNU


30 
_sys_√º
;

31 c⁄° *c⁄° 
_sys_îæi°
[];

	@/usr/include/bits/termios.h

19 #i‚de‡
_TERMIOS_H


23 
	tcc_t
;

24 
	t•ìd_t
;

25 
	ttcÊag_t
;

27 
	#NCCS
 32

	)

28 
	sãrmios


30 
tcÊag_t
 
	mc_iÊag
;

31 
tcÊag_t
 
	mc_oÊag
;

32 
tcÊag_t
 
	mc_cÊag
;

33 
tcÊag_t
 
	mc_lÊag
;

34 
cc_t
 
	mc_löe
;

35 
cc_t
 
	mc_cc
[
NCCS
];

36 
•ìd_t
 
	mc_i•ìd
;

37 
•ìd_t
 
	mc_o•ìd
;

38 
	#_HAVE_STRUCT_TERMIOS_C_ISPEED
 1

	)

39 
	#_HAVE_STRUCT_TERMIOS_C_OSPEED
 1

	)

43 
	#VINTR
 0

	)

44 
	#VQUIT
 1

	)

45 
	#VERASE
 2

	)

46 
	#VKILL
 3

	)

47 
	#VEOF
 4

	)

48 
	#VTIME
 5

	)

49 
	#VMIN
 6

	)

50 
	#VSWTC
 7

	)

51 
	#VSTART
 8

	)

52 
	#VSTOP
 9

	)

53 
	#VSUSP
 10

	)

54 
	#VEOL
 11

	)

55 
	#VREPRINT
 12

	)

56 
	#VDISCARD
 13

	)

57 
	#VWERASE
 14

	)

58 
	#VLNEXT
 15

	)

59 
	#VEOL2
 16

	)

62 
	#IGNBRK
 0000001

	)

63 
	#BRKINT
 0000002

	)

64 
	#IGNPAR
 0000004

	)

65 
	#PARMRK
 0000010

	)

66 
	#INPCK
 0000020

	)

67 
	#ISTRIP
 0000040

	)

68 
	#INLCR
 0000100

	)

69 
	#IGNCR
 0000200

	)

70 
	#ICRNL
 0000400

	)

71 
	#IUCLC
 0001000

	)

72 
	#IXON
 0002000

	)

73 
	#IXANY
 0004000

	)

74 
	#IXOFF
 0010000

	)

75 
	#IMAXBEL
 0020000

	)

76 
	#IUTF8
 0040000

	)

79 
	#OPOST
 0000001

	)

80 
	#OLCUC
 0000002

	)

81 
	#ONLCR
 0000004

	)

82 
	#OCRNL
 0000010

	)

83 
	#ONOCR
 0000020

	)

84 
	#ONLRET
 0000040

	)

85 
	#OFILL
 0000100

	)

86 
	#OFDEL
 0000200

	)

87 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


88 
	#NLDLY
 0000400

	)

89 
	#NL0
 0000000

	)

90 
	#NL1
 0000400

	)

91 
	#CRDLY
 0003000

	)

92 
	#CR0
 0000000

	)

93 
	#CR1
 0001000

	)

94 
	#CR2
 0002000

	)

95 
	#CR3
 0003000

	)

96 
	#TABDLY
 0014000

	)

97 
	#TAB0
 0000000

	)

98 
	#TAB1
 0004000

	)

99 
	#TAB2
 0010000

	)

100 
	#TAB3
 0014000

	)

101 
	#BSDLY
 0020000

	)

102 
	#BS0
 0000000

	)

103 
	#BS1
 0020000

	)

104 
	#FFDLY
 0100000

	)

105 
	#FF0
 0000000

	)

106 
	#FF1
 0100000

	)

109 
	#VTDLY
 0040000

	)

110 
	#VT0
 0000000

	)

111 
	#VT1
 0040000

	)

113 #ifde‡
__USE_MISC


114 
	#XTABS
 0014000

	)

118 #ifde‡
__USE_MISC


119 
	#CBAUD
 0010017

	)

121 
	#B0
 0000000

	)

122 
	#B50
 0000001

	)

123 
	#B75
 0000002

	)

124 
	#B110
 0000003

	)

125 
	#B134
 0000004

	)

126 
	#B150
 0000005

	)

127 
	#B200
 0000006

	)

128 
	#B300
 0000007

	)

129 
	#B600
 0000010

	)

130 
	#B1200
 0000011

	)

131 
	#B1800
 0000012

	)

132 
	#B2400
 0000013

	)

133 
	#B4800
 0000014

	)

134 
	#B9600
 0000015

	)

135 
	#B19200
 0000016

	)

136 
	#B38400
 0000017

	)

137 #ifde‡
__USE_MISC


138 
	#EXTA
 
B19200


	)

139 
	#EXTB
 
B38400


	)

141 
	#CSIZE
 0000060

	)

142 
	#CS5
 0000000

	)

143 
	#CS6
 0000020

	)

144 
	#CS7
 0000040

	)

145 
	#CS8
 0000060

	)

146 
	#CSTOPB
 0000100

	)

147 
	#CREAD
 0000200

	)

148 
	#PARENB
 0000400

	)

149 
	#PARODD
 0001000

	)

150 
	#HUPCL
 0002000

	)

151 
	#CLOCAL
 0004000

	)

152 #ifde‡
__USE_MISC


153 
	#CBAUDEX
 0010000

	)

155 
	#B57600
 0010001

	)

156 
	#B115200
 0010002

	)

157 
	#B230400
 0010003

	)

158 
	#B460800
 0010004

	)

159 
	#B500000
 0010005

	)

160 
	#B576000
 0010006

	)

161 
	#B921600
 0010007

	)

162 
	#B1000000
 0010010

	)

163 
	#B1152000
 0010011

	)

164 
	#B1500000
 0010012

	)

165 
	#B2000000
 0010013

	)

166 
	#B2500000
 0010014

	)

167 
	#B3000000
 0010015

	)

168 
	#B3500000
 0010016

	)

169 
	#B4000000
 0010017

	)

170 
	#__MAX_BAUD
 
B4000000


	)

171 #ifde‡
__USE_MISC


172 
	#CIBAUD
 002003600000

	)

173 
	#CMSPAR
 010000000000

	)

174 
	#CRTSCTS
 020000000000

	)

178 
	#ISIG
 0000001

	)

179 
	#ICANON
 0000002

	)

180 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


181 
	#XCASE
 0000004

	)

183 
	#ECHO
 0000010

	)

184 
	#ECHOE
 0000020

	)

185 
	#ECHOK
 0000040

	)

186 
	#ECHONL
 0000100

	)

187 
	#NOFLSH
 0000200

	)

188 
	#TOSTOP
 0000400

	)

189 #ifde‡
__USE_MISC


190 
	#ECHOCTL
 0001000

	)

191 
	#ECHOPRT
 0002000

	)

192 
	#ECHOKE
 0004000

	)

193 
	#FLUSHO
 0010000

	)

194 
	#PENDIN
 0040000

	)

196 
	#IEXTEN
 0100000

	)

197 #ifde‡
__USE_BSD


198 
	#EXTPROC
 0200000

	)

202 
	#TCOOFF
 0

	)

203 
	#TCOON
 1

	)

204 
	#TCIOFF
 2

	)

205 
	#TCION
 3

	)

208 
	#TCIFLUSH
 0

	)

209 
	#TCOFLUSH
 1

	)

210 
	#TCIOFLUSH
 2

	)

213 
	#TCSANOW
 0

	)

214 
	#TCSADRAIN
 1

	)

215 
	#TCSAFLUSH
 2

	)

218 
	#_IOT_ãrmios
 \

219 
	`_IOT
 (
	`_IOTS
 (
cÊag_t
), 4, _IOTS (
cc_t
), 
NCCS
, _IOTS (
•ìd_t
), 2)

	)

	@/usr/include/bits/time.h

23 #i‡
deföed
 
__√ed_timevÆ
 || deföed 
__USE_GNU


24 #i‚de‡
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<bôs/ty≥s.h
>

30 
	stimevÆ


32 
__time_t
 
	mtv_£c
;

33 
__su£c⁄ds_t
 
	mtv_u£c
;

38 #i‚de‡
__√ed_timevÆ


39 #i‚de‡
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #i‡(!
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_POSIX
) \

51 && !
deföed
 
	g__USE_XOPEN2K


54 
	~<bôs/ty≥s.h
>

55 
__sysc⁄f
 ();

56 
	#CLK_TCK
 ((
__˛ock_t
Ë
	`__sysc⁄f
 (2)Ë

	)

59 #ifde‡
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

82 
	#TIMER_ABSTIME
 1

	)

85 #ifde‡
__USE_GNU


86 
	~<bôs/timex.h
>

88 
__BEGIN_DECLS


91 
	$˛ock_adjtime
 (
__˛ockid_t
 
__˛ock_id
, 
timex
 *
__utx
Ë
__THROW
;

93 
__END_DECLS


99 #unde‡
__√ed_timevÆ


	@/usr/include/bits/types.h

23 #i‚def 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/w‹dsize.h
>

30 
	t__u_ch¨
;

31 
	t__u_sh‹t
;

32 
	t__u_öt
;

33 
	t__u_l⁄g
;

36 sig√d 
	t__öt8_t
;

37 
	t__uöt8_t
;

38 sig√d 
	t__öt16_t
;

39 
	t__uöt16_t
;

40 sig√d 
	t__öt32_t
;

41 
	t__uöt32_t
;

42 #i‡
__WORDSIZE
 == 64

43 sig√d 
	t__öt64_t
;

44 
	t__uöt64_t
;

46 
__exãnsi⁄__
 sig√d 
	t__öt64_t
;

47 
__exãnsi⁄__
 
	t__uöt64_t
;

51 #i‡
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

55 
__exãnsi⁄__
 
	t__quad_t
;

56 
__exãnsi⁄__
 
	t__u_quad_t
;

89 
	#__S16_TYPE
 

	)

90 
	#__U16_TYPE
 

	)

91 
	#__S32_TYPE
 

	)

92 
	#__U32_TYPE
 

	)

93 
	#__SLONGWORD_TYPE
 

	)

94 
	#__ULONGWORD_TYPE
 

	)

95 #i‡
__WORDSIZE
 == 32

96 
	#__SQUAD_TYPE
 
__quad_t


	)

97 
	#__UQUAD_TYPE
 
__u_quad_t


	)

98 
	#__SWORD_TYPE
 

	)

99 
	#__UWORD_TYPE
 

	)

100 
	#__SLONG32_TYPE
 

	)

101 
	#__ULONG32_TYPE
 

	)

102 
	#__S64_TYPE
 
__quad_t


	)

103 
	#__U64_TYPE
 
__u_quad_t


	)

106 
	#__STD_TYPE
 
__exãnsi⁄__
 

	)

107 #ñi‡
__WORDSIZE
 == 64

108 
	t__SQUAD_TYPE
 

	)

109 
	t__UQUAD_TYPE
 

	)

110 
	t__SWORD_TYPE
 

	)

111 
	t__UWORD_TYPE
 

	)

112 
	t__SLONG32_TYPE
 

	)

113 
	t__ULONG32_TYPE
 

	)

114 
	t__S64_TYPE
 

	)

115 
	t__U64_TYPE
 

	)

117 
	t__STD_TYPE
 

	)

121 
	~<bôs/ty≥sizes.h
>

124 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

125 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

126 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

127 
__STD_TYPE
 
__INO_T_TYPE
 
	g__öo_t
;

128 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__öo64_t
;

129 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

130 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__∆ök_t
;

131 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

132 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

133 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

134 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

135 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__˛ock_t
;

136 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__æim_t
;

137 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__æim64_t
;

138 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

139 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

140 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£c⁄ds_t
;

141 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£c⁄ds_t
;

143 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

144 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

147 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__˛ockid_t
;

150 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__timî_t
;

153 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

158 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blk˙t_t
;

159 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blk˙t64_t
;

162 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblk˙t_t
;

163 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblk˙t64_t
;

166 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfû˙t_t
;

167 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfû˙t64_t
;

170 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fsw‹d_t
;

172 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

175 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysˇŒ_¶⁄g_t
;

177 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysˇŒ_ul⁄g_t
;

181 
__off64_t
 
	t__loff_t
;

182 
__quad_t
 *
	t__qaddr_t
;

183 *
	t__ˇddr_t
;

186 
__STD_TYPE
 
__SWORD_TYPE
 
	g__öçå_t
;

189 
__STD_TYPE
 
__U32_TYPE
 
	g__sockÀn_t
;

192 #unde‡
__STD_TYPE


	@/usr/include/bits/unistd.h

19 #i‚de‡
_UNISTD_H


23 
ssize_t
 
	$__ªad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

24 
size_t
 
__buÊí
Ë
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__ªad_Æüs
, (
__fd
, *
__buf
,

26 
size_t
 
__nbyãs
), 
ªad
Ë
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__ªad_chk_w¨n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

29 
size_t
 
__buÊí
), 
__ªad_chk
)

30 
__wur
 
	`__w¨«âr
 ("read called with biggerÜengthÅhan size of "

33 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


34 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
)

36 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

38 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

39  
	`__ªad_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

41 i‡(
__nbyãs
 > 
	`__bos0
 (
__buf
))

42  
	`__ªad_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

44  
	`__ªad_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
);

45 
	}
}

47 #ifde‡
__USE_UNIX98


48 
ssize_t
 
	$__¥ód_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

50 
ssize_t
 
	$__¥ód64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__¥ód_Æüs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

54 
__off_t
 
__off£t
), 
¥ód
Ë
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_Æüs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

57 
__off64_t
 
__off£t
), 
¥ód64
Ë
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__¥ód_chk_w¨n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__¥ód_chk
)

61 
__wur
 
	`__w¨«âr
 ("pread called with biggerÜengthÅhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_chk_w¨n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__¥ód64_chk
)

67 
__wur
 
	`__w¨«âr
 ("pread64 called with biggerÜengthÅhan size of "

70 #i‚de‡
__USE_FILE_OFFSET64


71 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


72 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off_t
 
__off£t
)

74 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

76 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

77  
	`__¥ód_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

79 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

80  
	`__¥ód_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__¥ód_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

84 
	}
}

86 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


87 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

89 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

91 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

92  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

94 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

95  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

100 
	}
}

103 #ifde‡
__USE_LARGEFILE64


104 
__f‹tify_fun˘i⁄
 
__wur
 
ssize_t


105 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

107 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

109 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

110  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

112 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

113  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

118 
	}
}

122 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


123 
ssize_t
 
	$__ªadlök_chk
 (c⁄° *
__ª°ri˘
 
__∑th
,

124 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

125 
size_t
 
__buÊí
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_Æüs
,

128 (c⁄° *
__ª°ri˘
 
__∑th
,

129 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
), 
ªadlök
)

130 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_chk_w¨n
,

132 (c⁄° *
__ª°ri˘
 
__∑th
,

133 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

134 
size_t
 
__buÊí
), 
__ªadlök_chk
)

135 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
	`__w¨«âr
 ("readlink called with biggerÜength "

138 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
ssize_t


139 
	`__NTH
 (
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
, *__ª°ri˘ 
__buf
,

140 
size_t
 
__Àn
))

142 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

144 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

145  
	`__ªadlök_chk
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

147 i‡–
__Àn
 > 
	`__bos
 (
__buf
))

148  
	`__ªadlök_chk_w¨n
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

150  
	`__ªadlök_Æüs
 (
__∑th
, 
__buf
, 
__Àn
);

151 
	}
}

154 #ifde‡
__USE_ATFILE


155 
ssize_t
 
	$__ªadlök©_chk
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

156 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

157 
size_t
 
__buÊí
)

158 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_Æüs
,

160 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

161 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
),

162 
ªadlök©
)

163 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_chk_w¨n
,

165 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

166 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

167 
size_t
 
__buÊí
), 
__ªadlök©_chk
)

168 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
	`__w¨«âr
 ("readlinkat called with bigger "

172 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
ssize_t


173 
	`__NTH
 (
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

174 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
))

176 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

178 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

179  
	`__ªadlök©_chk
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

181 i‡(
__Àn
 > 
	`__bos
 (
__buf
))

182  
	`__ªadlök©_chk_w¨n
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
,

183 
	`__bos
 (
__buf
));

185  
	`__ªadlök©_Æüs
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
);

186 
	}
}

189 *
	$__gëcwd_chk
 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__gëcwd_Æüs
,

192 (*
__buf
, 
size_t
 
__size
), 
gëcwd
Ë
__wur
;

193 *
	`__REDIRECT_NTH
 (
__gëcwd_chk_w¨n
,

194 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
),

195 
__gëcwd_chk
)

196 
__wur
 
	`__w¨«âr
 ("getcwd caller with biggerÜengthÅhan size of "

199 
__f‹tify_fun˘i⁄
 
__wur
 *

200 
	`__NTH
 (
	$gëcwd
 (*
__buf
, 
size_t
 
__size
))

202 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

204 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
))

205  
	`__gëcwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 i‡(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__gëcwd_chk_w¨n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__gëcwd_Æüs
 (
__buf
, 
__size
);

211 
	}
}

213 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


214 *
	$__gëwd_chk
 (*
__buf
, 
size_t
 
buÊí
)

215 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

216 *
	`__REDIRECT_NTH
 (
__gëwd_w¨n
, (*
__buf
), 
gëwd
)

217 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("please use getcwd instead,ás getwd "

220 
__f‹tify_fun˘i⁄
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
 *

221 
	`__NTH
 (
	$gëwd
 (*
__buf
))

223 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

224  
	`__gëwd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__gëwd_w¨n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__c⁄f°r_chk
 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

230 
size_t
 
__buÊí
Ë
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_Æüs
, (
__«me
, *
__buf
,

232 
size_t
 
__Àn
), 
c⁄f°r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_chk_w¨n
,

234 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

235 
size_t
 
__buÊí
), 
__c⁄f°r_chk
)

236 
	`__w¨«âr
 ("confstr called with biggerÜengthÅhan size of destination "

239 
__f‹tify_fun˘i⁄
 
size_t


240 
	`__NTH
 (
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
))

242 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

244 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

245  
	`__c⁄f°r_chk
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

247 i‡(
	`__bos
 (
__buf
Ë< 
__Àn
)

248  
	`__c⁄f°r_chk_w¨n
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

250  
	`__c⁄f°r_Æüs
 (
__«me
, 
__buf
, 
__Àn
);

251 
	}
}

254 
	$__gëgroups_chk
 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__gëgroups_Æüs
, (
__size
, 
__gid_t
 
__li°
[]),

257 
gëgroups
Ë
__wur
;

258 
	`__REDIRECT_NTH
 (
__gëgroups_chk_w¨n
,

259 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
),

260 
__gëgroups_chk
)

261 
__wur
 
	`__w¨«âr
 ("getgroups called with bigger group countÅhan what "

264 
__f‹tify_fun˘i⁄
 

265 
	`__NTH
 (
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]))

267 i‡(
	`__bos
 (
__li°
Ë!(
size_t
) -1)

269 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
) || __size < 0)

270  
	`__gëgroups_chk
 (
__size
, 
__li°
, 
	`__bos
 (__list));

272 i‡(
__size
 *  (
__gid_t
Ë> 
	`__bos
 (
__li°
))

273  
	`__gëgroups_chk_w¨n
 (
__size
, 
__li°
, 
	`__bos
 (__list));

275  
	`__gëgroups_Æüs
 (
__size
, 
__li°
);

276 
	}
}

279 
	$__ây«me_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

280 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

281 
	`__REDIRECT_NTH
 (
__ây«me_r_Æüs
, (
__fd
, *
__buf
,

282 
size_t
 
__buÊí
), 
ây«me_r
)

283 
	`__n⁄nuŒ
 ((2));

284 
	`__REDIRECT_NTH
 (
__ây«me_r_chk_w¨n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

286 
size_t
 
__ƒól
), 
__ây«me_r_chk
)

287 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ttyname_r called with bigger buflenÅhan "

290 
__f‹tify_fun˘i⁄
 

291 
	`__NTH
 (
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

293 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

295 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

296  
	`__ây«me_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

298 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

299  
	`__ây«me_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

301  
	`__ây«me_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

302 
	}
}

305 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


306 
	$__gëlogö_r_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

307 
	`__n⁄nuŒ
 ((1));

308 
	`__REDIRECT
 (
__gëlogö_r_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

309 
gëlogö_r
Ë
	`__n⁄nuŒ
 ((1));

310 
	`__REDIRECT
 (
__gëlogö_r_chk_w¨n
,

311 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

312 
__gëlogö_r_chk
)

313 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("getlogin_r called with bigger buflenÅhan "

316 
__f‹tify_fun˘i⁄
 

317 
	$gëlogö_r
 (*
__buf
, 
size_t
 
__buÊí
)

319 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

321 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

322  
	`__gëlogö_r_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

324 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

325  
	`__gëlogö_r_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

327  
	`__gëlogö_r_Æüs
 (
__buf
, 
__buÊí
);

328 
	}
}

332 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


333 
	$__gëho°«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

334 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	`__REDIRECT_NTH
 (
__gëho°«me_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

336 
gëho°«me
Ë
	`__n⁄nuŒ
 ((1));

337 
	`__REDIRECT_NTH
 (
__gëho°«me_chk_w¨n
,

338 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

339 
__gëho°«me_chk
)

340 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("gethostname called with bigger buflenÅhan "

343 
__f‹tify_fun˘i⁄
 

344 
	`__NTH
 (
	$gëho°«me
 (*
__buf
, 
size_t
 
__buÊí
))

346 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

348 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

349  
	`__gëho°«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

351 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

352  
	`__gëho°«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

354  
	`__gëho°«me_Æüs
 (
__buf
, 
__buÊí
);

355 
	}
}

359 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

360 
	$__gëdomaö«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

361 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

362 
	`__REDIRECT_NTH
 (
__gëdomaö«me_Æüs
, (*
__buf
,

363 
size_t
 
__buÊí
),

364 
gëdomaö«me
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

365 
	`__REDIRECT_NTH
 (
__gëdomaö«me_chk_w¨n
,

366 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

367 
__gëdomaö«me_chk
)

368 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("getdomainname called with bigger "

372 
__f‹tify_fun˘i⁄
 

373 
	`__NTH
 (
	$gëdomaö«me
 (*
__buf
, 
size_t
 
__buÊí
))

375 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

377 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

378  
	`__gëdomaö«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

380 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

381  
	`__gëdomaö«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

383  
	`__gëdomaö«me_Æüs
 (
__buf
, 
__buÊí
);

384 
	}
}

	@/usr/include/bits/waitflags.h

19 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

40 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


41 #i‚de‡
__ENUM_IDTYPE_T


42 
	#__ENUM_IDTYPE_T
 1

	)

46 #unde‡
P_ALL


47 #unde‡
P_PID


48 #unde‡
P_PGID


52 
	mP_ALL
,

53 
	mP_PID
,

54 
	mP_PGID


55 } 
	tidty≥_t
;

	@/usr/include/bits/waitstatus.h

19 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
°©us
Ë(((°©usË& 0xff00Ë>> 8)

	)

31 
	#__WTERMSIG
(
°©us
Ë((°©usË& 0x7f)

	)

34 
	#__WSTOPSIG
(
°©us
Ë
	`__WEXITSTATUS
(°©us)

	)

37 
	#__WIFEXITED
(
°©us
Ë(
	`__WTERMSIG
(°©usË=0)

	)

40 
	#__WIFSIGNALED
(
°©us
) \

41 (((sig√d Ë(((
°©us
Ë& 0x7fË+ 1Ë>> 1Ë> 0)

	)

44 
	#__WIFSTOPPED
(
°©us
Ë(((°©usË& 0xffË=0x7f)

	)

48 #ifde‡
WCONTINUED


49 
	#__WIFCONTINUED
(
°©us
Ë((°©usË=
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
°©us
Ë((°©usË& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
ªt
, 
sig
Ë(‘ëË<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
Ë((sigË<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<ídün.h
>

66 
	uwaô


68 
	mw_°©us
;

71 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


72 
	m__w_ãrmsig
:7;

73 
	m__w_c‹edump
:1;

74 
	m__w_ªtcode
:8;

77 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


79 
	m__w_ªtcode
:8;

80 
	m__w_c‹edump
:1;

81 
	m__w_ãrmsig
:7;

83 } 
	m__waô_ãrmö©ed
;

86 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


87 
	m__w_°›vÆ
:8;

88 
	m__w_°›sig
:8;

91 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


93 
	m__w_°›sig
:8;

94 
	m__w_°›vÆ
:8;

96 } 
	m__waô_°›≥d
;

99 
	#w_ãrmsig
 
__waô_ãrmö©ed
.
__w_ãrmsig


	)

100 
	#w_c‹edump
 
__waô_ãrmö©ed
.
__w_c‹edump


	)

101 
	#w_ªtcode
 
__waô_ãrmö©ed
.
__w_ªtcode


	)

102 
	#w_°›sig
 
__waô_°›≥d
.
__w_°›sig


	)

103 
	#w_°›vÆ
 
__waô_°›≥d
.
__w_°›vÆ


	)

	@/usr/include/bits/wchar.h

19 #i‚de‡
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifde‡
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #ñi‡
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffff‡+ 
L
'\0')

	)

41 #ifde‡
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #ñi‡
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #i‡
deföed
 
__x86_64__
 && !deföed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifde‡
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/bits/xopen_lim.h

29 #i‚de‡
_XOPEN_LIM_H


30 
	#_XOPEN_LIM_H
 1

	)

32 
	#__√ed_IOV_MAX


	)

33 
	~<bôs/°dio_lim.h
>

65 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

70 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

73 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

76 
	#NL_MSGMAX
 
INT_MAX


	)

80 
	#NL_NMAX
 
INT_MAX


	)

83 
	#NL_SETMAX
 
INT_MAX


	)

86 
	#NL_TEXTMAX
 
INT_MAX


	)

89 
	#NZERO
 20

	)

93 #ifde‡
INT_MAX


94 #i‡
INT_MAX
 == 32767

95 
	#WORD_BIT
 16

	)

97 #i‡
INT_MAX
 == 2147483647

98 
	#WORD_BIT
 32

	)

101 
	#WORD_BIT
 64

	)

104 #ñi‡
deföed
 
__INT_MAX__


105 #i‡
__INT_MAX__
 == 32767

106 
	#WORD_BIT
 16

	)

108 #i‡
__INT_MAX__
 == 2147483647

109 
	#WORD_BIT
 32

	)

112 
	#WORD_BIT
 64

	)

116 
	#WORD_BIT
 32

	)

120 #ifde‡
LONG_MAX


121 #i‡
LONG_MAX
 == 2147483647

122 
	#LONG_BIT
 32

	)

125 
	#LONG_BIT
 64

	)

127 #ñi‡
deföed
 
__LONG_MAX__


128 #i‡
__LONG_MAX__
 == 2147483647

129 
	#LONG_BIT
 32

	)

132 
	#LONG_BIT
 64

	)

135 
	~<bôs/w‹dsize.h
>

136 #i‡
__WORDSIZE
 == 64

137 
	#LONG_BIT
 64

	)

139 
	#LONG_BIT
 32

	)

	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_BSD
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #unde‡
__USE_ISOC11


102 #unde‡
__USE_ISOC99


103 #unde‡
__USE_ISOC95


104 #unde‡
__USE_ISOCXX11


105 #unde‡
__USE_POSIX


106 #unde‡
__USE_POSIX2


107 #unde‡
__USE_POSIX199309


108 #unde‡
__USE_POSIX199506


109 #unde‡
__USE_XOPEN


110 #unde‡
__USE_XOPEN_EXTENDED


111 #unde‡
__USE_UNIX98


112 #unde‡
__USE_XOPEN2K


113 #unde‡
__USE_XOPEN2KXSI


114 #unde‡
__USE_XOPEN2K8


115 #unde‡
__USE_XOPEN2K8XSI


116 #unde‡
__USE_LARGEFILE


117 #unde‡
__USE_LARGEFILE64


118 #unde‡
__USE_FILE_OFFSET64


119 #unde‡
__USE_BSD


120 #unde‡
__USE_SVID


121 #unde‡
__USE_MISC


122 #unde‡
__USE_ATFILE


123 #unde‡
__USE_GNU


124 #unde‡
__USE_REENTRANT


125 #unde‡
__USE_FORTIFY_LEVEL


126 #unde‡
__KERNEL_STRICT_NAMES


130 #i‚de‡
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

143 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

150 #ifde‡
_GNU_SOURCE


151 #unde‡
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #unde‡
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #unde‡
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #unde‡
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #unde‡
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #unde‡
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #unde‡
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #unde‡
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #unde‡
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #unde‡
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #unde‡
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #unde‡
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

180 || (!
deföed
 
	g__STRICT_ANSI__
 \

181 && !
deföed
 
	g_ISOC99_SOURCE
 \

182 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

183 && !
deföed
 
	g_XOPEN_SOURCE
 \

184 && !
deföed
 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
))

185 #unde‡
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #unde‡
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #unde‡
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #i‡(
deföed
 
_ISOC11_SOURCE
 \

195 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

201 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

207 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

216 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifde‡
_DEFAULT_SOURCE


224 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #unde‡
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #unde‡
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #unde‡
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #unde‡
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #unde‡
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #unde‡
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #unde‡
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #unde‡
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifde‡
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifde‡
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifde‡
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #i‡
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<°dc-¥edef.h
>

360 #unde‡
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

369 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

372 #i‚de‡
__ASSEMBLER__


373 #i‚de‡
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

388 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

389 && 
deföed
 
	g__exã∫_ölöe


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


148 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<bôs/°dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¨kî
 {

161 
_IO_m¨kî
 *
	m_√xt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

169 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

170 
	mpublic
:

171 
°ªamm¨kî
(
°ªambuf
 *
sb
);

172 ~
°ªamm¨kî
();

173 
ßvög
(Ë{  
	m_•os
 == -2; }

174 
dñè
(
°ªamm¨kî
&);

175 
dñè
();

180 
	e__codecvt_ªsu…


182 
	m__codecvt_ok
,

183 
	m__codecvt_∑πül
,

184 
	m__codecvt_îr‹
,

185 
	m__codecvt_noc⁄v


188 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

194 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

195 
	m__mb°©e_t
 *,

196 c⁄° 
	mwch¨_t
 *,

197 c⁄° 
	mwch¨_t
 *,

198 c⁄° 
	mwch¨_t
 **, *,

200 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

201 
	m__mb°©e_t
 *, *,

203 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

204 
	m__mb°©e_t
 *,

206 c⁄° **, 
	mwch¨_t
 *,

207 
	mwch¨_t
 *, wchar_t **);

208 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

211 c⁄° *, c⁄° *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

214 
_IO_ic⁄v_t
 
	m__cd_ö
;

215 
_IO_ic⁄v_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¨_t
 *
	m_IO_ªad_±r
;

222 
wch¨_t
 *
	m_IO_ªad_íd
;

223 
wch¨_t
 *
	m_IO_ªad_ba£
;

224 
wch¨_t
 *
	m_IO_wrôe_ba£
;

225 
wch¨_t
 *
	m_IO_wrôe_±r
;

226 
wch¨_t
 *
	m_IO_wrôe_íd
;

227 
wch¨_t
 *
	m_IO_buf_ba£
;

228 
wch¨_t
 *
	m_IO_buf_íd
;

230 
wch¨_t
 *
	m_IO_ßve_ba£
;

231 
wch¨_t
 *
	m_IO_backup_ba£
;

233 
wch¨_t
 *
	m_IO_ßve_íd
;

235 
__mb°©e_t
 
	m_IO_°©e
;

236 
__mb°©e_t
 
	m_IO_œ°_°©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¨_t
 
	m_sh‹tbuf
[1];

241 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

245 
	s_IO_FILE
 {

246 
	m_Êags
;

247 
	#_IO_fûe_Êags
 
_Êags


	)

251 * 
	m_IO_ªad_±r
;

252 * 
	m_IO_ªad_íd
;

253 * 
	m_IO_ªad_ba£
;

254 * 
	m_IO_wrôe_ba£
;

255 * 
	m_IO_wrôe_±r
;

256 * 
	m_IO_wrôe_íd
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_íd
;

260 *
	m_IO_ßve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_ßve_íd
;

264 
_IO_m¨kî
 *
	m_m¨kîs
;

266 
_IO_FILE
 *
	m_chaö
;

268 
	m_fûío
;

270 
	m_blksize
;

272 
	m_Êags2
;

274 
_IO_off_t
 
	m_ﬁd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cﬁumn
;

279 sig√d 
	m_vèbÀ_off£t
;

280 
	m_sh‹tbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifde‡
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com∂ëe


290 
_IO_FILE
 
	m_fûe
;

292 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_‰ìªs_li°
;

299 *
	m_‰ìªs_buf
;

300 
size_t
 
	m_‰ìªs_size
;

302 *
	m__∑d1
;

303 *
	m__∑d2
;

304 *
	m__∑d3
;

305 *
	m__∑d4
;

306 
size_t
 
	m__∑d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

314 #i‚de‡
__˝lu•lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_∂us
;

320 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

321 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

322 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

323 #i‚de‡
_LIBC


324 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

325 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

326 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

328 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

329 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

330 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

338 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

346 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_˛o£_‚
 (*
	t__cookõ
);

361 #ifde‡
_GNU_SOURCE


363 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

364 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

365 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

366 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

371 
__io_ªad_‚
 *
	mªad
;

372 
__io_wrôe_‚
 *
	mwrôe
;

373 
__io_£ek_‚
 *
	m£ek
;

374 
__io_˛o£_‚
 *
	m˛o£
;

375 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

376 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

378 
	g_IO_cookõ_fûe
;

381 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

382 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

386 #ifde‡
__˝lu•lus


390 
__undîÊow
 (
_IO_FILE
 *);

391 
__uÊow
 (
_IO_FILE
 *);

392 
__ovîÊow
 (
_IO_FILE
 *, );

393 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

395 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

396 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

399 #i‡ 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

402 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

405 
	#_IO_gëc_u∆ocked
(
_Â
) \

406 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

407 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

408 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

409 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

410 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

411 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

412 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

413 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

414 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

415 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

417 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_gëwc_u∆ocked
(
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

422 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

423 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

424 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

425 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

426 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

427 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

428 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

431 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

432 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

434 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

436 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

437 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

439 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

443 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

445 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

446 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

447 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

449 #ifde‡
_IO_MTSAFE_IO


450 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

451 
	#_IO_Êockfûe
(
_Â
) \

452 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

453 
	#_IO_fu∆ockfûe
(
_Â
) \

454 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

456 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

457 
	#_IO_Êockfûe
(
_Â
Ë

	)

458 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

459 
	#_IO_·rylockfûe
(
_Â
Ë

	)

460 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

461 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

464 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

465 
_IO_va_li°
, *
__ª°ri˘
);

466 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

467 
_IO_va_li°
);

468 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

476 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

478 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

479 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

480 #i‡
__GNUC__
 >= 2

483 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


484 
	~<shlib-com∑t.h
>

485 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

487 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

488 c⁄° 
_IO_°dö_u£d
;

489 
wók_exã∫
 (
_IO_°dö_u£d
);

492 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


493 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

497 
	#_IO_fwide
(
__Â
, 
__mode
) \

498 ({ 
__ªsu…
 = (
__mode
); \

499 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

501 i‡((
__Â
)->
_mode
 == 0) \

503 (
__Â
)->
_mode
 = -1; \

504 
__ªsu…
 = (
__Â
)->
_mode
; \

506 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

507 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

509 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

510 
__ªsu…
; })

	)

513 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

514 
_IO_va_li°
, *
__ª°ri˘
);

515 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

516 
_IO_va_li°
);

517 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

518 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

521 #ifde‡
__LDBL_COMPAT


522 
	~<bôs/libio-ldbl.h
>

525 #ifde‡
__˝lu•lus


	@/usr/include/linux/if_ether.h

21 #i‚de‡
_LINUX_IF_ETHER_H


22 
	#_LINUX_IF_ETHER_H


	)

24 
	~<löux/ty≥s.h
>

31 
	#ETH_ALEN
 6

	)

32 
	#ETH_HLEN
 14

	)

33 
	#ETH_ZLEN
 60

	)

34 
	#ETH_DATA_LEN
 1500

	)

35 
	#ETH_FRAME_LEN
 1514

	)

36 
	#ETH_FCS_LEN
 4

	)

42 
	#ETH_P_LOOP
 0x0060

	)

43 
	#ETH_P_PUP
 0x0200

	)

44 
	#ETH_P_PUPAT
 0x0201

	)

45 
	#ETH_P_IP
 0x0800

	)

46 
	#ETH_P_X25
 0x0805

	)

47 
	#ETH_P_ARP
 0x0806

	)

48 
	#ETH_P_BPQ
 0x08FF

	)

49 
	#ETH_P_IEEEPUP
 0x0a00

	)

50 
	#ETH_P_IEEEPUPAT
 0x0a01

	)

51 
	#ETH_P_BATMAN
 0x4305

	)

52 
	#ETH_P_DEC
 0x6000

	)

53 
	#ETH_P_DNA_DL
 0x6001

	)

54 
	#ETH_P_DNA_RC
 0x6002

	)

55 
	#ETH_P_DNA_RT
 0x6003

	)

56 
	#ETH_P_LAT
 0x6004

	)

57 
	#ETH_P_DIAG
 0x6005

	)

58 
	#ETH_P_CUST
 0x6006

	)

59 
	#ETH_P_SCA
 0x6007

	)

60 
	#ETH_P_TEB
 0x6558

	)

61 
	#ETH_P_RARP
 0x8035

	)

62 
	#ETH_P_ATALK
 0x809B

	)

63 
	#ETH_P_AARP
 0x80F3

	)

64 
	#ETH_P_8021Q
 0x8100

	)

65 
	#ETH_P_IPX
 0x8137

	)

66 
	#ETH_P_IPV6
 0x86DD

	)

67 
	#ETH_P_PAUSE
 0x8808

	)

68 
	#ETH_P_SLOW
 0x8809

	)

69 
	#ETH_P_WCCP
 0x883E

	)

71 
	#ETH_P_PPP_DISC
 0x8863

	)

72 
	#ETH_P_PPP_SES
 0x8864

	)

73 
	#ETH_P_MPLS_UC
 0x8847

	)

74 
	#ETH_P_MPLS_MC
 0x8848

	)

75 
	#ETH_P_ATMMPOA
 0x884¯

	)

76 
	#ETH_P_LINK_CTL
 0x886¯

	)

77 
	#ETH_P_ATMFATE
 0x8884

	)

80 
	#ETH_P_PAE
 0x888E

	)

81 
	#ETH_P_AOE
 0x88A2

	)

82 
	#ETH_P_8021AD
 0x88A8

	)

83 
	#ETH_P_802_EX1
 0x88B5

	)

84 
	#ETH_P_TIPC
 0x88CA

	)

85 
	#ETH_P_8021AH
 0x88E7

	)

86 
	#ETH_P_MVRP
 0x88F5

	)

87 
	#ETH_P_1588
 0x88F7

	)

88 
	#ETH_P_PRP
 0x88FB

	)

89 
	#ETH_P_FCOE
 0x8906

	)

90 
	#ETH_P_TDLS
 0x890D

	)

91 
	#ETH_P_FIP
 0x8914

	)

92 
	#ETH_P_QINQ1
 0x9100

	)

93 
	#ETH_P_QINQ2
 0x9200

	)

94 
	#ETH_P_QINQ3
 0x9300

	)

95 
	#ETH_P_EDSA
 0xDADA

	)

96 
	#ETH_P_AF_IUCV
 0xFBFB

	)

98 
	#ETH_P_802_3_MIN
 0x0600

	)

105 
	#ETH_P_802_3
 0x0001

	)

106 
	#ETH_P_AX25
 0x0002

	)

107 
	#ETH_P_ALL
 0x0003

	)

108 
	#ETH_P_802_2
 0x0004

	)

109 
	#ETH_P_SNAP
 0x0005

	)

110 
	#ETH_P_DDCMP
 0x0006

	)

111 
	#ETH_P_WAN_PPP
 0x0007

	)

112 
	#ETH_P_PPP_MP
 0x0008

	)

113 
	#ETH_P_LOCALTALK
 0x0009

	)

114 
	#ETH_P_CAN
 0x000C

	)

115 
	#ETH_P_CANFD
 0x000D

	)

116 
	#ETH_P_PPPTALK
 0x0010

	)

117 
	#ETH_P_TR_802_2
 0x0011

	)

118 
	#ETH_P_MOBITEX
 0x0015

	)

119 
	#ETH_P_CONTROL
 0x0016

	)

120 
	#ETH_P_IRDA
 0x0017

	)

121 
	#ETH_P_ECONET
 0x0018

	)

122 
	#ETH_P_HDLC
 0x0019

	)

123 
	#ETH_P_ARCNET
 0x001A

	)

124 
	#ETH_P_DSA
 0x001B

	)

125 
	#ETH_P_TRAILER
 0x001C

	)

126 
	#ETH_P_PHONET
 0x00F5

	)

127 
	#ETH_P_IEEE802154
 0x00F6

	)

128 
	#ETH_P_CAIF
 0x00F7

	)

134 
	sëhhdr
 {

135 
	mh_de°
[
ETH_ALEN
];

136 
	mh_sour˚
[
ETH_ALEN
];

137 
__be16
 
	mh_¥Ÿo
;

138 } 
__©åibuã__
((
∑cked
));

	@/usr/include/sys/cdefs.h

18 #i‚def 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #i‚de‡
_FEATURES_H


23 
	~<„©uªs.h
>

29 #i‡
deföed
 
__GNUC__
 && !deföed 
__STDC__


34 #unde‡
__P


35 #unde‡
__PMT


37 #ifde‡
__GNUC__


41 #i‡
__GNUC_PREREQ
 (4, 6Ë&& !
deföed
 
_LIBC


42 
	#__LEAF
 , 
__Àaf__


	)

43 
	#__LEAF_ATTR
 
	`__©åibuã__
 ((
__Àaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #i‡!
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©åibuã__
 ((
__nŸhrow__
))

	)

57 
	#__NTH
(
f˘
Ë
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
)Ë
	)
f˘

59 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

60 
	#__THROW
 
	`throw
 ()

	)

61 
	#__THROWNL
 
	`throw
 ()

	)

62 
	#__NTH
(
f˘
Ë
__LEAF_ATTR
 f˘ 
	`throw
 ()

	)

64 
	#__THROW


	)

65 
	#__THROWNL


	)

66 
	#__NTH
(
f˘
Ë
	)
f˘

72 
	#__ölöe


	)

74 
	#__THROW


	)

75 
	#__THROWNL


	)

76 
	#__NTH
(
f˘
Ë
	)
f˘

82 
	#__P
(
¨gs
Ë
	)
¨gs

83 
	#__PMT
(
¨gs
Ë
	)
¨gs

88 
	#__CONCAT
(
x
,
y
Ëx ## 
	)
y

89 
	#__STRING
(
x
Ë#x

	)

92 
	#__±r_t
 *

	)

93 
	#__l⁄g_doubÀ_t
 

	)

97 #ifdef 
__˝lu•lus


98 
	#__BEGIN_DECLS
 "C" {

	)

99 
	#__END_DECLS
 }

	)

101 
	#__BEGIN_DECLS


	)

102 
	#__END_DECLS


	)

111 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES


112 
	#__BEGIN_NAMESPACE_STD
 
«me•a˚
 
°d
 {

	)

113 
	#__END_NAMESPACE_STD
 }

	)

114 
	#__USING_NAMESPACE_STD
(
«me
Ë
usög
 
°d
::«me;

	)

115 
	#__BEGIN_NAMESPACE_C99
 
«me•a˚
 
__c99
 {

	)

116 
	#__END_NAMESPACE_C99
 }

	)

117 
	#__USING_NAMESPACE_C99
(
«me
Ë
usög
 
__c99
::«me;

	)

122 
	#__BEGIN_NAMESPACE_STD


	)

123 
	#__END_NAMESPACE_STD


	)

124 
	#__USING_NAMESPACE_STD
(
«me
)

	)

125 
	#__BEGIN_NAMESPACE_C99


	)

126 
	#__END_NAMESPACE_C99


	)

127 
	#__USING_NAMESPACE_C99
(
«me
)

	)

132 
	#__bos
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 0)

	)

134 
	#__f‹tify_fun˘i⁄
 
__exã∫_Æways_ölöe
 
__©åibuã_¨tificül__


	)

136 #i‡
__GNUC_PREREQ
 (4,3)

137 
	#__w¨nde˛
(
«me
, 
msg
) \

138 
	`«me
 (Ë
	`__©åibuã__
((
	`__w¨nög__
 (
msg
)))

	)

139 
	#__w¨«âr
(
msg
Ë
	`__©åibuã__
((
	`__w¨nög__
 (msg)))

	)

140 
	#__îr‹de˛
(
«me
, 
msg
) \

141 
	`«me
 (Ë
	`__©åibuã__
((
	`__îr‹__
 (
msg
)))

	)

143 
	#__w¨nde˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

144 
	#__w¨«âr
(
msg
)

	)

145 
	#__îr‹de˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

149 #i‡
__GNUC_PREREQ
 (2,97)

151 
	#__Êex¨r
 []

	)

153 #ifde‡
__GNUC__


154 
	#__Êex¨r
 [0]

	)

156 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

157 
	#__Êex¨r
 []

	)

160 
	#__Êex¨r
 [1]

	)

176 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

178 
	#__REDIRECT
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

179 #ifde‡
__˝lu•lus


180 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

181 
«me
 
¥Ÿo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

182 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

183 
«me
 
¥Ÿo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

185 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

186 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROW


	)

187 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

188 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROWNL


	)

190 
	#__ASMNAME
(
˙ame
Ë
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, c«me)

	)

191 
	#__ASMNAME2
(
¥efix
, 
˙ame
Ë
	`__STRING
 (¥efixË
	)
˙ame

204 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

205 
	#__©åibuã__
(
xyz
Ë

	)

211 #i‡
__GNUC_PREREQ
 (2,96)

212 
	#__©åibuã_mÆloc__
 
	`__©åibuã__
 ((
__mÆloc__
))

	)

214 
	#__©åibuã_mÆloc__


	)

219 #i‡
__GNUC_PREREQ
 (4, 3)

220 
	#__©åibuã_Æloc_size__
(
∑øms
) \

221 
	`__©åibuã__
 ((
__Æloc_size__
 
∑øms
))

	)

223 
	#__©åibuã_Æloc_size__
(
∑øms
Ë

	)

229 #i‡
__GNUC_PREREQ
 (2,96)

230 
	#__©åibuã_puª__
 
	`__©åibuã__
 ((
__puª__
))

	)

232 
	#__©åibuã_puª__


	)

236 #i‡
__GNUC_PREREQ
 (2,5)

237 
	#__©åibuã_c⁄°__
 
	`__©åibuã__
 ((
__c⁄°__
))

	)

239 
	#__©åibuã_c⁄°__


	)

245 #i‡
__GNUC_PREREQ
 (3,1)

246 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__u£d__
))

	)

247 
	#__©åibuã_noölöe__
 
	`__©åibuã__
 ((
__noölöe__
))

	)

249 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__unu£d__
))

	)

250 
	#__©åibuã_noölöe__


	)

254 #i‡
__GNUC_PREREQ
 (3,2)

255 
	#__©åibuã_dïªˇãd__
 
	`__©åibuã__
 ((
__dïªˇãd__
))

	)

257 
	#__©åibuã_dïªˇãd__


	)

266 #i‡
__GNUC_PREREQ
 (2,8)

267 
	#__©åibuã_f‹m©_¨g__
(
x
Ë
	`__©åibuã__
 ((
	`__f‹m©_¨g__
 (x)))

	)

269 
	#__©åibuã_f‹m©_¨g__
(
x
Ë

	)

276 #i‡
__GNUC_PREREQ
 (2,97)

277 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
) \

278 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__°rfm⁄__
, 
a
, 
b
)))

	)

280 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
Ë

	)

285 #i‡
__GNUC_PREREQ
 (3,3)

286 
	#__n⁄nuŒ
(
∑øms
Ë
	`__©åibuã__
 ((
__n⁄nuŒ__
Ö¨ams))

	)

288 
	#__n⁄nuŒ
(
∑øms
)

	)

293 #i‡
__GNUC_PREREQ
 (3,4)

294 
	#__©åibuã_w¨n_unu£d_ªsu…__
 \

295 
	`__©åibuã__
 ((
__w¨n_unu£d_ªsu…__
))

	)

296 #i‡
__USE_FORTIFY_LEVEL
 > 0

297 
	#__wur
 
__©åibuã_w¨n_unu£d_ªsu…__


	)

300 
	#__©åibuã_w¨n_unu£d_ªsu…__


	)

302 #i‚de‡
__wur


303 
	#__wur


	)

307 #i‡
__GNUC_PREREQ
 (3,2)

308 
	#__Æways_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__Æways_ölöe__
))

	)

310 
	#__Æways_ölöe
 
__ölöe


	)

315 #i‡
__GNUC_PREREQ
 (4,3)

316 
	#__©åibuã_¨tificül__
 
	`__©åibuã__
 ((
__¨tificül__
))

	)

318 
	#__©åibuã_¨tificül__


	)

321 #ifde‡
__GNUC__


326 #i‡
deföed
 
__GNUC_STDC_INLINE__
 || deföed 
__GNUC_GNU_INLINE__


327 
	#__exã∫_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

328 
	#__exã∫_Æways_ölöe
 \

329 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

331 
	#__exã∫_ölöe
 
__ölöe


	)

332 
	#__exã∫_Æways_ölöe
 
__Æways_ölöe


	)

335 
	#__exã∫_ölöe


	)

336 
	#__exã∫_Æways_ölöe


	)

341 #i‡
__GNUC_PREREQ
 (4,3)

342 
	#__va_¨g_∑ck
(Ë
	`__buûtö_va_¨g_∑ck
 ()

	)

343 
	#__va_¨g_∑ck_Àn
(Ë
	`__buûtö_va_¨g_∑ck_Àn
 ()

	)

350 #i‡!
__GNUC_PREREQ
 (2,8)

351 
	#__exãnsi⁄__


	)

355 #i‡!
__GNUC_PREREQ
 (2,92)

356 
	#__ª°ri˘


	)

362 #i‡
__GNUC_PREREQ
 (3,1Ë&& !
deföed
 
__GNUG__


363 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

365 #ifde‡
__GNUC__


366 
	#__ª°ri˘_¨r


	)

368 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

369 
	#__ª°ri˘_¨r
 
ª°ri˘


	)

372 
	#__ª°ri˘_¨r


	)

377 #i‡
__GNUC__
 >= 3

378 
	#__glibc_u∆ikñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
 ((c⁄d), 0)

	)

379 
	#__glibc_likñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
 ((c⁄d), 1)

	)

381 
	#__glibc_u∆ikñy
(
c⁄d
Ë(c⁄d)

	)

382 
	#__glibc_likñy
(
c⁄d
Ë(c⁄d)

	)

385 
	~<bôs/w‹dsize.h
>

387 #i‡
deföed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && deföed 
__NO_LONG_DOUBLE_MATH


388 
	#__LDBL_COMPAT
 1

	)

389 #ifde‡
__REDIRECT


390 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

391 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
) \

392 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

393 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT_NTH
 («me,ÖrŸo,álüs)

	)

394 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
) \

395 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

396 
	#__LDBL_REDIR1_DECL
(
«me
, 
Æüs
) \

397 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 (#Æüs));

	)

398 
	#__LDBL_REDIR_DECL
(
«me
) \

399 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 ("__∆dbl_" #«me));

	)

400 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

401 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

402 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

403 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

406 #i‡!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT


407 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê
	)
¥Ÿo

408 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
Ë«mê
	)
¥Ÿo

409 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
__THROW


	)

410 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
__THROW


	)

411 
	#__LDBL_REDIR_DECL
(
«me
)

	)

412 #ifde‡
__REDIRECT


413 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

414 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

415 
	`__REDIRECT_NTH
 (
«me
, 
¥Ÿo
, 
Æüs
)

	)

	@/usr/include/sys/select.h

21 #i‚de‡
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

30 
	~<bôs/£À˘.h
>

33 
	~<bôs/sig£t.h
>

35 #i‚de‡
__sig£t_t_deföed


36 
	#__sig£t_t_deföed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__√ed_time_t


	)

42 
	#__√ed_time•ec


	)

43 
	~<time.h
>

44 
	#__√ed_timevÆ


	)

45 
	~<bôs/time.h
>

47 #i‚de‡
__su£c⁄ds_t_deföed


48 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

49 
	#__su£c⁄ds_t_deföed


	)

54 
	t__fd_mask
;

57 #unde‡
__NFDBITS


59 
	#__NFDBITS
 (8 * (Ë (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
Ë((
__fd_mask
Ë1 << ((dË% 
__NFDBITS
))

	)

68 #ifde‡
__USE_XOPEN


69 
__fd_mask
 
	mfds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
Ë((£t)->
fds_bôs
)

	)

72 
__fd_mask
 
	m__fds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
Ë((£t)->
__fds_bôs
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifde‡
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£ç
Ë
	`__FD_SET
 (fd, fd£ç)

	)

91 
	#FD_CLR
(
fd
, 
fd£ç
Ë
	`__FD_CLR
 (fd, fd£ç)

	)

92 
	#FD_ISSET
(
fd
, 
fd£ç
Ë
	`__FD_ISSET
 (fd, fd£ç)

	)

93 
	#FD_ZERO
(
fd£ç
Ë
	`__FD_ZERO
 (fd£ç)

	)

96 
__BEGIN_DECLS


106 
£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

107 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

108 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

109 
timevÆ
 *
__ª°ri˘
 
__timeout
);

111 #ifde‡
__USE_XOPEN2K


118 
p£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

119 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

120 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

121 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
,

122 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__sigmask
);

127 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__GNUC__


128 
	~<bôs/£À˘2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

19 #i‚de‡
_SYS_SYSMACROS_H


20 
	#_SYS_SYSMACROS_H
 1

	)

22 
	~<„©uªs.h
>

24 
__BEGIN_DECLS


26 
__exãnsi⁄__


27 
	$gnu_dev_maj‹
 (
__dev
)

28 
__THROW
 
__©åibuã_c⁄°__
;

29 
__exãnsi⁄__


30 
	$gnu_dev_mö‹
 (
__dev
)

31 
__THROW
 
__©åibuã_c⁄°__
;

32 
__exãnsi⁄__


33 
	$gnu_dev_makedev
 (
__maj‹
,

34 
__mö‹
)

35 
__THROW
 
__©åibuã_c⁄°__
;

37 #ifde‡
__USE_EXTERN_INLINES


38 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

39 
	`__NTH
 (
	$gnu_dev_maj‹
 (
__dev
))

41  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

42 
	}
}

44 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

45 
__NTH
 (
	$gnu_dev_mö‹
 (
__dev
))

47  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

48 
	}
}

50 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

51 
__NTH
 (
	$gnu_dev_makedev
 (
__maj‹
, 
__mö‹
))

53  ((
__mö‹
 & 0xffË| ((
__maj‹
 & 0xfff) << 8)

54 | (((Ë(
__mö‹
 & ~0xff)) << 12)

55 | (((Ë(
__maj‹
 & ~0xfff)) << 32));

56 
	}
}

58 
	g__END_DECLS


61 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
 (dev)

	)

62 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
 (dev)

	)

63 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
 (maj, mö)

	)

	@/usr/include/sys/ttydefaults.h

40 #i‚de‡
_SYS_TTYDEFAULTS_H_


41 
	#_SYS_TTYDEFAULTS_H_


	)

46 
	#TTYDEF_IFLAG
 (
BRKINT
 | 
ISTRIP
 | 
ICRNL
 | 
IMAXBEL
 | 
IXON
 | 
IXANY
)

	)

47 
	#TTYDEF_OFLAG
 (
OPOST
 | 
ONLCR
 | 
XTABS
)

	)

48 
	#TTYDEF_LFLAG
 (
ECHO
 | 
ICANON
 | 
ISIG
 | 
IEXTEN
 | 
ECHOE
|
ECHOKE
|
ECHOCTL
)

	)

49 
	#TTYDEF_CFLAG
 (
CREAD
 | 
CS7
 | 
PARENB
 | 
HUPCL
)

	)

50 
	#TTYDEF_SPEED
 (
B9600
)

	)

55 
	#CTRL
(
x
Ë(x&037)

	)

56 
	#CEOF
 
	`CTRL
('d')

	)

57 #ifde‡
_POSIX_VDISABLE


58 
	#CEOL
 
_POSIX_VDISABLE


	)

60 
	#CEOL
 '\0'

	)

62 
	#CERASE
 0177

	)

63 
	#CINTR
 
	`CTRL
('c')

	)

64 #ifde‡
_POSIX_VDISABLE


65 
	#CSTATUS
 
_POSIX_VDISABLE


	)

67 
	#CSTATUS
 '\0'

	)

69 
	#CKILL
 
	`CTRL
('u')

	)

70 
	#CMIN
 1

	)

71 
	#CQUIT
 034

	)

72 
	#CSUSP
 
	`CTRL
('z')

	)

73 
	#CTIME
 0

	)

74 
	#CDSUSP
 
	`CTRL
('y')

	)

75 
	#CSTART
 
	`CTRL
('q')

	)

76 
	#CSTOP
 
	`CTRL
('s')

	)

77 
	#CLNEXT
 
	`CTRL
('v')

	)

78 
	#CDISCARD
 
	`CTRL
('o')

	)

79 
	#CWERASE
 
	`CTRL
('w')

	)

80 
	#CREPRINT
 
	`CTRL
('r')

	)

81 
	#CEOT
 
CEOF


	)

83 
	#CBRK
 
CEOL


	)

84 
	#CRPRNT
 
CREPRINT


	)

85 
	#CFLUSH
 
CDISCARD


	)

93 #ifde‡
TTYDEFCHARS


94 
cc_t
 
	gâydefch¨s
[
NCCS
] = {

95 
CEOF
, 
CEOL
, CEOL, 
CERASE
, 
CWERASE
, 
CKILL
, 
CREPRINT
,

96 
_POSIX_VDISABLE
, 
CINTR
, 
CQUIT
, 
CSUSP
, 
CDSUSP
, 
CSTART
, 
CSTOP
, 
CLNEXT
,

97 
CDISCARD
, 
CMIN
, 
CTIME
, 
CSTATUS
, 
_POSIX_VDISABLE


99 #unde‡
TTYDEFCHARS


	@/usr/include/sys/ucontext.h

18 #i‚de‡
_SYS_UCONTEXT_H


19 
	#_SYS_UCONTEXT_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<sig«l.h
>

26 
	~<bôs/sigc⁄ãxt.h
>

28 #ifde‡
__x86_64__


31 
__exãnsi⁄__
 
	tgªg_t
;

34 
	#NGREG
 23

	)

37 
gªg_t
 
	tgªg£t_t
[
NGREG
];

39 #ifde‡
__USE_GNU


43 
	mREG_R8
 = 0,

44 
	#REG_R8
 
REG_R8


	)

45 
	mREG_R9
,

46 
	#REG_R9
 
REG_R9


	)

47 
	mREG_R10
,

48 
	#REG_R10
 
REG_R10


	)

49 
	mREG_R11
,

50 
	#REG_R11
 
REG_R11


	)

51 
	mREG_R12
,

52 
	#REG_R12
 
REG_R12


	)

53 
	mREG_R13
,

54 
	#REG_R13
 
REG_R13


	)

55 
	mREG_R14
,

56 
	#REG_R14
 
REG_R14


	)

57 
	mREG_R15
,

58 
	#REG_R15
 
REG_R15


	)

59 
	mREG_RDI
,

60 
	#REG_RDI
 
REG_RDI


	)

61 
	mREG_RSI
,

62 
	#REG_RSI
 
REG_RSI


	)

63 
	mREG_RBP
,

64 
	#REG_RBP
 
REG_RBP


	)

65 
	mREG_RBX
,

66 
	#REG_RBX
 
REG_RBX


	)

67 
	mREG_RDX
,

68 
	#REG_RDX
 
REG_RDX


	)

69 
	mREG_RAX
,

70 
	#REG_RAX
 
REG_RAX


	)

71 
	mREG_RCX
,

72 
	#REG_RCX
 
REG_RCX


	)

73 
	mREG_RSP
,

74 
	#REG_RSP
 
REG_RSP


	)

75 
	mREG_RIP
,

76 
	#REG_RIP
 
REG_RIP


	)

77 
	mREG_EFL
,

78 
	#REG_EFL
 
REG_EFL


	)

79 
	mREG_CSGSFS
,

80 
	#REG_CSGSFS
 
REG_CSGSFS


	)

81 
	mREG_ERR
,

82 
	#REG_ERR
 
REG_ERR


	)

83 
	mREG_TRAPNO
,

84 
	#REG_TRAPNO
 
REG_TRAPNO


	)

85 
	mREG_OLDMASK
,

86 
	#REG_OLDMASK
 
REG_OLDMASK


	)

87 
	mREG_CR2


88 
	#REG_CR2
 
REG_CR2


	)

92 
	s_libc_Âxªg


94 
	msignifiˇnd
[4];

95 
	mexp⁄ít
;

96 
	m∑ddög
[3];

99 
	s_libc_xmmªg


101 
__uöt32_t
 
	mñemít
[4];

104 
	s_libc_Â°©e


107 
__uöt16_t
 
	mcwd
;

108 
__uöt16_t
 
	mswd
;

109 
__uöt16_t
 
	m·w
;

110 
__uöt16_t
 
	mf›
;

111 
__uöt64_t
 
	mrù
;

112 
__uöt64_t
 
	mrdp
;

113 
__uöt32_t
 
	mmxc§
;

114 
__uöt32_t
 
	mmx¸_mask
;

115 
_libc_Âxªg
 
	m_°
[8];

116 
_libc_xmmªg
 
	m_xmm
[16];

117 
__uöt32_t
 
	m∑ddög
[24];

121 
_libc_Â°©e
 *
	tÂªg£t_t
;

126 
gªg£t_t
 
	mgªgs
;

128 
Âªg£t_t
 
	mÂªgs
;

129 
__exãnsi⁄__
 
	m__ª£rved1
 [8];

130 } 
	tmc⁄ãxt_t
;

133 
	suc⁄ãxt


135 
	muc_Êags
;

136 
uc⁄ãxt
 *
	muc_lök
;

137 
°ack_t
 
	muc_°ack
;

138 
mc⁄ãxt_t
 
	muc_mc⁄ãxt
;

139 
__sig£t_t
 
	muc_sigmask
;

140 
_libc_Â°©e
 
	m__Âªgs_mem
;

141 } 
	tuc⁄ãxt_t
;

146 
	tgªg_t
;

149 
	#NGREG
 19

	)

152 
gªg_t
 
	tgªg£t_t
[
NGREG
];

154 #ifde‡
__USE_GNU


158 
	mREG_GS
 = 0,

159 
	#REG_GS
 
REG_GS


	)

160 
	mREG_FS
,

161 
	#REG_FS
 
REG_FS


	)

162 
	mREG_ES
,

163 
	#REG_ES
 
REG_ES


	)

164 
	mREG_DS
,

165 
	#REG_DS
 
REG_DS


	)

166 
	mREG_EDI
,

167 
	#REG_EDI
 
REG_EDI


	)

168 
	mREG_ESI
,

169 
	#REG_ESI
 
REG_ESI


	)

170 
	mREG_EBP
,

171 
	#REG_EBP
 
REG_EBP


	)

172 
	mREG_ESP
,

173 
	#REG_ESP
 
REG_ESP


	)

174 
	mREG_EBX
,

175 
	#REG_EBX
 
REG_EBX


	)

176 
	mREG_EDX
,

177 
	#REG_EDX
 
REG_EDX


	)

178 
	mREG_ECX
,

179 
	#REG_ECX
 
REG_ECX


	)

180 
	mREG_EAX
,

181 
	#REG_EAX
 
REG_EAX


	)

182 
	mREG_TRAPNO
,

183 
	#REG_TRAPNO
 
REG_TRAPNO


	)

184 
	mREG_ERR
,

185 
	#REG_ERR
 
REG_ERR


	)

186 
	mREG_EIP
,

187 
	#REG_EIP
 
REG_EIP


	)

188 
	mREG_CS
,

189 
	#REG_CS
 
REG_CS


	)

190 
	mREG_EFL
,

191 
	#REG_EFL
 
REG_EFL


	)

192 
	mREG_UESP
,

193 
	#REG_UESP
 
REG_UESP


	)

194 
	mREG_SS


195 
	#REG_SS
 
REG_SS


	)

200 
	s_libc_Âªg


202 
	msignifiˇnd
[4];

203 
	mexp⁄ít
;

206 
	s_libc_Â°©e


208 
	mcw
;

209 
	msw
;

210 
	mèg
;

211 
	mùoff
;

212 
	mcs£l
;

213 
	md©aoff
;

214 
	md©a£l
;

215 
_libc_Âªg
 
	m_°
[8];

216 
	m°©us
;

220 
_libc_Â°©e
 *
	tÂªg£t_t
;

225 
gªg£t_t
 
	mgªgs
;

228 
Âªg£t_t
 
	mÂªgs
;

229 
	mﬁdmask
;

230 
	m¸2
;

231 } 
	tmc⁄ãxt_t
;

234 
	suc⁄ãxt


236 
	muc_Êags
;

237 
uc⁄ãxt
 *
	muc_lök
;

238 
°ack_t
 
	muc_°ack
;

239 
mc⁄ãxt_t
 
	muc_mc⁄ãxt
;

240 
__sig£t_t
 
	muc_sigmask
;

241 
_libc_Â°©e
 
	m__Âªgs_mem
;

242 } 
	tuc⁄ãxt_t
;

	@/usr/include/sys/uio.h

18 #i‚de‡
_SYS_UIO_H


19 
	#_SYS_UIO_H
 1

	)

21 
	~<„©uªs.h
>

23 
	~<sys/ty≥s.h
>

25 
	g__BEGIN_DECLS


28 
	~<bôs/uio.h
>

39 
ssize_t
 
	$ªadv
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
)

40 
__wur
;

50 
ssize_t
 
	$wrôev
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
)

51 
__wur
;

54 #ifde‡
__USE_BSD


55 #i‚de‡
__USE_FILE_OFFSET64


65 
ssize_t
 
	$¥ódv
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
,

66 
__off_t
 
__off£t
Ë
__wur
;

77 
ssize_t
 
	$pwrôev
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
,

78 
__off_t
 
__off£t
Ë
__wur
;

80 #ifde‡
__REDIRECT


81 
ssize_t
 
	`__REDIRECT
 (
¥ódv
, (
__fd
, c⁄° 
iovec
 *
__iovec
,

82 
__cou¡
, 
__off64_t
 
__off£t
),

83 
¥ódv64
Ë
__wur
;

84 
ssize_t
 
	`__REDIRECT
 (
pwrôev
, (
__fd
, c⁄° 
iovec
 *
__iovec
,

85 
__cou¡
, 
__off64_t
 
__off£t
),

86 
pwrôev64
Ë
__wur
;

88 
	#¥ódv
 
¥ódv64


	)

89 
	#pwrôev
 
pwrôev64


	)

93 #ifde‡
__USE_LARGEFILE64


103 
ssize_t
 
	$¥ódv64
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
,

104 
__off64_t
 
__off£t
Ë
__wur
;

115 
ssize_t
 
	$pwrôev64
 (
__fd
, c⁄° 
iovec
 *
__iovec
, 
__cou¡
,

116 
__off64_t
 
__off£t
Ë
__wur
;

120 
__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/asm/ioctls.h

1 
	~<asm-gíîic/io˘ls.h
>

	@/usr/include/asm/socket.h

1 
	~<asm-gíîic/sockë.h
>

	@/usr/include/bits/byteswap-16.h

19 #i‚de‡
_BITS_BYTESWAP_H


23 #ifde‡
__GNUC__


24 #i‡
__GNUC__
 >= 2

25 
	#__bsw≠_16
(
x
) \

26 (
__exãnsi⁄__
 \

27 ({ 
__v
, 
__x
 = (Ë(
x
); \

28 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

29 
__v
 = 
	`__bsw≠_c⁄°™t_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "Ù" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw≠_16
(
x
) \

39 (
__exãnsi⁄__
 \

40 ({ 
__x
 = (Ë(
x
); \

41 
	`__bsw≠_c⁄°™t_16
 (
__x
); }))

	)

44 
__ölöe
 

45 
	$__bsw≠_16
 (
__bsx
)

47  
	`__bsw≠_c⁄°™t_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/endian.h

3 #i‚de‡
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/fcntl-linux.h

19 #i‚def 
_FCNTL_H


37 #ifde‡
__USE_GNU


38 
	~<bôs/uio.h
>

42 
	#O_ACCMODE
 0003

	)

43 
	#O_RDONLY
 00

	)

44 
	#O_WRONLY
 01

	)

45 
	#O_RDWR
 02

	)

46 #i‚de‡
O_CREAT


47 
	#O_CREAT
 0100

	)

49 #i‚de‡
O_EXCL


50 
	#O_EXCL
 0200

	)

52 #i‚de‡
O_NOCTTY


53 
	#O_NOCTTY
 0400

	)

55 #i‚de‡
O_TRUNC


56 
	#O_TRUNC
 01000

	)

58 #i‚de‡
O_APPEND


59 
	#O_APPEND
 02000

	)

61 #i‚de‡
O_NONBLOCK


62 
	#O_NONBLOCK
 04000

	)

64 #i‚de‡
O_NDELAY


65 
	#O_NDELAY
 
O_NONBLOCK


	)

67 #i‚de‡
O_SYNC


68 
	#O_SYNC
 04010000

	)

70 
	#O_FSYNC
 
O_SYNC


	)

71 #i‚de‡
O_ASYNC


72 
	#O_ASYNC
 020000

	)

74 #i‚de‡
__O_LARGEFILE


75 
	#__O_LARGEFILE
 0100000

	)

78 #i‚de‡
__O_DIRECTORY


79 
	#__O_DIRECTORY
 0200000

	)

81 #i‚de‡
__O_NOFOLLOW


82 
	#__O_NOFOLLOW
 0400000

	)

84 #i‚de‡
__O_CLOEXEC


85 
	#__O_CLOEXEC
 02000000

	)

87 #i‚de‡
__O_DIRECT


88 
	#__O_DIRECT
 040000

	)

90 #i‚de‡
__O_NOATIME


91 
	#__O_NOATIME
 01000000

	)

93 #i‚de‡
__O_PATH


94 
	#__O_PATH
 010000000

	)

96 #i‚de‡
__O_DSYNC


97 
	#__O_DSYNC
 010000

	)

99 #i‚de‡
__O_TMPFILE


100 
	#__O_TMPFILE
 020200000

	)

103 #i‚de‡
F_GETLK


104 #i‚de‡
__USE_FILE_OFFSET64


105 
	#F_GETLK
 5

	)

106 
	#F_SETLK
 6

	)

107 
	#F_SETLKW
 7

	)

109 
	#F_GETLK
 
F_GETLK64


	)

110 
	#F_SETLK
 
F_SETLK64


	)

111 
	#F_SETLKW
 
F_SETLKW64


	)

114 #i‚de‡
F_GETLK64


115 
	#F_GETLK64
 12

	)

116 
	#F_SETLK64
 13

	)

117 
	#F_SETLKW64
 14

	)

120 #ifde‡
__USE_LARGEFILE64


121 
	#O_LARGEFILE
 
__O_LARGEFILE


	)

124 #ifde‡
__USE_XOPEN2K8


125 
	#O_DIRECTORY
 
__O_DIRECTORY


	)

126 
	#O_NOFOLLOW
 
__O_NOFOLLOW


	)

127 
	#O_CLOEXEC
 
__O_CLOEXEC


	)

130 #ifde‡
__USE_GNU


131 
	#O_DIRECT
 
__O_DIRECT


	)

132 
	#O_NOATIME
 
__O_NOATIME


	)

133 
	#O_PATH
 
__O_PATH


	)

134 
	#O_TMPFILE
 
__O_TMPFILE


	)

140 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


141 
	#O_DSYNC
 
__O_DSYNC


	)

142 #i‡
deföed
 
__O_RSYNC


143 
	#O_RSYNC
 
__O_RSYNC


	)

145 
	#O_RSYNC
 
O_SYNC


	)

150 
	#F_DUPFD
 0

	)

151 
	#F_GETFD
 1

	)

152 
	#F_SETFD
 2

	)

153 
	#F_GETFL
 3

	)

154 
	#F_SETFL
 4

	)

156 #i‚de‡
__F_SETOWN


157 
	#__F_SETOWN
 8

	)

158 
	#__F_GETOWN
 9

	)

161 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


162 
	#F_SETOWN
 
__F_SETOWN


	)

163 
	#F_GETOWN
 
__F_GETOWN


	)

166 #i‚de‡
__F_SETSIG


167 
	#__F_SETSIG
 10

	)

168 
	#__F_GETSIG
 11

	)

170 #i‚de‡
__F_SETOWN_EX


171 
	#__F_SETOWN_EX
 15

	)

172 
	#__F_GETOWN_EX
 16

	)

175 #ifde‡
__USE_GNU


176 
	#F_SETSIG
 
__F_SETSIG


	)

177 
	#F_GETSIG
 
__F_GETSIG


	)

178 
	#F_SETOWN_EX
 
__F_SETOWN_EX


	)

179 
	#F_GETOWN_EX
 
__F_GETOWN_EX


	)

182 #ifde‡
__USE_GNU


183 
	#F_SETLEASE
 1024

	)

184 
	#F_GETLEASE
 1025

	)

185 
	#F_NOTIFY
 1026

	)

186 
	#F_SETPIPE_SZ
 1031

	)

187 
	#F_GETPIPE_SZ
 1032

	)

189 #ifde‡
__USE_XOPEN2K8


190 
	#F_DUPFD_CLOEXEC
 1030

	)

195 
	#FD_CLOEXEC
 1

	)

197 #i‚de‡
F_RDLCK


199 
	#F_RDLCK
 0

	)

200 
	#F_WRLCK
 1

	)

201 
	#F_UNLCK
 2

	)

206 #i‚de‡
F_EXLCK


207 
	#F_EXLCK
 4

	)

208 
	#F_SHLCK
 8

	)

211 #ifde‡
__USE_BSD


213 
	#LOCK_SH
 1

	)

214 
	#LOCK_EX
 2

	)

215 
	#LOCK_NB
 4

	)

217 
	#LOCK_UN
 8

	)

220 #ifde‡
__USE_GNU


221 
	#LOCK_MAND
 32

	)

222 
	#LOCK_READ
 64

	)

223 
	#LOCK_WRITE
 128

	)

224 
	#LOCK_RW
 192

	)

227 #ifde‡
__USE_GNU


229 
	#DN_ACCESS
 0x00000001

	)

230 
	#DN_MODIFY
 0x00000002

	)

231 
	#DN_CREATE
 0x00000004

	)

232 
	#DN_DELETE
 0x00000008

	)

233 
	#DN_RENAME
 0x00000010

	)

234 
	#DN_ATTRIB
 0x00000020

	)

235 
	#DN_MULTISHOT
 0x80000000

	)

239 #ifde‡
__USE_GNU


241 
	e__pid_ty≥


243 
	mF_OWNER_TID
 = 0,

244 
	mF_OWNER_PID
,

245 
	mF_OWNER_PGRP
,

246 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


250 
	sf_ow√r_ex


252 
__pid_ty≥
 
	mty≥
;

253 
__pid_t
 
	mpid
;

259 #ifdef 
__USE_BSD


260 
	#FAPPEND
 
O_APPEND


	)

261 
	#FFSYNC
 
O_FSYNC


	)

262 
	#FASYNC
 
O_ASYNC


	)

263 
	#FNONBLOCK
 
O_NONBLOCK


	)

264 
	#FNDELAY
 
O_NDELAY


	)

267 #i‚de‡
__POSIX_FADV_DONTNEED


268 
	#__POSIX_FADV_DONTNEED
 4

	)

269 
	#__POSIX_FADV_NOREUSE
 5

	)

272 #ifde‡
__USE_XOPEN2K


273 
	#POSIX_FADV_NORMAL
 0

	)

274 
	#POSIX_FADV_RANDOM
 1

	)

275 
	#POSIX_FADV_SEQUENTIAL
 2

	)

276 
	#POSIX_FADV_WILLNEED
 3

	)

277 
	#POSIX_FADV_DONTNEED
 
__POSIX_FADV_DONTNEED


	)

278 
	#POSIX_FADV_NOREUSE
 
__POSIX_FADV_NOREUSE


	)

282 #ifde‡
__USE_GNU


284 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

287 
	#SYNC_FILE_RANGE_WRITE
 2

	)

290 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

295 
	#SPLICE_F_MOVE
 1

	)

296 
	#SPLICE_F_NONBLOCK
 2

	)

299 
	#SPLICE_F_MORE
 4

	)

300 
	#SPLICE_F_GIFT
 8

	)

304 
	#FALLOC_FL_KEEP_SIZE
 1

	)

307 
	#FALLOC_FL_PUNCH_HOLE
 2

	)

311 
	sfûe_h™dÀ


313 
	mh™dÀ_byãs
;

314 
	mh™dÀ_ty≥
;

316 
	mf_h™dÀ
[0];

320 
	#MAX_HANDLE_SZ
 128

	)

324 #ifde‡
__USE_ATFILE


325 
	#AT_FDCWD
 -100

	)

328 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

329 
	#AT_REMOVEDIR
 0x200

	)

331 
	#AT_SYMLINK_FOLLOW
 0x400

	)

332 #ifde‡
__USE_GNU


333 
	#AT_NO_AUTOMOUNT
 0x800

	)

335 
	#AT_EMPTY_PATH
 0x1000

	)

337 
	#AT_EACCESS
 0x200

	)

341 
	g__BEGIN_DECLS


343 #ifde‡
__USE_GNU


346 
ssize_t
 
	$ªadahód
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__cou¡
)

347 
__THROW
;

354 
	`sync_fûe_ønge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__cou¡
,

355 
__Êags
);

362 
ssize_t
 
	`vm•li˚
 (
__fdout
, c⁄° 
iovec
 *
__iov
,

363 
size_t
 
__cou¡
, 
__Êags
);

369 
ssize_t
 
	`•li˚
 (
__fdö
, 
__off64_t
 *
__offö
, 
__fdout
,

370 
__off64_t
 *
__offout
, 
size_t
 
__Àn
,

371 
__Êags
);

377 
ssize_t
 
	`ãe
 (
__fdö
, 
__fdout
, 
size_t
 
__Àn
,

378 
__Êags
);

384 #i‚de‡
__USE_FILE_OFFSET64


385 
	`ÁŒoˇã
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_à
__Àn
);

387 #ifde‡
__REDIRECT


388 
	`__REDIRECT
 (
ÁŒoˇã
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

389 
__off64_t
 
__Àn
),

390 
ÁŒoˇã64
);

392 
	#ÁŒoˇã
 
ÁŒoˇã64


	)

395 #ifde‡
__USE_LARGEFILE64


396 
	`ÁŒoˇã64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

397 
__off64_t
 
__Àn
);

402 
	$«me_to_h™dÀ_©
 (
__dfd
, c⁄° *
__«me
,

403 
fûe_h™dÀ
 *
__h™dÀ
, *
__m¡_id
,

404 
__Êags
Ë
__THROW
;

410 
	`›í_by_h™dÀ_©
 (
__mou¡dúfd
, 
fûe_h™dÀ
 *
__h™dÀ
,

411 
__Êags
);

415 
__END_DECLS


	@/usr/include/bits/libio-ldbl.h

19 #i‚de‡
_IO_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
_IO_vfsˇnf
)

24 
	`__LDBL_REDIR_DECL
 (
_IO_vÂrötf
)

	@/usr/include/bits/local_lim.h

24 #i‚de‡
NR_OPEN


25 
	#__undef_NR_OPEN


	)

27 #i‚de‡
LINK_MAX


28 
	#__undef_LINK_MAX


	)

30 #i‚de‡
OPEN_MAX


31 
	#__undef_OPEN_MAX


	)

33 #i‚de‡
ARG_MAX


34 
	#__undef_ARG_MAX


	)

38 
	~<löux/limôs.h
>

41 #ifde‡
__undef_NR_OPEN


42 #unde‡
NR_OPEN


43 #unde‡
__undef_NR_OPEN


46 #ifde‡
__undef_LINK_MAX


47 #unde‡
LINK_MAX


48 #unde‡
__undef_LINK_MAX


51 #ifde‡
__undef_OPEN_MAX


52 #unde‡
OPEN_MAX


53 #unde‡
__undef_OPEN_MAX


56 #ifde‡
__undef_ARG_MAX


57 #unde‡
ARG_MAX


58 #unde‡
__undef_ARG_MAX


62 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

64 
	#PTHREAD_KEYS_MAX
 1024

	)

67 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

69 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

72 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

74 #unde‡
PTHREAD_THREADS_MAX


78 
	#AIO_PRIO_DELTA_MAX
 20

	)

81 
	#PTHREAD_STACK_MIN
 16384

	)

84 
	#DELAYTIMER_MAX
 2147483647

	)

87 
	#TTY_NAME_MAX
 32

	)

90 
	#LOGIN_NAME_MAX
 256

	)

93 
	#HOST_NAME_MAX
 64

	)

96 
	#MQ_PRIO_MAX
 32768

	)

99 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/select.h

18 #i‚de‡
_SYS_SELECT_H


22 
	~<bôs/w‹dsize.h
>

25 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

27 #i‡
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "°osq"

	)

30 
	#__FD_ZERO_STOS
 "°o¶"

	)

33 
	#__FD_ZERO
(
fd•
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vﬁ©ûe__
 ("˛d;Ñï; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd•
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¨r
 = (
£t
); \

52 
__i
 = 0; __ò<  (
fd_£t
Ë/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¨r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)Ë!0)

	)

	@/usr/include/bits/select2.h

19 #i‚de‡
_SYS_SELECT_H


24 
__fdñt_chk
 (
__d
);

25 
	$__fdñt_w¨n
 (
__d
)

26 
	`__w¨«âr
 ("bit outside of fd_set selected");

27 #unde‡
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__exãnsi⁄__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__buûtö_c⁄°™t_p
 (
__d
) \

32 ? (0 <
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fdñt_w¨n
 (
__d
)) \

35 : 
	`__fdñt_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sockaddr.h

23 #i‚de‡
_BITS_SOCKADDR_H


24 
	#_BITS_SOCKADDR_H
 1

	)

28 
	tß_Ámûy_t
;

34 
	#__SOCKADDR_COMMON
(
ß_¥efix
) \

35 
ß_Ámûy_t
 
ß_¥efix
##
Ámûy


	)

37 
	#__SOCKADDR_COMMON_SIZE
 ( ())

	)

	@/usr/include/bits/socket_type.h

19 #i‚de‡
_SYS_SOCKET_H


24 
	e__sockë_ty≥


26 
	mSOCK_STREAM
 = 1,

28 
	#SOCK_STREAM
 
SOCK_STREAM


	)

29 
	mSOCK_DGRAM
 = 2,

31 
	#SOCK_DGRAM
 
SOCK_DGRAM


	)

32 
	mSOCK_RAW
 = 3,

33 
	#SOCK_RAW
 
SOCK_RAW


	)

34 
	mSOCK_RDM
 = 4,

35 
	#SOCK_RDM
 
SOCK_RDM


	)

36 
	mSOCK_SEQPACKET
 = 5,

38 
	#SOCK_SEQPACKET
 
SOCK_SEQPACKET


	)

39 
	mSOCK_DCCP
 = 6,

40 
	#SOCK_DCCP
 
SOCK_DCCP


	)

41 
	mSOCK_PACKET
 = 10,

44 
	#SOCK_PACKET
 
SOCK_PACKET


	)

49 
	mSOCK_CLOEXEC
 = 02000000,

51 
	#SOCK_CLOEXEC
 
SOCK_CLOEXEC


	)

52 
	mSOCK_NONBLOCK
 = 00004000

54 
	#SOCK_NONBLOCK
 
SOCK_NONBLOCK


	)

	@/usr/include/bits/stdio-lock.h

19 #i‚de‡
_BITS_STDIO_LOCK_H


20 
	#_BITS_STDIO_LOCK_H
 1

	)

22 
	~<bôs/libc-lock.h
>

23 
	~<lowÀvñlock.h
>

27 
	#_IO_lock_öex≥nsive
 1

	)

29 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t_IO_lock_t
;

31 
	#_IO_lock_öôülizî
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

33 
	#_IO_lock_öô
(
_«me
) \

34 ((
_«me
Ë(
_IO_lock_t
Ë
_IO_lock_öôülizî
 , 0)

	)

36 
	#_IO_lock_föi
(
_«me
) \

37 ((Ë0)

	)

39 
	#_IO_lock_lock
(
_«me
) \

41 *
__£lf
 = 
THREAD_SELF
; \

42 i‡((
_«me
).
ow√r
 !
__£lf
) \

44 
	`Œl_lock
 ((
_«me
).
lock
, 
LLL_PRIVATE
); \

45 (
_«me
).
ow√r
 = 
__£lf
; \

47 ++(
_«me
).
˙t
; \

48 } 0)

	)

50 
	#_IO_lock_åylock
(
_«me
) \

52 
__ªsu…
 = 0; \

53 *
__£lf
 = 
THREAD_SELF
; \

54 i‡((
_«me
).
ow√r
 !
__£lf
) \

56 i‡(
	`Œl_åylock
 ((
_«me
).
lock
) == 0) \

58 (
_«me
).
ow√r
 = 
__£lf
; \

59 (
_«me
).
˙t
 = 1; \

62 
__ªsu…
 = 
EBUSY
; \

65 ++(
_«me
).
˙t
; \

66 
__ªsu…
; \

67 })

	)

69 
	#_IO_lock_u∆ock
(
_«me
) \

71 i‡(--(
_«me
).
˙t
 == 0) \

73 (
_«me
).
ow√r
 = 
NULL
; \

74 
	`Œl_u∆ock
 ((
_«me
).
lock
, 
LLL_PRIVATE
); \

76 } 0)

	)

80 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
) \

81 
	`__libc_˛ónup_ªgi⁄_°¨t
 (((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0, 
_f˘
, _Â)

	)

82 
	#_IO_˛ónup_ªgi⁄_°¨t_nﬂrg
(
_f˘
) \

83 
	`__libc_˛ónup_ªgi⁄_°¨t
 (1, 
_f˘
, 
NULL
)

	)

84 
	#_IO_˛ónup_ªgi⁄_íd
(
_doô
) \

85 
	`__libc_˛ónup_ªgi⁄_íd
 (
_doô
)

	)

87 #i‡
deföed
 
_LIBC
 && !deföed 
NOT_IN_libc


89 #ifde‡
__EXCEPTIONS


90 
	#_IO_acquúe_lock
(
_Â
) \

92 
_IO_FILE
 *
_IO_acquúe_lock_fûe
 \

93 
	`__©åibuã__
((
	`˛ónup
 (
_IO_acquúe_lock_f˘
))) \

94 (
_Â
); \

95 
	`_IO_Êockfûe
 (
_IO_acquúe_lock_fûe
);

	)

96 
	#_IO_acquúe_lock_˛ór_Êags2
(
_Â
) \

98 
_IO_FILE
 *
_IO_acquúe_lock_fûe
 \

99 
	`__©åibuã__
((
	`˛ónup
 (
_IO_acquúe_lock_˛ór_Êags2_f˘
))) \

100 (
_Â
); \

101 
	`_IO_Êockfûe
 (
_IO_acquúe_lock_fûe
);

	)

103 
	#_IO_acquúe_lock
(
_Â
Ë
_IO_acquúe_lock_√eds_ex˚±i⁄s_íabÀd


	)

104 
	#_IO_acquúe_lock_˛ór_Êags2
(
_Â
Ë
	`_IO_acquúe_lock
 (_Â)

	)

106 
	#_IO_ªÀa£_lock
(
_Â
Ë; } 0)

	)

	@/usr/include/bits/timex.h

18 #i‚def 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<bôs/ty≥s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysˇŒ_¶⁄g_t
 
	moff£t
;

29 
__sysˇŒ_¶⁄g_t
 
	m‰eq
;

30 
__sysˇŒ_¶⁄g_t
 
	mmaxîr‹
;

31 
__sysˇŒ_¶⁄g_t
 
	me°îr‹
;

32 
	m°©us
;

33 
__sysˇŒ_¶⁄g_t
 
	mc⁄°™t
;

34 
__sysˇŒ_¶⁄g_t
 
	m¥ecisi⁄
;

35 
__sysˇŒ_¶⁄g_t
 
	mtﬁî™˚
;

36 
timevÆ
 
	mtime
;

37 
__sysˇŒ_¶⁄g_t
 
	mtick
;

38 
__sysˇŒ_¶⁄g_t
 
	mµs‰eq
;

39 
__sysˇŒ_¶⁄g_t
 
	mjôãr
;

40 
	mshi·
;

41 
__sysˇŒ_¶⁄g_t
 
	m°abû
;

42 
__sysˇŒ_¶⁄g_t
 
	mjô˙t
;

43 
__sysˇŒ_¶⁄g_t
 
	mˇl˙t
;

44 
__sysˇŒ_¶⁄g_t
 
	mîr˙t
;

45 
__sysˇŒ_¶⁄g_t
 
	m°b˙t
;

47 
	mèi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/typesizes.h

19 #i‚de‡
_BITS_TYPES_H


23 #i‚def 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifde‡
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 såu˘ { 
__vÆ
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifde‡
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/uio.h

18 #i‡!
deföed
 
_SYS_UIO_H
 && !deföed 
_FCNTL_H


22 #i‚de‡
_BITS_UIO_H


23 
	#_BITS_UIO_H
 1

	)

25 
	~<sys/ty≥s.h
>

39 
	#UIO_MAXIOV
 1024

	)

43 
	siovec


45 *
	miov_ba£
;

46 
size_t
 
	miov_Àn
;

52 #ifde‡
__USE_GNU


53 #i‡
deföed
 
_SYS_UIO_H
 && !deföed 
_BITS_UIO_H_FOR_SYS_UIO_H


54 
	#_BITS_UIO_H_FOR_SYS_UIO_H
 1

	)

56 
__BEGIN_DECLS


59 
ssize_t
 
	$¥o˚ss_vm_ªadv
 (
pid_t
 
__pid
, c⁄° 
iovec
 *
__lvec
,

60 
__liov˙t
,

61 c⁄° 
iovec
 *
__rvec
,

62 
__riov˙t
,

63 
__Êags
)

64 
__THROW
;

67 
ssize_t
 
	$¥o˚ss_vm_wrôev
 (
pid_t
 
__pid
, c⁄° 
iovec
 *
__lvec
,

68 
__liov˙t
,

69 c⁄° 
iovec
 *
__rvec
,

70 
__riov˙t
,

71 
__Êags
)

72 
__THROW
;

74 
__END_DECLS


	@/usr/include/gnu/stubs.h

6 #i‡!
deföed
 
__x86_64__


7 
	~<gnu/°ubs-32.h
>

9 #i‡
deföed
 
__x86_64__
 && deföed 
__LP64__


10 
	~<gnu/°ubs-64.h
>

12 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


13 
	~<gnu/°ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/î∫o.h
>

	@/usr/include/linux/limits.h

1 #i‚de‡
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/linux/param.h

1 #i‚de‡
_LINUX_PARAM_H


2 
	#_LINUX_PARAM_H


	)

4 
	~<asm/∑øm.h
>

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty≥s.h
>

6 #i‚de‡
__ASSEMBLY__


8 
	~<löux/posix_ty≥s.h
>

16 #ifde‡
__CHECKER__


17 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

19 
	#__bôwi£__


	)

21 #ifde‡
__CHECK_ENDIAN__


22 
	#__bôwi£
 
__bôwi£__


	)

24 
	#__bôwi£


	)

27 
__u16
 
	t__bôwi£
 
	t__À16
;

28 
__u16
 
	t__bôwi£
 
	t__be16
;

29 
__u32
 
	t__bôwi£
 
	t__À32
;

30 
__u32
 
	t__bôwi£
 
	t__be32
;

31 
__u64
 
	t__bôwi£
 
	t__À64
;

32 
__u64
 
	t__bôwi£
 
	t__be64
;

34 
__u16
 
	t__bôwi£
 
	t__sum16
;

35 
__u32
 
	t__bôwi£
 
	t__wsum
;

46 
	#__Æig√d_u64
 
__u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

47 
	#__Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

48 
	#__Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/asm-generic/ioctls.h

1 #i‚de‡
__ASM_GENERIC_IOCTLS_H


2 
	#__ASM_GENERIC_IOCTLS_H


	)

4 
	~<löux/io˘l.h
>

19 
	#TCGETS
 0x5401

	)

20 
	#TCSETS
 0x5402

	)

21 
	#TCSETSW
 0x5403

	)

22 
	#TCSETSF
 0x5404

	)

23 
	#TCGETA
 0x5405

	)

24 
	#TCSETA
 0x5406

	)

25 
	#TCSETAW
 0x5407

	)

26 
	#TCSETAF
 0x5408

	)

27 
	#TCSBRK
 0x5409

	)

28 
	#TCXONC
 0x540A

	)

29 
	#TCFLSH
 0x540B

	)

30 
	#TIOCEXCL
 0x540C

	)

31 
	#TIOCNXCL
 0x540D

	)

32 
	#TIOCSCTTY
 0x540E

	)

33 
	#TIOCGPGRP
 0x540F

	)

34 
	#TIOCSPGRP
 0x5410

	)

35 
	#TIOCOUTQ
 0x5411

	)

36 
	#TIOCSTI
 0x5412

	)

37 
	#TIOCGWINSZ
 0x5413

	)

38 
	#TIOCSWINSZ
 0x5414

	)

39 
	#TIOCMGET
 0x5415

	)

40 
	#TIOCMBIS
 0x5416

	)

41 
	#TIOCMBIC
 0x5417

	)

42 
	#TIOCMSET
 0x5418

	)

43 
	#TIOCGSOFTCAR
 0x5419

	)

44 
	#TIOCSSOFTCAR
 0x541A

	)

45 
	#FIONREAD
 0x541B

	)

46 
	#TIOCINQ
 
FIONREAD


	)

47 
	#TIOCLINUX
 0x541C

	)

48 
	#TIOCCONS
 0x541D

	)

49 
	#TIOCGSERIAL
 0x541E

	)

50 
	#TIOCSSERIAL
 0x541F

	)

51 
	#TIOCPKT
 0x5420

	)

52 
	#FIONBIO
 0x5421

	)

53 
	#TIOCNOTTY
 0x5422

	)

54 
	#TIOCSETD
 0x5423

	)

55 
	#TIOCGETD
 0x5424

	)

56 
	#TCSBRKP
 0x5425

	)

57 
	#TIOCSBRK
 0x5427

	)

58 
	#TIOCCBRK
 0x5428

	)

59 
	#TIOCGSID
 0x5429

	)

60 
	#TCGETS2
 
	`_IOR
('T', 0x2A, 
ãrmios2
)

	)

61 
	#TCSETS2
 
	`_IOW
('T', 0x2B, 
ãrmios2
)

	)

62 
	#TCSETSW2
 
	`_IOW
('T', 0x2C, 
ãrmios2
)

	)

63 
	#TCSETSF2
 
	`_IOW
('T', 0x2D, 
ãrmios2
)

	)

64 
	#TIOCGRS485
 0x542E

	)

65 #i‚de‡
TIOCSRS485


66 
	#TIOCSRS485
 0x542F

	)

68 
	#TIOCGPTN
 
	`_IOR
('T', 0x30, Ë

	)

69 
	#TIOCSPTLCK
 
	`_IOW
('T', 0x31, Ë

	)

70 
	#TIOCGDEV
 
	`_IOR
('T', 0x32, Ë

	)

71 
	#TCGETX
 0x5432

	)

72 
	#TCSETX
 0x5433

	)

73 
	#TCSETXF
 0x5434

	)

74 
	#TCSETXW
 0x5435

	)

75 
	#TIOCSIG
 
	`_IOW
('T', 0x36, Ë

	)

76 
	#TIOCVHANGUP
 0x5437

	)

77 
	#TIOCGPKT
 
	`_IOR
('T', 0x38, Ë

	)

78 
	#TIOCGPTLCK
 
	`_IOR
('T', 0x39, Ë

	)

79 
	#TIOCGEXCL
 
	`_IOR
('T', 0x40, Ë

	)

81 
	#FIONCLEX
 0x5450

	)

82 
	#FIOCLEX
 0x5451

	)

83 
	#FIOASYNC
 0x5452

	)

84 
	#TIOCSERCONFIG
 0x5453

	)

85 
	#TIOCSERGWILD
 0x5454

	)

86 
	#TIOCSERSWILD
 0x5455

	)

87 
	#TIOCGLCKTRMIOS
 0x5456

	)

88 
	#TIOCSLCKTRMIOS
 0x5457

	)

89 
	#TIOCSERGSTRUCT
 0x5458

	)

90 
	#TIOCSERGETLSR
 0x5459

	)

91 
	#TIOCSERGETMULTI
 0x545A

	)

92 
	#TIOCSERSETMULTI
 0x545B

	)

94 
	#TIOCMIWAIT
 0x545C

	)

95 
	#TIOCGICOUNT
 0x545D

	)

101 #i‚de‡
FIOQSIZE


102 
	#FIOQSIZE
 0x5460

	)

106 
	#TIOCPKT_DATA
 0

	)

107 
	#TIOCPKT_FLUSHREAD
 1

	)

108 
	#TIOCPKT_FLUSHWRITE
 2

	)

109 
	#TIOCPKT_STOP
 4

	)

110 
	#TIOCPKT_START
 8

	)

111 
	#TIOCPKT_NOSTOP
 16

	)

112 
	#TIOCPKT_DOSTOP
 32

	)

113 
	#TIOCPKT_IOCTL
 64

	)

115 
	#TIOCSER_TEMT
 0x01

	)

	@/usr/include/asm-generic/socket.h

1 #i‚de‡
__ASM_GENERIC_SOCKET_H


2 
	#__ASM_GENERIC_SOCKET_H


	)

4 
	~<asm/sockios.h
>

7 
	#SOL_SOCKET
 1

	)

9 
	#SO_DEBUG
 1

	)

10 
	#SO_REUSEADDR
 2

	)

11 
	#SO_TYPE
 3

	)

12 
	#SO_ERROR
 4

	)

13 
	#SO_DONTROUTE
 5

	)

14 
	#SO_BROADCAST
 6

	)

15 
	#SO_SNDBUF
 7

	)

16 
	#SO_RCVBUF
 8

	)

17 
	#SO_SNDBUFFORCE
 32

	)

18 
	#SO_RCVBUFFORCE
 33

	)

19 
	#SO_KEEPALIVE
 9

	)

20 
	#SO_OOBINLINE
 10

	)

21 
	#SO_NO_CHECK
 11

	)

22 
	#SO_PRIORITY
 12

	)

23 
	#SO_LINGER
 13

	)

24 
	#SO_BSDCOMPAT
 14

	)

25 
	#SO_REUSEPORT
 15

	)

26 #i‚de‡
SO_PASSCRED


27 
	#SO_PASSCRED
 16

	)

28 
	#SO_PEERCRED
 17

	)

29 
	#SO_RCVLOWAT
 18

	)

30 
	#SO_SNDLOWAT
 19

	)

31 
	#SO_RCVTIMEO
 20

	)

32 
	#SO_SNDTIMEO
 21

	)

36 
	#SO_SECURITY_AUTHENTICATION
 22

	)

37 
	#SO_SECURITY_ENCRYPTION_TRANSPORT
 23

	)

38 
	#SO_SECURITY_ENCRYPTION_NETWORK
 24

	)

40 
	#SO_BINDTODEVICE
 25

	)

43 
	#SO_ATTACH_FILTER
 26

	)

44 
	#SO_DETACH_FILTER
 27

	)

45 
	#SO_GET_FILTER
 
SO_ATTACH_FILTER


	)

47 
	#SO_PEERNAME
 28

	)

48 
	#SO_TIMESTAMP
 29

	)

49 
	#SCM_TIMESTAMP
 
SO_TIMESTAMP


	)

51 
	#SO_ACCEPTCONN
 30

	)

53 
	#SO_PEERSEC
 31

	)

54 
	#SO_PASSSEC
 34

	)

55 
	#SO_TIMESTAMPNS
 35

	)

56 
	#SCM_TIMESTAMPNS
 
SO_TIMESTAMPNS


	)

58 
	#SO_MARK
 36

	)

60 
	#SO_TIMESTAMPING
 37

	)

61 
	#SCM_TIMESTAMPING
 
SO_TIMESTAMPING


	)

63 
	#SO_PROTOCOL
 38

	)

64 
	#SO_DOMAIN
 39

	)

66 
	#SO_RXQ_OVFL
 40

	)

68 
	#SO_WIFI_STATUS
 41

	)

69 
	#SCM_WIFI_STATUS
 
SO_WIFI_STATUS


	)

70 
	#SO_PEEK_OFF
 42

	)

73 
	#SO_NOFCS
 43

	)

75 
	#SO_LOCK_FILTER
 44

	)

77 
	#SO_SELECT_ERR_QUEUE
 45

	)

79 
	#SO_BUSY_POLL
 46

	)

81 
	#SO_MAX_PACING_RATE
 47

	)

	@/usr/include/asm/errno.h

1 
	~<asm-gíîic/î∫o.h
>

	@/usr/include/asm/param.h

1 
	~<asm-gíîic/∑øm.h
>

	@/usr/include/asm/types.h

1 #i‚de‡
_ASM_X86_TYPES_H


2 
	#_ASM_X86_TYPES_H


	)

4 
	~<asm-gíîic/ty≥s.h
>

	@/usr/include/bits/libc-lock.h

19 #i‚de‡
_BITS_LIBC_LOCK_H


20 
	#_BITS_LIBC_LOCK_H
 1

	)

22 
	~<±hªad.h
>

23 
	#__√ed_NULL


	)

24 
	~<°ddef.h
>

27 #ifde‡
_LIBC


28 
	~<lowÀvñlock.h
>

29 
	~<és.h
>

30 
	~<±hªad-fun˘i⁄s.h
>

31 
	~<î∫o.h
>

32 
	~<gnu/›ti⁄-groups.h
>

36 #i‡
deföed
 
_LIBC
 || deföed 
_IO_MTSAFE_IO


37 #i‡(
deföed
 
NOT_IN_libc
 && !deföed 
IS_IN_lib±hªad
Ë|| !deföed 
_LIBC


38 °ru˘ { 
±hªad_muãx_t
 
	mmuãx
; } 
	t__libc_lock_ªcursive_t
;

40 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t__libc_lock_ªcursive_t
;

43 
__libc_lock_ªcursive_›aque__
 
	t__libc_lock_ªcursive_t
;

53 
	#__libc_lock_deföe_ªcursive
(
CLASS
,
NAME
) \

54 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

58 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

59 #i‡
LLL_LOCK_INITIALIZER
 == 0

60 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

61 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

63 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

64 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

66 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

67 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

69 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

70 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

71 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

72 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

76 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

77 
	#__libc_lock_öô_ªcursive
(
NAME
) \

78 ((
NAME
Ë(
__libc_lock_ªcursive_t
Ë
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

80 
	#__libc_lock_öô_ªcursive
(
NAME
) \

82 i‡(
__±hªad_muãx_öô
 !
NULL
) \

84 
±hªad_muãx©å_t
 
__©å
; \

85 
	`__±hªad_muãx©å_öô
 (&
__©å
); \

86 
	`__±hªad_muãx©å_£ây≥
 (&
__©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

87 
	`__±hªad_muãx_öô
 (&(
NAME
).
muãx
, &
__©å
); \

88 
	`__±hªad_muãx©å_de°roy
 (&
__©å
); \

90 } 0)

	)

94 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

95 
	#__libc_lock_föi_ªcursive
(
NAME
Ë((Ë0)

	)

97 
	#__libc_lock_föi_ªcursive
(
NAME
) \

98 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_de°roy
, (&(
NAME
).
muãx
), 0)

	)

102 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

103 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

107 
__libc_lock_lock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

108 
libc_hiddí_¥Ÿo
 (
__libc_lock_lock_ªcursive_‚
);

110 #i‡
__OPTION_EGLIBC_BIG_MACROS


111 
	#__libc_lock_lock_ªcursive
(
NAME
) \

113 *
£lf
 = 
THREAD_SELF
; \

114 i‡((
NAME
).
ow√r
 !
£lf
) \

116 
	`Œl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

117 (
NAME
).
ow√r
 = 
£lf
; \

119 ++(
NAME
).
˙t
; \

120 } 0)

	)

122 
	#__libc_lock_lock_ªcursive
(
NAME
) \

123 
	`__libc_lock_lock_ªcursive_‚
 (&(
NAME
))

	)

126 
	#__libc_lock_lock_ªcursive
(
NAME
) \

127 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
).
muãx
), 0)

	)

131 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

132 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

136 
__libc_lock_åylock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

137 
libc_hiddí_¥Ÿo
 (
__libc_lock_åylock_ªcursive_‚
);

139 #i‡
__OPTION_EGLIBC_BIG_MACROS


140 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

142 
ªsu…
 = 0; \

143 *
£lf
 = 
THREAD_SELF
; \

144 i‡((
NAME
).
ow√r
 !
£lf
) \

146 i‡(
	`Œl_åylock
 ((
NAME
).
lock
) == 0) \

148 (
NAME
).
ow√r
 = 
£lf
; \

149 (
NAME
).
˙t
 = 1; \

152 
ªsu…
 = 
EBUSY
; \

155 ++(
NAME
).
˙t
; \

156 
ªsu…
; \

157 })

	)

159 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

160 
	`__libc_lock_åylock_ªcursive_‚
 (&(
NAME
))

	)

163 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

164 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
).
muãx
), 0)

	)

168 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

169 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

173 
__libc_lock_u∆ock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

174 
libc_hiddí_¥Ÿo
 (
__libc_lock_u∆ock_ªcursive_‚
);

176 #i‡
__OPTION_EGLIBC_BIG_MACROS


178 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

180 i‡(--(
NAME
).
˙t
 == 0) \

182 (
NAME
).
ow√r
 = 
NULL
; \

183 
	`Œl_u∆ock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

185 } 0)

	)

187 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

188 
	`__libc_lock_u∆ock_ªcursive_‚
 (&(
NAME
))

	)

191 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

192 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
).
muãx
), 0)

	)

199 
_±hªad_˛ónup_push_de„r
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

200 (*
routöe
Ë(*), *
¨g
);

201 
	`_±hªad_˛ónup_p›_ª°‹e
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

202 
execuã
);

205 
	#__libc_˛ónup_ªgi⁄_°¨t
(
DOIT
, 
FCT
, 
ARG
) \

206 { 
_±hªad_˛ónup_buf„r
 
_buf„r
; \

207 
_avaû
; \

208 i‡(
DOIT
) { \

209 
_avaû
 = 
	`PTFAVAIL
 (
_±hªad_˛ónup_push_de„r
); \

210 i‡(
_avaû
) { \

211 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_push_de„r
, (&
_buf„r
, 
FCT
, \

212 
ARG
)); \

214 
_buf„r
.
__routöe
 = (
FCT
); \

215 
_buf„r
.
__¨g
 = (
ARG
); \

218 
_avaû
 = 0; \

219 }

	)

222 
	#__libc_˛ónup_ªgi⁄_íd
(
DOIT
) \

223 i‡(
_avaû
) { \

224 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_p›_ª°‹e
, (&
_buf„r
, 
DOIT
));\

225 } i‡(
DOIT
) \

226 
_buf„r
.
	`__routöe
 (_buf„r.
__¨g
); \

227 
	}

	)
}

232 #ifde‡
_LIBC


233 
	~"libc-lockP.h
"

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gc⁄v_°ï
;

65 
	g__gc⁄v_°ï_d©a
;

66 
	g__gc⁄v_lﬂded_obje˘
;

67 
	g__gc⁄v_å™s_d©a
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

85 
	t__gc⁄v_°ï_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
) (*, const *,

97 (*
	t__gc⁄v_å™s_quîy_f˘
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

102 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

104 
	s__gc⁄v_å™s_d©a


107 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

108 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

109 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

110 *
__d©a
;

111 
__gc⁄v_å™s_d©a
 *
__√xt
;

116 
	s__gc⁄v_°ï


118 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

119 c⁄° *
__mod«me
;

121 
__cou¡î
;

123 *
__‰om_«me
;

124 *
__to_«me
;

126 
__gc⁄v_f˘
 
__f˘
;

127 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

128 
__gc⁄v_öô_f˘
 
__öô_f˘
;

129 
__gc⁄v_íd_f˘
 
__íd_f˘
;

133 
__mö_√eded_‰om
;

134 
__max_√eded_‰om
;

135 
__mö_√eded_to
;

136 
__max_√eded_to
;

139 
__°©eful
;

141 *
__d©a
;

146 
	s__gc⁄v_°ï_d©a


148 *
__outbuf
;

149 *
__outbu„nd
;

153 
__Êags
;

157 
__övoˇti⁄_cou¡î
;

161 
__öã∫Æ_u£
;

163 
__mb°©e_t
 *
__°©ï
;

164 
__mb°©e_t
 
__°©e
;

168 
__gc⁄v_å™s_d©a
 *
__å™s
;

173 
	s__gc⁄v_öfo


175 
size_t
 
__n°ïs
;

176 
__gc⁄v_°ï
 *
__°ïs
;

177 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

178 } *
	t__gc⁄v_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_chÊags


	)

11 
	#__°ub_Áâach


	)

12 
	#__°ub_fchÊags


	)

13 
	#__°ub_fdëach


	)

14 
	#__°ub_gây


	)

15 
	#__°ub_lchmod


	)

16 
	#__°ub_ªvoke


	)

17 
	#__°ub_£éogö


	)

18 
	#__°ub_sigªtu∫


	)

19 
	#__°ub_s°k


	)

20 
	#__°ub_°ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_bdÊush


	)

11 
	#__°ub_chÊags


	)

12 
	#__°ub_Áâach


	)

13 
	#__°ub_fchÊags


	)

14 
	#__°ub_fdëach


	)

15 
	#__°ub_gëmsg


	)

16 
	#__°ub_gây


	)

17 
	#__°ub_lchmod


	)

18 
	#__°ub_putmsg


	)

19 
	#__°ub_ªvoke


	)

20 
	#__°ub_£éogö


	)

21 
	#__°ub_sigªtu∫


	)

22 
	#__°ub_s°k


	)

23 
	#__°ub_°ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_bdÊush


	)

11 
	#__°ub_chÊags


	)

12 
	#__°ub_¸óã_moduÀ


	)

13 
	#__°ub_Áâach


	)

14 
	#__°ub_fchÊags


	)

15 
	#__°ub_fdëach


	)

16 
	#__°ub_gë_kî√l_syms


	)

17 
	#__°ub_gëmsg


	)

18 
	#__°ub_gây


	)

19 
	#__°ub_lchmod


	)

20 
	#__°ub_nfs£rv˘l


	)

21 
	#__°ub_putmsg


	)

22 
	#__°ub_quîy_moduÀ


	)

23 
	#__°ub_ªvoke


	)

24 
	#__°ub_£éogö


	)

25 
	#__°ub_sigªtu∫


	)

26 
	#__°ub_s°k


	)

27 
	#__°ub_°ty


	)

28 
	#__°ub_u£lib


	)

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__FD_SETSIZE


22 
	#__FD_SETSIZE
 1024

	)

25 
	mfds_bôs
[
__FD_SETSIZE
 / (8 * ())];

26 } 
	t__kî√l_fd_£t
;

29 (*
	t__kî√l_sigh™dÀr_t
)();

32 
	t__kî√l_key_t
;

33 
	t__kî√l_mqd_t
;

35 
	~<asm/posix_ty≥s.h
>

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

150 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

151 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

158 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

159 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

164 
__THROW
 
__©åibuã_puª__
;

166 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©åibuã_puª__
;

168 
__END_NAMESPACE_STD


170 #ifde‡
__USE_XOPEN2K8


172 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

175 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

176 
size_t
 
__n
Ë
__THROW
;

180 
	~<xloˇÀ.h
>

182 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

183 
__loˇÀ_t
 
__loc
Ë
__THROW
;

185 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

196 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

197 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifde‡
__USE_XOPEN2K8


206 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

207 
__loˇÀ_t
 
__loc
Ë
__THROW
;

212 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

213 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

216 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
__©åibuã_puª__
;

231 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

233 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
__©åibuã_puª__
;

240 
__END_NAMESPACE_STD


242 #ifde‡
__USE_GNU


245 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

246 
__THROW
 
__©åibuã_puª__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

253 
__THROW
 
__©åibuã_puª__
;

256 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

257 
__THROW
 
__©åibuã_puª__
;

259 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

262 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

263 c⁄° 
wch¨_t
 *
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

266 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

267 
__THROW
 
__©åibuã_puª__
;

270 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

273 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

274 c⁄° 
wch¨_t
 *
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

277 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

278 
__THROW
 
__©åibuã_puª__
;

282 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

283 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

284 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

287 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

288 
__END_NAMESPACE_STD


290 #ifde‡
__USE_XOPEN


292 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

295 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

296 c⁄° 
wch¨_t
 *
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

299 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

300 
__THROW
 
__©åibuã_puª__
;

304 #ifde‡
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

307 
__THROW
 
__©åibuã_puª__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

316 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

320 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©åibuã_puª__
;

325 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©åibuã_puª__
;

329 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

330 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

334 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifde‡
__USE_GNU


344 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

345 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

357 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

361 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

365 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

366 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

367 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

370 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

371 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

374 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

376 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

377 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifde‡
__USE_EXTERN_INLINES


386 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

387 
__exã∫_ölöe
 
wöt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

392 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

393 
__exã∫_ölöe
 

394 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

395 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

396 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

398 
__exã∫_ölöe
 
size_t


399 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

400 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

401 {  (
__ps
 !
NULL


402 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

409 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

410 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

414 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

415 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

416 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

424 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

425 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

429 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

430 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

431 
size_t
 
__nwc
, size_à
__Àn
,

432 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

437 #ifde‡
__USE_XOPEN


439 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

443 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

451 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifde‡
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

458 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

459 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

460 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

469 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

473 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

474 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifde‡
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__exãnsi⁄__


483 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

484 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

485 
__THROW
;

489 
__exãnsi⁄__


490 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

491 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

492 
__ba£
Ë
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifde‡
__USE_GNU


499 
__exãnsi⁄__


500 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

501 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

502 
__THROW
;

506 
__exãnsi⁄__


507 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

508 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

509 
__ba£
Ë
__THROW
;

512 #ifde‡
__USE_GNU


526 
	~<xloˇÀ.h
>

530 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

531 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

532 
__loˇÀ_t
 
__loc
Ë
__THROW
;

534 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

535 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

536 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

538 
__exãnsi⁄__


539 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

540 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

541 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

543 
__exãnsi⁄__


544 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

545 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

546 
__ba£
, 
__loˇÀ_t
 
__loc
)

547 
__THROW
;

549 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

550 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

551 
__THROW
;

553 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

554 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

555 
__THROW
;

557 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

558 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

559 
__loˇÀ_t
 
__loc
Ë
__THROW
;

563 #ifde‡
__USE_XOPEN2K8


566 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

567 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

571 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

572 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

583 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

594 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

595 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

601 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

605 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

606 
__THROW
 ;

612 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

613 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

614 
__gnuc_va_li°
 
__¨g
)

620 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

621 
__gnuc_va_li°
 
__¨g
)

625 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

626 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

627 
__gnuc_va_li°
 
__¨g
)

628 
__THROW
 ;

635 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

636 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

642 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

646 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

647 
__THROW
 ;

649 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

650 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

651 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

652 #ifde‡
__REDIRECT


656 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

657 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

658 
__isoc99_fwsˇnf
)

660 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_wsˇnf
)

663 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

664 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

665 ...), 
__isoc99_swsˇnf
)

668 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

669 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

670 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

671 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

673 
__THROW
;

674 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

675 
	#wsˇnf
 
__isoc99_wsˇnf


	)

676 
	#swsˇnf
 
__isoc99_swsˇnf


	)

680 
__END_NAMESPACE_STD


683 #ifde‡
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

690 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

691 
__gnuc_va_li°
 
__¨g
)

697 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

698 
__gnuc_va_li°
 
__¨g
)

701 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

702 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

703 
__gnuc_va_li°
 
__¨g
)

704 
__THROW
 ;

706 #i‡!
deföed
 
__USE_GNU
 \

707 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

708 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

709 #ifde‡
__REDIRECT


710 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

711 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

712 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

714 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

717 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

718 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

719 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

722 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

723 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

724 
__gnuc_va_li°
 
__¨g
);

725 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

726 
__gnuc_va_li°
 
__¨g
);

727 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

728 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

730 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

731 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

732 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

746 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

752 
wöt_t
 
	`gëwch¨
 ();

759 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

760 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

766 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

774 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

775 
__FILE
 *
__ª°ri˘
 
__°ªam
);

781 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

782 
__FILE
 *
__ª°ri˘
 
__°ªam
);

789 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

790 
__END_NAMESPACE_STD


793 #ifde‡
__USE_GNU


801 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

802 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

810 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

818 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

827 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

828 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

837 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

838 
__FILE
 *
__ª°ri˘
 
__°ªam
);

846 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

847 
__FILE
 *
__ª°ri˘
 
__°ªam
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

856 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

857 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifde‡
__USE_GNU


861 
	~<xloˇÀ.h
>

865 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

866 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

867 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

868 
__loˇÀ_t
 
__loc
Ë
__THROW
;

877 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


878 
	#__√ed_iswxxx


	)

879 
	~<w˘y≥.h
>

883 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


884 
	~<bôs/wch¨2.h
>

887 #ifde‡
__LDBL_COMPAT


888 
	~<bôs/wch¨-ldbl.h
>

891 
__END_DECLS


899 #unde‡
__√ed_mb°©e_t


900 #unde‡
__√ed_wöt_t


	@/usr/include/asm-generic/errno.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

111 
	#EHWPOISON
 133

	)

	@/usr/include/asm-generic/param.h

1 #i‚de‡
__ASM_GENERIC_PARAM_H


2 
	#__ASM_GENERIC_PARAM_H


	)

4 #i‚de‡
HZ


5 
	#HZ
 100

	)

8 #i‚de‡
EXEC_PAGESIZE


9 
	#EXEC_PAGESIZE
 4096

	)

12 #i‚de‡
NOGROUP


13 
	#NOGROUP
 (-1)

	)

16 
	#MAXHOSTNAMELEN
 64

	)

	@/usr/include/asm-generic/types.h

1 #i‚de‡
_ASM_GENERIC_TYPES_H


2 
	#_ASM_GENERIC_TYPES_H


	)

7 
	~<asm-gíîic/öt-Œ64.h
>

	@/usr/include/asm/posix_types.h

1 #ifde‡
__i386__


2 
	~<asm/posix_ty≥s_32.h
>

3 #ñi‡
deföed
(
__ILP32__
)

4 
	~<asm/posix_ty≥s_x32.h
>

6 
	~<asm/posix_ty≥s_64.h
>

	@/usr/include/asm/sockios.h

1 
	~<asm-gíîic/sockios.h
>

	@/usr/include/bits/wchar-ldbl.h

19 #i‚de‡
_WCHAR_H


23 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


24 
__BEGIN_NAMESPACE_C99


25 
__LDBL_REDIR_DECL
 (
fw¥ötf
);

26 
__LDBL_REDIR_DECL
 (
w¥ötf
);

27 
__LDBL_REDIR_DECL
 (
sw¥ötf
);

28 
__LDBL_REDIR_DECL
 (
vfw¥ötf
);

29 
__LDBL_REDIR_DECL
 (
vw¥ötf
);

30 
__LDBL_REDIR_DECL
 (
vsw¥ötf
);

31 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

32 && !
deföed
 
	g__REDIRECT
 \

33 && (
deföed
 
	g__STRICT_ANSI__
 || deföed 
	g__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fwsˇnf
, 
__∆dbl___isoc99_fwsˇnf
)

35 
	$__LDBL_REDIR1_DECL
 (
wsˇnf
, 
__∆dbl___isoc99_wsˇnf
)

36 
	$__LDBL_REDIR1_DECL
 (
swsˇnf
, 
__∆dbl___isoc99_swsˇnf
)

38 
	`__LDBL_REDIR_DECL
 (
fwsˇnf
);

39 
	`__LDBL_REDIR_DECL
 (
wsˇnf
);

40 
	`__LDBL_REDIR_DECL
 (
swsˇnf
);

42 
__END_NAMESPACE_C99


45 #ifde‡
__USE_ISOC99


46 
__BEGIN_NAMESPACE_C99


47 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd
, 
wc°od
);

48 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

49 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

50 
	$__LDBL_REDIR1_DECL
 (
vfwsˇnf
, 
__∆dbl___isoc99_vfwsˇnf
)

51 
	$__LDBL_REDIR1_DECL
 (
vwsˇnf
, 
__∆dbl___isoc99_vwsˇnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vswsˇnf
, 
__∆dbl___isoc99_vswsˇnf
)

54 
	`__LDBL_REDIR_DECL
 (
vfwsˇnf
);

55 
	`__LDBL_REDIR_DECL
 (
vwsˇnf
);

56 
	`__LDBL_REDIR_DECL
 (
vswsˇnf
);

58 
__END_NAMESPACE_C99


61 #ifde‡
__USE_GNU


62 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd_l
, 
wc°od_l
);

65 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


66 
	$__LDBL_REDIR_DECL
 (
__sw¥ötf_chk
)

67 
	$__LDBL_REDIR_DECL
 (
__vsw¥ötf_chk
)

68 #i‡
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__fw¥ötf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__w¥ötf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vfw¥ötf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vw¥ötf_chk
)

	@/usr/include/bits/wchar2.h

19 #i‚de‡
_WCHAR_H


24 
wch¨_t
 *
	$__wmem˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

25 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

26 
size_t
 
__ns1
Ë
__THROW
;

27 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_Æüs
,

28 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

29 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
),

30 
wmem˝y
);

31 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_chk_w¨n
,

32 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

33 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

34 
size_t
 
__ns1
), 
__wmem˝y_chk
)

35 
	`__w¨«âr
 ("wmemcpy called withÜength biggerÅhan size of destination "

38 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

39 
	`__NTH
 (
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, c⁄° wch¨_à*__ª°ri˘ 
__s2
,

40 
size_t
 
__n
))

42 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

44 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

45  
	`__wmem˝y_chk
 (
__s1
, 
__s2
, 
__n
,

46 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

48 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

49  
	`__wmem˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

50 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

52  
	`__wmem˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

53 
	}
}

56 
wch¨_t
 *
	$__wmemmove_chk
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

57 
size_t
 
__n
, size_à
__ns1
Ë
__THROW
;

58 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_Æüs
, (wch¨_à*
__s1
,

59 c⁄° 
wch¨_t
 *
__s2
,

60 
size_t
 
__n
), 
wmemmove
);

61 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¨n
,

62 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

63 
size_t
 
__n
, size_à
__ns1
), 
__wmemmove_chk
)

64 
	`__w¨«âr
 ("wmemmove called withÜength biggerÅhan size of destination "

67 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

68 
	`__NTH
 (
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
))

70 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

72 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

73  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

74 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

76 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

77  
	`__wmemmove_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

78 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

80  
	`__wmemmove_Æüs
 (
__s1
, 
__s2
, 
__n
);

81 
	}
}

84 #ifde‡
__USE_GNU


85 
wch¨_t
 *
	$__wmemp˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

86 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

87 
size_t
 
__ns1
Ë
__THROW
;

88 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_Æüs
,

89 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

90 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
,

91 
size_t
 
__n
), 
wmemp˝y
);

92 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_chk_w¨n
,

93 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

94 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

95 
size_t
 
__ns1
), 
__wmemp˝y_chk
)

96 
	`__w¨«âr
 ("wmempcpy called withÜength biggerÅhan size of destination "

99 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

100 
	`__NTH
 (
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, c⁄° wch¨_à*__ª°ri˘ 
__s2
,

101 
size_t
 
__n
))

103 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

105 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

106  
	`__wmemp˝y_chk
 (
__s1
, 
__s2
, 
__n
,

107 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

109 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

110  
	`__wmemp˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

111 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

113  
	`__wmemp˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

114 
	}
}

118 
wch¨_t
 *
	$__wmem£t_chk
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

119 
size_t
 
__ns
Ë
__THROW
;

120 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_Æüs
, (wch¨_à*
__s
, wch¨_à
__c
,

121 
size_t
 
__n
), 
wmem£t
);

122 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¨n
,

123 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

124 
size_t
 
__ns
), 
__wmem£t_chk
)

125 
	`__w¨«âr
 ("wmemset called withÜength biggerÅhan size of destination "

128 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

129 
	`__NTH
 (
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
))

131 i‡(
	`__bos0
 (
__s
Ë!(
size_t
) -1)

133 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

134  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sË/  (
wch¨_t
));

136 i‡(
__n
 > 
	`__bos0
 (
__s
Ë/  (
wch¨_t
))

137  
	`__wmem£t_chk_w¨n
 (
__s
, 
__c
, 
__n
,

138 
	`__bos0
 (
__s
Ë/  (
wch¨_t
));

140  
	`__wmem£t_Æüs
 (
__s
, 
__c
, 
__n
);

141 
	}
}

144 
wch¨_t
 *
	$__wcs˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

145 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

146 
size_t
 
__n
Ë
__THROW
;

147 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcs˝y_Æüs
,

148 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

149 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcs˝y
);

151 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

152 
	`__NTH
 (
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

154 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

155  
	`__wcs˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

156  
	`__wcs˝y_Æüs
 (
__de°
, 
__§c
);

157 
	}
}

160 
wch¨_t
 *
	$__w˝˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

161 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

162 
size_t
 
__de°Àn
Ë
__THROW
;

163 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝˝y_Æüs
,

164 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

165 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
w˝˝y
);

167 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

168 
	`__NTH
 (
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

170 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

171  
	`__w˝˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

172  
	`__w˝˝y_Æüs
 (
__de°
, 
__§c
);

173 
	}
}

176 
wch¨_t
 *
	$__wc¢˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

177 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

178 
size_t
 
__de°Àn
Ë
__THROW
;

179 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_Æüs
,

180 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

181 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

182 
size_t
 
__n
), 
wc¢˝y
);

183 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_chk_w¨n
,

184 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

185 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

186 
size_t
 
__n
, size_à
__de°Àn
), 
__wc¢˝y_chk
)

187 
	`__w¨«âr
 ("wcsncpy called withÜength biggerÅhan size of destination "

190 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

191 
	`__NTH
 (
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

192 
size_t
 
__n
))

194 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

196 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

197  
	`__wc¢˝y_chk
 (
__de°
, 
__§c
, 
__n
,

198 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

199 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

200  
	`__wc¢˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

201 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

203  
	`__wc¢˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

204 
	}
}

207 
wch¨_t
 *
	$__w˝n˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

208 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

209 
size_t
 
__de°Àn
Ë
__THROW
;

210 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_Æüs
,

211 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

212 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

213 
size_t
 
__n
), 
w˝n˝y
);

214 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_chk_w¨n
,

215 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

216 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

217 
size_t
 
__n
, size_à
__de°Àn
), 
__w˝n˝y_chk
)

218 
	`__w¨«âr
 ("wcpncpy called withÜength biggerÅhan size of destination "

221 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

222 
	`__NTH
 (
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

223 
size_t
 
__n
))

225 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

227 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

228  
	`__w˝n˝y_chk
 (
__de°
, 
__§c
, 
__n
,

229 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

230 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

231  
	`__w˝n˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

232 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

234  
	`__w˝n˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

235 
	}
}

238 
wch¨_t
 *
	$__wcsˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

239 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

240 
size_t
 
__de°Àn
Ë
__THROW
;

241 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcsˇt_Æüs
,

242 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

243 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcsˇt
);

245 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

246 
	`__NTH
 (
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

248 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

249  
	`__wcsˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

250  
	`__wcsˇt_Æüs
 (
__de°
, 
__§c
);

251 
	}
}

254 
wch¨_t
 *
	$__wc¢ˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

255 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

256 
size_t
 
__n
, size_à
__de°Àn
Ë
__THROW
;

257 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢ˇt_Æüs
,

258 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

259 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

260 
size_t
 
__n
), 
wc¢ˇt
);

262 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

263 
	`__NTH
 (
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

264 
size_t
 
__n
))

266 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

267  
	`__wc¢ˇt_chk
 (
__de°
, 
__§c
, 
__n
,

268 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

269  
	`__wc¢ˇt_Æüs
 (
__de°
, 
__§c
, 
__n
);

270 
	}
}

273 
	$__sw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

274 
__Êag
, 
size_t
 
__s_Àn
,

275 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

276 
__THROW
 ;

278 
	`__REDIRECT_NTH_LDBL
 (
__sw¥ötf_Æüs
,

279 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

280 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...),

281 
sw¥ötf
);

283 #ifde‡
__va_¨g_∑ck


284 
__f‹tify_fun˘i⁄
 

285 
	`__NTH
 (
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...))

288 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

289  
	`__sw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

290 
	`__bos
 (
__s
Ë/  (
wch¨_t
),

291 
__fmt
, 
	`__va_¨g_∑ck
 ());

292  
	`__sw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¨g_∑ck
 ());

293 
	}
}

294 #ñi‡!
deföed
 
__˝lu•lus


296 
	#sw¥ötf
(
s
, 
n
, ...) \

297 (
	`__bos
 (
s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

298 ? 
	`__sw¥ötf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

299 
	`__bos
 (
s
Ë/  (
wch¨_t
), 
__VA_ARGS__
) \

300 : 
	`sw¥ötf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

303 
	$__vsw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

304 
__Êag
, 
size_t
 
__s_Àn
,

305 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

306 
__gnuc_va_li°
 
__¨g
)

307 
__THROW
 ;

309 
	`__REDIRECT_NTH_LDBL
 (
__vsw¥ötf_Æüs
,

310 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

311 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
,

312 
__gnuc_va_li°
 
__≠
), 
vsw¥ötf
);

314 
__f‹tify_fun˘i⁄
 

315 
	`__NTH
 (
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

316 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
))

318 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

319  
	`__vsw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

320 
	`__bos
 (
__s
Ë/  (
wch¨_t
), 
__fmt
, 
__≠
);

321  
	`__vsw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
__≠
);

322 
	}
}

325 #i‡
__USE_FORTIFY_LEVEL
 > 1

327 
__fw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

328 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

329 
__w¥ötf_chk
 (
__Êag
, c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

331 
__vfw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

332 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

333 
__gnuc_va_li°
 
__≠
);

334 
__vw¥ötf_chk
 (
__Êag
, c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

335 
__gnuc_va_li°
 
__≠
);

337 #ifde‡
__va_¨g_∑ck


338 
__f‹tify_fun˘i⁄
 

339 
	$w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...)

341  
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

342 
	}
}

344 
__f‹tify_fun˘i⁄
 

345 
	$fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, c⁄° 
wch¨_t
 *__ª°ri˘ 
__fmt
, ...)

347  
	`__fw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

348 
	`__va_¨g_∑ck
 ());

349 
	}
}

350 #ñi‡!
deföed
 
__˝lu•lus


351 
	#w¥ötf
(...) \

352 
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

353 
	#fw¥ötf
(
°ªam
, ...) \

354 
	`__fw¥ötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

357 
__f‹tify_fun˘i⁄
 

358 
	$vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

360  
	`__vw¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

361 
	}
}

363 
__f‹tify_fun˘i⁄
 

364 
	$vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

365 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

367  
	`__vfw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

368 
	}
}

372 
wch¨_t
 *
	$__fgëws_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

373 
__FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

374 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_Æüs
,

375 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

376 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws
Ë
__wur
;

377 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_chk_w¨n
,

378 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

379 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgëws_chk
)

380 
__wur
 
	`__w¨«âr
 ("fgetws called with bigger sizeÅhanÜength "

383 
__f‹tify_fun˘i⁄
 
__wur
 
wch¨_t
 *

384 
	$fgëws
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

386 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

388 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

389  
	`__fgëws_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

390 
__n
, 
__°ªam
);

392 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

393  
	`__fgëws_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

394 
__n
, 
__°ªam
);

396  
	`__fgëws_Æüs
 (
__s
, 
__n
, 
__°ªam
);

397 
	}
}

399 #ifde‡
__USE_GNU


400 
wch¨_t
 *
	$__fgëws_u∆ocked_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
,

401 
__n
, 
__FILE
 *
__ª°ri˘
 
__°ªam
)

402 
__wur
;

403 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_Æüs
,

404 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

405 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws_u∆ocked
)

406 
__wur
;

407 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_chk_w¨n
,

408 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

409 
__FILE
 *
__ª°ri˘
 
__°ªam
),

410 
__fgëws_u∆ocked_chk
)

411 
__wur
 
	`__w¨«âr
 ("fgetws_unlocked called with bigger sizeÅhanÜength "

414 
__f‹tify_fun˘i⁄
 
__wur
 
wch¨_t
 *

415 
	$fgëws_u∆ocked
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

417 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

419 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

420  
	`__fgëws_u∆ocked_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

421 
__n
, 
__°ªam
);

423 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

424  
	`__fgëws_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

425 
__n
, 
__°ªam
);

427  
	`__fgëws_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

428 
	}
}

432 
size_t
 
	$__w¸tomb_chk
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

433 
mb°©e_t
 *
__ª°ri˘
 
__p
,

434 
size_t
 
__buÊí
Ë
__THROW
 
__wur
;

435 
size_t
 
	`__REDIRECT_NTH
 (
__w¸tomb_Æüs
,

436 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

437 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
w¸tomb
Ë
__wur
;

439 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


440 
	`__NTH
 (
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

441 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

446 
	#__WCHAR_MB_LEN_MAX
 16

	)

447 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__WCHAR_MB_LEN_MAX


450 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

451  
	`__w¸tomb_chk
 (
__s
, 
__wch¨
, 
__ps
, 
	`__bos
 (__s));

452  
	`__w¸tomb_Æüs
 (
__s
, 
__wch¨
, 
__ps
);

453 
	}
}

456 
size_t
 
	$__mb§towcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

457 c⁄° **
__ª°ri˘
 
__§c
,

458 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

459 
size_t
 
__d°Àn
Ë
__THROW
;

460 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_Æüs
,

461 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

462 c⁄° **
__ª°ri˘
 
__§c
,

463 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

464 
mb§towcs
);

465 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_chk_w¨n
,

466 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

467 c⁄° **
__ª°ri˘
 
__§c
,

468 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

469 
size_t
 
__d°Àn
), 
__mb§towcs_chk
)

470 
	`__w¨«âr
 ("mbsrtowcs called with dst buffer smallerÅhanÜen "

473 
__f‹tify_fun˘i⁄
 
size_t


474 
	`__NTH
 (
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° **__ª°ri˘ 
__§c
,

475 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

477 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

479 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

480  
	`__mb§towcs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

481 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

483 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

484  
	`__mb§towcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

485 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

487  
	`__mb§towcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

488 
	}
}

491 
size_t
 
	$__wc§tombs_chk
 (*
__ª°ri˘
 
__d°
,

492 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

493 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

494 
size_t
 
__d°Àn
Ë
__THROW
;

495 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_Æüs
,

496 (*
__ª°ri˘
 
__d°
,

497 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

498 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

499 
wc§tombs
);

500 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_chk_w¨n
,

501 (*
__ª°ri˘
 
__d°
,

502 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

503 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

504 
size_t
 
__d°Àn
), 
__wc§tombs_chk
)

505 
	`__w¨«âr
 ("wcsrtombs called with dst buffer smallerÅhanÜen");

507 
__f‹tify_fun˘i⁄
 
size_t


508 
	`__NTH
 (
	$wc§tombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 **__ª°ri˘ 
__§c
,

509 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

511 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

513 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

514  
	`__wc§tombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

516 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

517  
	`__wc§tombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

519  
	`__wc§tombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

520 
	}
}

523 #ifde‡
__USE_GNU


524 
size_t
 
	$__mb¢πowcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

525 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

526 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

527 
size_t
 
__d°Àn
Ë
__THROW
;

528 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_Æüs
,

529 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

530 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

531 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

532 
mb¢πowcs
);

533 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_chk_w¨n
,

534 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

535 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

536 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

537 
size_t
 
__d°Àn
), 
__mb¢πowcs_chk
)

538 
	`__w¨«âr
 ("mbsnrtowcs called with dst buffer smallerÅhanÜen "

541 
__f‹tify_fun˘i⁄
 
size_t


542 
	`__NTH
 (
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° **__ª°ri˘ 
__§c
,

543 
size_t
 
__nmc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

545 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

547 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

548  
	`__mb¢πowcs_chk
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

549 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

551 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

552  
	`__mb¢πowcs_chk_w¨n
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

553 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

555  
	`__mb¢πowcs_Æüs
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
);

556 
	}
}

559 
size_t
 
	$__wc¢πombs_chk
 (*
__ª°ri˘
 
__d°
,

560 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

561 
size_t
 
__nwc
, size_à
__Àn
,

562 
mb°©e_t
 *
__ª°ri˘
 
__ps
, 
size_t
 
__d°Àn
)

563 
__THROW
;

564 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_Æüs
,

565 (*
__ª°ri˘
 
__d°
,

566 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

567 
size_t
 
__nwc
, size_à
__Àn
,

568 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
wc¢πombs
);

569 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_chk_w¨n
,

570 (*
__ª°ri˘
 
__d°
,

571 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

572 
size_t
 
__nwc
, size_à
__Àn
,

573 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

574 
size_t
 
__d°Àn
), 
__wc¢πombs_chk
)

575 
	`__w¨«âr
 ("wcsnrtombs called with dst buffer smallerÅhanÜen");

577 
__f‹tify_fun˘i⁄
 
size_t


578 
	`__NTH
 (
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 **__ª°ri˘ 
__§c
,

579 
size_t
 
__nwc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

581 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

583 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

584  
	`__wc¢πombs_chk
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

585 
	`__bos
 (
__d°
));

587 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

588  
	`__wc¢πombs_chk_w¨n
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

589 
	`__bos
 (
__d°
));

591  
	`__wc¢πombs_Æüs
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
);

592 
	}
}

	@/usr/include/gnu/option-groups.h

10 #i‚de‡
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CRYPT
 1

	)

20 
	#__OPTION_EGLIBC_CRYPT_UFC
 1

	)

21 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

22 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

23 
	#__OPTION_EGLIBC_ENVZ
 1

	)

24 
	#__OPTION_EGLIBC_FCVT
 1

	)

25 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

26 
	#__OPTION_EGLIBC_FSTAB
 1

	)

27 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

28 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

29 
	#__OPTION_EGLIBC_IDN
 1

	)

30 
	#__OPTION_EGLIBC_INET
 1

	)

31 
	#__OPTION_EGLIBC_INET_ANL
 1

	)

32 
	#__OPTION_EGLIBC_LIBM
 1

	)

33 
	#__OPTION_EGLIBC_LOCALES
 1

	)

34 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

35 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

36 
	#__OPTION_EGLIBC_NIS
 1

	)

37 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

38 
	#__OPTION_EGLIBC_RCMD
 1

	)

39 
	#__OPTION_EGLIBC_RTLD_DEBUG
 1

	)

40 
	#__OPTION_EGLIBC_SPAWN
 1

	)

41 
	#__OPTION_EGLIBC_STREAMS
 1

	)

42 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

43 
	#__OPTION_EGLIBC_UTMP
 1

	)

44 
	#__OPTION_EGLIBC_UTMPX
 1

	)

45 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

46 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

47 
	#__OPTION_POSIX_REGEXP
 1

	)

48 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

49 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/linux/ioctl.h

1 #i‚de‡
_LINUX_IOCTL_H


2 
	#_LINUX_IOCTL_H


	)

4 
	~<asm/io˘l.h
>

	@/usr/include/linux/stddef.h

	@/usr/include/pthread.h

18 #i‚de‡
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<ídün.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<bôs/±hªadty≥s.h
>

27 
	~<bôs/£tjmp.h
>

28 
	~<bôs/w‹dsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifde‡
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifde‡
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


86 #i‡
__PTHREAD_MUTEX_HAVE_ELISION
 == 1

87 
	#__PTHREAD_SPINS
 0, 0

	)

88 #ñi‡
__PTHREAD_MUTEX_HAVE_ELISION
 == 2

89 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

91 
	#__PTHREAD_SPINS
 0

	)

94 #ifde‡
__PTHREAD_MUTEX_HAVE_PREV


95 
	#PTHREAD_MUTEX_INITIALIZER
 \

96 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

97 #ifde‡
__USE_GNU


98 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

100 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

101 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

102 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

103 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

104 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

105 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

109 
	#PTHREAD_MUTEX_INITIALIZER
 \

110 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

111 #ifde‡
__USE_GNU


112 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

113 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

114 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

115 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

116 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

117 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

124 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


127 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

128 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

129 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

130 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


136 #i‚de‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


137 #i‡
__WORDSIZE
 == 64

138 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

143 
	#PTHREAD_RWLOCK_INITIALIZER
 \

144 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

145 #ifde‡
__USE_GNU


146 #ifde‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


147 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

149 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

151 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


152 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

153 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

154 0, 0, 0, 0 } }

	)

156 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

157 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

158 0 } }

	)

168 
	mPTHREAD_INHERIT_SCHED
,

169 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

170 
	mPTHREAD_EXPLICIT_SCHED


171 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

178 
	mPTHREAD_SCOPE_SYSTEM
,

179 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

180 
	mPTHREAD_SCOPE_PROCESS


181 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

188 
	mPTHREAD_PROCESS_PRIVATE
,

189 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

190 
	mPTHREAD_PROCESS_SHARED


191 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

197 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

201 
	s_±hªad_˛ónup_buf„r


203 (*
	m__routöe
) (*);

204 *
	m__¨g
;

205 
	m__ˇn˚…y≥
;

206 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

212 
	mPTHREAD_CANCEL_ENABLE
,

213 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

214 
	mPTHREAD_CANCEL_DISABLE


215 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

219 
	mPTHREAD_CANCEL_DEFERRED
,

220 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

221 
	mPTHREAD_CANCEL_ASYNCHRONOUS


222 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

224 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

228 
	#PTHREAD_ONCE_INIT
 0

	)

231 #ifde‡
__USE_XOPEN2K


235 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

239 
__BEGIN_DECLS


244 
±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

245 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

246 *(*
__°¨t_routöe
) (*),

247 *
__ª°ri˘
 
__¨g
Ë
__THROWNL
 
__n⁄nuŒ
 ((1, 3));

253 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

261 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

263 #ifde‡
__USE_GNU


266 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

274 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

275 c⁄° 
time•ec
 *
__ab°ime
);

282 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

286 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

289 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
)

290 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

298 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

301 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

302 
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$±hªad_©å_gëdëach°©e
 (c⁄° 
±hªad_©å_t
 *
__©å
,

306 *
__dëach°©e
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

311 
__dëach°©e
)

312 
__THROW
 
	`__n⁄nuŒ
 ((1));

316 
	$±hªad_©å_gëgu¨dsize
 (c⁄° 
±hªad_©å_t
 *
__©å
,

317 
size_t
 *
__gu¨dsize
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

321 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

322 
size_t
 
__gu¨dsize
)

323 
__THROW
 
	`__n⁄nuŒ
 ((1));

327 
	$±hªad_©å_gësched∑øm
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

328 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

329 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

332 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

333 c⁄° 
sched_∑øm
 *
__ª°ri˘


334 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

337 
	$±hªad_©å_gëschedpﬁicy
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


338 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

339 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

342 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

343 
__THROW
 
	`__n⁄nuŒ
 ((1));

346 
	$±hªad_©å_gëöhîôsched
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


347 
__©å
, *
__ª°ri˘
 
__öhîô
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

351 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

352 
__öhîô
)

353 
__THROW
 
	`__n⁄nuŒ
 ((1));

357 
	$±hªad_©å_gësc›e
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

358 *
__ª°ri˘
 
__sc›e
)

359 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

362 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

363 
__THROW
 
	`__n⁄nuŒ
 ((1));

366 
	$±hªad_©å_gë°ackaddr
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


367 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

368 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

374 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

375 *
__°ackaddr
)

376 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

379 
	$±hªad_©å_gë°acksize
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


380 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

381 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

386 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

387 
size_t
 
__°acksize
)

388 
__THROW
 
	`__n⁄nuŒ
 ((1));

390 #ifde‡
__USE_XOPEN2K


392 
	$±hªad_©å_gë°ack
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

393 **
__ª°ri˘
 
__°ackaddr
,

394 
size_t
 *
__ª°ri˘
 
__°acksize
)

395 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

400 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

401 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

404 #ifde‡
__USE_GNU


407 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

408 
size_t
 
__˝u£tsize
,

409 c⁄° 
˝u_£t_t
 *
__˝u£t
)

410 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

414 
	$±hªad_©å_gëafföôy_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
,

415 
size_t
 
__˝u£tsize
,

416 
˝u_£t_t
 *
__˝u£t
)

417 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

420 
	$±hªad_gë©å_deÁu…_≈
 (
±hªad_©å_t
 *
__©å
)

421 
__THROW
 
	`__n⁄nuŒ
 ((1));

425 
	$±hªad_£èâr_deÁu…_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
)

426 
__THROW
 
	`__n⁄nuŒ
 ((1));

431 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

432 
__THROW
 
	`__n⁄nuŒ
 ((2));

440 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

441 c⁄° 
sched_∑øm
 *
__∑øm
)

442 
__THROW
 
	`__n⁄nuŒ
 ((3));

445 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

446 *
__ª°ri˘
 
__pﬁicy
,

447 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

451 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

452 
__THROW
;

455 #ifde‡
__USE_GNU


457 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

458 
size_t
 
__buÊí
)

459 
__THROW
 
	`__n⁄nuŒ
 ((2));

462 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, c⁄° *
__«me
)

463 
__THROW
 
	`__n⁄nuŒ
 ((2));

467 #ifde‡
__USE_UNIX98


469 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

472 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

475 #ifde‡
__USE_GNU


480 
	$±hªad_yõld
 (Ë
__THROW
;

485 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

486 c⁄° 
˝u_£t_t
 *
__˝u£t
)

487 
__THROW
 
	`__n⁄nuŒ
 ((3));

490 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

491 
˝u_£t_t
 *
__˝u£t
)

492 
__THROW
 
	`__n⁄nuŒ
 ((3));

505 
	`±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

506 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

517 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

521 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

524 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

529 
	`±hªad_ã°ˇn˚l
 ();

538 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

539 
__mask_was_ßved
;

540 } 
__ˇn˚l_jmp_buf
[1];

541 *
__∑d
[4];

542 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

545 #i‚de‡
__˛ónup_f˘_©åibuã


546 
	#__˛ónup_f˘_©åibuã


	)

551 
	s__±hªad_˛ónup_‰ame


553 (*
__ˇn˚l_routöe
) (*);

554 *
__ˇn˚l_¨g
;

555 
__do_ô
;

556 
__ˇn˚l_ty≥
;

559 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


560 #ifde‡
__˝lu•lus


562 ˛as†
	c__±hªad_˛ónup_˛ass


564 (*
__ˇn˚l_routöe
) (*);

565 *
__ˇn˚l_¨g
;

566 
__do_ô
;

567 
__ˇn˚l_ty≥
;

569 
public
:

570 
	`__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

571 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

572 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

573 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

574 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

575 &
__ˇn˚l_ty≥
); 
	}
}

576 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

586 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

588 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

592 
	#±hªad_˛ónup_p›
(
execuã
) \

593 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

594 } 0)

	)

596 #ifde‡
__USE_GNU


600 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

602 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

603 
__˛‰ame
.
	`__de„r
 ()

	)

608 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

609 
__˛‰ame
.
	`__ª°‹e
 (); \

610 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

611 } 0)

	)

618 
__exã∫_ölöe
 

619 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

621 i‡(
__‰ame
->
__do_ô
)

622 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

623 
	}
}

632 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

634 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

635 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

636 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

637 .
__do_ô
 = 1 };

	)

641 
	#±hªad_˛ónup_p›
(
execuã
) \

642 
__˛‰ame
.
__do_ô
 = (
execuã
); \

643 } 0)

	)

645 #ifde‡
__USE_GNU


649 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

651 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

652 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

653 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

654 .
__do_ô
 = 1 }; \

655 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

656 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

661 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

662 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

663 
__˛‰ame
.
__do_ô
 = (
execuã
); \

664 } 0)

	)

675 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

677 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

678 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

679 *
__ˇn˚l_¨g
 = (
¨g
); \

680 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

681 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

682 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

684 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

685 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

689 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

690 dÿ{

	)

691 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

692 
__˛ónup_f˘_©åibuã
;

696 
	#±hªad_˛ónup_p›
(
execuã
) \

699 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

700 i‡(
execuã
) \

701 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

702 } 0)

	)

703 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

704 
__˛ónup_f˘_©åibuã
;

706 #ifde‡
__USE_GNU


710 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

712 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

713 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

714 *
__ˇn˚l_¨g
 = (
¨g
); \

715 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

716 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

717 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

719 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

720 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

724 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

725 dÿ{

	)

726 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

727 
__˛ónup_f˘_©åibuã
;

732 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

735 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

736 i‡(
execuã
) \

737 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

738 
	}
} 0)

	)

739 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

740 
__˛ónup_f˘_©åibuã
;

744 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

745 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

746 #i‚de‡
SHARED


747 
	`__©åibuã__
 ((
__wók__
))

753 
__jmp_buf_èg
;

754 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROWNL
;

760 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

761 c⁄° 
±hªad_muãx©å_t
 *
__muãx©å
)

762 
__THROW
 
	`__n⁄nuŒ
 ((1));

765 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

766 
__THROW
 
	`__n⁄nuŒ
 ((1));

769 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

770 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

773 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

774 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

776 #ifde‡
__USE_XOPEN2K


778 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

779 c⁄° 
time•ec
 *
__ª°ri˘


780 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

784 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

785 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

789 
	$±hªad_muãx_gë¥io˚ûög
 (c⁄° 
±hªad_muãx_t
 *

790 
__ª°ri˘
 
__muãx
,

791 *
__ª°ri˘
 
__¥io˚ûög
)

792 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

796 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

797 
__¥io˚ûög
,

798 *
__ª°ri˘
 
__ﬁd_˚ûög
)

799 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

802 #ifde‡
__USE_XOPEN2K8


804 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

805 
__THROW
 
	`__n⁄nuŒ
 ((1));

806 #ifde‡
__USE_GNU


807 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

808 
__THROW
 
	`__n⁄nuŒ
 ((1));

817 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

818 
__THROW
 
	`__n⁄nuŒ
 ((1));

821 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

825 
	$±hªad_muãx©å_gëpsh¨ed
 (c⁄° 
±hªad_muãx©å_t
 *

826 
__ª°ri˘
 
__©å
,

827 *
__ª°ri˘
 
__psh¨ed
)

828 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

831 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

832 
__psh¨ed
)

833 
__THROW
 
	`__n⁄nuŒ
 ((1));

835 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


837 
	$±hªad_muãx©å_gëty≥
 (c⁄° 
±hªad_muãx©å_t
 *
__ª°ri˘


838 
__©å
, *
__ª°ri˘
 
__köd
)

839 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

844 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

845 
__THROW
 
	`__n⁄nuŒ
 ((1));

849 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (c⁄° 
±hªad_muãx©å_t
 *

850 
__ª°ri˘
 
__©å
,

851 *
__ª°ri˘
 
__¥Ÿocﬁ
)

852 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__¥Ÿocﬁ
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

861 
	$±hªad_muãx©å_gë¥io˚ûög
 (c⁄° 
±hªad_muãx©å_t
 *

862 
__ª°ri˘
 
__©å
,

863 *
__ª°ri˘
 
__¥io˚ûög
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

867 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

868 
__¥io˚ûög
)

869 
__THROW
 
	`__n⁄nuŒ
 ((1));

871 #ifde‡
__USE_XOPEN2K


873 
	$±hªad_muãx©å_gërobu°
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

874 *
__robu°√ss
)

875 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

876 #ifde‡
__USE_GNU


877 
	$±hªad_muãx©å_gërobu°_≈
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

878 *
__robu°√ss
)

879 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

883 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

884 
__robu°√ss
)

885 
__THROW
 
	`__n⁄nuŒ
 ((1));

886 #ifde‡
__USE_GNU


887 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

888 
__robu°√ss
)

889 
__THROW
 
	`__n⁄nuŒ
 ((1));

894 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


899 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

900 c⁄° 
±hªad_rwlock©å_t
 *
__ª°ri˘


901 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

904 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

905 
__THROW
 
	`__n⁄nuŒ
 ((1));

908 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

909 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

912 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

915 #ifde‡
__USE_XOPEN2K


917 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

918 c⁄° 
time•ec
 *
__ª°ri˘


919 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

923 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

924 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

927 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

930 #ifde‡
__USE_XOPEN2K


932 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

933 c⁄° 
time•ec
 *
__ª°ri˘


934 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

938 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

939 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

945 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

946 
__THROW
 
	`__n⁄nuŒ
 ((1));

949 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

950 
__THROW
 
	`__n⁄nuŒ
 ((1));

953 
	$±hªad_rwlock©å_gëpsh¨ed
 (c⁄° 
±hªad_rwlock©å_t
 *

954 
__ª°ri˘
 
__©å
,

955 *
__ª°ri˘
 
__psh¨ed
)

956 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

959 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

960 
__psh¨ed
)

961 
__THROW
 
	`__n⁄nuŒ
 ((1));

964 
	$±hªad_rwlock©å_gëköd_≈
 (c⁄° 
±hªad_rwlock©å_t
 *

965 
__ª°ri˘
 
__©å
,

966 *
__ª°ri˘
 
__¥ef
)

967 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

970 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

971 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

979 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

980 c⁄° 
±hªad_c⁄d©å_t
 *
__ª°ri˘
 
__c⁄d_©å
)

981 
__THROW
 
	`__n⁄nuŒ
 ((1));

984 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

985 
__THROW
 
	`__n⁄nuŒ
 ((1));

988 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

989 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

992 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

993 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1000 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1001 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

1002 
	`__n⁄nuŒ
 ((1, 2));

1011 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1012 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

1013 c⁄° 
time•ec
 *
__ª°ri˘
 
__ab°ime
)

1014 
	`__n⁄nuŒ
 ((1, 2, 3));

1019 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

1020 
__THROW
 
	`__n⁄nuŒ
 ((1));

1023 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

1024 
__THROW
 
	`__n⁄nuŒ
 ((1));

1027 
	$±hªad_c⁄d©å_gëpsh¨ed
 (c⁄° 
±hªad_c⁄d©å_t
 *

1028 
__ª°ri˘
 
__©å
,

1029 *
__ª°ri˘
 
__psh¨ed
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1033 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1034 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1036 #ifde‡
__USE_XOPEN2K


1038 
	$±hªad_c⁄d©å_gë˛ock
 (c⁄° 
±hªad_c⁄d©å_t
 *

1039 
__ª°ri˘
 
__©å
,

1040 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1041 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1044 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1045 
__˛ockid_t
 
__˛ock_id
)

1046 
__THROW
 
	`__n⁄nuŒ
 ((1));

1050 #ifde‡
__USE_XOPEN2K


1055 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1056 
__THROW
 
	`__n⁄nuŒ
 ((1));

1059 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1060 
__THROW
 
	`__n⁄nuŒ
 ((1));

1063 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1064 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1067 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1068 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1071 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1072 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1079 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1080 c⁄° 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1081 
__©å
, 
__cou¡
)

1082 
__THROW
 
	`__n⁄nuŒ
 ((1));

1085 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1086 
__THROW
 
	`__n⁄nuŒ
 ((1));

1089 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1090 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1094 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1095 
__THROW
 
	`__n⁄nuŒ
 ((1));

1098 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1099 
__THROW
 
	`__n⁄nuŒ
 ((1));

1102 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (c⁄° 
±hªad_b¨rõøâr_t
 *

1103 
__ª°ri˘
 
__©å
,

1104 *
__ª°ri˘
 
__psh¨ed
)

1105 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1108 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1109 
__psh¨ed
)

1110 
__THROW
 
	`__n⁄nuŒ
 ((1));

1122 
	`±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1123 (*
__de°r_fun˘i⁄
) (*))

1124 
__THROW
 
	`__n⁄nuŒ
 ((1));

1127 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1130 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1133 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1134 c⁄° *
__poöãr
Ë
__THROW
 ;

1137 #ifde‡
__USE_XOPEN2K


1139 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1140 
__˛ockid_t
 *
__˛ock_id
)

1141 
__THROW
 
	`__n⁄nuŒ
 ((2));

1156 
	`±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1157 (*
__∑ª¡
) (),

1158 (*
__chûd
Ë()Ë
__THROW
;

1161 #ifde‡
__USE_EXTERN_INLINES


1163 
__exã∫_ölöe
 

1164 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1166  
__thªad1
 =
__thªad2
;

1167 
	}
}

1170 
	g__END_DECLS


	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/asm-generic/int-ll64.h

8 #i‚de‡
_ASM_GENERIC_INT_LL64_H


9 
	#_ASM_GENERIC_INT_LL64_H


	)

11 
	~<asm/bô•îl⁄g.h
>

13 #i‚de‡
__ASSEMBLY__


19 
__sig√d__
 
	t__s8
;

20 
	t__u8
;

22 
__sig√d__
 
	t__s16
;

23 
	t__u16
;

25 
__sig√d__
 
	t__s32
;

26 
	t__u32
;

28 #ifde‡
__GNUC__


29 
__exãnsi⁄__
 
__sig√d__
 
	t__s64
;

30 
__exãnsi⁄__
 
	t__u64
;

32 
__sig√d__
 
	t__s64
;

33 
	t__u64
;

	@/usr/include/asm-generic/sockios.h

1 #i‚de‡
__ASM_GENERIC_SOCKIOS_H


2 
	#__ASM_GENERIC_SOCKIOS_H


	)

5 
	#FIOSETOWN
 0x8901

	)

6 
	#SIOCSPGRP
 0x8902

	)

7 
	#FIOGETOWN
 0x8903

	)

8 
	#SIOCGPGRP
 0x8904

	)

9 
	#SIOCATMARK
 0x8905

	)

10 
	#SIOCGSTAMP
 0x8906

	)

11 
	#SIOCGSTAMPNS
 0x8907

	)

	@/usr/include/asm/ioctl.h

1 
	~<asm-gíîic/io˘l.h
>

	@/usr/include/asm/posix_types_32.h

1 #i‚de‡
_ASM_X86_POSIX_TYPES_32_H


2 
	#_ASM_X86_POSIX_TYPES_32_H


	)

10 
	t__kî√l_mode_t
;

11 
	#__kî√l_mode_t
 
__kî√l_mode_t


	)

13 
	t__kî√l_ùc_pid_t
;

14 
	#__kî√l_ùc_pid_t
 
__kî√l_ùc_pid_t


	)

16 
	t__kî√l_uid_t
;

17 
	t__kî√l_gid_t
;

18 
	#__kî√l_uid_t
 
__kî√l_uid_t


	)

20 
	t__kî√l_ﬁd_dev_t
;

21 
	#__kî√l_ﬁd_dev_t
 
__kî√l_ﬁd_dev_t


	)

23 
	~<asm-gíîic/posix_ty≥s.h
>

	@/usr/include/asm/posix_types_64.h

1 #i‚de‡
_ASM_X86_POSIX_TYPES_64_H


2 
	#_ASM_X86_POSIX_TYPES_64_H


	)

10 
	t__kî√l_ﬁd_uid_t
;

11 
	t__kî√l_ﬁd_gid_t
;

12 
	#__kî√l_ﬁd_uid_t
 
__kî√l_ﬁd_uid_t


	)

14 
	t__kî√l_ﬁd_dev_t
;

15 
	#__kî√l_ﬁd_dev_t
 
__kî√l_ﬁd_dev_t


	)

17 
	~<asm-gíîic/posix_ty≥s.h
>

	@/usr/include/asm/posix_types_x32.h

1 #i‚de‡
_ASM_X86_POSIX_TYPES_X32_H


2 
	#_ASM_X86_POSIX_TYPES_X32_H


	)

13 
	t__kî√l_l⁄g_t
;

14 
	t__kî√l_ul⁄g_t
;

15 
	#__kî√l_l⁄g_t
 
__kî√l_l⁄g_t


	)

17 
	~<asm/posix_ty≥s_64.h
>

	@/usr/include/bits/setjmp.h

19 #i‚de‡
_BITS_SETJMP_H


20 
	#_BITS_SETJMP_H
 1

	)

22 #i‡!
deföed
 
_SETJMP_H
 && !deföed 
_PTHREAD_H


26 
	~<bôs/w‹dsize.h
>

28 #i‚de‡
_ASM


30 #i‡
__WORDSIZE
 == 64

31 
	t__jmp_buf
[8];

32 #ñi‡
deföed
 
__x86_64__


33 
__exãnsi⁄__
 
	t__jmp_buf
[8];

35 
	t__jmp_buf
[6];

	@/usr/include/sched.h

19 #i‚def 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

30 
	#__√ed_time_t


	)

31 
	#__√ed_time•ec


	)

32 
	~<time.h
>

34 #i‚de‡
__pid_t_deföed


35 
__pid_t
 
	tpid_t
;

36 
	#__pid_t_deföed


	)

41 
	~<bôs/sched.h
>

43 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

46 
__BEGIN_DECLS


49 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, c⁄° 
sched_∑øm
 *
__∑øm
)

50 
__THROW
;

53 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

56 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

57 c⁄° 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

60 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

63 
	$sched_yõld
 (Ë
__THROW
;

66 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

69 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

72 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

75 #ifde‡
__USE_GNU


77 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

78 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

79 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

80 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

81 
˝u£ç
)

	)

82 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

83 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

86 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

87 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

88 
˝u£ç
)

	)

89 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

90 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

93 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

94 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

97 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

98 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

99 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

101 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

103 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

105 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

107 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

110 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

111 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

112 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

116 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

117 c⁄° 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

120 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

121 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

124 
__END_DECLS


	@/usr/include/asm-generic/ioctl.h

1 #i‚de‡
_ASM_GENERIC_IOCTL_H


2 
	#_ASM_GENERIC_IOCTL_H


	)

22 
	#_IOC_NRBITS
 8

	)

23 
	#_IOC_TYPEBITS
 8

	)

30 #i‚de‡
_IOC_SIZEBITS


31 
	#_IOC_SIZEBITS
 14

	)

34 #i‚de‡
_IOC_DIRBITS


35 
	#_IOC_DIRBITS
 2

	)

38 
	#_IOC_NRMASK
 ((1 << 
_IOC_NRBITS
)-1)

	)

39 
	#_IOC_TYPEMASK
 ((1 << 
_IOC_TYPEBITS
)-1)

	)

40 
	#_IOC_SIZEMASK
 ((1 << 
_IOC_SIZEBITS
)-1)

	)

41 
	#_IOC_DIRMASK
 ((1 << 
_IOC_DIRBITS
)-1)

	)

43 
	#_IOC_NRSHIFT
 0

	)

44 
	#_IOC_TYPESHIFT
 (
_IOC_NRSHIFT
+
_IOC_NRBITS
)

	)

45 
	#_IOC_SIZESHIFT
 (
_IOC_TYPESHIFT
+
_IOC_TYPEBITS
)

	)

46 
	#_IOC_DIRSHIFT
 (
_IOC_SIZESHIFT
+
_IOC_SIZEBITS
)

	)

53 #i‚de‡
_IOC_NONE


54 
	#_IOC_NONE
 0U

	)

57 #i‚de‡
_IOC_WRITE


58 
	#_IOC_WRITE
 1U

	)

61 #i‚de‡
_IOC_READ


62 
	#_IOC_READ
 2U

	)

65 
	#_IOC
(
dú
,
ty≥
,
ƒ
,
size
) \

66 (((
dú
Ë<< 
_IOC_DIRSHIFT
) | \

67 ((
ty≥
Ë<< 
_IOC_TYPESHIFT
) | \

68 ((
ƒ
Ë<< 
_IOC_NRSHIFT
) | \

69 ((
size
Ë<< 
_IOC_SIZESHIFT
))

	)

71 
	#_IOC_TYPECHECK
(
t
Ë(—))

	)

74 
	#_IO
(
ty≥
,
ƒ
Ë
	`_IOC
(
_IOC_NONE
,—y≥),“r),0)

	)

75 
	#_IOR
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

76 
	#_IOW
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_WRITE
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

77 
	#_IOWR
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
|
_IOC_WRITE
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

78 
	#_IOR_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
,—y≥),“r),(size))

	)

79 
	#_IOW_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_WRITE
,—y≥),“r),(size))

	)

80 
	#_IOWR_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
|
_IOC_WRITE
,—y≥),“r),(size))

	)

83 
	#_IOC_DIR
(
ƒ
Ë((“rË>> 
_IOC_DIRSHIFT
Ë& 
_IOC_DIRMASK
)

	)

84 
	#_IOC_TYPE
(
ƒ
Ë((“rË>> 
_IOC_TYPESHIFT
Ë& 
_IOC_TYPEMASK
)

	)

85 
	#_IOC_NR
(
ƒ
Ë((“rË>> 
_IOC_NRSHIFT
Ë& 
_IOC_NRMASK
)

	)

86 
	#_IOC_SIZE
(
ƒ
Ë((“rË>> 
_IOC_SIZESHIFT
Ë& 
_IOC_SIZEMASK
)

	)

90 
	#IOC_IN
 (
_IOC_WRITE
 << 
_IOC_DIRSHIFT
)

	)

91 
	#IOC_OUT
 (
_IOC_READ
 << 
_IOC_DIRSHIFT
)

	)

92 
	#IOC_INOUT
 ((
_IOC_WRITE
|
_IOC_READ
Ë<< 
_IOC_DIRSHIFT
)

	)

93 
	#IOCSIZE_MASK
 (
_IOC_SIZEMASK
 << 
_IOC_SIZESHIFT
)

	)

94 
	#IOCSIZE_SHIFT
 (
_IOC_SIZESHIFT
)

	)

	@/usr/include/asm-generic/posix_types.h

1 #i‚de‡
__ASM_GENERIC_POSIX_TYPES_H


2 
	#__ASM_GENERIC_POSIX_TYPES_H


	)

4 
	~<asm/bô•îl⁄g.h
>

13 #i‚de‡
__kî√l_l⁄g_t


14 
	t__kî√l_l⁄g_t
;

15 
	t__kî√l_ul⁄g_t
;

18 #i‚de‡
__kî√l_öo_t


19 
__kî√l_ul⁄g_t
 
	t__kî√l_öo_t
;

22 #i‚de‡
__kî√l_mode_t


23 
	t__kî√l_mode_t
;

26 #i‚de‡
__kî√l_pid_t


27 
	t__kî√l_pid_t
;

30 #i‚de‡
__kî√l_ùc_pid_t


31 
	t__kî√l_ùc_pid_t
;

34 #i‚de‡
__kî√l_uid_t


35 
	t__kî√l_uid_t
;

36 
	t__kî√l_gid_t
;

39 #i‚de‡
__kî√l_su£c⁄ds_t


40 
__kî√l_l⁄g_t
 
	t__kî√l_su£c⁄ds_t
;

43 #i‚de‡
__kî√l_daddr_t


44 
	t__kî√l_daddr_t
;

47 #i‚de‡
__kî√l_uid32_t


48 
	t__kî√l_uid32_t
;

49 
	t__kî√l_gid32_t
;

52 #i‚de‡
__kî√l_ﬁd_uid_t


53 
__kî√l_uid_t
 
	t__kî√l_ﬁd_uid_t
;

54 
__kî√l_gid_t
 
	t__kî√l_ﬁd_gid_t
;

57 #i‚de‡
__kî√l_ﬁd_dev_t


58 
	t__kî√l_ﬁd_dev_t
;

65 #i‚de‡
__kî√l_size_t


66 #i‡
__BITS_PER_LONG
 != 64

67 
	t__kî√l_size_t
;

68 
	t__kî√l_ssize_t
;

69 
	t__kî√l_±rdiff_t
;

71 
__kî√l_ul⁄g_t
 
	t__kî√l_size_t
;

72 
__kî√l_l⁄g_t
 
	t__kî√l_ssize_t
;

73 
__kî√l_l⁄g_t
 
	t__kî√l_±rdiff_t
;

77 #i‚de‡
__kî√l_fsid_t


79 
	mvÆ
[2];

80 } 
	t__kî√l_fsid_t
;

86 
__kî√l_l⁄g_t
 
	t__kî√l_off_t
;

87 
	t__kî√l_loff_t
;

88 
__kî√l_l⁄g_t
 
	t__kî√l_time_t
;

89 
__kî√l_l⁄g_t
 
	t__kî√l_˛ock_t
;

90 
	t__kî√l_timî_t
;

91 
	t__kî√l_˛ockid_t
;

92 * 
	t__kî√l_ˇddr_t
;

93 
	t__kî√l_uid16_t
;

94 
	t__kî√l_gid16_t
;

	@/usr/include/asm/bitsperlong.h

1 #i‚de‡
__ASM_X86_BITSPERLONG_H


2 
	#__ASM_X86_BITSPERLONG_H


	)

4 #ifde‡
__x86_64__


5 
	#__BITS_PER_LONG
 64

	)

7 
	#__BITS_PER_LONG
 32

	)

10 
	~<asm-gíîic/bô•îl⁄g.h
>

	@/usr/include/bits/sched.h

20 #i‚de‡
__√ed_sched∑øm


22 #i‚de‡
_SCHED_H


28 
	#SCHED_OTHER
 0

	)

29 
	#SCHED_FIFO
 1

	)

30 
	#SCHED_RR
 2

	)

31 #ifde‡
__USE_GNU


32 
	#SCHED_BATCH
 3

	)

33 
	#SCHED_IDLE
 5

	)

35 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

38 #ifde‡
__USE_GNU


40 
	#CSIGNAL
 0x000000f‡

	)

41 
	#CLONE_VM
 0x00000100

	)

42 
	#CLONE_FS
 0x00000200

	)

43 
	#CLONE_FILES
 0x00000400

	)

44 
	#CLONE_SIGHAND
 0x00000800

	)

45 
	#CLONE_PTRACE
 0x00002000

	)

46 
	#CLONE_VFORK
 0x00004000

	)

48 
	#CLONE_PARENT
 0x00008000

	)

50 
	#CLONE_THREAD
 0x00010000

	)

51 
	#CLONE_NEWNS
 0x00020000

	)

52 
	#CLONE_SYSVSEM
 0x00040000

	)

53 
	#CLONE_SETTLS
 0x00080000

	)

54 
	#CLONE_PARENT_SETTID
 0x00100000

	)

56 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

58 
	#CLONE_DETACHED
 0x00400000

	)

59 
	#CLONE_UNTRACED
 0x00800000

	)

61 
	#CLONE_CHILD_SETTID
 0x01000000

	)

63 
	#CLONE_NEWUTS
 0x04000000

	)

64 
	#CLONE_NEWIPC
 0x08000000

	)

65 
	#CLONE_NEWUSER
 0x10000000

	)

66 
	#CLONE_NEWPID
 0x20000000

	)

67 
	#CLONE_NEWNET
 0x40000000

	)

68 
	#CLONE_IO
 0x80000000

	)

72 
	ssched_∑øm


74 
	m__sched_¥i‹ôy
;

77 
	g__BEGIN_DECLS


79 #ifde‡
__USE_GNU


81 
˛⁄e
 ((*
__‚
Ë(*
__¨g
), *
__chûd_°ack
,

82 
__Êags
, *
__¨g
, ...Ë
__THROW
;

85 
	$unsh¨e
 (
__Êags
Ë
__THROW
;

88 
	$sched_gë˝u
 (Ë
__THROW
;

91 
	$£äs
 (
__fd
, 
__n°y≥
Ë
__THROW
;

95 
__END_DECLS


99 #i‡!
deföed
 
__deföed_sched∑øm
 \

100 && (
deföed
 
__√ed_sched∑øm
 || deföed 
_SCHED_H
)

101 
	#__deföed_sched∑øm
 1

	)

103 
	s__sched_∑øm


105 
__sched_¥i‹ôy
;

107 #unde‡
__√ed_sched∑øm


111 #i‡
deföed
 
_SCHED_H
 && !deföed 
__˝u_£t_t_deföed


112 
	#__˝u_£t_t_deföed


	)

114 
	#__CPU_SETSIZE
 1024

	)

115 
	#__NCPUBITS
 (8 *  (
__˝u_mask
))

	)

118 
	t__˝u_mask
;

121 
	#__CPUELT
(
˝u
Ë((˝uË/ 
__NCPUBITS
)

	)

122 
	#__CPUMASK
(
˝u
Ë((
__˝u_mask
Ë1 << ((˝uË% 
__NCPUBITS
))

	)

127 
__˝u_mask
 
__bôs
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

128 } 
	t˝u_£t_t
;

131 #i‡
	`__GNUC_PREREQ
 (2, 91)

132 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

133 dÿ
	`__buûtö_mem£t
 (
˝u£ç
, '\0', 
£tsize
); 0)

	)

135 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

137 
size_t
 
__i
; \

138 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

139 
__˝u_mask
 *
__bôs
 = (
˝u£ç
)->__bits; \

140 
__i
 = 0; __ò< 
__imax
; ++__i) \

141 
__bôs
[
__i
] = 0; \

142 
	}
} 0)

	)

144 
	#__CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

145 (
__exãnsi⁄__
 \

146 ({ 
size_t
 
__˝u
 = (
˝u
); \

147 
__˝u
 / 8 < (
£tsize
) \

148 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

149 |
	`__CPUMASK
 (
__˝u
)) \

150 : 0; }))

	)

151 
	#__CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

152 (
__exãnsi⁄__
 \

153 ({ 
size_t
 
__˝u
 = (
˝u
); \

154 
__˝u
 / 8 < (
£tsize
) \

155 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

156 &~
	`__CPUMASK
 (
__˝u
)) \

157 : 0; }))

	)

158 
	#__CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

159 (
__exãnsi⁄__
 \

160 ({ 
size_t
 
__˝u
 = (
˝u
); \

161 
__˝u
 / 8 < (
£tsize
) \

162 ? ((((c⁄° 
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

163 & 
	`__CPUMASK
 (
__˝u
))) != 0 \

164 : 0; }))

	)

166 
	#__CPU_COUNT_S
(
£tsize
, 
˝u£ç
) \

167 
	`__sched_˝ucou¡
 (
£tsize
, 
˝u£ç
)

	)

169 #i‡
__GNUC_PREREQ
 (2, 91)

170 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

171 (
	`__buûtö_memcmp
 (
˝u£ç1
, 
˝u£ç2
, 
£tsize
Ë=0)

	)

173 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

174 (
__exãnsi⁄__
 \

175 ({ c⁄° 
__˝u_mask
 *
__¨r1
 = (
˝u£ç1
)->
__bôs
; \

176 c⁄° 
__˝u_mask
 *
__¨r2
 = (
˝u£ç2
)->
__bôs
; \

177 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

178 
size_t
 
__i
; \

179 
__i
 = 0; __ò< 
__imax
; ++__i) \

180 i‡(
__¨r1
[
__i
] !
__¨r2
[__i]) \

182 
__i
 =
__imax
; }))

	)

185 
	#__CPU_OP_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, 
›
) \

186 (
__exãnsi⁄__
 \

187 ({ 
˝u_£t_t
 *
__de°
 = (
de°£t
); \

188 c⁄° 
__˝u_mask
 *
__¨r1
 = (
§c£t1
)->
__bôs
; \

189 c⁄° 
__˝u_mask
 *
__¨r2
 = (
§c£t2
)->
__bôs
; \

190 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

191 
size_t
 
__i
; \

192 
__i
 = 0; __ò< 
__imax
; ++__i) \

193 ((
__˝u_mask
 *Ë
__de°
->
__bôs
)[
__i
] = 
__¨r1
[__i] 
›
 
__¨r2
[__i]; \

194 
__de°
; }))

	)

196 
	#__CPU_ALLOC_SIZE
(
cou¡
) \

197 ((((
cou¡
Ë+ 
__NCPUBITS
 - 1Ë/ __NCPUBITSË*  (
__˝u_mask
))

	)

198 
	#__CPU_ALLOC
(
cou¡
Ë
	`__sched_˝uÆloc
 (cou¡)

	)

199 
	#__CPU_FREE
(
˝u£t
Ë
	`__sched_˝u‰ì
 (˝u£t)

	)

201 
__BEGIN_DECLS


203 
	$__sched_˝ucou¡
 (
size_t
 
__£tsize
, c⁄° 
˝u_£t_t
 *
__£ç
)

204 
__THROW
;

205 
˝u_£t_t
 *
	$__sched_˝uÆloc
 (
size_t
 
__cou¡
Ë
__THROW
 
__wur
;

206 
	$__sched_˝u‰ì
 (
˝u_£t_t
 *
__£t
Ë
__THROW
;

208 
__END_DECLS


	@/usr/include/asm-generic/bitsperlong.h

1 #i‚de‡
__ASM_GENERIC_BITS_PER_LONG


2 
	#__ASM_GENERIC_BITS_PER_LONG


	)

11 #i‚de‡
__BITS_PER_LONG


12 
	#__BITS_PER_LONG
 32

	)

	@
1
.
1
/usr/include
671
25021
src/ada-tests/mptests/mp01/config_base.h
src/ada-tests/mptests/mp01/node1/config.h
src/ada-tests/mptests/mp01/node2/config.h
src/ada-tests/mptests/mp02/config_base.h
src/ada-tests/mptests/mp02/node1/config.h
src/ada-tests/mptests/mp02/node2/config.h
src/ada-tests/mptests/mp03/config_base.h
src/ada-tests/mptests/mp03/node1/config.h
src/ada-tests/mptests/mp03/node2/config.h
src/ada-tests/mptests/mp04/config_base.h
src/ada-tests/mptests/mp04/node1/config.h
src/ada-tests/mptests/mp04/node2/config.h
src/ada-tests/mptests/mp05/config_base.h
src/ada-tests/mptests/mp05/node1/config.h
src/ada-tests/mptests/mp05/node2/config.h
src/ada-tests/mptests/mp06/config_base.h
src/ada-tests/mptests/mp06/node1/config.h
src/ada-tests/mptests/mp06/node2/config.h
src/ada-tests/mptests/mp07/config_base.h
src/ada-tests/mptests/mp07/node1/config.h
src/ada-tests/mptests/mp07/node2/config.h
src/ada-tests/mptests/mp08/config_base.h
src/ada-tests/mptests/mp08/node1/config.h
src/ada-tests/mptests/mp08/node2/config.h
src/ada-tests/mptests/mp09/config_base.h
src/ada-tests/mptests/mp09/node1/config.h
src/ada-tests/mptests/mp09/node2/config.h
src/ada-tests/mptests/mp10/config_base.h
src/ada-tests/mptests/mp10/node1/config.h
src/ada-tests/mptests/mp10/node2/config.h
src/ada-tests/mptests/mp11/config_base.h
src/ada-tests/mptests/mp11/node1/config.h
src/ada-tests/mptests/mp11/node2/config.h
src/ada-tests/mptests/mp12/config_base.h
src/ada-tests/mptests/mp12/node1/config.h
src/ada-tests/mptests/mp12/node2/config.h
src/ada-tests/mptests/mp13/config_base.h
src/ada-tests/mptests/mp13/node1/config.h
src/ada-tests/mptests/mp13/node2/config.h
src/ada-tests/mptests/mp14/config_base.h
src/ada-tests/mptests/mp14/node1/config.h
src/ada-tests/mptests/mp14/node2/config.h
src/ada-tests/samples/base_mp/config.h
src/ada-tests/samples/base_sp/config.h
src/ada-tests/samples/hello/config.h
src/ada-tests/samples/nsecs/config.h
src/ada-tests/samples/ticker/config.h
src/ada-tests/sptests/sp01/config.h
src/ada-tests/sptests/sp02/config.h
src/ada-tests/sptests/sp03/config.h
src/ada-tests/sptests/sp04/config.h
src/ada-tests/sptests/sp05/config.h
src/ada-tests/sptests/sp06/config.h
src/ada-tests/sptests/sp07/config.h
src/ada-tests/sptests/sp08/config.h
src/ada-tests/sptests/sp09/config.h
src/ada-tests/sptests/sp11/config.h
src/ada-tests/sptests/sp12/config.h
src/ada-tests/sptests/sp13/config.h
src/ada-tests/sptests/sp14/config.h
src/ada-tests/sptests/sp15/config.h
src/ada-tests/sptests/sp16/config.h
src/ada-tests/sptests/sp17/config.h
src/ada-tests/sptests/sp19/config.h
src/ada-tests/sptests/sp20/config.h
src/ada-tests/sptests/sp22/config.h
src/ada-tests/sptests/sp23/config.h
src/ada-tests/sptests/sp24/config.h
src/ada-tests/sptests/sp25/config.h
src/ada-tests/sptests/spname01/config.h
src/ada-tests/support/init.c
src/ada-tests/tmtests/tm01/config.h
src/ada-tests/tmtests/tm02/config.h
src/ada-tests/tmtests/tm03/config.h
src/ada-tests/tmtests/tm04/config.h
src/ada-tests/tmtests/tm05/config.h
src/ada-tests/tmtests/tm06/config.h
src/ada-tests/tmtests/tm07/config.h
src/ada-tests/tmtests/tm08/config.h
src/ada-tests/tmtests/tm09/config.h
src/ada-tests/tmtests/tm10/config.h
src/ada-tests/tmtests/tm11/config.h
src/ada-tests/tmtests/tm12/config.h
src/ada-tests/tmtests/tm13/config.h
src/ada-tests/tmtests/tm14/config.h
src/ada-tests/tmtests/tm15/config.h
src/ada-tests/tmtests/tm16/config.h
src/ada-tests/tmtests/tm17/config.h
src/ada-tests/tmtests/tm18/config.h
src/ada-tests/tmtests/tm19/config.h
src/ada-tests/tmtests/tm20/config.h
src/ada-tests/tmtests/tm21/config.h
src/ada-tests/tmtests/tm22/config.h
src/ada-tests/tmtests/tm23/config.h
src/ada-tests/tmtests/tm24/config.h
src/ada-tests/tmtests/tm25/config.h
src/ada-tests/tmtests/tm28/config.h
src/ada-tests/tmtests/tm29/config.h
src/ada-tests/tmtests/tmck/config.h
src/ada-tests/tmtests/tmoverhd/config.h
src/lib/libbsp/arm/csb337/console/fbcons.c
src/lib/libbsp/arm/csb337/console/font8x16.h
src/lib/libbsp/arm/csb337/console/sed1356.c
src/lib/libbsp/arm/csb337/console/sed1356_16bit.h
src/lib/libbsp/arm/csb337/console/uarts.c
src/lib/libbsp/arm/csb337/include/bsp.h
src/lib/libbsp/arm/csb337/include/sed1356.h
src/lib/libbsp/arm/csb337/network/network.c
src/lib/libbsp/arm/csb337/startup/bspreset.c
src/lib/libbsp/arm/csb337/startup/bspstart.c
src/lib/libbsp/arm/csb337/startup/memmap.c
src/lib/libbsp/arm/csb337/startup/umonsupp.c
src/lib/libbsp/arm/gp32/console/uart.c
src/lib/libbsp/arm/gp32/include/bsp.h
src/lib/libbsp/arm/gp32/smc/smc.c
src/lib/libbsp/arm/gp32/smc/smc.h
src/lib/libbsp/arm/gp32/startup/bspidle.c
src/lib/libbsp/arm/gp32/startup/bspreset.c
src/lib/libbsp/arm/gp32/startup/bspstart.c
src/lib/libbsp/arm/gp32/startup/memmap.c
src/lib/libbsp/arm/hi3518e/console/uart.c
src/lib/libbsp/arm/hi3518e/i2c/i2c.c
src/lib/libbsp/arm/hi3518e/include/bsp.h
src/lib/libbsp/arm/hi3518e/include/i2c.h
src/lib/libbsp/arm/hi3518e/include/pinmux.h
src/lib/libbsp/arm/hi3518e/include/vicap.h
src/lib/libbsp/arm/hi3518e/startup/bspreset.c
src/lib/libbsp/arm/hi3518e/startup/bspstart.c
src/lib/libbsp/arm/hi3518e/video/vicap.c
src/lib/libbsp/arm/lpc32xx/console/console-config.c
src/lib/libbsp/arm/lpc32xx/console/hsu.c
src/lib/libbsp/arm/lpc32xx/include/boot.h
src/lib/libbsp/arm/lpc32xx/include/bsp.h
src/lib/libbsp/arm/lpc32xx/include/emc.h
src/lib/libbsp/arm/lpc32xx/include/hsu.h
src/lib/libbsp/arm/lpc32xx/include/i2c.h
src/lib/libbsp/arm/lpc32xx/include/irq.h
src/lib/libbsp/arm/lpc32xx/include/lpc-clock-config.h
src/lib/libbsp/arm/lpc32xx/include/lpc-ethernet-config.h
src/lib/libbsp/arm/lpc32xx/include/lpc32xx.h
src/lib/libbsp/arm/lpc32xx/include/mmu.h
src/lib/libbsp/arm/lpc32xx/include/nand-mlc.h
src/lib/libbsp/arm/lpc32xx/include/tm27.h
src/lib/libbsp/arm/lpc32xx/irq/irq.c
src/lib/libbsp/arm/lpc32xx/misc/boot.c
src/lib/libbsp/arm/lpc32xx/misc/emc.c
src/lib/libbsp/arm/lpc32xx/misc/i2c.c
src/lib/libbsp/arm/lpc32xx/misc/idle-thread.c
src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-erase-block-safe.c
src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-read-blocks.c
src/lib/libbsp/arm/lpc32xx/misc/nand-mlc-write-blocks.c
src/lib/libbsp/arm/lpc32xx/misc/nand-mlc.c
src/lib/libbsp/arm/lpc32xx/misc/nand-select.c
src/lib/libbsp/arm/lpc32xx/misc/restart.c
src/lib/libbsp/arm/lpc32xx/misc/system-clocks.c
src/lib/libbsp/arm/lpc32xx/misc/timer.c
src/lib/libbsp/arm/lpc32xx/rtc/rtc-config.c
src/lib/libbsp/arm/lpc32xx/startup/bspreset.c
src/lib/libbsp/arm/lpc32xx/startup/bspstart.c
src/lib/libbsp/arm/lpc32xx/startup/bspstarthooks.c
src/lib/libbsp/arm/shared/abort/abort.c
src/lib/libbsp/arm/shared/abort/abort.h
src/lib/libbsp/arm/shared/abort/simple_abort.c
src/lib/libbsp/arm/shared/arm-a9mpcore-clock-config.c
src/lib/libbsp/arm/shared/arm-a9mpcore-smp.c
src/lib/libbsp/arm/shared/arm-cp15-set-exception-handler.c
src/lib/libbsp/arm/shared/arm-cp15-set-ttb-entries.c
src/lib/libbsp/arm/shared/arm-gic-irq.c
src/lib/libbsp/arm/shared/arm-l2c-310/cache_.h
src/lib/libbsp/arm/shared/arm-pl011.c
src/lib/libbsp/arm/shared/arm-pl050.c
src/lib/libbsp/arm/shared/arm-pl111-fb.c
src/lib/libbsp/arm/shared/armv7m/clock/armv7m-clock-config.c
src/lib/libbsp/arm/shared/armv7m/include/armv7m-irq.h
src/lib/libbsp/arm/shared/armv7m/irq/armv7m-irq-dispatch.c
src/lib/libbsp/arm/shared/armv7m/irq/armv7m-irq.c
src/lib/libbsp/arm/shared/comm/uart.c
src/lib/libbsp/arm/shared/comm/uart.h
src/lib/libbsp/arm/shared/doxygen.h
src/lib/libbsp/arm/shared/include/arm-a8core-start.h
src/lib/libbsp/arm/shared/include/arm-a9mpcore-clock.h
src/lib/libbsp/arm/shared/include/arm-a9mpcore-irq.h
src/lib/libbsp/arm/shared/include/arm-a9mpcore-regs.h
src/lib/libbsp/arm/shared/include/arm-a9mpcore-start.h
src/lib/libbsp/arm/shared/include/arm-cache-l1.h
src/lib/libbsp/arm/shared/include/arm-cp15-start.h
src/lib/libbsp/arm/shared/include/arm-errata.h
src/lib/libbsp/arm/shared/include/arm-gic-irq.h
src/lib/libbsp/arm/shared/include/arm-gic-regs.h
src/lib/libbsp/arm/shared/include/arm-gic-tm27.h
src/lib/libbsp/arm/shared/include/arm-gic.h
src/lib/libbsp/arm/shared/include/arm-pl011-regs.h
src/lib/libbsp/arm/shared/include/arm-pl011.h
src/lib/libbsp/arm/shared/include/arm-pl050-regs.h
src/lib/libbsp/arm/shared/include/arm-pl050.h
src/lib/libbsp/arm/shared/include/arm-pl111-fb.h
src/lib/libbsp/arm/shared/include/arm-pl111-regs.h
src/lib/libbsp/arm/shared/include/arm-release-id.h
src/lib/libbsp/arm/shared/include/linker-symbols.h
src/lib/libbsp/arm/shared/include/start.h
src/lib/libbsp/arm/shared/lpc/clock/lpc-clock-config.c
src/lib/libbsp/arm/shared/lpc/include/lpc-dma.h
src/lib/libbsp/arm/shared/lpc/include/lpc-emc.h
src/lib/libbsp/arm/shared/lpc/include/lpc-i2s.h
src/lib/libbsp/arm/shared/lpc/include/lpc-lcd.h
src/lib/libbsp/arm/shared/lpc/include/lpc-timer.h
src/lib/libbsp/arm/shared/lpc/network/lpc-ethernet.c
src/lib/libbsp/arm/shared/mminit.c
src/lib/libbsp/arm/smdk2410/include/bsp.h
src/lib/libbsp/arm/smdk2410/startup/bspreset.c
src/lib/libbsp/arm/smdk2410/startup/memmap.c
src/lib/libbsp/arm/stm32f4/console/console-config.c
src/lib/libbsp/arm/stm32f4/console/usart.c
src/lib/libbsp/arm/stm32f4/i2c/i2c-config.c
src/lib/libbsp/arm/stm32f4/i2c/i2c.c
src/lib/libbsp/arm/stm32f4/include/bsp.h
src/lib/libbsp/arm/stm32f4/include/i2c.h
src/lib/libbsp/arm/stm32f4/include/io.h
src/lib/libbsp/arm/stm32f4/include/irq.h
src/lib/libbsp/arm/stm32f4/include/rcc.h
src/lib/libbsp/arm/stm32f4/include/stm32_i2c.h
src/lib/libbsp/arm/stm32f4/include/stm32_usart.h
src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_exti.h
src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_gpio.h
src/lib/libbsp/arm/stm32f4/include/stm32f10xxx_rcc.h
src/lib/libbsp/arm/stm32f4/include/stm32f4.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_adc.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_exti.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_flash.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_gpio.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_otgfs.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_pwr.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_rcc.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_syscfg.h
src/lib/libbsp/arm/stm32f4/include/stm32f4xxxx_tim.h
src/lib/libbsp/arm/stm32f4/include/usart.h
src/lib/libbsp/arm/stm32f4/startup/bspreset.c
src/lib/libbsp/arm/stm32f4/startup/bspstart.c
src/lib/libbsp/arm/stm32f4/startup/bspstarthook.c
src/lib/libbsp/arm/stm32f4/startup/io.c
src/lib/libbsp/arm/stm32f4/startup/rcc.c
src/lib/libbsp/arm/stm32f4/startup/start-config-io.c
src/lib/libbsp/arm/xilinx-zynq/console/console-config.c
src/lib/libbsp/arm/xilinx-zynq/console/zynq-uart.c
src/lib/libbsp/arm/xilinx-zynq/i2c/cadence-i2c.c
src/lib/libbsp/arm/xilinx-zynq/include/bsp.h
src/lib/libbsp/arm/xilinx-zynq/include/cadence-i2c-regs.h
src/lib/libbsp/arm/xilinx-zynq/include/cadence-i2c.h
src/lib/libbsp/arm/xilinx-zynq/include/i2c.h
src/lib/libbsp/arm/xilinx-zynq/include/irq.h
src/lib/libbsp/arm/xilinx-zynq/include/tm27.h
src/lib/libbsp/arm/xilinx-zynq/include/zynq-uart-regs.h
src/lib/libbsp/arm/xilinx-zynq/include/zynq-uart.h
src/lib/libbsp/arm/xilinx-zynq/startup/bspreset.c
src/lib/libbsp/arm/xilinx-zynq/startup/bspsmp.c
src/lib/libbsp/arm/xilinx-zynq/startup/bspstart.c
src/lib/libbsp/arm/xilinx-zynq/startup/bspstarthooks.c
src/lib/libbsp/arm/xilinx-zynq/startup/bspstartmmu.c
src/lib/libbsp/shared/bootcard.c
src/lib/libbsp/shared/bspclean.c
src/lib/libbsp/shared/bspdriverlevelhook.c
src/lib/libbsp/shared/bspgetworkarea.c
src/lib/libbsp/shared/bsplibc.c
src/lib/libbsp/shared/bsppost.c
src/lib/libbsp/shared/bsppredriverhook.c
src/lib/libbsp/shared/bsppretaskinghook.c
src/lib/libbsp/shared/bspreset.c
src/lib/libbsp/shared/bspreset_loop.c
src/lib/libbsp/shared/bspsmp.c
src/lib/libbsp/shared/bspsmpgetcurrentprocessor.c
src/lib/libbsp/shared/bspstart.c
src/lib/libbsp/shared/clock_driver_simidle.c
src/lib/libbsp/shared/clockdrv_shell.h
src/lib/libbsp/shared/console-output-char.c
src/lib/libbsp/shared/console-polled.c
src/lib/libbsp/shared/console-termios-init.c
src/lib/libbsp/shared/console-termios.c
src/lib/libbsp/shared/console.c
src/lib/libbsp/shared/console_control.c
src/lib/libbsp/shared/console_private.h
src/lib/libbsp/shared/console_read.c
src/lib/libbsp/shared/console_select.c
src/lib/libbsp/shared/console_select_simple.c
src/lib/libbsp/shared/console_write.c
src/lib/libbsp/shared/cpucounterdiff.c
src/lib/libbsp/shared/cpucounterread.c
src/lib/libbsp/shared/doxygen.h
src/lib/libbsp/shared/dummy_printk_support.c
src/lib/libbsp/shared/gdbstub/rtems-stub-glue.c
src/lib/libbsp/shared/get-serial-mouse-ps2.c
src/lib/libbsp/shared/gnatinstallhandler.c
src/lib/libbsp/shared/include/bootcard.h
src/lib/libbsp/shared/include/cache_.h
src/lib/libbsp/shared/include/console-polled.h
src/lib/libbsp/shared/include/console-termios.h
src/lib/libbsp/shared/include/coverhd.h
src/lib/libbsp/shared/include/default-initial-extension.h
src/lib/libbsp/shared/include/doxygen.h
src/lib/libbsp/shared/include/fatal.h
src/lib/libbsp/shared/include/irq-generic.h
src/lib/libbsp/shared/include/irq-info.h
src/lib/libbsp/shared/include/irq.h
src/lib/libbsp/shared/include/mm.h
src/lib/libbsp/shared/include/stackalloc.h
src/lib/libbsp/shared/include/tm27.h
src/lib/libbsp/shared/include/u-boot.h
src/lib/libbsp/shared/include/uart-output-char.h
src/lib/libbsp/shared/include/utility.h
src/lib/libbsp/shared/include/zilog/z8036.h
src/lib/libbsp/shared/include/zilog/z8530.h
src/lib/libbsp/shared/sbrk.c
src/lib/libbsp/shared/setvec.c
src/lib/libbsp/shared/src/bsp-uboot-board-info.c
src/lib/libbsp/shared/src/irq-default-handler.c
src/lib/libbsp/shared/src/irq-generic.c
src/lib/libbsp/shared/src/irq-info.c
src/lib/libbsp/shared/src/irq-legacy.c
src/lib/libbsp/shared/src/irq-server.c
src/lib/libbsp/shared/src/irq-shell.c
src/lib/libbsp/shared/src/stackalloc.c
src/lib/libbsp/shared/src/uart-output-char.c
src/lib/libbsp/shared/timerstub.c
src/lib/libbsp/shared/tod.c
src/lib/libbsp/shared/umon/cli.h
src/lib/libbsp/shared/umon/doxygen.h
src/lib/libbsp/shared/umon/monlib.c
src/lib/libbsp/shared/umon/monlib.h
src/lib/libbsp/shared/umon/tfs.h
src/lib/libbsp/shared/umon/tfsDriver.c
src/lib/libbsp/shared/umon/umon.h
src/lib/libbsp/shared/umon/umoncons.c
src/lib/libbsp/shared/umon/umonrtemsglue.c
src/lib/libbsp/shared/vmeUniverse/VME.h
src/lib/libbsp/shared/vmeUniverse/VMEDMA.h
src/lib/libbsp/shared/vmeUniverse/bspVmeDmaList.c
src/lib/libbsp/shared/vmeUniverse/bspVmeDmaList.h
src/lib/libbsp/shared/vmeUniverse/bspVmeDmaListP.h
src/lib/libbsp/shared/vmeUniverse/doxygen.h
src/lib/libbsp/shared/vmeUniverse/vmeTsi148.c
src/lib/libbsp/shared/vmeUniverse/vmeTsi148.h
src/lib/libbsp/shared/vmeUniverse/vmeTsi148DMA.h
src/lib/libbsp/shared/vmeUniverse/vmeUniverse.c
src/lib/libbsp/shared/vmeUniverse/vmeUniverse.h
src/lib/libbsp/shared/vmeUniverse/vmeUniverseDMA.h
src/lib/libbsp/shared/vmeUniverse/vme_am_defs.h
src/lib/libcpu/arm/at91rm9200/clock/clock.c
src/lib/libcpu/arm/at91rm9200/dbgu/dbgu.c
src/lib/libcpu/arm/at91rm9200/include/at91rm9200.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_dbgu.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_emac.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_gpio.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_mem.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_pmc.h
src/lib/libcpu/arm/at91rm9200/include/at91rm9200_usart.h
src/lib/libcpu/arm/at91rm9200/include/bits.h
src/lib/libcpu/arm/at91rm9200/irq/irq.c
src/lib/libcpu/arm/at91rm9200/irq/irq.h
src/lib/libcpu/arm/at91rm9200/pmc/pmc.c
src/lib/libcpu/arm/at91rm9200/timer/timer.c
src/lib/libcpu/arm/at91rm9200/usart/usart.c
src/lib/libcpu/arm/hi3518e/clock/clockdrv.c
src/lib/libcpu/arm/hi3518e/include/platform.h
src/lib/libcpu/arm/hi3518e/irq/irq.c
src/lib/libcpu/arm/hi3518e/irq/irq.h
src/lib/libcpu/arm/hi3518e/timer/timer.c
src/lib/libcpu/arm/lpc22xx/clock/clockdrv.c
src/lib/libcpu/arm/lpc22xx/include/lpc22xx.h
src/lib/libcpu/arm/lpc22xx/irq/bsp_irq_init.c
src/lib/libcpu/arm/lpc22xx/irq/irq.c
src/lib/libcpu/arm/lpc22xx/irq/irq.h
src/lib/libcpu/arm/lpc22xx/timer/lpc_timer.h
src/lib/libcpu/arm/lpc22xx/timer/timer.c
src/lib/libcpu/arm/s3c24xx/clock/clockdrv.c
src/lib/libcpu/arm/s3c24xx/clock/support.c
src/lib/libcpu/arm/s3c24xx/include/s3c2400.h
src/lib/libcpu/arm/s3c24xx/include/s3c2410.h
src/lib/libcpu/arm/s3c24xx/include/s3c24xx.h
src/lib/libcpu/arm/s3c24xx/irq/irq.c
src/lib/libcpu/arm/s3c24xx/irq/irq.h
src/lib/libcpu/arm/s3c24xx/timer/timer.c
src/lib/libcpu/arm/shared/arm920/mmu.c
src/lib/libcpu/arm/shared/include/am335x.h
src/lib/libcpu/arm/shared/include/arm-cp15.h
src/lib/libcpu/arm/shared/include/cache_.h
src/lib/libcpu/arm/shared/include/mmu.h
src/lib/libcpu/arm/shared/include/omap3.h
src/lib/libcpu/arm/shared/include/omap_timer.h
src/lib/libcpu/shared/include/cache.h
src/lib/libcpu/shared/src/cache_manager.c
src/lib/libcpu/shared/src/no_cache.c
src/libchip/display/disp_fonts.h
src/libchip/display/disp_hcms29xx.c
src/libchip/display/disp_hcms29xx.h
src/libchip/display/font_hcms29xx.c
src/libchip/display/font_hcms29xx.h
src/libchip/flash/am29lv160.c
src/libchip/flash/am29lv160.h
src/libchip/i2c/i2c-2b-eeprom.c
src/libchip/i2c/i2c-2b-eeprom.h
src/libchip/i2c/i2c-ds1621.c
src/libchip/i2c/i2c-ds1621.h
src/libchip/i2c/i2c-sc620.c
src/libchip/i2c/i2c-sc620.h
src/libchip/i2c/spi-flash-m25p40.c
src/libchip/i2c/spi-flash-m25p40.h
src/libchip/i2c/spi-fram-fm25l256.c
src/libchip/i2c/spi-fram-fm25l256.h
src/libchip/i2c/spi-memdrv.c
src/libchip/i2c/spi-memdrv.h
src/libchip/i2c/spi-sd-card.c
src/libchip/i2c/spi-sd-card.h
src/libchip/ide/ata.c
src/libchip/ide/ata.h
src/libchip/ide/ata_internal.h
src/libchip/ide/ata_util.c
src/libchip/ide/ide_controller.c
src/libchip/ide/ide_ctrl.h
src/libchip/ide/ide_ctrl_cfg.h
src/libchip/ide/ide_ctrl_io.h
src/libchip/network/cs8900.c
src/libchip/network/cs8900.h
src/libchip/network/dec21140.c
src/libchip/network/dwmac-1000-core.c
src/libchip/network/dwmac-1000-dma.c
src/libchip/network/dwmac-1000-ethernet-mac-ops.c
src/libchip/network/dwmac-common.h
src/libchip/network/dwmac-core.c
src/libchip/network/dwmac-core.h
src/libchip/network/dwmac-desc-com.c
src/libchip/network/dwmac-desc-com.h
src/libchip/network/dwmac-desc-enh.c
src/libchip/network/dwmac-desc.h
src/libchip/network/dwmac-regs.h
src/libchip/network/dwmac.c
src/libchip/network/dwmac.h
src/libchip/network/elnk.c
src/libchip/network/greth.c
src/libchip/network/greth.h
src/libchip/network/i82586.c
src/libchip/network/i82586reg.h
src/libchip/network/i82586var.h
src/libchip/network/if_dc.c
src/libchip/network/if_dcreg.h
src/libchip/network/if_fxp.c
src/libchip/network/if_fxpreg.h
src/libchip/network/if_fxpvar.h
src/libchip/network/open_eth.c
src/libchip/network/open_eth.h
src/libchip/network/smc91111.c
src/libchip/network/smc91111.h
src/libchip/network/smc91111config.h
src/libchip/network/smc91111exp.h
src/libchip/network/sonic.c
src/libchip/network/sonic.h
src/libchip/rtc/ds1375-rtc.h
src/libchip/rtc/ds1375.c
src/libchip/rtc/icm7170.c
src/libchip/rtc/icm7170.h
src/libchip/rtc/icm7170_reg.c
src/libchip/rtc/icm7170_reg2.c
src/libchip/rtc/icm7170_reg4.c
src/libchip/rtc/icm7170_reg8.c
src/libchip/rtc/m48t08.c
src/libchip/rtc/m48t08.h
src/libchip/rtc/m48t08_reg.c
src/libchip/rtc/m48t08_reg2.c
src/libchip/rtc/m48t08_reg4.c
src/libchip/rtc/m48t08_reg8.c
src/libchip/rtc/mc146818a.c
src/libchip/rtc/mc146818a.h
src/libchip/rtc/mc146818a_ioreg.c
src/libchip/rtc/rtc.h
src/libchip/rtc/rtcprobe.c
src/libchip/sensor/ov9712.c
src/libchip/sensor/ov9712.h
src/libchip/serial/mc68681.c
src/libchip/serial/mc68681.h
src/libchip/serial/mc68681_baud.c
src/libchip/serial/mc68681_p.h
src/libchip/serial/mc68681_reg.c
src/libchip/serial/mc68681_reg2.c
src/libchip/serial/mc68681_reg4.c
src/libchip/serial/mc68681_reg8.c
src/libchip/serial/ns16550-context.c
src/libchip/serial/ns16550.c
src/libchip/serial/ns16550.h
src/libchip/serial/ns16550_p.h
src/libchip/serial/serial.h
src/libchip/serial/serprobe.c
src/libchip/serial/sersupp.h
src/libchip/serial/z85c30.c
src/libchip/serial/z85c30.h
src/libchip/serial/z85c30_p.h
src/libchip/serial/z85c30_reg.c
src/libchip/shmdr/addlq.c
src/libchip/shmdr/cnvpkt.c
src/libchip/shmdr/dump.c
src/libchip/shmdr/fatal.c
src/libchip/shmdr/getlq.c
src/libchip/shmdr/getpkt.c
src/libchip/shmdr/init.c
src/libchip/shmdr/initlq.c
src/libchip/shmdr/intr.c
src/libchip/shmdr/mpci.h
src/libchip/shmdr/mpisr.c
src/libchip/shmdr/poll.c
src/libchip/shmdr/receive.c
src/libchip/shmdr/retpkt.c
src/libchip/shmdr/send.c
src/libchip/shmdr/shm_driver.h
src/librtems++/include/rtems++/rtemsEvent.h
src/librtems++/include/rtems++/rtemsInterrupt.h
src/librtems++/include/rtems++/rtemsMessageQueue.h
src/librtems++/include/rtems++/rtemsSemaphore.h
src/librtems++/include/rtems++/rtemsStatusCode.h
src/librtems++/include/rtems++/rtemsTask.h
src/librtems++/include/rtems++/rtemsTaskMode.h
src/librtems++/include/rtems++/rtemsTimer.h
src/librtems++/src/rtemsEvent.cc
src/librtems++/src/rtemsInterrupt.cc
src/librtems++/src/rtemsMessageQueue.cc
src/librtems++/src/rtemsSemaphore.cc
src/librtems++/src/rtemsStatusCode.cc
src/librtems++/src/rtemsTask.cc
src/librtems++/src/rtemsTimer.cc
src/support/version.c
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/inttypes.h
/usr/include/limits.h
/usr/include/net/ethernet.h
/usr/include/net/if.h
/usr/include/net/if_arp.h
/usr/include/netinet/if_ether.h
/usr/include/netinet/in.h
/usr/include/netinet/in_systm.h
/usr/include/netinet/ip.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/fcntl.h
/usr/include/sys/ioctl.h
/usr/include/sys/param.h
/usr/include/sys/queue.h
/usr/include/sys/socket.h
/usr/include/sys/types.h
/usr/include/termios.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/byteswap.h
/usr/include/bits/confname.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/in.h
/usr/include/bits/ioctl-types.h
/usr/include/bits/ioctls.h
/usr/include/bits/param.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/socket.h
/usr/include/bits/socket2.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-bsearch.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/termios.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/bits/xopen_lim.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/linux/if_ether.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/sys/ttydefaults.h
/usr/include/sys/ucontext.h
/usr/include/sys/uio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/asm/ioctls.h
/usr/include/asm/socket.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/endian.h
/usr/include/bits/fcntl-linux.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sockaddr.h
/usr/include/bits/socket_type.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/timex.h
/usr/include/bits/typesizes.h
/usr/include/bits/uio.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/linux/limits.h
/usr/include/linux/param.h
/usr/include/linux/types.h
/usr/include/stdc-predef.h
/usr/include/asm-generic/ioctls.h
/usr/include/asm-generic/socket.h
/usr/include/asm/errno.h
/usr/include/asm/param.h
/usr/include/asm/types.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/linux/posix_types.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/asm-generic/param.h
/usr/include/asm-generic/types.h
/usr/include/asm/posix_types.h
/usr/include/asm/sockios.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/gnu/option-groups.h
/usr/include/linux/ioctl.h
/usr/include/linux/stddef.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
/usr/include/asm-generic/int-ll64.h
/usr/include/asm-generic/sockios.h
/usr/include/asm/ioctl.h
/usr/include/asm/posix_types_32.h
/usr/include/asm/posix_types_64.h
/usr/include/asm/posix_types_x32.h
/usr/include/bits/setjmp.h
/usr/include/sched.h
/usr/include/asm-generic/ioctl.h
/usr/include/asm-generic/posix_types.h
/usr/include/asm/bitsperlong.h
/usr/include/bits/sched.h
/usr/include/asm-generic/bitsperlong.h
